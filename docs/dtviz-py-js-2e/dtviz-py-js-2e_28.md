# 第二十二章：结论

尽管本书有一个引导性的叙述——将一些基本的维基百科 HTML 页面转化为现代、交互式的 JavaScript Web 可视化——它旨在根据需要随时查阅。不同的部分是独立的，允许数据集以其各个阶段的存在，并可以独立使用。在继续前进之前，让我们简要回顾一下之前涵盖的内容，并提出一些未来可视化工作的想法。

# 回顾

本书分为五个部分。第一部分介绍了基本的 Python 和 JavaScript 数据可视化工具包，而接下来的四部分则展示了如何获取原始数据、清理数据、探索数据，最后将其转化为现代 Web 可视化。这个精炼和转化的过程以数据可视化挑战为基础：将基本的维基百科诺贝尔奖列表转化为更具吸引力和信息性的数据集。现在让我们总结每个部分的关键教训。

## 第 I 部分：基本工具包

我们的基本工具包包括：

+   一种连接 Python 和 JavaScript 的语言学习桥梁。设计它的初衷是平滑过渡这两种语言，突出它们的许多相似之处，并为现代数据可视化的双语过程设定场景。Python 和 JavaScript 有更多共同点，这使得在它们之间切换变得更加轻松。

+   能够轻松读写主要数据格式（例如 JSON 和 CSV）和数据库（包括 SQL 和 NoSQL）是 Python 的一大优势。我们看到，在 Python 中传递数据如此简单，可以在此过程中转换格式并更改数据库。数据的流动是任何数据可视化工具链的主要润滑剂。

+   我们讨论了开始制作现代、交互式、基于浏览器的数据可视化所需的基本 Web 开发（webdev）技能。通过专注于单页面应用程序的概念，而不是构建整个网站，我们最大程度地减少了传统的 Web 开发，并将重点放在用 JavaScript 编程您的视觉创作上。可伸缩矢量图形（SVG）的介绍，作为 D3 可视化的主要构建块，为我们在第五部分创建诺贝尔奖可视化奠定了基础（part05.xhtml#part_viz）。

## 第 II 部分：获取您的数据

在本书的这一部分中，我们看到如何使用 Python 从 Web 获取数据，假设数据可视化者没有提供一个干净、整洁的数据文件：

+   如果你幸运的话，在一个易于使用的数据格式（即 JSON 或 CSV）的开放 URL 上，可能有一个干净的文件，只需进行简单的 HTTP 请求即可获取。或者，可能有一个专门的 Web API 用于您的数据集，如果幸运的话，它可能是一个 RESTful API。作为示例，我们看了如何使用 Twitter API（通过 Python 的 Tweepy 库）。我们还看到了如何使用 Google 电子表格，这是数据可视化中广泛使用的数据共享资源。

+   当感兴趣的数据以人类可读形式出现在网络上，通常是在 HTML 表格、列表或分层内容块中时，情况会更加复杂。在这种情况下，你必须求助于*抓取*，获取原始 HTML 内容，然后使用解析器使其嵌入内容可用。我们看到了如何使用 Python 的轻量级 Beautiful Soup 抓取库以及更多功能强大和重量级的 Scrapy，后者是 Python 抓取领域的明星。

## 第三部分：使用 pandas 清理和探索数据

在这部分中，我们把 pandas 这一强大的 Python 编程电子表格工具应用于清理和探索数据集的问题上。我们首先看到 pandas 是 Python NumPy 生态系统的一部分，利用了非常快速、强大的低级别数组处理库的力量，但使其易于使用。重点是使用 pandas 清理和探索我们的诺贝尔奖数据集：

+   大多数数据，即使来自官方网络 API，也是脏乱的。使其变得清洁和可用将占据你作为数据可视化者更多的时间，这可能超出了你的预期。以诺贝尔奖数据集为例，我们逐步清理它，搜索不可靠的日期，异常的数据类型，缺失字段以及所有需要在开始探索并将数据转换为可视化之前清理的常见问题。

+   手头有我们尽可能清洁的诺贝尔奖数据集后，我们看到了使用 pandas 和 Matplotlib 进行交互式数据探索是多么容易，可以轻松创建内联图表，灵活地切片数据，并且总体上对数据有了更深的了解，同时寻找那些你想要通过可视化呈现的有趣信息。

## 第四部分：数据交付

在这部分中，我们看到了使用 Flask 创建最小数据 API 是多么容易，可以将数据静态和动态地提供给 Web 浏览器。

首先，我们看到如何使用 Flask 来提供静态文件，然后如何自行构建基本的数据 API，从本地数据库提供数据。Flask 的极简主义允许你在 Python 数据处理成果与最终在浏览器上可视化之间创建非常薄的数据服务层。开源软件的优势在于，你通常可以找到比你更好地解决问题的稳健易用的库。在本部分的第二章，我们看到了如何使用 Python 的最佳库（Flask）轻松创建健壮灵活的 RESTful API，准备好在线提供你的数据。我们还介绍了如何使用 Heroku 进行轻松的在线部署，这是 Python 爱好者喜爱的平台。

## 第五部分：使用 D3 和 Plotly 可视化你的数据

在本部分的第一章中，我们看到了如何通过 pandas 驱动的探索结果（如图表或地图）并将它们放在它们应该展示的地方——网页上。Matplotlib 可以生成出版标准的静态图表，而 Plotly 则为用户提供控件和动态图表。我们还看到了如何将 Plotly 图表直接从 Jupyter 笔记本放入网页中。

我认为可以说，学习 D3 是本书中最雄心勃勃的部分，但我决心展示如何构建多元素可视化，例如您可能最终被雇用去制作的可视化。D3 的一大乐趣在于可以轻松找到大量的[示例](https://oreil.ly/nYKx8)在线，但大多数示例仅演示单一技术，并且几乎没有展示如何编排多个视觉元素的示例。在这些 D3 章节中，我们看到了如何同步更新一个时间线（包含所有的诺贝尔奖），一个地图，一个条形图和一个列表，当用户过滤诺贝尔奖数据集或更改获奖指标（绝对或人均）时。

掌握这些章节中展示的核心主题应该使您能够释放您的想象力并通过实践学习。我建议选择一些您关心的数据，并围绕它设计一个 D3 创作。

# 未来的进展

正如提到的，Python 和 JavaScript 的数据处理和可视化生态系统目前非常活跃，并且是建立在非常坚实的基础之上。

虽然获取和清理数据集在第二部分和第九章中逐步改进，随着您的技艺（例如，您的 pandas 技能）的提高，变得更加容易，Python 却大量推出了新的强大的数据处理工具。Python 的维基上有一份[相当全面的列表](https://oreil.ly/ODNE1)。以下是您可能想要用来创建一些可视化的一些想法。

## 可视化社交媒体网络

社交媒体的出现提供了大量有趣的数据，通常可以从 Web API 中获取或者很容易被抓取。还有一些经过策划的社交媒体数据集，如[斯坦福大学的大型网络数据集合](https://oreil.ly/2E02E)或[加州大学尔湾分校的收藏](https://oreil.ly/x09oi)。这些数据集可以为网络可视化的探索提供一个简单的测试场所，这是一个日益流行的领域。

Python 网络分析的两个最流行的库是[graph-tool](https://graph-tool.skewed.de)和[NetworkX](https://networkx.org)。虽然 graph-tool 更加优化，但 NetworkX 可以说更加用户友好。这两个库都可以生成通用的[GraphML](http://graphml.graphdrawing.org)和[GML](https://oreil.ly/18AUU)格式的图形。D3 无法直接读取 GML 文件，但很容易将它们转换为 JSON 格式以供读取。您可以在这篇[博客文章](https://oreil.ly/thuBE)中找到一个很好的例子，其中附带了在[GitHub](https://oreil.ly/3IHVR)上的代码。请注意，在 D3 版本 4 中，forceSimulation API 发生了变化。您可以在[Pluralsight](https://oreil.ly/DZxAz)找到对新 API 的简要介绍，该 API 使用 forceSimulation 对象来跟踪事物。

## 机器学习可视化

当前机器学习颇受青睐，Python 提供了一套出色的工具，让您可以开始分析和挖掘数据，使用从监督到无监督、从基本回归算法（如线性或逻辑回归）到更加奇特前沿的算法族（如随机森林）的广泛算法。参见这个[不错的导览](https://oreil.ly/IR8LZ)以了解不同风格的算法。

在 Python 的机器学习工具中，首屈一指的是[scikit-learn](https://oreil.ly/gjAKs)，它是 NumPy 生态系统的一部分，同时也依赖于 SciPy 和 Matplotlib。scikit-learn 为高效的数据挖掘和数据分析提供了一个令人惊叹的资源。几年前还需要花费几天甚至几周来开发的算法，现在只需一行导入就能获得，设计良好，易于使用，并且能够在几行代码中获得有用的结果。

像 scikit-learn 这样的工具使您能够发现数据中存在的深层次相关性。在 R2D3 上有一个[不错的演示](https://oreil.ly/Q0GVd)，介绍了一些机器学习技术，并使用 D3 来可视化过程和结果。这是 D3 掌握带来的创造自由的一个很好的例子，以及优秀的网络数据可视化正在推动界限，创造出以前不可能的新颖可视化效果，并且当然这些都是对每个人都可用的。

在 IPython（Jupyter）的 GitHub 仓库中有一个[很棒的集合](https://oreil.ly/wZ1bJ)，涵盖了统计、机器学习和数据科学的 IPython 笔记本。其中许多演示了可在您自己的工作中进行适应和扩展的可视化技术。

# 总结思考

在前一节中提出的建议只是揭示了你可能利用新学到的 Python 和 JavaScript 数据可视化技能的表面。希望本书为你在这个领域建立网页数据可视化工作提供了坚实的基础，或者只是为了满足个人的兴趣。能够利用 Python 强大的数据处理和通用能力与 JavaScript（尤其是 D3）日益强大和成熟的可视化库，代表了我所知道的最丰富的数据可视化技术栈。这一领域的技能已经非常值钱，但变化的速度和兴趣的规模正在迅速增加。希望你发现这个充满活力和新兴的领域像我一样充满成就感。
