# 序言

*Python 地理空间数据分析*是一本介绍使用一系列 Python 库和软件包进行地理空间数据分析的书籍，优化用于探索和发现。近年来，随着物联网的出现和位置数据在本地计算机上的可用性，各行各业的专业人士一直在探索具有内置分析功能的地理空间平台，这些专业人士包括地理空间专业人员、数据科学家、业务分析师、地理学家、地质学家、研究人员、分析师、计算机科学家和统计专业人士等等。随着他们的探索，这些学习者经常试图更深入地了解嵌入在他们工具中的技术。图形用户界面非常强大，但通过编写自己的 Python 代码来完全自定义或自动化结果，并更好地了解大型平台和系统的工作方式，你可以真正提升你的技能水平。

开源项目希望吸引各种各样的用户；如今，大多数行业的专业人员可能都可以访问位置数据和公开可用的数据集。随着云计算的发展，不再需要将大量数据下载到本地计算机上，这意味着任何拥有互联网设备的人都可以获得使用权。本书旨在成为一个资源，满足专业人士的需求，并作为实现目标和理解的指南。本书鼓励所有背景的读者参与地理空间分析，帮助决策城市规划、气候变化研究和许多其他领域。

即使对经验丰富的数据分析师来说，技术通常是分隔的。你可能了解一点 Python，并可以随时随地进入和退出 QGIS 或 ArcGIS，而不需要真正了解操作化的工作流程。当然，你可以与嵌入式系统一起工作，而不需要了解栅格、矢量或数学模型，但了解这些基础元素将为你的探索性和解释性数据能力带来新的严谨性和探究精神。

我是如何写一本关于地理空间分析和 Python 集成的书的？我有一个问题要解决。在对电子健康记录进行分析时，我发现它们包含大量的医疗数据，但只有模糊的有用人口统计信息。审查医疗保健建设基础设施的这一方面向我展示了地点在预测健康结果中的重要性。如果不知道以下问题的答案，我们就无法做出关于公共卫生的政策决策：

+   患者的社区是否提供步行距离内的新鲜市场或沿着可达交通线路的市场？

+   患者的社区是否适合步行且安全？

+   患者是否可以进入绿地空间？

+   例如，邻近高速公路、电力线和废水处理厂会如何影响附近社区的健康？

+   我们如何将地理位置数据引入到对这些环境的研究中呢？

将这些非空间数据与空间信息整合，可以让你探索周围环境——或者地球表面上任何感兴趣的地方——并生成地图和其他可视化，帮助你深入思考复杂问题。

# 为什么选择 Python？

Python 是一种流行且灵活的脚本语言。其易于访问的编码语法使学习比大多数编程语言更容易，因此你可以相对快速地开始使用它。Python 非常适合地理空间数据分析，因为它已经被整合到许多地理信息系统（GIS）应用程序中，包括 ArcGIS 和 QGIS。它还得到了一个充满活力的开源社区的支持，拥有大量的库和包。

这不是一个 Python 101 的入门书。如果你是初学者，并希望对这门语言有基本的掌握，那么有许多资源可以供你选择。你可能希望从 Matt Harrison 和 Theodore Petrou 的《Pandas 1.x Cookbook》（Packt Publishing）第二版开始，或者任何 Dunder Data 的面对面或在线课程，比如[*掌握 Python 基础*](https://oreil.ly/swed0)*。*

也许你没有倾向或时间来学习整个编程语言。尽管我建议你至少掌握一门计算机语言，但没关系。本书的目的是让你开始使用丰富的公开地理空间数据生态系统，并不要求具备全面的编程能力。我会提供逐步指导，并在全书中提供代码片段。我会引导你了解一些本书未涵盖的其他功能的资源，这样你可以利用所学内容进行探索。当你能够在一个大型库或包中熟练使用一两个函数时，你将逐渐增加进入新领域的信心。

# 本书的运作方式

我们将从一个快速的水平设定开始，介绍一些关键的地理信息系统（GIS）概念。随着我们的深入，我会逐步融入 Python 学习。我并不假设读者在编程语言或地理空间分析方面有专业知识。

这里提供的资源是开源的：它们的源代码由开发者自由分发，通常也包含社区成员的贡献。大多数资源使用 Python。在我所能做到的范围内，我确保本书展示了可以免费获取而不需要繁琐订阅服务的资源。任何成本，尽管可能不高，都会被突出显示，以便你做出知情决策。我的开源重点并不意味着我不支持企业解决方案；它意味着我希望降低围绕重大问题进行有意义分析的门槛。

这本书涵盖了广泛的开源工具和数据，并查看了多种数据集，其中一些您可能在当前的职业角色中无法访问。*Python 地理空间数据分析*不像典型的技术书籍（或者说，关于 Python 的书籍）那样线性。有多种方法可以探索数据问题。也许你可以从第一次在集成开发环境（IDE）中工作中得到灵感。也许你对在终端或控制台中工作感到好奇。

在一本书中不可能详细介绍每个 Python 包或库的细节。如果您熟悉特定工具或库，您可能有一些我在这里没有包含的喜爱功能。没问题，我只是想让您对每个工具有所了解。从那里，您可以继续探索它们的功能。

# 这本书适合谁？

*Python 地理空间数据分析*的构想给我提出了一个难题：如何为新近获得的地理空间专业人员编写一本既懂 Python 又精通地理空间分析的书籍？我决定简单地使其有趣。我的目标不是让您在任何一个领域专业化，而是将我们所有人汇聚一起学习工具和最佳实践。

在本书结束时，我希望所有的读者都能够感到熟练和自信，足以独立探索地理空间分析。因此，在我教授每个工具和技术时，请您跟随，并根据需要安装工具，并使用 Jupyter 或 Google Colab 笔记本来运行代码。但我不希望您止步于此，所以我还提供了大量不同的体验，邀请您继续探索。

# 有关工具的几个提示

没有绝对无错的代码。您将需要学习如何排除故障。这就是为什么数据女神发明了[Stack Overflow](https://stackoverflow.com)。一个快速警告——您并不总能从建议网站获得最佳或最正确的解决方案，所以请谨慎研究。为了帮助，我选择了具有坚实 GitHub 存在的 Python 包，以确保始终有支持选项。话虽如此，我将提供一些您在安装并熟悉本书工具时可能会发现有用的提示：

+   尽可能创建 Python 环境，以便您可以控制版本和依赖关系。

+   如果您不在 Conda 或 Mamba 环境中，请始终检查您的 Python 版本和任何其他软件或包的版本。版本问题是错误代码的主要生成器。

+   不确定您的 pip 安装是否成功？在一个单元格中写下`**!pip list**`并运行它。会列出该会话中安装的所有包。

+   不要害怕包文档！阅读说明材料是获取新技能的重要部分，也是疑难解答的关键。

# 寻找您的方向

前两章介绍了一些你在深入研究地理空间分析时需要的一般概念和能力。从那里开始，我们将进入具体的工具，使用实践活动帮助你熟悉它们。第三章介绍了 QGIS，第四章介绍了 Google Earth Engine 和其他基于云的分析工具。第五章向你介绍了 OpenStreetMap，第六章向你展示了 ArcGIS Python API，第七章探索了使用 GeoPandas 库进行空间统计。第八章暂停一下，看看数据清理：这是一个将有用数据与常常伴随的噪音分离的过程。第九章随后介绍了一个非常有用的资源：Geospatial Data Abstraction Library (GDAL)。最后，在第十章，三个实践项目将你所有的学习内容结合起来，展示了你的地理空间分析技能在研究一个紧迫的全球问题——气候变化方面的用处。

在本书的末尾，你将找到丰富的链接到工具、软件包和数据资源，以及文本中使用的来源引用和推荐阅读，帮助你继续学习之旅。

# 本书使用的约定

本书使用以下排版约定：

*斜体*

指示新术语、URL、电子邮件地址、文件名和文件扩展名。

`等宽字体`

用于程序清单，以及在段落内用于引用程序元素，如变量或函数名称、数据库、数据类型、环境变量、语句和关键字。

**`等宽字体粗体`**

显示用户应该按字面意思键入的命令或其他文本。

*`等宽字体斜体`*

显示应该用用户提供的值或上下文确定的值替换的文本。

###### 提示

此元素表示提示或建议。

###### 注意

此元素表示一般注释。

###### 警告

此元素表示警告或注意。

# 使用代码示例

附加材料（代码示例、练习等）可在[*https://github.com/datamongerbonny/geopy-notebooks.git*](https://github.com/datamongerbonny/geopy-notebooks.git)下载。

如果你有技术问题或者在使用代码示例时遇到问题，请发送电子邮件至*bookquestions@oreilly.com*。

本书旨在帮助您完成工作。一般情况下，如果本书提供了示例代码，您可以在您的程序和文档中使用它。除非您复制了代码的大部分，否则您无需联系我们以获取许可。例如，编写一个使用本书中多个代码片段的程序无需许可。出售或分发奥莱利图书中的示例需要许可。通过引用本书回答问题并引用示例代码无需许可。将本书中大量示例代码整合到您产品的文档中需要许可。

我们感谢但通常不要求署名。署名通常包括标题、作者、出版商和 ISBN。例如：“*Python for Geospatial Data Analysis* by Bonny P. McClain (O’Reilly)。版权所有 2023 年 Grapheme Consulting, Inc.，978-0-098-10479-5。”

如果您认为您使用的代码示例超出了公平使用范围或上述许可，请随时联系我们，邮箱为*permissions@oreilly.com*。

# 奥莱利在线学习

###### 注意

过去 40 多年来，[*奥莱利传媒*](https://oreilly.com)为技术和商业培训提供了知识和深刻的洞察，帮助企业取得成功。

我们独特的专家和创新者网络通过书籍、文章和我们的在线学习平台分享他们的知识和专业知识。奥莱利的在线学习平台为您提供按需访问的实时培训课程、深度学习路径、交互式编码环境，以及来自奥莱利和其他 200 多家出版商的大量文本和视频。更多信息，请访问[*https://oreilly.com*](https://oreilly.com)。

# 如何联系我们

请将有关本书的评论和问题发送至出版社：

+   O’Reilly Media, Inc.

+   1005 Gravenstein Highway North

+   Sebastopol, CA 95472

+   800-998-9938（美国或加拿大）

+   707-829-0515（国际或本地）

+   707-829-0104（传真）

我们为本书创建了一个网页，列出勘误、示例和任何其他信息。您可以访问[*https://oreil.ly/python-for-geo-data*](https://oreil.ly/python-for-geo-data)。

电子邮件*bookquestions@oreilly.com*以评论或询问有关本书的技术问题。

有关我们的图书和课程的新闻和信息，请访问[*https://oreilly.com*](https://oreilly.com)。

在 LinkedIn 上找到我们：[*https://linkedin.com/company/oreilly-media*](https://linkedin.com/company/oreilly-media)。

在 Twitter 上关注我们：[*https://twitter.com/oreillymedia*](https://twitter.com/oreillymedia)。

在 YouTube 上观看我们：[*https://www.youtube.com/oreillymedia*](https://www.youtube.com/oreillymedia)。

# 致谢

我要感谢许多地理空间学生和专业人士的指导、建议和问题，这些都是我处理这个主题的动力来源。对于一本既是入门指南又是经验指导的书籍，大家的热情让我感到非常自豪。

我要感谢田纳西大学地理系助理教授吴秋生博士提供的巨大工作和支持。吴博士在地理空间社区的贡献无与伦比，正是他在 GeoPython Conference 2021 上的演讲，[Google Earth Engine 和 geemap 工作坊](https://oreil.ly/X4Pv6)，让我第一次了解到 Google Earth Engine 和 Python 的重要整合。一年后，我也在同一会议上做了演讲。

我还要感谢泰德·佩特罗，Python 和数据探索的大师，在[Dunder Data](https://www.dunderdata.com)提供及时资源和实惠的工作坊，弥补了学习 Python 的理论知识和实际工作应用之间的差距。

[SpatialThoughts 的乌贾瓦尔·甘地](https://oreil.ly/3eJ0c)在向在校学生和独立学习者介绍地理空间平台和技能方面发挥了重要作用。我在多个场合受益于他的专业知识和慷慨帮助。

衷心感谢和赞赏我所属的[地理空间连接](https://oreil.ly/SeeNU)社区的管理员们：Bruce Buxton、Juliana McMillan-Wilhoit、Tim Nolan 和 Kendrick Faison。在这个空间里和同事们的交流非常精彩和富有信息。

我感谢我的丈夫史蒂夫，他给予我无穷的幽默、无尽的支持、丰盛的沙拉和取之不尽的软糖熊。对于我的儿子哈里森和莱兰，感谢他们是我的北极星，是无穷的智慧和魅力的源泉，是我的一切理由。
