## 后记

恭喜你，你已经读到了这本书的结尾。接下来你该去哪里？答案取决于你是如何到达这里的。如果你从头到尾阅读了这本书，我们建议你在参考各个章节的同时实施自己的拓扑结构，直到你觉得自己“掌握了 Storm”。我们犹豫着说“掌握 Storm”，因为我们不确定你是否会觉得自己掌握了 Storm。它是一个强大而复杂的野兽，掌握是一个棘手的事情。

如果你采取了更迭代的阅读方法，慢慢地工作并通过前进获得专业知识，那么后记中接下来的所有内容都是为你准备的。如果你采取了从头到尾的方法，不要担心；一旦你觉得自己掌握了 Storm，后记就会等着你。以下是我们希望你在我们离开后继续 Storm 之旅时知道的所有事情。

### 你是对的，你不知道这一点

我们已经在生产中使用 Storm 有一段时间了，我们仍然在不断地学习新事物。如果你觉得自己不知道一切，不要担心。利用你所知道的知识来完成你需要完成的事情。随着你的进步，你会学到更多。分析瘫痪在 Storm 中可能是一个真实的事情。

### 有很多知识需要了解

我们并没有涵盖 Storm 的每一个角落和缝隙。深入研究官方文档，加入 IRC 频道，并加入邮件列表。Storm 是一个不断发展的项目。在本书即将付印的时候，它甚至还没有达到 1.0 版本。如果你正在使用 Storm 进行业务关键流程，确保你知道如何保持最新。以下是我们认为你应该关注的一些事情：

+   Yarn 上的风暴

+   Mesos 上的 Storm

什么是 Yarn？什么是 Mesos？这实际上是一本完整的书。现在，我们只需说它们是集群资源管理器，可以让你与其他技术如 Hadoop 共享 Storm 集群资源。这是一个粗略的简化。我们强烈建议你在计划在生产中运行大型 Storm 集群时检查 Yarn 和 Mesos。这些项目中正在进行许多令人兴奋的事情。

### 指标和报告

Storm 的指标支持相当年轻。我们怀疑随着时间的推移它会变得更加健壮。此外，Storm 的最新版本引入了一个 REST API，允许你以编程方式访问 Storm UI 中的信息。这在外部自动化或监控场景中并不特别令人兴奋。但它为以易于访问的方式向外界暴露 Storm 内部发生的事情的更多信息开辟了一条途径。如果通过该 API 公开更多信息来构建一些真正酷的东西，我们一点也不感到惊讶。

### Trident 相当强大

我们用一章介绍了 Trident。我们花了很多时间讨论我们应该涵盖多少关于 Trident 的内容。这从什么都不涵盖到几章不等。我们决定用一章来让你开始使用 Trident。为什么？好吧，我们考虑过完全不介绍 Trident。你可以快乐地使用 Storm 而永远不需要接触 Trident。我们不认为它是 Storm 的核心部分，而是你可以在其上构建的许多抽象之一（更多内容将在后面讨论）。即使如此，基于反馈，我们意识到我们不能完全不介绍它，因为每个早期审稿人都将 Trident 提出为必须涵盖的主题。

我们考虑过用三章来介绍 Trident，就像我们用三章介绍了核心 Storm (第二章到第四章)，并以同样的方式介绍它。如果我们写一本关于 Trident 的书，我们会采取那种方法，但那些章节的大部分内容将与第二章到第四章中的内容相似。毕竟，Trident 是在 Storm 之上的一个抽象。我们决定用一章来介绍 Trident，因为我们觉得只要你能理解 Trident 的基础知识，其他一切都会顺理成章。我们没有涵盖许多 Trident 操作，但它们都以我们已涵盖的方式操作。如果你认为 Trident 对于你的问题比核心 Storm 更好，我们认为我们已经给了你足够的信息去深入研究和使用 Trident。

### 我什么时候应该使用 Trident？

仅在你需要时使用 Trident。与核心 Storm 相比，Trident 增加了大量的复杂性。由于抽象层较少，因此使用核心 Storm 调试问题更容易。核心 Storm 也比 Trident 快得多。如果你真的关心速度，那么优先考虑核心 Storm。你为什么可能需要使用 Trident？

+   “是什么”而不是“如何”对你来说非常重要。

    +   使用核心 Storm 难以追踪你计算的重要算法细节，但使用 Trident 则非常清晰。如果你的流程完全是关于算法的，而且在核心 Storm 中难以看到发生了什么，维护将会很困难。

+   你需要精确一次处理。

    +   正如我们在第四章中讨论的那样，精确一次处理非常难以实现；有些人甚至认为这是不可能的。我们不会走那么远。我们只能说，在某些情况下，这是不可能的。即使可能，正确实现它也可能很困难。Trident 可以帮助你构建一个精确一次处理系统。你也可以用核心 Storm 做到这一点，但你需要做更多的工作。

+   你需要维护状态。

    +   再次强调，你可以使用 Storm 的核心功能来完成这项工作，但 Trident 在维护状态方面表现良好，而 DRPC 提供了一种获取该状态的好方法。如果你的工作负载更侧重于创建可查询的数据池，而不是数据管道（将输入转换为输出并将该输出馈送到另一个数据管道），那么 Trident 状态与 DRPC 结合可以帮助你实现这一目标。

### 抽象！到处都是抽象！

Trident 并不是在 Storm 上运行的唯一抽象。我们在 GitHub 上看到了许多项目来来去去，试图在 Storm 的基础上构建。说实话，其中大多数并不那么有趣。如果你在拓扑结构中重复进行相同类型的工作，也许你也会创建自己的 Storm 抽象来简化特定的流程。目前最有趣的 Storm 抽象是来自 Twitter 的 Algebird ([`github.com/twitter/algebird`](https://github.com/twitter/algebird))。

Algebird 是一个 Scala 库，它允许你编写可以“编译”并在 Storm 或 Hadoop 上运行的抽象代数代码。这有什么有趣之处呢？你可以编写各种算法，然后在批处理和流式处理环境中重用它们。如果你问我们，这真的很酷。即使你不需要编写可重用的代数，如果你对在 Storm 上构建抽象感兴趣，我们也建议你查看这个项目；你可以从中学到很多东西。

这就是我们所能提供的全部内容。祝你好运；我们支持你！Sean，Matt 和 Peter 敬上。
