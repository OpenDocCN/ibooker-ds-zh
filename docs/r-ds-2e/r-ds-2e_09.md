# 第八章：工作流：获取帮助

这本书不是一个孤岛；没有单一的资源能让你精通 R。当你开始将本书描述的技术应用到自己的数据中时，你很快会发现我们没有回答的问题。本节描述了一些关于如何获取帮助和帮助你继续学习的技巧。

# 谷歌是你的朋友

如果遇到困难，请先使用 Google。通常在查询中添加“R”就足以限制结果为相关结果：如果搜索结果无用，则通常意味着没有针对 R 特定的结果可用。此外，添加像“tidyverse”或“ggplot2”这样的包名将有助于缩小结果范围，使得代码对你来说更加熟悉，例如，“如何在 R 中制作箱线图”与“如何使用 ggplot2 在 R 中制作箱线图”。Google 对于错误消息尤其有用。如果你收到错误消息并且不知道它的含义，试着 Google 搜索一下！很有可能以前有人也被这个错误消息困扰过，在网络上会有帮助的地方。（如果错误消息不是英文，运行`Sys.setenv(LANGUAGE = "en")`然后重新运行代码；这样你更有可能找到英文错误消息的帮助。）

如果 Google 没能帮助到你，尝试[Stack Overflow](https://oreil.ly/RxSNB)。首先花点时间搜索现有答案，包括`[R]`，以将搜索限制为使用 R 的问题和答案。

# 制作一个 reprex

如果你的 Google 搜索没有找到有用的内容，准备一个*reprex*是个非常好的主意，它是最小*可复现*示例的缩写。一个好的 reprex 使得其他人更容易帮助你，而且通常在制作它的过程中你会自己找到问题的答案。创建 reprex 有两个部分：

+   首先，你需要让你的代码可复现。这意味着你需要捕获一切，即包括任何[`library()`](https://rdrr.io/r/base/library.xhtml)调用和创建所有必要的对象。确保你已经做到这一点的最简单方法是使用 reprex 包。

+   其次，你需要让它变得最小化。剥离与你的问题无关的所有内容。这通常涉及创建一个比实际情况中更小更简单的 R 对象，甚至使用内置数据。

听起来工作量很大！而且确实如此，但它会带来巨大的回报：

+   80%的情况下，创建一个优秀的 reprex 能揭示出问题的根源。写一个自包含和最小化示例的过程经常让你能够回答自己的问题，这是多么令人惊讶的。

+   其余 20%的时间，你将以一种易于他人处理的方式捕捉到问题的本质。这极大地提高了你获取帮助的机会！

当手动创建 reprex 时，很容易偶然遗漏某些内容，这意味着你的代码在别人的计算机上无法运行。通过使用作为 tidyverse 的一部分安装的 reprex 包来避免这个问题。假设你将这段代码复制到剪贴板上（或者在 RStudio Server 或云端上，选择它）：

```
y <- 1:4
mean(y)
```

然后调用 `reprex()`，其中默认输出已格式化为 GitHub 格式：

```
reprex::reprex()
```

在 RStudio 的 Viewer（如果你在使用 RStudio）或默认浏览器中，将会显示一个漂亮的 HTML 预览。reprex 会自动复制到你的剪贴板（在 RStudio Server 或云端，你需要手动复制）：

```
``` r

y <- 1:4

mean(y)

#> [1] 2.5

```
```

此文本以 Markdown 的特殊方式格式化，可以粘贴到类似 StackOverflow 或 GitHub 的网站上，这些网站会自动渲染为代码样式。以下是在 GitHub 上渲染的 Markdown 样式：

```
y <- 1:4
mean(y)
#> [1] 2.5
```

任何人都可以立即复制、粘贴并运行此代码。

要使你的示例可复现，有三样东西你需要包含：所需的包、数据和代码。

+   *包* 应该在脚本的顶部加载，这样很容易看到示例需要哪些包。现在是检查你是否使用每个包的最新版本的好时机；你可能发现了一个自从你安装或上次更新包后修复的 bug。对于 tidyverse 中的包，检查的最简单方法是运行 `tidyverse_update()`。

+   包含 *数据* 的最简单方法是使用 [`dput()`](https://rdrr.io/r/base/dput.xhtml) 生成重新创建所需数据的 R 代码。例如，在 R 中重新创建 `mtcars` 数据集，执行以下步骤：

    +   在 R 中运行 `dput(mtcars)`。

    +   复制输出。

    +   在 reprex 中，输入 `mtcars <-`，然后粘贴。

    尽量使用最小的数据子集来展示问题。

+   花点时间确保你的 *代码* 对他人易读：

    +   确保你已经使用了空格，并且你的变量名简洁但具有信息性。

    +   使用注释标明问题所在的位置。

    +   尽你最大努力删除与问题无关的所有内容。

    编写简短的代码，有助于理解和修复问题。

最后，通过开始一个新的 R 会话并复制粘贴你的脚本来检查是否真的创建了一个可复现的示例。

创建 reprex 并不简单，需要一些练习才能学会创建好的、真正最小化的 reprex。然而，学会提出包含代码并投入时间使其可复现的问题，将会在你学习和掌握 R 的过程中不断产生回报。

# 投资于自己

在问题出现之前，你也应该花些时间准备自己去解决问题。每天投资一点时间学习 R，从长远来看将会带来丰厚的回报。一种方法是关注 tidyverse 团队在[tidyverse 博客](https://oreil.ly/KS82J)上的最新动态。为了更广泛地了解 R 社区，我们建议阅读[R Weekly](https://oreil.ly/uhknU)：这是一个社区努力，每周汇总 R 社区中最有趣的新闻。

# 总结

本章总结了书中“整个游戏”部分。现在你已经看到了数据科学过程中最重要的部分：可视化、转换、整理和导入。既然你已经全面了解了整个过程，我们可以开始深入了解各个细节部分了。

书的下一部分，“可视化”，更深入地探讨了图形语法和使用 ggplot2 创建数据可视化，展示了如何利用你迄今学到的工具进行探索性数据分析，并介绍了创建沟通图形的良好实践。
