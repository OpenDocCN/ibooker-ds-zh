<html><head></head><body><section data-pdf-bookmark="Chapter 10. Exploratory Data Analysis" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch-eda">&#13;
<h1><span class="label">Chapter 10. </span>Exploratory Data Analysis</h1>&#13;
&#13;
<p>More than 50 years ago, John Tukey<a contenteditable="false" data-primary="Exploratory Data Analysis (Tukey)" data-type="indexterm" id="id1196"/><a contenteditable="false" data-primary="Tukey, John" data-type="indexterm" id="id1197"/><a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-type="indexterm" id="ix_explor_data_anal_ch10"/> avidly promoted an alternative type of data analysis that broke from the formal world of confidence intervals, hypothesis tests, and modeling. Today Tukey’s <a class="reference external" href="https://oreil.ly/Himzi"><em>exploratory data analysis</em></a> (EDA) is widely practiced. Tukey <a class="reference external" href="https://oreil.ly/UO9F8">describes EDA</a> as a philosophical approach to working with data:</p>&#13;
&#13;
<blockquote>&#13;
<div>&#13;
<p>Exploratory data analysis is actively incisive, rather than passively descriptive, with real emphasis on the discovery of the unexpected.</p>&#13;
</div>&#13;
</blockquote>&#13;
&#13;
<p>As a data scientist, you will want to use EDA in every stage of the data lifecycle, from checking the quality of your data to preparing for formal modeling to confirming that your model is reasonable. Indeed, the work described in <a class="reference internal" data-type="xref" href="ch09.html#ch-wrangling">Chapter 9</a> to clean and transform the data relied heavily on EDA to guide our quality checks and transformations.</p>&#13;
&#13;
<p>In EDA, we enter a process of discovery, continually asking questions and diving into uncharted territory to explore ideas. We use plots to uncover features of the data, examine distributions of values, and reveal relationships that cannot be detected from simple numerical summaries. This exploration involves transforming, visualizing, and summarizing data to build and confirm our understanding, identify and address potential issues with the data, and inform subsequent analysis.</p>&#13;
&#13;
<p>EDA is fun! But it takes practice. One of the best ways to learn how to carry out EDA is to learn from others as they describe their thought process while they explore data, and we attempt to reveal EDA thinking in our examples and case studies in this book.</p>&#13;
&#13;
<p>EDA can provide<a contenteditable="false" data-primary="bias" data-secondary="potential in EDA process" data-type="indexterm" id="id1198"/> valuable insights, but you need to be cautious about the conclusions that you draw. It is important to recognize that EDA can bias your analysis. EDA is a winnowing process and a decision-making process that can impact the replicability of your later, model-based findings. With enough data and if you look hard, you often can dredge up something interesting that is entirely spurious.</p>&#13;
&#13;
<p>The role of EDA in the scientific<a contenteditable="false" data-primary="scientific reproducibility crisis, and EDA" data-type="indexterm" id="id1199"/><a contenteditable="false" data-primary="data dredging" data-type="indexterm" id="id1200"/> reproducibility crisis has been noted, and data scientists have cautioned against overdoing it. For example, <a class="reference external" href="https://doi.org/10.1511/2014.111.460">Gelman and Loken</a> note:</p>&#13;
&#13;
<blockquote>&#13;
<div>&#13;
<p>Even in settings where a single analysis has been carried out on the given data, the issue of multiple comparisons [data dredging] emerges because different choices about combining variables, inclusion and exclusion of cases, transformations of variables, tests for interactions in the absence of main effects, and many other steps in the analysis could well have occurred with different data.</p>&#13;
</div>&#13;
</blockquote>&#13;
&#13;
<p>It’s a good practice to report and provide the code from your EDA so that others are aware of the choices you made and the paths you took in learning about your data.</p>&#13;
&#13;
<p>The topic of visualization<a contenteditable="false" data-primary="visualization, data" data-secondary="in EDA" data-type="indexterm" id="id1201"/> is split across three chapters. In <a class="reference internal" data-type="xref" href="ch09.html#ch-wrangling">Chapter 9</a>, we used plots to inform us in our data wrangling. The plots there were basic and the findings straightforward. We didn’t dwell on interpretations and choices of plots. In this chapter, we spend more time learning how to choose the right plot and interpret it. We usually take the default parameter settings of the plotting functions since our goal is to make plots quickly as we carry out EDA. In <a class="reference internal" data-type="xref" href="ch11.html#ch-viz">Chapter 11</a>, we’ll provide guidelines for making effective and informative plots and give advice on how to make our visual argument clear and compelling.</p>&#13;
&#13;
<p>According to <a class="reference external" href="https://oreil.ly/AIWW5">Tukey</a>, visualization is central to EDA:</p>&#13;
&#13;
<blockquote>&#13;
<div>&#13;
<p>The greatest gains from data come from surprises… The unexpected is best brought to our attention by pictures.</p>&#13;
</div>&#13;
</blockquote>&#13;
&#13;
<p>To make these pictures, we need to choose an appropriate type of plot, and our choice depends on the kinds of data that have been collected. This mapping between feature type and plot choice is the topic of the next section. From there, we go on to describe how to “read” a plot, what to look for, and how to interpret what you see. We first discuss what to look for in a one-feature plot, then focus on reading relationships between two features, and finally describe plots for three or more features. After we have introduced the visualization tools for EDA, we provide guidelines for carrying out an EDA and then walk through an example as we follow these guidelines.</p>&#13;
&#13;
<section data-pdf-bookmark="Feature Types" data-type="sect1"><div class="sect1" id="sec-eda-feature-types">&#13;
<h1>Feature Types</h1>&#13;
&#13;
<p>Before<a contenteditable="false" data-primary="features and feature types" data-type="indexterm" id="ix_feat_feat_type"/><a contenteditable="false" data-primary="variables and variable types" data-secondary="in EDA" data-type="indexterm" id="ix_var_type_eda"/><a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-secondary="feature (variable) types" data-type="indexterm" id="ix_eda_feat_type"/> making an exploratory plot, or any plot for that matter, it’s a good idea to examine the feature (or features) and decide on its <em>feature type</em>. (Sometimes we refer to a feature as a <em>variable</em> and its type as <em>variable type</em>.) Although there are multiple ways of categorizing feature types, in this book we consider three basic ones. Ordinal and nominal<a contenteditable="false" data-primary="qualitative data and features" data-type="indexterm" id="id1202"/> data are subtypes of <em>categorical</em> data. Another name for categorical data is <em>qualitative</em>. In contrast, we also have <em>quantitative</em> features:</p>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt><em>Nominal</em></dt>&#13;
	<dd>&#13;
	<p>A feature<a contenteditable="false" data-primary="nominal features" data-type="indexterm" id="id1203"/><a contenteditable="false" data-primary="categorical data" data-secondary="nominal features" data-type="indexterm" id="id1204"/> that represents “named” categories, where the categories do not have a natural ordering, is called nominal. Examples include political party affiliation (Democrat, Republican, Green, other); dog type (herding, hound, non-sporting, sporting, terrier, toy, working); and computer operating system (Windows, macOS, Linux).</p>&#13;
	</dd>&#13;
	<dt><em>Ordinal</em></dt>&#13;
	<dd>&#13;
	<p>Measurements<a contenteditable="false" data-primary="ordinal features" data-type="indexterm" id="id1205"/><a contenteditable="false" data-primary="categorical data" data-secondary="ordinal features" data-type="indexterm" id="id1206"/> that represent ordered categories are called ordinal. Examples of ordinal features are T-shirt size (small, medium, large), Likert-scale response (disagree, neutral, agree), and level of education (high school, college, graduate school). It is important to note that with an ordinal feature, the difference between, say, small and medium need not be the same as the difference between medium and large. Also, the differences between consecutive categories may not even be quantifiable. Think of the number of stars in a restaurant review and what one star means in comparison to two stars.</p>&#13;
	</dd>&#13;
	<dt><em>Quantitative</em></dt>&#13;
	<dd>&#13;
	<p>Data that represent numeric<a contenteditable="false" data-primary="numeric data" data-type="indexterm" id="id1207"/><a contenteditable="false" data-primary="continuous features" data-type="indexterm" id="id1208"/><a contenteditable="false" data-primary="discrete features" data-type="indexterm" id="id1209"/> measurements or quantities are called quantitative. Examples include height measured to the nearest cm, price reported in USD, and distance measured to the nearest km. Quantitative features can be further divided into <em>discrete</em>, meaning that only a few values of the feature are possible, and <em>continuous</em>, meaning that the quantity could in principle be measured to arbitrary precision. The number of siblings in a family takes on a discrete set of values (such as 0, 1, 2, …, 8). In contrast, height can theoretically be reported to any number of decimal places, so we consider it continuous. There is no hard and fast rule to determine whether a quantity is discrete or continuous. In some cases, it can be a judgment call, and in others, we may want to purposefully consider a continuous feature to be discrete.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<p>A feature type is not the same thing<a contenteditable="false" data-primary="boolean values" data-secondary="and feature types" data-secondary-sortas="feature types" data-type="indexterm" id="id1210"/> as a data storage type. Each column in a <code>pandas</code> <code>DataFrame</code> has its own <em>storage type</em>. These types can be integer, floating point, boolean, date-time format, category, and object (strings of varying length are stored as objects in Python with pointers to the strings). We use the term <em>feature type</em> to refer to a conceptual notion of the information and the term <em>storage type</em> to refer to the representation of the information in the computer.</p>&#13;
&#13;
<p>A feature stored as an integer<a contenteditable="false" data-primary="integers" data-type="indexterm" id="id1211"/> can represent nominal data, strings can be quantitative (like <code>"\$100.00"</code>), and, in practice, boolean values often represent nominal features that have only two possible values.</p>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><code>pandas</code> calls the storage<a contenteditable="false" data-primary="data types" data-secondary="and dtype storage type" data-secondary-sortas="dtype storage type" data-type="indexterm" id="id1212"/> type <code>dtype</code>, which is short for data type. We refrain from using the term <em>data type</em> here because it can be confused with both storage type and feature type.</p>&#13;
</div>&#13;
&#13;
<p>In order to determine a feature<a contenteditable="false" data-primary="codebook, in EDA" data-type="indexterm" id="id1213"/><a contenteditable="false" data-primary="data dictionary, in EDA" data-type="indexterm" id="id1214"/> type, we often need to consult a dataset’s <em>data dictionary</em> or <em>codebook</em>. A data dictionary is a document included with the data that describes what each column in the data table represents. In the following example, we take a look at the storage and feature types of the columns in a dataframe about various dog breeds, and we find that the storage type is often not a good indicator of the kind of information contained in a field.</p>&#13;
&#13;
<section data-pdf-bookmark="Example: Dog Breeds" data-type="sect2"><div class="sect2" id="example-dog-breeds">&#13;
<h2>Example: Dog Breeds</h2>&#13;
&#13;
<p>We use the <a class="reference external" href="https://www.akc.org">American Kennel Club (AKC)</a> data on registered dog breeds<a contenteditable="false" data-primary="dog breeds dataset" data-type="indexterm" id="ix_dog_breeds_ch10"/><a contenteditable="false" data-primary="features and feature types" data-secondary="dog breeds example" data-type="indexterm" id="ix_feat_dog_breeds"/> to introduce the various concepts related to EDA. The AKC, a nonprofit that was founded in 1884, has the stated mission to “advance the study, breeding, exhibiting, running and maintenance of purebred dogs.” The AKC organizes events like the National Championship, Agility Invitational, and Obedience Classic, and mixed-breed dogs are welcome to participate in most events. The <a class="reference external" href="https://informationisbeautiful.net">Information Is Beautiful</a> website provides a dataset with information from the AKC on 172 breeds. Its visualization, <a class="reference external" href="https://oreil.ly/amksD">Best in Show</a>, incorporates many features of the breeds and is fun to look at.</p>&#13;
&#13;
<p>The AKC dataset contains several different kinds of features, and we have extracted a handful of them that show a variety of types of information. These features include the name of the breed; its longevity, weight, and height; and other information such as its suitability for children and the number of repetitions needed to learn a new trick. Each record in the dataset is a breed of dog, and the information provided is meant to be typical of that breed. Let’s read the data into a dataframe:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<code class="n">dogs</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">read_csv</code><code class="p">(</code><code class="s1">'data/akc.csv'</code><code class="p">)</code>&#13;
<code class="n">dogs</code></pre>&#13;
&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>breed</th>&#13;
			<th>group</th>&#13;
			<th>score</th>&#13;
			<th>longevity</th>&#13;
			<th>...</th>&#13;
			<th>size</th>&#13;
			<th>weight</th>&#13;
			<th>height</th>&#13;
			<th>repetition</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>0</strong></td>&#13;
			<td>Border Collie</td>&#13;
			<td>herding</td>&#13;
			<td>3.64</td>&#13;
			<td class="right">12.52</td>&#13;
			<td>...</td>&#13;
			<td>medium</td>&#13;
			<td>NaN</td>&#13;
			<td>51.0</td>&#13;
			<td class="right">&lt;5</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>1</strong></td>&#13;
			<td>Border Terrier</td>&#13;
			<td>terrier</td>&#13;
			<td>3.61</td>&#13;
			<td class="right">14.00</td>&#13;
			<td>...</td>&#13;
			<td>small</td>&#13;
			<td>6.0</td>&#13;
			<td>NaN</td>&#13;
			<td class="right">15-25</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>2</strong></td>&#13;
			<td>Brittany</td>&#13;
			<td>sporting</td>&#13;
			<td>3.54</td>&#13;
			<td class="right">12.92</td>&#13;
			<td>...</td>&#13;
			<td>medium</td>&#13;
			<td>16.0</td>&#13;
			<td>48.0</td>&#13;
			<td class="right">5-15</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>...</strong></td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>169</strong></td>&#13;
			<td>Wire Fox Terrier</td>&#13;
			<td>terrier</td>&#13;
			<td>NaN</td>&#13;
			<td class="right">13.17</td>&#13;
			<td>...</td>&#13;
			<td>small</td>&#13;
			<td>8.0</td>&#13;
			<td>38.0</td>&#13;
			<td class="right">25-40</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>170</strong></td>&#13;
			<td>Wirehaired Pointing Griffon</td>&#13;
			<td>sporting</td>&#13;
			<td>NaN</td>&#13;
			<td class="right">8.80</td>&#13;
			<td>...</td>&#13;
			<td>medium</td>&#13;
			<td>NaN</td>&#13;
			<td>56.0</td>&#13;
			<td class="right">25-40</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>171</strong></td>&#13;
			<td>Xoloitzcuintli</td>&#13;
			<td>non-sporting</td>&#13;
			<td>NaN</td>&#13;
			<td>NaN</td>&#13;
			<td>...</td>&#13;
			<td>medium</td>&#13;
			<td>NaN</td>&#13;
			<td>42.0</td>&#13;
			<td>NaN</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<pre>&#13;
172 rows × 12 columns</pre>&#13;
&#13;
<p>A cursory glance at the table shows us that breed, group, and size appear to be strings, and the other columns are numbers. The summary of the dataframe, shown here, provides the index, name, count of non-null values, and <code>dtype</code> for each column:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">info</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output stream highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
&lt;class 'pandas.core.frame.DataFrame'&gt;&#13;
RangeIndex: 172 entries, 0 to 171&#13;
Data columns (total 12 columns):&#13;
 #   Column          Non-Null Count  Dtype  &#13;
---  ------          --------------  -----  &#13;
 0   breed           172 non-null    object &#13;
 1   group           172 non-null    object &#13;
 2   score           87 non-null     float64&#13;
 3   longevity       135 non-null    float64&#13;
 4   ailments        148 non-null    float64&#13;
 5   purchase_price  146 non-null    float64&#13;
 6   grooming        112 non-null    float64&#13;
 7   children        112 non-null    float64&#13;
 8   size            172 non-null    object &#13;
 9   weight          86 non-null     float64&#13;
 10  height          159 non-null    float64&#13;
 11  repetition      132 non-null    object &#13;
dtypes: float64(8), object(4)&#13;
memory usage: 16.2+ KB&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Several columns of this dataframe have a numeric<a contenteditable="false" data-primary="strings" data-secondary="finding and transforming in EDA" data-type="indexterm" id="id1215"/><a contenteditable="false" data-primary="numeric computation type" data-type="indexterm" id="id1216"/> computational type, as signified by <code>float64</code>, which means that the column can contain numbers other than integers. We also confirm that <code>pandas</code> encodes the string columns as the <code>object</code> <code>dtype</code>, rather than a <code>string</code> <code>dtype</code>. Notice that we guessed incorrectly that <code>repetition</code> is quantitative. Looking a bit more carefully at the data table, we see that <code>repetition</code> contains string values for ranges, such as <code>"&lt;5"</code>, <code>"15-25"</code>, and <code>"25-40"</code>, so this feature is ordinal.</p>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>In computer architecture, a floating-point<a contenteditable="false" data-primary="optimization" data-secondary="numerical" data-type="indexterm" id="id1217"/><a contenteditable="false" data-primary="floating point number" data-type="indexterm" id="id1218"/> number, or “float” for short, refers to a number that can have a decimal component. We won’t go in depth into computer architecture in this book, but we will point it out when it affects terminology, as in this case. The <code>dtype</code> <code>float64</code> says that the column contains decimal numbers that each take up 64 bits of space when stored in computer memory.</p>&#13;
&#13;
<p>Additionally, <code>pandas</code> uses optimized<a contenteditable="false" data-primary="numerical optimization" data-secondary="for data storage types" data-secondary-sortas="data storage types" data-type="indexterm" id="id1219"/> storage types for numeric data, like <code>float64</code> or <code>int64</code>. However, it doesn’t have optimizations for Python objects like strings, dictionaries, or sets, so these are all stored as the <code>object</code> <code>dtype</code>. This means that the storage type is ambiguous, but in most settings we know whether <code>object</code> columns contain strings or some other Python type.</p>&#13;
</div>&#13;
&#13;
<p>Looking at the column storage types, we might guess <code>ailments</code> and <code>children</code> are quantitative features because they are stored as <code>float64</code> <code>dtype</code>s. But let’s tally their unique values:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">display_df</code></span><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">ailments</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code><code class="p">,</code></span><code> </code><span><code class="n">rows</code></span><span><code class="o">=</code></span><span><code class="mi">8</code></span><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
ailments&#13;
0.0    61&#13;
1.0    42&#13;
2.0    24&#13;
4.0    10&#13;
3.0     6&#13;
5.0     3&#13;
9.0     1&#13;
8.0     1&#13;
Name: count, dtype: int64&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">children</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
children&#13;
1.0    67&#13;
2.0    35&#13;
3.0    10&#13;
Name: count, dtype: int64&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Both <code>ailments</code> and <code>children</code> only take on a few integer<a contenteditable="false" data-primary="integers" data-type="indexterm" id="id1220"/> values. What does a value of <code>3.0</code> for <code>children</code> or <code>9.0</code> for <code>ailments</code> mean? We need more information to figure this out. The name of the column and how the information is stored in the dataframe is not enough. Instead, we consult<a contenteditable="false" data-primary="codebook, in EDA" data-type="indexterm" id="ix_codebook_eda"/><a contenteditable="false" data-primary="data dictionary, in EDA" data-type="indexterm" id="ix_data_dict_eda"/>  the data dictionary shown in <a class="reference internal" data-type="xref" href="#akc-codebook">Table 10-1</a>.</p>&#13;
&#13;
<table id="akc-codebook">&#13;
	<caption><span class="label">Table 10-1. </span><span>AKC dog breed codebook</span></caption>&#13;
	<thead>&#13;
		<tr>&#13;
			<th class="head">Feature</th>&#13;
			<th class="head">Description</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><code>breed</code></td>&#13;
			<td>&#13;
			<p>Dog breed, e.g., Border Collie, Dalmatian, Vizsla</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>group</code></td>&#13;
			<td>&#13;
			<p>American Kennel Club grouping (herding, hound, non-sporting, sporting, terrier, toy, working)</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>score</code></td>&#13;
			<td>&#13;
			<p>AKC score</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>longevity</code></td>&#13;
			<td>&#13;
			<p>Typical lifetime (years)</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>ailments</code></td>&#13;
			<td>&#13;
			<p>Number of serious genetic ailments</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>purchase_price</code></td>&#13;
			<td>&#13;
			<p>Average purchase price from <a class="reference external" href="http://puppyfind.com">puppyfind.com</a></p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>grooming</code></td>&#13;
			<td>&#13;
			<p>Grooming required once every: 1 = day, 2 = week, 3 = few weeks</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>children</code></td>&#13;
			<td>&#13;
			<p>Suitability for children: 1 = high, 2 = medium, 3 = low</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>size</code></td>&#13;
			<td>&#13;
			<p>Size: small, medium, large</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>weight</code></td>&#13;
			<td>&#13;
			<p>Typical weight (kg)</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>height</code></td>&#13;
			<td>&#13;
			<p>Typical height from the shoulder (cm)</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><code>repetition</code></td>&#13;
			<td>&#13;
			<p>Number of repetitions to understand a new command: &lt;5, 5–15, 15–25, 25–40, 40–80, &gt;80</p>&#13;
			</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<p>Although the data dictionary does not explicitly specify the feature types, the description is enough for us to figure out that the feature <code>children</code> represents the suitability of the breed for children, and a value of <code>1.0</code> corresponds to “high” suitability. We also find that the feature <code>ailments</code> is a count of the number of serious genetic ailments that dogs of this breed tend to have. Based on the codebook, we treat <code>children</code> as a categorical feature, even though it is stored as a floating-point number, and since low &lt; medium &lt; high, the feature is ordinal. Since <code>ailments</code> is a count, we treat it as a quantitative (numeric) type, and for some analyses we further define it as discrete because there are only a few possible values that <code>ailments</code> can take on.</p>&#13;
&#13;
<p>The codebook also confirms that the features <code>score</code>, <code>longevity</code>, <code>purchase_price</code>, <code>weight</code>, and <code>height</code> are quantitative. The idea here is that numeric features have values that can be compared through differences. It makes sense to say that chihuahuas typically live about four years longer than dachshunds (16.5 versus 12.6 years). Another check is whether it makes sense to compare ratios of values: a dachshund is usually about five times heavier than a chihuahua (11 kg versus 2 kg). All of these quantitative features are continuous; only <code>ailments</code> is discrete.</p>&#13;
&#13;
<p>The data dictionary descriptions for <code>breed</code>, <code>group</code>, <code>size</code>, and <code>repetition</code> suggest that these features are qualitative. Each variable has different, and yet commonly found, characteristics that are worth exploring a bit more. We do this by examining the counts of each unique value for the various features. We begin with <code>breed</code>:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">breed</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
breed&#13;
Border Collie       1&#13;
Great Pyrenees      1&#13;
English Foxhound    1&#13;
                   ..&#13;
Saluki              1&#13;
Giant Schnauzer     1&#13;
Xoloitzcuintli      1&#13;
Name: count, Length: 172, dtype: int64&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>The <code>breed</code> feature has 172 unique values—that’s the same as the number of records in the dataframe—so we can think of <code>breed</code> as the <em>primary key</em> for the data table. By design, each dog breed has one record, and this <code>breed</code> feature determines the dataset’s granularity. Although <code>breed</code> is also considered a nominal feature, it doesn’t really make sense to analyze it. We do want to confirm that all values are unique and clean, but otherwise we would only use it to, say, label unusual values in a plot.</p>&#13;
&#13;
<p>Next, we examine the feature <code>group</code>:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">group</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
group&#13;
terrier         28&#13;
sporting        28&#13;
working         27&#13;
hound           26&#13;
herding         25&#13;
toy             19&#13;
non-sporting    19&#13;
Name: count, dtype: int64&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>This feature has seven unique values. Since a dog breed labeled as “sporting” and another considered to be “toy” differ from each other in several ways, the categories cannot be easily reduced to an ordering. So we consider <code>group</code> a nominal feature. Nominal features do not provide meaning in even the direction of the differences.</p>&#13;
&#13;
<p>Next, we examine the unique values and their counts for <code>size</code>:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">size</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
size&#13;
medium    60&#13;
small     58&#13;
large     54&#13;
Name: count, dtype: int64&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>The <code>size</code> feature has a natural ordering: small &lt; medium &lt; large, so it is ordinal. We don’t know how the category “small” is determined, but we do know that a small breed is in some sense smaller than a medium-sized breed, which is smaller than a large one. We have an ordering, but differences and ratios don’t make sense conceptually for this feature.</p>&#13;
&#13;
<p>The <code>repetition</code> feature is an example of a quantitative variable that has been collapsed into categories to become ordinal. The codebook tells us that <code>repetition</code> is the number of times a new command needs to be repeated before the dog understands it:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
repetition&#13;
25-40     39&#13;
15-25     29&#13;
40-80     22&#13;
5-15      21&#13;
80-100    11&#13;
&lt;5        10&#13;
Name: count, dtype: int64&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>The numeric values have been lumped together as <code>&lt;5</code>, <code>5-15</code>, <code>15-25</code>, <code>25-40</code>, <code>40-80</code>, <code>80-100</code>, and notice that these categories have different widths. The first has 5 repetitions, while others are 10, 15, and 40 repetitions wide. The ordering is clear, but the gaps from one category to the next are not of the same magnitude.</p>&#13;
&#13;
<p>Now that we have double-checked the values in the variables against the descriptions in the codebook, we can augment the data dictionary to include this additional information about the feature types. Our revised dictionary appears in <a class="reference internal" data-type="xref" href="#revised-akc-codebook">Table 10-2</a>.</p>&#13;
&#13;
<table id="revised-akc-codebook">&#13;
	<caption><span class="label">Table 10-2. </span><span>Revised AKC dog breed codebook</span></caption>&#13;
	<thead>&#13;
		<tr>&#13;
			<th class="text-left head">Feature</th>&#13;
			<th class="text-left head">Description</th>&#13;
			<th class="text-left head">Feature type</th>&#13;
			<th class="text-left head">Storage type</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td class="text-left"><code>breed</code></td>&#13;
			<td class="text-left">&#13;
			<p>Dog breed, e.g., Border Collie, Dalmatian, Vizsla</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>primary key</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>string</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>group</code></td>&#13;
			<td class="text-left">&#13;
			<p>AKC group (herding, hound, non-sporting, sporting, terrier, toy, working)</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>qualitative - nominal</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>string</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left">score</td>&#13;
			<td class="text-left">&#13;
			<p>AKC <code>score</code></p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>quantitative</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>longevity</code></td>&#13;
			<td class="text-left">&#13;
			<p>Typical lifetime (years)</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>quantitative</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>ailments</code></td>&#13;
			<td class="text-left">&#13;
			<p>Number of serious genetic ailments (0, 1, …, 9)</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>quantitative - discrete</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>purchase_price</code></td>&#13;
			<td class="text-left">&#13;
			<p>Average purchase price from <a class="reference external" href="http://puppyfind.com">puppyfind.com</a></p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>quantitative</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>grooming</code></td>&#13;
			<td class="text-left">&#13;
			<p>Groom once every: 1 = day, 2 = week, 3 = few weeks</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>qualitative - ordinal</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>children</code></td>&#13;
			<td class="text-left">&#13;
			<p>Suitability for children: 1 = high, 2 = medium, 3 = low</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>qualitative - ordinal</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>size</code></td>&#13;
			<td class="text-left">&#13;
			<p>Size: small, medium, large</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>qualitative - ordinal</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>string</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>weight</code></td>&#13;
			<td class="text-left">&#13;
			<p>Typical weight (kg)</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>quantitative</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>height</code></td>&#13;
			<td class="text-left">&#13;
			<p>Typical height from the shoulder (cm)</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>quantitative</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>floating point</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left"><code>repetition</code></td>&#13;
			<td class="text-left">&#13;
			<p>Number of repetitions to understand a new command: &lt;5, 5–15, 15–25, 25–40, 40–80, 80–100</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>qualitative - ordinal</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>string</p>&#13;
			</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<p>This sharper understanding of the feature types of the AKC data helps us make quality checks and transformations. We discussed transformations in <a class="reference internal" data-type="xref" href="ch09.html#ch-wrangling">Chapter 9</a>, but there are a few additional transformations that were not covered. These pertain to categories of qualitative features, and we describe them next<a contenteditable="false" data-primary="" data-startref="ix_codebook_eda" data-type="indexterm" id="id1221"/><a contenteditable="false" data-primary="" data-startref="ix_data_dict_eda" data-type="indexterm" id="id1222"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Transforming Qualitative Features" data-type="sect2"><div class="sect2" id="transforming-qualitative-features">&#13;
<h2>Transforming Qualitative Features</h2>&#13;
&#13;
<p>Whether a feature<a contenteditable="false" data-primary="transformations" data-secondary="of qualitative features" data-secondary-sortas="qualitative features" data-type="indexterm" id="ix_transf_qual_feat"/><a contenteditable="false" data-primary="features and feature types" data-secondary="feature engineering" data-type="indexterm" id="ix_feat_feat_engin"/><a contenteditable="false" data-primary="feature engineering" data-secondary="qualitative features" data-type="indexterm" id="ix_feat_engin_qual"/> is nominal or ordinal, we may find it useful to relabel categories so that they are more informative, collapse categories to simplify a visualization, and even convert a numeric feature to ordinal to focus on particular transition points. We explain when we may want to make each of these transformations and give examples.</p>&#13;
&#13;
<section data-pdf-bookmark="Relabel categories" data-type="sect3"><div class="sect3" id="relabel-categories">&#13;
<h3>Relabel categories</h3>&#13;
&#13;
<p>Summary<a contenteditable="false" data-primary="categorical data" data-secondary="transforming qualitative features" data-type="indexterm" id="ix_cat_data_transf"/><a contenteditable="false" data-primary="categorical data" data-secondary="relabeling" data-type="indexterm" id="id1223"/><a contenteditable="false" data-primary="relabeling categories" data-type="indexterm" id="id1224"/> statistics, like the mean and the median, make sense for quantitative data, but typically not for qualitative data. For example, the average price for toy breeds makes sense to calculate ($687), but the “average” breed suitability for children doesn’t. However, <code>pandas</code> will happily compute the mean of the values in the <span class="keep-together"><code>children</code></span> column if we ask it to:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="c1"># Don't use this value in actual data analysis!</code></span><code>&#13;
</code><span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s2">"</code><code class="s2">children</code><code class="s2">"</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">mean</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
1.4910714285714286&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Instead, we want to consider the distribution of 1s, 2s, and 3s of <code>children</code>.</p>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The key difference between storage<a contenteditable="false" data-primary="data types" data-secondary="and dtype storage type" data-secondary-sortas="dtype storage type" data-type="indexterm" id="id1225"/> types and feature types is that storage types say what operations we can write code to <em>compute</em>, while feature types say what operations <em>make sense for the data</em>.</p>&#13;
</div>&#13;
&#13;
<p>We can transform <code>children</code> by replacing the numbers with their string descriptions. Changing 1, 2, and 3 into high, medium, and low makes it easier to recognize that <code>children</code> is categorical. With strings, we would not be tempted to compute a mean, the categories would be connected to their meaning, and labels for plots would have reasonable values by default. For example, let’s focus on just the toy breeds and make a bar plot of suitability for children. First, we create a new column with the categories of suitability as strings:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">kids</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">{</code></span><span><code class="mi">1</code></span><span><code class="p">:</code></span><span><code class="s2">"</code><code class="s2">high</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">2</code></span><span><code class="p">:</code></span><span><code class="s2">"</code><code class="s2">medium</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">3</code></span><span><code class="p">:</code></span><span><code class="s2">"</code><code class="s2">low</code><code class="s2">"</code></span><span><code class="p">}</code></span><code>&#13;
</code><span><code class="n">dogs</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><span><code class="n">kids</code></span><span><code class="o">=</code></span><span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">children</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">replace</code></span><span><code class="p">(</code></span><span><code class="n">kids</code></span><span><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">dogs</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_html">&#13;
<div>&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>breed</th>&#13;
			<th>group</th>&#13;
			<th>score</th>&#13;
			<th>longevity</th>&#13;
			<th>...</th>&#13;
			<th>weight</th>&#13;
			<th>height</th>&#13;
			<th>repetition</th>&#13;
			<th>kids</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>0</strong></td>&#13;
			<td>Border Collie</td>&#13;
			<td>herding</td>&#13;
			<td>3.64</td>&#13;
			<td>12.52</td>&#13;
			<td>...</td>&#13;
			<td>NaN</td>&#13;
			<td>51.0</td>&#13;
			<td class="right">&lt;5</td>&#13;
			<td>low</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>1</strong></td>&#13;
			<td>Border Terrier</td>&#13;
			<td>terrier</td>&#13;
			<td>3.61</td>&#13;
			<td>14.00</td>&#13;
			<td>...</td>&#13;
			<td class="right">6.0</td>&#13;
			<td>NaN</td>&#13;
			<td class="right">15-25</td>&#13;
			<td>high</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>2</strong></td>&#13;
			<td>Brittany</td>&#13;
			<td>sporting</td>&#13;
			<td>3.54</td>&#13;
			<td>12.92</td>&#13;
			<td>...</td>&#13;
			<td class="right">16.0</td>&#13;
			<td>48.0</td>&#13;
			<td class="right">5-15</td>&#13;
			<td>medium</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>...</strong></td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>169</strong></td>&#13;
			<td>Wire Fox Terrier</td>&#13;
			<td>terrier</td>&#13;
			<td>NaN</td>&#13;
			<td>13.17</td>&#13;
			<td>...</td>&#13;
			<td class="right">8.0</td>&#13;
			<td>38.0</td>&#13;
			<td class="right">25-40</td>&#13;
			<td>NaN</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>170</strong></td>&#13;
			<td>Wirehaired Pointing Griffon</td>&#13;
			<td>sporting</td>&#13;
			<td>NaN</td>&#13;
			<td>8.80</td>&#13;
			<td>...</td>&#13;
			<td>NaN</td>&#13;
			<td>56.0</td>&#13;
			<td class="right">25-40</td>&#13;
			<td>NaN</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>171</strong></td>&#13;
			<td>Xoloitzcuintli</td>&#13;
			<td>non-sporting</td>&#13;
			<td>NaN</td>&#13;
			<td>NaN</td>&#13;
			<td>...</td>&#13;
			<td>NaN</td>&#13;
			<td>42.0</td>&#13;
			<td>NaN</td>&#13;
			<td>NaN</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<pre>&#13;
172 rows × 13 columns</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Then we can make the bar plot of counts of each category of suitability among the toy breeds:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">toy_dogs</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">query</code></span><span><code class="p">(</code></span><span><code class="s1">'</code><code class="s1">group == </code><code class="s1">"</code><code class="s1">toy</code><code class="s1">"</code><code class="s1">'</code></span><span><code class="p">)</code></span><span><code class="o">.</code></span><span><code class="n">groupby</code></span><span><code class="p">(</code></span><span><code class="s1">'</code><code class="s1">kids</code><code class="s1">'</code></span><span><code class="p">)</code></span><span><code class="o">.</code></span><span><code class="n">count</code></span><span><code class="p">(</code><code class="p">)</code></span><span><code class="o">.</code></span><span><code class="n">reset_index</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">bar</code></span><span><code class="p">(</code></span><span><code class="n">toy_dogs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">kids</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">breed</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>       </code><span><code class="n">category_orders</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s2">"</code><code class="s2">kids</code><code class="s2">"</code></span><span><code class="p">:</code></span><code> </code><span><code class="p">[</code></span><span><code class="s2">"</code><code class="s2">low</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">medium</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">high</code><code class="s2">"</code></span><span><code class="p">]</code><code class="p">}</code><code class="p">,</code></span><code>&#13;
</code><code>       </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s2">"</code><code class="s2">kids</code><code class="s2">"</code></span><span><code class="p">:</code></span><code> </code><span><code class="s2">"</code><code class="s2">Suitability for children</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">breed</code><code class="s2">"</code></span><span><code class="p">:</code></span><code> </code><span><code class="s2">"</code><code class="s2">count</code><code class="s2">"</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in01.png"/></div></figure>&#13;
&#13;
<p>We do not always want to have categorical<a contenteditable="false" data-primary="strings" data-secondary="finding and transforming in EDA" data-type="indexterm" id="id1226"/> data represented by strings. Strings generally take up more space to store, which can greatly increase the size of a dataset if it contains many categorical features.</p>&#13;
&#13;
<p>At times, a qualitative feature has many categories and we prefer a higher-level view of the data, so we collapse categories.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Collapse categories" data-type="sect3"><div class="sect3" id="collapse-categories">&#13;
<h3>Collapse categories</h3>&#13;
&#13;
<p>Let’s create a new column<a contenteditable="false" data-primary="categorical data" data-secondary="collapsing categories" data-type="indexterm" id="id1227"/><a contenteditable="false" data-primary="collapsing categories" data-type="indexterm" id="id1228"/><a contenteditable="false" data-primary="bool storage type" data-type="indexterm" id="id1229"/>, called <code>play</code>, to represent the groups of dogs whose “purpose” is to play (or not). (This is a fictitious distinction used for demonstration purposes.) This category consists of the toy and non-sporting breeds. The new feature, <code>play</code>, is a transformation of the feature <code>group</code> that collapses categories: toy and non-sporting are combined into one category, and the remaining categories are placed in a second, non-play category. The boolean (<code>bool</code>) storage type is useful to indicate the presence or absence of this characteristic:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">with_play</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><span><code class="n">play</code></span><span><code class="o">=</code></span><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s2">"</code><code class="s2">group</code><code class="s2">"</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">==</code></span><code> </code><span><code class="s2">"</code><code class="s2">toy</code><code class="s2">"</code></span><span><code class="p">)</code></span><code> </code><span><code class="o">|</code></span><code>&#13;
</code><code>                             </code><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s2">"</code><code class="s2">group</code><code class="s2">"</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">==</code></span><code> </code><span><code class="s2">"</code><code class="s2">non-sporting</code><code class="s2">"</code></span><span><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Representing a two-category qualitative feature as a boolean has a few advantages. For example, the mean of <code>play</code> makes sense because it returns the fraction of <code>True</code> values. When booleans are used for numeric calculations, <code>True</code> becomes 1 and <code>False</code> becomes 0:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">with_play</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">play</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">mean</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_plain highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
0.22093023255813954&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>This storage type gives us a shortcut<a contenteditable="false" data-primary="boolean values" data-secondary="and storage types" data-secondary-sortas="storage types" data-type="indexterm" id="id1230"/> to compute counts and averages of boolean values. In <a class="reference internal" data-type="xref" href="ch15.html#ch-linear">Chapter 15</a>, we’ll see that it’s also a handy encoding for modeling.</p>&#13;
&#13;
<p>There are also times, like when a discrete quantitative feature has a long tail, that we want to truncate the higher values, which turns the quantitative feature into an ordinal. We describe this next<a contenteditable="false" data-primary="" data-startref="ix_cat_data_transf" data-type="indexterm" id="id1231"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Convert quantitative to ordinal" data-type="sect3"><div class="sect3" id="convert-quantitative-to-ordinal">&#13;
<h3>Convert quantitative to ordinal</h3>&#13;
&#13;
<p>Finally, another transformation<a contenteditable="false" data-primary="categorical data" data-secondary="ordinal features" data-type="indexterm" id="id1232"/><a contenteditable="false" data-primary="numeric data" data-secondary="converting into categorical data" data-type="indexterm" id="id1233"/><a contenteditable="false" data-primary="ordinal features" data-type="indexterm" id="id1234"/><a contenteditable="false" data-primary="quantitative to ordinal conversion" data-type="indexterm" id="id1235"/><a contenteditable="false" data-primary="categorical data" data-secondary="converting numeric data into" data-type="indexterm" id="id1236"/> that we sometimes find useful is to convert numeric values into categories. For example, we might collapse the values in <code>ailments</code> into categories: 0, 1, 2, 3, 4+. In other words, we turn <code>ailments</code> from a quantitative feature into an ordinal feature with the mapping 0→0, 1→1, 2→2, 3→3, and any value 4 or larger→4+. We might want to make this transformation because few breeds have more than three genetic ailments. This simplification can be clearer and adequate for an investigation.</p>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>As of this writing (late 2022), <code>pandas</code> also implements a <code>category</code> <code>dtype</code> that is designed<a contenteditable="false" data-primary="category dtype" data-type="indexterm" id="id1237"/> to work with qualitative data. However, this storage type is not yet widely adopted by the visualization and modeling libraries, which limits its usefulness. For that reason, we do not transform our qualitative variables into the <code>category</code> <code>dtype</code>. We expect that future readers may want to use the <code>category</code> <code>dtype</code> as more libraries support it.</p>&#13;
</div>&#13;
&#13;
<p>When we convert a quantitative feature to ordinal, we lose information. We can’t go back. That is, if we know the number of ailments for a breed is four or more, we can’t re-create the actual numeric value. The same thing happens when we collapse categories. For this reason, it’s a good practice to keep the original feature. If we need to check our work or change categories, we can document and re-create our steps.</p>&#13;
&#13;
<p>In general, the feature type helps us figure out what kind of plot is most appropriate. We discuss the mapping between feature type and plots next<a contenteditable="false" data-primary="" data-startref="ix_transf_qual_feat" data-type="indexterm" id="id1238"/><a contenteditable="false" data-primary="" data-startref="ix_feat_engin_qual" data-type="indexterm" id="id1239"/><a contenteditable="false" data-primary="" data-startref="ix_feat_feat_engin" data-type="indexterm" id="id1240"/><a contenteditable="false" data-primary="" data-startref="ix_feat_dog_breeds" data-type="indexterm" id="id1241"/>.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="The Importance of Feature Types" data-type="sect2"><div class="sect2" id="the-importance-of-feature-types">&#13;
<h2>The Importance of Feature Types</h2>&#13;
&#13;
<p>Feature<a contenteditable="false" data-primary="features and feature types" data-secondary="matching types to plots" data-type="indexterm" id="id1242"/><a contenteditable="false" data-primary="numeric data" data-type="indexterm" id="id1243"/><a contenteditable="false" data-primary="features and feature types" data-secondary="during EDA" data-type="indexterm" id="id1244"/> types guide us in our data analysis. They help specify the operations, visualizations, and models we can meaningfully apply to the data. <a class="reference internal" data-type="xref" href="#feature-plot">Table 10-3</a> matches the feature type(s) to the various kinds of plots that are typically good options. Whether the variable(s) are quantitative or qualitative generally determines the set of viable plots to make, although there are exceptions. Other factors that enter into the decision are the number of observations and whether the feature takes on only a few distinct values. For example, we might make a bar chart, rather than a histogram, for a discrete quantitative variable.</p>&#13;
&#13;
<table id="feature-plot">&#13;
	<caption><span class="label">Table 10-3. </span><span>Mapping feature types to plots</span></caption>&#13;
	<thead>&#13;
		<tr>&#13;
			<th class="text-left head">Feature type</th>&#13;
			<th class="text-left head">Dimension</th>&#13;
			<th class="text-left head">Plot</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td class="text-left">Quantitative</td>&#13;
			<td class="text-left">&#13;
			<p>One feature</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>Rug plot, histogram, density curve, box plot, violin plot</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left">Qualitative</td>&#13;
			<td class="text-left">&#13;
			<p>One feature</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>Bar plot, dot plot, line plot, pie chart</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left">Quantitative</td>&#13;
			<td class="text-left">&#13;
			<p>Two features</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>Scatterplot, smooth curve, contour plot, heat map, quantile-quantile plot</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left">Qualitative</td>&#13;
			<td class="text-left">&#13;
			<p>Two features</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>Side-by-side bar plots, mosaic plot, overlaid lines</p>&#13;
			</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td class="text-left">Mixed</td>&#13;
			<td class="text-left">&#13;
			<p>Two features</p>&#13;
			</td>&#13;
			<td class="text-left">&#13;
			<p>Overlaid density curves, side-by-side box plots, overlaid smooth curves, quantile-quantile plot</p>&#13;
			</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<p>The feature<a contenteditable="false" data-primary="standard deviation" data-type="indexterm" id="id1245"/><a contenteditable="false" data-primary="features and feature types" data-secondary="and summary statistics calculation" data-secondary-sortas="summary statistics calculation" data-type="indexterm" id="id1246"/> type also helps us decide the kind of summary statistics to calculate. With qualitative data, we usually don’t compute means or standard deviations, and instead compute the count, fraction, or percentage of records in each category. With a quantitative feature, we compute the mean or median as a measure of center, and, respectively, the standard deviation or inner quartile range (75th percentile to 25th percentile) as a measure of spread. In addition to the quartiles, we may find other percentiles informative.</p>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The <em>n</em>th percentile is that value <em>q</em> such that <em>n% of the data values fall at or below it.</em> The value <em>q</em> might not be unique, and there are several approaches to select a unique value from the possibilities. With enough data, there should be little difference between these <span class="keep-together">definitions</span>.</p>&#13;
&#13;
<p>To compute percentiles<a contenteditable="false" data-primary="percentiles, computing in Python" data-type="indexterm" id="id1247"/><a contenteditable="false" data-primary="Python" data-secondary="percentile computing in" data-type="indexterm" id="id1248"/> in Python, we prefer using:</p>&#13;
&#13;
<div class="highlight-python notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">percentile</code></span><span><code class="p">(</code></span><span><code class="n">data</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">method</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">lower</code><code class="s1">'</code></span><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>When exploring data, we need to know how to interpret the shapes that our plots reveal. The next three sections give guidance with this interpretation<a contenteditable="false" data-primary="" data-startref="ix_var_type_eda" data-type="indexterm" id="id1249"/><a contenteditable="false" data-primary="" data-startref="ix_eda_feat_type" data-type="indexterm" id="id1250"/><a contenteditable="false" data-primary="" data-startref="ix_feat_feat_type" data-type="indexterm" id="id1251"/>. We also introduce many of the types of plots listed in <a class="reference internal" data-type="xref" href="#feature-plot">Table 10-3</a> through the examples. Others are introduced in <a class="reference internal" data-type="xref" href="ch11.html#ch-viz">Chapter 11</a>.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="What to Look For in a Distribution" data-type="sect1"><div class="sect1" id="sec-eda-distributions">&#13;
<h1>What to Look For in a Distribution</h1>&#13;
&#13;
<p>Visual displays<a contenteditable="false" data-primary="visualization, data" data-secondary="plot types to analyze distribution" data-type="indexterm" id="ix_vis_plot_dist"/><a contenteditable="false" data-primary="features and feature types" data-secondary="plot types to analyze distribution" data-type="indexterm" id="ix_feat_plot_dist"/><a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-secondary="distributions" data-type="indexterm" id="ix_eda_dist_ch10"/><a contenteditable="false" data-primary="data distributions" data-secondary="plot types" data-type="indexterm" id="ix_data_dist_plot"/><a contenteditable="false" data-primary="rug plot, data distribution" data-type="indexterm" id="id1252"/> of a feature can help us see patterns in observations; they are often much better than direct examination of the numbers or strings themselves. The simple rug plot locates each observation as a “yarn” in a “rug” along an axis. The rug plot can be useful when we have a handful of observations, but it soon gets difficult to distinguish high-density (most-populated) regions with, say, even 100 values. The following figure shows a rug plot with about 150 longevity values for dog breeds along the top of a histogram:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">histogram</code></span><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">longevity</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">marginal</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">rug</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">nbins</code></span><span><code class="o">=</code></span><span><code class="mi">20</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>             </code><span><code class="n">histnorm</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">percent</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>             </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">longevity</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Typical lifespan (yr)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in02.png"/></div></figure>&#13;
&#13;
<p>Although we can see an unusually large<a contenteditable="false" data-primary="histograms, for data distribution" data-type="indexterm" id="ix_histo_plot"/><a contenteditable="false" data-primary="density curve plot, data distribution" data-type="indexterm" id="ix_dens_curv_plot"/> value that’s greater than 16 in the rug plot, it’s hard to compare the density of yarns in the other regions. Instead, the histogram gives a much better sense of the density of observations for various longevity values. Similarly, the <em>density curve</em> shown in the following figure gives a picture of the regions of high and low density:</p>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in03.png"/></div></figure>&#13;
&#13;
<p>In both the histogram and density curve, we can see that the distribution of longevity is asymmetric. There is one main mode around 12 years and a shoulder in the 9-to-11-year range, meaning that while 12 is the most common longevity, many breeds have a longevity one to three years shorter than 12. We also see a small secondary mode around 7, and a few breeds with longevity as long as 14 to 16 years.</p>&#13;
&#13;
<p>When interpreting a histogram or density<a contenteditable="false" data-primary="skewed distribution, histogram plot" data-type="indexterm" id="id1253"/> curve, we examine the symmetry and skewness of the distribution; the number, location, and size of high-frequency regions (modes); the length of tails (often in comparison to a bell-shaped curve); gaps where no values are observed; and unusually large or anomalous values. <a class="reference internal" data-type="xref" href="#example-density-plot">Figure 10-1</a> provides a characterization of a distribution with several of these features. When we read a distribution, we connect the features that we see in the plot to the quantity <span class="keep-together">measured</span>.</p>&#13;
&#13;
<figure><div class="figure" id="example-density-plot"><img src="assets/leds_1001.png"/>&#13;
<h6><span class="label">Figure 10-1. </span>Example density plot identifying qualities of a distribution based on its shape</h6>&#13;
</div></figure>&#13;
&#13;
<p>As another example, the distribution of the number of ailments in dog breeds appears in the following histogram:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">bins</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">[</code></span><span><code class="o">-</code></span><span><code class="mf">0.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">0.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">1.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">2.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">3.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">9.5</code></span><span><code class="p">]</code></span><code>&#13;
</code><span><code class="n">g</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sns</code></span><span><code class="o">.</code></span><span><code class="n">histplot</code></span><span><code class="p">(</code></span><span><code class="n">data</code></span><span><code class="o">=</code></span><span><code class="n">dogs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">ailments</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">bins</code></span><span><code class="o">=</code></span><span><code class="n">bins</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">stat</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">density</code><code class="s2">"</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">g</code></span><span><code class="o">.</code></span><span><code class="n">set</code></span><span><code class="p">(</code></span><span><code class="n">xlabel</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">Number of ailments</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">ylabel</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">density</code><code class="s1">'</code></span><span><code class="p">)</code><code class="p">;</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in04.png"/></div></figure>&#13;
&#13;
<p>A value of 0 means this breed has no genetic ailments, 1 corresponds to one genetic ailment, and so on. From the histogram, we see that the distribution of ailments is unimodal with a peak at 0. We also see that the distribution is heavily skewed to the right, with a long right tail indicating that few breeds have between four and nine genetic ailments. Although quantitative, ailments is discrete because only a few <span class="keep-together">integer</span> values are possible. For this reason, we centered the bins on the integers so that the bin from 1.5 to 2.5 contains only those breeds with two ailments. We also made the rightmost bin wider. We lumped into one bin all of the breeds with four to nine ailments. When bin counts are small, we use wider bins to further smooth the distribution because we do not want to read too much into the fluctuations of small numbers. In this case, none of the breeds have six or seven ailments, but some have four, five, eight, or nine.</p>&#13;
&#13;
<p>Next, we point out three key aspects<a contenteditable="false" data-primary="bar plots, data distribution" data-type="indexterm" id="id1254"/> of histograms and density curves: the y-axis should be on a density scale, smoothing hides unimportant details, and histograms are fundamentally different from bar plots. We describe each in turn:</p>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Density in the y-axis</dt>&#13;
	<dd>&#13;
	<p>The y-axes in the histograms<a contenteditable="false" data-primary="density in y-axis, histogram" data-type="indexterm" id="id1255"/> of longevity and ailments are both labeled “density.” This label implies that the total area of the bars in the histogram equals 1. To explain, we can think of the histogram as a skyline with tall buildings having denser populations, and we find the fraction of observations in any bin from the area of the rectangle. For example, the rectangle that runs from 3.5 to 9.5 in the ailments histogram contains about 10% of the breeds: 6 (width) × 0.017 (height) is roughly 0.10. If all of the bins are the same width, then the “skyline” will look the same whether the y-axis represents counts or density. But changing the y-axis to counts in this histogram would give a misleading picture of a very large rectangle in the right tail.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Smoothing</dt>&#13;
	<dd>&#13;
	<p>With a histogram<a contenteditable="false" data-primary="rug plot, data distribution" data-type="indexterm" id="id1256"/> we hide the details of individual yarns in a rug plot in order to view the general features of the distribution. Smoothing refers to this process of replacing sets of points with rectangles; we choose not to show every single point in the dataset in order to reveal broader trends. We might want to smooth out these points because this is a sample and we believe that other values near the ones we observed are reasonable, and/or we want to focus on general structure rather than individual observations. Without the rug, we can’t tell where the points are in a bin. Smooth density curves, like the one we showed earlier for longevity, also have the property that the total area under the curve sums to 1. The density curve<a contenteditable="false" data-primary="kernel density estimate (KDE)" data-type="indexterm" id="id1257"/><a contenteditable="false" data-primary="kernel functions" data-type="indexterm" id="id1258"/> uses a smooth <em>kernel</em> function to spread out the individual yarns and is sometimes referred to as a <em>kernel density estimate</em> (KDE).</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Bar plot ≠ histogram</dt>&#13;
	<dd>&#13;
	<p>With qualitative<a contenteditable="false" data-primary="dot plot, data distribution" data-type="indexterm" id="id1259"/> data, the bar plot serves a similar role to the histogram. The bar plot gives a visual presentation of the “popularity” or frequency of different groups. However, we cannot interpret the shape of the bar plot in the same way as a histogram. Tails and symmetry do not make sense in this setting. Also, the frequency of a category is represented by the height of the bar, and the width carries no information. The two bar charts that follow display identical information about the number of breeds in a category; the only difference is in the width of the bars. In the extreme, the rightmost plot eliminates the bars entirely and represents each count by a single dot. (Without the connecting lines, this figure is called a <em>dot plot</em>.) Reading this line plot, we see that only a few breeds are unsuitable for children:</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">kid_counts</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">groupby</code></span><span><code class="p">(</code><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">kids</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code></span><span><code class="o">.</code></span><span><code class="n">count</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code><span><code class="n">kid_counts</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">kid_counts</code></span><span><code class="o">.</code></span><span><code class="n">reindex</code></span><span><code class="p">(</code><code class="p">[</code></span><span><code class="s2">"</code><code class="s2">high</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">medium</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">low</code><code class="s2">"</code></span><span><code class="p">]</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in05.png"/></div></figure>&#13;
&#13;
<p>Now that we have covered how to examine distributions of single features, we turn to the situation when we want to look at two features and how they relate<a contenteditable="false" data-primary="" data-startref="ix_dens_curv_plot" data-type="indexterm" id="id1260"/><a contenteditable="false" data-primary="" data-startref="ix_histo_plot" data-type="indexterm" id="id1261"/><a contenteditable="false" data-primary="" data-startref="ix_feat_plot_dist" data-type="indexterm" id="id1262"/><a contenteditable="false" data-primary="" data-startref="ix_vis_plot_dist" data-type="indexterm" id="id1263"/><a contenteditable="false" data-primary="" data-startref="ix_data_dist_plot" data-type="indexterm" id="id1264"/><a contenteditable="false" data-primary="" data-startref="ix_eda_dist_ch10" data-type="indexterm" id="id1265"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="What to Look For in a Relationship" data-type="sect1"><div class="sect1" id="sec-eda-relationships">&#13;
<h1>What to Look For in a Relationship</h1>&#13;
&#13;
<p>When we investigate<a contenteditable="false" data-primary="visualization, data" data-secondary="variable relationships" data-type="indexterm" id="ix_vis_var_rel"/><a contenteditable="false" data-primary="variables and variable types" data-secondary="visualizing relationships among" data-type="indexterm" id="ix_var_vis_rel"/><a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-secondary="variable relationships" data-type="indexterm" id="ix_eda_var_rel"/><a contenteditable="false" data-primary="visualization, data" data-secondary="multivariate relationships" data-type="indexterm" id="ix_vis_multivar_dist"/><a contenteditable="false" data-primary="features and feature types" data-secondary="multivariate relationships" data-type="indexterm" id="ix_feat_multi_rel"/><a contenteditable="false" data-primary="multivariate distributions" data-type="indexterm" id="ix_multivar_dist"/><a contenteditable="false" data-primary="data distributions" data-secondary="multivariate relationships" data-type="indexterm" id="ix_data_dist_multi_rel2"/>  multiple variables, we examine the relationships between them, in addition to their distributions. In this section, we consider pairs of features and describe what to look for. <a class="reference internal" data-type="xref" href="#feature-plot">Table 10-3</a> provides guidelines for the type of plot to make based on the feature types. For two features, the combination of types (both quantitative, both qualitative, or a mix) matters. We consider each combination in turn.</p>&#13;
&#13;
<section data-pdf-bookmark="Two Quantitative Features" data-type="sect2"><div class="sect2" id="two-quantitative-features">&#13;
<h2>Two Quantitative Features</h2>&#13;
&#13;
<p>If both features are quantitative<a contenteditable="false" data-primary="numeric data" data-secondary="relating multivariate distributions" data-type="indexterm" id="id1266"/>, then we often examine their relationship with a scatterplot. Each point in a scatterplot marks the position of a pair of values for an observation. So we can think of a scatterplot as a two-dimensional rug plot.</p>&#13;
&#13;
<p>With scatter<a contenteditable="false" data-primary="scatterplots, data distribution" data-type="indexterm" id="id1267"/> plots, we look for linear and simple nonlinear relationships, and we examine the strength of the relationships. We also look to see if a transformation of one or the other or both features leads to a linear relationship.</p>&#13;
&#13;
<p>The following scatterplot displays the weight and height of dog breeds (both are quantitative):</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">scatter</code></span><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">height</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">weight</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>           </code><span><code class="n">marginal_x</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">rug</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">marginal_y</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">rug</code><code class="s2">"</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>           </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">height</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Height (cm)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">weight</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Weight (kg)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">,</code></span><code>&#13;
</code><code>           </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in06.png"/></div></figure>&#13;
&#13;
<p>We observe that dogs that are above average in height tend to be above average in weight. This relationship appears nonlinear: the change in weight for taller dogs grows faster than for shorter dogs. Indeed, that makes sense if we think of a dog as basically shaped like a box: for similarly proportioned boxes, the weight of the contents of the box has a cubic relationship to its length.</p>&#13;
&#13;
<p>It’s important to note that two univariate<a contenteditable="false" data-primary="univariate plots, limitations of pairing" data-type="indexterm" id="id1268"/> plots are missing information found in a bivariate plot—information about how the two features vary together. Practically, histograms for two quantitative features do not contain enough information to create a scatterplot of the features. We must exercise caution and not read too much into a pair of univariate plots. Instead, we need to use one of the plots listed in the appropriate row of <a class="reference internal" data-type="xref" href="#feature-plot">Table 10-3</a> (scatterplot, smooth curve, contour plot, heat map, quantile–quantile plot) to get a sense of the relationship between two quantitative features.</p>&#13;
&#13;
<p>When one feature is numeric and the other qualitative, <a class="reference internal" data-type="xref" href="#feature-plot">Table 10-3</a> makes different recommendations. We describe them next.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="One Qualitative and One Quantitative Variable" data-type="sect2"><div class="sect2" id="one-qualitative-and-one-quantitative-variable">&#13;
<h2>One Qualitative and One Quantitative Variable</h2>&#13;
&#13;
<p>To examine the relationship<a contenteditable="false" data-primary="qualitative data and features" data-secondary="versus quantitative" data-type="indexterm" id="ix_qual_data_num"/><a contenteditable="false" data-primary="numeric data" data-secondary="versus qualitative data" data-secondary-sortas="qualitative data" data-type="indexterm" id="ix_num_data_qual"/> between a quantitative and a qualitative feature, we often use the qualitative feature to divide the data into groups and compare the distribution of the quantitative feature across these groups. For example, we can compare the distribution of height for small, medium, and large dog breeds with three overlaid density curves:</p>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in07.png"/></div></figure>&#13;
&#13;
<p>We see that the distribution of height for the small and medium breeds both appear bimodal, with the left mode the larger in each group. Also, the small and medium groups have a larger spread in height than the large group of breeds.</p>&#13;
&#13;
<p>Side-by-side box plots<a contenteditable="false" data-primary="box plots, data distribution" data-type="indexterm" id="id1269"/><a contenteditable="false" data-primary="density curve plot, data distribution" data-type="indexterm" id="id1270"/><a contenteditable="false" data-primary="violin plot" data-type="indexterm" id="id1271"/> offer a similar comparison of distributions across groups. The box plot offers a simpler approach that can give a crude understanding of a distribution. Likewise, violin plots sketch density curves along an axis for each group. The curve is flipped to create a symmetric “violin” shape. The violin plot aims to bridge the gap between the density curve and box plot. We create box plots (left) and violin plots (right) for the height of breeds given the size labeling:</p>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in08.png"/></div></figure>&#13;
&#13;
<p class="pagebreak-before less_space">The three box plots of height, one for each size of dog, make it clear that the size categorization is based on height because there is almost no overlap in height ranges for the groups. (This was not evident in the density curves due to the smoothing.) What we don’t see in these box plots is the bimodality in the small and medium groups, but we can still see that the large dogs have a narrower spread compared to the other two groups.</p>&#13;
&#13;
<p>Box plots (also known as box-and-whisker plots) give a visual summary of a few important statistics of a distribution. The box denotes the 25th percentile, median, and 75th percentile, the whiskers show the tails, and unusually large or small values are also plotted. Box plots cannot reveal as much shape as a histogram or density curve. They primarily show symmetry<a contenteditable="false" data-primary="outliers" data-secondary="visibility in box plots" data-type="indexterm" id="id1272"/> and skew, long/short tails, and unusually large/small values (also known as <em>outliers</em>).</p>&#13;
&#13;
<p><a class="reference internal" data-type="xref" href="#box-plot">Figure 10-2</a> is a visual explanation of the parts of a box plot. Asymmetry is evident from the median not being in the middle of the box, the sizes of the tails are shown by the length of the whiskers, and outliers are shown by the points that appear beyond the whiskers. The maximum is considered an outlier because it appears beyond the whisker on the right.</p>&#13;
&#13;
<figure><div class="figure" id="box-plot"><img src="assets/leds_1002.png"/>&#13;
<h6><span class="label">Figure 10-2. </span>Diagram of a box plot with the summary statistics labeled</h6>&#13;
</div></figure>&#13;
&#13;
<p>When we examine the relationship between two qualitative features, our focus is on proportions, as we explain next<a contenteditable="false" data-primary="" data-startref="ix_qual_data_num" data-type="indexterm" id="id1273"/><a contenteditable="false" data-primary="" data-startref="ix_num_data_qual" data-type="indexterm" id="id1274"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Two Qualitative Features" data-type="sect2"><div class="sect2" id="two-qualitative-features">&#13;
<h2>Two Qualitative Features</h2>&#13;
&#13;
<p>With two qualitative<a contenteditable="false" data-primary="qualitative data and features" data-secondary="relating multivariate distributions" data-type="indexterm" id="ix_qual_data_multivar"/> features, we often compare the distribution of one feature across subgroups defined by the other feature. In effect, we hold one feature constant and plot the distribution of the other one. To do this, we can use some of the same plots we used to display the distribution of one qualitative feature, such as a line plot or bar plot. As an example, let’s examine the relationship between the suitability of a breed for children and the size of the breed.</p>&#13;
&#13;
<p>To examine the relationship between these two qualitative features, we calculate three sets of proportions (one each for low, medium, and high suitability). Within each suitability category, we find the proportion of small, medium, and large dogs. These proportions are displayed in the following table. Notice that each column sums to 1 (equivalent to 100%):</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">prop_table_t</code></span><code>&#13;
</code></pre>&#13;
&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th>kids</th>&#13;
			<th>high</th>&#13;
			<th>medium</th>&#13;
			<th>low</th>&#13;
		</tr>&#13;
		<tr>&#13;
			<th>size</th>&#13;
			<th> </th>&#13;
			<th> </th>&#13;
			<th> </th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>large</strong></td>&#13;
			<td>0.37</td>&#13;
			<td>0.29</td>&#13;
			<td>0.1</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>medium</strong></td>&#13;
			<td>0.36</td>&#13;
			<td>0.34</td>&#13;
			<td>0.2</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>small</strong></td>&#13;
			<td>0.27</td>&#13;
			<td>0.37</td>&#13;
			<td>0.7</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<p>The line plot<a contenteditable="false" data-primary="line plots, data distribution" data-type="indexterm" id="id1275"/> that follows provides a visualization of these proportions. There is one “line” (set of connected dots) for each suitability level. The connected dots give the breakdown of size within a suitability category. We see that breeds with low suitability for kids are primarily small:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">fig</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">line</code></span><span><code class="p">(</code></span><span><code class="n">prop_table_t</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="n">prop_table_t</code></span><span><code class="o">.</code></span><span><code class="n">columns</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>        </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="n">prop_table_t</code></span><span><code class="o">.</code></span><span><code class="n">index</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">line_dash</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">kids</code><code class="s1">'</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>        </code><span><code class="n">markers</code></span><span><code class="o">=</code></span><span><code class="kc">True</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">500</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_layout</code></span><span><code class="p">(</code></span><code>&#13;
</code><code>    </code><span><code class="n">yaxis_title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">proportion</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">xaxis_title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">Size</code><code class="s2">"</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>    </code><span><code class="n">legend_title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">Suitability &lt;br&gt;for children</code><code class="s2">"</code></span><code>&#13;
</code><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in09.png"/></div></figure>&#13;
&#13;
<p>We can also present<a contenteditable="false" data-primary="bar plots, data distribution" data-type="indexterm" id="id1276"/> these proportions as a collection of side-by-side bar plots, as shown here:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">fig</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">bar</code></span><span><code class="p">(</code></span><span><code class="n">prop_table_t</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="n">prop_table_t</code></span><span><code class="o">.</code></span><span><code class="n">columns</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="n">prop_table_t</code></span><span><code class="o">.</code></span><span><code class="n">index</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>             </code><span><code class="n">barmode</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">group</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">500</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_layout</code></span><span><code class="p">(</code></span><code>&#13;
</code><code>    </code><span><code class="n">yaxis_title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">proportion</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">xaxis_title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">Size</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>    </code><span><code class="n">legend_title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">Suitability &lt;br&gt;for children</code><code class="s2">"</code></span><code>&#13;
</code><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-80"><div class="figure"><img src="assets/leds_10in10.png"/></div></figure>&#13;
&#13;
<p>So far, we’ve covered visualizations that incorporate one or two features. In the next section, we discuss visualizations that incorporate more than two features.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Comparisons in Multivariate Settings" data-type="sect1"><div class="sect1" id="sec-eda-multi">&#13;
<h1>Comparisons in Multivariate Settings</h1>&#13;
&#13;
<p>When we examine<a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-secondary="multivariate settings, comparisons in" data-type="indexterm" id="ix_eda_multi_var_comp"/> a distribution or relationship, we often want to compare it across subgroups of the data. This process of conditioning on additional factors often leads to visualizations that involve three or more variables. In this section, we explain how to read plots that are commonly used to visualize multiple variables.</p>&#13;
&#13;
<p>As an example, let’s compare<a contenteditable="false" data-primary="numeric data" data-secondary="relating multivariate distributions" data-type="indexterm" id="ix_num_data_rel_multi"/> the relationship between height and longevity across repetition categories. First, we collapse repetition (the typical number of times it takes for a dog to learn a new command) from six categories into four: &lt;15, 15–25, 25–40, and 40+:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre class="pagebreak-before less_space" data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">rep_replacements</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">{</code></span><code>&#13;
</code><code>    </code><span><code class="s1">'</code><code class="s1">80-100</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="s1">'</code><code class="s1">40+</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">40-80</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="s1">'</code><code class="s1">40+</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>    </code><span><code class="s1">'</code><code class="s1">&lt;5</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="s1">'</code><code class="s1">&lt;15</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">5-15</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="s1">'</code><code class="s1">&lt;15</code><code class="s1">'</code></span><span><code class="p">,</code></span><code>&#13;
</code><span><code class="p">}</code></span><code>&#13;
</code><span><code class="n">dogs</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><code>&#13;
</code><code>    </code><span><code class="n">repetition</code></span><span><code class="o">=</code></span><span><code class="n">dogs</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">replace</code></span><span><code class="p">(</code></span><span><code class="n">rep_replacements</code></span><span><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Now each group<a contenteditable="false" data-primary="scatterplots, data distribution" data-type="indexterm" id="ix_scatter_plot"/> has about 30 breeds in it, and having fewer categories makes it easier to decipher relationships. These categories are conveyed by differently shaped symbols in a scatterplot:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">scatter</code></span><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">dropna</code></span><span><code class="p">(</code></span><span><code class="n">subset</code></span><span><code class="o">=</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">height</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">longevity</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>           </code><span><code class="n">symbol</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">450</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>           </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">height</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Height (cm)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>                   </code><span><code class="s1">'</code><code class="s1">longevity</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Typical lifespan (yr)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>                  </code><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Repetition</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">,</code></span><code>&#13;
</code><code>          </code><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-65"><div class="figure"><img src="assets/leds_10in11.png"/></div></figure>&#13;
&#13;
<p>This plot would be challenging to interpret if there were more levels within the <span class="keep-together"><code>repetition</code></span> feature.</p>&#13;
&#13;
<p>Facet plots<a contenteditable="false" data-primary="facet plots" data-type="indexterm" id="id1277"/> offer an alternative approach to display these three features:</p>&#13;
&#13;
<div class="highlight-python notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">scatter</code></span><span><code class="p">(</code></span><span><code class="n">dogs</code></span><span><code class="o">.</code></span><span><code class="n">dropna</code></span><span><code class="p">(</code></span><span><code class="n">subset</code></span><span><code class="o">=</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">,</code></span><code> </code><code>&#13;
</code><code>           </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">height</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">longevity</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">trendline</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">ols</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>           </code><span><code class="n">facet_col</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">repetition</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">facet_col_wrap</code></span><span><code class="o">=</code></span><span><code class="mi">2</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>           </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">height</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Height (cm)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>                   </code><span><code class="s1">'</code><code class="s1">longevity</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Typical lifespan (yr)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-75"><div class="figure"><img src="assets/leds_10in12.png"/></div></figure>&#13;
&#13;
<p>Each of the four scatterplots shows the relationship between longevity and height for a different range of repetitions. By separating the scatterplots, we can better assess how the relationship between two quantitative features changes across the subgroups. And we can more easily see the range of height and longevity for each repetition range. We can see that the larger breeds tend to have shorter lifespans. Another interesting feature is that the lines are similar in slope, but the line for the 40+ repetitions sits about 1.5 years below the others. Those breeds tend to live about 1.5 years less on average than the other repetition categories, no matter the height.</p>&#13;
&#13;
<p>Here we summarize the various plotting techniques for making comparisons when we have three (or more) features:</p>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Two quantitative and one qualitative</dt>&#13;
	<dd>&#13;
	<p>We demonstrated this case already with a scatterplot that varies the markers according to the qualitative feature’s categories, or by the panels of scatterplots, with one for each category.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Two qualitative and one quantitative feature</dt>&#13;
	<dd>&#13;
	<p>We have seen in the collections of box plots of height according to breed size that we can compare the basic shape of a distribution across subgroups with side-by-side box plots. When we have two or more qualitative features, we can organize the box plots into groups according to one of the qualitative features.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Three quantitative features</dt>&#13;
	<dd>&#13;
	<p>We can use a similar technique when we plot two quantitative features and one qualitative. This time, we convert one of the quantitative features into an ordinal feature, where each category typically has roughly the same number of records. Then we make faceted scatterplots of the other two features. We again look for similarities in relationships across the facets.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<dl class="simple myst">&#13;
	<dt>Three qualitative features</dt>&#13;
	<dd>&#13;
	<p>When we examine relationships between qualitative features, we examine proportions of one feature within subgroups defined by another. In the previous section, the three line plots in one figure and the side-by-side bar plots both display such comparisons. With three (or more) qualitative features, we can continue to subdivide the data according to the combinations of levels of the features and compare these proportions using line plots, dot plots, side-by-side bar charts, and so forth. But these plots tend to get increasingly difficult to understand with further subdivisions.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
	<p>It’s a good practice to break down a visualization to see whether a relationship changes for subgroups of the data determined by a qualitative feature. This technique<a contenteditable="false" data-primary="controlling for a feature, plots for data distribution" data-type="indexterm" id="id1278"/><a contenteditable="false" data-primary="Simpson’s paradox" data-type="indexterm" id="id1279"/> is called <em>controlling for</em> a feature. You might get a surprise when, for example, a linear relationship in a scatterplot that has an upward trend reverses to downward trends in some or all facets of the scatterplot. This phenomenon is known as <em>Simpson’s paradox</em>. The paradox can happen with qualitative features as well. A <a class="reference external" href="https://oreil.ly/h9tMw">famous case</a> occurred at Berkeley when the admissions to graduate school for men were higher than for women, but when examined within each program the rates favored women. The issue was that women were applying in greater numbers to programs that had lower admission rates.</p>&#13;
	</div>&#13;
&#13;
	<p>Comparisons<a contenteditable="false" data-primary="curse of dimensionality, data distribution" data-type="indexterm" id="id1280"/><a contenteditable="false" data-primary="variables and variable types" data-secondary="plotting categorical data with multiple variables" data-type="indexterm" id="id1281"/><a contenteditable="false" data-primary="categorical data" data-secondary="multiple variable complexities in plotting" data-type="indexterm" id="id1282"/> that involve more than one categorical variable can quickly become cumbersome as the number of possible combinations of categories grows. For example, there are 3 × 4 = 12 size-repetition combinations (if we had kept the original categories for repetitions, we would have 18 combinations). Examining a distribution across 12 subgroups can be difficult. Further, we come up against the problem of having too few observations in subgroups. Although there are nearly 200 rows in the dogs dataframe, half of the size-repetition combinations have 10 or fewer observations. (This is compounded by losing an observation when one feature has a missing value.) This <em>curse of dimensionality</em> also arises when we compare relationships with quantitative data. With just three quantitative variables, some of the scatterplots in a facet plot can easily have too few observations to confirm the shape of the relationship between two variables for the subgroups.</p>&#13;
	&#13;
<p>Now that we’ve seen practical examples of visualizations that are commonly used in exploratory data analysis, we proceed to discuss some high-level guidelines for EDA<a contenteditable="false" data-primary="" data-startref="ix_eda_multi_var_comp" data-type="indexterm" id="id1283"/><a contenteditable="false" data-primary="" data-startref="ix_num_data_rel_multi" data-type="indexterm" id="id1284"/><a contenteditable="false" data-startref="ix_scatter_plot" data-type="indexterm" id="id1285"/><a contenteditable="false" data-primary="" data-startref="ix_multivar_dist" data-type="indexterm" id="id1286"/><a contenteditable="false" data-primary="" data-startref="ix_vis_multivar_dist" data-type="indexterm" id="id1287"/><a contenteditable="false" data-primary="" data-startref="ix_data_dist_multi_rel2" data-type="indexterm" id="id1288"/><a contenteditable="false" data-primary="" data-startref="ix_feat_multi_rel" data-type="indexterm" id="id1289"/><a contenteditable="false" data-startref="ix_dog_breeds_ch10" data-type="indexterm" id="id1290"/><a contenteditable="false" data-startref="ix_qual_data_multivar" data-type="indexterm" id="id1291"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Guidelines for Exploration" data-type="sect1"><div class="sect1" id="sec-eda-guidelines">&#13;
<h1>Guidelines for Exploration</h1>&#13;
&#13;
<p>So far in this chapter<a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-secondary="guidelines for exploration" data-type="indexterm" id="ix_eda_guide"/>, we have introduced the notion of feature types, seen how the feature type can help to figure out what plot to make, and described how to read distributions and relationships in a visualization. EDA relies on building these skills and flexibly developing your understanding of the data.</p>&#13;
&#13;
<p>You saw EDA in action in <a class="reference internal" data-type="xref" href="ch09.html#ch-wrangling">Chapter 9</a> when we developed checks for data quality and feature transformations to improve their usefulness in data analysis. Following are questions to guide you when making plots to explore the data:</p>&#13;
&#13;
<ul>&#13;
	<li>&#13;
	<p>How are the values of Feature X distributed?</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>How do Feature X and Feature Y relate to each other?</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>Is the distribution of Feature X the same across subgroups defined by Feature Z?</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>Are there any unusual observations in X? In the combination of (X,Y)? In X for a subgroup of Z?</p>&#13;
	</li>&#13;
</ul>&#13;
&#13;
<p>As you answer each of these questions<a contenteditable="false" data-primary="features and feature types" data-secondary="during EDA" data-type="indexterm" id="id1292"/>, it is important to tie your answer back to the features measured and the context. It is also important to adopt an active, inquisitive approach to the investigation. To guide your explorations, ask yourself “what next” and “so what” questions, such as the following:</p>&#13;
&#13;
<ul>&#13;
	<li>&#13;
	<p>Do you have reason to expect that one group/observation might be different?</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>Why might your finding about shape matter?</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>What additional comparison might bring added value to the investigation?</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>Are there any potentially important features to create comparisons with/against?</p>&#13;
	</li>&#13;
</ul>&#13;
&#13;
<p>In this process, it’s important to step away from the computer at times to mull over your work. You may want to read additional literature on the subject or go to an expert in the field to discuss your findings. For example, there could be good reasons for an unusual observation, and someone in the field can help clear up and provide more background.</p>&#13;
&#13;
<p>We put these guidelines into practice with a concrete example of EDA next.</p>&#13;
</div></section>&#13;
&#13;
<section class="pagebreak-before" data-pdf-bookmark="Example: Sale Prices for Houses" data-type="sect1"><div class="sect1" id="sec-eda-example">&#13;
<h1 class="less_space">Example: Sale Prices for Houses</h1>&#13;
&#13;
<p>In this final<a contenteditable="false" data-primary="home sale prices example" data-secondary="exploratory data analysis" data-type="indexterm" id="ix_home_price_set2"/><a contenteditable="false" data-primary="exploratory data analysis (EDA)" data-secondary="home sale prices example" data-type="indexterm" id="ix_home_price_set"/> section, we carry out an exploratory analysis using the questions in the previous section to direct our investigations. Although EDA typically begins in the data wrangling stage, for demonstration purposes the data we work with here have already been partially cleaned so that we can focus on exploring the features of interest. Note also that we do not discuss refining the visualizations in much detail; that topic is covered in <a class="reference internal" data-type="xref" href="ch11.html#ch-viz">Chapter 11</a>.</p>&#13;
&#13;
<p>Our data were scraped from the <a class="reference external" href="https://oreil.ly/tP9Xp"><em>San Francisco Chronicle</em></a> (SFChron) website. The data comprise a complete list of homes sold in the area from April 2003 to December 2008. Since we have no plans to generalize our findings beyond the time period and the location and we are working with a census, the population matches the access frame and the sample consists of the entire population.</p>&#13;
&#13;
<p>As for granularity<a contenteditable="false" data-primary="shape of data table" data-secondary="home sale prices example" data-type="indexterm" id="id1293"/>, each record represents a sale of a home in the SF Bay Area during the specified time period. This means that if a home was sold twice during this time, then there are two records in the table. And if a home in the Bay Area was not up for sale during this time, then it does not appear in the dataset.</p>&#13;
&#13;
<p>The data are in the dataframe <code>sfh_df</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">sfh_df</code></span><code>&#13;
</code></pre>&#13;
&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>city</th>&#13;
			<th>zip</th>&#13;
			<th>street</th>&#13;
			<th>price</th>&#13;
			<th>br</th>&#13;
			<th>lsqft</th>&#13;
			<th>bsqft</th>&#13;
			<th>timestamp</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>0</strong></td>&#13;
			<td>Alameda</td>&#13;
			<td>94501.0</td>&#13;
			<td>1001 Post Street</td>&#13;
			<td>689000.0</td>&#13;
			<td>4.0</td>&#13;
			<td class="right">4484.0</td>&#13;
			<td>1982.0</td>&#13;
			<td>2004-08-29</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>1</strong></td>&#13;
			<td>Alameda</td>&#13;
			<td>94501.0</td>&#13;
			<td>1001 Santa Clara Avenue</td>&#13;
			<td>880000.0</td>&#13;
			<td>7.0</td>&#13;
			<td class="right">5914.0</td>&#13;
			<td>3866.0</td>&#13;
			<td>2005-11-06</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>2</strong></td>&#13;
			<td>Alameda</td>&#13;
			<td>94501.0</td>&#13;
			<td>1001 Shoreline Drive \#102</td>&#13;
			<td>393000.0</td>&#13;
			<td>2.0</td>&#13;
			<td class="right">39353.0</td>&#13;
			<td>1360.0</td>&#13;
			<td>2003-09-21</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>...</strong></td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>521488</strong></td>&#13;
			<td>Windsor</td>&#13;
			<td>95492.0</td>&#13;
			<td>9998 Blasi Drive</td>&#13;
			<td>392500.0</td>&#13;
			<td>NaN</td>&#13;
			<td class="right">3111.0</td>&#13;
			<td>NaN</td>&#13;
			<td>2008-02-17</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>521489</strong></td>&#13;
			<td>Windsor</td>&#13;
			<td>95492.0</td>&#13;
			<td>9999 Blasi Drive</td>&#13;
			<td>414000.0</td>&#13;
			<td>NaN</td>&#13;
			<td class="right">2915.0</td>&#13;
			<td>NaN</td>&#13;
			<td>2008-02-17</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>521490</strong></td>&#13;
			<td>Windsor</td>&#13;
			<td>95492.0</td>&#13;
			<td>999 Gemini Drive</td>&#13;
			<td>325000.0</td>&#13;
			<td>3.0</td>&#13;
			<td class="right">7841.0</td>&#13;
			<td>1092.0</td>&#13;
			<td>2003-09-21</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<pre>&#13;
521491 rows × 8 columns</pre>&#13;
&#13;
<p>The dataset does not have an accompanying codebook, but we can determine the features and their storage types by inspection:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">sfh_df</code></span><span><code class="o">.</code></span><span><code class="n">info</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output stream highlight-myst-ansi notranslate">&#13;
<div class="highlight">&#13;
<pre data-type="programlisting">&#13;
&lt;class 'pandas.core.frame.DataFrame'&gt;&#13;
RangeIndex: 521491 entries, 0 to 521490&#13;
Data columns (total 8 columns):&#13;
 #   Column     Non-Null Count   Dtype         &#13;
---  ------     --------------   -----         &#13;
 0   city       521491 non-null  object        &#13;
 1   zip        521462 non-null  float64       &#13;
 2   street     521479 non-null  object        &#13;
 3   price      521491 non-null  float64       &#13;
 4   br         421343 non-null  float64       &#13;
 5   lsqft      435207 non-null  float64       &#13;
 6   bsqft      444465 non-null  float64       &#13;
 7   timestamp  521491 non-null  datetime64[ns]&#13;
dtypes: datetime64[ns](1), float64(5), object(2)&#13;
memory usage: 31.8+ MB&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Based on the names of the fields, we expect the primary key to consist of some combination of city, zip code, street address, and date.</p>&#13;
&#13;
<p>Sale price is our focus, so let’s begin by exploring its distribution. To develop your intuition about distributions, make a guess about the shape of the distribution before you start reading the next section. Don’t worry about the range of prices, just sketch the general shape.</p>&#13;
&#13;
<section data-pdf-bookmark="Understanding Price" data-type="sect2"><div class="sect2" id="understanding-price">&#13;
<h2>Understanding Price</h2>&#13;
&#13;
<p>It seems that a good guess for the shape<a contenteditable="false" data-primary="visualization, data" data-secondary="home sale prices example" data-type="indexterm" id="ix_vis_home_price"/> of the distribution of sale price might be highly skewed to the right with a few very expensive houses. The following summary statistics confirm this skewness:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">percs</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">[</code></span><span><code class="mi">0</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">25</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">50</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">75</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">100</code></span><span><code class="p">]</code></span><code>&#13;
</code><span><code class="n">prices</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">percentile</code></span><span><code class="p">(</code></span><span><code class="n">sfh_df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">,</code></span><code> </code><span><code class="n">percs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">method</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">lower</code><code class="s1">'</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">pd</code></span><span><code class="o">.</code></span><span><code class="n">DataFrame</code></span><span><code class="p">(</code><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="n">prices</code></span><span><code class="p">}</code><code class="p">,</code></span><code> </code><span><code class="n">index</code></span><span><code class="o">=</code></span><span><code class="n">percs</code></span><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_html">&#13;
<div>&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>price</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>0</strong></td>&#13;
			<td class="right">22000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>25</strong></td>&#13;
			<td class="right">410000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>50</strong></td>&#13;
			<td class="right">555000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>75</strong></td>&#13;
			<td class="right">744000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>100</strong></td>&#13;
			<td class="right">20000000.00</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>The median is closer to the lower quartile than the upper quartile. Also, the maximum is 40 times the median! We might wonder whether that $20M sale price is simply an anomalous value or whether there are many houses that sold at such a high price. To find out, we can zoom in on the right tail of the distribution and compute a few high percentiles:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">percs</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">[</code></span><span><code class="mi">95</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">97</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">98</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">99</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">99.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">99.9</code></span><span><code class="p">]</code></span><code>&#13;
</code><span><code class="n">prices</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">percentile</code></span><span><code class="p">(</code></span><span><code class="n">sfh_df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">,</code></span><code> </code><span><code class="n">percs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">method</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">lower</code><code class="s1">'</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">pd</code></span><span><code class="o">.</code></span><span><code class="n">DataFrame</code></span><span><code class="p">(</code><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="n">prices</code></span><span><code class="p">}</code><code class="p">,</code></span><code> </code><span><code class="n">index</code></span><span><code class="o">=</code></span><span><code class="n">percs</code></span><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_html">&#13;
<div>&#13;
<table class="dataframe pagebreak-before less_space">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>price</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>95.00</strong></td>&#13;
			<td class="right">1295000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>97.00</strong></td>&#13;
			<td class="right">1508000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>98.00</strong></td>&#13;
			<td class="right">1707000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>99.00</strong></td>&#13;
			<td class="right">2110000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>99.50</strong></td>&#13;
			<td class="right">2600000.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>99.90</strong></td>&#13;
			<td class="right">3950000.00</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>We see that 99.9% of the houses sold for under $4M, so the $20M sale is indeed a rarity. Let’s examine the histogram of sale prices below $4M:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">under_4m</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh_df</code></span><span><code class="p">[</code></span><span><code class="n">sfh_df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">&lt;</code></span><code> </code><span><code class="mi">4_000_000</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">copy</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">histogram</code></span><span><code class="p">(</code></span><span><code class="n">under_4m</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">nbins</code></span><span><code class="o">=</code></span><span><code class="mi">50</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>             </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Sale price (USD)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in13.png"/></div></figure>&#13;
&#13;
<p>Even without the top 0.1%, the distribution remains highly skewed to the right, with a single mode around $500,000. Let’s plot the histogram of the log-transformed<a contenteditable="false" data-primary="transformations" data-secondary="logarithm (log)" data-type="indexterm" id="ix_transf_log"/><a contenteditable="false" data-primary="data distributions" data-secondary="logarithm transformation" data-type="indexterm" id="ix_data_dist_log"/><a contenteditable="false" data-primary="logarithm transformation" data-secondary="converting right-skewed distributions" data-type="indexterm" id="ix_log_transf_skew"/> sale price. The logarithm transformation often does a good job at converting a right-skewed distribution into one that is more symmetric:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">under_4m</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">log_price</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">under_4m</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">histogram</code></span><span><code class="p">(</code></span><span><code class="n">under_4m</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">log_price</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">nbins</code></span><span><code class="o">=</code></span><span><code class="mi">50</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>             </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">log_price</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Sale price (log10 USD)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in14.png"/></div></figure>&#13;
&#13;
<p>We see that the distribution of log-transformed sale price is roughly symmetric. Now that we have an understanding of the distribution of sale price, let’s consider the so-what questions posed in the previous section on EDA guidelines.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="What Next?" data-type="sect2"><div class="sect2" id="what-next">&#13;
<h2>What Next?</h2>&#13;
&#13;
<p>We have a description of the shape of the sale price, but we need to consider why the shape matters and look for comparison groups where distributions might differ.</p>&#13;
&#13;
<p>Shape matters<a contenteditable="false" data-primary="shape of data table" data-secondary="home sale prices example" data-type="indexterm" id="id1294"/> because models and statistics based on symmetric distributions tend to have more robust and stable properties than highly skewed distributions. (We address this issue more when we cover linear models in <a class="reference internal" data-type="xref" href="ch15.html#ch-linear">Chapter 15</a>.) For this reason, we primarily work with the log-transformed sale price. And we might also choose to limit our analysis to sale prices under $4M since the super-expensive houses may behave quite differently.</p>&#13;
&#13;
<p>As for possible comparisons to make, we look to the context. The housing market rose rapidly during this time and then the bottom fell out of the market. So the distribution of sale price in, say, 2004 might be quite different than in 2008, right before the crash. To explore this notion further, we can examine the behavior of prices over time. Alternatively, we can fix time, and examine the relationships between price and the other features of interest. Both approaches are potentially worthwhile.</p>&#13;
&#13;
<p>We narrow our focus to one year (in <a class="reference internal" data-type="xref" href="ch11.html#ch-viz">Chapter 11</a> we look at the time dimension). We reduce the data to sales made in 2004, so rising prices should have a limited impact on the distributions and relationships that we examine. To limit the influence of the very expensive and large houses, we also restrict the dataset to sales below $4M and houses smaller than 12,000 ft<sup>2</sup>. This subset still contains large and expensive houses, but not outrageously so. Later, we further narrow our exploration to a few cities of interest:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="k">def</code></span><code> </code><span><code class="nf">subset</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">)</code><code class="p">:</code></span><code>&#13;
</code><code>    </code><span><code class="k">return</code></span><code> </code><span><code class="n">df</code></span><span><code class="o">.</code></span><span><code class="n">loc</code></span><span><code class="p">[</code><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">&lt;</code></span><code> </code><span><code class="mi">4_000_000</code></span><span><code class="p">)</code></span><code> </code><span><code class="o">&amp;</code></span><code>&#13;
</code><code>                  </code><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">bsqft</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">&lt;</code></span><code> </code><span><code class="mi">12_000</code></span><span><code class="p">)</code></span><code> </code><span><code class="o">&amp;</code></span><code> </code><code>&#13;
</code><code>                  </code><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">timestamp</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">dt</code></span><span><code class="o">.</code></span><span><code class="n">year</code></span><code> </code><span><code class="o">==</code></span><code> </code><span><code class="mi">2004</code></span><span><code class="p">)</code><code class="p">]</code></span><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><span><code class="n">sfh</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh_df</code></span><span><code class="o">.</code></span><span><code class="n">pipe</code></span><span><code class="p">(</code></span><span><code class="n">subset</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">sfh</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_html">&#13;
<div>&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>city</th>&#13;
			<th>zip</th>&#13;
			<th>street</th>&#13;
			<th>price</th>&#13;
			<th>br</th>&#13;
			<th>lsqft</th>&#13;
			<th>bsqft</th>&#13;
			<th>timestamp</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>0</strong></td>&#13;
			<td>Alameda</td>&#13;
			<td>94501.00</td>&#13;
			<td>1001 Post Street</td>&#13;
			<td class="right">689000.00</td>&#13;
			<td>4.00</td>&#13;
			<td class="right">4484.00</td>&#13;
			<td>1982.00</td>&#13;
			<td>2004-08-29</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>3</strong></td>&#13;
			<td>Alameda</td>&#13;
			<td>94501.00</td>&#13;
			<td>1001 Shoreline Drive \#108</td>&#13;
			<td class="right">485000.00</td>&#13;
			<td>2.00</td>&#13;
			<td class="right">39353.00</td>&#13;
			<td>1360.00</td>&#13;
			<td>2004-09-05</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>10</strong></td>&#13;
			<td>Alameda</td>&#13;
			<td>94501.00</td>&#13;
			<td>1001 Shoreline Drive \#306</td>&#13;
			<td class="right">390000.00</td>&#13;
			<td>2.00</td>&#13;
			<td class="right">39353.00</td>&#13;
			<td>1360.00</td>&#13;
			<td>2004-01-25</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>...</strong></td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
			<td>...</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>521467</strong></td>&#13;
			<td>Windsor</td>&#13;
			<td>95492.00</td>&#13;
			<td>9960 Herb Road</td>&#13;
			<td class="right">439000.00</td>&#13;
			<td>3.00</td>&#13;
			<td class="right">9583.00</td>&#13;
			<td>1626.00</td>&#13;
			<td>2004-04-04</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>521471</strong></td>&#13;
			<td>Windsor</td>&#13;
			<td>95492.00</td>&#13;
			<td>9964 Troon Court</td>&#13;
			<td class="right">1200000.00</td>&#13;
			<td>3.00</td>&#13;
			<td class="right">20038.00</td>&#13;
			<td>4281.00</td>&#13;
			<td>2004-10-31</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>521478</strong></td>&#13;
			<td>Windsor</td>&#13;
			<td>95492.00</td>&#13;
			<td>9980 Brooks Road</td>&#13;
			<td class="right">650000.00</td>&#13;
			<td>3.00</td>&#13;
			<td class="right">45738.00</td>&#13;
			<td>1200.00</td>&#13;
			<td>2004-10-24</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
&#13;
<pre>&#13;
105996 rows × 8 columns</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>For these data, the shape of the distribution of sale price remains the same—price is still highly skewed to the right. We continue to work with this subset to address the question of whether there are any potentially important features to study along with price<a contenteditable="false" data-primary="" data-startref="ix_log_transf_skew" data-type="indexterm" id="id1295"/><a contenteditable="false" data-primary="" data-startref="ix_transf_log" data-type="indexterm" id="id1296"/><a contenteditable="false" data-primary="" data-startref="ix_data_dist_log" data-type="indexterm" id="id1297"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Examining Other Features" data-type="sect2"><div class="sect2" id="examining-other-features">&#13;
<h2>Examining Other Features</h2>&#13;
&#13;
<p>In addition to the sale price, which is our main focus, a few other features that might be important to our investigation are the size of the house, lot (or property) size, and number of bedrooms. We explore the distributions of these features and their relationship to sale price and to each other.</p>&#13;
&#13;
<p>Since the size of the house and the property are likely related to its price, it seems reasonable to guess that these features are also skewed to the right, so we apply a log transformation to the building size:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">sfh</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><span><code class="n">log_bsqft</code></span><span><code class="o">=</code></span><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">bsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>We compare the distribution of building size on the regular and logged scales:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">fig</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">make_subplots</code></span><span><code class="p">(</code></span><span><code class="mi">1</code></span><span><code class="p">,</code></span><span><code class="mi">2</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">add_trace</code></span><span><code class="p">(</code></span><span><code class="n">go</code></span><span><code class="o">.</code></span><span><code class="n">Histogram</code></span><span><code class="p">(</code></span><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">bsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">,</code></span><code> </code><span><code class="n">histnorm</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">percent</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>                           </code><span><code class="n">nbinsx</code></span><span><code class="o">=</code></span><span><code class="mi">60</code></span><span><code class="p">)</code><code class="p">,</code></span><code> </code><span><code class="n">row</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">col</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">add_trace</code></span><span><code class="p">(</code></span><span><code class="n">go</code></span><span><code class="o">.</code></span><span><code class="n">Histogram</code></span><span><code class="p">(</code></span><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">log_bsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">,</code></span><code> </code><span><code class="n">histnorm</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">percent</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>                           </code><span><code class="n">nbinsx</code></span><span><code class="o">=</code></span><span><code class="mi">60</code></span><span><code class="p">)</code><code class="p">,</code></span><code> </code><span><code class="n">row</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">col</code></span><span><code class="o">=</code></span><span><code class="mi">2</code></span><span><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_xaxes</code></span><span><code class="p">(</code></span><span><code class="n">title</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">Building size (ft²)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">row</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">col</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_xaxes</code></span><span><code class="p">(</code></span><span><code class="n">title</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">Building size (ft², log10)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">row</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">col</code></span><span><code class="o">=</code></span><span><code class="mi">2</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_yaxes</code></span><span><code class="p">(</code></span><span><code class="n">title</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">percent</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">row</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">col</code></span><span><code class="o">=</code></span><span><code class="mi">1</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_yaxes</code></span><span><code class="p">(</code></span><span><code class="nb">range</code></span><span><code class="o">=</code></span><span><code class="p">[</code></span><span><code class="mi">0</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">18</code></span><span><code class="p">]</code><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_layout</code></span><span><code class="p">(</code></span><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">450</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">showlegend</code></span><span><code class="o">=</code></span><span><code class="kc">False</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-75"><div class="figure"><img src="assets/leds_10in15.png"/></div></figure>&#13;
&#13;
<p>The distribution is unimodal with a peak at about 1,500 ft², and many houses are over 2,500 ft² in size. We have confirmed our intuition: the log-transformed building size is nearly symmetric, although it maintains a slight skew. The same is the case for the distribution of lot size.</p>&#13;
&#13;
<p>Given that both house and lot size have skewed distributions, a scatterplot of the two should most likely be on log scale too:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">sfh</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><span><code class="n">log_lsqft</code></span><span><code class="o">=</code></span><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">lsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>We compare the plot with and without the log transformation:</p>&#13;
&#13;
<figure class="informal"><div class="figure"><img src="assets/leds_10in16.png"/></div></figure>&#13;
&#13;
<p>The scatterplot on the left is in the original units, which makes it difficult to discern the relationship because most of the points are crowded into the bottom of the plotting region. In contrast, the scatterplot on the right reveals a few interesting features: there is a horizontal line along the bottom of the scatterplot, where it appears that many houses have the same lot size, no matter the building size; and there appears to be a slight positive log–log linear association between lot and building size.</p>&#13;
&#13;
<p>Let’s look at some lower quantiles of lot size to try to figure out this unusual value:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">percs</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">[</code></span><span><code class="mf">0.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">1</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">1.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">2</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">2.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">3</code></span><span><code class="p">]</code></span><code>&#13;
</code><span><code class="n">lots</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">percentile</code></span><span><code class="p">(</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">lsqft</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">dropna</code></span><span><code class="p">(</code><code class="p">)</code><code class="p">,</code></span><code> </code><span><code class="n">percs</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">method</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">lower</code><code class="s1">'</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">pd</code></span><span><code class="o">.</code></span><span><code class="n">DataFrame</code></span><span><code class="p">(</code><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">lot_size</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="n">lots</code></span><span><code class="p">}</code><code class="p">,</code></span><code> </code><span><code class="n">index</code></span><span><code class="o">=</code></span><span><code class="n">percs</code></span><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<div class="cell_output docutils container">&#13;
<div class="output text_html">&#13;
<div>&#13;
<table class="dataframe">&#13;
	<thead>&#13;
		<tr>&#13;
			<th> </th>&#13;
			<th>lot_size</th>&#13;
		</tr>&#13;
	</thead>&#13;
	<tbody>&#13;
		<tr>&#13;
			<td><strong>0.50</strong></td>&#13;
			<td>436.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>1.00</strong></td>&#13;
			<td>436.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>1.50</strong></td>&#13;
			<td>436.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>2.00</strong></td>&#13;
			<td>436.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>2.50</strong></td>&#13;
			<td>436.00</td>&#13;
		</tr>&#13;
		<tr>&#13;
			<td><strong>3.00</strong></td>&#13;
			<td>782.00</td>&#13;
		</tr>&#13;
	</tbody>&#13;
</table>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>We found something interesting: about 2.5% of the houses have a lot size of 436 ft<sup>2</sup>. This is tiny and makes little sense, so we make a note of the anomaly for further investigation.</p>&#13;
&#13;
<p>Another measure of house size is the number of bedrooms. Since this is a discrete quantitative variable, we can treat it as a qualitative feature and make a bar plot.</p>&#13;
&#13;
<p>Houses in the Bay Area tend to be on the smaller side, so we venture to guess that the distribution will have a peak at three and skew to the right, with a few houses having five or six bedrooms. Let’s check:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">br_cat</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><span><code class="o">.</code></span><span><code class="n">reset_index</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">bar</code></span><span><code class="p">(</code></span><span><code class="n">br_cat</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">br</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">count</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>       </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Number of bedrooms</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in17.png"/></div></figure>&#13;
&#13;
<p>The bar plot confirms that we generally had the right idea. However, we find that there are some houses with over 30 bedrooms! That’s a bit hard to believe and points to another possible data quality problem. Since the records include the addresses of the houses, we can double-check theses values on a real estate app.</p>&#13;
&#13;
<p>In the meantime, let’s just transform the number of bedrooms into an ordinal feature by reassigning all values larger than 8 to 8+, and re-create the bar plot with the transformed data:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">eight_up</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="o">.</code></span><span><code class="n">loc</code></span><span><code class="p">[</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">&gt;</code><code class="o">=</code></span><code> </code><span><code class="mi">8</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">unique</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">new_br</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">replace</code></span><span><code class="p">(</code></span><span><code class="n">eight_up</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">8</code></span><span><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">br_cat</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">new_br</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">value_counts</code></span><span><code class="p">(</code><code class="p">)</code></span><span><code class="o">.</code></span><span><code class="n">reset_index</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">bar</code></span><span><code class="p">(</code></span><span><code class="n">br_cat</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">new_br</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">count</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">350</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>       </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">new_br</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Number of bedrooms</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-60"><div class="figure"><img src="assets/leds_10in18.png"/></div></figure>&#13;
&#13;
<p>We can see that even if we lump all of the houses with 8+ bedrooms together, they do not amount to many. The distribution is nearly symmetric with a peak at 3, nearly the same proportion of houses have two or four bedrooms, and nearly the same have one or five. There is asymmetry present, with a few houses having six or more bedrooms.</p>&#13;
&#13;
<p>Now we examine the relationship between the number of bedrooms and sale price. Before we proceed, we save the transformations done thus far:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="k">def</code></span><code> </code><span><code class="nf">log_vals</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">)</code><code class="p">:</code></span><code>&#13;
</code><code>    </code><span><code class="k">return</code></span><code> </code><span><code class="n">df</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><span><code class="n">log_price</code></span><span><code class="o">=</code></span><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">,</code></span><code>&#13;
</code><code>                     </code><span><code class="n">log_bsqft</code></span><span><code class="o">=</code></span><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">bsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">,</code></span><code>&#13;
</code><code>                     </code><span><code class="n">log_lsqft</code></span><span><code class="o">=</code></span><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">lsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="k">def</code></span><code> </code><span><code class="nf">clip_br</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">)</code><code class="p">:</code></span><code>&#13;
</code><code>    </code><span><code class="n">eight_up</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">df</code></span><span><code class="o">.</code></span><span><code class="n">loc</code></span><span><code class="p">[</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">&gt;</code><code class="o">=</code></span><code> </code><span><code class="mi">8</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">unique</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code><code>    </code><span><code class="n">new_br</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">br</code><code class="s1">'</code></span><span><code class="p">]</code></span><span><code class="o">.</code></span><span><code class="n">replace</code></span><span><code class="p">(</code></span><span><code class="n">eight_up</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">8</code></span><span><code class="p">)</code></span><code>&#13;
</code><code>    </code><span><code class="k">return</code></span><code> </code><span><code class="n">df</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><span><code class="n">new_br</code></span><span><code class="o">=</code></span><span><code class="n">new_br</code></span><span><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">sfh</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">(</code></span><span><code class="n">sfh_df</code></span><code>&#13;
</code><code> </code><span><code class="o">.</code></span><span><code class="n">pipe</code></span><span><code class="p">(</code></span><span><code class="n">subset</code></span><span><code class="p">)</code></span><code>&#13;
</code><code> </code><span><code class="o">.</code></span><span><code class="n">pipe</code></span><span><code class="p">(</code></span><span><code class="n">log_vals</code></span><span><code class="p">)</code></span><code>&#13;
</code><code> </code><span><code class="o">.</code></span><span><code class="n">pipe</code></span><span><code class="p">(</code></span><span><code class="n">clip_br</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>Now we’re ready to consider relationships between the number of bedrooms and other variables.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Delving Deeper into Relationships" data-type="sect2"><div class="sect2" id="delving-deeper-into-relationships">&#13;
<h2>Delving Deeper into Relationships</h2>&#13;
&#13;
<p>Let’s begin by examining how the distribution of price changes for houses with different numbers of bedrooms. We can do this with box plots:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">box</code></span><span><code class="p">(</code></span><span><code class="n">sfh</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">new_br</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">log_y</code></span><span><code class="o">=</code></span><span><code class="kc">True</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">450</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>      </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">new_br</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Number of bedrooms</code><code class="s1">'</code></span><span><code class="p">,</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Sale price (USD)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-80"><div class="figure"><img src="assets/leds_10in19.png"/></div></figure>&#13;
&#13;
<p>The median sale price increases with the number of bedrooms from one to five, but for the largest houses (those with more than six bedrooms), the distribution of log-transformed sale price appears nearly the same.</p>&#13;
&#13;
<p>We would expect houses with one bedroom to be smaller than houses with, say, four bedrooms. We might also guess that houses with six or more bedrooms are similar in size and price. To dive deeper, we consider a kind of transformation that divides price by building size to give us the price per square foot. We want to check if this feature is constant for all houses; in other words, if price is primarily determined by size. To do this we look at the relationship between the two pairs of size and price, and price per square foot and size:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">sfh</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="o">.</code></span><span><code class="n">assign</code></span><span><code class="p">(</code></span><code>&#13;
</code><code>    </code><span><code class="n">ppsf</code></span><span><code class="o">=</code></span><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">]</code></span><code> </code><span><code class="o">/</code></span><code> </code><span><code class="n">sfh</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">bsqft</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">,</code></span><code> </code><code>&#13;
</code><code>    </code><span><code class="n">log_ppsf</code></span><span><code class="o">=</code></span><span><code class="k">lambda</code></span><code> </code><span><code class="n">df</code></span><span><code class="p">:</code></span><code> </code><span><code class="n">np</code></span><span><code class="o">.</code></span><span><code class="n">log10</code></span><span><code class="p">(</code></span><span><code class="n">df</code></span><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">ppsf</code><code class="s1">'</code></span><span><code class="p">]</code><code class="p">)</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>We create two scatterplots. The one on the left shows price against building size (both log-transformed), and the plot on the right shows price per square foot (log-transformed) against building size. In addition, each plot has an added smooth curve that reflects the local average price or price per square foot for buildings of roughly the same size:</p>&#13;
&#13;
<figure><div class="figure"><img src="assets/leds_10in20.png"/></div></figure>&#13;
&#13;
<p>The lefthand plot shows what we expect—larger houses cost more. We also see that there is roughly a log–log association between these features.</p>&#13;
&#13;
<p>The righthand plot in this figure is interestingly nonlinear. We see that smaller houses cost more per square foot than larger ones, and the price per square foot for larger houses is relatively flat. This feature appears to be quite interesting, so we save the price per square foot transforms into <code>sfh</code>:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<code class="k">def</code> <code class="nf">compute_ppsf</code><code class="p">(</code><code class="n">df</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">df</code><code class="o">.</code><code class="n">assign</code><code class="p">(</code>&#13;
        <code class="n">ppsf</code><code class="o">=</code><code class="n">df</code><code class="p">[</code><code class="s1">'price'</code><code class="p">]</code> <code class="o">/</code> <code class="n">df</code><code class="p">[</code><code class="s1">'bsqft'</code><code class="p">],</code>&#13;
        <code class="n">log_ppsf</code><code class="o">=</code><code class="k">lambda</code> <code class="n">df</code><code class="p">:</code> <code class="n">np</code><code class="o">.</code><code class="n">log10</code><code class="p">(</code><code class="n">df</code><code class="p">[</code><code class="s1">'ppsf'</code><code class="p">]))</code>&#13;
</pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<p>So far we haven’t considered the relationship between prices and location. There are house sales from over 150 different cities in this dataset. Some cities have a handful of sales and others have thousands. We continue our narrowing down of the data and examine relationships for a few cities next.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Fixing Location" data-type="sect2"><div class="sect2" id="fixing-location">&#13;
<h2>Fixing Location</h2>&#13;
&#13;
<p>You may have heard the expression: there are three things that matter in real estate—<em>location, location, location.</em> Comparing prices across cities might bring additional insights to our investigation.</p>&#13;
&#13;
<p>We examine data for some cities in the San Francisco East Bay: Richmond, El Cerrito, Albany, Berkeley, Walnut Creek, Lamorinda (which is a combination of Lafayette, Moraga, and Orinda, three neighboring bedroom communities), and Piedmont.</p>&#13;
&#13;
<p>Let’s begin by comparing the distribution of sale price for these cities:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">cities</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">[</code></span><span><code class="s1">'</code><code class="s1">Richmond</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">El Cerrito</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">Albany</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">Berkeley</code><code class="s1">'</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>          </code><span><code class="s1">'</code><code class="s1">Walnut Creek</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">Lamorinda</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">Piedmont</code><code class="s1">'</code></span><span><code class="p">]</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">box</code></span><span><code class="p">(</code></span><span><code class="n">sfh</code></span><span><code class="o">.</code></span><span><code class="n">query</code></span><span><code class="p">(</code></span><span><code class="s1">'</code><code class="s1">city in @cities</code><code class="s1">'</code></span><span><code class="p">)</code><code class="p">,</code></span><code> </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">city</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>       </code><span><code class="n">log_y</code></span><span><code class="o">=</code></span><span><code class="kc">True</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">450</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">250</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>       </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">city</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><span><code class="s1">'</code><code class="s1">price</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Sale price (USD)</code><code class="s1">'</code></span><span><code class="p">}</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-80"><div class="figure"><img src="assets/leds_10in21.png"/></div></figure>&#13;
&#13;
<p>The box plots show that Lamorinda and Piedmont tend to have more expensive homes and Richmond has the least expensive, but there is overlap in sale price for many cities.</p>&#13;
&#13;
<p>Next, we examine the relationship between price per square foot and house size more closely with faceted scatterplots, one for each of four cities:</p>&#13;
&#13;
<div class="cell docutils container">&#13;
<div class="cell_input docutils container">&#13;
<div class="highlight-ipython3 notranslate">&#13;
<div class="highlight">&#13;
<pre data-code-language="python" data-type="programlisting">&#13;
<span><code class="n">four_cities</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="p">[</code></span><span><code class="s2">"</code><code class="s2">Berkeley</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">Lamorinda</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">Piedmont</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="s2">"</code><code class="s2">Richmond</code><code class="s2">"</code></span><span><code class="p">]</code></span><code>&#13;
</code><span><code class="n">fig</code></span><code> </code><span><code class="o">=</code></span><code> </code><span><code class="n">px</code></span><span><code class="o">.</code></span><span><code class="n">scatter</code></span><span><code class="p">(</code></span><span><code class="n">sfh</code></span><span><code class="o">.</code></span><span><code class="n">query</code></span><span><code class="p">(</code></span><span><code class="s2">"</code><code class="s2">city in @four_cities</code><code class="s2">"</code></span><span><code class="p">)</code><code class="p">,</code></span><code>&#13;
</code><code>    </code><span><code class="n">x</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">bsqft</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">y</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">log_ppsf</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">facet_col</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">city</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">facet_col_wrap</code></span><span><code class="o">=</code></span><span><code class="mi">2</code></span><span><code class="p">,</code></span><code>&#13;
</code><code>    </code><span><code class="n">labels</code></span><span><code class="o">=</code></span><span><code class="p">{</code></span><span><code class="s1">'</code><code class="s1">bsqft</code><code class="s1">'</code></span><span><code class="p">:</code></span><span><code class="s1">'</code><code class="s1">Building size (ft^2)</code><code class="s1">'</code></span><span><code class="p">,</code></span><code> </code><code>&#13;
</code><code>            </code><span><code class="s1">'</code><code class="s1">log_ppsf</code><code class="s1">'</code></span><span><code class="p">:</code></span><code> </code><span><code class="s2">"</code><code class="s2">Price per square foot</code><code class="s2">"</code></span><span><code class="p">}</code><code class="p">,</code></span><code> </code><code>&#13;
</code><code>    </code><span><code class="n">trendline</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">ols</code><code class="s2">"</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">trendline_color_override</code></span><span><code class="o">=</code></span><span><code class="s2">"</code><code class="s2">black</code><code class="s2">"</code></span><span><code class="p">,</code></span><code>&#13;
</code><span><code class="p">)</code></span><code>&#13;
</code><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">update_layout</code></span><span><code class="p">(</code></span><span><code class="n">xaxis_range</code></span><span><code class="o">=</code></span><span><code class="p">[</code></span><span><code class="mi">0</code></span><span><code class="p">,</code></span><code> </code><span><code class="mi">5500</code></span><span><code class="p">]</code><code class="p">,</code></span><code> </code><span><code class="n">yaxis_range</code></span><span><code class="o">=</code></span><span><code class="p">[</code></span><span><code class="mf">1.5</code></span><span><code class="p">,</code></span><code> </code><span><code class="mf">3.5</code></span><span><code class="p">]</code><code class="p">,</code></span><code>&#13;
</code><code>                  </code><span><code class="n">width</code></span><span><code class="o">=</code></span><span><code class="mi">450</code></span><span><code class="p">,</code></span><code> </code><span><code class="n">height</code></span><span><code class="o">=</code></span><span><code class="mi">400</code></span><span><code class="p">)</code></span><code>&#13;
</code><span><code class="n">fig</code></span><span><code class="o">.</code></span><span><code class="n">show</code></span><span><code class="p">(</code><code class="p">)</code></span><code>&#13;
</code></pre>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
</div>&#13;
&#13;
<figure class="informal width-70"><div class="figure"><img src="assets/leds_10in22.png"/></div></figure>&#13;
&#13;
<p>The relationship between price per square foot and building size is roughly log-linear, with a negative association for each of the four locations. While not parallel, it does appear that there is a location boost for houses, regardless of size, where, say, a house in Berkeley costs about $250 more per square foot than a house in Richmond. We also see that Piedmont and Lamorinda are more expensive cities, and in both cities there is not the same reduction in price per square foot for larger houses in comparison to smaller ones. These plots support the “location, location, location” adage.</p>&#13;
&#13;
<p>In EDA, we often revisit earlier plots to check whether new findings add insights to previous visualizations. It is important to continually take stock of our findings and use them to guide us in further explorations. Let’s summarize our findings so far<a contenteditable="false" data-primary="" data-startref="ix_home_price_set2" data-type="indexterm" id="id1298"/><a contenteditable="false" data-primary="" data-startref="ix_vis_var_rel" data-type="indexterm" id="id1299"/><a contenteditable="false" data-primary="" data-startref="ix_eda_var_rel" data-type="indexterm" id="id1300"/><a contenteditable="false" data-primary="" data-startref="ix_var_vis_rel" data-type="indexterm" id="id1301"/><a contenteditable="false" data-primary="" data-startref="ix_vis_home_price" data-type="indexterm" id="id1302"/>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="EDA Discoveries" data-type="sect2"><div class="sect2" id="eda-discoveries">&#13;
<h2>EDA Discoveries</h2>&#13;
&#13;
<p>Our EDA has uncovered several interesting phenomena. Briefly, some of the most notable are:</p>&#13;
&#13;
<ul>&#13;
	<li>&#13;
	<p>Sale price and building size are highly skewed to the right with one mode.</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>Price per square foot decreases nonlinearly with building size, with smaller houses costing more per square foot than larger houses and price per square foot being roughly constant for large houses.</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>More desirable locations add a bump in sale price that is roughly the same amount for houses of different sizes.</p>&#13;
	</li>&#13;
</ul>&#13;
&#13;
<p>There are many additional explorations we can (and should) perform, and there are several checks that we should make. These include investigating the 436 value for lot size and cross-checking unusual houses, like the 30-bedroom house and the $20M house, with online real estate apps.</p>&#13;
&#13;
<p>We narrowed our investigation down to one year and later to a few cities. This narrowing helped us control for features that might interfere with finding simple relationships. For example, since the data were collected over several years, the date of sale may confound the relationship between sale price and number of bedrooms. At other times, we want to consider the effect of time on prices. To examine price changes over time, we often make line plots, and we adjust for inflation. We revisit these data in <a class="reference internal" data-type="xref" href="ch11.html#ch-viz">Chapter 11</a> when we consider data scope and look more closely at trends in time<a contenteditable="false" data-primary="" data-startref="ix_home_price_set" data-type="indexterm" id="id1303"/><a contenteditable="false" data-primary="" data-startref="ix_eda_guide" data-type="indexterm" id="id1304"/>.</p>&#13;
&#13;
<p>Despite being brief, this section conveys the basic approach of EDA in action. For an extended case study on a different dataset, see <a class="reference internal" data-type="xref" href="ch12.html#ch-pa">Chapter 12</a>.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="sec-eda-summary">&#13;
<h1>Summary</h1>&#13;
&#13;
<p>In this chapter, we introduced the nominal, ordinal, and numerical feature types and their importance for data analysis. When presented with a dataset, we demonstrated how to consult the data dictionary and the data itself to determine the feature types for each column. We also explained how the storage type is not to be confused with feature type. Since much of EDA is carried out with statistical graphs, we described how to recognize and interpret the shapes and patterns that emerge and how to connect these to the data being plotted. Finally, we provided guidelines for how you might conduct an EDA, and provided an example.</p>&#13;
&#13;
<p>One approach that you may find helpful in developing your intuition about distributions and relationships of features is to make a guess about what you will see before you make the plot. Try to sketch or describe what you think the shape of distribution will be, and then make the plot. For example, variables that have a natural lower/upper bound on their values tend to have a long tail on the opposite of the bound. The distribution of income (bounded below by 0) tends to have a long right tail, and exam scores (bounded above by 100) tend to have a long left tail. You can make similar guesses for the shape of a relationship. We saw that price and house size had nearly a log–log linear relationship. As you gain intuition about shapes, it becomes easier to carry out an EDA; you can more easily identify when a plot shows a surprising shape<a contenteditable="false" data-primary="" data-startref="ix_explor_data_anal_ch10" data-type="indexterm" id="id1305"/>.</p>&#13;
&#13;
<p>Our focus in this chapter was on “reading” visualizations. In <a class="reference internal" data-type="xref" href="ch11.html#ch-viz">Chapter 11</a>, we provide style guidelines for how to create informative, effective, and beautiful graphs. Many of the ideas in that chapter were followed here, but we have not called attention to them.</p>&#13;
</div></section>&#13;
</div></section></body></html>