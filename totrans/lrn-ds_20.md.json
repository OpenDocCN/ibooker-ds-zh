["```py\n184 rows × 5 columns\n```", "```py\n`px``.``scatter``(``GA``,` `x``=``\"``pm25aqs``\"``,` `y``=``\"``pm25pa``\"``,` `trendline``=``'``ols``'``,`\n           `trendline_color_override``=``\"``darkorange``\"``,`\n           `labels``=``{``'``pm25aqs``'``:``'``AQS PM2.5``'``,` `'``pm25pa``'``:``'``PurpleAir PM2.5``'``}``,`\n           `width``=``350``,` `height``=``250``)`\n\n```", "```py\n`def` `theta_1``(``x``,` `y``)``:`\n    `r` `=` `x``.``corr``(``y``)`\n    `return` `r` `*` `y``.``std``(``)` `/` `x``.``std``(``)`\n\n```", "```py\n`def` `theta_0``(``x``,` `y``)``:`\n    `return` `y``.``mean``(``)` `-` `theta_1``(``x``,` `y``)` `*` `x``.``mean``(``)`\n\n```", "```py\n`t1` `=` `theta_1``(``GA``[``'``pm25aqs``'``]``,` `GA``[``'``pm25pa``'``]``)`\n`t0` `=` `theta_0``(``GA``[``'``pm25aqs``'``]``,` `GA``[``'``pm25pa``'``]``)`\n\n```", "```py\nModel: -3.36 + 2.10AQ\n\n```", "```py\n`prediction` `=` `t0` `+` `t1` `*` `GA``[``\"``pm25aqs``\"``]`\n`error` `=` `GA``[``\"``pm25pa``\"``]` `-` `prediction`\n`fit` `=` `pd``.``DataFrame``(``dict``(``prediction``=``prediction``,` `error``=``error``)``)`\n\n```", "```py\n`fig` `=` `px``.``scatter``(``fit``,` `y``=``'``error``'``,` `x``=``'``prediction``'``,`\n                 `labels``=``{``\"``prediction``\"``:` `\"``Prediction``\"``,`\n                         `\"``error``\"``:` `\"``Error``\"``}``,`\n                 `width``=``350``,` `height``=``250``)`\n\n`fig``.``add_hline``(``0``,` `line_width``=``2``,` `line_dash``=``'``dash``'``,` `opacity``=``1``)`\n`fig``.``update_yaxes``(``range``=``[``-``12``,` `12``]``)`\n\n```", "```py\n`GA``[``[``'``pm25aqs``'``,` `'``pm25pa``'``]``]``.``corr``(``)`\n\n```", "```py\n`error``.``std``(``)`\n\n```", "```py\n2.796095864304746\n\n```", "```py\n`GA``[``'``pm25pa``'``]``.``std``(``)`\n\n```", "```py\n6.947418231019876\n\n```", "```py\n`from` `sklearn``.``linear_model` `import` `LinearRegression` \n\n`y` `=` `GA``[``'``pm25pa``'``]`\n`x` `=` `GA``[``[``'``pm25aqs``'``]``]`\n`reg` `=` `LinearRegression``(``)``.``fit``(``x``,` `y``)`\n\n```", "```py\nModel: PA estimate = -3.36 + 2.10AQS\n\n```", "```py\n`rh_cat` `=` `pd``.``cut``(``GA``[``'``rh``'``]``,` `bins``=``[``43``,``50``,``55``,``60``,``78``]``,` \n                `labels``=``[``'``<50``'``,``'``50-55``'``,``'``55-60``'``,``'``>60``'``]``)`\n\n```", "```py\n`fig` `=` `px``.``scatter``(``GA``,` `x``=``'``pm25aqs``'``,` `y``=``'``pm25pa``'``,` \n                 `facet_col``=``rh_cat``,` `facet_col_wrap``=``2``,`\n                 `facet_row_spacing``=``0.15``,`\n                 `labels``=``{``'``pm25aqs``'``:``'``AQS PM2.5``'``,` `'``pm25pa``'``:``'``PurpleAir PM2.5``'``}``,`\n                 `width``=``550``,` `height``=``350``)`\n\n`fig``.``update_layout``(``margin``=``dict``(``t``=``30``)``)`\n`fig``.``show``(``)`\n\n```", "```py\n`fig` `=` `px``.``scatter_matrix``(`\n    `GA``[``[``'``pm25pa``'``,` `'``pm25aqs``'``,` `'``rh``'``]``]``,`\n    `labels``=``{``'``pm25aqs``'``:``'``AQS``'``,` `'``pm25pa``'``:``'``PurpleAir``'``,` `'``rh``'``:``'``Humidity``'``}``,`\n    `width``=``550``,` `height``=``400``)`\n\n`fig``.``update_traces``(``diagonal_visible``=``False``)`\n\n```", "```py\n`from` `sklearn``.``linear_model` `import` `LinearRegression`\n\n`y` `=` `GA``[``'``pm25pa``'``]`\n`X2` `=` `GA``[``[``'``pm25aqs``'``,` `'``rh``'``]``]`\n\n`model2` `=` `LinearRegression``(``)``.``fit``(``X2``,` `y``)`\n\n```", "```py\nPA estimate = -15.8 ppm + 2.25 ppm/ppm x AQS +  0.21 ppm/percent x RH\n\n```", "```py\n`predicted_2var` `=` `model2``.``predict``(``X2``)`\n`error_2var` `=` `y` `-` `predicted_2var`\n\n```", "```py\n`fig` `=` `px``.``scatter``(``y` `=` `error_2var``,` `x``=``predicted_2var``,`\n                 `labels``=``{``\"``y``\"``:` `\"``Error``\"``,` `\"``x``\"``:` `\"``Predicted PurpleAir measurement``\"``}``,`\n                 `width``=``350``,` `height``=``250``)`\n\n`fig``.``update_yaxes``(``range``=``[``-``12``,` `12``]``)`\n`fig``.``add_hline``(``0``,` `line_width``=``3``,` `line_dash``=``'``dash``'``,` `opacity``=``1``)`\n\n`fig``.``show``(``)`\n\n```", "```py\n`error_2var``.``std``(``)`\n\n```", "```py\n1.8211427707294048\n\n```", "```py\n705 rows × 9 columns\n```", "```py\n`px``.``scatter``(``cz_df``,` `x``=``'``travel_lt15``'``,` `y``=``'``aum``'``,` `width``=``350``,` `height``=``250``,`\n           `labels``=``{``'``travel_lt15``'``:``'``Commute time under 15 min``'``,` \n                   `'``aum``'``:``'``Upward mobility``'``}``)`\n\n```", "```py\n`cz_df``[``[``'``aum``'``,` `'``travel_lt15``'``]``]``.``corr``(``)`\n\n```", "```py\n`from` `sklearn``.``linear_model` `import` `LinearRegression`\n\n`y` `=` `cz_df``[``'``aum``'``]`\n`X` `=` `cz_df``[``[``'``travel_lt15``'``]``]`\n\n`model_ct` `=` `LinearRegression``(``)``.``fit``(``X``,` `y``)`\n\n```", "```py\nIntercept: 31.3\n    Slope: 28.7\n\n```", "```py\n`prediction` `=` `model_ct``.``predict``(``X``)`\n`error` `=` `y` `-` `prediction`\n\n`print``(``f``\"``SD(errors):` `{``np``.``std``(``error``)``:``.2f``}``\"``)`\n`print``(``f``\"` `SD(AUM):` `{``np``.``std``(``cz_df``[``'``aum``'``]``)``:``.2f``}``\"``)`\n\n```", "```py\nSD(errors): 4.14\n   SD(AUM): 5.61\n\n```", "```py\n`fig` `=` `px``.``scatter``(``x``=``prediction``,` `y``=``error``,`\n                 `labels``=``dict``(``x``=``'``Prediction for AUM``'``,` `y``=``'``Error``'``)``,`\n                 `width``=``350``,` `height``=``250``)`\n\n`fig``.``add_hline``(``0``,` `line_width``=``2``,` `line_dash``=``'``dash``'``,` `opacity``=``1``)`\n`fig``.``update_yaxes``(``range``=``[``-``20``,` `15``]``)`\n\n`fig``.``show``(``)`\n\n```", "```py\n`X2` `=` `cz_df``[``[``'``travel_lt15``'``,` `'``single_mom``'``]``]`\n`y` `=` `cz_df``[``'``aum``'``]`\n\n`model_ct_sm` `=` `LinearRegression``(``)``.``fit``(``X2``,` `y``)`\n\n```", "```py\nIntercept: 49.0\nFraction with under 15 minute commute coefficient: 18.10\nFraction of single moms coefficient: 18.10\n\n```", "```py\n`prediction_ct_sm` `=` `model_ct_sm``.``predict``(``X2``)`\n`error_ct_sm` `=` `y` `-` `prediction_ct_sm`\n\n```", "```py\n SD(errors in model 1): 4.14\n SD(errors in model 2): 2.85\n\n```", "```py\n`fig` `=` `px``.``scatter``(``x``=``prediction_ct_sm``,` `y``=``error_ct_sm``,`\n           `labels``=``dict``(``x``=``'``Two-variable prediction for AUM``'``,` `y``=``'``Error``'``)``,`\n           `width``=``350``,` `height``=``250``)`\n\n`fig``.``add_hline``(``0``,` `line_width``=``2``,` `line_dash``=``'``dash``'``,` `opacity``=``1``)`\n`fig``.``update_yaxes``(``range``=``[``-``20``,` `15``]``)`\n\n`fig``.``show``(``)`\n\n```", "```py\n`X7` `=` `cz_df``[``predictors``]`\n`model_7var` `=` `LinearRegression``(``)``.``fit``(``X7``,` `y``)`\n\n`prediction_7var` `=` `model_7var``.``predict``(``X7``)`\n`error_7var` `=` `y` `-` `prediction_7var`\n\n```", "```py\nfig = px.scatter(\n    x=prediction_7var, y=error_7var,\n    labels=dict(x='Seven-variable prediction for AUM', y='Error'),\n    width=350, height=250)\n\n`fig``.``add_hline``(``0``,` `line_width``=``2``,` `line_dash``=``'``dash``'``,` `opacity``=``1``)`\n`fig``.``update_yaxes``(``range``=``[``-``20``,` `15``]``)`\n\n`fig``.``show``(``)`\n\n```", "```py\n`error_7var``.``std``(``)` \n\n```", "```py\n2.588739233574256\n\n```", "```py\nR² for 7-variable model: 0.79\nR² for 2-variable model: 0.74\nR² for 1-variable model: 0.46\n\n```", "```py\n`X1_log` `=` `sfh``[``[``'``log_bsqft``'``]``]`    \n`y_log` `=` `sfh``[``'``log_price``'``]`\n\n`model1_log_log` `=` `LinearRegression``(``)``.``fit``(``X1_log``,` `y_log``)`\n\n```", "```py\n`prediction` `=` `model1_log_log``.``predict``(``X1_log``)`\n`error` `=` `y_log` `-` `prediction` \n\n```", "```py\n`fig` `=` `px``.``scatter``(``x``=``prediction``,` `y``=``error``,`\n                 `labels``=``dict``(``x``=``'``Predicted sale price (log USD)``'``,` `y``=``'``Error``'``)``,`\n                 `width``=``350``,` `height``=``250``)`\n\n`fig``.``add_hline``(``0``,` `line_width``=``2``,` `line_dash``=``'``dash``'``,` `opacity``=``1``)`\n`fig``.``show``(``)`\n\n```", "```py\n`from` `sklearn``.``preprocessing` `import` `OneHotEncoder`\n\n`enc` `=` `OneHotEncoder``(`\n    `# categories argument sets column order`\n    `categories``=``[``[``\"``Berkeley``\"``,` `\"``Lamorinda``\"``,` `\"``Piedmont``\"``,` `\"``Richmond``\"``]``]``,`\n    `sparse``=``False``,`\n`)`\n\n`X_city` `=` `enc``.``fit_transform``(``sfh``[``[``'``city``'``]``]``)`\n\n`categories_city``=``[``\"``Berkeley``\"``,``\"``Lamorinda``\"``,` `\"``Piedmont``\"``,` `\"``Richmond``\"``]`\n`X_city_df` `=` `pd``.``DataFrame``(``X_city``,` `columns``=``categories_city``)`\n\n`X_city_df`\n\n```", "```py\n2667 rows × 4 columns\n```", "```py\n`y_log` `=` `sfh``[``'``log_price``'``]`\n\n`model_city` `=` `LinearRegression``(``fit_intercept``=``False``)``.``fit``(``X_city_df``,` `y_log``)`\n\n```", "```py\nR-square for city model: 0.57\n\n```", "```py\n`model_city``.``coef_`\n\n```", "```py\narray([5.87, 6.03, 6.1 , 5.67])\n\n```", "```py\n`fig` `=` `px``.``scatter``(``sfh``,` `x``=``'``log_bsqft``'``,` `y``=``'``log_price``'``,` \n                 `facet_col``=``'``city``'``,` `facet_col_wrap``=``2``,`\n                 `labels``=``{``'``log_bsqft``'``:``'``Building size (log ft^2)``'``,`\n                         `'``log_price``'``:``'``Sale price (log USD)``'``}``,`\n                 `width``=``500``,` `height``=``400``)`\n\n`fig``.``update_layout``(``margin``=``dict``(``t``=``30``)``)`\n`fig`\n\n```", "```py\n`X_size` `=` `sfh``[``'``log_bsqft``'``]` \n\n`X_city_size` `=` `pd``.``concat``(``[``X_size``.``reset_index``(``drop``=``True``)``,` `X_city_df``]``,` `axis``=``1``)`\n`X_city_size``.``drop``(``0``)`\n\n```", "```py\n2666 rows × 5 columns\n```", "```py\n`model_city_size` `=` `LinearRegression``(``fit_intercept``=``False``)``.``fit``(``X_city_size``,` `y_log``)`\n\n```", "```py\n`model_city_size``.``coef_`\n\n```", "```py\narray([0.62, 3.89, 3.98, 4.03, 3.75])\n\n```", "```py\nR-square for city and log(size):  0.79\n\n```", "```py\n`import` `statsmodels``.``formula``.``api` `as` `smf`\n\n```", "```py\n`model_size_city` `=` `smf``.``ols``(``formula``=``'``log_price ~ log_bsqft + city``'``,`\n                          `data``=``sfh``)``.``fit``(``)`\n\n```", "```py\n`print``(``model_size_city``.``params``)`\n\n```", "```py\nIntercept            3.89\ncity[T.Lamorinda]    0.09\ncity[T.Piedmont]     0.14\ncity[T.Richmond]    -0.15\nlog_bsqft            0.62\ndtype: float64\n\n```", "```py\n`smf``.``ols``(``formula``=``'``log_price ~ log_bsqft + city - 1``'``,` `data``=``sfh``)``.``fit``(``)``.``params`\n\n```", "```py\ncity[Berkeley]     3.89\ncity[Lamorinda]    3.98\ncity[Piedmont]     4.03\ncity[Richmond]     3.75\nlog_bsqft          0.62\ndtype: float64\n\n```", "```py\n`px``.``box``(``sfh``,` `x``=``\"``br``\"``,` `y``=``\"``log_price``\"``,` `width``=``450``,` `height``=``250``,`\n       `labels``=``{``'``br``'``:``'``Number of bedrooms``'``,``'``log_price``'``:``'``Sale price (log USD)``'``}``)`\n\n```", "```py\n`model_size_city_br` `=` `smf``.``ols``(``formula``=``'``log_price ~ log_bsqft + city + C(br)``'``,`\n                             `data``=``sfh``)``.``fit``(``)`\n\n```", "```py\n`model_size_city_br``.``rsquared``.``round``(``2``)`\n\n```", "```py\n0.79\n\n```"]