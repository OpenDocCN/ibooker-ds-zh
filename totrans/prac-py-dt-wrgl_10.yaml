- en: Chapter 10\. Presenting Your Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 10 章\. 展示您的数据
- en: After all the effort we’ve put into accessing, assessing, cleaning, transforming,
    augmenting, and analyzing our data, we’ve finally reached the point where we’re
    ready to start thinking about communicating what we’ve learned to others. Whether
    it’s for a formal presentation to colleagues or a social media post for friends
    and followers, sharing the insights we’ve generated through our data wrangling
    work is an opportunity for our work to have impact beyond ourselves.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们已经投入访问、评估、清理、转换、增强和分析数据的所有努力之后，我们终于到达了一个阶段，即准备开始考虑向他人传达我们所学到的东西。无论是为了向同事进行正式演示，还是为了向朋友和追随者发布社交媒体帖子，通过我们的数据整理工作生成的见解分享是一个机会，使我们的工作能够超越个人产生影响。
- en: 'Like every other part of our data wrangling process, effectively and accurately
    conveying our insights involves applying only a few hard-and-fast rules but a
    whole lot of judgment. This is certainly true of written communications, but perhaps
    even more so when it comes to the aspect of data communication that often gets
    the most attention: *visualization*.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 就像我们数据整理过程的每个部分一样，有效和准确地传达我们的见解涉及应用少数一成不变的规则，但更多的是判断力。这当然适用于书面沟通，但当涉及到数据沟通的方面时，可能更是如此，因为这部分通常引起最多关注：*可视化*。
- en: As we touched on in [“Visualization for Data Analysis”](ch09.html#vizforanalysis),
    creating visualizations to effectively share our data insights with others requires
    a different focus and approach than we had when building the visualizations for
    generating those insights in the first place. For example, unless you’re trying
    to reach a *pretty* specialized audience (say, through an academic publication),
    it’s deeply unlikely that a histogram will find its way into your visualization
    vocabulary when it’s time to share your findings with the world. At the same time,
    it is *extremely* likely that you will end up using some form of bar or column
    chart^([1](ch10.html#idm45143395782464)) to share your insights with a nonspecialist
    audience, since these widely used and highly legible graphic forms are relatively
    easy for most audiences to interpret accurately.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[“数据分析可视化”](ch09.html#vizforanalysis)中提到的，为了有效地与他人分享我们的数据见解，创建可视化图表需要与生成这些见解时的焦点和方法不同的关注点。例如，除非您试图接触*非常*专业的受众（比如通过学术出版物），否则直方图在您分享研究发现时不太可能进入您的可视化词汇表中。同时，*极有可能*您会使用柱状图或柱形图的某种形式^([1](ch10.html#idm45143395782464))来与非专业人士分享您的见解，因为这些广泛使用且高度易读的图形形式对大多数观众来说相对容易准确解释。
- en: In other words, the way we choose to visually represent our data findings should
    be informed by not just the *data* we have (or used to reach our conclusions)
    but also the *audience* we are trying to reach. Many software packages (including
    some of the ones we have already used) will happily generate charts and graphs
    if you simply point them to a structured dataset and pass in a few optional parameters.
    While this will work in the bare-minimum sense of producing a visualization, the
    output will be much more like a machine translation than a poem. Yes, at a high
    level it may conform to the “rules” of the language, but the clarity of its meaning
    (to say nothing of its effectiveness or *eloquence*) is questionable. As such,
    using visualization to make our data insights truly accessible to others requires
    thinking carefully about *what* you want to convey, *which* visual form suits
    it best, and *how* you can tailor it to your specific needs.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，我们选择用来视觉呈现我们数据发现的方式，不仅应受我们拥有的（或用来得出结论的）*数据*的启发，还应受我们试图接触的*受众*的影响。许多软件包（包括我们已经使用过的一些软件包）如果您只需指向一个结构化数据集并传入几个可选参数，它们将乐意生成图表和图形。虽然这在最低限度上可以产生可视化效果，但其输出更像是机器翻译而不是诗歌。是的，在高层次上它可能符合语言的“规则”，但其意义的清晰度（更不用说其有效性或*雄辩性*）是值得怀疑的。因此，利用可视化使我们的数据见解真正可访问他人，需要仔细考虑*您想要传达的内容*，*哪种视觉形式最适合*以及*如何*能够根据您的特定需求进行定制。
- en: Over the course of this chapter, we’ll cover each of these tasks in turn, starting
    with some strategies designed to help you identify the key points in your data
    findings. After that, we’ll do a review of the most common (and useful!) visual
    forms for data. In each instance, we’ll cover the rules and best practices for
    using each of them, in addition to presenting some basic code for rendering them
    in Python using a combination of the *seaborn* and *matplotlib* libraries. Finally,
    we’ll take a basic visualization of real-world data and work through how to customize
    and refine its various elements in order to turn the (usually) serviceable default
    presentation into something that is both accurate *and* appealing. Along the way,
    I hope you’ll encounter at least a few new tools and approaches that will help
    you think more critically about data visualization in general—whether it’s the
    result of your own data wrangling efforts or not.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的过程中，我们将依次涵盖每一个任务，从一些旨在帮助您识别数据发现中关键点的策略开始。之后，我们将回顾数据最常见（并且最有用！）的可视形式。在每种情况下，我们将讨论使用它们的规则和最佳实践，以及使用*seaborn*和*matplotlib*库在Python中渲染它们的基本代码。最后，我们将以真实数据的基本可视化为例，逐步介绍如何定制和完善其各个元素，以将（通常）可用的默认呈现转变为准确*且*吸引人的东西。在此过程中，我希望您能接触到至少几种新工具和方法，这些工具和方法将帮助您更加批判性地思考数据可视化——无论它是您自己数据处理努力的结果与否。
- en: Foundations for Visual Eloquence
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 视觉修辞的基础
- en: 'As I’ve mentioned a few times, the process of writing good code mirrors that
    of writing well in most other circumstances. For example, in [Chapter 8](ch08.html#chapter8)
    we spent time revising and restructuring code that—while it already *worked*—evolved
    into scripts and functions that were ultimately clearer, cleaner, and more reusable.
    At a high level, this process was not dissimilar to how you might revise an essay
    or an article: once you have all your key ideas collected in one place, you can
    come back to the piece later and see how it might be reworded and reorganized
    so that the writing is more concise and the concepts flow more logically.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我已经多次提到的，编写优秀代码的过程在大多数其他情况下与写作一样。例如，在[第8章](ch08.html#chapter8)中，我们花了时间修订和重组代码，虽然它已经*运行*，但最终演变成了更清晰、更干净和更可重复使用的脚本和函数。从高层次来看，这个过程与您修改文章或论文的方式并没有太大不同：一旦您把所有关键想法收集到一起，稍后可以回到这篇文章，看看如何重新措辞和重新组织，使文章更为简洁，概念更为逻辑。
- en: Though this same write-edit-polish cycle applies to data visualizations, however,
    the unit we are working with is much less like an essay and much more like a single
    *paragraph*—because in general, a single visualization should be used to convey
    just *one single* idea. This is true whether your visualization is printed or
    digital, static or interactive, whether it is part of a longer talk or will be
    a standalone social media post. One visualization = one key idea.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管相同的写-编辑-润色循环适用于数据可视化，但我们正在处理的单元与文章非常不同，更像一个*段落*——因为一般来说，一个可视化应该用来传达一个*单一的*思想。无论您的可视化是印刷版还是数字版，静态还是交互式，无论它是长篇演讲的一部分还是将成为独立的社交媒体帖子。一个可视化
    = 一个关键思想。
- en: 'I’m emphasizing this now because if you came to this chapter hoping for examples
    of how to build [Gapminder-style](https://www.google.com/publicdata/directory)
    interactives or elaborate [stream graphs](https://flowingdata.com/2008/02/25/ebb-and-flow-of-box-office-receipts-over-past-20-years),
    I want to disappoint you promptly: in this chapter, my focus will be on the most
    commonly used visualization types, such as bar, column, and line charts. The reason
    is partly because they remain the simplest and most interpretable way to represent
    data that has only one independent variable—and that’s all you should be trying
    to present most of the time, anyway. Yes, more complex visualizations *can* be
    used to plot multiple independent variables—the original Gapminder visualization
    is a rare good example of this—but without [an endearing Swedish man to guide
    viewers through them in real time](https://youtube.com/watch?v=jbkSRLYSojo), they
    are more like pretty toys than informative tools. That’s why our focus here will
    be on refining accessible visual forms into what I like to call *eloquent* graphics—visualizations
    that, like the best text, convey information clearly, simply, and accessibly.
    While making eloquent graphics doesn’t preclude visual complexity or even interactivity,
    it *does* require that every aspect of the visualization contributes to the clarity
    and meaning of the graphic.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 我现在强调这一点，因为如果你来到这一章希望看到如何构建[Gapminder风格](https://www.google.com/publicdata/directory)的互动图表或详细的[流图](https://flowingdata.com/2008/02/25/ebb-and-flow-of-box-office-receipts-over-past-20-years)，我想要立即让你失望：在这一章中，我的重点将放在最常用的可视化类型上，如柱状图、折线图和条形图。部分原因是因为它们仍然是表示只有一个自变量的数据最简单和最可解释的方式，而这正是你大多数时候应该尝试呈现的。是的，更复杂的可视化*可以*用于绘制多个自变量——最初的Gapminder可视化是一个很好的例子——但没有[一位可爱的瑞典男子实时指导观众](https://youtube.com/watch?v=jbkSRLYSojo)，它们更像是漂亮的玩具而不是信息工具。这就是为什么我们这里的重点将放在将可访问的视觉形式精炼为我喜欢称之为*流畅*图形的东西上——像最好的文本一样，清晰、简单和易于访问地传达信息。虽然制作流畅的图形并不排除视觉复杂性甚至交互性，但它*确实*要求视觉的每个方面都有助于图形的清晰度和意义。
- en: 'Achieving this kind of visual eloquence means thinking about data visualization
    in three main phases:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 实现这种视觉流畅性意味着在三个主要阶段考虑数据可视化：
- en: 1\. Refining your focus
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 1\. 优化你的关注点
- en: 'What *precisely* are you trying to communicate? In some ways, this parallels
    the process of choosing your original data wrangling question: no matter what
    your wrangling and analysis have revealed, you need to communicate *one* idea
    per visualization. How do you know if you’ve done this effectively? Most of the
    time, this means you will able to express it *in a single sentence*. As with your
    earlier data wrangling question, the data statement you craft will act as a kind
    of “ground truth” for making choices about your visualization. Anything that helps
    you convey your idea more clearly gets kept; *everything else* gets cut.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你究竟想传达什么？在某些方面，这类似于选择你的原始数据处理问题的过程：无论你的处理和分析揭示了什么，你都需要在每个可视化中传达*一个*想法。你如何知道自己是否有效地完成了这个任务？大多数情况下，这意味着你能够用*一个句子*表达它。与你早期的数据处理问题一样，你制定的数据陈述将作为制定可视化选择的“基本事实”。任何有助于你更清晰地传达你的想法的东西都会被保留；*其他所有东西*都会被删除。
- en: 2\. Finding your visual form
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 2\. 寻找适合的视觉形式
- en: Is your data best displayed as a column or line chart? Is it a map? A pie chart?
    A scatter plot or bubble chart? Identifying the best visual form for your data
    will always involve some experimentation. At the same time, choosing a visual
    form to express your data statement is not solely a matter of preference, or taste;
    there are a handful of incontrovertible rules about how certain types of data
    and data relationships must be visually encoded. Yes, aesthetics *do* play a role
    in the effectiveness of a visualization—but they cannot override the need for
    accuracy.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 你的数据最适合以柱状图还是折线图显示？是地图吗？饼状图？散点图或气泡图？确定数据的最佳视觉形式总是需要一些试验。与此同时，选择一种视觉形式来表达你的数据陈述不仅仅是偏好或口味的问题；关于某些类型的数据和数据关系如何视觉编码有一些不容置疑的规则。是的，美学确实在可视化的效果中起着作用，但它们不能取代准确性的需要。
- en: 3\. Enhancing clarity and meaning
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 3\. 提升清晰度和意义
- en: Even with the major visual form identified, there are a plethora of ways in
    which the details of your visualization can improve or degrade its clarity, accessibility,
    visual appeal, and eloquence. At minimum, you will need to make decisions about
    color, pattern, scales, and legends, as well as labels, titles, and annotations.
    If your data statement is especially complex, you will need to carefully layer
    on even more visual structure to capture these nuances, such as error bars or
    uncertainty ranges, or perhaps projected and/or missing data.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 即使确定了主要的视觉形式，还有许多方法可以改善或降低您的可视化的清晰度、可访问性、视觉吸引力和雄辩性。至少，您需要在颜色、图案、比例尺和图例以及标签、标题和注释之间做出决策。如果您的数据陈述特别复杂，您需要仔细地增加更多的视觉结构来捕捉这些细微差别，例如误差条或不确定性范围，或者可能是预测和/或缺失的数据。
- en: In the following sections, we’ll not only discuss each of these phases conceptually,
    but we’ll use real-world data to see how they are applied in practice using Python.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的几节中，我们不仅会概念性地讨论每个阶段，还会利用实际数据来看看它们在实践中如何使用Python。
- en: Making Your Data Statement
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 作出你的数据陈述
- en: 'Many years ago, I was fortunate to have *The New York Times*’ [Amanda Cox](https://en.wikipedia.org/wiki/Amanda_Cox)
    as a guest speaker in one of my data visualization courses, where she shared an
    excellent tip for assessing whether a given data statement was truly appropriate
    for visualization: “If you don’t have a verb in your headline, you have a problem.”'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 许多年前，我有幸邀请到《纽约时报》的[Amanda Cox](https://en.wikipedia.org/wiki/Amanda_Cox)作为我的数据可视化课程的特邀讲师，她分享了一个评估特定数据陈述是否适合可视化的绝佳提示：“如果你的标题中没有动词，那就有问题。”
- en: 'Treated superficially, of course, this requirement is easy to meet.^([2](ch10.html#idm45143395497264))
    The spirit of her statement, however, implies something much more rigorous: that
    your graphic’s headline should clearly articulate some significant relationship
    or claim, and the supporting evidence should be visible in the graphic itself.
    Why is this so important? For one thing, putting your claims right in the headline
    will encourage readers to actually *look* at your graphic in the first place;
    naming them clearly helps ensure that viewers will—quite literally—know *where*
    to look for supporting evidence for those claims. Of course, it’s our job as information
    designers to make sure that all of our graphic’s visual cues do this too, but
    often [it’s the headline that draws people in](https://psychologicalscience.org/news/how-headlines-change-the-way-we-think.html).'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 浅尝辄止的话，当然，这个要求很容易满足。^([2](ch10.html#idm45143395497264)) 然而，她的陈述精神暗示了一种更为严格的要求：你的图形标题应清晰地表达某种重要的关系或主张，并且支持证据应该在图形本身可见。为什么这么重要？首先，将你的主张直接放在标题中会鼓励读者首先*看*你的图形；清晰地命名帮助确保观众确实会——字面上——知道*在哪里*寻找这些主张的支持证据。当然，作为信息设计师，我们的工作是确保我们所有图形的视觉线索也这样做，但往往[正是标题吸引了人们的注意](https://psychologicalscience.org/news/how-headlines-change-the-way-we-think.html)。
- en: If you simply can’t manage to get an action verb in your graphic’s headline,
    it’s a clue that a visualization is probably *not* the best way to convey your
    insights. True, in the right circumstances humans [can process visualizations
    incredibly quickly](https://news.mit.edu/2014/in-the-blink-of-an-eye-0116), but
    that advantage is only realized if the visualization has something to “say.” In
    other words, while you may be able to generate a visually accurate chart titled
    “One Year of Daily Treasury Long-Term Rates,” the reality is that even the biggest
    policy wonk will wonder why they should bother looking at it. Don’t insist on
    visualization if it’s not the right tool! Remember that our goal is to convey
    our data wrangling insights as effectively as possible—not to express them visually
    at all costs. By focusing first on refining your data statement—and confirming
    it has the power you need—you will avoid spending lots of time designing and building
    a visualization that doesn’t really do what you want or what your audience needs.
    Sure, basic data visualizations can be quickly generated with a dataset and a
    solid visualization library (like *seaborn*). But making really *eloquent* visualizations
    requires careful thought as well as detailed customization of even the best library’s
    default charts. Before you commit all that time and energy, then, it’s worth making
    sure that your complex visualization wouldn’t have been better off as a single,
    highlighted statistic from your analysis.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你简单地不能在你的图形标题中找到一个动作动词，这是一个提示，即可视化可能*不*是传达你的见解的最佳方式。诚然，在适当的情况下，人类可以非常迅速地处理可视化，但只有当可视化有所“表达”时才能实现这种优势。换句话说，虽然你可能能够生成一个标题为“一年的每日国库长期利率”的视觉上准确的图表，但现实是，即使是最大的政策狂热者也会想知道他们为什么要费心去看它。如果不是正确的工具，不要坚持可视化！记住，我们的目标是尽可能有效地传达我们的数据整理见解，而不是不惜一切代价地以视觉方式表达它们。通过首先专注于完善你的数据陈述，并确认它具有你需要的力量，你将避免花费大量时间设计和构建一个实际上并不做你想要的事情或你的观众需要的可视化。当然，基本的数据可视化可以使用数据集和一个强大的可视化库（如*seaborn*）快速生成。但是，制作真正*雄辩的*可视化需要仔细考虑以及对甚至最好的库的默认图表进行详细定制。因此，在你投入所有的时间和精力之前，确保你的复杂可视化不是从你的分析中提取的一个突出的统计数字会更好。
- en: Once you’ve got a powerful data statement “headline” in place, however, it’s
    time to identify the graphic form that will help you most effectively present
    the data evidence for your claim.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你在那里确立了一个强有力的数据陈述“标题”，那么，现在是时候确定哪种图形形式将帮助你最有效地呈现数据证据来支持你的主张了。
- en: 'Charts, Graphs, and Maps: Oh My!'
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 图表、图形和地图：哦，我的天！
- en: Even if we limit ourselves to the more straightforward graphic forms, there
    are still enough options to make the process of finding the best one for our data
    a little bit overwhelming. Should you choose a line chart or a bar graph? If a
    bar graph is best, should it be horizontal or vertical? Are pie charts *ever*
    OK? Unfortunately, this is one situation where our Python libraries largely *cannot*
    help us, since in general they will just valiantly attempt to produce whatever
    type of chart you ask for with the data you give them. We need a better way.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 即使我们限制在更为直接的图形形式上，仍然有足够的选项可以使我们在找到最适合我们数据的最佳图形的过程中感到有点不知所措。你应该选择折线图还是条形图？如果条形图是最佳选择，它应该是水平的还是垂直的？饼图*有时*可以吗？不幸的是，这是一个情况，我们的
    Python 库在这方面基本上是*无法*帮助我们的，因为通常它们只会英勇地尝试根据您提供的数据生成您要求的任何类型的图表。我们需要一个更好的方法。
- en: This is where having a well-focused data statement comes in. Does your statement
    reference *absolute* values—like the `CurrentApprovalAmount` in our PPP loan data—or
    does it focus on the *relationship* between values, as in [“The pandemic cut annual
    FDI flows by one-third”](https://economist.com/graphic-detail/2021/06/21/the-pandemic-cut-annual-fdi-flows-by-one-third)?
    While claims about *absolute* values are often best expressed through bar charts,
    data statements about relationships can be well supported through a wider range
    of visual forms. If your data statement includes a claim about change over time,
    for example, a line graph or scatter plot is a good place to start. Meanwhile
    some visual forms, like pie charts and maps, are difficult to adapt to anything
    except data from a single point in time.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是一个有着明确的数据陈述的重要性。您的陈述是否涉及*绝对*值，比如我们PPP贷款数据中的`CurrentApprovalAmount`，还是是否侧重于值之间的*关系*，就像[“大流行使年度外国直接投资流量减少了三分之一”](https://economist.com/graphic-detail/2021/06/21/the-pandemic-cut-annual-fdi-flows-by-one-third)一样？虽然关于*绝对*值的声明通常最好通过条形图来表达，但关于关系的数据陈述可以通过更广泛的视觉形式来很好地支持。例如，如果您的数据陈述涉及随时间变化，那么折线图或散点图就是一个很好的开始。同时，一些视觉形式，如饼图和地图，很难适应除了单个时间点的数据之外的任何东西。
- en: In truth, there are few hard-and-fast rules for visualizing data,^([3](ch10.html#idm45143395160848))
    but I have outlined those that exist in the sections that follow—along with some
    general tips for designing your graphics. While these guidelines will help you
    choose a form for your visualization that doesn’t work *against* your data, that’s
    only the next step. The choices that can really elevate your graphics are the
    ones that we’ll cover in [“Elements of Eloquent Visuals”](#elementsofeloquentvisuals).
    That section is where we’ll move beyond the (still quite excellent) defaults of
    *seaborn* and begin digging more into *matplotlib* in order to control things
    like the labels, colors, and annotations that can really set your visualization
    apart.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，对于数据可视化，几乎没有硬性规则[^3]，但我已经在接下来的部分中概述了存在的规则——以及一些关于设计图形的一般提示。虽然这些准则将帮助您选择一种不会逆向您的数据的可视化形式，但这只是下一步。真正提升您的图形的选择是我们将在[“优美视觉元素”](#elementsofeloquentvisuals)中讨论的选择。在那一部分中，我们将超越（仍然非常出色的）*seaborn*的默认设置，开始更深入地研究*matplotlib*，以控制标签、颜色和注释等可以真正使您的可视化脱颖而出的内容。
- en: Pie Charts
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 饼图
- en: Pie charts are a surprisingly polarizing topic in visualization. Though pie
    charts are helpful for [teaching children about fractions](https://pbs.org/parents/recipes/pegs-pizza-fractions),
    there are plenty of folks who feel they have [little to no place in an effective
    visualization lexicon](https://storytellingwithdata.com/blog/2011/07/death-to-pie-charts).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 饼图在可视化中是一个令人意外的极具争议性的话题。尽管饼图对[教授儿童关于分数的知识](https://pbs.org/parents/recipes/pegs-pizza-fractions)很有帮助，但有很多人认为它们在有效的可视化词汇中几乎没有[任何位置](https://storytellingwithdata.com/blog/2011/07/death-to-pie-charts)。
- en: Personally, I think there are specific—if limited—situations in which a pie
    chart is the best visualization for supporting your data statement. For example,
    if you are trying to make a point about what *proportion* or *share* of your data
    has a particular value and the remaining values can be sensibly grouped into four
    or fewer categories, then a pie chart may well be what you want. This is especially
    true if the resulting chart highlights values that correspond to some [“recognizable”](https://store.moma.org/for-the-home/kitchen-dining/cookware-kitchen-tools/visual-measuring-cups/8711-802262.html)
    fraction of the whole (e.g., 1/4, 1/3, 1/2, 2/3, or 3/4), since the human eye
    is able to detect such differences in line orientation [without much effort](https://csc2.ncsu.edu/faculty/healey/PP).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我个人认为，有特定的情况——虽然有限——在这些情况下，饼图是支持您的数据陈述的最佳可视化方式。例如，如果您试图阐明您的数据中有多少*比例*或*份额*具有特定值，并且其余值可以明智地分为四个或更少的类别，那么饼图可能是您想要的。特别是如果生成的图表突出显示与整体的一些[“可识别”](https://store.moma.org/for-the-home/kitchen-dining/cookware-kitchen-tools/visual-measuring-cups/8711-802262.html)部分对应的值（例如
    1/4、1/3、1/2、2/3 或 3/4），由于人眼能够在[不费力](https://csc2.ncsu.edu/faculty/healey/PP)的情况下检测到这些差异，因此这一点尤为真实。
- en: For example, looking at the [results of the New York City Democratic primary
    for mayor in June 2021](https://washingtonpost.com/elections/election-results/new-york/nyc-primary),
    we can imagine writing a data statement along the lines of “Despite Wide Field,
    Top 3 Candidates Capture Nearly 3/4 of First-Choice Votes.” Because only four
    candidates received more than 10% of the first-choice votes, it is also reasonable
    to lump all the remaining candidates into a single “Other” category. In this instance,
    then, a pie chart is a perfectly reasonable way to both accurately present the
    results and support our claim—in part because it makes it easy to see how significantly
    the front-runners outpaced the other candidates.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，查看 [2021 年 6 月纽约市民主党市长初选的结果](https://washingtonpost.com/elections/election-results/new-york/nyc-primary)，我们可以想象编写一个数据声明，如“尽管候选人众多，前三名候选人几乎占据了四分之三的第一选择票。”由于只有四名候选人获得了超过10%的第一选择票，因此将所有其余候选人归为单一的“其他”类别也是合理的。在这种情况下，饼图是准确呈现结果并支持我们主张的完全合理的方式之一，部分原因是因为它使得我们可以轻松地看到领先者显著超越其他候选人。
- en: Given the contentious nature of pie charts, it’s not totally surprising that
    there is no pie chart option provided in the generally quite versatile *seaborn*
    library. We can, however, use *matplotlib* directly to get a very serviceable
    pie chart.^([4](ch10.html#idm45143395804112)) Still, there are a few idiosyncrasies
    in the *matplotlib* pie charting function that we have to overcome. For example,
    best practice dictates that pie charts are laid out with the largest section starting
    at “12 o’clock,” with the rest added in descending size order clockwise from there.
    In *matplotlib*, however, the first section starts at “3 o’clock,” and additional
    sections are added *counter*clockwise from there. As a result, we need to specify
    `startangle=90` and reverse the largest-to-smallest order of our segments.^([5](ch10.html#idm45143395798752))
    Likewise, *matplotlib* also assigns each “slice” of the pie a different color
    hue (e.g., purple, red, green, orange, and blue) by default, in a particular range
    of colors that may be inaccessible to folks with certain kinds of colorblindness.
    Since our data statement is conceptually grouping the top three candidates, I’ve
    made all of these the same shade of green; and since *all* the candidates are
    from the same political party, I’ve kept all the slices in the green family. To
    see how this type of chart is coded (including these small customizations), take
    a look at [Example 10-1](#a_humble_pie) and the resulting visualization in [Figure 10-1](#nyc_primary_pie).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于饼图的争议性质，一般而言相当灵活的*seaborn*库中并没有提供饼图选项并不完全令人意外。然而，我们可以直接使用*matplotlib*来获得一个非常实用的饼图。^([4](ch10.html#idm45143395804112))
    不过，在*matplotlib*的饼图功能中还存在一些特殊之处需要克服。例如，最佳实践要求饼图从最大部分开始，即“12点钟”位置，其余部分按顺时针方向以降序添加。然而，在*matplotlib*中，第一部分从“3点钟”位置开始，并以逆时针方向添加其他部分。因此，我们需要指定
    `startangle=90` 并反转片段的从大到小的顺序。^([5](ch10.html#idm45143395798752)) 同样，在*matplotlib*中，默认情况下，饼图的每个“片段”被分配了不同的颜色色调（例如紫色、红色、绿色、橙色和蓝色），这在某些类型的色盲人士中可能无法访问。由于我们的数据声明在概念上将前三名候选人分组，因此我将它们都设置为相同的绿色阴影；并且由于*所有*的候选人都来自同一政党，我将所有的片段保持在绿色系列中。要查看如何编码这种类型的图表（包括这些小的自定义），请参阅[例子
    10-1](#a_humble_pie) 和在[图 10-1](#nyc_primary_pie) 中的结果可视化。
- en: Example 10-1\. a_humble_pie.py
  id: totrans-32
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 例子 10-1\. a_humble_pie.py
- en: '[PRE0]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[![1](assets/1.png)](#co_presenting_your_data_CO1-1)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_presenting_your_data_CO1-1)'
- en: The argument that we pass to `autopct` should be a “formatted string literal,”
    also known as an [*f-string*](https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals).
    This example specifies that the fraction be expressed as a *floating point* (decimal)
    number to one-point of precision. The double percent sign (`%%`) is used here
    to print a single one in the output (by escaping the reserved percent sign symbol
    with another one).
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们传递给`autopct`的参数应该是“格式化字符串字面量”，也称为[*f-string*](https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals)。这个例子指定将分数表达为*浮点数*（小数点）到一位精度。双百分号符(`%%`)在这里用于打印输出中的一个单个百分号符号（通过用另一个百分号符号转义保留的百分号符号）。
- en: '![New York City Primary Pie Chart.](assets/ppdw_1001.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![纽约市初选饼图。](assets/ppdw_1001.png)'
- en: Figure 10-1\. New York City primary pie chart
  id: totrans-37
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-1\. 纽约市初选饼图
- en: 'To recap, if you’re considering a pie chart:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，如果您考虑使用饼图：
- en: Rule
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 规则
- en: Your data categories must conceptually (and literally) sum to a single “whole.”
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 你的数据类别在概念上（字面上也是）必须总结为一个“整体”。
- en: Guideline
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: The number of categories should be condensed to five or fewer.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 类别数量应压缩到五个或更少。
- en: Guideline
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: The proportion of data you want to highlight should be 1/4, 1/3, 1/2, 2/3, or
    3/4 of the total.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 想要突出显示的数据比例应为总数的1/4、1/3、1/2、2/3或3/4。
- en: If your data doesn’t fit one or more of those requirements, however, a bar chart
    may be the next graphic form to explore.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你的数据不符合其中一个或多个要求，条形图可能是探索的下一个图形形式。
- en: Bar and Column Charts
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 条形图和柱状图
- en: Bar charts are often the most effective way to highlight the relationships (including
    differences) among discrete, nominal (as opposed to proportional) data values.
    Unlike pie charts, bar charts can accurately represent datasets where the values
    do not sum to a single “whole.” They can also effectively represent both positive
    and negative values (simultaneously, if needed) and can display both point-in-time
    comparisons of different categories of data and data values over time. The bars
    can also be oriented vertically (sometimes these graphics are described as *column*
    charts) or horizontally to make labels and data relationships more legible.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图通常是突出显示离散、名义（与比例相对的）数据值之间关系的最有效方式。与饼状图不同，条形图可以准确表示数据值不总结为单一“整体”的数据集。它们还可以有效地表示正负值（如果需要同时表示），并且可以显示不同类别数据和数据值随时间的变化。这些条可以垂直（有时这些图形被描述为*柱状*图）或水平排列，以使标签和数据关系更加清晰可读。
- en: 'In other words, bar charts are *incredibly* flexible and offer many options
    for presenting the evidence for data claims effectively. There is, however, *one
    hard-and-fast rule* for working with bar charts: *data values MUST start at zero*!
    There are really no exceptions to this rule, though that [doesn’t stop some people
    from trying](https://datajournalism.com/read/longreads/the-unspoken-rules-of-visualisation).
    Why is this rule so important? Because starting bars of a chart at a number *other*
    than zero means that their visual difference in length will no longer be proportional
    to their *actual* difference in value.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，条形图*极其*灵活，提供了多种选项来有效展示数据声明的证据。然而，在使用条形图时有*一个切实可行的规则*：*数据值必须从零开始*！尽管有些人试图这样做，但实际上并没有例外情况，详细规定见[这里](https://datajournalism.com/read/longreads/the-unspoken-rules-of-visualisation)。为什么这条规则如此重要？因为将图表的条形起点设置为一个*非零*数字意味着它们的长度视觉上的差异将不再与它们*实际*数值上的差异成比例。
- en: For example, imagine you were arguing for a raise at work, where you currently
    earn the US federal minimum wage of $7.25 per hour. You ask your boss to raise
    your hourly rate [to $9.19 per hour](https://data.bls.gov/cgi-bin/cpicalc.pl?cost1=7.25&year1=200907&year2=202107),
    to account for the effect of inflation since the minimum wage was last raised
    in 2009.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设你在工作中为加薪辩护，目前的时薪为美国联邦最低工资标准每小时$7.25。你请求老板将你的小时工资提高到[$9.19](https://data.bls.gov/cgi-bin/cpicalc.pl?cost1=7.25&year1=200907&year2=202107)，以反映自2009年以来通货膨胀对最低工资的影响。
- en: “Well,” says your boss, “let’s see what that kind of raise would look like,”
    and then shows you a chart like the one shown in [Figure 10-2](#inaccurate_comparison).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: “好吧”，你的老板说，“让我们看看加薪会是什么样子”，然后向你展示了类似于[图 10-2](#inaccurate_comparison)所示的图表。
- en: '![An Inaccurate Wage Comparison](assets/ppdw_1002.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![一张不准确的工资比较图](assets/ppdw_1002.png)'
- en: Figure 10-2\. An inaccurate wage comparison
  id: totrans-52
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-2\. 一张不准确的工资比较图
- en: See the problem? By starting the bars at 5 rather than zero, the chart in [Figure 10-2](#inaccurate_comparison)
    makes it *look* like $9.19 per hour would be almost *double* your current wage.
    But of course some simple math (9.19 – 7.25 / 7.25 = ~.27) illustrates that it’s
    just over 25% more than you’re currently making. As you can see, starting bar
    charts at zero isn’t a matter of taste, aesthetics or semantics—it’s [a visual
    lie](https://flowingdata.com/2017/02/09/how-to-spot-visualization-lies).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 看出问题了吗？通过将条形图的起点设置在5而不是零，[图 10-2](#inaccurate_comparison)使得看起来$9.19每小时几乎*翻倍*了你当前的工资。但是简单的数学计算（9.19
    - 7.25 / 7.25 = ~.27）表明，它只比你目前的收入多出25%多一点。正如你所见，将条形图的起点设置为零不是品味、美学或语义问题——这是[一种视觉谎言](https://flowingdata.com/2017/02/09/how-to-spot-visualization-lies)。
- en: Still, even professional graphics teams sometimes get this wrong. Take this
    example, highlighted on Kaiser Fung’s excellent blog, *Junk Charts*, titled [“Working
    Culture”](https://junkcharts.typepad.com/junk_charts/2005/11/finally_a_tange.html)
    and reproduced in [Figure 10-3](#inaccurate_retirement).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 即使是专业的图形团队有时也会出错。来看看凯撒·丰格在他的博客《*垃圾图表*》中突出显示的这个例子，《“工作文化”》并在[图 10-3](#inaccurate_retirement)中复制。
- en: '![An Inaccurate Retirement Age Comparison](assets/ppdw_1003.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![一个不准确的退休年龄比较](assets/ppdw_1003.png)'
- en: Figure 10-3\. An inaccurate retirement age comparison
  id: totrans-56
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-3\. 一个不准确的退休年龄比较
- en: 'In [Figure 10-3](#inaccurate_retirement), a “broken” bar chart claims to display
    when men in different countries stop working, as compared to the official retirement
    age. As in [Figure 10-2](#inaccurate_comparison), failing to start the bars at
    zero grossly misrepresents their real value difference: according to the data
    labels, men in France retired roughly 10 years before men in Japan—a 15% difference
    in working years. But the actual bar for Japan is *more than twice as long* as
    the one for France. Of course, if the bars all started at zero, the difference
    in their values would not seem so dramatic.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图 10-3](#inaccurate_retirement)中，一个“破碎”的条形图声称显示了不同国家的男性停止工作的时间，与官方退休年龄相比。就像[图 10-2](#inaccurate_comparison)中一样，未从零开始的条形图严重地错误地表示了它们的真实价值差异：根据数据标签，法国男性的退休年龄比日本男性提前约10年
    —— 工作年限相差15%。但是日本的实际条形图长度*超过法国的两倍*。当然，如果所有条形图都从零开始，它们的值之间的差异就不会显得如此引人注目。
- en: 'What gives? Are the designers of this visualization really trying to trick
    us into thinking that men in Japan work twice as long as men in France? Almost
    certainly not. Graphics like the one in [Figure 10-3](#inaccurate_retirement)
    are the reason why expressing *one* idea per visualization is so important: trying
    to layer in more than that is where you’re most likely to run into trouble and
    end up with an inaccurate and misleading visualization. In [Figure 10-3](#inaccurate_retirement),
    the designers are trying to show two different measures (difference between the
    official retirement age and the age men stop working *and* what that age is) whose
    scales are incompatible. Start the bars at zero, and readers won’t be able to
    distinguish the ages where the dots are placed; change the scale so the dot placement
    is legible, and the bars become inaccurate. Either way, you’re forcing the reader
    to do a lot of work—especially since the graphic’s heading hasn’t told them what
    they should be looking for ;-)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 是怎么回事？这个可视化的设计者真的想要欺骗我们认为日本男性工作的时间是法国男性的两倍吗？几乎可以肯定不是。像[图 10-3](#inaccurate_retirement)中的这样的图形是表达*一个*想法每次可视化是如此重要的原因：试图叠加多于一个想法的内容是最有可能导致问题并最终得到不准确和误导性可视化的地方。在[图 10-3](#inaccurate_retirement)中，设计者试图展示两种不同的测量方法（官方退休年龄与男性停止工作的年龄之间的差异*以及*该年龄是什么）。它们的刻度是不兼容的。将条形图从零开始，读者将无法区分点放置的年龄；改变刻度以使点的放置清晰可读，而条形图变得不准确。无论哪种方式，你都让读者做了很多工作
    —— 尤其是因为图形的标题没有告诉他们他们应该寻找什么 ;-)
- en: 'Let’s see what happens when we start with a clear, action-verb headline and
    use that to redesign this graphic: “Men in Japan work years past retirement age,
    while others stop well before.” Here, our headline/data statement is about highlighting
    the *difference* between official retirement and actual retirement. Now we can
    design a horizontal bar chart that both supports this claim *and* accurately represents
    the underlying data, as shown in [Example 10-2](#retirement_age) and the resulting
    [Figure 10-4](#retirement_gap_graphic).'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看当我们从一个清晰的动作动词标题开始，并使用它来重新设计这个图形时会发生什么：“日本的男性在退休年龄之后工作多年，而其他国家则远早于此。” 这里，我们的标题/数据陈述是关于突出官方退休和实际退休之间的*差异*。
    现在我们可以设计一个水平条形图，既支持这一说法，*又*准确表示潜在数据，如[示例 10-2](#retirement_age)中所示和随后的[图 10-4](#retirement_gap_graphic)。
- en: Example 10-2\. retirement_age.py
  id: totrans-60
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 示例 10-2\. retirement_age.py
- en: '[PRE1]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[![1](assets/1.png)](#co_presenting_your_data_CO2-1)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_presenting_your_data_CO2-1)'
- en: By assigning our numerical values to the x-axis, and categorical values to the
    y-axis, *seaborn* will render this as a horizontal, rather than vertical, bar
    chart.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将我们的数值分配给 x 轴，并将分类值分配给 y 轴，*seaborn* 将呈现这个图表为一个水平而不是垂直的条形图。
- en: '![Retirement gap horizontal bar chart.](assets/ppdw_1004.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![退休差距水平条形图。](assets/ppdw_1004.png)'
- en: Figure 10-4\. Retirement gap horizontal bar chart
  id: totrans-65
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-4\. 退休差距水平条形图
- en: 'Because my data statement/headline is now clearly about the *difference* in
    years between official and actual retirement age, I’ve chosen to chart this difference
    directly and also reorder the data: men in France only retire one year early,
    while men in Belgium retire about eight years early. To further highlight the
    before/after official retirement age distinction, I’ve also color-coded the bars
    according to their positive/negative value.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我的数据说明/标题现在明确涉及官方退休年龄与实际退休年龄之间的*差异*，我选择直接绘制这种差异，并重新排列数据：法国男性仅比官方退休年龄早退休一年，而比利时男性大约提前退休八年。为了进一步突出官方退休年龄前后的差异，我还根据条形的正负值对其进行了颜色编码。
- en: 'The mix of positive and negative values in this dataset—along with the longer
    country name labels—makes this graphic much more readable as a horizontal bar
    chart rather than a vertical one. If we want to test it out as a vertical chart
    for the sake of comparison, however, we need to swap which data columns we pass
    as the `x` and `y` arguments to the `barplot()` function. For example, by changing
    this:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 此数据集中正负值的混合——以及更长的国家名称标签——使这个图表作为水平条形图比垂直条形图更易读。然而，为了比较起见，如果我们想将其作为垂直图表测试，我们需要交换我们传递给`barplot()`函数的数据列作为`x`和`y`参数。例如，通过更改如下内容：
- en: '[PRE2]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'to this:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 到此：
- en: '[PRE3]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: While this change is easy enough to make, there can be real differences in the
    readability of a given dataset when it’s rendered vertically or horizontally.
    Specifically, vertical bars tend to be better for data with shorter labels, less
    variation, and/or few to no negative values, while horizontal bars are usually
    better for divergent data (especially if there is a high proportion of negative
    values) and/or data that has longer labels.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这种变化很容易实现，但在呈现数据集时，垂直或水平渲染的可读性可能存在真正的差异。具体来说，垂直条形图通常更适合具有较短标签、变化较小和/或几乎没有负值的数据，而水平条形图通常更适合差异较大的数据（特别是如果有大量负值）和/或具有较长标签的数据。
- en: While the visualization shown in [Figure 10-4](#retirement_gap_graphic) is still
    quite simple, if you run the code you’ll see for yourself the difference in quality
    that, for example, taking care with your color palette brings to a visualization.
    While I have chosen a binary magenta/green color encoding here, I could also have
    specified one of `seaborn`’s [170 color palettes](https://medium.com/@morganjonesartist/color-guide-to-seaborn-palettes-da849406d44f)
    (e.g., `palette='BuGn'`), which would (mostly) align the color intensity with
    the value of each bar.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然[图 10-4](#retirement_gap_graphic)中显示的可视化仍然相当简单，但如果你运行代码，你会自己看到例如在调色板上下功夫会给可视化带来的质量差异。虽然我在这里选择了二进制品红/绿色编码，但我也可以指定`seaborn`的[170种调色板](https://medium.com/@morganjonesartist/color-guide-to-seaborn-palettes-da849406d44f)（例如，`palette='BuGn'`），这将（大部分地）使每个条形的颜色强度与其值对齐。
- en: 'To recap, when working with bar charts:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，在处理条形图时：
- en: Rule
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 规则
- en: Bars must begin at zero!
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图必须从零开始！
- en: Guideline
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 指导方针
- en: Vertical bars are good for denser data with less variation.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 垂直条形图适用于数据更密集、变化较小的情况。
- en: Guideline
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 指导方针
- en: Horizontal bars are better for more variation and/or longer labels.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 水平条形图更适合更多的变化和/或更长的标签。
- en: Line Charts
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 折线图
- en: When your data statement is about *rates of change* rather than *value differences*,
    it’s time to explore line charts. Like bar charts, line charts can effectively
    display multiple categories of numerical data, but only as it *changes over time*.
    Because they don’t visually encode the absolute data values, however, line chart
    scales do *not* need to start at zero.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的数据陈述关于*变化率*而不是*值差异*时，是时候探索折线图了。与条形图类似，折线图可以有效显示多个类别的数值数据，但只能显示它*随时间变化*的情况。然而，因为它们不直观地编码绝对数据值，折线图刻度*不*需要从零开始。
- en: 'At first, this might seem like an invitation for manipulation—and indeed, line
    charts have been at the center of some major political controversies.^([6](ch10.html#idm45143395440176))
    For both bar charts and line charts, however, what’s actually driving the scale
    of the y-axis is the *data*: just as we cannot decide to start bar charts at a
    value other than zero, it would be absurd to scale the y-axis to many times the
    value of our largest data measure, as shown in [Figure 10-5](#bad_wage_math_flat).'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 起初，这可能看起来像是一种操纵的邀请——事实上，折线图一直处于一些重大政治争议的中心。^([6](ch10.html#idm45143395440176))
    然而，对于条形图和折线图，真正驱动y轴刻度的是*数据*：正如我们不能决定将条形图从零开始，将y轴刻度扩展到最大数据测量的多倍是荒谬的，如[图 10-5](#bad_wage_math_flat)所示。
- en: '![Another Bad Wage Comparison Graphic](assets/ppdw_1005.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![另一个糟糕的工资比较图形](assets/ppdw_1005.png)'
- en: Figure 10-5\. Another bad wage comparison graphic
  id: totrans-84
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-5\. 另一个糟糕的工资比较图形
- en: While technically accurate, the hyperextended y-scale in [Figure 10-5](#bad_wage_math_flat)
    has so compressed the data values that our eyes can no longer accurately or effectively
    distinguish the difference between them. For bar charts, then, the highest y-axis
    value should usually be at the next “whole” labeled increment (more about this
    in [“Selecting Scales”](#selecting_scales)). For line charts, visualization experts
    like Dona Wong recommend that the value range of the data occupy about two-thirds
    of the y-axis space.^([7](ch10.html#idm45143395430576))
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管在技术上是准确的，但[图 10-5](#bad_wage_math_flat) 中超长的y轴刻度已经将数据值压缩到我们的眼睛无法准确或有效区分它们的程度。因此，对于条形图，y轴的最高值通常应在下一个“整数”标记的增量处（更多关于此内容，请参见[“选择刻度”](#selecting_scales)）。对于线图，可视化专家如唐娜·王建议数据值的范围应占据y轴空间的大约三分之二。^([7](ch10.html#idm45143395430576))
- en: Of course, this approach highlights the influence that the *selection* of data
    points in a line chart has on the overall message. For example, consider [this
    graphic from *The Economist*](https://economist.com/graphic-detail/2021/06/21/the-pandemic-cut-annual-fdi-flows-by-one-third),
    reproduced in [Figure 10-6](#fdi_flow_original).
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这种方法突出了线图中数据点的选择对整体信息传达的影响。例如，请考虑来自[*经济学人*](https://economist.com/graphic-detail/2021/06/21/the-pandemic-cut-annual-fdi-flows-by-one-third)的这张图，它在[图 10-6](#fdi_flow_original)
    中重新制作。
- en: '![Foreign Direct Investment Flows, 2007 - 2020](assets/ppdw_1006.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![2007-2020 年外国直接投资流动](assets/ppdw_1006.png)'
- en: Figure 10-6\. Foreign direct investment flows (FDI), 2007–2020
  id: totrans-88
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-6\. 2007–2020 年外国直接投资流动（FDI）
- en: 'In this case, the original headline, “The pandemic cut annual FDI flows by
    one-third,” is actually pretty effective; it’s both active and specific. But while
    the data this headline describes is *included* in the accompanying chart, it’s
    far from emphasized—the visualization includes more than a decade’s worth of data
    even though the change described took place between 2019 and 2020\. If we revise
    the graphic to focus *only* on what happened between those two years, as shown
    in [Figure 10-7](#fdi_slopegraph), we can both support the data statement more
    clearly *and* reveal an additional dimension of the data: though foreign direct
    investment dropped substantially in “developed” countries, it largely held steady
    in “developing” regions. As the article itself states, “Inflows to rich countries
    fell faster than those to developing ones—by 58% against just 8%.”'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，原始标题“疫情使年度外国直接投资流动减少三分之一”实际上相当有效；它既积极又具体。但是，虽然这个标题描述的数据包含在随附的图表中，但并未得到强调——尽管所述变化发生在2019年至2020年之间。如果我们修改图形，仅侧重于这两年发生的情况，如[图 10-7](#fdi_slopegraph)
    所示，我们既可以更清楚地支持数据陈述，*还*能揭示数据的另一个维度：尽管“发达”国家的外国直接投资大幅下降，“发展中”地区却基本保持稳定。正如文章本身所述，“向富裕国家的流入速度下降得比向发展中国家的速度要快得多——分别下降了58%和仅8%。”
- en: This two-point line graph—also known as a *slope graph*—not only makes it easy
    for readers to see the evidence behind the headline claim, it also allows them
    to infer the disparate impact of the pandemic on FDI with respect to “developed”
    versus “developing” countries—thereby providing evidence for the article’s later
    claim as well. As you can see in [Example 10-3](#covid_fdi_impact), generating
    this type of basic line chart takes just a few lines of code.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 这种两点线图，也称为*斜率图*，不仅使读者能够轻松看到标题声明背后的证据，还使他们能够推断出疫情对“发达”与“发展中”国家外国直接投资的不均影响——从而为文章后来的声明提供证据。正如您在[示例 10-3](#covid_fdi_impact)
    中所看到的，生成这种基本线图只需几行代码。
- en: '![The pandemic cut annual FDI flows by one-third.](assets/ppdw_1007.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![疫情使年度外国直接投资流动减少三分之一。](assets/ppdw_1007.png)'
- en: Figure 10-7\. The pandemic cut annual FDI flows by one-third
  id: totrans-92
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-7\. 疫情使年度外国直接投资流动减少三分之一
- en: Example 10-3\. covid_FDI_impact.py
  id: totrans-93
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 示例 10-3\. covid_FDI_impact.py
- en: '[PRE4]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: At this point, you may be wondering, though, whether it’s somehow *wrong* to
    include only two years of data. After all, we have (at least) a decade’s worth
    on hand.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，你可能会想知道，仅包括两年数据是否在某种程度上是*错误*的。毕竟，我们手头上有（至少）十年的数据。
- en: 'The real question, of course, is not whether we *have* more data but whether
    the data claim we’re making somehow misrepresents a broader trend. Looking at
    the original plot in [Figure 10-6](#fdi_flow_original), it’s clear that the FDI
    has only dropped this *quickly* twice in the past 15 years or so: from 2007 to
    2008 and again between 2016 and 2017\. Why? We don’t know for sure—neither the
    original chart nor the full article text (I checked!) make it clear. What we *do*
    know is the absolute change in value (around $500B) and the proportional change
    in value are both large enough *and* unique enough that focusing just on the one-year
    change is not misleading. If we want to reassure our readers of this, we’d be
    better off providing the additional detail in a table, where they can review the
    precise numbers in detail without being distracted from the main point.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，真正的问题不在于我们*是否*有更多数据，而是我们所做的数据声明是否以某种方式误读了更广泛的趋势。查看 [图 10-6](#fdi_flow_original)
    中的原始图表，显然FDI在过去15年左右只有两次如此*迅速*下降：分别是从2007年到2008年以及从2016年到2017年。为什么？我们不确定——无论是原始图表还是全文（我查过了！）都没有明确说明。我们*确实*知道的是价值的绝对变化（大约5000亿美元）和价值的比例变化足够*且*独特，以至于仅关注一年的变化并不具有误导性。如果我们想向读者保证这一点，最好在表格中提供额外的细节，他们可以在其中详细查看精确的数字，而不会被主要观点分散注意力。
- en: 'Line charts are essential visual forms when the *rate of change* (captured
    in the slope of each line) is central to the data statement’s message. While this
    type of chart does not need to start at zero, it can *only* be used to represent
    data over time. To review, when working with line charts, the following apply:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 当*变化率*（体现在每条线的斜率中）是数据声明信息的核心时，线图是必不可少的视觉形式。虽然这种类型的图表不需要从零开始，但它*只能*用于表示随时间变化的数据。回顾一下，在使用线图时，适用以下几点：
- en: Rule
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 规则
- en: Data points must represent values *over time*.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 数据点必须表示随时间的值。
- en: Guideline
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: Data lines should occupy roughly 2/3 of the vertical chart area.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 数据线应占垂直图表区域的大约2/3。
- en: Guideline
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: Four or fewer lines should be distinctly colored/labeled.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 四条或更少的线应当有明显的颜色/标签区分。
- en: While it may seem counterintuitive at first, it’s actually OK to have a large
    number of lines on a line chart—as long as they are styled so that they don’t
    compete with the evidence for our data statement. As we’ll see in the next section,
    this kind of “background” data can actually be a useful way to provide additional
    context for readers, thereby supporting your headline claims even more effectively.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然起初可能看起来违反直觉，但在线图上有大量数据线其实是可以的——只要它们的样式不与我们数据声明的证据竞争。正如我们将在下一节看到的那样，这种“背景”数据实际上可以成为为读者提供额外背景的一种有用方式，从而更有效地支持您的主要声明。
- en: Scatter Charts
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 散点图
- en: Although scatter plots are not frequently used in general data communications,
    they can be irreplaceable as a point-in-time counterpart to line charts, especially
    when you have a large number of data points that illustrate a clear trend—or deviation
    from that trend.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然散点图在一般数据传播中并不常用，但它们作为线图的时间点对应物可以是不可替代的，尤其是当您有大量数据点来展示明显趋势或与该趋势偏离时。
- en: 'Consider, for example, the graphic in [Figure 10-8](#nyt_temp_scatter), which
    reproduces one from this [*New York Times* story](https://nytimes.com/interactive/2021/06/29/upshot/portland-seattle-vancouver-weather.html),
    and illustrates how, even among thousands of temperature readings taken over the
    course of more than four decades, three consecutive days in June 2021 were well
    outside the expected range in cities from Portland, Oregon, to Vancouver, Canada.
    While the headline could certainly be punchier, the visualization itself has a
    clear message: the maximum temperatures reached in Portland, OR, on three days
    in late June were higher *than every other day* of the last 40 years.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，考虑一下[图 10-8](#nyt_temp_scatter) 中的图形，该图形重现了来自这篇[*纽约时报*故事](https://nytimes.com/interactive/2021/06/29/upshot/portland-seattle-vancouver-weather.html)中的一个图表，并说明了在40多年的时间里，从俄勒冈州波特兰市到加拿大温哥华市的城市中，2021年6月的三个连续日的最高温度远高于预期范围。虽然标题可以更加生动，但可视化本身传达了一个明确的信息：波特兰市2021年6月下旬的三天最高温度超过了过去40年里的每一天。
- en: '![Daily maximum temperatures in Portland, 1979-2021.](assets/ppdw_1008.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![1979-2021年波特兰市每日最高气温。](assets/ppdw_1008.png)'
- en: Figure 10-8\. Daily maximum temperatures in Portland, 1979–2021
  id: totrans-109
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图10-8\. 波特兰市1979年至2021年的每日最高气温
- en: Most of the time, scatter plots are used to display data values captured either
    over the course of time (as in [Figure 10-8](#nyt_temp_scatter)) or across many
    individual members of some “group” (e.g., “schools,” “large cities”, “river-fed
    lakes,” or “Marvel movies”). At times, scatter plots may include calculated trend
    lines that serve as a benchmark for comparing individual data points with “expected”
    average values; at other times, the benchmark might be a value determined by professional,
    legal, or social norms.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，散点图用于显示随时间（如[图 10-8](#nyt_temp_scatter)）或跨许多个体成员（例如“学校”、“大城市”、“河流供水的湖泊”或“漫威电影”）捕获的数据值。有时，散点图可能包括计算的趋势线，用作将个别数据点与“预期”平均值进行比较的基准；其他时候，基准可能是由专业、法律或社会规范确定的值。
- en: For example, drawing inspiration from a *Pioneer Press* story about schools
    where students perform better than the typical indicators would suggest,^([8](ch10.html#idm45143395284112))
    we can use *seaborn* to plot historical data from the California school system
    to generate a scatter plot and highlight an unusual data point. The code for this
    example can be found in [Example 10-4](#schools_that_work).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，从一篇*Pioneer Press*关于某些学校的学生表现优于典型指标的报道中获得灵感，^([8](ch10.html#idm45143395284112))我们可以使用*seaborn*绘制加利福尼亚学校系统的历史数据，生成一个散点图并突出显示一个异常数据点。此示例的代码可以在[示例 10-4](#schools_that_work)中找到。
- en: Example 10-4\. schools_that_work.py
  id: totrans-112
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 示例 10-4\. schools_that_work.py
- en: '[PRE5]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[![1](assets/1.png)](#co_presenting_your_data_CO3-1)'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](assets/1.png)](#co_presenting_your_data_CO3-1)'
- en: The `alpha` argument governs the opacity of the dots; 60% opacity (`0.6` as
    a decimal) proved the right balance here for legibility of individual as well
    as overlapping dots. The argument `linewidth=0` eliminates the outlines around
    each dot, which interferes with the heatmap effect of adjusting the opacity.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '`alpha` 参数控制点的不透明度；60% 的不透明度（作为十进制 `0.6`）在这里被证明是视觉上清晰以及点重叠的热图效果的正确平衡。`linewidth=0`
    参数消除了每个点周围的轮廓，这会影响调整透明度时的热图效果。'
- en: '[![2](assets/2.png)](#co_presenting_your_data_CO3-2)'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](assets/2.png)](#co_presenting_your_data_CO3-2)'
- en: To “highlight” a school, we are essentially just creating a one-dot scatter
    plot at the x and y coordinates of our selected data point.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 要“突出显示”学校，我们基本上只是在所选数据点的 x 和 y 坐标处创建一个单点散点图。
- en: One of the key challenges when using scatter plots is the problem of *occlusion*,
    in which data points may end up superimposed on one another, thus obscuring the
    true density of the data. One approach to this is to add *jitter*—a small amount
    of randomness to the placement of individual dots designed to minimize this visual
    overlap. As of *seaborn* 0.11.2, however, jitter is [listed as an optional argument](https://seaborn.pydata.org/generated/seaborn.scatterplot.html)
    but is listed as “not supported.” Fortunately, we can preserve the precision of
    our data without losing its interpretability by adjusting the opacity or *alpha*
    of the data points. By making all the dots in our visualization somewhat transparent,
    overlapping data points translate to a kind of opacity-driven *heatmap* that clarifies
    trends without losing specificity, as shown in [Figure 10-9](#schools_that_work_scatter).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 使用散点图的一个关键挑战是*遮挡*问题，即数据点可能重叠在一起，从而遮挡了数据的真实密度。对此的一种处理方法是添加*抖动*——对个别点的放置添加少量随机性，旨在最小化视觉上的重叠。然而，在*seaborn*
    0.11.2 中，抖动被列为[可选参数](https://seaborn.pydata.org/generated/seaborn.scatterplot.html)，但被列为“不支持”。幸运的是，通过调整数据点的透明度或*alpha*，我们可以保留数据的精度而不失其可解释性。通过使可视化中的所有点都有些透明，重叠的数据点就形成了一种基于透明度的*热图*，这样就能清晰地展示趋势，而不失特异性，正如[图 10-9](#schools_that_work_scatter)所示。
- en: '![At some schools, history isn''t destiny](assets/ppdw_1009.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![在某些学校，历史并非命运](assets/ppdw_1009.png)'
- en: Figure 10-9\. At some schools, history isn’t destiny
  id: totrans-120
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-9\. 在某些学校，历史并非命运
- en: So when do scatter plots make sense?
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，何时使用散点图才有意义？
- en: Guideline
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: Data must be high-volume enough for trends and outliers to be visible.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 数据必须足够大量，以便能看到趋势和异常值。
- en: Guideline
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: Relevant benchmarks, whether arising from the data or outside rules, should
    be visualized.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 应可视化相关基准，无论是来自数据还是外部规则。
- en: Guideline
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: Most of the data should be a “background” color, with no more than a handful
    of points highlighted.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数数据应该是“背景”颜色，高亮显示的点不应超过少数几个。
- en: Guideline
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 指南
- en: Adjust opacity or apply jitter to minimize data occlusion.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 调整透明度或应用抖动以最小化数据遮挡。
- en: Maps
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地图
- en: For many of us, maps are one of the most familiar visualization types available;
    depending on your circumstances, you may use maps to plan your route to work or
    school, find a new shop or restaurant, or locate a new park or bike path. Maps
    are also a common visual form in mass communications, where they appear as weather
    maps, election maps, or even “locator” maps that provide a frame of reference
    for unfamiliar locations. If our data has a geographic component, then, it’s natural
    to consider mapping it.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们许多人来说，地图是最熟悉的可视化类型之一；根据你的情况，你可能使用地图规划上班或上学的路线，找到新的商店或餐馆，或者找到新的公园或自行车道。地图也是大众传播中常见的视觉形式，它们出现为天气地图、选举地图，甚至是提供陌生地点参照的“定位器”地图。如果我们的数据具有地理组成部分，那么考虑将其制成地图是很自然的。
- en: 'In reality, however, *unless your data is* about *geography, you really shouldn’t
    be mapping it*. Why? Because maps represent *land area*. Not prevalence, or even
    population—which is usually what our data is about. For example, let’s think back
    to our PPP loan data from [Chapter 6](ch06.html#chapter6). If you were to cluster
    the number of approved loans by state using `value_counts(''ProjectState'')`,
    you would end up with the following output (reformatted into columns to save space):'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在现实中，*除非你的数据是*关于*地理，否则你真的不应该将其映射*。为什么？因为地图代表*土地面积*。不是流行度，甚至不是人口—而通常我们的数据就是关于人口的。例如，让我们回想一下来自[第
    6 章](ch06.html#chapter6)的 PPP 贷款数据。如果你使用 `value_counts('ProjectState')` 对州的批准贷款数量进行聚类，你将得到以下输出（重新格式化为列以节省空间）：
- en: '[PRE6]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Without too much effort, you can probably guess that the order in which states
    appear in this table is similar to their order in [this one](https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population),
    which ranks the states by population. In other words, if we were to “map” the
    data about PPP loan approvals, it would basically end up being a population map.
    But let’s say we fixed this, and we normalized the number of loans by population,
    and so generated a new column called “Approved Loans Per Person” or something
    similar. Even now that we’ve converted our data from population to prevalence,
    we’ve really just given ourselves the bar chart problem in geographic form: the
    actual *visual area* occupied by a particular state is just *not* proportional
    to the data we’re displaying. No matter how we choose our color palette or data
    ranges, Delaware will occupy 1/50 the visual space of Wyoming, even though it
    has 25% more approved loans. By mapping this, we’re just guaranteeing that our
    visual representation is working against the actual data.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 毫不费力地，你可能已经猜到这个表格中州的排列顺序与[这个表格](https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population)中州的排列顺序相似，后者按人口排名州。换句话说，如果我们要对
    PPP 贷款批准的数据进行“映射”，那么它基本上会成为一个人口地图。但是让我们假设我们解决了这个问题，并且我们通过人口对贷款数量进行了标准化，因此生成了一个新列，称为“人均批准贷款”或类似的内容。即使现在我们已经将数据从人口转换为流行度，但我们实际上只是用地理形式给自己提出了条形图问题：特定州实际占据的*视觉区域*与我们显示的数据*不*成比例。无论我们选择什么颜色搭配或数据范围，特拉华州的可视空间都将只占怀俄明州的1/50，尽管它批准的贷款数量多出25%。通过对此进行映射，我们只是在确保我们的视觉表现与实际数据相悖。
- en: Obviously, there are a *lot* of map visualizations out there, and a fair number
    of them probably make one or both of the mistakes I’ve highlighted thus far. Mapping
    offers such a *seemingly* straightforward visual organizing principle that many
    people can’t resist it, but using it for nongeographic data is really a disservice
    to both the data and your readers.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，有*很多*地图可视化，其中相当多的地图可能存在我迄今为止强调的一个或两个错误。地图提供了一个*看似*简单直接的视觉组织原则，许多人无法抵制它，但将其用于非地理数据实际上对数据和读者都是一种伤害。
- en: 'There are, of course, excellent maps of genuinely geographic phenomena out
    there: these *New York Times* census maps, for example, offer a thoughtful approach
    to presenting [census data](https://nytimes.com/interactive/2015/07/08/us/census-race-map.html),
    while *ProPublicas*’s work on [Houston’s flood zones](https://projects.propublica.org/graphics/harvey-maps)
    illustrates how important geography (both natural and human-made) is during extreme
    weather events. And for a beautiful and original presentation of wind data, check
    out [this wind map on hint.fm](http://hint.fm/wind).'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，真正地理现象的优秀地图是存在的：例如，这些*纽约时报*的人口普查地图，提供了一种思慮周到的方法来展示[census data](https://nytimes.com/interactive/2015/07/08/us/census-race-map.html)，而*ProPublica*关于[休斯顿洪水区](https://projects.propublica.org/graphics/harvey-maps)的工作则说明了地理（自然和人造）在极端天气事件中的重要性。至于关于风数据的美丽和独特呈现，请查看[hint.fm上的这个风图](http://hint.fm/wind)。
- en: Given how rarely maps will be the *right* visualization for supporting your
    data claims (as well as how complex building them can be in Python), we’re not
    going to go through a code example for mapping here. If you’re working with data
    that you feel you truly *must* map, I recommend looking at the [*geopandas* library](https://geopandas.org/index.html),
    which is designed to combine mapping-related shape information easily with *pandas*
    DataFrames to produce visualizations.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到地图很少是支持数据主张的*正确*可视化方式（以及在Python中构建它们可能有多复杂），我们在这里不会展示映射的代码示例。如果您正在处理您认为必须映射的数据，我建议看看[*geopandas*库](https://geopandas.org/index.html)，该库旨在轻松地将与*pandas*数据框相关的映射相关形状信息结合起来生成可视化。
- en: Elements of Eloquent Visuals
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优雅视觉的要素
- en: Although I have been an information designer for most of my career, I do not
    consider myself a true graphic designer. I cannot make you a good logo for your
    business, any more than you—having now learned a decent amount about Python programming—can
    troubleshoot a printer problem. Fortunately, through study, lots of reading, a
    few courses, and the generosity of the many talented designers with whom I’ve
    worked, I’ve learned a fair bit about effective visual design in general, and
    information design in particular. My takeaways from a couple of decades in the
    work are outlined here.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我大部分职业生涯都是信息设计师，但我并不认为自己是真正的图形设计师。我不能为你的业务做一个好的标志，就像你学会了一些Python编程后不能解决打印机问题一样。幸运的是，通过学习、大量阅读、少数课程以及许多才华横溢的设计师的慷慨帮助，我对有效的视觉设计有了一定了解，特别是信息设计。我在工作中学到的一些要点在这里概述。
- en: The “Finicky” Details Really Do Make a Difference
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: “挑剔”的细节确实有所不同
- en: A million years ago, when I first started working as a frontend programmer for
    a web startup, my number-one priority was to make things that *worked*—and let
    me tell you, I was *really* glad when they did. Over time, I even refined and
    refactored my code in some of the same ways we did in [Chapter 8](ch08.html#chapter8),
    and I was pretty happy with those programming artifacts. From the perspective
    of a programmer, my work was pretty clean.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 一百万年前，当我第一次作为网络初创公司的前端程序员工作时，我的首要任务是制作*运行良好*的东西——让我告诉你，当它们真正运行时，我是*非常*高兴的。随着时间的推移，我甚至在一些与我们在[第8章](ch08.html#chapter8)中进行的相同方式中对我的代码进行了改进和重构，并且我对这些编程工件相当满意。从程序员的角度来看，我的工作是相当干净的。
- en: But I worked on a *design* team, and the designers I worked with were always
    pushing me to tweak little details that seemed to me more on the side of “nice
    to have,” rather than essential. Did it *really* matter if the photos in a slideshow
    slowed down or rebounded just a bit as they slid into place? At the time, coding
    up effects like that meant writing and tweaking (very approximate) physics equations,
    which I did not love. Plus, all those customizations were cluttering up my code.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 但我在一个*设计*团队工作，我与之合作的设计师总是推动我微调看起来对我而言更像“很好有”，而不是必要的小细节。如果幻灯片中的照片稍微减慢或者弹回一点，这真的有关键吗？当时，编写和调整这样的效果意味着我需要写入和调整（非常粗略的）物理方程，这不是我喜欢的。而且，所有这些定制都在我代码中制造了混乱。
- en: But one of the things I like most about programming is problem-solving, so eventually
    I hunkered down and made the changes they asked for. And once I saw it in action,
    I realized how much more polished and satisfying the end result really was. I
    began to appreciate that the *quality* of the design was in those “little” details
    and that “finicky” things—like a color change on tap or click—actually made my
    interfaces and graphics both clearer and more usable. In other words, don’t dismiss
    the design “details”—they’re not just about making things “look pretty.” *Design
    is how it works.*
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 但我最喜欢编程的原因之一是解决问题，所以最终我埋头进行了他们要求的更改。一旦我看到它运行起来，我意识到最终结果变得更加精致和令人满意。我开始赞赏设计的*质量*在那些“小”细节中，并且那些“挑剔”的东西——比如点击或轻敲时的颜色变化——实际上使得我的界面和图形更加清晰和可用。换句话说，不要忽视设计中的“细节”——它们不仅仅是为了让事物“看起来漂亮”。*设计的本质在于它的功能*。
- en: Trust Your Eyes (and the Experts)
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相信你的眼睛（和专家们）
- en: 'Visual elements rendered digitally are necessarily expressed in quantitative
    terms: the mathematical origins of [hexadecimal color codes](https://computerhope.com/htmcolor.htm)
    and x/y coordinate positioning might make it seem like finding the “correct” colors
    for a chart or the right positioning for an annotation label is a matter of doing
    the right math. It isn’t. Color perception, for example, is both complex and highly
    individual—we can’t really be sure that other people are seeing “the same” color
    that we are—and, of course, there are many types of color “blindness” that may
    prevent some people from perceiving the difference between certain pairs of complementary
    colors (e.g., red/green, blue/orange, yellow/purple) at all. There is no equation
    that can account for that.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在数字化的视觉元素中，必然以定量术语表达：[十六进制颜色代码](https://computerhope.com/htmcolor.htm)的数学起源和x/y坐标定位可能使人误以为为图表找到“正确”的颜色或标注标签的正确位置只是数学问题。但事实并非如此。例如，颜色感知既复杂又高度个体化——我们不能确保别人看到的是我们“相同”的颜色——当然，有许多类型的颜色“盲”可能会阻止某些人根本无法感知某些对比色对（例如红/绿，蓝/橙，黄/紫）。没有方程可以解释这一点。
- en: 'In fact, every “color” that we might work with is, in fact, characterized by
    three different properties: hue (for example red versus blue), brightness (or
    luminosity), and saturation. Colors that “go” together align or contrast across
    these features in very particular ways. When it comes to visualizations, of course,
    we need colors to do much more than just look good together; they have to *meaningfully
    encode* information. But what does it mean for a color to be “20% more blue” than
    another? Whatever it is, it’s not just a matter of flipping some numbers in your
    hexadecimal color value.^([9](ch10.html#idm45143394216688))'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，我们可能使用的每一种“颜色”实际上都由三个不同的属性来表征：色调（例如红色与蓝色），亮度（或光度）和饱和度。彩色“搭配”通过这些特征以非常特定的方式对齐或对比。当然，当涉及到可视化时，我们需要颜色做的远不止是看起来好看；它们必须*有意义地编码*信息。但是一个颜色“比另一个更蓝20%”是什么意思？不管怎样，这不仅仅是在你的十六进制颜色值中翻转一些数字的问题。^([9](ch10.html#idm45143394216688))
- en: Luckily, we have the help of experts. For more than two decades, anyone looking
    for color advice (mostly for maps, though it is also a great place to start for
    other types of charts) has been able to turn to the work of [Cynthia Brewer](http://personal.psu.edu/cab38),
    a cartographer and professor of geography at Penn State, whose [ColorBrewer](https://colorbrewer2.org)
    tool provides excellent, free color distributions for visual design. Likewise,
    Dona Wong’s excellent book *The Wall Street Journal Guide to Information Graphics*
    (Norton) includes some of my personal favorites when it comes to color combinations
    for graphics.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，我们得到了专家的帮助。二十多年来，寻找颜色建议的人（主要是地图，虽然它也是其他类型图表的一个很好的起点）一直可以求助于宾州州立大学地理学教授兼制图师[Cynthia
    Brewer](http://personal.psu.edu/cab38)的工作，她的[ColorBrewer](https://colorbrewer2.org)工具提供了出色的免费视觉设计颜色分布。同样，Dona
    Wong的优秀著作*《华尔街日报信息图表指南》*（Norton）包括了我个人喜欢的一些图形颜色组合。
- en: 'If you feel really strongly about choosing your own color palette, then the
    next best approach is to turn to the greatest color authority we’ve got: nature.
    Find a photograph of the natural world (photos of flowers often work particularly
    well), and use a color capture tool to select contrasting colors, if you need
    them, or several shades of a single color. Use these to update the defaults on
    almost any visualization package, and you’ll appreciate how much more appealing
    and professional-looking your graphic has become.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您非常坚决地想选择自己的颜色调色板，那么下一个最佳方法就是求助于我们拥有的最伟大的色彩权威：自然。找到自然界的照片（花朵的照片通常效果特别好），并使用颜色捕获工具选择对比色，如果需要的话，或者选择单一颜色的几种色调。使用这些更新几乎任何可视化软件包的默认值，您将欣赏到您的图形变得更加吸引人和专业。
- en: When it comes to things like font size and label placement, there are also no
    equations to follow—you mostly just have to *look* at your graphic and then nudge
    things around if they don’t seem quite right. For example, I clearly remember
    coding up one of my colleague’s designs at *The Wall Street Journal*, which contained
    a list of items in the layout, and naturally I had written a `for` loop to place
    them precisely. The problem was, something looked off when I ran the code and
    rendered it. Convinced that I just had estimated the spacing poorly, I asked him
    how many pixels of white space there should be between each element. “I don’t
    know,” he said, “I just looked at it.”
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到诸如字体大小和标签位置之类的事情时，也没有什么方程式可供遵循——您主要只需*看*一下您的图形，然后在它们看起来不太对劲时微调一下。例如，我清楚地记得在*华尔街日报*编码时，我编写了一个同事设计的列表的代码布局，并且我自然而然地编写了一个`for`循环来精确定位它们。问题是，当我运行代码并渲染它时，某些地方看起来不对劲。我确信我只是在估计间距时估计不准确，于是问他每个元素之间应该有多少像素的白色空间。“我不知道，”他说，“我只是看了看。”
- en: While I recognize that this kind of advice can be frustrating when you’re just
    starting out with visual design, I can also promise that if you give yourself
    some time to experiment, you’ll eventually learn to trust your *own* eyes. With
    that, some practice, and attention to the (well-defined) details laid out in the
    following sections, you’ll soon be producing visualizations that are both accurate
    *and* eloquent.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我认识到在您刚开始进行视觉设计时，这种建议可能令人沮丧，但我也可以承诺，如果您给自己一些时间来尝试，最终您将学会相信*自己的*眼睛。有了这个，一些实践，以及对以下各节中列出的（明确定义的）细节的关注，您很快就会产生既准确又*优美*的可视化效果。
- en: Selecting Scales
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择刻度
- en: 'Throughout [“Charts, Graphs, and Maps: Oh My!”](#charts_graphs_maps), we addressed
    the issue of scale with respect to the *accuracy* of our visualizations; here
    our focus is on clarity and readability. Packages like *seaborn* and *matplotlib*
    will automatically choose scales and axis limits based on your data, but these
    defaults may need tweaking for a variety of reasons. Once you’ve confirmed the
    appropriate *numerical* range for your data, you’ll want to review how your graphic
    is actually rendering and make sure that it is also following these general rules:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在[“图表、图形和地图：哦，我的天！”](#charts_graphs_maps)中，我们讨论了与我们的可视化*准确性*相关的规模问题；而在这里，我们的重点是清晰度和可读性。像*seaborn*和*matplotlib*这样的软件包将根据您的数据自动选择刻度和轴限制，但出于各种原因，这些默认值可能需要调整。一旦您确认了数据的适当*数值*范围，您将希望审查您的图形实际渲染的方式，并确保它也遵循这些一般规则：
- en: Axis limits and marked values should be whole numbers and/or multiples of 5
    or 10.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 轴限和标记的值应为整数和/或5或10的倍数。
- en: Value labels should *not* be in scientific notation.
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值标签*不*应该以科学计数法表示。
- en: Units should only appear on the last element of each axis.
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单位应该只出现在每个轴的最后一个元素上。
- en: Though not ideal, labels may need to be edited or (less preferably) angled in
    order to remain readable.
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虽然不是理想的情况，标签可能需要编辑或者（不太推荐的方式）倾斜以保持可读性。
- en: Choosing Colors
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择颜色
- en: 'In addition to seeking expert advice on specific color selection, consider
    how many colors your data elements should have. Color can be an invaluable way
    to highlight a specific data point or distinguish between measured and projected
    values. When selecting colors for your chart or graph, remember:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 除了寻求专家意见来选择特定的颜色之外，还要考虑您的数据元素应该有多少颜色。颜色可以是突出特定数据点或区分测量值和预测值的宝贵方式。在为您的图表或图形选择颜色时，请记住：
- en: One color per data category
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 每个数据类别一个颜色
- en: If you are displaying several months of data about the PPP loan program, for
    example, all of the bars should be the *same* color. Likewise, different values
    of the same variable should be shades of a single color.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: Avoid continuous color distributions
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
- en: 'While adjusting the color of each visual element according to its value may
    *seem* more precise, like the visual compression of data we saw in [Figure 10-5](#bad_wage_math_flat),
    continuous color palettes (or *ramps*) generate color differences so small that
    the human eye cannot really perceive them. This is where your distribution calculations
    (you *did* do those, right?) will come in handy: create a color scale (or *ramp*)
    of up to five colors and then assign each one to a single *quintile* of your data.^([10](ch10.html#idm45143394184624))'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: Use diverging color scales with care
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: Diverging color scales are really only suitable when there is a true “neutral”
    value that the data varies around. In some cases, this may be zero. In others,
    it may be an agreed-upon value in the field (for example, the US Federal Reserve
    views an inflation rate of [about 2%](https://federalreserve.gov/faqs/5D58E72F066A4DBDA80BBA659C55F774.htm)
    to be ideal).
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Never color-code more than four distinct categories of data
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: But, including contextual data in a background gray is fine.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
- en: Test for color accessibility
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: Tools like ColorBrewer include an option to produce only colorblind-safe combinations.
    If you are using your own colors, test your selections by converting your graphic
    to grayscale. If you can still distinguish all the colors in your visualization,
    your readers should be able to also.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: Above All, Annotate!
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The goal of our visualization process is to share our data insights and support
    our claims. While our action-verb headline should encapsulate the main idea of
    our graphic, it is often valuable to highlight or add context to specific data
    points within the visualization itself. This is *not* the place for asterisks
    and footnotes. Information needed to accurately or effectively understand the
    graphic needs to be part of the graphic’s main visual field. Some of the key ways
    you can make the data within your visualization easier to understand include the
    following:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: Label categorical differences directly
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: Rather than creating a separate legend, place data labels directly on the visualization.
    This saves readers from having to look back and forth between your graphic and
    a separate key to make sense of the information being presented.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: Highlight relevant data points with color
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: If one key data point is central to your overall claim, highlight it in a contrasting
    color.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: Add contextual annotations
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: These small amounts of text (connected to the relevant data element using a
    thin *leader* line, if necessary) could be a label, an explanation, or important
    contextual information. Whatever it is, make sure it appears as close to the data
    as possible and always within the visual bounds of the graphic itself.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: 'From Basic to Beautiful: Customizing a Visualization with seaborn and matplotlib'
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从基础到美观：使用 seaborn 和 matplotlib 自定义可视化
- en: 'One final word about design—visual or otherwise. While I made an effort in
    [“Elements of Eloquent Visuals”](#elementsofeloquentvisuals) to break down the
    elements of effective visualization into component parts, a truly eloquent graphic
    is not a collection of swappable parts. Shifting one part of it—moving a label,
    changing a color—means that many, if not all, of its remaining elements will need
    to be adjusted to bring the whole back into balance. This is precisely why I haven’t
    provided code examples for each individual design aspect outlined previously:
    seen in isolation, it can be hard to understand why any given element is so important.
    But viewed as part of a cohesive whole, it will (hopefully) become clear how each
    contributes to the impact of the graphic.'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 关于设计（无论是视觉还是其他方面）的最后一点说明。虽然我在[“雄辩视觉元素”](#elementsofeloquentvisuals)中努力将有效可视化的元素分解为组成部分，但一幅真正雄辩的图形并不是一堆可互换的部分。改变其中的一个部分——移动一个标签，改变一个颜色——意味着许多，如果不是所有的其余部分都需要调整，以使整体恢复平衡。这正是为什么我之前没有为每个单独的设计方面提供代码示例的原因：孤立地看，很难理解为什么任何给定的元素如此重要。但将其视为一个完整的整体，每个元素如何有助于图形的影响将会变得清晰（希望如此）。
- en: To actually realize these customized visuals in Python, we are still going to
    be relying on the *seaborn* and *matplotlib* libraries. But while we let *seaborn*
    do most of the heavy lifting in previous instances, in this example, it’s the
    fine-grained control offered by *matplotlib* that will really shine. Yes, we’ll
    still let *seaborn* handle the high-level tasks, like actually plotting the data
    values to scale. But *matplotlib* will give us the leverage we need to specify
    everything from label placement and orientation to units, labeling, annotation,
    and highlighting values—everything we need to truly tailor our visualization to
    our claims.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Python 中实现这些自定义视觉效果，我们仍然要依赖 *seaborn* 和 *matplotlib* 库。但是，虽然在以前的情况下我们让 *seaborn*
    处理大部分繁重的工作，在这个例子中，真正发挥作用的是 *matplotlib* 提供的细粒度控制。是的，我们仍然让 *seaborn* 处理高级任务，比如实际按比例绘制数据值。但
    *matplotlib* 将给我们提供我们需要的杠杆，以指定从标签放置和方向到单位、标签、注释和突出显示值等一切，这些都是我们真正需要的，以使我们的可视化真正适应我们的主张。
- en: For this example, we’re going to take a break from the PPP data and instead
    work with some COVID-19 data collated by a team of researchers based on data from
    Johns Hopkins University and made available at [Our World in Data](https://ourworldindata.org/coronavirus-source-data).
    Our goal with this visualization will be to highlight the spike in confirmed COVID-19
    cases in the United States during July 2020, which at the time was attributed
    to the accelerated reopening^([11](ch10.html#idm45143394142944)) in many states
    earlier that spring^([12](ch10.html#idm45143394140400)) as well as gatherings
    over the July 4th holiday.^([13](ch10.html#idm45143394137600)) To understand the
    difference between relying on the defaults and customizing the axis ranges, labels,
    and colors, compare [Figure 10-10](#seaborn_defaults) to [Figure 10-11](#customized_visuals).
    The code to produce [Figure 10-11](#customized_visuals) is shown in [Example 10-5](#refined_covid_barchart).
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个例子，我们将暂时离开 PPP 数据，转而使用一些 COVID-19 数据，这些数据是由一组研究人员根据约翰斯·霍普金斯大学的数据整理而成，并在[我们世界的数据](https://ourworldindata.org/coronavirus-source-data)上公开。我们的目标是突出显示
    2020 年 7 月美国确诊 COVID-19 病例激增的情况，当时这一情况被归因于许多州在之前春季较早时加快了重新开放^([11](ch10.html#idm45143394142944))，以及在
    7 月 4 日假期期间的聚会^([12](ch10.html#idm45143394140400))。要了解依赖默认值和自定义轴范围、标签和颜色之间的区别，请比较[图
    10-10](#seaborn_defaults)和[图 10-11](#customized_visuals)。生成[图 10-11](#customized_visuals)的代码显示在[示例
    10-5](#refined_covid_barchart)中。
- en: Example 10-5\. refined_covid_barchart.py
  id: totrans-181
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 示例 10-5。refined_covid_barchart.py
- en: '[PRE7]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[![1](assets/1.png)](#co_presenting_your_data_CO4-1)'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '![1](assets/1.png)](#co_presenting_your_data_CO4-1)'
- en: Customizing the orientation, color, and other attributes of the “tick labels”
    that indicate the values on each axis of the chart can be done via the *matplotlib*
    [`tick_params()` method](https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html).
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义图表上每个轴上指示值的“刻度标签”的方向、颜色和其他属性可以通过 *matplotlib* 的 [`tick_params()` 方法](https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html)来完成。
- en: '[![2](assets/2.png)](#co_presenting_your_data_CO4-2)'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '![2](assets/2.png)](#co_presenting_your_data_CO4-2)'
- en: The arguments that are supplied to any custom function assigned to any `FuncFormatter`
    function will be “value” and “tick” position.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
- en: '[![3](assets/3.png)](#co_presenting_your_data_CO4-4)'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
- en: In “interactive mode,” this function will throw errors if `pos` is `None`.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: '[![4](assets/4.png)](#co_presenting_your_data_CO4-5)'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: By default, the positioning of [text elements layered on top of the chart](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.text.html)
    is “data coordinates,” e.g., a value of 1 will left-align the start of the text
    with the center point of the first column. The provided “y” value anchors the
    *bottom* of the text box.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
- en: '![Basic seaborn chart.](assets/ppdw_1010.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
- en: Figure 10-10\. Bar chart produced by visualization library defaults
  id: totrans-192
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: '![Customized visualization](assets/ppdw_1011.png)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
- en: Figure 10-11\. Customized visualization
  id: totrans-194
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: As you can see from [Example 10-5](#refined_covid_barchart), the process of
    customizing our visualization in Python is somewhat involved; tailoring the look
    and feel of the default output has nearly tripled the lines of code required.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: At the same time, the default output in this instance was basically illegible.
    By softening the colors, highlighting salient data points, and (perhaps most importantly)
    refining our data labels, we’ve managed to create a chart that could hold its
    own in most publication contexts. And obviously a good chunk of the code we have
    in here could be refined and repurposed to make this degree of customization a
    much less bespoke effort for future graphics.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: Beyond the Basics
  id: totrans-197
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: While I’ve aimed to cover the essentials of effective and accurate data visualization
    in this chapter, the truth is that valuable visualization ideas can come from
    anywhere—not just books or blogs that are dedicated to the topic. One of my favorite
    graphics from my time at *The Wall Street Journal* is [the unemployment visualization](https://jennifervalentinodevries.com/2009/09/16/grid-graphic-u-s-unemployment-rate)
    shown in [Figure 10-12](#unemployment_grid), which was inspired by a similar form
    I encountered at a museum exhibit about climate change; the geometric heatmap
    format allows readers to visually compare decades of monthly unemployment rates
    at a glance. If you’re interested in design, you can learn a lot about what does
    (and doesn’t) work by simply looking critically at the media you see around you
    every day—whether it’s an online advertisement or a restaurant menu. If something
    doesn’t feel polished or appealing, look carefully at its components. Are the
    colors incongruous? Is the typeface hard to read? Or are there just too many things
    crowded together into too small a space?
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: Critiquing the work of others is easy, of course. If you really want to improve
    your own visualizations, challenge yourself to try to build better solutions,
    and you’ll learn an enormous amount along the way. And if you find yourself searching
    for the right vocabulary to describe what isn’t working, you may want to look
    through some of the resources in [Appendix D](app04.html#appendix_d), where you’ll
    find some of my favorite resources for expanding and improving my own visualization
    work.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，批评他人的作品很容易。如果你真的想改进自己的可视化，挑战自己尝试构建更好的解决方案，你将在此过程中学到大量知识。如果你发现自己在寻找正确的词汇来描述问题，你可能想看一些[附录
    D](app04.html#appendix_d) 中的资源，那里有一些我自己扩展和改进可视化工作的最喜欢的资源。
- en: '![US Unemployment Over Time.](assets/ppdw_1012.png)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![随时间变化的美国失业率。](assets/ppdw_1012.png)'
- en: Figure 10-12\. US unemployment over time (originally designed for *The Wall
    Street Journal*)
  id: totrans-201
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-12\. 美国失业率随时间变化（最初设计用于*《华尔街日报》*）
- en: Conclusion
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: 'Like programming, visualization is an applied art: the only way to get better
    at it is to *do* it. If you don’t have a project at hand to work on, start with
    a “found” visualization that you think is somehow subpar and redesign it yourself.
    You can use Python or other computational tools or just a pencil and paper—the
    point is to try to solve the problems you see in the original. Along the way,
    you’ll experience firsthand the trade-offs inherent in every design decision,
    and you’ll start building the skills needed to minimize those trade-offs in service
    of your visualization goals. Then when you’re faced with your own data visualization
    challenges, you’ll have a portfolio of prior work you can refer to when thinking
    about how best to present the data you have and make the point that you need to.'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 像编程一样，可视化是一门应用艺术：提高它的唯一方法是*去做*。如果你手头没有项目可做，从一个你认为在某种程度上不太好的“发现”可视化开始，然后重新设计它。你可以使用
    Python 或其他计算工具，或者只是一支铅笔和纸——关键是要尝试解决你在原始可视化中看到的问题。在这个过程中，你将亲身体验到每个设计决策中固有的权衡，并开始建立减少这些权衡以服务于你的可视化目标所需的技能。然后，当你面临自己的数据可视化挑战时，你将有一个可以参考的先前工作作品集，以思考如何最好地呈现你拥有的数据并阐明你需要的观点。
- en: At this point, we’ve done just about all the data wrangling with Python that
    we set out to do—but there is a world of data and visualization tools *beyond*
    Python that can be amazingly useful in supporting your data wrangling and data
    quality work right alongside it. We’ll turn to those in [Chapter 11](ch11.html#chapter11).
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经用 Python 进行了几乎所有我们想做的数据整理，但是*Python 之外*还有一整个世界的数据和可视化工具，这些工具在支持你的数据整理和数据质量工作时可以非常有用。我们将在[第
    11 章](ch11.html#chapter11)中介绍这些工具。
- en: ^([1](ch10.html#idm45143395782464-marker)) Of which a histogram is a special
    type.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](ch10.html#idm45143395782464-marker)) 其中直方图是一种特殊类型。
- en: ^([2](ch10.html#idm45143395497264-marker)) Particularly if you give yourself
    credit for [*linking verbs*](https://merriam-webster.com/dictionary/linking%20verb).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: ^([2](ch10.html#idm45143395497264-marker)) 特别是如果你给自己信心[*连接动词*](https://merriam-webster.com/dictionary/linking%20verb)。
- en: ^([3](ch10.html#idm45143395160848-marker)) Though even those few are often are
    violated publicly and frequently, e.g., Junk Chart’s [“Start at Zero Improves
    This Chart but Only Slightly”](https://junkcharts.typepad.com/junk_charts/2021/06/start-at-zero-improves-this-chart-but-only-slightly.html).
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: ^([3](ch10.html#idm45143395160848-marker)) 尽管这些几乎总是公开和频繁地被违反，例如，Junk Chart 的[“从零开始改善这个图表，但只是稍微改善了一点”](https://junkcharts.typepad.com/junk_charts/2021/06/start-at-zero-improves-this-chart-but-only-slightly.html)。
- en: ^([4](ch10.html#idm45143395804112-marker)) Since both the *pandas* and *seaborn*
    libraries rely heavily on *matplotlib*, there are many instances where significant
    customization requires using *matplotlib* features directly, as we’ll see in more
    detail in [“Elements of Eloquent Visuals”](#elementsofeloquentvisuals).
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: ^([4](ch10.html#idm45143395804112-marker)) 由于 *pandas* 和 *seaborn* 库都大量依赖于 *matplotlib*，在许多情况下，需要直接使用
    *matplotlib* 的特性进行重要的定制，我们将在[“优雅视觉元素”](#elementsofeloquentvisuals)中更详细地看到。
- en: ^([5](ch10.html#idm45143395798752-marker)) Obviously, we could simply reverse
    the order in which we originally specified the data, but I prefer to have the
    data order and the eventual visual order match up.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: ^([5](ch10.html#idm45143395798752-marker)) 显然，我们可以简单地反转我们最初指定数据的顺序，但我更喜欢数据顺序和最终可视化顺序匹配。
- en: '^([6](ch10.html#idm45143395440176-marker)) “The Hockey Stick: The Most Controversial
    Chart in Science, Explained” by Chris Mooney, [*https://theatlantic.com/technology/archive/2013/05/the-hockey-stick-the-most-controversial-chart-in-science-explained/275753*](https://theatlantic.com/technology/archive/2013/05/the-hockey-stick-the-most-controversial-chart-in-science-explained/275753);
    that said, [organizational charts](http://voices.washingtonpost.com/ezra-klein/2009/07/when_health-care_reform_stops.html)
    have also (expletive warning) [had their day](https://flickr.com/photos/robertpalmer/3743826461).'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: ^([7](ch10.html#idm45143395430576-marker)) For more, see Wong’s *The Wall Street
    Journal Guide to Information Graphics* (Norton).
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: '^([8](ch10.html#idm45143395284112-marker)) Megan Boldt et al., “Schools That
    Work: Despite Appearances, Schools Doing Better than Expected Have Traits in Common,”
    July 9, 2010, [*https://twincities.com/2010/07/09/schools-that-work-despite-appearances-schools-doing-better-than-expected-have-traits-in-common*](https://twincities.com/2010/07/09/schools-that-work-despite-appearances-schools-doing-better-than-expected-have-traits-in-common).'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: ^([9](ch10.html#idm45143394216688-marker)) Believe me, I’ve tried.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
- en: ^([10](ch10.html#idm45143394184624-marker)) You can accomplish this quickly
    in *pandas* by using the `quantile()` function and passing in the values `0.2`,
    `0.4`, `0.6`, and so on. For a more general refresher on how to calculate these
    values and what they represent, see [Example 9-3](ch09.html#ppp_loan_central_and_dist)
    in [Chapter 9](ch09.html#chapter9)
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
- en: ^([11](ch10.html#idm45143394142944-marker)) Lazaro Gamio, “How Coronavirus Cases
    Have Risen Since States Reopened,” *The New York Times*, July 9, 2020, [*https://nytimes.com/interactive/2020/07/09/us/coronavirus-cases-reopening-trends.html*](https://nytimes.com/interactive/2020/07/09/us/coronavirus-cases-reopening-trends.html).
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: ^([12](ch10.html#idm45143394140400-marker)) Anne Gearan, Derek Hawkins, and
    Siobhán O’Grady, “Coronavirus Cases Rose by Nearly 50 Percent Last Month, Led
    by States That Reopened First,” *The Washington Post*, July 1, 2020, [*https://washingtonpost.com/politics/coronavirus-cases-rose-by-nearly-50-percent-last-month-led-by-states-that-reopened-first/2020/07/01/3337f1ec-bb96-11ea-80b9-40ece9a701dc_story.html*](https://washingtonpost.com/politics/coronavirus-cases-rose-by-nearly-50-percent-last-month-led-by-states-that-reopened-first/2020/07/01/3337f1ec-bb96-11ea-80b9-40ece9a701dc_story.html).
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: ^([13](ch10.html#idm45143394137600-marker)) Mark Olalde and Nicole Hayden, “California
    COVID-19 Cases Spiked after July 4th. Family Gatherings Helped the Spread, Experts
    Say.” *USA Today*, August 2, 2020, [*https://usatoday.com/story/news/nation/2020/08/02/covid-19-spike-california-after-july-4-linked-family-gatherings/5569158002*](https://usatoday.com/story/news/nation/2020/08/02/covid-19-spike-california-after-july-4-linked-family-gatherings/5569158002).
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
