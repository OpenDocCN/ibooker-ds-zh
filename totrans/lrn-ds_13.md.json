["```py\ndogs = pd.read_csv('data/akc.csv')\ndogs\n```", "```py\n172 rows × 12 columns\n```", "```py\n`dogs``.``info``(``)`\n\n```", "```py\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 172 entries, 0 to 171\nData columns (total 12 columns):\n #   Column          Non-Null Count  Dtype  \n---  ------          --------------  -----  \n 0   breed           172 non-null    object \n 1   group           172 non-null    object \n 2   score           87 non-null     float64\n 3   longevity       135 non-null    float64\n 4   ailments        148 non-null    float64\n 5   purchase_price  146 non-null    float64\n 6   grooming        112 non-null    float64\n 7   children        112 non-null    float64\n 8   size            172 non-null    object \n 9   weight          86 non-null     float64\n 10  height          159 non-null    float64\n 11  repetition      132 non-null    object \ndtypes: float64(8), object(4)\nmemory usage: 16.2+ KB\n\n```", "```py\n`display_df``(``dogs``[``'``ailments``'``]``.``value_counts``(``)``,` `rows``=``8``)`\n\n```", "```py\nailments\n0.0    61\n1.0    42\n2.0    24\n4.0    10\n3.0     6\n5.0     3\n9.0     1\n8.0     1\nName: count, dtype: int64\n\n```", "```py\n`dogs``[``'``children``'``]``.``value_counts``(``)`\n\n```", "```py\nchildren\n1.0    67\n2.0    35\n3.0    10\nName: count, dtype: int64\n\n```", "```py\n`dogs``[``'``breed``'``]``.``value_counts``(``)`\n\n```", "```py\nbreed\nBorder Collie       1\nGreat Pyrenees      1\nEnglish Foxhound    1\n                   ..\nSaluki              1\nGiant Schnauzer     1\nXoloitzcuintli      1\nName: count, Length: 172, dtype: int64\n\n```", "```py\n`dogs``[``'``group``'``]``.``value_counts``(``)`\n\n```", "```py\ngroup\nterrier         28\nsporting        28\nworking         27\nhound           26\nherding         25\ntoy             19\nnon-sporting    19\nName: count, dtype: int64\n\n```", "```py\n`dogs``[``'``size``'``]``.``value_counts``(``)`\n\n```", "```py\nsize\nmedium    60\nsmall     58\nlarge     54\nName: count, dtype: int64\n\n```", "```py\n`dogs``[``'``repetition``'``]``.``value_counts``(``)`\n\n```", "```py\nrepetition\n25-40     39\n15-25     29\n40-80     22\n5-15      21\n80-100    11\n<5        10\nName: count, dtype: int64\n\n```", "```py\n`# Don't use this value in actual data analysis!`\n`dogs``[``\"``children``\"``]``.``mean``(``)`\n\n```", "```py\n1.4910714285714286\n\n```", "```py\n`kids` `=` `{``1``:``\"``high``\"``,` `2``:``\"``medium``\"``,` `3``:``\"``low``\"``}`\n`dogs` `=` `dogs``.``assign``(``kids``=``dogs``[``'``children``'``]``.``replace``(``kids``)``)`\n\n```", "```py\n`dogs`\n\n```", "```py\n172 rows × 13 columns\n```", "```py\n`toy_dogs` `=` `dogs``.``query``(``'``group ==` `\"``toy``\"``'``)``.``groupby``(``'``kids``'``)``.``count``(``)``.``reset_index``(``)`\n`px``.``bar``(``toy_dogs``,` `x``=``'``kids``'``,` `y``=``'``breed``'``,` `width``=``350``,` `height``=``250``,`\n       `category_orders``=``{``\"``kids``\"``:` `[``\"``low``\"``,` `\"``medium``\"``,` `\"``high``\"``]``}``,`\n       `labels``=``{``\"``kids``\"``:` `\"``Suitability for children``\"``,` `\"``breed``\"``:` `\"``count``\"``}``)`\n\n```", "```py\n`with_play` `=` `dogs``.``assign``(``play``=``(``dogs``[``\"``group``\"``]` `==` `\"``toy``\"``)` `|`\n                             `(``dogs``[``\"``group``\"``]` `==` `\"``non-sporting``\"``)``)`\n\n```", "```py\n`with_play``[``'``play``'``]``.``mean``(``)`\n\n```", "```py\n0.22093023255813954\n\n```", "```py\n`np``.``percentile``(``data``,` `method``=``'``lower``'``)`\n\n```", "```py\n`px``.``histogram``(``dogs``,` `x``=``\"``longevity``\"``,` `marginal``=``\"``rug``\"``,` `nbins``=``20``,`\n             `histnorm``=``'``percent``'``,` `width``=``350``,` `height``=``250``,`\n             `labels``=``{``'``longevity``'``:``'``Typical lifespan (yr)``'``}``)`\n\n```", "```py\n`bins` `=` `[``-``0.5``,` `0.5``,` `1.5``,` `2.5``,` `3.5``,` `9.5``]`\n`g` `=` `sns``.``histplot``(``data``=``dogs``,` `x``=``\"``ailments``\"``,` `bins``=``bins``,` `stat``=``\"``density``\"``)`\n`g``.``set``(``xlabel``=``'``Number of ailments``'``,` `ylabel``=``'``density``'``)``;`\n\n```", "```py\n`kid_counts` `=` `dogs``.``groupby``(``[``'``kids``'``]``)``.``count``(``)`\n`kid_counts` `=` `kid_counts``.``reindex``(``[``\"``high``\"``,` `\"``medium``\"``,` `\"``low``\"``]``)`\n\n```", "```py\n`px``.``scatter``(``dogs``,` `x``=``'``height``'``,` `y``=``'``weight``'``,` \n           `marginal_x``=``\"``rug``\"``,` `marginal_y``=``\"``rug``\"``,`\n           `labels``=``{``'``height``'``:``'``Height (cm)``'``,` `'``weight``'``:``'``Weight (kg)``'``}``,`\n           `width``=``350``,` `height``=``250``)`\n\n```", "```py\n`prop_table_t`\n\n```", "```py\n`fig` `=` `px``.``line``(``prop_table_t``,` `y``=``prop_table_t``.``columns``,` \n        `x``=``prop_table_t``.``index``,` `line_dash``=``'``kids``'``,`\n        `markers``=``True``,` `width``=``500``,` `height``=``250``)`\n\n`fig``.``update_layout``(`\n    `yaxis_title``=``\"``proportion``\"``,` `xaxis_title``=``\"``Size``\"``,`\n    `legend_title``=``\"``Suitability <br>for children``\"`\n`)`\n\n```", "```py\n`fig` `=` `px``.``bar``(``prop_table_t``,` `y``=``prop_table_t``.``columns``,` `x``=``prop_table_t``.``index``,`\n             `barmode``=``'``group``'``,` `width``=``500``,` `height``=``250``)`\n\n`fig``.``update_layout``(`\n    `yaxis_title``=``\"``proportion``\"``,` `xaxis_title``=``\"``Size``\"``,` \n    `legend_title``=``\"``Suitability <br>for children``\"`\n`)`\n\n```", "```py\n`rep_replacements` `=` `{`\n    `'``80-100``'``:` `'``40+``'``,` `'``40-80``'``:` `'``40+``'``,` \n    `'``<5``'``:` `'``<15``'``,` `'``5-15``'``:` `'``<15``'``,`\n`}`\n`dogs` `=` `dogs``.``assign``(`\n    `repetition``=``dogs``[``'``repetition``'``]``.``replace``(``rep_replacements``)``)`\n\n```", "```py\n`px``.``scatter``(``dogs``.``dropna``(``subset``=``[``'``repetition``'``]``)``,` `x``=``'``height``'``,` `y``=``'``longevity``'``,` \n           `symbol``=``'``repetition``'``,` `width``=``450``,` `height``=``250``,`\n           `labels``=``{``'``height``'``:``'``Height (cm)``'``,` \n                   `'``longevity``'``:``'``Typical lifespan (yr)``'``,`\n                  `'``repetition``'``:``'``Repetition``'``}``,`\n          `)`\n\n```", "```py\n`px``.``scatter``(``dogs``.``dropna``(``subset``=``[``'``repetition``'``]``)``,` \n           `x``=``'``height``'``,` `y``=``'``longevity``'``,` `trendline``=``'``ols``'``,` \n           `facet_col``=``'``repetition``'``,` `facet_col_wrap``=``2``,`\n           `labels``=``{``'``height``'``:``'``Height (cm)``'``,` \n                   `'``longevity``'``:``'``Typical lifespan (yr)``'``}``)`\n\n```", "```py\n`sfh_df`\n\n```", "```py\n521491 rows × 8 columns\n```", "```py\n`sfh_df``.``info``(``)`\n\n```", "```py\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 521491 entries, 0 to 521490\nData columns (total 8 columns):\n #   Column     Non-Null Count   Dtype         \n---  ------     --------------   -----         \n 0   city       521491 non-null  object        \n 1   zip        521462 non-null  float64       \n 2   street     521479 non-null  object        \n 3   price      521491 non-null  float64       \n 4   br         421343 non-null  float64       \n 5   lsqft      435207 non-null  float64       \n 6   bsqft      444465 non-null  float64       \n 7   timestamp  521491 non-null  datetime64[ns]\ndtypes: datetime64[ns](1), float64(5), object(2)\nmemory usage: 31.8+ MB\n\n```", "```py\n`percs` `=` `[``0``,` `25``,` `50``,` `75``,` `100``]`\n`prices` `=` `np``.``percentile``(``sfh_df``[``'``price``'``]``,` `percs``,` `method``=``'``lower``'``)`\n`pd``.``DataFrame``(``{``'``price``'``:` `prices``}``,` `index``=``percs``)`\n\n```", "```py\n`percs` `=` `[``95``,` `97``,` `98``,` `99``,` `99.5``,` `99.9``]`\n`prices` `=` `np``.``percentile``(``sfh_df``[``'``price``'``]``,` `percs``,` `method``=``'``lower``'``)`\n`pd``.``DataFrame``(``{``'``price``'``:` `prices``}``,` `index``=``percs``)`\n\n```", "```py\n`under_4m` `=` `sfh_df``[``sfh_df``[``'``price``'``]` `<` `4_000_000``]``.``copy``(``)`\n\n```", "```py\n`px``.``histogram``(``under_4m``,` `x``=``'``price``'``,` `nbins``=``50``,` `width``=``350``,` `height``=``250``,`\n             `labels``=``{``'``price``'``:``'``Sale price (USD)``'``}``)`\n\n```", "```py\n`under_4m``[``'``log_price``'``]` `=` `np``.``log10``(``under_4m``[``'``price``'``]``)`\n\n```", "```py\n`px``.``histogram``(``under_4m``,` `x``=``'``log_price``'``,` `nbins``=``50``,` `width``=``350``,` `height``=``250``,`\n             `labels``=``{``'``log_price``'``:``'``Sale price (log10 USD)``'``}``)`\n\n```", "```py\n`def` `subset``(``df``)``:`\n    `return` `df``.``loc``[``(``df``[``'``price``'``]` `<` `4_000_000``)` `&`\n                  `(``df``[``'``bsqft``'``]` `<` `12_000``)` `&` \n                  `(``df``[``'``timestamp``'``]``.``dt``.``year` `==` `2004``)``]`\n\n`sfh` `=` `sfh_df``.``pipe``(``subset``)`\n`sfh`\n\n```", "```py\n105996 rows × 8 columns\n```", "```py\n`sfh` `=` `sfh``.``assign``(``log_bsqft``=``np``.``log10``(``sfh``[``'``bsqft``'``]``)``)`\n\n```", "```py\n`fig` `=` `make_subplots``(``1``,``2``)`\n`fig``.``add_trace``(``go``.``Histogram``(``x``=``sfh``[``'``bsqft``'``]``,` `histnorm``=``'``percent``'``,` \n                           `nbinsx``=``60``)``,` `row``=``1``,` `col``=``1``)`\n`fig``.``add_trace``(``go``.``Histogram``(``x``=``sfh``[``'``log_bsqft``'``]``,` `histnorm``=``'``percent``'``,` \n                           `nbinsx``=``60``)``,` `row``=``1``,` `col``=``2``)`\n\n`fig``.``update_xaxes``(``title``=``'``Building size (ft²)``'``,` `row``=``1``,` `col``=``1``)`\n`fig``.``update_xaxes``(``title``=``'``Building size (ft², log10)``'``,` `row``=``1``,` `col``=``2``)`\n`fig``.``update_yaxes``(``title``=``\"``percent``\"``,` `row``=``1``,` `col``=``1``)`\n`fig``.``update_yaxes``(``range``=``[``0``,` `18``]``)`\n`fig``.``update_layout``(``width``=``450``,` `height``=``250``,` `showlegend``=``False``)`\n`fig`\n\n```", "```py\n`sfh` `=` `sfh``.``assign``(``log_lsqft``=``np``.``log10``(``sfh``[``'``lsqft``'``]``)``)`\n\n```", "```py\n`percs` `=` `[``0.5``,` `1``,` `1.5``,` `2``,` `2.5``,` `3``]`\n`lots` `=` `np``.``percentile``(``sfh``[``'``lsqft``'``]``.``dropna``(``)``,` `percs``,` `method``=``'``lower``'``)`\n`pd``.``DataFrame``(``{``'``lot_size``'``:` `lots``}``,` `index``=``percs``)`\n\n```", "```py\n`br_cat` `=` `sfh``[``'``br``'``]``.``value_counts``(``)``.``reset_index``(``)`\n`px``.``bar``(``br_cat``,` `x``=``\"``br``\"``,` `y``=``\"``count``\"``,` `width``=``350``,` `height``=``250``,`\n       `labels``=``{``'``br``'``:``'``Number of bedrooms``'``}``)`\n\n```", "```py\n`eight_up` `=` `sfh``.``loc``[``sfh``[``'``br``'``]` `>``=` `8``,` `'``br``'``]``.``unique``(``)`\n`sfh``[``'``new_br``'``]` `=` `sfh``[``'``br``'``]``.``replace``(``eight_up``,` `8``)`\n\n`br_cat` `=` `sfh``[``'``new_br``'``]``.``value_counts``(``)``.``reset_index``(``)`\n`px``.``bar``(``br_cat``,` `x``=``\"``new_br``\"``,` `y``=``\"``count``\"``,` `width``=``350``,` `height``=``250``,`\n       `labels``=``{``'``new_br``'``:``'``Number of bedrooms``'``}``)`\n\n```", "```py\n`def` `log_vals``(``df``)``:`\n    `return` `df``.``assign``(``log_price``=``np``.``log10``(``df``[``'``price``'``]``)``,`\n                     `log_bsqft``=``np``.``log10``(``df``[``'``bsqft``'``]``)``,`\n                     `log_lsqft``=``np``.``log10``(``df``[``'``lsqft``'``]``)``)`\n\n`def` `clip_br``(``df``)``:`\n    `eight_up` `=` `df``.``loc``[``df``[``'``br``'``]` `>``=` `8``,` `'``br``'``]``.``unique``(``)`\n    `new_br` `=` `df``[``'``br``'``]``.``replace``(``eight_up``,` `8``)`\n    `return` `df``.``assign``(``new_br``=``new_br``)`\n\n`sfh` `=` `(``sfh_df`\n `.``pipe``(``subset``)`\n `.``pipe``(``log_vals``)`\n `.``pipe``(``clip_br``)`\n`)`\n\n```", "```py\n`px``.``box``(``sfh``,` `x``=``'``new_br``'``,` `y``=``'``price``'``,` `log_y``=``True``,` `width``=``450``,` `height``=``250``,`\n      `labels``=``{``'``new_br``'``:``'``Number of bedrooms``'``,``'``price``'``:``'``Sale price (USD)``'``}``)`\n\n```", "```py\n`sfh` `=` `sfh``.``assign``(`\n    `ppsf``=``sfh``[``'``price``'``]` `/` `sfh``[``'``bsqft``'``]``,` \n    `log_ppsf``=``lambda` `df``:` `np``.``log10``(``df``[``'``ppsf``'``]``)``)`\n\n```", "```py\ndef compute_ppsf(df):\n    return df.assign(\n        ppsf=df['price'] / df['bsqft'],\n        log_ppsf=lambda df: np.log10(df['ppsf']))\n\n```", "```py\n`cities` `=` `[``'``Richmond``'``,` `'``El Cerrito``'``,` `'``Albany``'``,` `'``Berkeley``'``,`\n          `'``Walnut Creek``'``,` `'``Lamorinda``'``,` `'``Piedmont``'``]`\n\n`px``.``box``(``sfh``.``query``(``'``city in @cities``'``)``,` `x``=``'``city``'``,` `y``=``'``price``'``,` \n       `log_y``=``True``,` `width``=``450``,` `height``=``250``,` \n       `labels``=``{``'``city``'``:``'``'``,` `'``price``'``:``'``Sale price (USD)``'``}``)`\n\n```", "```py\n`four_cities` `=` `[``\"``Berkeley``\"``,` `\"``Lamorinda``\"``,` `\"``Piedmont``\"``,` `\"``Richmond``\"``]`\n`fig` `=` `px``.``scatter``(``sfh``.``query``(``\"``city in @four_cities``\"``)``,`\n    `x``=``\"``bsqft``\"``,` `y``=``\"``log_ppsf``\"``,` `facet_col``=``\"``city``\"``,` `facet_col_wrap``=``2``,`\n    `labels``=``{``'``bsqft``'``:``'``Building size (ft^2)``'``,` \n            `'``log_ppsf``'``:` `\"``Price per square foot``\"``}``,` \n    `trendline``=``\"``ols``\"``,` `trendline_color_override``=``\"``black``\"``,`\n`)`\n\n`fig``.``update_layout``(``xaxis_range``=``[``0``,` `5500``]``,` `yaxis_range``=``[``1.5``,` `3.5``]``,`\n                  `width``=``450``,` `height``=``400``)`\n`fig``.``show``(``)`\n\n```"]