<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Python for useRs"><div class="chapter" id="ch04">
<h1><span class="label">Chapter 3. </span>Python for useRs</h1>


<p class="byline">Rick J. Scavetta</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45127457612936">
<h5>A note for Early Release readers</h5>
<p>With Early Release ebooks, you get books in their earliest form—the author’s raw and unedited content as they write—so you can take advantage of these technologies long before the official release of these titles.</p>
</div></aside>

<p>Welcome, brave useR, to the wonderful world of the Pythonista! For many useRs, this brave new world may appear more varied — and thus more inconsistent and confusing — than what they’re used to in R. But don’t fret over diversity — celebrate it! In this chapter I’ll help you navigate through the rich and diverse Python jungle, highlighting various paths (workflows) that your Python-using colleagues may have taken, and which you may choose to explore later on. Meanwhile, know that you’ll eventually find the path that best suits you and your work environment, this will change over time and may not be the one outlined here. Like any good trek, use this route as a guide, not a rule book.</p>

<p>I’ll cover the essentials of the “four elements” that I mentioned in the introduction to this part: <em>Functions</em>, <em>Objects</em>, <em>Logical Expressions</em> and <em>Indexing</em>. But I’ll begin by addressing three questions.</p>

<p>Question 1: Which version and build (distribution) to use? There are a few different versions and builds of Python to choose from, in contrast to R.</p>

<p>Question 2: Which tools to use? The wide variety of IDEs, text editors and notebooks, plus the many ways of implementing virtual environments adds more choices to make.</p>

<p>Question 3: How does Python <em>the language</em> compare to R <em>the language</em>? Wrapping your head around an OOP-centric world, with a host of classes, methods, functions and keywords provides another barrier to entry.</p>

<p>I’ll address each of these questions in turn. My goal is to get you comfortable enough with reading and writing Python so that you can continue your bilingual journey in <a data-type="xref" href="part03.xhtml#p03">Part III</a> and <a data-type="xref" href="part04.xhtml#p04">Part IV</a>. I’m not setting out to provide a full-fledged, deep introduction to Python for Data Science. For that purpose, visit O’Reilly’s <em>Python for Data Analysis</em> and <em>Python Data Science Handbook</em>; this chapter will help you appreciate those books even more.</p>

<p>If you’re eager to just get on with it and start using Python, you can skip to the section on notebooks, <a data-type="xref" href="#nb">“Notebooks”</a>, and visit <a href="https://colab.research.google.com/drive/1qwgMIKc84JCYAj0zJZQSOgVZbk6nI9XX?usp=sharing">the Google Colab notebook</a> for the lesson on Python, or access this chapter’s script at our book repository on <a href="https://github.com/moderndatadesign/PyR4MDS">GitHub</a>.</p>






<section data-type="sect1" data-pdf-bookmark="Versions and builds"><div class="sect1" id="idm45127457575672">
<h1>Versions and builds</h1>

<p>Although there are a few different distributions of R, useRs mostly stick with vanilla R obtained from <a href="https://www.r-project.org/">r-project.org</a><sup><a data-type="noteref" id="idm45127457573352-marker" href="ch03.xhtml#idm45127457573352">1</a></sup>. For Python, there are at least four common Python <em>builds</em> (aka distributions) to contend with. In each case you’ll also want to consider the Python <em>version</em> as well.</p>

<p>First, you’ll notice that you likely have a system version of Python already installed. On my machine, running macOS Big Sur (<code>v11.1</code>), I see this version of Python using the following terminal command:</p>

<pre data-type="programlisting" data-code-language="bash">---
<code class="nv">$ </code>python --version
Python 2.7.16
---</pre>

<p>Interestingly, masOS also <code>python3</code> built in:</p>

<pre data-type="programlisting" data-code-language="bash">---
<code class="nv">$ </code>python3 --version
Python 3.8.6
---</pre>

<p>These are the Python installations that macOS uses internally; there’s no need to touch them.</p>

<p>Second, we have <em>vanilla</em> Python — the bare-bones, straight-from-the-source version of Python. At the time of writing this is version 3.9. Version 2.x is no longer supported and you should be using 3.x for future data science projects. Until you’re sure all packages you’ll use are compatible with the latest version, it’s a safe bet to stick to the last minor update, 3.8 in this case. Indeed, you may have multiple minor versions on your system.</p>

<p>To install the specific version you want, visit the Python <a href="https://www.python.org/">website</a> and follow the instructions on the <a href="https://www.python.org/downloads/">download page</a>.</p>

<p>Installation varies depending on your system. As such, <a href="https://docs.python.org/3.8/using/index.html">the official Python Usage and Installation guide</a> is the authoritative resource. If you encounter installation issues, a good starting point is to perform a literal web search (encase in double quotes) for the generic part of the error message.</p>

<p><a data-type="xref" href="#install_python">Table 3-1</a> provides other sources, but you’re well-advised to just go to the source<sup><a data-type="noteref" id="idm45127455968680-marker" href="ch03.xhtml#idm45127455968680">2</a></sup>.</p>
<table id="install_python">
<caption><span class="label">Table 3-1. </span>Installing Python</caption>
<thead>
<tr>
<th>Platform</th>
<th>Site</th>
<th>Alternative</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Linux</p></td>
<td><p><code>python.org</code></p></td>
<td><p>Python 3 is already installed.</p></td>
</tr>
<tr>
<td><p>macOS</p></td>
<td><p><code>python.org</code></p></td>
<td><p>Use  <code>brew install python3</code>  in the terminal.</p></td>
</tr>
<tr>
<td><p>Windows</p></td>
<td><p><code>python.org</code></p></td>
<td><p>Install Python from the Windows Store.</p></td>
</tr>
</tbody>
</table>

<p>Third, there are two common <code>Conda</code> builds: <code>Anaconda</code> (aka <code>Conda</code>) and <code>miniconda</code>. <code>Conda</code> offers package, dependency and environment management for several programming languages, including Python and R, although it is seldomly used for R. These open source builds include Python, a suite of packages useful for data science and a collection of IDEs (including RStudio). Anaconda comes in a free individual version plus various commercial versions. As the name suggests, <a href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a> is a minimal installer. We’ll see <code>miniconda</code> make a reappearance in the last part of the book.</p>

<p>The Anaconda <a href="https://www.anaconda.com/products/individual#Downloads">website</a> has detailed instructions for installation. You’ll notice that Anaconda may not come packaged with the latest version of Python. For example, at the time of writing, Anaconda comes packaged with Python 3.8, not 3.9. So this provides some justification for our preference of vanilla Python 3.8, as mentioned above. Anaconda is a popular build, but for our purposes we’ll stick with vanilla Python to avoid the extra bells &amp; whistles that, at this point, would only serve to distract us. Thus, I won’t consider this option further but will mention some significant differences as needed if you choose to go down this path.</p>

<p>Fourth, you may decide to not use a local Python installation and instead use the popular online version of Python provided by the <a href="https://colab.research.google.com/">Google Colab</a> Notebooks interface<sup><a data-type="noteref" id="idm45127456453464-marker" href="ch03.xhtml#idm45127456453464">3</a></sup>. There are other online Notebook tools, but it’s beyond the scope of this book to detail all of them. Notebooks are akin to RMarkdown documents but JSON-based. We’ll discuss them in more detail later on.</p>

<p>I bet you can already guess that this early-stage diversity can result in downstream confusion when installation-specific issues arise. Moving forward, we’ll assume you have a local or cloud-based installation of Python ready to go.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Standard tooling"><div class="sect1" id="idm45127457575080">
<h1>Standard tooling</h1>

<p>Similar to R, there are many ways to access Python. Common methods include: on the command line, IDEs, cloud-based IDEs, text editors and Notebooks. For simplicity, I’m not going to focus on executing Python on the command line. If you’re familiar with executing scripts on the command line, this is familiar territory. If not, you’ll cross that bridge when you come to it.</p>

<p>IDEs include JupyterLab, Spyder, PyCharm and our beloved RStudio. Cloud-Native IDEs include AWS Cloud9. These are all variations on a theme, and in my experience are not typically favoured by Pythonistas, although there is a trend towards using cloud-based tools. It may sound strange that IDEs are not that popular, why not use an IDE if you have a great one available? I think the answer is two-fold. First, no IDE managed to position itself as the dominant, <em>de facto</em>, choice among Pythonistas like RStudio has among useRs. Second, because Python use cases are so varied, including often being executed on the command line itself, coding with IDEs just wasn’t attractive for many Pythonistas, especially if they came from a coding background and felt comfortable without an IDE. For me, this feeds a bit into a narrative that says Python is both more difficult and better than R. Both are incorrect! Sorry :/ Nonetheless, you may be tempted to begin using Python with a comfortable-looking IDE. Here, we make the argument that text editors will serve you better in the long run. We’ll get back to RStudio in the last part of the book as we bring Python and R together in a single script. For now, try to resist the urge to default to an IDE but watch for developments in cloud-platforms that may direct future trends.</p>








<section data-type="sect2" data-pdf-bookmark="Text editors"><div class="sect2" id="idm45127456608040">
<h2>Text editors</h2>

<p>Text editors are the most common and seemly preferred tool for composing pure Python scripts. There are a host of fantastic text editors to choose from, waxing and waning in popularity year-on-year. <a href="https://www.sublimetext.com/">Sublime</a>, <a href="https://atom.io/">Atom</a>, <a href="https://code.visualstudio.com/">Visual Studio Code</a> (VS Code) and even the ur-editors <a href="https://www.vim.org/">vim</a> and <a href="https://www.gnu.org/software/emacs/">emacs</a>, among many others, are in common use. Nonetheless, VS Code, an open-source editor developed and strongly supported by Microsoft has emerged in the past few years as the top choice. A marketplace for extensions means that the editor provides strong and easy support for a variety of languages, including Python and R<sup><a data-type="noteref" id="idm45127454706696-marker" href="ch03.xhtml#idm45127454706696">4</a></sup>. Thus, we’ll focus on VS Code. Your first exercise is to obtain and install <a href="https://code.visualstudio.com/">VS code</a>.</p>

<p>The first time you open VS Code, you’ll be greeted with the welcome screen shown in <a data-type="xref" href="#vsc_0">Figure 3-1</a>).</p>

<figure><div id="vsc_0" class="figure">
<img src="Images/prds_0301.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-1. </span>The VS Code welcome screen.</h6>
</div></figure>

<p>When you click on the blank document icon in the upper left, you’ll be requested to open a folder or clone a git repository (from GitHub, for example). We’ll choose an empty folder called <code>Intro_python</code> that we’ve already created. Opening this folder is like opening a project in RStudio. Here, we can click on the new document icon and we’ll be tasked with giving the new document a name. Call the file <code>helloworld.py</code>, like in <a data-type="xref" href="#vsc_2">Figure 3-2</a>.</p>

<figure><div id="vsc_2" class="figure">
<img src="Images/prds_0302.png" alt="" width="2216" height="1570"/>
<h6><span class="label">Figure 3-2. </span>Our first python script.</h6>
</div></figure>

<p>Because of the file extension, VS Code has automatically detected that you want to use a Python interpreter for this document. VS Code, like many other text editors, can execute code directly from the document if it knows which interpreter to use. Notice in <a data-type="xref" href="#vsc_2">Figure 3-2</a> (lower-right) that VS Code will automatically ask you to install the appropriate extensions for Python since we don’t have them installed (and that the footer bar has turned from purple to blue, noting the use of a Python interpreter). You are encouraged to visit the marketplace and consider other extensions on your own, but less is more, mostly. In <a data-type="xref" href="#vsc_3">Figure 3-3</a> the extension homepage is displayed as the package installs. Note that this extension is developed and maintained directly by Microsoft, like VS Code itself, so we’re in good hands<sup><a data-type="noteref" id="idm45127457567032-marker" href="ch03.xhtml#idm45127457567032">5</a></sup>.</p>

<figure><div id="vsc_3" class="figure">
<img src="Images/prds_0303.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-3. </span>Installing the VS Code Python extension.</h6>
</div></figure>

<p>After the extension is installed, you’ll be greeted with the extension welcome page, displayed in <a data-type="xref" href="#vsc_4">Figure 3-4</a>. The blue footer now notes the actual Python version that you’re using. Remember that you may have many different versions installed on your system, here I’m using <code>v3.8.6</code>.</p>

<figure><div id="vsc_4" class="figure">
<img src="Images/prds_0304.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-4. </span>The VS Code Python extension welcome screen.</h6>
</div></figure>

<p>The first item on the extension’s welcome page is “Create a Jupyter Notebook”. We’ll get to that soon enough; for now, it’s worth noting that we can use VS Code for both scripts and Notebooks. Also note that the first bullet point in that item tells us that to open a Notebook we should <em>run</em> a command in the Command Palette, which you can access by the keyboard shortcut <code>shift + cmd + P</code> on a Mac (or <code>shift + ctrl + P</code> on a PC)<sup><a data-type="noteref" id="idm45127457564296-marker" href="ch03.xhtml#idm45127457564296">6</a></sup>. Return back to the <code>helloworld.py</code> file and use this keyboard shortcut to open the Command Palette. This is where you’ll execute all variety of commands to make your life as a Pythonista easier. The Command Palette is a relatively new feature in RStudio but has been a standard way to navigate text editors for quite a while. Each extension you install from the marketplace will add more commands that you can access here. Our first command will be to <code>Create New Integrated Terminal (in Active Workspace)</code>. You can get this by simply beginning to type the command and then let auto-complete work its magic. Make sure you choose the <code>(in Active Workspace)</code> option. Remember, this is like an RStudio project, so we want to remain in our Active Workspace.</p>

<p>You’ll notice that this opens a new terminal pane at the bottom of the screen (<a data-type="xref" href="#vsc_5">Figure 3-5</a>). OK, let’s admit that this is starting to look more and more like an IDE, but let’s not get too excited!</p>

<figure><div id="vsc_5" class="figure">
<img src="Images/prds_0305.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-5. </span>VS Code with the Command Panel and an integrated terminal pane.</h6>
</div></figure>

<p>So by now we’ve settled on a text editor and we have our first (empty) Python script. It looks like we’re ready to go — but not quite! We must address two crucial factors that you’ll encounter each time you want to create a new Python project:</p>

<ul>
<li>
<p>Virtual (development) environments, and</p>
</li>
<li>
<p>Installing packages</p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Virtual environments"><div class="sect1" id="pyvenv">
<h1>Virtual environments</h1>

<p>Most useRs are accustomed to using RStudio projects, which keep the working directory tied to the project directory. These are convenient, in that we don’t need to hard-code paths and are encouraged to keep all data and scripts in one directory. You’ll already have that when opening an entire folder in a VS Code workspace.</p>

<p>A major downside of R projects and VS Code workspaces is that they don’t provide portable, reproducible development environments! Many useRs have a single, global installation of each package (see <code>.libPaths()</code>) and rarely specify a specific R version.</p>

<p>Now, dear useR, let’s be honest with each other: if you haven’t already, at some point you’ll encounter the problem of package version conflicts. You’ve updated a package globally and now an old script is defunct because it’s calling a deprecated function, or using a function’s default arguments that have since changed, or for any number of other reasons due to package version conflicts. This is a surprisingly common occurrence in R and is a truly dismal practice when working over a long period of time or collaboratively. There have been many attempts to implement some kind of controlled development environment in R over the years. The most recent, and hopefully the solution that will finally stick, is <code>renv</code>. If you haven’t kept up with developments there, please visitthe <a href="https://rstudio.github.io/renv/articles/renv.html">package website</a> from RStudio.</p>

<p>Pythonistas have long used virtual environments to maintain future compatibility of their projects, a sign of the programming-first approach of Python’s origins. Here, a virtual environment is simply a hidden sub-directory within a project folder, called e.g. <code>.venv</code>. The <code>.</code> is what makes it hidden. You have many hidden files and directories all over your computer and for the most part they’re hidden because you have no business sticking your fingers in there. Inside <code>.venv</code> you’ll find the packages used in <em>this</em> specific project, and information about which Python build <em>this</em> project uses. Since each project now contains a virtual environment with all the packages and the appropriate package versions (!), you’re guaranteed that the project will continue working indefinitely, so long as that virtual environment exists. We can visualize the potential dependency issues between different machines as in <a data-type="xref" href="#venv">Figure 3-6</a>, which highlights the benefit of having a single “source of truth” regarding package versions.</p>

<figure><div id="venv" class="figure">
<img src="Images/prds_0306.png" alt="" width="6110" height="2618"/>
<h6><span class="label">Figure 3-6. </span>Sources of conflict in Python environments.</h6>
</div></figure>

<p>Like everything in Python there are many ways to make a virtual environment. We can use the <code>venv</code> or <code>virtualenv</code> packages. If you’re using Anaconda you’ll use the <code>conda</code> alternative which we won’t cover here. There are some subtle differences between <code>venv</code> and <code>virtualenv</code>, but at this point in the story they are irrelevant; let’s just stick with <code>venv</code>. In your new terminal window execute one of the commands in <a data-type="xref" href="#venv_create">Table 3-2</a> depending on your platform, as I’ve done in <a data-type="xref" href="#vsc_6">Figure 3-7</a>.</p>
<table id="venv_create">
<caption><span class="label">Table 3-2. </span>Creating (and activating) a virtual environment with venv.</caption>
<thead>
<tr>
<th>Platform</th>
<th>Create</th>
<th>Activate (prefer VS Code auto-activate)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>macOS X  &amp; Linux</p></td>
<td><p><code>python3 -m venv .venv</code></p></td>
<td><p><code>source .venv/bin/activate</code></p></td>
</tr>
<tr>
<td><p>Windows</p></td>
<td><p><code>py -3 -m venv .venv</code></p></td>
<td><p><code>.venv\scripts\activate</code></p></td>
</tr>
</tbody>
</table>

<figure><div id="vsc_6" class="figure">
<img src="Images/prds_0307.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-7. </span>Creating a new virtual environment in our active workspace.</h6>
</div></figure>

<p>After <em>creating</em> the virtual environment, you must <em>activate</em> it. The terminal commands for this are given in <a data-type="xref" href="#venv_create">Table 3-2</a> but it’s more convenient to let VS Code do what it does best. It will automatically detect your new virtual environment and ask if you want to activate it (see <a data-type="xref" href="#vsc_7">Figure 3-8</a>). Go for it! Notice that the Python interpreter in the lower left will also explicitly mention <code>(.venv): venv</code> (<a data-type="xref" href="#vsc_9">Figure 3-9</a>).</p>

<figure><div id="vsc_7" class="figure">
<img src="Images/prds_0308.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-8. </span>Activating a virtual environment in VS Code.</h6>
</div></figure>

<p>If you are asked to install the Linter pylint, go ahead and confirm that also. This is how VS Code will be able to spot errors in your scripts.</p>

<p>We’ll get to package installation in a second, for now let’s try to execute our first “Hello, world!” command. Return to your empty <code>helloworld.py</code> file and type:</p>

<pre data-type="programlisting">#%%
print('Hello, world!')</pre>

<p>Actually the print is not necessary, but it makes what we’re trying to do explicit. That looks a lot like a simple R function, right? The <code>#%%</code> is also not necessary but it’s a lovely feature of the Python extension in VS Code, and is highly recommended! Typing <code>#%%</code> allows us to break up our long script into executable chunks. It’s akin to R Markdown chunks, but much simpler and used in plain Python scripts. To execute the command, press <code>shift + enter</code> or click on the <code>run cell</code> text, as seen in <a data-type="xref" href="#vsc_9">Figure 3-9</a>.</p>

<figure><div id="vsc_9" class="figure">
<img src="Images/prds_0309.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-9. </span>Executing your first code in Python.</h6>
</div></figure>

<p>You’ll be promptly asked to install the ipyKernel, fig. <a data-type="xref" href="#vsc_9">Figure 3-9</a> (lower-right). Confirm that, and you’ll get the output present in the new upper-right pane, visible in <a data-type="xref" href="#vsc_11">Figure 3-10</a>.</p>

<figure><div id="vsc_11" class="figure">
<img src="Images/prds_0310.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-10. </span>Viewing command output in the interactive python viewer.</h6>
</div></figure>

<p>Alright, <em>now</em> we’re in business. That seems like a lot of work, but once you do it a couple times you’ll develop a routine and get the hang of it!</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Installing packages"><div class="sect1" id="idm45127454029592">
<h1>Installing packages</h1>

<p>So far in the story we have installed some version of Python and accessed a workspace, like an R project, from within VS Code. We’ve also created a virtual environment, which we’re now ready to populate with our favorite data science packages. If you took the <code>conda</code> route, you’ll have used different commands but you’ll also be set to go with the most common data science packages pre-installed. That sounds really nice, but you may find that when you need to collaborate with other Python developers, e.g. data engineers or system administrators, they probably won’t be using Anaconda. We feel that there’s also something to be said for getting to the heart of Python without all the bells and whistles that Anaconda provides. Thus we’ve gone the vanilla route.</p>

<p>Before we get into packages, let’s review some necessary terminology. In R, a library is a collection of individual packages. The same holds true for Python, but the use of <em>library</em> and <em>package</em> is not as strict. e.g. <code>pandas</code>, the package which provides the <code>DataFrame</code> class of objects, is referred to as both a library and a package on the <code>pandas</code> website itself. This mixture of the terms is common among Pythonistas, so if you’re a stickler for names, don’t let it confuse or bother you. However, modules are useful to note. A package is a collection of modules. This is useful to know since we can load an entire package or just a specific module therein. Thus, in general: library &gt; package &gt; module.</p>

<p>In R, you’d install packages from CRAN with the <code>install.packages()</code> function from within R itself. In Python, there are two equivalents of CRAN, PyPI (the Python Package Installer) for when using vanilla Python and <code>conda</code>, for when using Anaconda or miniconda (we’ll also see how to install packages in Google Colab directly in the online Notebook later on). To install packages from PyPI using vanilla Python, you’ll have to execute a command in the terminal. Recall that we still have our active terminal window in VS Code open from earlier. Execute the command <code>pip install matplotlib</code> in the terminal to install the <code>matplotlib</code> package in your virtual environment, as depicted in <a data-type="xref" href="#vsc_12">Figure 3-11</a>. <code>pip</code> is the package installer for Python and also comes in various versions.</p>

<figure><div id="vsc_12" class="figure">
<img src="Images/prds_0311.png" alt="" width="2304" height="1658"/>
<h6><span class="label">Figure 3-11. </span>Installing a package into a virtual environment using the command line.</h6>
</div></figure>

<p>Packages that you’ll install in practically every virtual environment include <code>numpy</code>, <code>pandas</code>, <code>matplotlib</code>, <code>seaborn</code> ad <code>scipy</code>. You won’t have to install all of them all the time since their package dependencies will take care of that. If they are already installed pip will tell you and will not install anything further. The most common error messages you’ll encounter here are when your package version is incompatible with your Python version. For this, you can either use a different Python kernel<sup><a data-type="noteref" id="idm45127453933224-marker" href="ch03.xhtml#idm45127453933224">7</a></sup> for your project, or specify the exact package version you want to install. Like in R, you just need to install the package once, but you’ll need to <em>import</em> it every time (i.e. <em>initialize</em> it) you activate your environment (see above). It seems convenient that package installation is done in the terminal, separate from importing in the script. You’ve probably see many stray <code>install.packages()</code> functions in R scripts, which is kind of annoying.</p>

<p>There are two more important points I want to mention. First, check all the packages installed in your environment, and their versions, in the terminal with:</p>

<pre data-type="programlisting" data-code-language="bash">---
<code class="nv">$ </code>pip freeze
---</pre>

<p>Second, pipe this output to a file called <code>requirements.txt</code> by executing the following command:</p>

<pre data-type="programlisting" data-code-language="bash">---
<code class="nv">$ </code>pip freeze &gt; requirements.txt
---</pre>

<p>Other users can now use <code>requirements.txt</code> to install all the necessary packages by using the following command:</p>

<pre data-type="programlisting" data-code-language="bash">---
<code class="nv">$ </code>pip install -r requirements.txt
---</pre>








<section data-type="sect2" data-pdf-bookmark="Notebooks"><div class="sect2" id="nb">
<h2>Notebooks</h2>

<p>If you’ve followed the tutorial thus far you’re ready to proceed to the third question and begin exploring the Python language. Nonetheless, it’s worthwhile reviewing Notebooks, so read on. If you had a hard time getting Python set up locally, don’t fret! Jupyter Notebooks is where you can take a deep breath, set your installation issues aside and jump in afresh.</p>

<p>Jupyter Notebooks are built on the backbone of IPython, which originated in 2001. Jupyter, which stands for JUlia, PYThon and R, now accommodates dozens of programming languages and can be used in the JupyterLab IDE or straight-up Notebooks in Jupyter. Notebooks allow you to write text using markdown, add code chunks and see the in-line output. It sounds a lot like R Markdown! Well, yes and no. Under the hood an R Markdown is a flat text file that gets rendered as an HTML, doc or pdf. Notebooks are exclusively JSON-based HTML and can natively handle interactive components. For useRs, this is kind of like an interactive R Markdown with a <code>shiny</code> run-time by default. This means that you don’t compose a Notebook as a flat text file, which is an important distinction when considering editing potential.</p>

<p>Coding in Python often consists of pure notebooks. For example, if you venture into cloud platforms that work with big data for ML, like AWS Sagemaker, Google AI Platform or Azure ML Studio, you’ll start with notebooks. As we’ve already seen, they’re supported by VS Code. Other online versions include Kaggle competitions and published Jupyter Notebooks. Another variety of online notebooks is found in the Google Colab service. This allows you to produce and distribute online notebooks with a Python backend and is what we’ll use for exploring notebooks.</p>

<p>To get familiar working with Notebooks, use this online tutorial from Jupyter <a href="https://jupyter.org/try">here</a>. Just click on the <a href="https://notebooks.gesis.org/binder/jupyter/user/ipython-ipython-in-depth-c0k4jcir/notebooks/binder/Index.ipynb">Notebook Basics panel</a> and pay particular attention to the keyboard shortcuts.</p>

<p>You you want to follow along, you can find the Google Colab Notebook for this chapter <a href="https://colab.research.google.com/drive/1qwgMIKc84JCYAj0zJZQSOgVZbk6nI9XX?usp=sharing">here</a>.</p>

<figure><div id="GC_0" class="figure">
<img src="Images/prds_0312.png" alt="" width="3194" height="2358"/>
<h6><span class="label">Figure 3-12. </span>Examples for getting started with Python Notebooks in using Google Colab.</h6>
</div></figure>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="How does Python, the language, compare to R?"><div class="sect1" id="idm45127453948040">
<h1>How does Python, the language, compare to R?</h1>

<p>By now you should have followed one of two paths. If you have installed Python locally, you should have:</p>
<ol>
<li>
<p>A project directory where you’ll store your data and script files.</p>
</li>
<li>
<p>A virtual environment set up within that directory.</p>
</li>
<li>
<p>The typical packages for data science installed in that virtual environment.</p>
</li>

</ol>

<p>If you’ve decided to go the Google Colab route, you should have accessed this chapter’s Notebook (see above).</p>

<p>Now it’s time to start our project by importing the packages we’ll use. Here, we’ll see again that there are a variety of ways of doing this, but most are standard. Let’s take a look. In the book’s <a href="https://github.com/moderndatadesign/PyR4MDS">repository</a>, you’ll find a practice script with the following commands, or you can follow along in the Google Colab Notebook.</p>

<p>As we go through these commands we’ll introduce more new terminology — keywords, methods &amp; attributes — and discuss what they are in the context of Python.</p>

<p>First, we can import an entire package:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">math</code> <code class="c1"># Functions beyond the basic maths</code></pre>

<p>This allows us to use functions from the <code>math</code> package. The <code>math</code> package is already installed, so we didn’t need to use <code>pip</code>, but we do need to import it.</p>

<p>This is first time we encounter a common and important aspect of the Python language: <em>keywords</em>, which behave like R’s reserved word but are more numerous. Right now there are 35 keywords in Python that can be placed in distinct groups (See Appendix A). Here <code>import</code> is an <em>import keyword</em>. As a useR accustomed to functional programming, you’d use <code>library(math)</code> in R. So, in this case, you can think of keywords as shortcuts to functions, which in many cases they are. That’s just like operators in R (think <code>&lt;-</code>, <code>+</code>, <code>==</code>, <code>&amp;</code>, etc.), which are just shortcuts to functions under-the-hood. they’re not written in the classic function format, but they could be.</p>

<p>In short, keywords are reserved words that have very specific meanings. In this case, <code>import</code> stands in for a function to <em>import</em> all the functions from the <code>math</code> package. Many keywords act like this, but not all. We’ll see some examples in a second.</p>

<p>But first, now that we have the functions from the math package, let’s try this:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">math</code><code class="o">.</code><code class="n">log</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code></pre>

<p>Here we see that the <code>.</code> has a specific meaning: Inside the <code>math</code> package, access the <code>log()</code> function. The two arguments are the digit and base. So you can see why the R Tidyverse tends to use <code>_</code> instead of <code>.</code> notation and why the prevalence of a meaningless <code>.</code> in many R functions frustrates many users coming from OOP-centric languages.</p>

<p>Second, we can import an entire package and give it a specific, typically standardized, <em>alias</em>.</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">pandas</code> <code class="kn">as</code> <code class="nn">pd</code>      <code class="c1"># For DataFrame and handling</code>
<code class="kn">import</code> <code class="nn">numpy</code> <code class="kn">as</code> <code class="nn">np</code>       <code class="c1"># Array and numerical processing</code>
<code class="kn">import</code> <code class="nn">seaborn</code> <code class="kn">as</code> <code class="nn">sns</code>    <code class="c1"># High level Plotting</code></pre>

<p>There’s our second keyword, <code>as</code>. Notice that it’s not really acting as a stand in for a function unless we recall that <code>&lt;-</code> is also a function. If we stretch our imagination we can imagine this is like the following in R:</p>

<pre data-type="programlisting" data-code-language="r"><code class="n">dp</code> <code class="o">&lt;-</code> <code class="nf">library</code><code class="p">(</code><code class="n">dplyr</code><code class="p">)</code>       <code class="c1"># nonsense, but just as an idea</code></pre>

<p>UseRs wouldn’t ever do that, but it’s the closest analogous command<sup><a data-type="noteref" id="idm45127453751608-marker" href="ch03.xhtml#idm45127453751608">8</a></sup>. The <code>as</code> keyword is always used with <code>import</code> to provide a convenient <em>alias</em> for accessing a package or module’s functions<sup><a data-type="noteref" id="idm45127453749672-marker" href="ch03.xhtml#idm45127453749672">9</a></sup>. Thus, it’s an explicit way to call the exact function we want. Execute this function to import the data set for future work:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">read_csv</code><code class="p">(</code><code class="s1">'ch03-py4r/data/plant_growth.csv'</code><code class="p">)</code></pre>

<p>Notice the <code>.</code> again? The above command is equivalent to this command in R:</p>

<pre data-type="programlisting" data-code-language="r"><code class="n">plant_growth</code> <code class="o">&lt;-</code> <code class="n">readr</code><code class="o">::</code><code class="nf">read_csv</code><code class="p">(</code><code class="s">"ch03-py4r/data/plant_growth.csv"</code><code class="p">)</code></pre>

<p>Third, we can import a specific <em>module</em> from a package:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">scipy</code> <code class="kn">import</code> <code class="n">stats</code> <code class="c1"># e.g. for t-test function</code></pre>

<p>There’s our third keyword, <code>from</code>. It lets us go inside the <code>scipy</code> package and <em>import</em> only the <code>stats</code> module.</p>

<p>Fourth, we can import a specific module from a package, also giving it a specific, typically standardized, alias.</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">import</code> <code class="nn">matplotlib.pyplot</code> <code class="kn">as</code> <code class="nn">plt</code> <code class="c1"># Low level plotting</code>
<code class="kn">import</code> <code class="nn">statsmodels.api</code> <code class="kn">as</code> <code class="nn">sm</code>    <code class="c1"># Modeling, e.g. ANOVA</code></pre>

<p>Finally, we can also import only a specific function from a package:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">statsmodels.formula.api</code> <code class="kn">import</code> <code class="n">ols</code> <code class="c1"># For ordinary least squares regression</code></pre>








<section data-type="sect2" data-pdf-bookmark="Import a dataset"><div class="sect2" id="idm45127453681208">
<h2>Import a dataset</h2>

<p>Above, we saw how to import a data set using a function from the <code>pandas</code> package:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">read_csv</code><code class="p">(</code><code class="s1">'ch03-py4r/data/plant_growth.csv'</code><code class="p">)</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Examine the data"><div class="sect2" id="idm45127453593752">
<h2>Examine the data</h2>

<p>It’s always good practice to look at our data before we start working on it. In R we’d use things like <code>summary()</code> and <code>str()</code>, or <code>glimpse()</code> if we had <code>dplyr</code> initialized. Let’s see how that works in Python.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="o">.</code><code class="n">info</code><code class="p">()</code>

<code class="o">&lt;</code><code class="k">class</code> <code class="err">'</code><code class="nc">pandas</code><code class="o">.</code><code class="n">core</code><code class="o">.</code><code class="n">frame</code><code class="o">.</code><code class="n">DataFrame</code><code class="s1">'&gt;</code>
<code class="n">RangeIndex</code><code class="p">:</code> <code class="mi">30</code> <code class="n">entries</code><code class="p">,</code> <code class="mi">0</code> <code class="n">to</code> <code class="mi">29</code>
<code class="n">Data</code> <code class="n">columns</code> <code class="p">(</code><code class="n">total</code> <code class="mi">2</code> <code class="n">columns</code><code class="p">):</code>
 <code class="c1">#   Column  Non-Null Count  Dtype</code>
<code class="o">---</code>  <code class="o">------</code>  <code class="o">--------------</code>  <code class="o">-----</code>
 <code class="mi">0</code>   <code class="n">weight</code>  <code class="mi">30</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code>     <code class="n">float64</code>
 <code class="mi">1</code>   <code class="n">group</code>   <code class="mi">30</code> <code class="n">non</code><code class="o">-</code><code class="n">null</code>     <code class="nb">object</code>
<code class="n">dtypes</code><code class="p">:</code> <code class="n">float64</code><code class="p">(</code><code class="mi">1</code><code class="p">),</code> <code class="nb">object</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>
<code class="n">memory</code> <code class="n">usage</code><code class="p">:</code> <code class="mf">608.0</code><code class="o">+</code> <code class="nb">bytes</code></pre>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="o">.</code><code class="n">describe</code><code class="p">()</code>

        <code class="n">weight</code>
<code class="n">count</code>	<code class="mf">30.000000</code>
 <code class="n">mean</code>	<code class="mf">5.073000</code>
  <code class="n">std</code>	<code class="mf">0.701192</code>
  <code class="nb">min</code>	<code class="mf">3.590000</code>
  <code class="mi">25</code><code class="o">%</code>	<code class="mf">4.550000</code>
  <code class="mi">50</code><code class="o">%</code>	<code class="mf">5.155000</code>
  <code class="mi">75</code><code class="o">%</code>	<code class="mf">5.530000</code>
  <code class="nb">max</code>	<code class="mf">6.310000</code></pre>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="o">.</code><code class="n">head</code><code class="p">()</code>

  <code class="n">weight</code>	<code class="n">group</code>
<code class="mi">0</code>	<code class="mf">4.17</code>	<code class="n">ctrl</code>
<code class="mi">1</code>	<code class="mf">5.58</code>	<code class="n">ctrl</code>
<code class="mi">2</code>	<code class="mf">5.18</code>	<code class="n">ctrl</code>
<code class="mi">3</code>	<code class="mf">6.11</code>	<code class="n">ctrl</code>
<code class="mi">4</code>	<code class="mf">4.50</code>	<code class="n">ctrl</code></pre>

<p>What the what?? This is the first time we’ve encountered this nomenclature, and there’s that ever-present dot notation again! The functions <code>info()</code>, <code>describe()</code> and <code>head()</code> are <em>methods</em> of the object <code>plant_growth</code>. A method is a function that is called by an object. Like other functions we can also provide specific arguments, although in these cases we’ll stick with the default.</p>

<p>Note, in particular the output from the <code>info()</code> method. Here, we see for the first time that indexing begins as 0 in Python, as is the case with many programming languages —  and why shouldn’t it!? This is an important aspect of Pythonic programming. We’ll see the consequences of this later on when we get to indexing.</p>

<p>The output from <code>.info()</code> also tells us that we have a <code>pandas DataFrame</code>. We’ll explore different object classes soon.</p>

<p>How about looking at the shape (i.e. dimensions) and column names of the <code>plant_growth</code> object?</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="o">.</code><code class="n">shape</code>

<code class="p">(</code><code class="mi">30</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code></pre>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="o">.</code><code class="n">columns</code>

<code class="n">Index</code><code class="p">([</code><code class="s1">'weight'</code><code class="p">,</code> <code class="s1">'group'</code><code class="p">],</code> <code class="n">dtype</code><code class="o">=</code><code class="s1">'object'</code><code class="p">)</code></pre>

<p>In this case, we are calling <em>attributes</em> of the object, they don’t receive any brackets. So here we see that any given object can call permissible methods and attributes, according to its class. You’ll know this from R, when the class of an object allows it to be used in specific functions for which there are methods available for it. Under the hood the same magic is happening. R is function-first, OOP-second. It’s there, just we don’t need to worry about it <em>as much</em> in functional programming. To give you an idea of how this works in R, consider a built-in data set, <code>sunspots</code>. It’s a <code>ts</code> class object (i.e. time-series).</p>

<pre data-type="programlisting" data-code-language="r"><code class="c1"># in R</code>
<code class="nf">class</code><code class="p">(</code><code class="n">sunspots</code><code class="p">)</code>
<code class="p">[</code><code class="m">1</code><code class="p">]</code> <code class="s">"ts"</code>
<code class="nf">plot</code><code class="p">(</code><code class="n">sunspots</code><code class="p">)</code></pre>

<p>You can find the methods for the plot function using:</p>

<pre data-type="programlisting" data-code-language="r"><code class="c1"># in R</code>
<code class="nf">methods</code><code class="p">(</code><code class="n">plot</code><code class="p">)</code></pre>

<p>There, you’ll see the <code>plot.ts()</code> method, which is what is actually called when you provide a <code>ts</code> class object to the <code>plot()</code> function.</p>

<p>Finally, you may miss being able to actually <em>see</em> that data set like we can with the RStudio view option. Not to worry! You can click on the table icon in the interactive Python kernel and see everything in your environment. If you click on the <code>DataFrame</code>, it will open up a view for you to examine it.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Data Structures &amp; Descriptive Statistics"><div class="sect1" id="idm45127453915192">
<h1>Data Structures &amp; Descriptive Statistics</h1>

<p>Alright, now that we’ve come to grips with methods and attributes, let’s take a look at how you would generate some descriptive statistics. A <code>pandas DataFrame</code> is very similar to an R <code>data.frame</code> or <code>tbl</code>. It’s a 2-dimensional table where each column is a <code>Series</code>, like how columns are vectors of the same length in R data frames. Just like a <code>DataFrame</code> itself, a <code>Series</code> also has methods and attributes. Recall that the <code>group</code> column is categorical. By now, this command should make sense to you:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="p">[</code><code class="s1">'group'</code><code class="p">]</code><code class="o">.</code><code class="n">value_counts</code><code class="p">()</code>

<code class="n">trt2</code>    <code class="mi">10</code>
<code class="n">trt1</code>    <code class="mi">10</code>
<code class="n">ctrl</code>    <code class="mi">10</code>
<code class="n">Name</code><code class="p">:</code> <code class="n">group</code><code class="p">,</code> <code class="n">dtype</code><code class="p">:</code> <code class="n">int64</code></pre>

<p>The <code>[]</code> will be familiar to you from R, they index according to the name of a column. The <code>.</code> then takes this single column and calls a method, <code>.value_counts()</code>, which in this case counts the number of observations for each value.</p>

<p>How about this:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">np</code><code class="o">.</code><code class="n">mean</code><code class="p">(</code><code class="n">plant_growth</code><code class="p">[</code><code class="s1">'weight'</code><code class="p">])</code></pre>

<p><code>np</code> says we’re going to use a function from the <code>numpy</code> package we imported earlier. Inside that function, we provide numerical values, the <code>weight</code> Series of the <code>plant_growth</code> DataFrame.</p>

<p>How about some summary statistics. Can you guess what this method will do?</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># summary statistics</code>
<code class="n">plant_growth</code><code class="o">.</code><code class="n">groupby</code><code class="p">([</code><code class="s1">'group'</code><code class="p">])</code><code class="o">.</code><code class="n">describe</code><code class="p">()</code></pre>

<p>Just like with <code>dplyr</code>’s <code>group_by()</code> function, the <code>groupby()</code> method will allow downstream methods to be applied on each subset according to a categorical variable, in this case the <code>group</code> Series. The <code>describe()</code> method will provide a suite of summary statistics for each subset.</p>

<p>This version is more specific:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="o">.</code><code class="n">groupby</code><code class="p">([</code><code class="s1">'group'</code><code class="p">])</code><code class="o">.</code><code class="n">agg</code><code class="p">({</code><code class="s1">'weight'</code><code class="p">:[</code><code class="s1">'mean'</code><code class="p">,</code><code class="s1">'std'</code><code class="p">]})</code></pre>

<p>You can probably guess that the <code>.agg()</code> method stands for <em>aggregate</em>. Aggregation functions return a single value (typically) and in R we’d specify it using the <code>summarise()</code> function.</p>

<p>The input to the <code>.agg()</code> method, <code>{'weight':['mean','std']}</code>, is a Dictionary (class <code>dict</code>). You can think of this as a key-value pair, defined here using <code>{}</code>:</p>

<pre data-type="programlisting" data-code-language="python"><code class="p">{</code><code class="s1">'weight'</code><code class="p">:[</code><code class="s1">'mean'</code><code class="p">,</code><code class="s1">'std'</code><code class="p">]}</code></pre>

<p>We could also have used the <code>dict()</code> function for the same purpose:</p>

<pre data-type="programlisting" data-code-language="python"><code class="nb">dict</code><code class="p">([(</code><code class="s1">'weight'</code><code class="p">,</code> <code class="p">[</code><code class="s1">'mean'</code><code class="p">,</code><code class="s1">'std'</code><code class="p">])])</code></pre>

<p>Dictionaries are data storage objects in their own right, are part of standard vanilla Python, and as we see here are used as arguments to input in methods and functions. This is similar to how lists in R are used for both data storage and as a list of arguments in specific circumstances. Nonetheless, a Dictionary is better thought of as an <em>associative array</em> since indexing is only by key, and not number. I may go so far as to say that a dictionary is even more like an environment in R, since that contains many objects but no indexing, but that may be a bit of a stretch.</p>

<p>Let’s dig a bit deeper. The following commands produce the same output, but in different formats!</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># Produces Pandas Series</code>
<code class="n">plant_growth</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'group'</code><code class="p">)[</code><code class="s1">'weight'</code><code class="p">]</code><code class="o">.</code><code class="n">mean</code><code class="p">()</code></pre>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># Produces Pandas DataFrame</code>
<code class="n">plant_growth</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'group'</code><code class="p">)[[</code><code class="s1">'weight'</code><code class="p">]]</code><code class="o">.</code><code class="n">mean</code><code class="p">()</code></pre>

<p>Notice the <code>[[]]</code> versus <code>[]</code>? It recalls a difference that you may have encountered in R when working with data frames that are not tibbles.</p>








<section data-type="sect2" data-pdf-bookmark="Data structures: Back to the basics"><div class="sect2" id="idm45127452980200">
<h2>Data structures: Back to the basics</h2>

<p>We’ve already seen three common types of data storage objects in Python, <code>pandas DataFrame</code>, <code>pandas Series</code> and <code>dict</code>. Only <code>dict</code> is from vanilla Python so before we more on, I want to look as some of the other basic structures: <code>lists</code>, <code>tuples</code> and <code>NumPy arrays</code>. I’m introducing these much later than you’d expect, that’s because I wanted to begin with data frames, which are intuitive and frequently used. So let’s make sure we have basics covered before we wrap up:</p>

<p>First, like in R, you’ll see four key data types in Python:</p>
<table id="Py_data_types">
<caption><span class="label">Table 3-3. </span>Data types in Python.</caption>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>bool</code></p></td>
<td><p>Binary</p></td>
<td><p><code>True</code> and <code>False</code></p></td>
</tr>
<tr>
<td><p><code>int</code></p></td>
<td><p>Integer numbers</p></td>
<td><p>7,9,2,-4</p></td>
</tr>
<tr>
<td><p><code>float</code></p></td>
<td><p>Real numbers</p></td>
<td><p>3.14, 2.78, 6.45</p></td>
</tr>
<tr>
<td><p><code>str</code></p></td>
<td><p>String</p></td>
<td><p>All Alphanumeric and special characters</p></td>
</tr>
</tbody>
</table>

<p>Next, you’ll encounter lists, one-dimensional objects. Unlike vectors in R, each element can be a different object, e.g. another 1 dimensional list. Here’s are two simple lists:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">cities</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'Munich'</code><code class="p">,</code> <code class="s1">'Paris'</code><code class="p">,</code> <code class="s1">'Amsterdam'</code><code class="p">]</code>
<code class="n">dist</code> <code class="o">=</code> <code class="p">[</code><code class="mi">584</code><code class="p">,</code> <code class="mi">1054</code><code class="p">,</code> <code class="mi">653</code><code class="p">]</code></pre>

<p>Notice that the <code>[]</code> define a list. We actually already saw that when we defined the <code>dict</code> earlier:</p>

<pre data-type="programlisting" data-code-language="python"><code class="p">{</code><code class="s1">'weight'</code><code class="p">:[</code><code class="s1">'mean'</code><code class="p">,</code><code class="s1">'std'</code><code class="p">]}</code></pre>

<p>So both <code>[]</code> and <code>{}</code> alone are valid in Python and behave differently than in R. But remember, we did use <code>[]</code> earlier to index the data frame, which is very similar to R.</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">plant_growth</code><code class="p">[</code><code class="s1">'weight'</code><code class="p">]</code></pre>

<p>Finally, we have tuples, which are like lists, except they are immutable, i.e. unchangeable, they are defined by <code>()</code>, as such:</p>

<pre data-type="programlisting" data-code-language="python"><code class="p">(</code><code class="s1">'Munich'</code><code class="p">,</code> <code class="s1">'Paris'</code><code class="p">,</code> <code class="s1">'Amsterdam'</code><code class="p">)</code></pre>

<p>A common use of tuples is when a function returns multiple values. As an example, the <code>divmod()</code> function returns the result of integer division and modulus of two numbers:</p>

<pre data-type="programlisting" data-code-language="python"><code class="o">&gt;&gt;&gt;</code>   <code class="nb">divmod</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mi">3</code><code class="p">)</code>
<code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="mi">1</code><code class="p">)</code></pre>

<p>The result is a tuple, but we can <em>unpack</em> the tuple and assign each output to a separate object:</p>

<pre data-type="programlisting" data-code-language="python"><code class="nb">int</code><code class="p">,</code> <code class="n">mod</code> <code class="o">=</code> <code class="nb">divmod</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mi">3</code><code class="p">)</code></pre>

<p>That’s really convenient when defining custom functions. The equivalent in R would be to save the output to a list.</p>

<p>Astute useRs may be familiar with the multiple assign operator, <code>%&lt;-%</code> introduced by the <code>zeallot</code> package and popularized by the <code>keras</code>.</p>

<p>The last data structure I want to mention is the NumPy array. This is very similar to a 1-dimensional list, but allows for vectorization, among other things. e.g.:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># A list of distances</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dist</code>
<code class="p">[</code><code class="mi">584</code><code class="p">,</code> <code class="mi">1054</code><code class="p">,</code> <code class="mi">653</code><code class="p">]</code>
<code class="c1"># Some transformation function</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dist</code> <code class="o">*</code> <code class="mi">2</code>
<code class="p">[</code><code class="mi">584</code><code class="p">,</code> <code class="mi">1054</code><code class="p">,</code> <code class="mi">653</code><code class="p">,</code> <code class="mi">584</code><code class="p">,</code> <code class="mi">1054</code><code class="p">,</code> <code class="mi">653</code><code class="p">]</code></pre>

<p>That’s very different from a useR would expect. If we were working on an NumPy array, we’d be back in familiar territory:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># Make a numpy array</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dist_array</code> <code class="o">=</code> <code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="n">dist</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dist_array</code> <code class="o">*</code> <code class="mi">2</code>
<code class="n">array</code><code class="p">([</code><code class="mi">1168</code><code class="p">,</code> <code class="mi">2108</code><code class="p">,</code> <code class="mi">1306</code><code class="p">])</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Indexing and Logical Expressions"><div class="sect2" id="idm45127452653080">
<h2>Indexing and Logical Expressions</h2>

<p>Now that we have a variety of objects, lets look at how to index them. We already saw that we can use <code>[]</code> and even <code>[[]]</code> as we see in R, but there are a couple interesting differences. Remember that indexing always begins at 0 in Python! Also, notice that one of the most common operators in R, <code>:</code> make a reappearance in Python, but in a slightly different form, here it’s <code>[start:end]</code></p>

<pre data-type="programlisting" data-code-language="python"><code class="o">&gt;&gt;&gt;</code> <code class="n">dist_array</code>
<code class="n">array</code><code class="p">([</code> <code class="mi">584</code><code class="p">,</code> <code class="mi">1054</code><code class="p">,</code>  <code class="mi">653</code><code class="p">])</code>
<code class="o">&gt;&gt;&gt;</code>  <code class="n">dist_array</code><code class="p">[:</code><code class="mi">2</code><code class="p">]</code>
<code class="n">array</code><code class="p">([</code> <code class="mi">584</code><code class="p">,</code> <code class="mi">1054</code><code class="p">])</code>
<code class="o">&gt;&gt;&gt;</code>  <code class="n">dist_array</code><code class="p">()</code>
<code class="n">array</code><code class="p">([</code><code class="mi">1054</code><code class="p">,</code>  <code class="mi">653</code><code class="p">])</code></pre>

<p>The <code>:</code> operator doesn’t need a left and right-hand side. If one side is empty the index begins or proceeds to the end. The start in <em>inclusive</em> and the end, if specified, is <em>exclusive</em>. Thus <code>:2</code> takes index 0 &amp; 1, <code>1:</code> takes index 1 up to the last element, which is unspecified and thus inclusive.</p>

<p>For 2-dimensional data frames, we encounter the pandas <code>.iloc</code>, “index location” and <code>.loc</code> “location” methods.</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># Rows: 0th and 2nd</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">plant_growth</code><code class="o">.</code><code class="n">iloc</code><code class="p">[[</code><code class="mi">0</code><code class="p">,</code><code class="mi">2</code><code class="p">]]</code>
  <code class="n">weight</code>	<code class="n">group</code>
<code class="mi">0</code>	<code class="mf">4.17</code>	<code class="n">ctrl</code>
<code class="mi">2</code>	<code class="mf">5.18</code>	<code class="n">ctrl</code>

<code class="c1"># Rows: 0th to 5th, exclusive</code>
<code class="c1"># Cols: 1st</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">plant_growth</code><code class="o">.</code><code class="n">iloc</code><code class="p">[:</code><code class="mi">5</code><code class="p">,</code> <code class="mi">0</code><code class="p">]</code>
<code class="mi">0</code>    <code class="mf">4.17</code>
<code class="mi">1</code>    <code class="mf">5.58</code>
<code class="mi">2</code>    <code class="mf">5.18</code>
<code class="mi">3</code>    <code class="mf">6.11</code>
<code class="mi">4</code>    <code class="mf">4.50</code></pre>

<p>For the <code>.loc()</code>, we can introduce logical expressions, i.e. combinations of relational and logical operators to ask and combine <code>True</code>/<code>False</code> questions.</p>

<pre data-type="programlisting" data-code-language="python"><code class="o">&gt;&gt;&gt;</code> <code class="n">plant_growth</code><code class="o">.</code><code class="n">loc</code><code class="p">[(</code><code class="n">plant_growth</code><code class="o">.</code><code class="n">weight</code> <code class="o">&lt;=</code>  <code class="mi">4</code><code class="p">)]</code>
   <code class="n">weight</code>	<code class="n">group</code>
<code class="mi">13</code>	<code class="mf">3.59</code>	<code class="n">trt1</code>
<code class="mi">15</code>	<code class="mf">3.83</code>	<code class="n">trt1</code></pre>

<p>For more detail on indexing and logical expressions, see the notes in the appendix.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Plotting"><div class="sect2" id="idm45127452413880">
<h2>Plotting</h2>

<p>Alright, let’s take a look at some data visualization of weight described by group. Here, we have a box plot:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">boxplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s1">'group'</code><code class="p">,</code> <code class="n">y</code><code class="o">=</code><code class="s1">'weight'</code><code class="p">,</code> <code class="n">data</code><code class="o">=</code><code class="n">plant_growth</code><code class="p">)</code>
<code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">()</code></pre>

<p>Just the points:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">catplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"group"</code><code class="p">,</code> <code class="n">y</code><code class="o">=</code><code class="s2">"weight"</code><code class="p">,</code> <code class="n">data</code><code class="o">=</code><code class="n">plant_growth</code><code class="p">)</code>
<code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">()</code></pre>

<p>And just the means with their standard deviations:</p>

<pre data-type="programlisting" data-code-language="python"><code class="n">sns</code><code class="o">.</code><code class="n">catplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"group"</code><code class="p">,</code> <code class="n">y</code><code class="o">=</code><code class="s2">"weight"</code><code class="p">,</code> <code class="n">data</code><code class="o">=</code><code class="n">plant_growth</code><code class="p">,</code> <code class="n">kind</code><code class="o">=</code><code class="s2">"point"</code><code class="p">)</code>
<code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">()</code></pre>

<p>Notice that I’m using the <code>seaborn</code> package (alias <code>sns</code>) for data visualizations and then using <code>show()</code> function from <code>matplotlib</code> to print the visualization to the screen.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Inferential statistics"><div class="sect1" id="idm45127453226248">
<h1>Inferential statistics</h1>

<p>In this dataset, we have a specific set-up in that we have three groups and we’re interested in two specific two-group comparisons. We can accomplish this by establishing a linear model.</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># fit a linear model</code>
<code class="c1"># specify model</code>
<code class="n">model</code> <code class="o">=</code> <code class="n">ols</code><code class="p">(</code><code class="s2">"weight ~ group"</code><code class="p">,</code> <code class="n">plant_growth</code><code class="p">)</code>

<code class="c1"># fit model</code>
<code class="n">results</code> <code class="o">=</code> <code class="n">model</code><code class="o">.</code><code class="n">fit</code><code class="p">()</code></pre>

<p>We can get the coefficients of the model directly:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># extract coefficients</code>
<code class="n">results</code><code class="o">.</code><code class="n">params</code><code class="o">.</code><code class="n">Intercept</code>
<code class="n">results</code><code class="o">.</code><code class="n">params</code><code class="p">[</code><code class="s2">"group[T.trt1]"</code><code class="p">]</code>
<code class="n">results</code><code class="o">.</code><code class="n">params</code><code class="p">[</code><code class="s2">"group[T.trt2]"</code><code class="p">]</code></pre>

<p>Finally, let’s take a look at a summary of our model:</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># Explore model results</code>
<code class="n">results</code><code class="o">.</code><code class="n">summary</code><code class="p">()</code></pre>

<p>Alright, let’s wrap this up by using a typical statistical test for this type of data: a 1-way ANOVA. Notice that we’re using our model, <code>results</code>, that we fitted above.</p>

<pre data-type="programlisting" data-code-language="python"><code class="c1"># ANOVA</code>
<code class="c1"># compute anova</code>
<code class="n">aov_table</code> <code class="o">=</code> <code class="n">sm</code><code class="o">.</code><code class="n">stats</code><code class="o">.</code><code class="n">anova_lm</code><code class="p">(</code><code class="n">results</code><code class="p">,</code> <code class="n">typ</code><code class="o">=</code><code class="mi">2</code><code class="p">)</code>

<code class="c1"># explore anova results</code>
<code class="n">aov_table</code>
<code class="k">print</code><code class="p">(</code><code class="n">aov_table</code><code class="p">)</code></pre>

<p>If we want to do all pair-wise comparisons, we can turn to Tukey’s Honestly Significant Differences (HSD) post-hoc test:</p>

<pre data-type="programlisting" data-code-language="python"><code class="kn">from</code> <code class="nn">statsmodels.stats.multicomp</code> <code class="kn">import</code> <code class="n">pairwise_tukeyhsd</code>
<code class="k">print</code><code class="p">(</code><code class="n">pairwise_tukeyhsd</code><code class="p">(</code><code class="n">plant_growth</code><code class="p">[</code><code class="s1">'weight'</code><code class="p">],</code> <code class="n">plant_growth</code><code class="p">[</code><code class="s1">'group'</code><code class="p">]))</code></pre>

<p>In this instance, we’re starting with the <code>statsmodel</code> library, taking the <code>stats</code> package and the <code>multicomp</code> module therein and extracting <em>from</em> that only the specific <code>pairwise_tukeyhsd()</code> function to <em>import</em>. In the second line we execute the function with a continuous variable as the first argument and the grouping variable as the second argument.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Final thoughts"><div class="sect1" id="idm45127452298200">
<h1>Final thoughts</h1>

<p>In R, there has been a convergence on common practices and workflows since circa 2016. In Python, there is a lot more diversity in how to get up and running right from the word go. This diversity may seem daunting but it’s just a reflection of Python’s origin story and use cases in the real-world.</p>

<p>If you’re a useR accustomed to the world of functional programming, wrapping your head around OOP methods can also seem pretty daunting, but once you get over that hurdle you can start exploiting the power of Python where it truly shines, the topic of <a data-type="xref" href="part03.xhtml#p03">Part III</a>.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm45127457573352"><sup><a href="ch03.xhtml#idm45127457573352-marker">1</a></sup> Indeed, the other builds are seldom mentioned in proper company</p><p data-type="footnote" id="idm45127455968680"><sup><a href="ch03.xhtml#idm45127455968680-marker">2</a></sup> You’ll need to install <a href="https://brew.sh/">homebrew</a> if you want to go that route for macOS.</p><p data-type="footnote" id="idm45127456453464"><sup><a href="ch03.xhtml#idm45127456453464-marker">3</a></sup> You’ll need a Google account to access this free resource.</p><p data-type="footnote" id="idm45127454706696"><sup><a href="ch03.xhtml#idm45127454706696-marker">4</a></sup> Again, although R is supported, useRs seldom work in VS Code.</p><p data-type="footnote" id="idm45127457567032"><sup><a href="ch03.xhtml#idm45127457567032-marker">5</a></sup> Well, we’re in <em>somebody’s</em> hands, at least!</p><p data-type="footnote" id="idm45127457564296"><sup><a href="ch03.xhtml#idm45127457564296-marker">6</a></sup> Astute userRs may have noticed that a Command Palette, invoked with the same keyboard shortcuts, was added to RStudio v1.4 in late 2020.</p><p data-type="footnote" id="idm45127453933224"><sup><a href="ch03.xhtml#idm45127453933224-marker">7</a></sup> The Python execution backend.</p><p data-type="footnote" id="idm45127453751608"><sup><a href="ch03.xhtml#idm45127453751608-marker">8</a></sup> But remember this for when we start using Python &amp; R together, because we’ll see something very similar.</p><p data-type="footnote" id="idm45127453749672"><sup><a href="ch03.xhtml#idm45127453749672-marker">9</a></sup> Referring back to <code>log()</code>, you’re more likely to use <code>np.log()</code> instead of <code>math.log()</code> since it accepts a wider variety of input types.</p></div></div></section></div></body></html>