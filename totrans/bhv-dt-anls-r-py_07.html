<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 5. Using Causal Diagrams to Deconfound Data Analyses"><div class="chapter" id="using_causal_diagrams_to_deconfound_da">
<h1><span class="label">Chapter 5. </span>Using Causal Diagrams to <span class="keep-together">Deconfound Data Analyses</span></h1>

<p>Cause-and-effect relationships are so fundamental to our understanding<a contenteditable="false" data-primary="confounders" data-secondary="about" data-type="indexterm" id="idm45968165891960"/> of the world that even a kindergartner intuitively grasps them. However, that intuition—and our data analyses—can be led astray by confounding, as we saw in <a data-type="xref" href="ch01.xhtml#the_causal_behavioral_framework_for_da">Chapter 1</a>. If we don’t account for a joint cause of our two variables of interest, then we’ll misinterpret what’s happening and the regression coefficient for our cause of interest will be biased. <a contenteditable="false" data-primary="variables" data-secondary="variable selection examples" data-tertiary="importance of variable selection" data-type="indexterm" id="idm45968165889048"/>However, we also saw the risks of taking into account the wrong variables. This makes determining which variables to include or not one of the most crucial questions in deconfounding data analyses and, more broadly, causal thinking.</p>

<p>It is alas a complicated question, with various authors proposing various rules that are more or less expansive. On the more expansive end of the spectrum, you have rules that err towards caution and simplicity—you can think of them as reasoned “everything and the kitchen sink” approaches. On the other end of the spectrum, you have rules that try to zero in on the exact variables required and nothing else, but at the cost of higher complexity and conceptual requirements.</p>

<p>Interestingly, answering that question doesn’t require any data. That is, you may want or need data to build the right CD, but once you have a CD that is correct, you don’t need to look at any data to identify confounding. This puts us squarely on the CD-to-behaviors edge of our framework (<a data-type="xref" href="#this_chapter_deals_with_the_relationshi">Figure 5-1</a>) and as a consequence we won’t use any data in this chapter.</p>

<p>Instead, I will show you two rules for deconfounding with different pros and cons, the “disjunctive cause criterion” and the “backdoor criterion,” so that you can choose which one to use depending on your situation. I will set up our business problem in the next section before seeing in turn how to apply the two criteria.</p>

<figure><div id="this_chapter_deals_with_the_relationshi" class="figure"><img alt="This chapter deals with the relationship between behaviors and causal diagrams" src="Images/BEDA_0501.png" width="596" height="371"/>
<h6><span class="label">Figure 5-1. </span>This chapter deals with the relationship between behaviors and causal <span class="keep-together">diagrams</span></h6>
</div></figure>

<section data-type="sect1" data-pdf-bookmark="Business Problem: Ice Cream and Bottled Water Sales"><div class="sect1" id="business_problem_ice_cream_and_bottled">
<h1>Business Problem: Ice Cream and Bottled Water Sales</h1>

<p>Our starting point in this chapter is that C-Mart’s marketing department<a contenteditable="false" data-primary="C-Mart fictional supermarket chain" data-secondary="deconfounding with causal diagrams" data-tertiary="about" data-type="indexterm" id="idm45968165878984"/><a contenteditable="false" data-primary="confounders" data-secondary="deconfounding with causal diagrams" data-tertiary="about business problem" data-type="indexterm" id="idm45968165877304"/><a contenteditable="false" data-primary="causal diagrams (CDs)" data-secondary="deconfounding with" data-tertiary="about business problem" data-type="indexterm" id="idm45968165875640"/> has released an internal report titled “the healthy customer,” which tracked the long-term trend towards healthier products. Based on that report, C-Mart has launched a marketing campaign titled “Would you like spring water with that?” for its fast-food and ice cream concessions. Our analytical goal is to obtain an unbiased estimate for the impact of ice cream sales on bottled water sales.</p>

<p>By leveraging existing data and dedicated surveys, the marketing analytics team has established the following causal diagram, with our relationship of interest in bold (<a data-type="xref" href="#the_cd_for_our_business_situatio">Figure 5-2</a>).</p>

<figure><div id="the_cd_for_our_business_situatio" class="figure"><img alt="The CD for our business situation" src="Images/BEDA_0502.png" width="1449" height="770"/>
<h6><span class="label">Figure 5-2. </span>The CD for our business situation</h6>
</div></figure>

<p>This CD is moderately complex and it’s not immediately obvious where confounders might lurk, so let’s break it down into more manageable pieces (<a data-type="xref" href="#breaking_down_our_cd_into_conceptual_bl">Figure 5-3</a>).</p>

<figure><div id="breaking_down_our_cd_into_conceptual_bl" class="figure"><img alt="Breaking down our CD into conceptual blocks" src="Images/BEDA_0503.png" width="1442" height="1688"/>
<h6><span class="label">Figure 5-3. </span>Breaking down our CD into conceptual blocks</h6>
</div></figure>

<p>These two conceptual blocks are just a pedagogical tool for understanding: they are not exclusive (our relationship of interest is part of both) nor are they exhaustive (some arrows are in neither of them).</p>

<p>Our first block, in the upper left corner of the CD, shows the connections between the sales of ice cream and the sales of burgers and french fries through the number of customers. In stores with more traffic, and on busier days, overall sales tend to be higher, which makes the various variables move in concert. In addition, store staff has been instructed to offer the “Would you like spring water with that?” prompt both for sales of ice cream and for sales of french fries, on top of the “Would you like fries with that?” prompt for the sales of burgers.</p>

<p>Our second block, in the bottom right corner of the CD, shows the influence of two factors that have been identified in surveys but are not available at the individual sale level: the average age of customers (younger customers, and customers with children, are more likely to purchase sugary products) and the health mindset of customers (health-minded customers are more likely to buy water and less likely to buy sodas, everything else being equal).</p>

<div data-type="note" epub:type="note"><h6>Note</h6>
<p>In real-life settings, feel free to break down a large or complex CD into blocks<a contenteditable="false" data-primary="causal diagrams (CDs)" data-secondary="breaking down into blocks" data-type="indexterm" id="idm45968165862856"/> as you see fit for your analyses. This is perfectly fine as long as you do some housekeeping at the end and check the paths from your cause of interest to your effect of interest that are not part of any block: you must make sure that they are not generating confounding, either because they are not confounding in the first place, or because their confounding has been taken care of when analyzing the conceptual blocks.</p>
</div>

<p>In this situation, it’s not immediately clear whether our relationship of interest between <em>IceCreamSales</em> and <em>BottledWaterSales</em> is subject to confounding and if so how to resolve it. Technically speaking, we don’t have any joint cause of both in our CD. Let’s turn to our decision rules.</p>
</div></section>

<section data-type="sect1" data-pdf-bookmark="The Disjunctive Cause Criterion"><div class="sect1" id="the_disjunctive_cause_criterion">
<h1>The Disjunctive Cause Criterion</h1>

<p>The disjunctive cause criterion is our first decision rule for deconfounding.<a contenteditable="false" data-primary="disjunctive cause criterion (DCC)" data-secondary="deconfounding first decision rule" data-type="indexterm" id="ch05-dcc"/><a contenteditable="false" data-primary="C-Mart fictional supermarket chain" data-secondary="deconfounding with causal diagrams" data-tertiary="disjunctive cause criterion" data-type="indexterm" id="ch05-dcc2"/><a contenteditable="false" data-primary="confounders" data-secondary="deconfounding with causal diagrams" data-tertiary="disjunctive cause criterion" data-type="indexterm" id="ch05-dcc3"/><a contenteditable="false" data-primary="causal diagrams (CDs)" data-secondary="deconfounding with" data-tertiary="disjunctive cause criterion" data-type="indexterm" id="ch05-dcc4"/> Like an overprotective parent, it goes above and beyond what’s strictly necessary to remove confounding, which makes it simpler to understand and apply.</p>

<section data-type="sect2" data-pdf-bookmark="Definition"><div class="sect2" id="definition">
<h2>Definition</h2>

<p>The disjunctive cause criterion (DCC) states that:</p>

<blockquote>
<p>Adding to our regression all variables that are a direct cause of<a contenteditable="false" data-primary="disjunctive cause criterion (DCC)" data-secondary="definition" data-type="indexterm" id="idm45968165846824"/><a contenteditable="false" data-primary="variables" data-secondary="disjunctive cause criterion" data-type="indexterm" id="idm45968165845256"/> both or either of our variables of interest, except mediators between them, removes any confounding of our relationship of interest.</p>
</blockquote>
</div></section>

<section data-type="sect2" data-pdf-bookmark="First Block"><div class="sect2" id="first_block-id00041">
<h2>First Block</h2>

<p>Let’s start by breaking down this definition based on the first block in our ice cream example:</p>

<dl>
	<dt>1. All variables that are a direct cause of both or either of our variables of interest</dt>
	<dd>
	<p>This means we should include any variable that is only a direct cause of <em>IceCreamSales</em>, such as <em>NumberOfCustomers</em>. We should also include any variable that is only a cause of <em>BottledWaterSales</em>, such as <em>FrenchFrySales</em>. And finally, we should include any cause of both, but we don’t have any in this situation.</p>
	</dd>
	<dt>2. Except mediators between them</dt>
	<dd>
	<p>Mediators are variables that “transmit” the impact of our cause of interest on our effect of interest. That is, they are a child of our cause of interest and a parent of our effect of interest. We’ll look at mediators in more detail in <a data-type="xref" href="ch12.xhtml#mediation_and_instrumental_variables">Chapter 12</a>, so for now I’ll just point out that we need to <em>exclude</em> them from our list of controls, because including them would cancel some of the causal relationships we’re trying to capture. We don’t have mediators between <em>IceCreamSales</em> and <em>BottledWaterSales</em> (i.e., a variable that would be a child of the former and a parent of the latter), so we’re good on that front.</p>
	</dd>
	<dt>3. Removes any confounding of our relationship of interest</dt>
	<dd>
	<p>If we include the variables described in point 1 but not those described in point 2, then our regression coefficient for the effect of <em>IceCreamSales</em> on <em>BottledWaterSales</em> will be unconfounded with respect to the variables in our first block.</p>
	</dd>
</dl>

<p>It’s important to note that the DCC is a <em>sufficient</em> but not <em>necessary</em> rule:<a contenteditable="false" data-primary="disjunctive cause criterion (DCC)" data-secondary="sufficient but not necessary" data-type="indexterm" id="idm45968165829400"/> applying it is enough to remove confounding but you don’t need to. For example, if we have a variable that is only a cause of one of our variables of interest and we are certain it has absolutely no connection whatsoever with any other variable, then it cannot be a confounder and we don’t need to include it to remove confounding.</p>

<p>But when you don’t have that certainty, the DCC saves you from agonizing over which variable causes which, and what is or isn’t a confounder. You may be missing some relationships between variables or believe that there are relationships where there are none; you may believe that a variable is a confounder when it’s not or vice versa. As long as you correctly determine whether or not a variable has a direct causal relationship with one of the two variables you’re interested in, then you’ll make the right decision whether to include it or not.</p>

<p>For example, let’s look at the chain from <em>NumberOfCustomers</em> to <em>BottledWaterSales</em> through <em>BurgerSales</em> and <em>FrenchFrySales</em>. We saw in <a data-type="xref" href="ch02.xhtml#understanding_behavioral_data">Chapter 2</a> that a chain is a causal diagram that connects variables with arrows in a straight line (<a data-type="xref" href="#the_extended_chain_in_our_first_block">Figure 5-4</a>).</p>

<figure><div id="the_extended_chain_in_our_first_block" class="figure"><img alt="The extended chain in our first block" src="Images/BEDA_0504.png" width="1443" height="144"/>
<h6><span class="label">Figure 5-4. </span>The extended chain in our first block</h6>
</div></figure>

<p>Of course, we could represent this chain with the arrows going up, down, or from right to left; the key point is that they are all going in the same direction, which allows us to collapse the chain and treat <em>NumberOfCustomers</em> as a direct cause of <em>BottledWaterSales</em>. But then <em>NumberOfCustomers</em> is indeed a joint direct cause of <em>IceCreamSales</em> and <em>BottledWaterSales</em>, and a confounder of their relationship (<a data-type="xref" href="#collapsing_the_upper_chain_makes_number">Figure 5-5</a>).</p>

<figure><div id="collapsing_the_upper_chain_makes_number" class="figure"><img alt="Collapsing the upper chain makes NumberOfCustomers a direct cause of BottledWaterSales" src="Images/BEDA_0505.png" width="1061" height="457"/>
<h6><span class="label">Figure 5-5. </span>Collapsing the upper chain makes NumberOfCustomers a direct cause of BottledWaterSales</h6>
</div></figure>

<p>By definition of the DCC, applying it to this first block means including both <em>NumberOfCustomers</em> and <em>FrenchFrySales</em> as controls in our regression. Looking at <a data-type="xref" href="#collapsing_the_upper_chain_makes_number">Figure 5-5</a>, we can see that doing so effectively neutralizes the confounding effect of the upper chain. More generally, because chains can be expanded or collapsed at will, a variable that is ultimately a cause of both of our variables of interest (and therefore a confounder) may be hidden behind a succession of intermediary variables in a CD.</p>

<p>The beauty of the DCC is that even if the marketing team had missed the upper chain from <em>NumberOfCustomers</em> to <em>BottledWaterSales</em> and it was not included in the CD, the requirement of including both <em>NumberOfCustomers</em> and <em>FrenchFrySales</em> would have taken care of the confounding. On the other hand, based on <a data-type="xref" href="#collapsing_the_upper_chain_makes_number">Figure 5-5</a>, we can see that only including <em>NumberOfCustomers</em> would have been enough, and including <em>FrenchFrySales</em> too is redundant. This is one of the trade-offs I mentioned in the chapter introduction: the DCC is an expansive rule, which will remove confounding even when there are errors in your CD but at the cost of redundancy and requiring more data. Let’s now turn to the second block in our CD.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Second Block"><div class="sect2" id="second_block">
<h2>Second Block</h2>

<p>The second block has more complex relationships between variables (<a data-type="xref" href="#second_block-id00071">Figure 5-6</a>).</p>

<figure><div id="second_block-id00071" class="figure"><img alt="Second block" src="Images/BEDA_0506.png" width="1062" height="457"/>
<h6><span class="label">Figure 5-6. </span>Second block</h6>
</div></figure>

<p>Here, the only variable for which we have data beyond our variables of interest is <em>SodaSales</em>. It is not a cause of either <em>IceCreamSales</em> or <em>BottledWaterSales</em>, so the DCC would not call for its inclusion in the regression. However, it would call for the inclusion of both <em>AverageCustomerAge</em> and <em>CustomerHealthMindset</em>, for which we don’t have data. This doesn’t necessarily mean that confounding is happening, but we can’t be sure that it isn’t. <a contenteditable="false" data-primary="disjunctive cause criterion (DCC)" data-secondary="limitation of" data-type="indexterm" id="idm45968165799112"/>This is the biggest limitation of the DCC: if you don’t have data on some of the causes of your variables of interest, it cannot help you. Let’s now turn to the backdoor criterion.<a contenteditable="false" data-primary="" data-startref="ch05-dcc" data-type="indexterm" id="idm45968165797432"/><a contenteditable="false" data-primary="" data-startref="ch05-dcc2" data-type="indexterm" id="idm45968165796056"/><a contenteditable="false" data-primary="" data-startref="ch05-dcc3" data-type="indexterm" id="idm45968165794680"/><a contenteditable="false" data-primary="" data-startref="ch05-dcc4" data-type="indexterm" id="idm45968165793304"/></p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="The Backdoor Criterion"><div class="sect1" id="the_backdoor_criterion">
<h1>The Backdoor Criterion</h1>

<p>The backdoor criterion (BC) constitutes an alternative rule to<a contenteditable="false" data-primary="C-Mart fictional supermarket chain" data-secondary="deconfounding with causal diagrams" data-tertiary="backdoor criterion" data-type="indexterm" id="ch05-bkdr2"/><a contenteditable="false" data-primary="confounders" data-secondary="deconfounding with causal diagrams" data-tertiary="backdoor criterion" data-type="indexterm" id="ch05-bkdr3"/><a contenteditable="false" data-primary="causal diagrams (CDs)" data-secondary="deconfounding with" data-tertiary="backdoor criterion" data-type="indexterm" id="ch05-bkdr4"/><a contenteditable="false" data-primary="backdoor criterion (BC)" data-type="indexterm" id="ch05-bkdr5"/> control for confounders. It offers very different trade-offs compared to the disjunctive cause criterion: it is more complex to understand and requires having a fully accurate CD but it zeroes in on actual confounders and does not require including any redundant variable in our regression. In formal terms, it is necessary and sufficient to control for the variables identified by this rule to remove confounding.</p>

<section class="pagebreak-before" data-type="sect2" data-pdf-bookmark="Definitions"><div class="sect2" id="definitions">
<h2 class="less_space">Definitions</h2>

<p>The backdoor criterion states that:<a contenteditable="false" data-primary="variables" data-secondary="backdoor criterion" data-type="indexterm" id="idm45968165779576"/></p>

<blockquote>
<p>The causal relationship between two variables is confounded if there is at least <span class="keep-together">one unblocked</span> noncausal path between them starting with an arrow to our cause of <span class="keep-together">interest.</span></p>

<p>Conversely, to remove all confounding, we need to block all noncausal paths between them starting with an arrow to our cause of interest.</p>
</blockquote>

<p>To understand this definition, we’ll need to introduce or recall a variety of secondary definitions, in the context of the CD for our example that we’ll repeat here (<a data-type="xref" href="#the_cd_for_our_business_situation">Figure 5-7</a>).</p>

<figure><div id="the_cd_for_our_business_situation" class="figure"><img alt="" src="Images/BEDA_0507.png" width="1449" height="770"/>
<h6><span class="label">Figure 5-7. </span>The CD for our business situation</h6>
</div></figure>

<p>First, let’s recall the definition of a <em>path</em>: <a contenteditable="false" data-primary="paths in causal diagrams" data-secondary="backdoor criterion" data-type="indexterm" id="ch05-bkdr"/>we say that there is a path between two variables if there are arrows between them, regardless of the direction of the arrows, and if no variable appears twice along the way. A chain is a path along three or more variables, but so are forks and colliders. In that sense, any two variables in a CD are connected by at least one path, and generally several.</p>

<p>For example, there are seven distinct paths between <em>NumberOfCustomers</em> and <em>BottledWaterSales</em> in our CD:</p>

<ul>
	<li>
	<p><em>NumberOfCustomers</em> → <em>IceCreamSales</em> → <em>BottledWaterSales</em></p>
	</li>
	<li>
	<p><em>NumberOfCustomers</em> → <em>BurgerSales</em> → <em>FrenchFrySales</em> → <em>BottledWaterSales</em></p>
	</li>
	<li>
	<p><em>NumberOfCustomers</em> → <em>BurgerSales</em> → <em>FrenchFrySales</em> ← <em>CustomerHealthMindset</em> → <em>BottledWaterSales</em></p>
	</li>
	<li>
	<p><em>NumberOfCustomers</em> → <em>BurgerSales</em> → <em>FrenchFrySales</em> ← <em>CustomerHealthMindset</em> → <em>SodaSales</em> ← <em>AverageCustomerAge</em> → <em>IceCreamSales</em> → <em>BottledWaterSales</em></p>
	</li>
	<li>
	<p><em>NumberOfCustomers</em> → <em>SodaSales</em> ← <em>CustomerHealthMindset</em> → <span class="keep-together"><em>BottledWaterSales</em></span></p>
	</li>
	<li>
	<p><em>NumberOfCustomers</em> → <em>SodaSales</em> ← <em>CustomerHealthMindset</em> → <em>FrenchFrySales</em> → <em>BottledWaterSales</em></p>
	</li>
	<li>
	<p><em>NumberOfCustomers</em> → <em>SodaSales</em> ← <em>AverageCustomerAge</em> → <em>IceCreamSales</em> → <em>BottledWaterSales</em></p>
	</li>
</ul>

<p>Note that <em>NumberOfCustomers</em> → <em>BurgerSales</em> → <em>FrenchFrySales</em> ← <em>CustomerHealthMindset</em> → <em>SodaSales</em> ← <em>NumberOfCustomers</em> → <em>IceCreamSales</em> → <em>BottledWaterSales</em> is not a path because the variable <em>NumberOfCustomers</em> appears twice in it, which is <span class="keep-together">forbidden.</span></p>

<p>A path is <em>causal</em> if it’s a chain, i.e., <a contenteditable="false" data-primary="paths in causal diagrams" data-secondary="causal paths" data-type="indexterm" id="idm45968165741112"/><a contenteditable="false" data-primary="causal paths" data-type="indexterm" id="idm45968165739672"/><a contenteditable="false" data-primary="chains in causal diagrams" data-secondary="causal paths" data-type="indexterm" id="idm45968165738568"/>all the arrows in it go in the same direction. The label “causal” refers to the fact that a path between two variables is causal if one of the two variables causes the other through that path.</p>

<p>Paths 1 and 2 in the preceding list are causal: they are chains and represent channels through which <em>NumberOfCustomers</em> affects <em>BottledWaterSales</em>. <a contenteditable="false" data-primary="paths in causal diagrams" data-secondary="noncausal paths" data-type="indexterm" id="idm45968165735224"/><a contenteditable="false" data-primary="noncausal paths" data-type="indexterm" id="idm45968165733848"/><a contenteditable="false" data-primary="forks in causal diagrams" data-secondary="noncausal paths" data-type="indexterm" id="idm45968165732744"/><a contenteditable="false" data-primary="colliders in causal diagrams" data-secondary="noncausal paths" data-type="indexterm" id="idm45968165731352"/>The other paths are <em>noncausal</em> because they each include at least one collider or fork. Remember that a collider is the situation when two variables cause the same one, whereas a fork is the situation when two variables are caused by the same one. For example, paths 3 and 4 both have a collider around <em>FrenchFrySales</em>, and path 4 also includes a collider around <em>SodaSales</em> and two forks around <em>CustomerHealthMindset</em> and <em>AverageCustomerAge</em>.</p>

<p>Finally, we’ll say that a path between two variables in our CD is <em>blocked</em> if either:<a contenteditable="false" data-primary="paths in causal diagrams" data-secondary="blocked paths" data-type="indexterm" id="idm45968165726552"/><a contenteditable="false" data-primary="blocked paths" data-type="indexterm" id="idm45968165725176"/></p>

<ul>
	<li>
	<p>One of the intermediary variables along that path is included in our regression and it’s not a collider, or</p>
	</li>
	<li>
	<p>In that path there is a collider whose central variable is not included in our regression.</p>
	</li>
</ul>

<p>Otherwise, that path is <em>unblocked</em>.<a contenteditable="false" data-primary="paths in causal diagrams" data-secondary="unblocked paths" data-type="indexterm" id="idm45968165720824"/><a contenteditable="false" data-primary="unblocked paths" data-type="indexterm" id="idm45968165719352"/></p>

<p>The concept of blocked or unblocked is hard to understand because it really encapsulates two different things: whether a path is confounding or not in itself, and whether it’s controlled for in our regression. You can think of unblocked as {confounding <em>and</em> uncontrolled}, and blocked as {nonconfounding <em>or</em> controlled}.</p>

<p>The ultimate root cause of confounding is always a joint cause (<a data-type="xref" href="#a_confounder_is_a_joint_cause_left_pare">Figure 5-8</a>, left panel). However, because we can collapse or expand chains at will, that confounder may be “hidden” behind a number of intermediary variables (<a data-type="xref" href="#a_confounder_is_a_joint_cause_left_pare">Figure 5-8</a>, middle panel). However, we can’t collapse a collider in the middle of a chain because it breaks down the direction of the arrows (<a data-type="xref" href="#a_confounder_is_a_joint_cause_left_pare">Figure 5-8</a>, right panel). Therefore a collider blocks confounding, unless we include it in our regression, which neutralizes it.</p>

<figure><div id="a_confounder_is_a_joint_cause_left_pare" class="figure"><img alt="A confounder is a joint cause (left panel), but it can be hidden behind intermediary variables (middle panel), while a collider prevents us from collapsing the chain and therefore removes confounding (right panel)" src="Images/BEDA_0508.png" width="1454" height="452"/>
<h6><span class="label">Figure 5-8. </span>A confounder is a joint cause (left panel), but it can be hidden behind intermediary variables (middle panel), while a collider prevents us from collapsing the chain and therefore removes confounding (right panel)</h6>
</div></figure>
</div></section>

<section data-type="sect2" data-pdf-bookmark="First Block"><div class="sect2" id="first_block-id00042">
<h2>First Block</h2>

<p>Now that we’ve seen the definition of the BC, let’s see how it applies to the variables in the first block of the causal diagram. Remember that the DCC required that we include both <em>NumbersOfCustomers</em> and <em>FrenchFrySales</em> as controls in our regression.</p>

<p>We can start our application of the BC with the condition “starting with an arrow to our cause of interest,” which simply means all the causes of our cause of interest, which in this case is <em>IceCreamSales</em>. There is only one of them in the first block, namely <em>NumberOfCustomers</em>.</p>

<p>For each path through <em>NumberOfCustomers</em>, let’s apply the other conditions of the BC. The first path from <em>IceCreamSales</em> to <em>BottledWaterSales</em> through <em>NumberOfCustomers</em> within the first block is <em>IceCreamSales</em> ← <em>NumberOfCustomers</em> → <em>BurgerSales</em> → <em>FrenchFrySales</em> → <em>BottledWaterSales</em>. This is the path that the DCC caught and controlled by including <em>NumberOfCustomers</em> and <em>FrenchFrySales</em> in our regression. Let’s check the conditions:</p>

<ul>
	<li>
	<p>Is that path <em>noncausal</em>? Yes, because of the fork around <em>NumberOfCustomers</em>.</p>
	</li>
	<li>
	<p>Is that path blocked by default? No, as there is no collider in that path, and we haven’t included any variable as control yet.</p>
	</li>
</ul>

<p>Therefore, this path is confounding our relationship of interest and we need to control for that path by including any one of its noncollider variables in our regression. That is, the BC is telling us that including any of (<em>NumberOfCustomers</em>, <em>BurgerSales</em>, <em>FrenchFrySales</em>) is sufficient to control for that path. However, I have a personal recommendation as to which variable to pick: whenever you can include the first variable along that path, i.e., the cause of your cause of interest, you should do so. In our example, that would be <em>NumberOfCustomers</em>. The reason for this choice is that it will also automatically control any other confounding path starting with that variable, which means we don’t even have to check any other path starting with that variable.</p>

<p>As you can see, the BC is more economical than the DCC, by leveraging the assumption that we have a complete and correct causal diagram for the variables in that block: whereas the DCC asked us to include <em>both NumberOfCustomers</em> and <em>FrenchFrySales</em>, the BC only requires including <em>NumberOfCustomers</em>, and we can leave the first block without checking any other path.</p>
</div></section>

<section data-type="sect2" data-pdf-bookmark="Second Block"><div class="sect2" id="second_block-id00072">
<h2>Second Block</h2>

<p>Remember that the DCC kept mum about the variables in the second block: we couldn’t include the variables <em>AverageCustomerAge</em> and <em>CustomerHealthMindset</em> because we don’t have the corresponding data and therefore we were left uncertain whether there was uncontrolled confounding there. The BC will allow us to be much more definitive and precise.</p>

<p><em>AverageCustomerAge</em> is a cause of our cause of interest, <em>IceCreamSales</em>, so let’s examine the path <em>IceCreamSales</em> ← <em>AverageCustomerAge</em> → <em>SodaSales</em> ← <em>CustomerHealthMindset</em> → <em>BottledWaterSales</em>:</p>

<ul>
	<li>
	<p>That path is noncausal (i.e., not a chain): it has a fork around <em>AverageCustomerAge</em>, a collider around <em>SodaSales</em>, and then another fork around <em>CustomerHealthMindset</em>.</p>
	</li>
	<li>
	<p>Is it blocked by default? Yes, because of the collider around <em>SodaSales</em>.</p>
	</li>
</ul>

<p>In other words, this path is not confounding and we don’t need to control for it in our regression. More than that, including <em>SodaSales</em> in our regression would actually create confounding, by unblocking this path!</p>

<p>This configuration of two forks around a collider is peculiar enough that it has a name:<a contenteditable="false" data-primary="M-pattern" data-type="indexterm" id="idm45968165679608"/><a contenteditable="false" data-primary="forks in causal diagrams" data-secondary="M-pattern" data-type="indexterm" id="idm45968165678504"/><a contenteditable="false" data-primary="colliders in causal diagrams" data-secondary="M-pattern" data-type="indexterm" id="idm45968165677112"/><a contenteditable="false" data-primary="causal diagrams (CDs)" data-secondary="fundamental structures of" data-tertiary="M-pattern" data-type="indexterm" id="idm45968165675720"/> the M-pattern, which we can see by rearranging our CD (<a data-type="xref" href="#visualizing_the_m_pattern_in_our_cd">Figure 5-9</a>). Admittedly, this example might seem unduly contrived. <a contenteditable="false" data-primary="The Book of Why (Pearl and Mackenzie)" data-primary-sortas="Book of Why" data-type="indexterm" id="idm45968165672872"/><a contenteditable="false" data-primary="Pearl, Judea" data-type="indexterm" id="idm45968165671384"/><a contenteditable="false" data-primary="Mackenzie, Dana" data-type="indexterm" id="idm45968165670280"/>But in case you felt it was artificial and unrealistic, note that it was adapted from an example in <em>The Book of Why</em> about actual tobacco litigation in 2006, where the inclusion of a control for seatbelt usage biased the estimated impact of smoking on lung cancer.</p>

<figure><div id="visualizing_the_m_pattern_in_our_cd" class="figure"><img alt="Visualizing the M-pattern in our CD" src="Images/BEDA_0509.png" width="1129" height="510"/>
<h6><span class="label">Figure 5-9. </span>Visualizing the M-pattern in our CD</h6>
</div></figure>

<p>Beyond that, because all paths from <em>IceCreamSales</em> to <em>BottledWaterSales</em> through <em>AverageCustomerAge</em> also go through <em>SodaSales</em>, they will all be blocked as long as we don’t include <em>SodaSales</em> in our regression.</p>

<p>Finding confounding in a CD is science: <a contenteditable="false" data-primary="confounders" data-secondary="deconfounding with causal diagrams" data-tertiary="science of" data-type="indexterm" id="idm45968165663256"/><a contenteditable="false" data-primary="C-Mart fictional supermarket chain" data-secondary="deconfounding with causal diagrams" data-tertiary="science of" data-type="indexterm" id="idm45968165661640"/><a contenteditable="false" data-primary="causal diagrams (CDs)" data-secondary="deconfounding with" data-tertiary="science of" data-type="indexterm" id="idm45968165659960"/>apply the rules and you’ll know. But it also has its back-alley shortcuts: having identified two causes of <em>IceCreamSales</em> through which confounding was a possibility and having made sure that any confounding would be blocked, we don’t have to check each and every path to <em>IceCreamSales</em> coming through these two causes. <a contenteditable="false" data-primary="intuition" data-secondary="from causal diagrams" data-tertiary="deconfounding" data-type="indexterm" id="idm45968165657048"/>As you build and manipulate more CDs, you’ll learn to develop an intuition for it. And if you ever have a doubt, you can always check the rules for each possible path to make sure that you’re correct.</p>

<p>The backdoor criterion is more precise than the disjunctive cause criterion, backdoor criterion less robust to errorsbut it’s also less robust to errors in our CD. Let’s imagine for the sake of the argument that the marketing team made a mistake in building the CD and wrongly concluded that <em>SodaSales</em> causes <em>CustomerHealthMindset</em> and not the other way around (in that particular case, this doesn’t make much sense from a behavioral perspective, but bear with me), leading to the relationships represented in <a data-type="xref" href="#what_the_second_block_would_look_like_w">Figure 5-10</a>.</p>

<figure><div id="what_the_second_block_would_look_like_w" class="figure"><img alt="What the second block would look like with an error" src="Images/BEDA_0510.png" width="1129" height="424"/>
<h6><span class="label">Figure 5-10. </span>What the second block would look like with an error</h6>
</div></figure>

<p>In that case, the BC would lead us to mistakenly believe there is confounding at play, and to include <em>SodaSales</em> in our regression, introducing confounding where there had been none.</p>

<p>To recap, the BC identified two potential avenues for confounding, through the two direct causes of <em>IceCreamSales</em>. By including <em>NumberOfCustomers</em> in our regression, we take care of all potential confounding paths through it. On the other hand, by <em>not</em> including <em>SodaSales</em>, we leave alone a collider that takes care of any confounding through <em>AverageCustomerAge</em>.<a contenteditable="false" data-primary="" data-startref="ch05-bkdr" data-type="indexterm" id="idm45968165646296"/><a contenteditable="false" data-primary="" data-startref="ch05-bkdr2" data-type="indexterm" id="idm45968165644888"/><a contenteditable="false" data-primary="" data-startref="ch05-bkdr3" data-type="indexterm" id="idm45968165643512"/><a contenteditable="false" data-primary="" data-startref="ch05-bkdr4" data-type="indexterm" id="idm45968165642136"/><a contenteditable="false" data-primary="" data-startref="ch05-bkdr5" data-type="indexterm" id="idm45968165640760"/></p>
</div></section>
</div></section>

<section data-type="sect1" data-pdf-bookmark="Conclusion"><div class="sect1" id="conclusion-id00010">
<h1>Conclusion</h1>

<p>Deconfounding causal relationships is one of the core issues of behavioral data analysis, and the solution to the “correlation is not causation” quagmire. In this chapter, we saw two deconfounding rules, the <em>disjunctive cause criterion</em> and the <em>backdoor criterion</em>. The first one takes the stance of including all direct causes of our variables of interest (except mediators). The second one is more surgical in its application and gets to the very mechanism of confounding but is less intuitive and less robust to errors in a CD.</p>
</div></section>
</div></section></div></body></html>