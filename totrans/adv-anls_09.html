<html><head></head><body><section data-pdf-bookmark="Chapter 7. Data Structures in R" data-type="chapter" epub:type="chapter"><div class="chapter" id="data-structures-in-r">&#13;
<h1><span class="label">Chapter 7. </span>Data Structures in R</h1>&#13;
&#13;
&#13;
<p>Toward the end of <a data-type="xref" href="ch06.html#first-steps-r">Chapter 6</a> you learned how to work with packages in R. It’s common to <a data-primary="R programming language" data-secondary="packages" data-type="indexterm" id="idm46274544751832"/><a data-primary="packages" data-secondary="R" data-type="indexterm" id="idm46274544750888"/>load any necessary packages at the beginning of a script so that there are no surprises about required downloads later on. In that spirit, we’ll call in any packages needed for this chapter now. You may need to install some of these; if you need a refresher on doing that, look back to <a data-type="xref" href="ch06.html#first-steps-r">Chapter 6</a>. I’ll further explain these <a data-primary="tidyverse packages, R" data-secondary="installation of" data-type="indexterm" id="idm46274544748712"/><a data-primary="readxl package, R" data-type="indexterm" id="idm46274544747768"/><a data-primary="psych package, R" data-type="indexterm" id="idm46274544747096"/><a data-primary="writexl package, R" data-type="indexterm" id="idm46274544746424"/>packages as we get to them.</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># For importing and exploring data</code>&#13;
<code class="nf">library</code><code class="p">(</code><code class="n">tidyverse</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># For reading in Excel files</code>&#13;
<code class="nf">library</code><code class="p">(</code><code class="n">readxl</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># For descriptive statistics</code>&#13;
<code class="nf">library</code><code class="p">(</code><code class="n">psych</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># For writing data to Excel</code>&#13;
<code class="nf">library</code><code class="p">(</code><code class="n">writexl</code><code class="p">)</code></pre>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Vectors" data-type="sect1"><div class="sect1" id="idm46274544726840">&#13;
<h1>Vectors</h1>&#13;
&#13;
<p>In <a data-type="xref" href="ch06.html#first-steps-r">Chapter 6</a> you also learned about <a data-primary="data structures" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="ch7_term1"/><a data-primary="R programming language" data-secondary="data structures" data-type="indexterm" id="ch7_term2"/>calling functions on data of different modes, and assigning data to objects:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">my_number</code> <code class="o">&lt;-</code> <code class="m">8.2</code>&#13;
<code class="nf">sqrt</code><code class="p">(</code><code class="n">my_number</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] 2.863564</code>&#13;
&#13;
<code class="n">my_char</code> <code class="o">&lt;-</code> <code class="s">'Hello, world'</code>&#13;
<code class="nf">toupper</code><code class="p">(</code><code class="n">my_char</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] "HELLO, WORLD"</code></pre>&#13;
&#13;
<p>Chances are, you generally work with more than one piece of data at a time, so assigning each to its own object probably doesn’t sound too useful. In <a data-primary="ranges, Excel" data-type="indexterm" id="idm46274544710712"/>Excel, you can place data into contiguous cells, called a <em>range</em>, and easily operate on that data. <a data-type="xref" href="#excel-ranges">Figure 7-1</a> depicts some simple examples of operating on ranges of both numbers and text in Excel:</p>&#13;
&#13;
<figure><div class="figure" id="excel-ranges">&#13;
<img alt="Typical ranges in Excel" src="assets/aina_0701.png"/>&#13;
<h6><span class="label">Figure 7-1. </span>Operating on ranges in Excel</h6>&#13;
</div></figure>&#13;
&#13;
<p>Earlier I <a data-primary="objects" data-secondary="structure of" data-type="indexterm" id="idm46274544668872"/>likened the <em>mode</em> of an object to a particular type of shoe in a shoebox. The <em>structure</em> of an object is the shape, size, and architecture of the shoebox itself. In fact, you’ve already been <a data-primary="str() function, R" data-type="indexterm" id="idm46274544666616"/>finding the structure of an R object with the <code>str()</code> function.</p>&#13;
&#13;
<p>R contains <a data-primary="vectors" data-secondary="R data structures with" data-type="indexterm" id="ch7_term3"/>several object structures: we can store and operate on a bit of data by placing it in a <a data-primary="vectors" data-secondary="defined" data-type="indexterm" id="idm46274544663496"/>particular structure called a <em>vector</em>. Vectors are collections of one or more elements of data of the same type. Turns out we’ve already been using vectors, which we can confirm with the <code>is.vector()</code> function:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">is.vector</code><code class="p">(</code><code class="n">my_number</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code></pre>&#13;
&#13;
<p>Though <code>my_number</code> is a vector, it only contains one element—sort of <a data-primary="Excel" data-secondary="R and Python similarities to" data-type="indexterm" id="ch7_term4"/>like a single cell in Excel. In R, we would say this vector has a length of 1:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">length</code><code class="p">(</code><code class="n">my_number</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] 1</code></pre>&#13;
&#13;
<p>We can <a data-primary="c() function, R" data-type="indexterm" id="idm46274544651608"/>make a vector out of multiple elements, akin to an Excel range, with the <code>c()</code> function. This function is so called because it serves to <em>combine</em> multiple elements into a single vector. Let’s try it:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">my_numbers</code> <code class="o">&lt;-</code> <code class="nf">c</code><code class="p">(</code><code class="m">5</code><code class="p">,</code> <code class="m">8</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">7</code><code class="p">)</code></pre>&#13;
&#13;
<p>This object is indeed a vector, its data is numeric, and it has a length of 4:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">is.vector</code><code class="p">(</code><code class="n">my_numbers</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code>&#13;
&#13;
<code class="nf">str</code><code class="p">(</code><code class="n">my_numbers</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] num [1:4] 5 8 2 7</code>&#13;
&#13;
<code class="nf">length</code><code class="p">(</code><code class="n">my_numbers</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] 4</code></pre>&#13;
&#13;
<p>Let’s see what happens when we call a function on <code>my_numbers</code>:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">sqrt</code><code class="p">(</code><code class="n">my_numbers</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] 2.236068 2.828427 1.414214 2.645751</code></pre>&#13;
&#13;
<p><em>Now</em> we’re getting somewhere. We could similarly operate on a character vector:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">roster_names</code> <code class="o">&lt;-</code> <code class="nf">c</code><code class="p">(</code><code class="s">'Jack'</code><code class="p">,</code> <code class="s">'Jill'</code><code class="p">,</code> <code class="s">'Billy'</code><code class="p">,</code> <code class="s">'Susie'</code><code class="p">,</code> <code class="s">'Johnny'</code><code class="p">)</code>&#13;
<code class="nf">toupper</code><code class="p">(</code><code class="n">roster_names</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] "JACK"   "JILL"   "BILLY"  "SUSIE"  "JOHNNY"</code></pre>&#13;
&#13;
<p>By combining elements of data into vectors with the <code>c()</code> function, we were able to easily reproduce in R what was shown in Excel in <a data-type="xref" href="#excel-ranges">Figure 7-1</a>. What happens if elements of different types are assigned to the same vector? Let’s give it a try:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">my_vec</code> <code class="o">&lt;-</code> <code class="nf">c</code><code class="p">(</code><code class="s">'A'</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="s">'C'</code><code class="p">)</code>&#13;
<code class="n">my_vec</code>&#13;
<code class="c1">#&gt; [1] "A" "2" "C"</code>&#13;
&#13;
<code class="nf">str</code><code class="p">(</code><code class="n">my_vec</code><code class="p">)</code>&#13;
<code class="c1">#&gt; chr [1:3] "A" "2" "C"</code></pre>&#13;
&#13;
<p>R will <em>coerce</em> all <a data-primary="coercing of data elements" data-type="indexterm" id="idm46274544464344"/>elements to be of the same type so that they can be combined into a vector; for example, the numeric element <code>2</code> in the previous example was coerced into a character.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Indexing and Subsetting Vectors" data-type="sect1"><div class="sect1" id="idm46274544723064">&#13;
<h1>Indexing and Subsetting Vectors</h1>&#13;
&#13;
<p>In <a data-primary="indexing" data-secondary="vectors" data-type="indexterm" id="idm46274544461480"/><a data-primary="INDEX() function in Excel" data-type="indexterm" id="idm46274544420440"/><a data-primary="vectors" data-secondary="indexing and subsetting" data-type="indexterm" id="idm46274544419912"/>Excel, the <code>INDEX()</code> function serves to find the position of an element in a range. For example, I will use <code>INDEX()</code> in <a data-type="xref" href="#vector-index-excel">Figure 7-2</a> to extract the element in the third position of the named range <code>roster_names</code> (cells <code>A1:A5</code>):</p>&#13;
&#13;
<figure><div class="figure" id="vector-index-excel">&#13;
<img alt="Indexing in Excel" src="assets/aina_0702.png"/>&#13;
<h6><span class="label">Figure 7-2. </span>The <code>INDEX()</code> function on an Excel range</h6>&#13;
</div></figure>&#13;
&#13;
<p>We can similarly index a vector in R by affixing the desired index position inside brackets to the object name:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Get third element of roster_names vector</code>&#13;
<code class="n">roster_names</code><code class="p">[</code><code class="m">3</code><code class="p">]</code>&#13;
<code class="c1">#&gt; [1] "Billy"</code></pre>&#13;
&#13;
<p>Using this same notation, it’s possible to <a data-primary="subsetting" data-secondary="vectors" data-type="indexterm" id="idm46274544366376"/>select multiple elements by their index number, which we’ll call <em>subsetting</em>. Let’s again <a data-primary=": colon" data-type="indexterm" id="idm46274544365128"/><a data-primary="colon (:), R operator" data-type="indexterm" id="idm46274544364424"/>use the <code>:</code> operator to pull all elements between position 1 and 3:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Get first through third elements</code>&#13;
<code class="n">roster_names</code><code class="p">[</code><code class="m">1</code><code class="o">:</code><code class="m">3</code><code class="p">]</code>&#13;
<code class="c1">#&gt; [1] "Jack"  "Jill"  "Billy"</code></pre>&#13;
&#13;
<p>It’s possible to use functions here, too. <a data-primary="length() function, R" data-type="indexterm" id="idm46274544404296"/>Remember <code>length()</code>? We can use it to get everything through the last element in a vector:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Get second through last elements</code>&#13;
<code class="n">roster_names</code><code class="p">[</code><code class="m">2</code><code class="o">:</code><code class="nf">length</code><code class="p">(</code><code class="n">roster_names</code><code class="p">)]</code>&#13;
<code class="c1">#&gt; [1] "Jill"   "Billy"  "Susie"  "Johnny"</code></pre>&#13;
&#13;
<p>We could even <a data-primary="c() function, R" data-type="indexterm" id="idm46274544343880"/>use the <code>c()</code> function to index by a vector of nonconsecutive elements:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Get second and fifth elements</code>&#13;
<code class="n">roster_names</code><code class="nf">[c</code><code class="p">(</code><code class="m">2</code><code class="p">,</code> <code class="m">5</code><code class="p">)]</code>&#13;
<code class="c1">#&gt; [1] "Jill"   "Johnny"</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="From Excel Tables to R Data Frames" data-type="sect1"><div class="sect1" id="idm46274544462904">&#13;
<h1>From Excel Tables to R Data Frames</h1>&#13;
&#13;
<p>“This is <a data-startref="ch7_term1" data-type="indexterm" id="idm46274544310440"/><a data-startref="ch7_term2" data-type="indexterm" id="idm46274544309352"/><a data-startref="ch7_term3" data-type="indexterm" id="idm46274544308680"/><a data-startref="ch7_term4" data-type="indexterm" id="idm46274544339080"/>all well and good,” you may be thinking, “but I don’t just work with small ranges like these. What about whole data <em>tables</em>?” After all, in <a data-type="xref" href="ch01.html#foundations-of-eda">Chapter 1</a> you learned all about the importance of arranging data into variables and observations, <a data-primary="Star dataset example" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="idm46274544336776"/>such as the <em>star</em> data shown in <a data-type="xref" href="#two-dimensional-data-structure-excel">Figure 7-3</a>. This is an <a data-primary="two-dimensional data structures" data-type="indexterm" id="idm46274544334184"/>example of a <em>two-dimensional</em> data &#13;
<span class="keep-together">structure</span>.</p>&#13;
&#13;
<figure><div class="figure" id="two-dimensional-data-structure-excel">&#13;
<img alt="A two-dimensional data structure in Excel" src="assets/aina_0703.png"/>&#13;
<h6><span class="label">Figure 7-3. </span>A two-dimensional data structure in Excel</h6>&#13;
</div></figure>&#13;
&#13;
<p>Whereas <a data-primary="data frames, R" data-secondary="defined" data-type="indexterm" id="idm46274544275656"/>R’s vector is one-dimensional, the <em>data frame</em> allows for storing data in both rows <em>and</em> columns. This makes the <a data-primary="data frames, R" data-secondary="Excel tables and" data-type="indexterm" id="idm46274544273672"/>data frame the R equivalent of an Excel table. Put formally, a data frame is a two-dimensional data structure where records in each &#13;
<span class="keep-together">column</span> are of the same mode and all columns are of the same length. In R, like Excel, it’s typical to assign each column a label or name.</p>&#13;
&#13;
<p>We can <a data-primary="data.frame() function, R" data-type="indexterm" id="idm46274544271336"/><a data-primary="data frames, R" data-secondary="building" data-type="indexterm" id="ch7_term5"/>make a data frame from scratch with the <code>data.frame()</code> function. Let’s build and then print a data frame called <code>roster</code>:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">roster</code> <code class="o">&lt;-</code> <code class="nf">data.frame</code><code class="p">(</code>&#13;
   <code class="n">name</code> <code class="o">=</code> <code class="nf">c</code><code class="p">(</code><code class="s">'Jack'</code><code class="p">,</code> <code class="s">'Jill'</code><code class="p">,</code> <code class="s">'Billy'</code><code class="p">,</code> <code class="s">'Susie'</code><code class="p">,</code> <code class="s">'Johnny'</code><code class="p">),</code>&#13;
   <code class="n">height</code> <code class="o">=</code> <code class="nf">c</code><code class="p">(</code><code class="m">72</code><code class="p">,</code> <code class="m">65</code><code class="p">,</code> <code class="m">68</code><code class="p">,</code> <code class="m">69</code><code class="p">,</code> <code class="m">66</code><code class="p">),</code>&#13;
   <code class="n">injured</code> <code class="o">=</code> <code class="nf">c</code><code class="p">(</code><code class="kc">FALSE</code><code class="p">,</code> <code class="kc">TRUE</code><code class="p">,</code> <code class="kc">FALSE</code><code class="p">,</code> <code class="kc">FALSE</code><code class="p">,</code> <code class="kc">TRUE</code><code class="p">))</code>&#13;
&#13;
<code class="n">roster</code>&#13;
<code class="c1">#&gt;     name height injured</code>&#13;
<code class="c1">#&gt; 1   Jack     72   FALSE</code>&#13;
<code class="c1">#&gt; 2   Jill     65    TRUE</code>&#13;
<code class="c1">#&gt; 3  Billy     68   FALSE</code>&#13;
<code class="c1">#&gt; 4  Susie     69   FALSE</code>&#13;
<code class="c1">#&gt; 5 Johnny     66    TRUE</code></pre>&#13;
&#13;
<p>We’ve <a data-primary="c() function, R" data-type="indexterm" id="idm46274544248600"/>used the <code>c()</code> function before to combine elements into a vector. And indeed, a <a data-primary="data frames, R" data-secondary="as list of vectors" data-secondary-sortas="list of vectors" data-type="indexterm" id="idm46274544195512"/><a data-primary="vectors" data-secondary="R data frames as list of" data-type="indexterm" id="idm46274544194264"/>data frame can be thought of as a <em>collection of vectors</em> of equal length. At three variables and five observations, <code>roster</code> is a pretty miniscule data frame. Fortunately, a data frame doesn’t always have to be built from scratch like this. For instance, R comes <a data-primary="datasets" data-secondary="with R" data-secondary-sortas="R" data-type="indexterm" id="ch7_term6"/><a data-primary="R programming language" data-secondary="datasets" data-type="indexterm" id="ch7_term7"/>installed with many datasets. You can <a data-primary="data() function, R" data-type="indexterm" id="ch7_term8"/>view a listing of them with this function:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">data</code><code class="p">()</code></pre>&#13;
&#13;
<p>A menu labeled “R data sets” will appear as a new window in your scripts pane. Many, but not all, of these datasets are structured as data frames. For example, you may have encountered the <a data-primary="iris dataset" data-type="indexterm" id="idm46274544185832"/>famous <em>iris</em> dataset before; this is available out of the box in R.</p>&#13;
&#13;
<p>Just like with any object, it’s possible to print <em>iris</em>; however, this will quickly overwhelm your console with 150 rows of data. (Imagine the problem compounded to thousands or millions of rows.) It’s more <a data-primary="head() method" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="idm46274544183736"/>common instead to print just the first few rows with the <code>head()</code> function:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">head</code><code class="p">(</code><code class="n">iris</code><code class="p">)</code>&#13;
<code class="c1">#&gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species</code>&#13;
<code class="c1">#&gt; 1          5.1         3.5          1.4         0.2  setosa</code>&#13;
<code class="c1">#&gt; 2          4.9         3.0          1.4         0.2  setosa</code>&#13;
<code class="c1">#&gt; 3          4.7         3.2          1.3         0.2  setosa</code>&#13;
<code class="c1">#&gt; 4          4.6         3.1          1.5         0.2  setosa</code>&#13;
<code class="c1">#&gt; 5          5.0         3.6          1.4         0.2  setosa</code>&#13;
<code class="c1">#&gt; 6          5.4         3.9          1.7         0.4  setosa</code></pre>&#13;
&#13;
<p>We can <a data-primary="is.data.frame() function, R" data-type="indexterm" id="idm46274544154504"/>confirm that <code>iris</code> is indeed a data frame with <code>is.data.frame()</code>:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">is.data.frame</code><code class="p">(</code><code class="n">iris</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code></pre>&#13;
&#13;
<p class="pagebreak-before">Another way to <a data-primary="str() function, R" data-type="indexterm" id="idm46274544173016"/>get to know our new dataset besides printing it is with the <code>str()</code> function:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">str</code><code class="p">(</code><code class="n">iris</code><code class="p">)</code>&#13;
<code class="c1">#&gt; 'data.frame':	150 obs. of  5 variables:</code>&#13;
<code class="c1">#&gt; $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</code>&#13;
<code class="c1">#&gt; $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...</code>&#13;
<code class="c1">#&gt; $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</code>&#13;
<code class="c1">#&gt; $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...</code>&#13;
<code class="c1">#&gt; $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 ...</code></pre>&#13;
&#13;
<p>The output returns the size of the data frame and some information about its columns. You’ll see that four of them are numeric. The <a data-primary="factors, R" data-type="indexterm" id="idm46274544168152"/>last, <em>Species</em>, is a <em>factor</em>. Factors are a <a data-primary="variables" data-secondary="storing as factors" data-type="indexterm" id="idm46274544166584"/>special way to store variables that take on a limited number of values. They are especially <a data-primary="categorical variables" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="idm46274544165336"/>helpful for storing <em>categorical</em> variables: in fact, you’ll see that <em>Species</em> is described as having three <em>levels</em>, which is a term we’ve used statistically in describing categorical variables.</p>&#13;
&#13;
<p>Though outside the scope of this book, factors carry many benefits for working with categorical variables, such as offering more memory-efficient storage. To learn more about factors, <a data-primary="factor() function, R" data-type="indexterm" id="idm46274544040024"/>check out R’s help documentation for the <code>factor()</code> function. (This can be done with the <code>?</code> operator.) The <code>tidyverse</code> also <a data-primary="tidyverse packages, R" data-secondary="forcats for factors" data-type="indexterm" id="idm46274544037880"/>includes <code>forcats</code> as a core package to assist in working with factors.</p>&#13;
&#13;
<p>In addition to the datasets that are preloaded with R, many packages include their own data. You can also find out about them with the <code>data()</code> function. Let’s <a data-primary="psych package, R" data-type="indexterm" id="idm46274544035416"/>see if the <code>psych</code> package includes any datasets:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">data</code><code class="p">(</code><code class="n">package</code> <code class="o">=</code> <code class="s">'psych'</code><code class="p">)</code></pre>&#13;
&#13;
<p>The “R data sets” menu will again launch in a new window; this time, an additional section called “Data sets in package <code>psych</code>" will appear.  One of these datasets is called <code>sat.act</code>. To make this dataset available to our R session, we can again use the <code>data()</code> function. It’s now an assigned R object that you can find in your Environment menu and use like any other object; let’s confirm it’s a data <a data-startref="ch7_term5" data-type="indexterm" id="idm46274543989192"/><a data-startref="ch7_term6" data-type="indexterm" id="idm46274543988520"/><a data-startref="ch7_term7" data-type="indexterm" id="idm46274543987848"/><a data-startref="ch7_term8" data-type="indexterm" id="idm46274544027896"/>frame:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">data</code><code class="p">(</code><code class="s">'sat.act'</code><code class="p">)</code>&#13;
<code class="nf">str</code><code class="p">(</code><code class="n">sat.act</code><code class="p">)</code>&#13;
<code class="c1">#&gt; 'data.frame':	700 obs. of  6 variables:</code>&#13;
<code class="c1">#&gt; $ gender   : int  2 2 2 1 1 1 2 1 2 2 ...</code>&#13;
<code class="c1">#&gt; $ education: int  3 3 3 4 2 5 5 3 4 5 ...</code>&#13;
<code class="c1">#&gt; $ age      : int  19 23 20 27 33 26 30 19 23 40 ...</code>&#13;
<code class="c1">#&gt; $ ACT      : int  24 35 21 26 31 28 36 22 22 35 ...</code>&#13;
<code class="c1">#&gt; $ SATV     : int  500 600 480 550 600 640 610 520 400 730 ...</code>&#13;
<code class="c1">#&gt; $ SATQ     : int  500 500 470 520 550 640 500 560 600 800 ...</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Importing Data in R" data-type="sect1"><div class="sect1" id="idm46274543969384">&#13;
<h1>Importing Data in R</h1>&#13;
&#13;
<p>When working in Excel, it’s common to store, analyze, and present data all within the same workbook. By contrast, it’s uncommon to store data from inside an R script. Generally, <a data-primary="data imports" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="ch7_term9"/><a data-primary="R programming language" data-secondary="data, importing of" data-type="indexterm" id="ch7_term10"/>data will be imported from external sources, ranging from text files and databases to web pages and application programming interfaces (APIs) to images and audio, and only then analyzed in R. Results of the analysis are then frequently exported to still different sources. Let’s start this process by reading data from, not surprisingly, <a data-primary=".xlsx files" data-primary-sortas="xlsx files" data-type="indexterm" id="idm46274543958856"/>Excel workbooks (file extension <em>.xlsx</em>), and <a data-primary=".csv files" data-primary-sortas="csv files" data-type="indexterm" id="idm46274543957400"/>comma-separated value files (file extension <em>.csv</em>).</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46274543955816">&#13;
<h5>Base R Versus the tidyverse</h5>&#13;
<p>In <a data-type="xref" href="ch06.html#first-steps-r">Chapter 6</a> you learned about the relationship between <a data-primary="base R" data-type="indexterm" id="idm46274543953336"/><a data-primary="tidyverse packages, R" data-secondary="versus base R" data-secondary-sortas="base R" data-type="indexterm" id="idm46274543952664"/><a data-primary="R programming language" data-secondary="base R" data-type="indexterm" id="idm46274543951448"/>base R and R packages. Although packages can assist in doing things that would be quite difficult to do in base R, they sometimes offer alternative ways to do the same thing. For example, base R does include functions for reading <em>.csv</em> files (but not Excel files). It also includes options for plotting. We’ll be using features of the <code>tidyverse</code> for these and other data needs. Depending on what you’re looking to do, there’s nothing wrong with the base R counterparts. I’ve decided to focus on <code>tidyverse</code> tools here because its syntax is more intelligible to Excel users.</p>&#13;
</div></aside>&#13;
&#13;
<p>To import data in R, it’s important to <a data-primary="file paths and directories" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="ch7_term11"/><a data-primary="R programming language" data-secondary="file paths and directories" data-type="indexterm" id="ch7_term12"/>understand how file paths and directories work. Each time you use the program, you’re <a data-primary="working directories" data-type="indexterm" id="idm46274543945080"/>working from a “home base” on your computer, or a <em>working directory</em>. Any files you refer to from R, such as when you import a dataset, are assumed to be located relative to that <a data-primary="getwd() function, R" data-type="indexterm" id="idm46274543943704"/>working directory. The <code>getwd()</code> function prints the working directory’s file path. If you are on Windows, you will see a result similar to this:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">getwd</code><code class="p">()</code>&#13;
<code class="c1">#&gt; [1] "C:/Users/User/Documents"</code></pre>&#13;
&#13;
<p>For Mac, it will look something like this:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">getwd</code><code class="p">()</code>&#13;
<code class="c1">#&gt; [1] "/Users/user"</code></pre>&#13;
&#13;
<p>R has a global default working directory, which is the same at each session startup. I’m assuming that you are running files from a downloaded or cloned copy of the book’s companion repository, and that you are also working from an R script in that same folder. In that case, you’re best off <a data-primary="setwd() function, R" data-type="indexterm" id="idm46274543901256"/>setting the working directory to this folder, which can be done with the <code>setwd()</code> function. If you’re not used to working with file paths, it can be tricky to fill this out correctly; fortunately, RStudio includes a menu-driven approach for doing it.</p>&#13;
&#13;
<p>To change your working directory to the same folder as your current R script, go to Session → Set Working Directory → To Source File Location. You should see the results of the <code>setwd()</code> function appear in the console. Try running <code>getwd()</code> again; you’ll see that you are now in a different working directory.</p>&#13;
&#13;
<p>Now that we’ve established the working directory, let’s practice interacting with files relative to that directory. I have <a data-primary=".csv files" data-primary-sortas="csv files" data-type="indexterm" id="idm46274543911160"/>placed a <em>test-file.csv</em> file in the main folder of the book repository. We <a data-primary="file.exists() function, R" data-type="indexterm" id="idm46274543909576"/>can use the <code>file.exists()</code> function to check whether we can successfully locate it:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">file.exists</code><code class="p">(</code><code class="s">'test-file.csv'</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code></pre>&#13;
&#13;
<p>I have also placed a copy of this file in the <em>test-folder</em> subfolder of the repository. This time, we’ll need to specify which subfolder to look in:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">file.exists</code><code class="p">(</code><code class="s">'test-folder/test-file.csv'</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code></pre>&#13;
&#13;
<p>What happens if we need to go <em>up</em> a folder? Try placing a copy of <em>test-file</em> in whatever folder is one above your current directory. We can use <code>..</code> to tell R to look one &#13;
<span class="keep-together">folder up:</span></p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">file.exists</code><code class="p">(</code><code class="s">'../test-file.csv'</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code></pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46274543818952">&#13;
<h5>RStudio Projects</h5>&#13;
<p>In the book repository, you will find a file called <em>aia-book.Rproj</em>. This is an <a data-primary="RStudio, R" data-secondary="project files" data-type="indexterm" id="idm46274543845768"/><a data-primary="project files" data-type="indexterm" id="idm46274543844760"/>RStudio project file. A project is a great way to preserve your work; for example, the project will maintain the configuration of windows and files that you had open in RStudio when you left. In addition, the project will automatically set your working directory to the <em>project</em> directory, so that you won’t need a hardcoded <code>setwd()</code> for each script. When you work with R in this repository, then, consider doing so via the <em>.Rproj</em> file. You can then open any file via the Files pane in the lower right pane of RStudio.</p>&#13;
</div></aside>&#13;
&#13;
<p>Now that you have the hang of locating files in R, let’s actually read some in. The book repository <a data-primary="datasets" data-secondary="with R" data-secondary-sortas="R" data-type="indexterm" id="ch7_term13"/><a data-primary="R programming language" data-secondary="datasets" data-type="indexterm" id="ch7_term14"/>contains a <a href="https://oreil.ly/wtneb"> <em>datasets</em> folder</a>, under which is a <em>star</em> subfolder. This  contains, among other things, two files: <em>districts.csv</em> and <em>star.xlsx</em>.</p>&#13;
&#13;
<p>To read in <em>.csv</em> files, we can <a data-primary="read_csv() function, R and Python" data-type="indexterm" id="idm46274543801832"/>use the <code>read_csv()</code> function <a data-primary="readr package, R" data-type="indexterm" id="idm46274543800728"/><a data-primary="tidyverse packages, R" data-secondary="readr" data-type="indexterm" id="idm46274543799992"/>from <code>readr</code>. This package is part of the <code>tidyverse</code> collection, so we don’t need to install or load anything new. We will pass the location of the file into the function. (Do you see now why understanding working directories and file paths was helpful?)</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">read_csv</code><code class="p">(</code><code class="s">'datasets/star/districts.csv'</code><code class="p">)</code>&#13;
<code class="c1">#&gt;-- Column specification ---------------------------</code>&#13;
<code class="c1">#&gt; cols(</code>&#13;
<code class="c1">#&gt;  schidkn = col_double(),</code>&#13;
<code class="c1">#&gt;  school_name = col_character(),</code>&#13;
<code class="c1">#&gt;  county = col_character()</code>&#13;
<code class="c1">#&gt; )</code>&#13;
<code class="c1">#&gt;</code>&#13;
<code class="c1">#&gt; # A tibble: 89 x 3</code>&#13;
<code class="c1">#&gt;   schidkn school_name     county</code>&#13;
<code class="c1">#&gt;     &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;</code>&#13;
<code class="c1">#&gt; 1       1 Rosalia         New Liberty</code>&#13;
<code class="c1">#&gt; 2       2 Montgomeryville Topton</code>&#13;
<code class="c1">#&gt; 3       3 Davy            Wahpeton</code>&#13;
<code class="c1">#&gt; 4       4 Steelton        Palestine</code>&#13;
<code class="c1">#&gt; 5       5 Bonifay         Reddell</code>&#13;
<code class="c1">#&gt; 6       6 Tolchester      Sattley</code>&#13;
<code class="c1">#&gt; 7       7 Cahokia         Sattley</code>&#13;
<code class="c1">#&gt; 8       8 Plattsmouth     Sugar Mountain</code>&#13;
<code class="c1">#&gt; 9       9 Bainbridge      Manteca</code>&#13;
<code class="c1">#&gt;10      10 Bull Run        Manteca</code>&#13;
<code class="c1">#&gt; # ... with 79 more rows</code></pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46274543795416">&#13;
<h5>RStudio’s Import Dataset Wizard</h5>&#13;
<p>If you are struggling to import a dataset, try <a data-primary="RStudio, R" data-secondary="importing datasets with" data-type="indexterm" id="idm46274543764344"/>RStudio’s menu-driven data importer by heading to File → Import Dataset. You will be presented with a series of options to walk you through the process, including the ability to navigate to the source file via your computer’s file explorer.</p>&#13;
</div></aside>&#13;
&#13;
<p>This <a data-primary="data frames, R" data-secondary="building" data-type="indexterm" id="idm46274543762536"/>results in a fair amount of output. First, our columns are specified, and we’re told which functions were used to parse the data into R. Next, the <a data-primary="tibble, R" data-type="indexterm" id="idm46274543761240"/>first few rows of the data are listed, as a <em>tibble</em>. This is a modernized take on the data frame. It’s still a data frame, and behaves mostly like a data frame, with some modifications to make it easier to work with, especially within the <code>tidyverse</code>.</p>&#13;
&#13;
<p>Although we were able to read our data into R, we won’t be able to do much with it unless we assign it to an object:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">districts</code> <code class="o">&lt;-</code> <code class="nf">read_csv</code><code class="p">(</code><code class="s">'datasets/star/districts.csv'</code><code class="p">)</code></pre>&#13;
&#13;
<p>Among its many benefits, one nice thing about the tibble is we can print it without having to worry about overwhelming the console output; the first 10 rows only are printed:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">districts</code>&#13;
<code class="c1">#&gt; # A tibble: 89 x 3</code>&#13;
<code class="c1">#&gt;   schidkn school_name     county</code>&#13;
<code class="c1">#&gt;     &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;</code>&#13;
<code class="c1">#&gt; 1       1 Rosalia         New Liberty</code>&#13;
<code class="c1">#&gt; 2       2 Montgomeryville Topton</code>&#13;
<code class="c1">#&gt; 3       3 Davy            Wahpeton</code>&#13;
<code class="c1">#&gt; 4       4 Steelton        Palestine</code>&#13;
<code class="c1">#&gt; 5       5 Bonifay         Reddell</code>&#13;
<code class="c1">#&gt; 6       6 Tolchester      Sattley</code>&#13;
<code class="c1">#&gt; 7       7 Cahokia         Sattley</code>&#13;
<code class="c1">#&gt; 8       8 Plattsmouth     Sugar Mountain</code>&#13;
<code class="c1">#&gt; 9       9 Bainbridge      Manteca</code>&#13;
<code class="c1">#&gt; 10      10 Bull Run        Manteca</code>&#13;
<code class="c1">#&gt; # ... with 79 more rows</code></pre>&#13;
&#13;
<p><code>readr</code> does <a data-primary="readr package, R" data-type="indexterm" id="idm46274543711512"/>not include a way to import Excel workbooks; we will instead <a data-primary="readxlsx() function, R" data-type="indexterm" id="idm46274543710776"/>use the <code>readxl</code> package. While it is part of the <code>tidyverse</code>, this package does not load with the core suite of packages like <code>readr</code> does, which is why we imported it separately at the beginning of the chapter.</p>&#13;
&#13;
<p>We’ll use the <code>read_xlsx()</code> function to similarly <a data-primary="Star dataset example" data-secondary="in R" data-secondary-sortas="R" data-type="indexterm" id="idm46274543707944"/>import <em>star.xlsx</em> as a tibble:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">star</code> <code class="o">&lt;-</code> <code class="nf">read_xlsx</code><code class="p">(</code><code class="s">'datasets/star/star.xlsx'</code><code class="p">)</code>&#13;
<code class="nf">head</code><code class="p">(</code><code class="n">star</code><code class="p">)</code>&#13;
<code class="c1">#&gt; # A tibble: 6 x 8</code>&#13;
<code class="c1">#&gt;  tmathssk treadssk classk       totexpk sex   freelunk race  schidkn</code>&#13;
<code class="c1">#&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;</code>&#13;
<code class="c1">#&gt; 1      473      447 small.class        7 girl  no       white      63</code>&#13;
<code class="c1">#&gt; 2      536      450 small.class       21 girl  no       black      20</code>&#13;
<code class="c1">#&gt; 3      463      439 regular.wit~       0 boy   yes      black      19</code>&#13;
<code class="c1">#&gt; 4      559      448 regular           16 boy   no       white      69</code>&#13;
<code class="c1">#&gt; 5      489      447 small.class        5 boy   yes      white      79</code>&#13;
<code class="c1">#&gt; 6      454      431 regular            8 boy   yes      white       5</code></pre>&#13;
&#13;
<p>There’s more you can do with <code>readxl</code>, such as reading in <em>.xls</em> or <em>.xlsm</em> files and reading in specific worksheets or ranges of a <a data-startref="ch7_term9" data-type="indexterm" id="idm46274543226696"/><a data-startref="ch7_term10" data-type="indexterm" id="idm46274543225992"/><a data-startref="ch7_term11" data-type="indexterm" id="idm46274543225320"/><a data-startref="ch7_term12" data-type="indexterm" id="idm46274543224648"/><a data-startref="ch7_term13" data-type="indexterm" id="idm46274543223976"/><a data-startref="ch7_term14" data-type="indexterm" id="idm46274543223304"/>workbook. To learn more, check out the package’s <a href="https://oreil.ly/kuZPE">documentation</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Exploring a Data Frame" data-type="sect1"><div class="sect1" id="idm46274544001176">&#13;
<h1>Exploring a Data Frame</h1>&#13;
&#13;
<p>Earlier you learned about <code>head()</code> and <code>str()</code> to size up a data frame. Here are a few more <a data-primary="data frames, R" data-secondary="viewing" data-type="indexterm" id="ch7_term15"/>helpful functions. <a data-primary="View() function, R" data-type="indexterm" id="idm46274543198216"/>First, <code>View()</code> is a function from RStudio whose output will be very welcome to you as an Excel user:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">View</code><code class="p">(</code><code class="n">star</code><code class="p">)</code></pre>&#13;
&#13;
<p>After calling this function, a <a data-primary="Excel" data-secondary="R and Python similarities to" data-type="indexterm" id="idm46274543193592"/>spreadsheet-like viewer will appear in a new window in your Scripts pane. You can sort, filter, and explore your dataset much like you would in Excel. However, as the function implies, it’s for viewing <em>only</em>. You cannot make changes to the data frame from this window.</p>&#13;
&#13;
<p>The <code>glimpse()</code> function <a data-primary="glimpse() function, R" data-type="indexterm" id="idm46274543144104"/>is another way to print several records of the data frame, along with its column names and types. This function comes from <code>dplyr</code>, which is part of the <code>tidyverse</code>. We will lean <a data-primary="data manipulation" data-secondary="dplyr for" data-type="indexterm" id="idm46274543142264"/><a data-primary="dplyr, R" data-secondary="data manipulation with" data-type="indexterm" id="idm46274543190664"/>heavily on <code>dplyr</code> in later chapters to manipulate data.</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">glimpse</code><code class="p">(</code><code class="n">star</code><code class="p">)</code>&#13;
<code class="c1">#&gt; Rows: 5,748</code>&#13;
<code class="c1">#&gt; Columns: 8</code>&#13;
<code class="c1">#&gt; $ tmathssk &lt;dbl&gt; 473, 536, 463, 559, 489,...</code>&#13;
<code class="c1">#&gt; $ treadssk &lt;dbl&gt; 447, 450, 439, 448, 447,...</code>&#13;
<code class="c1">#&gt; $ classk   &lt;chr&gt; "small.class", "small.cl...</code>&#13;
<code class="c1">#&gt; $ totexpk  &lt;dbl&gt; 7, 21, 0, 16, 5, 8, 17, ...</code>&#13;
<code class="c1">#&gt; $ sex      &lt;chr&gt; "girl", "girl", "boy", "...</code>&#13;
<code class="c1">#&gt; $ freelunk &lt;chr&gt; "no", "no", "yes", "no",...</code>&#13;
<code class="c1">#&gt; $ race     &lt;chr&gt; "white", "black", "black...</code>&#13;
<code class="c1">#&gt; $ schidkn  &lt;dbl&gt; 63, 20, 19, 69, 79, 5, 1...</code></pre>&#13;
&#13;
<p>There’s <a data-primary="summary() function, R" data-type="indexterm" id="idm46274543181208"/><a data-primary="base R" data-type="indexterm" id="idm46274543180600"/><a data-primary="R programming language" data-secondary="base R" data-type="indexterm" id="idm46274543179960"/>also the <code>summary()</code> function from base R, which produces summaries of various R objects. When a data frame is passed into <code>summary()</code>, some <a data-primary="descriptive statistics" data-secondary="with R" data-secondary-sortas="R" data-type="indexterm" id="idm46274543177944"/>basic descriptive statistics are provided:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">summary</code><code class="p">(</code><code class="n">star</code><code class="p">)</code>&#13;
<code class="c1">#&gt;     tmathssk        treadssk        classk             totexpk</code>&#13;
<code class="c1">#&gt;  Min.   :320.0   Min.   :315.0   Length:5748        Min.   : 0.000</code>&#13;
<code class="c1">#&gt;  1st Qu.:454.0   1st Qu.:414.0   Class :character   1st Qu.: 5.000</code>&#13;
<code class="c1">#&gt;  Median :484.0   Median :433.0   Mode  :character   Median : 9.000</code>&#13;
<code class="c1">#&gt;  Mean   :485.6   Mean   :436.7                      Mean   : 9.307</code>&#13;
<code class="c1">#&gt;  3rd Qu.:513.0   3rd Qu.:453.0                      3rd Qu.:13.000</code>&#13;
<code class="c1">#&gt;  Max.   :626.0   Max.   :627.0                      Max.   :27.000</code>&#13;
<code class="c1">#&gt;      sex              freelunk             race</code>&#13;
<code class="c1">#&gt;  Length:5748        Length:5748        Length:5748</code>&#13;
<code class="c1">#&gt;  Class :character   Class :character   Class :character</code>&#13;
<code class="c1">#&gt;  Mode  :character   Mode  :character   Mode  :character</code>&#13;
<code class="c1">#&gt;     schidkn</code>&#13;
<code class="c1">#&gt;  Min.   : 1.00</code>&#13;
<code class="c1">#&gt;  1st Qu.:20.00</code>&#13;
<code class="c1">#&gt;  Median :39.00</code>&#13;
<code class="c1">#&gt;  Mean   :39.84</code>&#13;
<code class="c1">#&gt;  3rd Qu.:60.00</code>&#13;
<code class="c1">#&gt;  Max.   :80.00</code></pre>&#13;
&#13;
<p>Many other packages include their own version of descriptive statistics; one of my <a data-primary="describe() function, R" data-type="indexterm" id="idm46274543063720"/><a data-primary="psych package, R" data-type="indexterm" id="idm46274543063112"/>favorite is the <code>describe()</code> function from <code>psych</code>:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="nf">describe</code><code class="p">(</code><code class="n">star</code><code class="p">)</code>&#13;
<code class="c1">#&gt;           vars    n   mean    sd median trimmed   mad min max range  skew</code>&#13;
<code class="c1">#&gt; tmathssk     1 5748 485.65 47.77    484  483.20 44.48 320 626   306  0.47</code>&#13;
<code class="c1">#&gt; treadssk     2 5748 436.74 31.77    433  433.80 28.17 315 627   312  1.34</code>&#13;
<code class="c1">#&gt; classk*      3 5748   1.95  0.80      2    1.94  1.48   1   3     2  0.08</code>&#13;
<code class="c1">#&gt; totexpk      4 5748   9.31  5.77      9    9.00  5.93   0  27    27  0.42</code>&#13;
<code class="c1">#&gt; sex*         5 5748   1.49  0.50      1    1.48  0.00   1   2     1  0.06</code>&#13;
<code class="c1">#&gt; freelunk*    6 5748   1.48  0.50      1    1.48  0.00   1   2     1  0.07</code>&#13;
<code class="c1">#&gt; race*        7 5748   2.35  0.93      3    2.44  0.00   1   3     2 -0.75</code>&#13;
<code class="c1">#&gt; schidkn      8 5748  39.84 22.96     39   39.76 29.65   1  80    79  0.04</code>&#13;
<code class="c1">#&gt;           kurtosis   se</code>&#13;
<code class="c1">#&gt; tmathssk      0.29 0.63</code>&#13;
<code class="c1">#&gt; treadssk      3.83 0.42</code>&#13;
<code class="c1">#&gt; classk*      -1.45 0.01</code>&#13;
<code class="c1">#&gt; totexpk      -0.21 0.08</code>&#13;
<code class="c1">#&gt; sex*         -2.00 0.01</code>&#13;
<code class="c1">#&gt; freelunk*    -2.00 0.01</code>&#13;
<code class="c1">#&gt; race*        -1.43 0.01</code>&#13;
<code class="c1">#&gt; schidkn      -1.23 0.30</code></pre>&#13;
&#13;
<p>If you’re not familiar with all of these descriptive statistics, you <a data-startref="ch7_term15" data-type="indexterm" id="idm46274543033320"/>know what to do: <em>check the function’s documentation</em>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Indexing and Subsetting Data Frames" data-type="sect1"><div class="sect1" id="idm46274543201784">&#13;
<h1>Indexing and Subsetting Data Frames</h1>&#13;
&#13;
<p>Earlier in this section we created a small data frame <code>roster</code> containing the names and heights of four individuals. Let’s demonstrate some <a data-primary="data frames, R" data-secondary="indexing and subsetting" data-type="indexterm" id="ch7_term16"/>basic data frame manipulation techniques with this object.</p>&#13;
&#13;
<p>In Excel, you can <a data-primary="INDEX() function in Excel" data-type="indexterm" id="idm46274542996488"/><a data-primary="indexing" data-secondary="data frames, R" data-type="indexterm" id="idm46274542995784"/>use the <code>INDEX()</code> function to refer to both the row and column positions of a table, as shown in <a data-type="xref" href="#data-frame-index-excel">Figure 7-4</a>:</p>&#13;
&#13;
<figure class="width-75"><div class="figure" id="data-frame-index-excel">&#13;
<img alt="Indexing in Excel" src="assets/aina_0704.png"/>&#13;
<h6><span class="label">Figure 7-4. </span>The <code>INDEX()</code> function on an Excel table</h6>&#13;
</div></figure>&#13;
&#13;
<p>This will <a data-primary="Excel" data-secondary="R and Python similarities to" data-type="indexterm" id="idm46274542990360"/>work similarly in R. We’ll use the same bracket notation as we to with index vectors, but this time we’ll refer to both the row and column position:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Third row, second column of data frame</code>&#13;
<code class="n">roster</code><code class="p">[</code><code class="m">3</code><code class="p">,</code> <code class="m">2</code><code class="p">]</code>&#13;
<code class="c1">#&gt; [1] 68</code></pre>&#13;
&#13;
<p>Again, we can <a data-primary=": colon" data-type="indexterm" id="idm46274542985288"/><a data-primary="colon (:), R operator" data-type="indexterm" id="idm46274542983032"/>use the <code>:</code> operator to retrieve all elements within a given range:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Second through fourth rows, first through third columns</code>&#13;
<code class="n">roster</code><code class="p">[</code><code class="m">2</code><code class="o">:</code><code class="m">4</code><code class="p">,</code> <code class="m">1</code><code class="o">:</code><code class="m">3</code><code class="p">]</code>&#13;
<code class="c1">#&gt;    name height injured</code>&#13;
<code class="c1">#&gt; 2  Jill     65    TRUE</code>&#13;
<code class="c1">#&gt; 3 Billy     68   FALSE</code>&#13;
<code class="c1">#&gt; 4 Susie     69   FALSE</code></pre>&#13;
&#13;
<p>It’s also possible to select an entire row or column by leaving its index blank, or to <a data-primary="c() function, R" data-type="indexterm" id="idm46274542966696"/>use the <code>c()</code> function to <a data-primary="subsetting" data-secondary="data frames, R" data-type="indexterm" id="idm46274542925640"/>subset nonconsecutive elements:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Second and third rows only</code>&#13;
<code class="n">roster</code><code class="p">[</code><code class="m">2</code><code class="o">:</code><code class="m">3</code><code class="p">,]</code>&#13;
<code class="c1">#&gt;    name height injured</code>&#13;
<code class="c1">#&gt; 2  Jill     65    TRUE</code>&#13;
<code class="c1">#&gt; 3 Billy     68   FALSE</code>&#13;
&#13;
<code class="c1"># First and third columns only</code>&#13;
<code class="n">roster</code><code class="p">[,</code> <code class="nf">c</code><code class="p">(</code><code class="m">1</code><code class="p">,</code><code class="m">3</code><code class="p">)]</code>&#13;
<code class="c1">#&gt;     name injured</code>&#13;
<code class="c1">#&gt; 1   Jack   FALSE</code>&#13;
<code class="c1">#&gt; 2   Jill    TRUE</code>&#13;
<code class="c1">#&gt; 3  Billy   FALSE</code>&#13;
<code class="c1">#&gt; 4  Susie   FALSE</code>&#13;
<code class="c1">#&gt; 5 Johnny    TRUE</code></pre>&#13;
&#13;
<p>If we just want to access one column of the data frame, we can use the <code>$</code> operator. Interestingly, this <a data-primary="vectors" data-secondary="R data frames as list of" data-type="indexterm" id="idm46274542905656"/><a data-primary="data frames, R" data-secondary="as list of vectors" data-secondary-sortas="list of vectors" data-type="indexterm" id="idm46274542904712"/>results in a <em>vector</em>:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="n">roster</code><code class="o">$</code><code class="n">height</code>&#13;
<code class="c1">#&gt; [1] 72 65 68 69 66</code>&#13;
<code class="nf">is.vector</code><code class="p">(</code><code class="n">roster</code><code class="o">$</code><code class="n">height</code><code class="p">)</code>&#13;
<code class="c1">#&gt; [1] TRUE</code></pre>&#13;
&#13;
<p>This confirms that a data frame is indeed a list of vectors of equal <a data-startref="ch7_term16" data-type="indexterm" id="idm46274542869880"/>length.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46274542869016">&#13;
<h5>Other Data Structures in R</h5>&#13;
<p>We’ve <a data-primary="data structures" data-secondary="in R" data-secondary-sortas="R" data-seealso="data frames, R" data-type="indexterm" id="idm46274542867784"/><a data-primary="R programming language" data-secondary="data structures" data-seealso="data frames, R" data-type="indexterm" id="idm46274542819112"/>focused on R’s vector and data frame structures as they are equivalents to Excel’s ranges and tables and those you’re most likely to work with for data analysis. There are, however, several other data structures in base R such as matrices and lists. To learn <a data-primary="data structures" data-secondary="further reading on" data-type="indexterm" id="idm46274542817480"/>more about these structures and how they relate to vectors and data frames, check out Hadley Wickham’s <em>Advanced R</em>, 2nd edition (Chapman &amp; Hall).</p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Writing Data Frames" data-type="sect1"><div class="sect1" id="idm46274543031576">&#13;
<h1>Writing Data Frames</h1>&#13;
&#13;
<p>As mentioned earlier, it’s typical to read data into R, operate on it, and then export the results elsewhere. To <a data-primary="writing dataframes" data-type="indexterm" id="idm46274542813880"/><a data-primary="data frames, R" data-secondary="writing" data-type="indexterm" id="idm46274542813176"/><a data-primary="write_csv() and write_xlsx() functions in R and Python" data-type="indexterm" id="idm46274542863384"/>write a data frame to a <em>.csv</em> file, you can use the <code>write_csv()</code> function from <code>readr</code>:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Write roster data frame to csv</code>&#13;
<code class="nf">write_csv</code><code class="p">(</code><code class="n">roster</code><code class="p">,</code> <code class="s">'output/roster-output-r.csv'</code><code class="p">)</code></pre>&#13;
&#13;
<p>If you have the <a data-primary="working directories" data-type="indexterm" id="idm46274542792520"/>working directory set to the book’s companion repository, you should find this file waiting for you in the <em>output</em> folder.</p>&#13;
&#13;
<p>Unfortunately, <a data-primary="readxl package, R" data-type="indexterm" id="idm46274542790632"/>the <code>readxl</code> package does not include a function to write data to an Excel workbook. We can, <a data-primary="writexl package, R" data-type="indexterm" id="idm46274542854968"/>however, use <code>writexl</code> and its <code>write_xlsx()</code> function:</p>&#13;
&#13;
<pre data-code-language="r" data-type="programlisting"><code class="c1"># Write roster data frame to csv</code>&#13;
<code class="nf">write_xlsx</code><code class="p">(</code><code class="n">roster</code><code class="p">,</code> <code class="s">'output/roster-output-r.xlsx'</code><code class="p">)</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Conclusion" data-type="sect1"><div class="sect1" id="idm46274542784344">&#13;
<h1>Conclusion</h1>&#13;
&#13;
<p>In this chapter, you progressed from single-element objects, to larger vectors, and finally to data frames. While we’ll be working with <a data-primary="data frames, R" data-secondary="defined" data-type="indexterm" id="idm46274542783048"/>data frames for the remainder of the book, it’s helpful to keep in mind that they are collections of vectors and behave largely in the same way. Coming up, you will learn how to analyze, visualize, and ultimately test relationships in R data frames.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Exercises" data-type="sect1"><div class="sect1" id="idm46274542734296">&#13;
<h1>Exercises</h1>&#13;
&#13;
<p>Do the <a data-primary="R programming language" data-secondary="exercises" data-type="indexterm" id="idm46274542733000"/>following exercises to test your knowledge of data structures in R:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Create a character vector of five elements, and then access the first and fourth elements of this vector.</p>&#13;
</li>&#13;
<li>&#13;
<p>Create two vectors <code>x</code> and <code>y</code> of length 4, one containing numeric and the other logical values. Multiply them and pass the result to <code>z</code>. What is&#13;
the result?</p>&#13;
</li>&#13;
<li>&#13;
<p>Download the <code>nycflights13</code> package from CRAN. How many datasets are included with this package?</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>One of these datasets is called <code>airports</code>. Print the first few rows of this data frame as well as the descriptive statistics.</p>&#13;
</li>&#13;
<li>&#13;
<p>Another is called <code>weather</code>. Find the 10th through 12th rows and the 4th through 7th columns of this data frame. Write the results to a <em>.csv</em> file and an Excel workbook.</p>&#13;
</li>&#13;
</ul>&#13;
</li>&#13;
&#13;
</ol>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>