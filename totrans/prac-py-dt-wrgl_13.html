<html><head></head><body><section data-pdf-bookmark="Appendix B. A Bit More About Git" data-type="appendix" epub:type="appendix"><div class="appendix" id="appendix_b">&#13;
<h1><span class="label">Appendix B. </span>A Bit More About Git</h1>&#13;
&#13;
&#13;
<p>For the most part, working with Git as the only programmer on a project is fairly straightforward: you make changes to your code, commit them, push them to GitHub (or another remote repository), and that’s that.</p>&#13;
&#13;
<p>Until…it isn’t. Maybe you updated your <em>README.md</em> file on GitHub and forgot to <code>git pull</code> before making changes to the same file on your device. Maybe you forgot to add a message when you ran <code>git commit</code>. While dealing with these kinds of hiccups is not really all that complicated, some of the error messages and default behaviors of Git in the terminal can be tricky to deal with if you’ve never encountered them before. While the guidance in this appendix is <em>far</em> from comprehensive, in my experience a basic working knowledge of Git is more than enough, unless and until you’re working with a relatively large team in a large organization. So while you should definitely move beyond these simple fixes if you’re planning to use Git with multiple collaborators on complex projects, for most of us, these examples cover the situations you’ll find yourself in—and need help getting out of—most often.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="You Run git push/pull and End Up in a Weird Text Editor" data-type="sect1"><div class="sect1" id="editing_commits_in_vim">&#13;
<h1>You Run git push/pull and End Up in a Weird Text Editor</h1>&#13;
&#13;
<p>Like me, <a data-primary="versioning code" data-secondary="Git" data-tertiary="git commit, troubleshooting" data-type="indexterm" id="versioning-git-commit-troubleshoot"/><a data-primary="Git" data-secondary="troubleshooting" data-tertiary="git commit" data-type="indexterm" id="git-troubleshoot-commit"/><a data-primary="troubleshooting Git" data-secondary="git commit" data-type="indexterm" id="troubleshoot-git-commit"/><a data-primary="Git" data-secondary="commands" data-tertiary="commit" data-type="indexterm" id="git-commit"/><a data-primary="commands (git)" data-secondary="commit" data-type="indexterm" id="command-git-commit"/><a data-primary="commit messages, troubleshooting" data-type="indexterm" id="commit-message-troubleshoot"/>Git is relentless when it comes to documenting your work, to the point that <em>it will not let you commit changes without a commit message</em>. That means that if you run a <code>commit</code> command without including the <code>-m "Commit message here"</code>, for example:</p>&#13;
&#13;
<pre data-type="programlisting">git commit <em>filename</em></pre>&#13;
&#13;
<p>you will most likely find your terminal window taken over, showing text similar to what’s shown in <a data-type="xref" href="#terminal_commit_editing">Figure B-1</a>.</p>&#13;
&#13;
<figure><div class="figure" id="terminal_commit_editing">&#13;
<img alt="Terminal-based commit message editing" src="assets/ppdw_ab01.png"/>&#13;
<h6><span class="label">Figure B-1. </span>Terminal-based commit message editing</h6>&#13;
</div></figure>&#13;
&#13;
<p>This can be pretty unsettling, especially the first time it happens. But since it <em>will</em> happen, here’s how to get it sorted out quickly:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Start by typing the letter <strong><code>i</code></strong>. While not all editors actually require you to type <code>i</code> to enter <code>INSERT</code> mode, most of them will swallow the first character you type, so you may as well start with that one. You can see what this view looks like in <a data-type="xref" href="#terminal_insert_mode">Figure B-2</a>.</p>&#13;
</li>&#13;
<li>&#13;
<p>To get <em>out</em> of <code>INSERT</code> mode, hit the Esc or Escape key. Then type <strong><code>:x</code></strong> as shown in <a data-type="xref" href="#terminal_commit_save">Figure B-3</a>, followed by Enter or Return. This will save your commit message as required and <em>also</em> get you out of that text editor and back into the terminal window you know and love.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>Note that the editor you find yourself in may not look like what’s shown in Figures <a data-type="xref" data-xrefstyle="select:labelnumber" href="#terminal_insert_mode">B-2</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#terminal_commit_save">B-3</a>; if not, don’t panic. Now’s the time to search online for how to edit, save, and exit in whatever program you have been bounced into. Whatever the specifics, the objective is the <a data-primary="versioning code" data-secondary="Git" data-startref="versioning-git-commit-troubleshoot" data-tertiary="git commit, troubleshooting" data-type="indexterm" id="idm45143393429824"/><a data-primary="Git" data-secondary="troubleshooting" data-startref="git-troubleshoot-commit" data-tertiary="git commit" data-type="indexterm" id="idm45143393428272"/><a data-primary="troubleshooting Git" data-secondary="git commit" data-startref="troubleshoot-git-commit" data-type="indexterm" id="idm45143393426784"/><a data-primary="Git" data-secondary="commands" data-startref="git-commit" data-tertiary="commit" data-type="indexterm" id="idm45143393425568"/><a data-primary="commands (git)" data-secondary="commit" data-startref="command-git-commit" data-type="indexterm" id="idm45143393424080"/><a data-primary="commit messages, troubleshooting" data-startref="commit-message-troubleshoot" data-type="indexterm" id="idm45143393422864"/>same.</p>&#13;
&#13;
<figure><div class="figure" id="terminal_insert_mode">&#13;
<img alt="Terminal editor in `INSERT` mode" src="assets/ppdw_ab02.png"/>&#13;
<h6><span class="label">Figure B-2. </span>Terminal editor in <code>INSERT</code> mode</h6>&#13;
</div></figure>&#13;
&#13;
<figure><div class="figure" id="terminal_commit_save">&#13;
<img alt="Terminal editor with 'save and exit' command" src="assets/ppdw_ab03.png"/>&#13;
<h6><span class="label">Figure B-3. </span>Terminal editor with “save and exit” command</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Your git push/pull Command Gets Rejected" data-type="sect1"><div class="sect1" id="idm45143393456736">&#13;
<h1>Your git push/pull Command Gets Rejected</h1>&#13;
&#13;
<p>It<a data-primary="versioning code" data-secondary="Git" data-tertiary="file conflicts, resolving" data-type="indexterm" id="versioning-git-conflicts"/><a data-primary="Git" data-secondary="troubleshooting" data-tertiary="file conflicts, resolving" data-type="indexterm" id="git-troubleshoot-conflict"/><a data-primary="troubleshooting Git" data-secondary="file conflicts, resolving" data-type="indexterm" id="troubleshoot-git-conflict"/><a data-primary="file conflicts in Git, resolving" data-type="indexterm" id="file-conflict-resolve"/><a data-primary="conflicts in Git, resolving" data-type="indexterm" id="conflicts-resolving"/><a data-primary="resolving file conflicts in Git" data-type="indexterm" id="resolve-conflict"/><a data-primary="Git" data-secondary="commands" data-tertiary="push" data-type="indexterm" id="git-push"/><a data-primary="Git" data-secondary="commands" data-tertiary="pull" data-type="indexterm" id="git-pull"/><a data-primary="commands (git)" data-secondary="push" data-type="indexterm" id="command-git-push"/><a data-primary="commands (git)" data-secondary="pull" data-type="indexterm" id="command-git-pull"/> happens to all of us. You think you’ve been diligent about committing your code at the end of each work session—even writing individual commit messages to keep track of the changes you’ve made in individual files instead of just running <code>git commit -a</code>. Even so, sometimes you run your <code>git push</code> command and it gets rejected. What do you do then?</p>&#13;
&#13;
<p>If your <code>git push</code> command fails, you’ll probably see an error like this:</p>&#13;
&#13;
<pre data-type="programlisting"> ! [rejected]        main -&gt; main (non-fast-forward)&#13;
error: failed to push some refs to 'https://github.com/your_user_name/your_r&#13;
epo_name.git'&#13;
hint: Updates were rejected because the tip of your current branch is behind&#13;
hint: its remote counterpart. Integrate the remote changes (e.g.&#13;
hint: 'git pull ...') before pushing again.&#13;
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</pre>&#13;
&#13;
<p>In general, this happens when (at least) one of the files in your local repository has been changed since the last commit, but <em>so has the version in your remote repository</em>, so Git doesn’t know which one should take precedence. Not to worry!</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Run git pull" data-type="sect2"><div class="sect2" id="idm45143393151520">&#13;
<h2>Run git pull</h2>&#13;
&#13;
<p>If the changes in the file(s) can be merged automatically, Git will do that. This will resolve your file conflicts, but it can result in your being popped into the command line’s built-in text editor, which can be pretty confusing to deal with in its own right. If you run <code>git pull</code> and suddenly you’re looking at something like the text shown &#13;
<span class="keep-together">in <a data-type="xref" href="#terminal_commit_editing">Figure B-1</a></span>, see <a data-type="xref" href="#editing_commits_in_vim">“You Run git push/pull and End Up in a Weird Text Editor”</a>.</p>&#13;
&#13;
<p>If the changes in the file(s) <em>can’t</em> be merged automatically, you’ll get a message that looks something like this (you’ll also see this message if you just run <code>git pull</code> without running <code>git push</code> first):</p>&#13;
<pre data-type="programlisting">&#13;
Auto-merging <em>filename</em>&#13;
CONFLICT (content): Merge conflict in <em>filename</em>&#13;
Automatic merge failed; fix conflicts and then commit the result.&#13;
</pre>&#13;
&#13;
<p>This basically means that it’s up to you, the human, to determine which file should take precedence and either manually bring them back into line (by directly editing one or both files) or by simply forcing one to overwrite the other.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Fixing conflicts manually" data-type="sect3"><div class="sect3" id="idm45143393142768">&#13;
<h3>Fixing conflicts manually</h3>&#13;
&#13;
<p>Imagine you have a repo with a <em>README.md</em> file, to which you have committed changes both on GitHub.com and on your device. You tried to <code>git push</code> and got an error, so you tried to <code>git pull</code>, but the automatic merge failed. To fix the conflicts manually, start by opening the <em>local</em> copy of the file in your preferred text editor. What you might see for a markdown file is shown in <a data-type="xref" href="#markdown_file_conflict">Example B-1</a>.</p>&#13;
<div data-type="example" id="markdown_file_conflict">&#13;
<h5><span class="label">Example B-1. </span>An example conflict in a markdown file</h5>&#13;
&#13;
<pre data-type="programlisting"># This header is the same in both files&#13;
&#13;
This content is also the same.&#13;
&#13;
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD&#13;
&#13;
&#13;
This content is what's currently in the local file.&#13;
=======&#13;
This content is what's currently in the remote file.&#13;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1baa345a02d7cbf8a2fcde164e3b5ee1bce84b1b</pre></div>&#13;
&#13;
<p>To resolve the conflict, simply edit the content of the file as you prefer, being sure to delete the lines that start with <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> and <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>, as well as the <code>=======</code>; if you leave those lines, they will appear in your final file. Now save the file as usual.</p>&#13;
&#13;
<p>Next, run:</p>&#13;
<pre data-type="programlisting">&#13;
&#13;
git add <em>filename</em>&#13;
</pre>&#13;
&#13;
<p>Then run:</p>&#13;
<pre>git commit -m "How I fixed the conflict."</pre>&#13;
&#13;
<p>Note that you <em>cannot</em> specify the filename in the <code>git commit</code> command, or Git will complain that you’ve asked it to do a partial commit during a merge.</p>&#13;
&#13;
<p>Finally, run:</p>&#13;
<pre>git push</pre>&#13;
&#13;
<p>And you should be all set!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="“Fixing” conflicts by forcing an overwrite" data-type="sect3"><div class="sect3" id="idm45143393142208">&#13;
<h3>“Fixing” conflicts by forcing an overwrite</h3>&#13;
&#13;
<p>While<a data-primary="overwriting Git files" data-type="indexterm" id="overwrite"/> it’s always a good idea to actually look at any files where conflicts have popped up, sometimes you’re pushing to a repo that you know is way out of date, and you just want to overwrite what’s on your remote repository. In that case, you <em>can</em> push the changes without manually reconciling the files by running:</p>&#13;
<pre>git push --force</pre>&#13;
&#13;
<p>This will simply overwrite the remote file with your local version, but keep in mind that <em>all record of the overwritten version will be lost, including the commit history</em>. That means once you use <code>--force</code>, there’s no going back—the remote content is gone. Obviously, this means that you should <em>never</em> use this option if other people are contributing to the same repository—use it only if you’re the only one working on it and you’re (very) confident that the material in the remote repo can be overwritten <a data-primary="versioning code" data-secondary="Git" data-startref="versioning-git-conflicts" data-tertiary="file conflicts, resolving" data-type="indexterm" id="idm45143393122944"/><a data-primary="Git" data-secondary="troubleshooting" data-startref="git-troubleshoot-conflict" data-tertiary="file conflicts, resolving" data-type="indexterm" id="idm45143393121344"/><a data-primary="troubleshooting Git" data-secondary="file conflicts, resolving" data-startref="troubleshoot-git-conflict" data-type="indexterm" id="idm45143393119824"/><a data-primary="file conflicts in Git, resolving" data-startref="file-conflict-resolve" data-type="indexterm" id="idm45143393118576"/><a data-primary="conflicts in Git, resolving" data-startref="conflicts-resolving" data-type="indexterm" id="idm45143393117616"/><a data-primary="resolving file conflicts in Git" data-startref="resolve-conflict" data-type="indexterm" id="idm45143393116656"/><a data-primary="Git" data-secondary="commands" data-startref="git-push" data-tertiary="push" data-type="indexterm" id="idm45143393115696"/><a data-primary="Git" data-secondary="commands" data-startref="git-pull" data-tertiary="pull" data-type="indexterm" id="idm45143393114208"/><a data-primary="commands (git)" data-secondary="push" data-startref="command-git-push" data-type="indexterm" id="idm45143393112720"/><a data-primary="commands (git)" data-secondary="pull" data-startref="command-git-pull" data-type="indexterm" id="idm45143393111504"/><a data-primary="overwriting Git files" data-startref="overwrite" data-type="indexterm" id="idm45143393110288"/>safely.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Git Quick Reference" data-type="sect1"><div class="sect1" id="idm45143393109088">&#13;
<h1>Git Quick Reference</h1>&#13;
&#13;
<p><a data-type="xref" href="#common_git_commands_table">Table B-1</a> is a <a data-primary="Git" data-secondary="quick-reference commands" data-type="indexterm" id="idm45143393106896"/><a data-primary="Git" data-secondary="commands" data-tertiary="status" data-type="indexterm" id="idm45143393105920"/><a data-primary="commands (git)" data-secondary="status" data-type="indexterm" id="idm45143393104704"/><a data-primary="Git" data-secondary="commands" data-tertiary="add" data-type="indexterm" id="idm45143393103760"/><a data-primary="commands (git)" data-secondary="add" data-type="indexterm" id="idm45143393102544"/><a data-primary="commands (git)" data-secondary="commit" data-type="indexterm" id="idm45143393101600"/><a data-primary="Git" data-secondary="commands" data-tertiary="commit" data-type="indexterm" id="idm45143393100656"/>very brief overview of the most useful/common <code>git</code> commands. A more comprehensive list can be found <a href="https://training.github.com/downloads/github-git-cheat-sheet">on the GitHub website</a>.</p>&#13;
<table id="common_git_commands_table">&#13;
<caption><span class="label">Table B-1. </span>Most-used <code>git</code> terminal commands</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Command text</th>&#13;
<th>Command result</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>git status</code></p></td>&#13;
<td><p>Prints out the current state of the repo; doesn’t modify anything. Lists all files<sup><a data-type="noteref" href="app02.html#idm45143393092848" id="idm45143393092848-marker">a</a></sup> in the repo, grouped by whether they are <em>new</em>, <em>untracked</em>, or <em>modified</em>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>git add</code> <em><code>filename</code></em></p></td>&#13;
<td><p><em>Stage</em> a specific file that is currently <em>untracked</em>. A file must be staged by a <code>git add</code> command before it can be committed to the repository. After this, <code>git status</code> will label staged files as <em>new</em>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>git add -A</code></p></td>&#13;
<td><p>Stage <em>all</em> currently untracked files at once. After this, <code>git status</code> will label staged files as <em>new</em>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>git commit -m "Commit message here."`</code> <em><code>filename</code></em></p></td>&#13;
<td><p>Commit a specific, already-staged file, attaching the message that appears between double quotation marks.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>git commit -a -m "Commit message here."</code></p></td>&#13;
<td><p>Commit <em>all</em> currently staged files, attaching the same commit message to all of them.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>git push</code></p></td>&#13;
<td><p>Push all local commits to the remote repo. Adding the <code>--force</code> command will overwrite any conflicting commits in the remote repo with the locally committed files.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>git pull</code></p></td>&#13;
<td><p>Pull all remote files to the local repo. Adding the <code>--force</code> command will overwrite any conflicting commits in the local repo with the remote committed files.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="idm45143393092848"><sup><a href="app02.html#idm45143393092848-marker">a</a></sup> If you have an active <em>.gitignore</em> file for the repo, any ignored files will <em>not</em> be listed by <code>git status</code>.</p></td></tr></tbody></table>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>