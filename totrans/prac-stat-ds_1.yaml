- en: Chapter 1\. Exploratory Data Analysis
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第一章\. 探索性数据分析
- en: 'This chapter focuses on the first step in any data science project: exploring
    the data.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章重点介绍数据科学项目的第一步：探索数据。
- en: Classical statistics focused almost exclusively on *inference*, a sometimes
    complex set of procedures for drawing conclusions about large populations based
    on small samples. In 1962, [John W. Tukey](https://oreil.ly/LQw6q) ([Figure 1-1](#JWTukey))
    called for a reformation of statistics in his seminal paper “The Future of Data
    Analysis” [[Tukey-1962]](bibliography01.xhtml#Tukey-1962). He proposed a new scientific
    discipline called *data analysis* that included statistical inference as just
    one component. Tukey forged links to the engineering and computer science communities
    (he coined the terms *bit*, short for binary digit, and *software*), and his original
    tenets are surprisingly durable and form part of the foundation for data science.
    The field of exploratory data analysis was established with Tukey’s 1977 now-classic
    book *Exploratory Data Analysis* [[Tukey-1977]](bibliography01.xhtml#Tukey-1977).
    Tukey presented simple plots (e.g., boxplots, scatterplots) that, along with summary
    statistics (mean, median, quantiles, etc.), help paint a picture of a data set.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 古典统计学几乎完全专注于*推断*，这是一套有时复杂的程序，用于根据小样本对大总体进行结论。1962年，[约翰·W·图基](https://oreil.ly/LQw6q)在他的开创性论文《数据分析的未来》[[图基-1962]](bibliography01.xhtml#图基-1962)中呼吁改革统计学。他提出了一门名为*数据分析*的新科学学科，将统计推断仅作为其中的一个组成部分。图基与工程和计算机科学界建立了联系（他创造了*比特*一词，代表二进制位，以及*软件*一词），他的最初原则令人惊讶地持久，并构成了数据科学的基础之一。探索性数据分析领域始于图基于1977年撰写的现已成为经典的书籍《探索性数据分析》[[图基-1977]](bibliography01.xhtml#图基-1977)。图基提出了简单的图表（例如，箱线图、散点图），这些图表与汇总统计数据（均值、中位数、分位数等）一起，有助于描绘数据集的全貌。
- en: With the ready availability of computing power and expressive data analysis
    software, exploratory data analysis has evolved well beyond its original scope.
    Key drivers of this discipline have been the rapid development of new technology,
    access to more and bigger data, and the greater use of quantitative analysis in
    a variety of disciplines. David Donoho, professor of statistics at Stanford University
    and former undergraduate student of Tukey’s, authored an excellent article based
    on his presentation at the Tukey Centennial workshop in Princeton, New Jersey
    [[Donoho-2015]](bibliography01.xhtml#Donoho-2015). Donoho traces the genesis of
    data science back to Tukey’s pioneering work in data analysis.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 随着计算能力的普及和表达性数据分析软件的出现，探索性数据分析已经远远超出了其最初的范围。推动这一学科发展的关键因素包括新技术的快速发展，获取更多更大的数据，以及在各种学科中更广泛地使用定量分析。斯坦福大学统计学教授、图基的前本科生大卫·多诺霍（David
    Donoho）根据他在新泽西州普林斯顿市图基百年纪念研讨会上的发言撰写了一篇优秀的文章[[多诺霍-2015]](bibliography01.xhtml#多诺霍-2015)。多诺霍将数据科学的起源追溯到图基在数据分析方面的开创性工作。
- en: '![John Tukey, the eminent statistician, whose ideas developed over fifty years
    ago form the foundation of data science.](Images/psd2_0101.png)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![约翰·图基，这位杰出的统计学家的思想在50多年前形成了数据科学的基础。](Images/psd2_0101.png)'
- en: Figure 1-1\. John Tukey, the eminent statistician whose ideas developed over
    50 years ago form the foundation of data science
  id: totrans-5
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-1\. 约翰·图基，这位杰出的统计学家的思想在50多年前形成了数据科学的基础
- en: Elements of Structured Data
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结构化数据元素
- en: 'Data comes from many sources: sensor measurements, events, text, images, and
    videos. The *Internet of Things* (IoT) is spewing out streams of information.
    Much of this data is unstructured: images are a collection of pixels, with each
    pixel containing RGB (red, green, blue) color information. Texts are sequences
    of words and nonword characters, often organized by sections, subsections, and
    so on. Clickstreams are sequences of actions by a user interacting with an app
    or a web page. In fact, a major challenge of data science is to harness this torrent
    of raw data into actionable information. To apply the statistical concepts covered
    in this book, unstructured raw data must be processed and manipulated into a structured
    form. One of the commonest forms of structured data is a table with rows and columns—as
    data might emerge from a relational database or be collected for a study.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 数据来自许多来源：传感器测量、事件、文本、图像和视频。*物联网*（IoT）正在喷发信息流。其中许多数据是非结构化的：图像是像素的集合，每个像素包含RGB（红、绿、蓝）颜色信息。文本是单词和非单词字符的序列，通常按部分、子部分等组织。点击流是用户与应用程序或网页交互的行动序列。事实上，数据科学的一个主要挑战是将这些原始数据的洪流转化为可操作的信息。要应用本书涵盖的统计概念，非结构化的原始数据必须被处理和转换成结构化形式。结构化数据的一种常见形式是具有行和列的表格——数据可能来自关系数据库或为研究而收集。
- en: 'There are two basic types of structured data: numeric and categorical. Numeric
    data comes in two forms: *continuous*, such as wind speed or time duration, and
    *discrete*, such as the count of the occurrence of an event. *Categorical* data
    takes only a fixed set of values, such as a type of TV screen (plasma, LCD, LED,
    etc.) or a state name (Alabama, Alaska, etc.). *Binary* data is an important special
    case of categorical data that takes on only one of two values, such as 0/1, yes/no,
    or true/false. Another useful type of categorical data is *ordinal* data in which
    the categories are ordered; an example of this is a numerical rating (1, 2, 3,
    4, or 5).'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 有两种基本类型的结构化数据：数值和分类。数值数据有两种形式：*连续*，如风速或时间持续，以及*离散*，如事件发生的次数。*分类*数据只取固定集合的值，如电视屏幕类型（等离子、LCD、LED等）或州名（阿拉巴马州、阿拉斯加州等）。*二元*数据是分类数据的一个重要特例，只取两个值之一，如0/1、是/否或真/假。另一种有用的分类数据类型是*有序*数据，在这种数据中，类别是有序的；一个例子是数值评级（1、2、3、4或5）。
- en: Why do we bother with a taxonomy of data types? It turns out that for the purposes
    of data analysis and predictive modeling, the data type is important to help determine
    the type of visual display, data analysis, or statistical model. In fact, data
    science software, such as *R* and *Python*, uses these data types to improve computational
    performance. More important, the data type for a variable determines how software
    will handle computations for that variable.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为什么要费心对数据类型进行分类？事实证明，为了数据分析和预测建模的目的，数据类型对于确定视觉显示类型、数据分析或统计模型类型是很重要的。事实上，数据科学软件如*R*和*Python*使用这些数据类型来提高计算性能。更重要的是，变量的数据类型决定了软件如何处理该变量的计算。
- en: 'Software engineers and database programmers may wonder why we even need the
    notion of *categorical* and *ordinal* data for analytics. After all, categories
    are merely a collection of text (or numeric) values, and the underlying database
    automatically handles the internal representation. However, explicit identification
    of data as categorical, as distinct from text, does offer some advantages:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 软件工程师和数据库程序员可能会想知道为什么我们甚至需要*分类*和*有序*数据用于分析。毕竟，类别只是文本（或数字）值的集合，底层数据库会自动处理内部表示。然而，将数据明确标识为分类数据，与文本不同，确实提供了一些优势：
- en: Knowing that data is categorical can act as a signal telling software how statistical
    procedures, such as producing a chart or fitting a model, should behave. In particular,
    ordinal data can be represented as an `ordered.factor` in *R*, preserving a user-specified
    ordering in charts, tables, and models. In *Python*, `scikit-learn` supports ordinal
    data with the `sklearn.preprocessing.OrdinalEncoder`.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 知道数据是分类的可以作为一个信号，告诉软件如何进行统计过程，比如生成图表或拟合模型。特别是，有序数据可以在*R*中表示为`ordered.factor`，在图表、表格和模型中保留用户指定的顺序。在*Python*中，`scikit-learn`通过`sklearn.preprocessing.OrdinalEncoder`支持有序数据。
- en: Storage and indexing can be optimized (as in a relational database).
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储和索引可以进行优化（如关系数据库中）。
- en: The possible values a given categorical variable can take are enforced in the
    software (like an enum).
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 给定分类变量可能采用的可能值在软件中被强制执行（类似枚举）。
- en: 'The third “benefit” can lead to unintended or unexpected behavior: the default
    behavior of data import functions in *R* (e.g., `read.csv`) is to automatically
    convert a text column into a `factor`. Subsequent operations on that column will
    assume that the only allowable values for that column are the ones originally
    imported, and assigning a new text value will introduce a warning and produce
    an `NA` (missing value). The `pandas` package in *Python* will not make such a
    conversion automatically. However, you can specify a column as categorical explicitly
    in the `read_csv` function.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 第三个“好处”可能会导致意外或预期之外的行为：在*R*中，数据导入函数（例如`read.csv`）的默认行为是自动将文本列转换为`factor`。对该列的后续操作将假定该列的唯一可允许值是最初导入的值，而分配新的文本值将引发警告并生成`NA`（缺失值）。*Python*中的`pandas`包不会自动进行此类转换。但是，您可以在`read_csv`函数中显式指定列为分类。
- en: Further Reading
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: The [`pandas` documentation](https://oreil.ly/UGX-4) describes the different
    data types and how they can be manipulated in *Python*.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`pandas`文档](https://oreil.ly/UGX-4)描述了不同的数据类型以及它们如何在*Python*中操作。'
- en: Data types can be confusing, since types may overlap, and the taxonomy in one
    software may differ from that in another. The [R Tutorial website](https://oreil.ly/2YUoA)
    covers the taxonomy for *R*. The [`pandas` documentation](https://oreil.ly/UGX-4)
    describes the different data types and how they can be manipulated in *Python*.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据类型可能会令人困惑，因为类型可能会重叠，并且一个软件中的分类法可能与另一个软件中的不同。[R教程网站](https://oreil.ly/2YUoA)涵盖了*R*的分类法。[`pandas`文档](https://oreil.ly/UGX-4)描述了不同的数据类型以及它们如何在*Python*中操作。
- en: Databases are more detailed in their classification of data types, incorporating
    considerations of precision levels, fixed- or variable-length fields, and more;
    see the [W3Schools guide to SQL](https://oreil.ly/cThTM).
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库在数据类型的分类中更为详细，包括精度级别、固定长度或可变长度字段等考虑因素；参见[SQL的W3Schools指南](https://oreil.ly/cThTM)。
- en: Rectangular Data
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 矩形数据
- en: The typical frame of reference for an analysis in data science is a *rectangular
    data* object, like a spreadsheet or database table.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据科学中，分析的典型参考框架是*矩形数据*对象，例如电子表格或数据库表。
- en: '*Rectangular data* is the general term for a two-dimensional matrix with rows
    indicating records (cases) and columns indicating features (variables); *data
    frame* is the specific format in *R* and *Python*. The data doesn’t always start
    in this form: unstructured data (e.g., text) must be processed and manipulated
    so that it can be represented as a set of features in the rectangular data (see
    [“Elements of Structured Data”](#StructuredData)). Data in relational databases
    must be extracted and put into a single table for most data analysis and modeling
    tasks.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '*矩形数据*是指二维矩阵，行表示记录（案例），列表示特征（变量）；*数据框*是*R*和*Python*中的特定格式。数据并不总是以此形式开始：非结构化数据（例如文本）必须经过处理和操作，以便将其表示为矩形数据中的一组特征（参见[“结构化数据元素”](#StructuredData)）。对于大多数数据分析和建模任务，关系数据库中的数据必须提取并放入单个表中。'
- en: Table 1-1\. A typical data frame format
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1-1\. 典型的数据框格式
- en: '| Category | currency | sellerRating | Duration | endDay | ClosePrice | OpenPrice
    | Competitive? |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| 类别 | 货币 | 卖家评级 | 时长 | 结束日 | 收盘价 | 开盘价 | 竞争性？ |'
- en: '| --- | --- | --- | --- | --- | --- | --- | --- |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- | --- | --- | --- |'
- en: '| Music/Movie/Game | US | 3249 | 5 | Mon | 0.01 | 0.01 | 0 |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| 音乐/电影/游戏 | 美国 | 3249 | 5 | 星期一 | 0.01 | 0.01 | 0 |'
- en: '| Music/Movie/Game | US | 3249 | 5 | Mon | 0.01 | 0.01 | 0 |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| 音乐/电影/游戏 | 美国 | 3249 | 5 | 星期一 | 0.01 | 0.01 | 0 |'
- en: '| Automotive | US | 3115 | 7 | Tue | 0.01 | 0.01 | 0 |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| 汽车行业 | 美国 | 3115 | 7 | 星期二 | 0.01 | 0.01 | 0 |'
- en: '| Automotive | US | 3115 | 7 | Tue | 0.01 | 0.01 | 0 |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| 汽车行业 | 美国 | 3115 | 7 | 星期二 | 0.01 | 0.01 | 0 |'
- en: '| Automotive | US | 3115 | 7 | Tue | 0.01 | 0.01 | 0 |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| 汽车行业 | 美国 | 3115 | 7 | 星期二 | 0.01 | 0.01 | 0 |'
- en: '| Automotive | US | 3115 | 7 | Tue | 0.01 | 0.01 | 0 |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| 汽车行业 | 美国 | 3115 | 7 | 星期二 | 0.01 | 0.01 | 0 |'
- en: '| Automotive | US | 3115 | 7 | Tue | 0.01 | 0.01 | 1 |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| 汽车行业 | 美国 | 3115 | 7 | 星期二 | 0.01 | 0.01 | 1 |'
- en: '| Automotive | US | 3115 | 7 | Tue | 0.01 | 0.01 | 1 |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| 汽车行业 | 美国 | 3115 | 7 | 星期二 | 0.01 | 0.01 | 1 |'
- en: In [Table 1-1](#dataframe), there is a mix of measured or counted data (e.g.,
    duration and price) and categorical data (e.g., category and currency). As mentioned
    earlier, a special form of categorical variable is a binary (yes/no or 0/1) variable,
    seen in the rightmost column in [Table 1-1](#dataframe)—an indicator variable
    showing whether an auction was competitive (had multiple bidders) or not. This
    indicator variable also happens to be an *outcome* variable, when the scenario
    is to predict whether an auction is competitive or not.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [表 1-1](#dataframe) 中，存在测量或计数数据（例如，持续时间和价格）和分类数据（例如，类别和货币）。如前所述，在 [表 1-1](#dataframe)
    中的最右列中有一种特殊形式的分类变量，即二元（是/否或 0/1）变量 —— 一个指示变量，显示拍卖是否竞争（是否有多个竞标者）。当场景是预测拍卖是否竞争时，这个指示变量也恰好是一个
    *结果* 变量。
- en: Data Frames and Indexes
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据框和索引
- en: Traditional database tables have one or more columns designated as an index,
    essentially a row number. This can vastly improve the efficiency of certain database
    queries. In *Python*, with the `pandas` library, the basic rectangular data structure
    is a `DataFrame` object. By default, an automatic integer index is created for
    a `DataFrame` based on the order of the rows. In `pandas`, it is also possible
    to set multilevel/hierarchical indexes to improve the efficiency of certain operations.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 传统数据库表有一个或多个列被指定为索引，本质上是行号。这可以极大地提高某些数据库查询的效率。在 *Python* 中，使用 `pandas` 库，基本的矩形数据结构是一个
    `DataFrame` 对象。默认情况下，`DataFrame` 根据行的顺序创建一个自动整数索引。在 `pandas` 中，还可以设置多级/层次化索引以提高某些操作的效率。
- en: 'In *R*, the basic rectangular data structure is a `data.frame` object. A `data.frame`
    also has an implicit integer index based on the row order. The native *R* `data.frame`
    does not support user-specified or multilevel indexes, though a custom key can
    be created through the `row.names` attribute. To overcome this deficiency, two
    new packages are gaining widespread use: `data.table` and `dplyr`. Both support
    multilevel indexes and offer significant speedups in working with a `data.frame`.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *R* 中，基本的矩形数据结构是一个 `data.frame` 对象。一个 `data.frame` 也有一个基于行顺序的隐式整数索引。原生的 *R*
    `data.frame` 不支持用户指定或多级索引，尽管可以通过 `row.names` 属性创建自定义键。为了弥补这个不足，两个新的包正在广泛使用：`data.table`
    和 `dplyr`。两者都支持多级索引，并在处理 `data.frame` 时提供了显著的加速。
- en: Terminology Differences
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 术语差异
- en: 'Terminology for rectangular data can be confusing. Statisticians and data scientists
    use different terms for the same thing. For a statistician, *predictor variables*
    are used in a model to predict a *response* or *dependent variable*. For a data
    scientist, *features* are used to predict a *target*. One synonym is particularly
    confusing: computer scientists will use the term *sample* for a single row; a
    *sample* to a statistician means a collection of rows.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 矩形数据的术语可能令人困惑。统计学家和数据科学家对同一概念使用不同术语。对于统计学家来说，*预测变量* 在模型中用于预测 *响应* 或 *因变量*。对于数据科学家来说，*特征*
    用于预测 *目标*。一个特别令人困惑的同义词是：计算机科学家会将单个行称为 *样本*；而对统计学家来说，*样本* 意味着一组行。
- en: Nonrectangular Data Structures
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 非矩形数据结构
- en: There are other data structures besides rectangular data.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 除了矩形数据外，还有其他数据结构。
- en: Time series data records successive measurements of the same variable. It is
    the raw material for statistical forecasting methods, and it is also a key component
    of the data produced by devices—the Internet of Things.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列数据记录了同一变量的连续测量。它是统计预测方法的原始材料，也是设备生成的数据的关键组成部分 —— 物联网数据。
- en: Spatial data structures, which are used in mapping and location analytics, are
    more complex and varied than rectangular data structures. In the *object* representation,
    the focus of the data is an object (e.g., a house) and its spatial coordinates.
    The *field* view, by contrast, focuses on small units of space and the value of
    a relevant metric (pixel brightness, for example).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 用于地图和位置分析的空间数据结构比矩形数据结构更复杂和多样化。在 *对象* 表示中，数据的焦点是一个对象（例如，一座房子）及其空间坐标。相比之下，在 *场*
    视图中，关注的是空间的小单元和相关度量的值（例如像素亮度）。
- en: Graph (or network) data structures are used to represent physical, social, and
    abstract relationships. For example, a graph of a social network, such as Facebook
    or LinkedIn, may represent connections between people on the network. Distribution
    hubs connected by roads are an example of a physical network. Graph structures
    are useful for certain types of problems, such as network optimization and recommender
    systems.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 图（或网络）数据结构用于表示物理、社会和抽象关系。例如，社交网络的图表，如Facebook或LinkedIn，可以表示网络上人与人之间的联系。通过道路连接的分布中心是物理网络的一个例子。图结构对于某些类型的问题很有用，比如网络优化和推荐系统。
- en: Each of these data types has its specialized methodology in data science. The
    focus of this book is on rectangular data, the fundamental building block of predictive
    modeling.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这些数据类型中的每一个在数据科学中都有其专门的方法。本书的重点是矩形数据，这是预测建模的基本构建单元。
- en: Graphs in Statistics
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 统计学中的图表
- en: In computer science and information technology, the term *graph* typically refers
    to a depiction of the connections among entities, and to the underlying data structure.
    In statistics, *graph* is used to refer to a variety of plots and *visualizations*,
    not just of connections among entities, and the term applies only to the visualization,
    not to the data structure.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算机科学和信息技术中，术语*图*通常用于描述实体之间的连接及其基础数据结构。在统计学中，*图*用于指代各种绘图和*可视化*，不仅仅是实体之间的连接，并且该术语仅适用于可视化，而不是数据结构本身。
- en: Further Reading
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '[Documentation on data frames in *R*](https://oreil.ly/NsONR)'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[关于 *R* 中数据框的文档](https://oreil.ly/NsONR)'
- en: '[Documentation on data frames in *Python*](https://oreil.ly/oxDKQ)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[关于 *Python* 中数据框的文档](https://oreil.ly/oxDKQ)'
- en: Estimates of Location
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 位置估计
- en: 'Variables with measured or count data might have thousands of distinct values.
    A basic step in exploring your data is getting a “typical value” for each feature
    (variable): an estimate of where most of the data is located (i.e., its central
    tendency).'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 具有测量或计数数据的变量可能有数千个不同的值。探索数据的基本步骤是为每个特征（变量）获取一个“典型值”：数据大部分位于何处的估计（即其中心趋势）。
- en: 'At first glance, summarizing data might seem fairly trivial: just take the
    *mean* of the data. In fact, while the mean is easy to compute and expedient to
    use, it may not always be the best measure for a central value. For this reason,
    statisticians have developed and promoted several alternative estimates to the
    mean.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 乍一看，总结数据似乎相当简单：只需取数据的*均值*。事实上，虽然均值易于计算且使用方便，但它并不总是最佳的中心值度量。因此，统计学家开发并推广了几种替代均值的估计方法。
- en: Metrics and Estimates
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 度量和估计
- en: 'Statisticians often use the term *estimate* for a value calculated from the
    data at hand, to draw a distinction between what we see from the data and the
    theoretical true or exact state of affairs. Data scientists and business analysts
    are more likely to refer to such a value as a *metric*. The difference reflects
    the approach of statistics versus that of data science: accounting for uncertainty
    lies at the heart of the discipline of statistics, whereas concrete business or
    organizational objectives are the focus of data science. Hence, statisticians
    estimate, and data scientists measure.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 统计学家经常用术语*估计*来表示从手头数据计算出的值，以区分我们从数据中看到的内容和理论上的真实或确切状态。数据科学家和业务分析师更倾向于将这样的值称为*度量*。这种差异反映了统计学与数据科学的方法：不确定性的考虑是统计学学科的核心，而具体的业务或组织目标是数据科学的重点。因此，统计学家进行估计，而数据科学家进行度量。
- en: Mean
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 均值
- en: 'The most basic estimate of location is the mean, or *average* value. The mean
    is the sum of all values divided by the number of values. Consider the following
    set of numbers: {3 5 1 2}. The mean is (3 + 5 + 1 + 2) / 4 = 11 / 4 = 2.75. You
    will encounter the symbol <math alttext="x overbar"><mover accent="true"><mi>x</mi>
    <mo>¯</mo></mover></math> (pronounced “x-bar”) being used to represent the mean
    of a sample from a population. The formula to compute the mean for a set of *n*
    values <math alttext="x 1 comma x 2 comma ellipsis comma x Subscript n Baseline"><mrow><msub><mi>x</mi>
    <mn>1</mn></msub> <mo>,</mo> <msub><mi>x</mi> <mn>2</mn></msub> <mo>,</mo> <mo>...</mo>
    <mo>,</mo> <msub><mi>x</mi> <mi>n</mi></msub></mrow></math> is:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 最基本的位置估计是平均值，或者*平均*值。平均值是所有值的总和除以值的数量。考虑以下数字集合：{3 5 1 2}。平均值为 (3 + 5 + 1 + 2)
    / 4 = 11 / 4 = 2.75。你会遇到符号 <math alttext="x overbar"><mover accent="true"><mi>x</mi>
    <mo>¯</mo></mover></math>（读作“x-bar”），用于表示从总体中取样的样本的均值。计算一组*n*个值 <math alttext="x
    1 comma x 2 comma ellipsis comma x Subscript n Baseline"><mrow><msub><mi>x</mi>
    <mn>1</mn></msub> <mo>,</mo> <msub><mi>x</mi> <mn>2</mn></msub> <mo>,</mo> <mo>...</mo>
    <mo>,</mo> <msub><mi>x</mi> <mi>n</mi></msub></mrow></math> 的公式为：
- en: <math display="block"><mrow><mtext>Mean</mtext> <mo>=</mo> <mover accent="true"><mi>x</mi>
    <mo>¯</mo></mover> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo> <mi>i=1</mi> <mi>n</mi></msubsup>
    <msub><mi>x</mi> <mi>i</mi></msub></mrow> <mi>n</mi></mfrac></mrow></math>
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mrow><mtext>Mean</mtext> <mo>=</mo> <mover accent="true"><mi>x</mi>
    <mo>¯</mo></mover> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo> <mi>i=1</mi> <mi>n</mi></msubsup>
    <msub><mi>x</mi> <mi>i</mi></msub></mrow> <mi>n</mi></mfrac></mrow></math>
- en: Note
  id: totrans-58
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: '*N* (or *n*) refers to the total number of records or observations. In statistics
    it is capitalized if it is referring to a population, and lowercase if it refers
    to a sample from a population. In data science, that distinction is not vital,
    so you may see it both ways.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '*N*（或*n*）指的是记录或观测的总数。在统计学中，如果它是指的总体，则大写；如果是指的总体的样本，则小写。在数据科学中，这种区别并不是很重要，所以你可能会看到两种写法。'
- en: 'A variation of the mean is a *trimmed mean*, which you calculate by dropping
    a fixed number of sorted values at each end and then taking an average of the
    remaining values. Representing the sorted values by <math alttext="x Subscript
    left-parenthesis 1 right-parenthesis Baseline comma x Subscript left-parenthesis
    2 right-parenthesis Baseline comma ellipsis comma x Subscript left-parenthesis
    n right-parenthesis Baseline"><mrow><msub><mi>x</mi> <mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub>
    <mo>,</mo> <msub><mi>x</mi> <mrow><mo>(</mo><mn>2</mn><mo>)</mo></mrow></msub>
    <mo>,</mo> <mo>...</mo> <mo>,</mo> <msub><mi>x</mi> <mrow><mo>(</mo><mi>n</mi><mo>)</mo></mrow></msub></mrow></math>
    where <math alttext="x Subscript left-parenthesis 1 right-parenthesis"><msub><mi>x</mi>
    <mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub></math> is the smallest value
    and <math alttext="x Subscript left-parenthesis n right-parenthesis"><msub><mi>x</mi>
    <mrow><mo>(</mo><mi>n</mi><mo>)</mo></mrow></msub></math> the largest, the formula
    to compute the trimmed mean with <math alttext="p"><mi>p</mi></math> smallest
    and largest values omitted is:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 均值的一种变体是*修剪均值*，你可以通过删除每端的固定数量的排序值，然后取剩余值的平均值来计算。用 <math alttext="x Subscript
    left-parenthesis 1 right-parenthesis Baseline comma x Subscript left-parenthesis
    2 right-parenthesis Baseline comma ellipsis comma x Subscript left-parenthesis
    n right-parenthesis Baseline"><mrow><msub><mi>x</mi> <mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub>
    <mo>,</mo> <msub><mi>x</mi> <mrow><mo>(</mo><mn>2</mn><mo>)</mo></mrow></msub>
    <mo>,</mo> <mo>...</mo> <mo>,</mo> <msub><mi>x</mi> <mrow><mo>(</mo><mi>n</mi><mo>)</mo></mrow></msub></mrow></math>
    来表示排序值，其中 <math alttext="x Subscript left-parenthesis 1 right-parenthesis"><msub><mi>x</mi>
    <mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub></math> 是最小值， <math alttext="x
    Subscript left-parenthesis n right-parenthesis"><msub><mi>x</mi> <mrow><mo>(</mo><mi>n</mi><mo>)</mo></mrow></msub></math>
    是最大值，计算剔除 <math alttext="p"><mi>p</mi></math> 个最小和最大值后的修剪均值的公式为：
- en: <math display="block"><mrow><mtext>Trimmed</mtext> <mtext>mean</mtext> <mo>=</mo>
    <mover accent="true"><mi>x</mi> <mo>¯</mo></mover> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo>
    <mrow><mi>i</mi><mo>=</mo><mi>p</mi><mo>+</mo><mn>1</mn></mrow> <mrow><mi>n</mi><mo>-</mo><mi>p</mi></mrow></msubsup>
    <msub><mi>x</mi> <mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msub></mrow> <mrow><mi>n</mi><mo>-</mo><mn>2</mn><mi>p</mi></mrow></mfrac></mrow></math>
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mrow><mtext>Trimmed</mtext> <mtext>mean</mtext> <mo>=</mo>
    <mover accent="true"><mi>x</mi> <mo>¯</mo></mover> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo>
    <mrow><mi>i</mi><mo>=</mo><mi>p</mi><mo>+</mo><mn>1</mn></mrow> <mrow><mi>n</mi><mo>-</mo><mi>p</mi></mrow></msubsup>
    <msub><mi>x</mi> <mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msub></mrow> <mrow><mi>n</mi><mo>-</mo><mn>2</mn><mi>p</mi></mrow></mfrac></mrow></math>
- en: A trimmed mean eliminates the influence of extreme values. For example, in international
    diving the top score and bottom score from five judges are dropped, and [the final
    score is the average of the scores from the three remaining judges](https://oreil.ly/uV4P0).
    This makes it difficult for a single judge to manipulate the score, perhaps to
    favor their country’s contestant. Trimmed means are widely used, and in many cases
    are preferable to using the ordinary mean—see [“Median and Robust Estimates”](#Median)
    for further discussion.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 修剪均值消除极端值的影响。例如，在国际跳水比赛中，五位评委的最高分和最低分被剔除，而[最终得分是剩余三位评委评分的平均值](https://oreil.ly/uV4P0)。这样做可以防止单个评委操纵分数，可能有利于他们国家的参赛选手。修剪均值被广泛使用，在许多情况下比使用普通均值更可取—详见[“中位数和健壮估计”](#Median)进一步讨论。
- en: 'Another type of mean is a *weighted mean*, which you calculate by multiplying
    each data value <math alttext="x Subscript i"><msub><mi>x</mi> <mi>i</mi></msub></math>
    by a user-specified weight <math alttext="w Subscript i"><msub><mi>w</mi> <mi>i</mi></msub></math>
    and dividing their sum by the sum of the weights. The formula for a weighted mean
    is:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种平均数是*加权平均数*，计算方法是将每个数据值 <math alttext="x Subscript i"><msub><mi>x</mi> <mi>i</mi></msub></math>
    乘以用户指定的权重 <math alttext="w Subscript i"><msub><mi>w</mi> <mi>i</mi></msub></math>，然后除以权重的总和。加权平均数的公式为：
- en: <math alttext="Weighted mean x overbar Subscript w Baseline equals StartFraction
    sigma-summation Underscript i equals 1 Overscript n Endscripts w Subscript i Baseline
    x Subscript i Baseline Over sigma-summation Underscript i equals 1 Overscript
    n Endscripts w Subscript i Baseline EndFraction" display="block"><mrow><mi>Weighted</mi>
    <mi>mean</mi> <mo>=</mo> <msub><mover accent="true"><mi>x</mi> <mo>¯</mo></mover>
    <mi>w</mi></msub> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <msub><mi>w</mi> <mi>i</mi></msub> <msub><mi>x</mi> <mi>i</mi></msub></mrow>
    <mrow><msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow> <mi>n</mi></msubsup>
    <msub><mi>w</mi> <mi>i</mi></msub></mrow></mfrac></mrow></math>
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="Weighted mean x overbar Subscript w Baseline equals StartFraction
    sigma-summation Underscript i equals 1 Overscript n Endscripts w Subscript i Baseline
    x Subscript i Baseline Over sigma-summation Underscript i equals 1 Overscript
    n Endscripts w Subscript i Baseline EndFraction" display="block"><mrow><mi>Weighted</mi>
    <mi>mean</mi> <mo>=</mo> <msub><mover accent="true"><mi>x</mi> <mo>¯</mo></mover>
    <mi>w</mi></msub> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <msub><mi>w</mi> <mi>i</mi></msub> <msub><mi>x</mi> <mi>i</mi></msub></mrow>
    <mrow><msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow> <mi>n</mi></msubsup>
    <msub><mi>w</mi> <mi>i</mi></msub></mrow></mfrac></mrow></math>
- en: 'There are two main motivations for using a weighted mean:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 使用加权平均数有两个主要动机：
- en: Some values are intrinsically more variable than others, and highly variable
    observations are given a lower weight. For example, if we are taking the average
    from multiple sensors and one of the sensors is less accurate, then we might downweight
    the data from that sensor.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有些值本质上比其他值更变化，高变化的观察结果会被赋予较低的权重。例如，如果我们从多个传感器中取平均值，而其中一个传感器的精度较低，则我们可能会降低该传感器的数据权重。
- en: The data collected does not equally represent the different groups that we are
    interested in measuring. For example, because of the way an online experiment
    was conducted, we may not have a set of data that accurately reflects all groups
    in the user base. To correct that, we can give a higher weight to the values from
    the groups that were underrepresented.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集的数据未能平等地代表我们有兴趣测量的不同群体。例如，由于在线实验的进行方式，我们可能没有一个能够准确反映用户群体中所有群体的数据集。为了纠正这一点，我们可以给予那些代表性不足群体的值更高的权重。
- en: Median and Robust Estimates
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 中位数和鲁棒估计
- en: The *median* is the middle number on a sorted list of the data. If there is
    an even number of data values, the middle value is one that is not actually in
    the data set, but rather the average of the two values that divide the sorted
    data into upper and lower halves. Compared to the mean, which uses all observations,
    the median depends only on the values in the center of the sorted data. While
    this might seem to be a disadvantage, since the mean is much more sensitive to
    the data, there are many instances in which the median is a better metric for
    location. Let’s say we want to look at typical household incomes in neighborhoods
    around Lake Washington in Seattle. In comparing the Medina neighborhood to the
    Windermere neighborhood, using the mean would produce very different results because
    Bill Gates lives in Medina. If we use the median, it won’t matter how rich Bill
    Gates is—the position of the middle observation will remain the same.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '*中位数*是数据排序列表中的中间数。如果数据值的数量是偶数，中间值实际上不在数据集中，而是分割排序数据成上半部分和下半部分的两个值的平均值。与使用所有观察值的平均数相比，中位数仅依赖于排序数据中心的值。虽然这可能看起来是一个劣势，因为平均数对数据更为敏感，但在许多情况下，中位数是位置测量的更好指标。例如，我们想要查看西雅图华盛顿州湖畔周围各个社区的典型家庭收入。如果我们比较梅迪纳社区和温德米尔社区，使用平均数会产生非常不同的结果，因为比尔·盖茨住在梅迪纳。如果我们使用中位数，比尔·盖茨有多富有并不重要——中间观察值的位置将保持不变。'
- en: For the same reasons that one uses a weighted mean, it is also possible to compute
    a *weighted median*. As with the median, we first sort the data, although each
    data value has an associated weight. Instead of the middle number, the weighted
    median is a value such that the sum of the weights is equal for the lower and
    upper halves of the sorted list. Like the median, the weighted median is robust
    to outliers.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 基于与加权平均数相同的原因，也可以计算*加权中位数*。与中位数类似，我们首先对数据进行排序，尽管每个数据值都有一个关联的权重。加权中位数不是排序列表的中间数，而是这样一个值，使得排序列表的下半部分和上半部分的权重之和相等。与中位数一样，加权中位数对异常值具有鲁棒性。
- en: Outliers
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 异常值
- en: The median is referred to as a *robust* estimate of location since it is not
    influenced by *outliers* (extreme cases) that could skew the results. An outlier
    is any value that is very distant from the other values in a data set. The exact
    definition of an outlier is somewhat subjective, although certain conventions
    are used in various data summaries and plots (see [“Percentiles and Boxplots”](#Boxplots)).
    Being an outlier in itself does not make a data value invalid or erroneous (as
    in the previous example with Bill Gates). Still, outliers are often the result
    of data errors such as mixing data of different units (kilometers versus meters)
    or bad readings from a sensor. When outliers are the result of bad data, the mean
    will result in a poor estimate of location, while the median will still be valid.
    In any case, outliers should be identified and are usually worthy of further investigation.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数被称为位置的 *稳健* 估计，因为它不受可能扭曲结果的 *异常值*（极端情况）的影响。异常值是数据集中与其他值非常远的任何值。异常值的确切定义在某种程度上是主观的，尽管在各种数据摘要和图中使用了某些惯例（参见[“百分位数和箱线图”](#Boxplots)）。异常值本身并不使数据值无效或错误（如前面关于比尔·盖茨的例子）。尽管如此，异常值通常是由于数据错误（例如混合不同单位的数据，如千米与米）或传感器的错误读数而导致的。当异常值是由于错误数据时，均值将导致位置估计不佳，而中位数仍然有效。无论如何，应该识别异常值，并且通常值得进一步调查。
- en: Anomaly Detection
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 异常检测
- en: In contrast to typical data analysis, where outliers are sometimes informative
    and sometimes a nuisance, in *anomaly detection* the points of interest are the
    outliers, and the greater mass of data serves primarily to define the “normal”
    against which anomalies are measured.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 与典型的数据分析相比，在 *异常检测* 中，异常值是感兴趣的点，而更大部分的数据主要用于定义“正常”，以便测量异常。
- en: 'The median is not the only robust estimate of location. In fact, a trimmed
    mean is widely used to avoid the influence of outliers. For example, trimming
    the bottom and top 10% (a common choice) of the data will provide protection against
    outliers in all but the smallest data sets. The trimmed mean can be thought of
    as a compromise between the median and the mean: it is robust to extreme values
    in the data, but uses more data to calculate the estimate for location.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数并不是唯一的位置稳健估计。事实上，修剪均值被广泛使用以避免异常值的影响。例如，修剪数据底部和顶部的 10%（一种常见选择）将在除了最小数据集外的所有情况下保护免受异常值的影响。修剪均值可以被视为中位数和均值之间的折衷：它对数据中的极值稳健，但使用更多数据来计算位置估计。
- en: Other Robust Metrics for Location
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他稳健的位置度量
- en: Statisticians have developed a plethora of other estimators for location, primarily
    with the goal of developing an estimator more robust than the mean and also more
    efficient (i.e., better able to discern small location differences between data
    sets). While these methods are potentially useful for small data sets, they are
    not likely to provide added benefit for large or even moderately sized data sets.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 统计学家已经开发出大量其他位置估计器，主要目标是开发比均值更稳健且更有效（即更能辨别数据集之间小位置差异）的估计器。虽然这些方法可能对小数据集有用，但对大或中等规模的数据集不太可能提供额外的好处。
- en: 'Example: Location Estimates of Population and Murder Rates'
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例：人口和谋杀率的位置估计
- en: '[Table 1-2](#state_table) shows the first few rows in the data set containing
    population and murder rates (in units of murders per 100,000 people per year)
    for each US state (2010 Census).'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 1-2](#state_table) 显示了包含每个美国州（2010 年人口普查）的人口和谋杀率（以每年每 100,000 人的谋杀数单位）的数据集的前几行。'
- en: Table 1-2\. A few rows of the `data.frame` state of population and murder rate
    by state
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1-2\. 人口和谋杀率 `data.frame` 状态的几行示例
- en: '|  | State | Population | Murder rate | Abbreviation |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '|  | 州 | 人口 | 谋杀率 | 缩写 |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| 1 | Alabama | 4,779,736 | 5.7 | AL |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 阿拉巴马州 | 4,779,736 | 5.7 | AL |'
- en: '| 2 | Alaska | 710,231 | 5.6 | AK |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 阿拉斯加州 | 710,231 | 5.6 | AK |'
- en: '| 3 | Arizona | 6,392,017 | 4.7 | AZ |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 亚利桑那州 | 6,392,017 | 4.7 | AZ |'
- en: '| 4 | Arkansas | 2,915,918 | 5.6 | AR |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 阿肯色州 | 2,915,918 | 5.6 | AR |'
- en: '| 5 | California | 37,253,956 | 4.4 | CA |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 加利福尼亚州 | 37,253,956 | 4.4 | CA |'
- en: '| 6 | Colorado | 5,029,196 | 2.8 | CO |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| 6 | 科罗拉多州 | 5,029,196 | 2.8 | CO |'
- en: '| 7 | Connecticut | 3,574,097 | 2.4 | CT |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| 7 | 康涅狄格州 | 3,574,097 | 2.4 | CT |'
- en: '| 8 | Delaware | 897,934 | 5.8 | DE |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| 8 | 特拉华州 | 897,934 | 5.8 | DE |'
- en: 'Compute the mean, trimmed mean, and median for the population using *R*:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 *R* 计算人口的均值、修剪均值和中位数：
- en: '[PRE0]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To compute mean and median in *Python* we can use the `pandas` methods of the
    data frame. The trimmed mean requires the `trim_mean` function in `scipy.stats`:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 要在*Python*中计算平均值和中位数，我们可以使用数据帧的`pandas`方法。修剪均值需要`scipy.stats`中的`trim_mean`函数：
- en: '[PRE1]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The mean is bigger than the trimmed mean, which is bigger than the median.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 平均值大于修剪均值，后者大于中位数。
- en: 'This is because the trimmed mean excludes the largest and smallest five states
    (`trim=0.1` drops 10% from each end). If we want to compute the average murder
    rate for the country, we need to use a weighted mean or median to account for
    different populations in the states. Since base *R* doesn’t have a function for
    weighted median, we need to install a package such as `matrixStats`:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为修剪均值排除了最大和最小的五个州（`trim=0.1`从每端剔除10%）。如果我们想要计算全国的平均谋杀率，我们需要使用加权平均值或中位数来考虑各州的不同人口。由于基本的*R*没有加权中位数函数，我们需要安装诸如`matrixStats`的软件包：
- en: '[PRE2]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Weighted mean is available with `NumPy`. For weighted median, we can use the
    specialized package [wquantiles](https://oreil.ly/4SIPQ):'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 权重均值可在`NumPy`中找到。对于加权中位数，我们可以使用专用软件包[wquantiles](https://oreil.ly/4SIPQ)：
- en: '[PRE3]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In this case, the weighted mean and the weighted median are about the same.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，加权平均值和加权中位数大致相同。
- en: Further Reading
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: The Wikipedia article on [central tendency](https://oreil.ly/qUW2i) contains
    an extensive discussion of various measures of location.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 维基百科关于[中心趋势](https://oreil.ly/qUW2i)的文章详细讨论了各种位置测量。
- en: John Tukey’s 1977 classic *Exploratory Data Analysis* (Pearson) is still widely
    read.
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 约翰·图基于 1977 年经典著作*探索性数据分析*(Pearson) 仍广泛阅读。
- en: Estimates of Variability
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 变异性估计
- en: 'Location is just one dimension in summarizing a feature. A second dimension,
    *variability*, also referred to as *dispersion*, measures whether the data values
    are tightly clustered or spread out. At the heart of statistics lies variability:
    measuring it, reducing it, distinguishing random from real variability, identifying
    the various sources of real variability, and making decisions in the presence
    of it.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 位置仅是总结特征的一个维度。第二个维度*变异性*，也称为*分散*，用于衡量数据值是密集聚集还是分散。统计学的核心在于变异性：测量它，减少它，区分随机变异和真实变异，识别真实变异的各种来源，并在其存在的情况下做出决策。
- en: Just as there are different ways to measure location (mean, median, etc.), there
    are also different ways to measure variability.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 就像有不同的方法来测量位置（平均值，中位数等），也有不同的方法来测量变异性。
- en: Standard Deviation and Related Estimates
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 标准偏差及相关估计
- en: 'The most widely used estimates of variation are based on the differences, or
    *deviations*, between the estimate of location and the observed data. For a set
    of data {1, 4, 4}, the mean is 3 and the median is 4. The deviations from the
    mean are the differences: 1 – 3 = –2, 4 – 3 = 1, 4 – 3 = 1. These deviations tell
    us how dispersed the data is around the central value.'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 最广为使用的变异性估计基于估计的位置与观察数据之间的差异或*偏差*。对于数据集{1, 4, 4}，平均值为3，中位数为4。相对于平均值的偏差为差值：1
    – 3 = –2，4 – 3 = 1，4 – 3 = 1。这些偏差告诉我们数据围绕中心值的分散程度。
- en: 'One way to measure variability is to estimate a typical value for these deviations.
    Averaging the deviations themselves would not tell us much—the negative deviations
    offset the positive ones. In fact, the sum of the deviations from the mean is
    precisely zero. Instead, a simple approach is to take the average of the absolute
    values of the deviations from the mean. In the preceding example, the absolute
    value of the deviations is {2 1 1}, and their average is (2 + 1 + 1) / 3 = 1.33.
    This is known as the *mean absolute deviation* and is computed with the formula:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 一种测量变异性的方法是估计这些偏差的典型值。平均偏差本身不会告诉我们太多——负偏差抵消了正偏差。事实上，从平均值的偏差之和正好是零。相反，一种简单的方法是取偏差绝对值的平均值。在前面的例子中，偏差的绝对值为{2
    1 1}，它们的平均值是(2 + 1 + 1) / 3 = 1.33。这被称为*平均绝对偏差*，可用以下公式计算：
- en: <math display="block"><mrow><mtext>Mean</mtext> <mtext>absolute</mtext> <mtext>deviation</mtext>
    <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <mfenced separators="" open="|" close="|"><msub><mi>x</mi>
    <mi>i</mi></msub> <mo>-</mo><mover accent="true"><mi>x</mi> <mo>¯</mo></mover></mfenced></mrow>
    <mi>n</mi></mfrac></mrow></math>
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mrow><mtext>Mean</mtext> <mtext>absolute</mtext> <mtext>deviation</mtext>
    <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <mfenced separators="" open="|" close="|"><msub><mi>x</mi>
    <mi>i</mi></msub> <mo>-</mo><mover accent="true"><mi>x</mi> <mo>¯</mo></mover></mfenced></mrow>
    <mi>n</mi></mfrac></mrow></math>
- en: where <math alttext="x overbar"><mover accent="true"><mi>x</mi> <mo>¯</mo></mover></math>
    is the sample mean.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 其中<math alttext="x overbar"><mover accent="true"><mi>x</mi> <mo>¯</mo></mover></math>是样本均值。
- en: 'The best-known estimates of variability are the *variance* and the *standard
    deviation*, which are based on squared deviations. The variance is an average
    of the squared deviations, and the standard deviation is the square root of the
    variance:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 最为人熟知的变异性估计是*方差*和*标准偏差*，这些都基于平方偏差。方差是平方偏差的平均数，标准偏差是方差的平方根：
- en: <math display="block"><mtable displaystyle="true"><mtr><mtd><mtext>Variance</mtext></mtd>
    <mtd><mo>=</mo> <msup><mi>s</mi> <mn>2</mn></msup> <mo>=</mo> <mfrac><mrow><munderover><mo>∑</mo>
    <mrow class="MJX-TeXAtom-ORD"><mi>i</mi> <mo>=</mo> <mn>1</mn></mrow> <mi>n</mi></munderover>
    <msup><mrow><mo>(</mo> <msub><mi>x</mi> <mi>i</mi></msub> <mo>−</mo> <mrow class="MJX-TeXAtom-ORD"><mover><mi>x</mi>
    <mo>¯</mo></mover></mrow> <mo>)</mo></mrow> <mn>2</mn></msup></mrow> <mrow><mi>n</mi>
    <mo>−</mo> <mn>1</mn></mrow></mfrac></mtd></mtr> <mtr><mtd><mtext>Standard deviation</mtext></mtd>
    <mtd><mo>=</mo> <mi>s</mi> <mo>=</mo> <msqrt><mtext>Variance</mtext></msqrt></mtd></mtr></mtable></math>
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mtable displaystyle="true"><mtr><mtd><mtext>Variance</mtext></mtd>
    <mtd><mo>=</mo> <msup><mi>s</mi> <mn>2</mn></msup> <mo>=</mo> <mfrac><mrow><munderover><mo>∑</mo>
    <mrow class="MJX-TeXAtom-ORD"><mi>i</mi> <mo>=</mo> <mn>1</mn></mrow> <mi>n</mi></munderover>
    <msup><mrow><mo>(</mo> <msub><mi>x</mi> <mi>i</mi></msub> <mo>−</mo> <mrow class="MJX-TeXAtom-ORD"><mover><mi>x</mi>
    <mo>¯</mo></mover></mrow> <mo>)</mo></mrow> <mn>2</mn></msup></mrow> <mrow><mi>n</mi>
    <mo>−</mo> <mn>1</mn></mrow></mfrac></mtd></mtr> <mtr><mtd><mtext>Standard deviation</mtext></mtd>
    <mtd><mo>=</mo> <mi>s</mi> <mo>=</mo> <msqrt><mtext>Variance</mtext></msqrt></mtd></mtr></mtable></math>
- en: 'The standard deviation is much easier to interpret than the variance since
    it is on the same scale as the original data. Still, with its more complicated
    and less intuitive formula, it might seem peculiar that the standard deviation
    is preferred in statistics over the mean absolute deviation. It owes its preeminence
    to statistical theory: mathematically, working with squared values is much more
    convenient than absolute values, especially for statistical models.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 标准差比方差更容易解释，因为它与原始数据在同一尺度上。尽管其公式更复杂且不直观，但统计学上更偏好标准差而不是均值绝对偏差。这是因为在统计理论中，数学上使用平方值比绝对值更方便，尤其是对于统计模型而言。
- en: Neither the variance, the standard deviation, nor the mean absolute deviation
    is robust to outliers and extreme values (see [“Median and Robust Estimates”](#Median)
    for a discussion of robust estimates for location). The variance and standard
    deviation are especially sensitive to outliers since they are based on the squared
    deviations.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 方差、标准差和均值绝对偏差对异常值和极端值都不稳健（有关稳健估计位置的讨论，请参见[“中位数和稳健估计”](#Median)）。方差和标准差特别对异常值敏感，因为它们基于平方偏差。
- en: 'A robust estimate of variability is the *median absolute deviation from the
    median* or MAD:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 一个稳健的变异性估计是*中位数绝对偏差*或MAD：
- en: <math display="block"><mrow><mtext>Median</mtext> <mtext>absolute</mtext> <mtext>deviation</mtext>
    <mo>=</mo> <mtext>Median</mtext> <mfenced separators="" open="(" close=")"><mfenced
    separators="" open="|" close="|"><msub><mi>x</mi> <mn>1</mn></msub> <mo>-</mo>
    <mi>m</mi></mfenced> <mo>,</mo> <mfenced separators="" open="|" close="|"><msub><mi>x</mi>
    <mn>2</mn></msub> <mo>-</mo> <mi>m</mi></mfenced> <mo>,</mo> <mo>...</mo> <mo>,</mo>
    <mfenced separators="" open="|" close="|"><msub><mi>x</mi> <mi>N</mi></msub> <mo>-</mo>
    <mi>m</mi></mfenced></mfenced></mrow></math>
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mrow><mtext>Median</mtext> <mtext>absolute</mtext> <mtext>deviation</mtext>
    <mo>=</mo> <mtext>Median</mtext> <mfenced separators="" open="(" close=")"><mfenced
    separators="" open="|" close="|"><msub><mi>x</mi> <mn>1</mn></msub> <mo>-</mo>
    <mi>m</mi></mfenced> <mo>,</mo> <mfenced separators="" open="|" close="|"><msub><mi>x</mi>
    <mn>2</mn></msub> <mo>-</mo> <mi>m</mi></mfenced> <mo>,</mo> <mo>...</mo> <mo>,</mo>
    <mfenced separators="" open="|" close="|"><msub><mi>x</mi> <mi>N</mi></msub> <mo>-</mo>
    <mi>m</mi></mfenced></mfenced></mrow></math>
- en: where *m* is the median. Like the median, the MAD is not influenced by extreme
    values. It is also possible to compute a trimmed standard deviation analogous
    to the trimmed mean (see [“Mean”](#Mean)).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 其中*m*是中位数。与中位数类似，MAD不受极端值的影响。还可以计算类似于修剪均值的修剪标准差（参见[“均值”](#Mean)）。
- en: Note
  id: totrans-119
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The variance, the standard deviation, the mean absolute deviation, and the median
    absolute deviation from the median are not equivalent estimates, even in the case
    where the data comes from a normal distribution. In fact, the standard deviation
    is always greater than the mean absolute deviation, which itself is greater than
    the median absolute deviation. Sometimes, the median absolute deviation is multiplied
    by a constant scaling factor to put the MAD on the same scale as the standard
    deviation in the case of a normal distribution. The commonly used factor of 1.4826
    means that 50% of the normal distribution fall within the range <math alttext="plus-or-minus
    MAD"><mrow><mo>±</mo> <mi>MAD</mi></mrow></math> (see, e.g., [*https://oreil.ly/SfDk2*](https://oreil.ly/SfDk2)).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 方差、标准差、均值绝对偏差和中位数绝对偏差不是等价的估计，即使数据来自正态分布的情况下也是如此。事实上，标准差总是大于均值绝对偏差，而均值绝对偏差本身大于中位数绝对偏差。有时，中位数绝对偏差会乘以一个常数缩放因子，以便在正态分布的情况下与标准差处于同一尺度上。常用的缩放因子1.4826意味着正态分布的50%落在<math
    alttext="plus-or-minus MAD"><mrow><mo>±</mo> <mi>MAD</mi></mrow></math>的范围内（参见，例如，[*https://oreil.ly/SfDk2*](https://oreil.ly/SfDk2)）。
- en: Estimates Based on Percentiles
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于百分位数的估计
- en: 'A different approach to estimating dispersion is based on looking at the spread
    of the sorted data. Statistics based on sorted (ranked) data are referred to as
    *order statistics*. The most basic measure is the *range*: the difference between
    the largest and smallest numbers. The minimum and maximum values themselves are
    useful to know and are helpful in identifying outliers, but the range is extremely
    sensitive to outliers and not very useful as a general measure of dispersion in
    the data.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 一个估计离散度的不同方法是基于排序数据的分散程度。基于排序（排名）数据的统计称为*顺序统计*。最基本的度量是*范围*：最大数和最小数之间的差异。最小值和最大值本身对于识别异常值是有用的，但范围对异常值非常敏感，作为数据离散度的一般度量不太有用。
- en: To avoid the sensitivity to outliers, we can look at the range of the data after
    dropping values from each end. Formally, these types of estimates are based on
    differences between *percentiles*. In a data set, the *P*th percentile is a value
    such that at least *P* percent of the values take on this value or less and at
    least (100 – *P*) percent of the values take on this value or more. For example,
    to find the 80th percentile, sort the data. Then, starting with the smallest value,
    proceed 80 percent of the way to the largest value. Note that the median is the
    same thing as the 50th percentile. The percentile is essentially the same as a
    *quantile*, with quantiles indexed by fractions (so the .8 quantile is the same
    as the 80th percentile).
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免对异常值过于敏感，我们可以在删除每端的值后查看数据的范围。形式上，这些类型的估计是基于*百分位数*之间的差异。在数据集中，第*P*百分位数是这样一个值，至少有*P*百分比的值取得此值或更小，至少有（100
    – *P*）百分比的值取得此值或更大。例如，要找到80th百分位数，请对数据进行排序。然后，从最小值开始，前进80％到最大值。注意，中位数与第50百分位数是相同的东西。百分位数本质上与*分位数*相同，分位数由分数索引（因此.8分位数与80th百分位数相同）。
- en: 'A common measurement of variability is the difference between the 25th percentile
    and the 75th percentile, called the *interquartile range* (or IQR). Here is a
    simple example: {3,1,5,3,6,7,2,9}. We sort these to get {1,2,3,3,5,6,7,9}. The
    25th percentile is at 2.5, and the 75th percentile is at 6.5, so the interquartile
    range is 6.5 – 2.5 = 4. Software can have slightly differing approaches that yield
    different answers (see the following tip); typically, these differences are smaller.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 变异性的常见测量是第25百分位数和第75百分位数之间的差异，称为*四分位距*（或IQR）。这里有一个简单的例子：{3,1,5,3,6,7,2,9}。我们对这些进行排序得到{1,2,3,3,5,6,7,9}。第25百分位数是2.5，第75百分位数是6.5，因此四分位距为6.5
    – 2.5 = 4。软件可能有略有不同的方法，导致不同的答案（见下面的提示）；通常，这些差异较小。
- en: For very large data sets, calculating exact percentiles can be computationally
    very expensive since it requires sorting all the data values. Machine learning
    and statistical software use special algorithms, such as [[Zhang-Wang-2007]](bibliography01.xhtml#Zhang-Wang-2007),
    to get an approximate percentile that can be calculated very quickly and is guaranteed
    to have a certain accuracy.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 对于非常大的数据集，计算精确的百分位数可能非常耗费计算资源，因为它需要对所有数据值进行排序。机器学习和统计软件使用特殊算法，比如[[张-王-2007]](bibliography01.xhtml#Zhang-Wang-2007)，来获取一个可以非常快速计算并且保证具有一定准确度的近似百分位数。
- en: 'Percentile: Precise Definition'
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 百分位数：精确定义
- en: 'If we have an even number of data (*n* is even), then the percentile is ambiguous
    under the preceding definition. In fact, we could take on any value between the
    order statistics <math alttext="x Subscript left-parenthesis j right-parenthesis"><msub><mi>x</mi>
    <mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></math> and <math alttext="x
    Subscript left-parenthesis j plus 1 right-parenthesis"><msub><mi>x</mi> <mrow><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow></msub></math>
    where *j* satisfies:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们有偶数个数据（*n*为偶数），则根据前述定义，百分位数是模糊的。事实上，我们可以取得任何值介于顺序统计量<math alttext="x Subscript
    left-parenthesis j right-parenthesis"><msub><mi>x</mi> <mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></math>和<math
    alttext="x Subscript left-parenthesis j plus 1 right-parenthesis"><msub><mi>x</mi>
    <mrow><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow></msub></math>之间的任何值，其中*j*满足：
- en: <math display="block"><mrow><mn>100</mn> <mo>*</mo> <mfrac><mi>j</mi> <mi>n</mi></mfrac>
    <mo>≤</mo> <mi>P</mi> <mo><</mo> <mn>100</mn> <mo>*</mo> <mfrac><mrow><mi>j</mi><mo>+</mo><mn>1</mn></mrow>
    <mi>n</mi></mfrac></mrow></math>
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mrow><mn>100</mn> <mo>*</mo> <mfrac><mi>j</mi> <mi>n</mi></mfrac>
    <mo>≤</mo> <mi>P</mi> <mo><</mo> <mn>100</mn> <mo>*</mo> <mfrac><mrow><mi>j</mi><mo>+</mo><mn>1</mn></mrow>
    <mi>n</mi></mfrac></mrow></math>
- en: 'Formally, the percentile is the weighted average:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 形式上，百分位数是加权平均值：
- en: <math display="block"><mrow><mtext>Percentile</mtext> <mrow><mo>(</mo> <mi>P</mi>
    <mo>)</mo></mrow> <mo>=</mo> <mfenced separators="" open="(" close=")"><mn>1</mn>
    <mo>-</mo> <mi>w</mi></mfenced> <msub><mi>x</mi> <mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub>
    <mo>+</mo> <mi>w</mi> <msub><mi>x</mi> <mrow><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow></msub></mrow></math>
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mrow><mtext>Percentile</mtext> <mrow><mo>(</mo> <mi>P</mi>
    <mo>)</mo></mrow> <mo>=</mo> <mfenced separators="" open="(" close=")"><mn>1</mn>
    <mo>-</mo> <mi>w</mi></mfenced> <msub><mi>x</mi> <mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub>
    <mo>+</mo> <mi>w</mi> <msub><mi>x</mi> <mrow><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow></msub></mrow></math>
- en: for some weight *w* between 0 and 1. Statistical software has slightly differing
    approaches to choosing *w*. In fact, the *R* function `quantile` offers nine different
    alternatives to compute the quantile. Except for small data sets, you don’t usually
    need to worry about the precise way a percentile is calculated. At the time of
    this writing, *Python*’s `numpy.quantile` supports only one approach, linear interpolation.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某些权重*w*，介于0和1之间。统计软件对选择*w*的方法有略有不同。事实上，*R*函数`quantile`提供了九种不同的替代方法来计算分位数。除了小数据集外，通常不需要担心百分位数的精确计算方式。在撰写本文时，*Python*的`numpy.quantile`仅支持一种方法，即线性插值。
- en: 'Example: Variability Estimates of State Population'
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 例子：州人口的变异性估计
- en: '[Table 1-3](#state) (repeated from [Table 1-2](#state_table) for convenience)
    shows the first few rows in the data set containing population and murder rates
    for each state.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 1-3](#state)（为方便起见，从[表 1-2](#state_table)重复）显示了包含每个州人口和谋杀率的数据集中的前几行。'
- en: Table 1-3\. A few rows of the `data.frame` state of population and murder rate
    by state
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 表1-3\. 由州人口和谋杀率组成的`data.frame`数据集的前几行
- en: '|  | State | Population | Murder rate | Abbreviation |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '|  | 州名 | 人口 | 谋杀率 | 缩写 |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| 1 | Alabama | 4,779,736 | 5.7 | AL |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 阿拉巴马 | 4,779,736 | 5.7 | AL |'
- en: '| 2 | Alaska | 710,231 | 5.6 | AK |'
  id: totrans-138
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 阿拉斯加 | 710,231 | 5.6 | AK |'
- en: '| 3 | Arizona | 6,392,017 | 4.7 | AZ |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 亚利桑那 | 6,392,017 | 4.7 | AZ |'
- en: '| 4 | Arkansas | 2,915,918 | 5.6 | AR |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 阿肯色 | 2,915,918 | 5.6 | AR |'
- en: '| 5 | California | 37,253,956 | 4.4 | CA |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 加利福尼亚 | 37,253,956 | 4.4 | CA |'
- en: '| 6 | Colorado | 5,029,196 | 2.8 | CO |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| 6 | 科罗拉多 | 5,029,196 | 2.8 | CO |'
- en: '| 7 | Connecticut | 3,574,097 | 2.4 | CT |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| 7 | 康涅狄格 | 3,574,097 | 2.4 | CT |'
- en: '| 8 | Delaware | 897,934 | 5.8 | DE |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| 8 | 特拉华 | 897,934 | 5.8 | DE |'
- en: 'Using *R*’s built-in functions for the standard deviation, the interquartile
    range (IQR), and the median absolute deviation from the median (MAD), we can compute
    estimates of variability for the state population data:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 使用*R*内置函数来计算标准偏差、四分位距（IQR）以及中位数绝对离差（MAD），我们可以对州人口数据的变异性进行估算：
- en: '[PRE4]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The `pandas` data frame provides methods for calculating standard deviation
    and quantiles. Using the quantiles, we can easily determine the IQR. For the robust
    MAD, we use the function `robust.scale.mad` from the `statsmodels` package:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas`数据帧提供了计算标准偏差和百分位数的方法。使用百分位数，我们可以轻松确定IQR。对于稳健的MAD，我们使用`statsmodels`包中的`robust.scale.mad`函数：'
- en: '[PRE5]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The standard deviation is almost twice as large as the MAD (in *R*, by default,
    the scale of the MAD is adjusted to be on the same scale as the mean). This is
    not surprising since the standard deviation is sensitive to outliers.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 标准偏差几乎是MAD的两倍大（在*R*中，默认情况下，MAD的尺度调整为与均值相同的尺度）。这并不奇怪，因为标准偏差对异常值很敏感。
- en: Further Reading
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: David Lane’s online statistics resource has a [section on percentiles](https://oreil.ly/o2fBI).
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: David Lane的在线统计资源有一节关于百分位数的内容：[百分位数部分](https://oreil.ly/o2fBI)。
- en: Kevin Davenport has a [useful post on *R*-Bloggers](https://oreil.ly/E7zcG)
    about deviations from the median and their robust properties.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kevin Davenport在*R*-Bloggers上有一篇[有关中位数偏差及其稳健特性的有用文章](https://oreil.ly/E7zcG)。
- en: Exploring the Data Distribution
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索数据分布
- en: Each of the estimates we’ve covered sums up the data in a single number to describe
    the location or variability of the data. It is also useful to explore how the
    data is distributed overall.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 我们讨论过的每一个估算值都总结了单个数字来描述数据的位置或变异性。总体上探索数据如何分布也是很有用的。
- en: Percentiles and Boxplots
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 百分位数和箱线图
- en: In [“Estimates Based on Percentiles”](#Percentiles), we explored how percentiles
    can be used to measure the spread of the data. Percentiles are also valuable for
    summarizing the entire distribution. It is common to report the quartiles (25th,
    50th, and 75th percentiles) and the deciles (the 10th, 20th, …, 90th percentiles).
    Percentiles are especially valuable for summarizing the *tails* (the outer range)
    of the distribution. Popular culture has coined the term *one-percenters* to refer
    to the people in the top 99th percentile of wealth.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在[“基于百分位数的估算”](#Percentiles)中，我们探讨了如何使用百分位数来衡量数据的扩展性。百分位数对于总结整个分布也是有价值的。通常报告四分位数（第25、50和75个百分位数）和分位数（第10、20、…、90个百分位数）是很常见的。百分位数对于总结分布的*尾部*（外围范围）尤为重要。流行文化将术语*one-percenters*用来指称处于财富前99%的人群。
- en: '[Table 1-4](#PercentileTable) displays some percentiles of the murder rate
    by state. In *R*, this would be produced by the `quantile` function:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 1-4](#PercentileTable) 显示了按州划分的谋杀率的一些百分位数。在*R*中，这将由`quantile`函数生成：'
- en: '[PRE6]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The `pandas` data frame method `quantile` provides it in *Python*:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在*Python*中，`pandas`数据帧方法`quantile`提供了这一功能：
- en: '[PRE7]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Table 1-4\. Percentiles of murder rate by state
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1-4\. 按州划分的谋杀率的百分位数
- en: '| 5% | 25% | 50% | 75% | 95% |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| 5% | 25% | 50% | 75% | 95% |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| 1.60 | 2.42 | 4.00 | 5.55 | 6.51 |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 1.60 | 2.42 | 4.00 | 5.55 | 6.51 |'
- en: 'The median is 4 murders per 100,000 people, although there is quite a bit of
    variability: the 5th percentile is only 1.6 and the 95th percentile is 6.51.'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数为每10万人口4起谋杀案，尽管变异性很大：第5百分位数仅为1.6，第95百分位数为6.51。
- en: '*Boxplots*, introduced by Tukey [[Tukey-1977]](bibliography01.xhtml#Tukey-1977),
    are based on percentiles and give a quick way to visualize the distribution of
    data. [Figure 1-2](#BoxplotFigure) shows a boxplot of the population by state
    produced by *R*:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '*箱线图*，由Tukey提出[[Tukey-1977]](bibliography01.xhtml#Tukey-1977)，基于百分位数，可以快速可视化数据的分布。[图 1-2](#BoxplotFigure)
    展示了*R*生成的按州人口的箱线图：'
- en: '[PRE8]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '`pandas` provides a number of basic exploratory plots for data frame; one of
    them is boxplots:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas`提供了许多基本的数据帧探索图，其中之一就是箱线图：'
- en: '[PRE9]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![Boxplot of state populations](Images/psd2_0102.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![各州人口的箱线图](Images/psd2_0102.png)'
- en: Figure 1-2\. Boxplot of state populations
  id: totrans-171
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-2\. 各州人口的箱线图
- en: From this boxplot we can immediately see that the median state population is
    about 5 million, half the states fall between about 2 million and about 7 million,
    and there are some high population outliers. The top and bottom of the box are
    the 75th and 25th percentiles, respectively. The median is shown by the horizontal
    line in the box. The dashed lines, referred to as *whiskers*, extend from the
    top and bottom of the box to indicate the range for the bulk of the data. There
    are many variations of a boxplot; see, for example, the documentation for the
    *R* function `boxplot` [[R-base-2015]](bibliography01.xhtml#R-base-2015). By default,
    the *R* function extends the whiskers to the furthest point beyond the box, except
    that it will not go beyond 1.5 times the IQR. *Matplotlib* uses the same implementation;
    other software may use a different rule.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个箱线图中，我们可以立即看出中位数州人口约为 500 万，一半的州人口介于约 200 万到约 700 万之间，还有一些高人口的异常值。箱子的顶部和底部分别是第
    75 和第 25 百分位数。中位数由箱子中的水平线表示。虚线，称为*须*，从箱子的顶部和底部延伸到表示数据大部分范围的位置。箱线图有很多变化；例如，参见*R*函数
    `boxplot` 的文档 [[R-base-2015]](bibliography01.xhtml#R-base-2015)。默认情况下，*R*函数将须延伸到箱子之外的最远点，但不会超过
    1.5 倍的四分位距。*Matplotlib* 使用相同的实现；其他软件可能使用不同的规则。
- en: Any data outside of the whiskers is plotted as single points or circles (often
    considered outliers).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 任何超出须外的数据都会被绘制为单个点或圆圈（通常被视为异常值）。
- en: Frequency Tables and Histograms
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 频率表和直方图
- en: 'A frequency table of a variable divides up the variable range into equally
    spaced segments and tells us how many values fall within each segment. [Table 1-5](#FreqTable)
    shows a frequency table of the population by state computed in *R*:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 一个变量的频率表将变量范围分成等间距的段，并告诉我们每个段中有多少值。[表 1-5](#FreqTable) 显示了在*R*中计算的按州人口的频率表：
- en: '[PRE10]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The function `pandas.cut` creates a series that maps the values into the segments.
    Using the method `value_counts`, we get the frequency table:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 函数 `pandas.cut` 创建了一个系列，将值映射到这些段中。使用 `value_counts` 方法，我们得到了频率表：
- en: '[PRE11]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Table 1-5\. A frequency table of population by state
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1-5\. 按州计算的人口频率表
- en: '| BinNumber | BinRange | Count | States |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| 箱子编号 | 箱子范围 | 计数 | 州名 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| 1 | 563,626–4,232,658 | 24 | WY,VT,ND,AK,SD,DE,MT,RI,NH,ME,HI,ID,NE,WV,NM,NV,UT,KS,AR,MS,IA,CT,OK,OR
    |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 563,626–4,232,658 | 24 | 怀俄明州, 佛蒙特州, 北达科他州, 阿拉斯加州, 南达科他州, 特拉华州, 蒙大拿州,
    罗德岛州, 新罕布什尔州, 缅因州, 夏威夷州, 爱达荷州, 内布拉斯加州, 西弗吉尼亚州, 新墨西哥州, 内华达州, 犹他州, 堪萨斯州, 阿肯色州, 密西西比州,
    艾奥瓦州, 康涅狄格州, 俄克拉何马州, 俄勒冈州 |'
- en: '| 2 | 4,232,659–7,901,691 | 14 | KY,LA,SC,AL,CO,MN,WI,MD,MO,TN,AZ,IN,MA,WA
    |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 4,232,659–7,901,691 | 14 | 肯塔基州, 路易斯安那州, 南卡罗来纳州, 阿拉巴马州, 科罗拉多州, 明尼苏达州,
    威斯康星州, 马里兰州, 密苏里州, 田纳西州, 亚利桑那州, 印第安纳州, 马萨诸塞州, 华盛顿州 |'
- en: '| 3 | 7,901,692–11,570,724 | 6 | VA,NJ,NC,GA,MI,OH |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 7,901,692–11,570,724 | 6 | 弗吉尼亚州, 新泽西州, 北卡罗来纳州, 乔治亚州, 密歇根州, 俄亥俄州 |'
- en: '| 4 | 11,570,725–15,239,757 | 2 | PA,IL |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 11,570,725–15,239,757 | 2 | 宾夕法尼亚州, 伊利诺伊州 |'
- en: '| 5 | 15,239,758–18,908,790 | 1 | FL |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 15,239,758–18,908,790 | 1 | 佛罗里达州 |'
- en: '| 6 | 18,908,791–22,577,823 | 1 | NY |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| 6 | 18,908,791–22,577,823 | 1 | 纽约州 |'
- en: '| 7 | 22,577,824–26,246,856 | 1 | TX |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| 7 | 22,577,824–26,246,856 | 1 | 德克萨斯州 |'
- en: '| 8 | 26,246,857–29,915,889 | 0 |  |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| 8 | 26,246,857–29,915,889 | 0 |  |'
- en: '| 9 | 29,915,890–33,584,922 | 0 |  |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| 9 | 29,915,890–33,584,922 | 0 |  |'
- en: '| 10 | 33,584,923–37,253,956 | 1 | CA |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| 10 | 33,584,923–37,253,956 | 1 | 加利福尼亚州 |'
- en: 'The least populous state is Wyoming, with 563,626 people, and the most populous
    is California, with 37,253,956 people. This gives us a range of 37,253,956 – 563,626
    = 36,690,330, which we must divide up into equal size bins—let’s say 10 bins.
    With 10 equal size bins, each bin will have a width of 3,669,033, so the first
    bin will span from 563,626 to 4,232,658. By contrast, the top bin, 33,584,923
    to 37,253,956, has only one state: California. The two bins immediately below
    California are empty, until we reach Texas. It is important to include the empty
    bins; the fact that there are no values in those bins is useful information. It
    can also be useful to experiment with different bin sizes. If they are too large,
    important features of the distribution can be obscured. If they are too small,
    the result is too granular, and the ability to see the bigger picture is lost.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 最少人口的州是怀俄明州，有 563,626 人，而人口最多的是加利福尼亚州，有 37,253,956 人。这给我们提供了一个范围为 37,253,956
    – 563,626 = 36,690,330，我们必须将其分成相等大小的箱子——假设是 10 个箱子。用 10 个相等大小的箱子，每个箱子的宽度为 3,669,033，因此第一个箱子的范围是从
    563,626 到 4,232,658。相比之下，顶部箱子，从 33,584,923 到 37,253,956，只有一个州：加利福尼亚州。加利福尼亚州下面紧接着的两个箱子是空的，直到我们到达德克萨斯州。包括空箱子是很重要的；这些箱子中没有数值的事实是有用的信息。尝试不同的箱子大小也可能会很有用。如果箱子太大，可能会隐藏分布的重要特征。如果太小，则结果太细粒化，可能看不到整体情况。
- en: Note
  id: totrans-193
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: Both frequency tables and percentiles summarize the data by creating bins. In
    general, quartiles and deciles will have the same count in each bin (equal-count
    bins), but the bin sizes will be different. The frequency table, by contrast,
    will have different counts in the bins (equal-size bins), and the bin sizes will
    be the same.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 频率表和百分位数都通过创建柱来总结数据。一般来说，四分位数和十分位数在每个柱中的数量相同（等数量的柱），但柱的尺寸会有所不同。相比之下，频率表在柱中的计数会不同（等尺寸的柱），而柱的尺寸相同。
- en: 'A histogram is a way to visualize a frequency table, with bins on the x-axis
    and the data count on the y-axis. In [Figure 1-3](#HistogramFigure), for example,
    the bin centered at 10 million (1e+07) runs from roughly 8 million to 12 million,
    and there are six states in that bin. To create a histogram corresponding to [Table 1-5](#FreqTable)
    in *R*, use the `hist` function with the `breaks` argument:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 直方图是可视化频率表的一种方式，其中柱在 x 轴上，数据计数在 y 轴上。例如，在[图1-3](#HistogramFigure)中，以 1000 万（1e+07）为中心的柱大约从
    800 万到 1200 万，并且该柱中有六个州。要创建与[表1-5](#FreqTable)相对应的直方图，在 *R* 中使用 `hist` 函数和 `breaks`
    参数：
- en: '[PRE12]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '`pandas` supports histograms for data frames with the `DataFrame.plot.hist`
    method. Use the keyword argument `bins` to define the number of bins. The various
    plot methods return an axis object that allows further fine-tuning of the visualization
    using `Matplotlib`:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas` 支持对数据框进行直方图的绘制，使用 `DataFrame.plot.hist` 方法。使用关键字参数 `bins` 来定义柱的数量。各种绘图方法返回一个轴对象，它允许使用
    `Matplotlib` 进行进一步的可视化调整：'
- en: '[PRE13]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The histogram is shown in [Figure 1-3](#HistogramFigure). In general, histograms
    are plotted such that:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 直方图显示在[图1-3](#HistogramFigure)中。通常，直方图是这样绘制的：
- en: Empty bins are included in the graph.
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 空柱包含在图中。
- en: Bins are of equal width.
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 柱的宽度相等。
- en: The number of bins (or, equivalently, bin size) is up to the user.
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 柱数量（或者等价地，柱尺寸）由用户决定。
- en: Bars are contiguous—no empty space shows between bars, unless there is an empty
    bin.
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 柱是连续的——柱之间没有空白，除非有一个空柱。
- en: '![Histogram of state populations](Images/psd2_0103.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![州人口直方图](Images/psd2_0103.png)'
- en: Figure 1-3\. Histogram of state populations
  id: totrans-205
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-3\. 州人口直方图
- en: Statistical Moments
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 统计矩
- en: In statistical theory, location and variability are referred to as the first
    and second *moments* of a distribution. The third and fourth moments are called
    *skewness* and *kurtosis*. Skewness refers to whether the data is skewed to larger
    or smaller values, and kurtosis indicates the propensity of the data to have extreme
    values. Generally, metrics are not used to measure skewness and kurtosis; instead,
    these are discovered through visual displays such as Figures [1-2](#BoxplotFigure)
    and [1-3](#HistogramFigure).
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在统计理论中，位置和变异性分别被称为分布的第一和第二*矩*。第三和第四矩被称为*偏度*和*峰度*。偏度指的是数据是否偏向于较大或较小的值，而峰度则表示数据具有极端值的倾向。一般来说，不使用度量来衡量偏度和峰度；相反，这些是通过视觉显示（如图
    [1-2](#BoxplotFigure) 和 [1-3](#HistogramFigure)）来发现的。
- en: Density Plots and Estimates
  id: totrans-208
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 密度图和估计
- en: 'Related to the histogram is a density plot, which shows the distribution of
    data values as a continuous line. A density plot can be thought of as a smoothed
    histogram, although it is typically computed directly from the data through a
    *kernel density estimate* (see [[Duong-2001]](bibliography01.xhtml#Duong-2001)
    for a short tutorial). [Figure 1-4](#DensityFigure) displays a density estimate
    superposed on a histogram. In *R*, you can compute a density estimate using the
    `density` function:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 与直方图相关的是密度图，它显示数据值的分布作为一条连续线。密度图可以被认为是一个平滑的直方图，尽管它通常是直接通过*核密度估计*（参见[[Duong-2001]](bibliography01.xhtml#Duong-2001)）从数据中计算出来的。[图1-4](#DensityFigure)显示了在直方图上叠加的密度估计。在
    *R* 中，您可以使用 `density` 函数计算密度估计：
- en: '[PRE14]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '`pandas` provides the `density` method to create a density plot. Use the argument
    `bw_method` to control the smoothness of the density curve:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas` 提供 `density` 方法来创建密度图。使用参数 `bw_method` 来控制密度曲线的平滑度：'
- en: '[PRE15]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO1-1)'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO1-1)'
- en: Plot functions often take an optional axis (`ax`) argument, which will cause
    the plot to be added to the same graph.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 绘图函数通常接受一个可选的轴（`ax`）参数，这将导致绘图添加到同一图中。
- en: 'A key distinction from the histogram plotted in [Figure 1-3](#HistogramFigure)
    is the scale of the y-axis: a density plot corresponds to plotting the histogram
    as a proportion rather than counts (you specify this in *R* using the argument
    `freq=FALSE`). Note that the total area under the density curve = 1, and instead
    of counts in bins you calculate areas under the curve between any two points on
    the x-axis, which correspond to the proportion of the distribution lying between
    those two points.'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 与[图1-3](#HistogramFigure)中绘制的直方图的关键区别是y轴的比例尺：密度图将直方图绘制为比例而不是计数（在*R*中使用参数`freq=FALSE`指定）。注意密度曲线下的总面积=1，而不是在箱中的计数，您计算在x轴上任意两点之间的曲线下面积，这对应于分布位于这两点之间的比例。
- en: '![Density of state murder rates](Images/psd2_0104.png)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![各州谋杀率密度](Images/psd2_0104.png)'
- en: Figure 1-4\. Density of state murder rates
  id: totrans-217
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-4\. 各州谋杀率密度
- en: Density Estimation
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 密度估计
- en: Density estimation is a rich topic with a long history in statistical literature.
    In fact, over 20 *R* packages have been published that offer functions for density
    estimation. [[Deng-Wickham-2011]](bibliography01.xhtml#Deng-Wickham-2011) give
    a comprehensive review of *R* packages, with a particular recommendation for `ASH`
    or `KernSmooth`. The density estimation methods in `pandas` and `scikit-learn`
    also offer good implementations. For many data science problems, there is no need
    to worry about the various types of density estimates; it suffices to use the
    base functions.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 密度估计是统计文献中一个丰富的主题，历史悠久。事实上，已经发表了超过20个*R*包，提供了密度估计的函数。[[邓-维克姆-2011]](bibliography01.xhtml#Deng-Wickham-2011)对*R*包进行了全面评估，特别推荐使用`ASH`或`KernSmooth`。`pandas`和`scikit-learn`中的密度估计方法也提供了良好的实现。对于许多数据科学问题，无需担心各种类型的密度估计，直接使用基础函数即可。
- en: Further Reading
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: A SUNY Oswego professor provides a [step-by-step guide to creating a boxplot](https://oreil.ly/wTpnE).
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一位纽约州立大学奥斯威戈分校的教授提供了一个[逐步指南，教你如何制作箱线图](https://oreil.ly/wTpnE)。
- en: Density estimation in *R* is covered in [Henry Deng and Hadley Wickham’s paper
    of the same name](https://oreil.ly/TbWYS).
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*R* 中的密度估计在[邓亨利和哈德利·维克姆的同名论文](https://oreil.ly/TbWYS)中有详细介绍。'
- en: '*R*-Bloggers has a [useful post on histograms in *R*](https://oreil.ly/Ynp-n),
    including customization elements, such as binning (breaks).'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*R*-Bloggers 有一篇关于*R*中直方图的[有用文章](https://oreil.ly/Ynp-n)，包括诸如分箱（breaks）等自定义元素。'
- en: '*R*-Bloggers also has a [similar post on boxplots in *R*](https://oreil.ly/0DSb2).'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*R*-Bloggers 也有一篇关于*R*中箱线图的[类似文章](https://oreil.ly/0DSb2)。'
- en: Matthew Conlen published an [interactive presentation](https://oreil.ly/bC9nu)
    that demonstrates the effect of choosing different kernels and bandwidth on kernel
    density estimates.
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 马修·康伦发表了一个[交互演示](https://oreil.ly/bC9nu)，展示了在核密度估计中选择不同核和带宽的影响。
- en: Exploring Binary and Categorical Data
  id: totrans-226
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索二元和分类数据
- en: For categorical data, simple proportions or percentages tell the story of the
    data.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 对于分类数据，简单的比例或百分比可以清楚地展示数据的情况。
- en: 'Getting a summary of a binary variable or a categorical variable with a few
    categories is a fairly easy matter: we just figure out the proportion of 1s, or
    the proportions of the important categories. For example, [Table 1-6](#AirportDelays)
    shows the percentage of delayed flights by the cause of delay at Dallas/Fort Worth
    Airport since 2010. Delays are categorized as being due to factors under carrier
    control, air traffic control (ATC) system delays, weather, security, or a late
    inbound aircraft.'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一个二元变量或具有少数类别的分类变量进行总结是相对容易的事情：我们只需计算1的比例，或者重要类别的比例。例如，[表1-6](#AirportDelays)显示了自2010年以来达拉斯/沃斯堡机场延误航班的延误原因百分比。延误被归类为由承运人控制、空中交通管制系统延误、天气、安全或迟到的入境飞机等因素引起。
- en: Table 1-6\. Percentage of delays by cause at Dallas/Fort Worth Airport
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 表1-6\. 达拉斯/沃斯堡机场各原因延误百分比
- en: '| Carrier | ATC | Weather | Security | Inbound |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| 承运人 | ATC | 天气 | 安全 | 入境 |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| 23.02 | 30.40 | 4.03 | 0.12 | 42.43 |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| 23.02 | 30.40 | 4.03 | 0.12 | 42.43 |'
- en: 'Bar charts, seen often in the popular press, are a common visual tool for displaying
    a single categorical variable. Categories are listed on the x-axis, and frequencies
    or proportions on the y-axis. [Figure 1-5](#Barchart) shows the airport delays
    per year by cause for Dallas/Fort Worth (DFW), and it is produced with the *R*
    function `barplot`:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图经常在大众媒体中见到，是显示单个分类变量的常见视觉工具。类别列在x轴上，频率或比例列在y轴上。[图1-5](#Barchart)展示了达拉斯/沃斯堡（DFW）每年因延误导致的机场延误情况，使用*R*函数`barplot`生成：
- en: '[PRE16]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '`pandas` also supports bar charts for data frames:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas`也支持数据框的条形图：'
- en: '[PRE17]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![Bar chart of airline delays at DFW by cause.](Images/psd2_0105.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![达拉斯/沃斯堡机场延误原因的条形图。](Images/psd2_0105.png)'
- en: Figure 1-5\. Bar chart of airline delays at DFW by cause
  id: totrans-238
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-5\. 达拉斯/沃斯堡机场延误原因的条形图
- en: Note that a bar chart resembles a histogram; in a bar chart the x-axis represents
    different categories of a factor variable, while in a histogram the x-axis represents
    values of a single variable on a numeric scale. In a histogram, the bars are typically
    shown touching each other, with gaps indicating values that did not occur in the
    data. In a bar chart, the bars are shown separate from one another.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，条形图类似于直方图；在条形图中，x轴表示因子变量的不同类别，而在直方图中，x轴表示数值刻度上单个变量的值。在直方图中，条通常显示为相互接触，间隙表示数据中未发生的值。在条形图中，条通常显示为相互分离。
- en: Pie charts are an alternative to bar charts, although statisticians and data
    visualization experts generally eschew pie charts as less visually informative
    (see [[Few-2007]](bibliography01.xhtml#Few-2007)).
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 饼图是条形图的替代方案，尽管统计学家和数据可视化专家通常避免使用饼图，因为它们在视觉上信息较少（见[[Few-2007]](bibliography01.xhtml#Few-2007)）。
- en: Numerical Data as Categorical Data
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数值数据作为分类数据
- en: In [“Frequency Tables and Histograms”](#Histograms), we looked at frequency
    tables based on binning the data. This implicitly converts the numeric data to
    an ordered factor. In this sense, histograms and bar charts are similar, except
    that the categories on the x-axis in the bar chart are not ordered. Converting
    numeric data to categorical data is an important and widely used step in data
    analysis since it reduces the complexity (and size) of the data. This aids in
    the discovery of relationships between features, particularly at the initial stages
    of an analysis.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在[“频率表和直方图”](#Histograms)中，我们看到基于数据分箱的频率表。这将数值数据隐式转换为有序因子。从这个意义上说，直方图和条形图类似，不同之处在于条形图的x轴上的类别没有顺序。将数值数据转换为分类数据是数据分析中重要且广泛使用的步骤，因为它减少了数据的复杂性（和大小）。这有助于在分析的初期阶段发现特征之间的关系。
- en: Mode
  id: totrans-243
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 众数
- en: The mode is the value—or values in case of a tie—that appears most often in
    the data. For example, the mode of the cause of delay at Dallas/Fort Worth airport
    is “Inbound.” As another example, in most parts of the United States, the mode
    for religious preference would be Christian. The mode is a simple summary statistic
    for categorical data, and it is generally not used for numeric data.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 众数是数据中出现最频繁的值（或在并列情况下的值）。例如，达拉斯/沃斯堡机场延误原因的众数是“进站”。另一个例子，在美国大部分地区，宗教偏好的众数将是基督教。众数是分类数据的简单摘要统计量，通常不用于数值数据。
- en: Expected Value
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 期望值
- en: A special type of categorical data is data in which the categories represent
    or can be mapped to discrete values on the same scale. A marketer for a new cloud
    technology, for example, offers two levels of service, one priced at $300/month
    and another at $50/month. The marketer offers free webinars to generate leads,
    and the firm figures that 5% of the attendees will sign up for the $300 service,
    15% will sign up for the $50 service, and 80% will not sign up for anything. This
    data can be summed up, for financial purposes, in a single “expected value,” which
    is a form of weighted mean, in which the weights are probabilities.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 一种特殊类型的分类数据是其中类别代表或可以映射到同一比例尺上的离散值的数据。例如，某家新云技术的市场营销人员提供两种服务级别，一个每月价格为$300，另一个每月价格为$50。市场营销人员提供免费网络研讨会以生成潜在客户，公司估计5%的参与者将注册$300的服务，15%将注册$50的服务，而80%将不会注册任何服务。出于财务目的，这些数据可以通过“期望值”来总结，这是一种加权平均值，其中权重是概率。
- en: 'The expected value is calculated as follows:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 期望值的计算如下所示：
- en: Multiply each outcome by its probability of occurrence.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将每个结果乘以其发生概率。
- en: Sum these values.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对这些值求和。
- en: 'In the cloud service example, the expected value of a webinar attendee is thus
    $22.50 per month, calculated as follows:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 在云服务示例中，网络研讨会参与者的预期价值因此为每月 $22.50，计算方法如下：
- en: <math display="block"><mtable displaystyle="true"><mtr><mtd columnalign="right"><mrow><mi>E</mi>
    <mi>V</mi></mrow></mtd> <mtd><mo>=</mo></mtd> <mtd columnalign="left"><mrow><mo>(</mo>
    <mn>0</mn> <mo>.</mo> <mn>05</mn> <mo>)</mo> <mo>(</mo> <mn>300</mn> <mo>)</mo>
    <mo>+</mo> <mo>(</mo> <mn>0</mn> <mo>.</mo> <mn>15</mn> <mo>)</mo> <mo>(</mo>
    <mn>50</mn> <mo>)</mo> <mo>+</mo> <mo>(</mo> <mn>0</mn> <mo>.</mo> <mn>80</mn>
    <mo>)</mo> <mo>(</mo> <mn>0</mn> <mo>)</mo></mrow></mtd> <mtd><mo>=</mo></mtd>
    <mtd><mrow><mn>22</mn> <mo>.</mo> <mn>5</mn></mrow></mtd></mtr></mtable></math>
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: <math display="block"><mtable displaystyle="true"><mtr><mtd columnalign="right"><mrow><mi>E</mi>
    <mi>V</mi></mrow></mtd> <mtd><mo>=</mo></mtd> <mtd columnalign="left"><mrow><mo>(</mo>
    <mn>0</mn> <mo>.</mo> <mn>05</mn> <mo>)</mo> <mo>(</mo> <mn>300</mn> <mo>)</mo>
    <mo>+</mo> <mo>(</mo> <mn>0</mn> <mo>.</mo> <mn>15</mn> <mo>)</mo> <mo>(</mo>
    <mn>50</mn> <mo>)</mo> <mo>+</mo> <mo>(</mo> <mn>0</mn> <mo>.</mo> <mn>80</mn>
    <mo>)</mo> <mo>(</mo> <mn>0</mn> <mo>)</mo></mrow></mtd> <mtd><mo>=</mo></mtd>
    <mtd><mrow><mn>22</mn> <mo>.</mo> <mn>5</mn></mrow></mtd></mtr></mtable></math>
- en: 'The expected value is really a form of weighted mean: it adds the ideas of
    future expectations and probability weights, often based on subjective judgment.
    Expected value is a fundamental concept in business valuation and capital budgeting—for
    example, the expected value of five years of profits from a new acquisition, or
    the expected cost savings from new patient management software at a clinic.'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 期望值实际上是加权平均的一种形式：它增加了未来预期和概率权重的概念，通常基于主观判断。期望值是业务估值和资本预算中的一个基本概念 - 例如，从新收购的五年利润的预期值，或者从诊所新患者管理软件的预期成本节省。
- en: Probability
  id: totrans-253
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概率
- en: We referred above to the *probability* of a value occurring. Most people have
    an intuitive understanding of probability, encountering the concept frequently
    in weather forecasts (the chance of rain) or sports analysis (the probability
    of winning). Sports and games are more often expressed as odds, which are readily
    convertible to probabilities (if the odds that a team will win are 2 to 1, its
    probability of winning is 2/(2+1) = 2/3). Surprisingly, though, the concept of
    probability can be the source of deep philosophical discussion when it comes to
    defining it. Fortunately, we do not need a formal mathematical or philosophical
    definition here. For our purposes, the probability that an event will happen is
    the proportion of times it will occur if the situation could be repeated over
    and over, countless times. Most often this is an imaginary construction, but it
    is an adequate operational understanding of probability.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 我们上面提到了*概率*的概念。大多数人对概率有直观的理解，在天气预报（下雨的概率）或体育分析（获胜的概率）中经常遇到这个概念。体育和游戏更常用的表达方式是赔率，可以轻松转换为概率（如果一个团队获胜的赔率是2比1，那么它获胜的概率是2/（2+1）=2/3）。然而，令人惊讶的是，当涉及到定义概率时，概率的概念可以是深入探讨的源泉。幸运的是，在这里我们不需要一个正式的数学或哲学定义。对于我们的目的，事件发生的概率是如果情况可以一次又一次地重复发生，它将发生的比例。大多数情况下，这是一种想象出来的构造，但这是对概率的一个足够操作性的理解。
- en: Further Reading
  id: totrans-255
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: No statistics course is complete without a [lesson on misleading graphs](https://oreil.ly/rDMuT),
    which often involves bar charts and pie charts.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 没有统计课程是完整的，没有关于[误导性图表的课程](https://oreil.ly/rDMuT)，这通常涉及条形图和饼图。
- en: Correlation
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 相关性
- en: Exploratory data analysis in many modeling projects (whether in data science
    or in research) involves examining correlation among predictors, and between predictors
    and a target variable. Variables X and Y (each with measured data) are said to
    be positively correlated if high values of X go with high values of Y, and low
    values of X go with low values of Y. If high values of X go with low values of
    Y, and vice versa, the variables are negatively correlated.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多建模项目（无论是数据科学还是研究中）的探索性数据分析中，涉及检查预测变量之间的相关性，以及预测变量与目标变量之间的相关性。变量 X 和 Y（每个都具有测量数据）被认为是正相关的，如果
    X 的高值与 Y 的高值相对应，并且 X 的低值与 Y 的低值相对应。如果 X 的高值与 Y 的低值相对应，反之亦然，则这些变量是负相关的。
- en: 'Consider these two variables, perfectly correlated in the sense that each goes
    from low to high:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑这两个变量，在某种意义上完全相关，即每个都从低到高：
- en: 'v1: {1, 2, 3}'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'v1: {1, 2, 3}'
- en: 'v2: {4, 5, 6}'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'v2: {4, 5, 6}'
- en: The vector sum of products is <math alttext="1 dot 4 plus 2 dot 5 plus 3 dot
    6 equals 32"><mrow><mn>1</mn> <mo>·</mo> <mn>4</mn> <mo>+</mo> <mn>2</mn> <mo>·</mo>
    <mn>5</mn> <mo>+</mo> <mn>3</mn> <mo>·</mo> <mn>6</mn> <mo>=</mo> <mn>32</mn></mrow></math>
    . Now try shuffling one of them and recalculating—the vector sum of products will
    never be higher than 32. So this sum of products could be used as a metric; that
    is, the observed sum of 32 could be compared to lots of random shufflings (in
    fact, this idea relates to a resampling-based estimate; see [“Permutation Test”](ch03.xhtml#Permutation)).
    Values produced by this metric, though, are not that meaningful, except by reference
    to the resampling distribution.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 产品的向量积之和是<math alttext="1 dot 4 plus 2 dot 5 plus 3 dot 6 equals 32"><mrow><mn>1</mn>
    <mo>·</mo> <mn>4</mn> <mo>+</mo> <mn>2</mn> <mo>·</mo> <mn>5</mn> <mo>+</mo> <mn>3</mn>
    <mo>·</mo> <mn>6</mn> <mo>=</mo> <mn>32</mn></mrow></math>。现在尝试随意调整其中一个并重新计算 -
    产品的向量积之和永远不会高于32。因此，这个产品的和可以用作度量标准；也就是说，观察到的和32可以与大量随机洗牌进行比较（实际上，这个想法涉及到基于重采样的估计；请参阅[“置换检验”](ch03.xhtml#Permutation)）。然而，这个度量所产生的值并不那么有意义，除非参考重采样分布。
- en: 'More useful is a standardized variant: the *correlation coefficient*, which
    gives an estimate of the correlation between two variables that always lies on
    the same scale. To compute *Pearson’s correlation coefficient*, we multiply deviations
    from the mean for variable 1 times those for variable 2, and divide by the product
    of the standard deviations:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 更有用的是标准化的变体：*相关系数*，它提供了两个变量之间相关性的估计，总是在同一刻度上。要计算*Pearson相关系数*，我们将变量1与变量2的均值偏差相乘，然后除以标准差的乘积：
- en: <math alttext="r equals StartFraction sigma-summation Underscript i equals 1
    Overscript n Endscripts left-parenthesis x Subscript i Baseline minus x overbar
    right-parenthesis left-parenthesis y Subscript i Baseline minus y overbar right-parenthesis
    Over left-parenthesis n minus 1 right-parenthesis s Subscript x Baseline s Subscript
    y Baseline EndFraction" display="block"><mrow><mi>r</mi> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo>
    <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow> <mi>n</mi></msubsup> <mrow><mo>(</mo><msub><mi>x</mi>
    <mi>i</mi></msub> <mo>-</mo><mover accent="true"><mi>x</mi> <mo>¯</mo></mover><mo>)</mo></mrow><mrow><mo>(</mo><msub><mi>y</mi>
    <mi>i</mi></msub> <mo>-</mo><mover accent="true"><mi>y</mi> <mo>¯</mo></mover><mo>)</mo></mrow></mrow>
    <mrow><mrow><mo>(</mo><mi>n</mi><mo>-</mo><mn>1</mn><mo>)</mo></mrow><msub><mi>s</mi>
    <mi>x</mi></msub> <msub><mi>s</mi> <mi>y</mi></msub></mrow></mfrac></mrow></math>
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="r equals StartFraction sigma-summation Underscript i equals 1
    Overscript n Endscripts left-parenthesis x Subscript i Baseline minus x overbar
    right-parenthesis left-parenthesis y Subscript i Baseline minus y overbar right-parenthesis
    Over left-parenthesis n minus 1 right-parenthesis s Subscript x Baseline s Subscript
    y Baseline EndFraction" display="block"><mrow><mi>r</mi> <mo>=</mo> <mfrac><mrow><msubsup><mo>∑</mo>
    <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow> <mi>n</mi></msubsup> <mrow><mo>(</mo><msub><mi>x</mi>
    <mi>i</mi></msub> <mo>-</mo><mover accent="true"><mi>x</mi> <mo>¯</mo></mover><mo>)</mo></mrow><mrow><mo>(</mo><msub><mi>y</mi>
    <mi>i</mi></msub> <mo>-</mo><mover accent="true"><mi>y</mi> <mo>¯</mo></mover><mo>)</mo></mrow></mrow>
    <mrow><mrow><mo>(</mo><mi>n</mi><mo>-</mo><mn>1</mn><mo>)</mo></mrow><msub><mi>s</mi>
    <mi>x</mi></msub> <msub><mi>s</mi> <mi>y</mi></msub></mrow></mfrac></mrow></math>
- en: Note that we divide by *n* – 1 instead of *n*; see [“Degrees of Freedom, and
    *n* or *n* – 1?”](#Nminus1) for more details. The correlation coefficient always
    lies between +1 (perfect positive correlation) and –1 (perfect negative correlation);
    0 indicates no correlation.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们使用*n* – 1而不是*n*进行除法；详见[“自由度，*n*还是*n* – 1？”](#Nminus1)以获取更多细节。相关系数始终介于+1（完全正相关）和–1（完全负相关）之间；0表示没有相关性。
- en: 'Variables can have an association that is not linear, in which case the correlation
    coefficient may not be a useful metric. The relationship between tax rates and
    revenue raised is an example: as tax rates increase from zero, the revenue raised
    also increases. However, once tax rates reach a high level and approach 100%,
    tax avoidance increases and tax revenue actually declines.'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 变量可能具有非线性的关联，此时相关系数可能不是一个有用的度量指标。税率和筹集的收入之间的关系就是一个例子：随着税率从零增加，筹集的收入也增加。然而，一旦税率达到高水平并接近100%，逃税增加，税收实际上会下降。
- en: '[Table 1-7](#CorrTable), called a *correlation matrix*, shows the correlation
    between the daily returns for telecommunication stocks from July 2012 through
    June 2015. From the table, you can see that Verizon (VZ) and ATT (T) have the
    highest correlation. Level 3 (LVLT), which is an infrastructure company, has the
    lowest correlation with the others. Note the diagonal of 1s (the correlation of
    a stock with itself is 1) and the redundancy of the information above and below
    the diagonal.'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 1-7](#CorrTable)，也称为*相关性矩阵*，展示了2012年7月至2015年6月期间电信股票的日收益之间的相关性。从表中可以看出，Verizon（VZ）和ATT（T）的相关性最高。作为基础设施公司的Level
    3（LVLT）与其他公司的相关性最低。注意到对角线上的1（股票与自身的相关性为1），以及对角线以上和以下信息的冗余性。'
- en: Table 1-7\. Correlation between telecommunication stock returns
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1-7\. 电信股票收益之间的相关性
- en: '|  | T | CTL | FTR | VZ | LVLT |'
  id: totrans-269
  prefs: []
  type: TYPE_TB
  zh: '|  | T | CTL | FTR | VZ | LVLT |'
- en: '| --- | --- | --- | --- | --- | --- |'
  id: totrans-270
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- | --- |'
- en: '| T | 1.000 | 0.475 | 0.328 | 0.678 | 0.279 |'
  id: totrans-271
  prefs: []
  type: TYPE_TB
  zh: '| T | 1.000 | 0.475 | 0.328 | 0.678 | 0.279 |'
- en: '| CTL | 0.475 | 1.000 | 0.420 | 0.417 | 0.287 |'
  id: totrans-272
  prefs: []
  type: TYPE_TB
  zh: '| CTL | 0.475 | 1.000 | 0.420 | 0.417 | 0.287 |'
- en: '| FTR | 0.328 | 0.420 | 1.000 | 0.287 | 0.260 |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| FTR | 0.328 | 0.420 | 1.000 | 0.287 | 0.260 |'
- en: '| VZ | 0.678 | 0.417 | 0.287 | 1.000 | 0.242 |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
  zh: '| VZ | 0.678 | 0.417 | 0.287 | 1.000 | 0.242 |'
- en: '| LVLT | 0.279 | 0.287 | 0.260 | 0.242 | 1.000 |'
  id: totrans-275
  prefs: []
  type: TYPE_TB
  zh: '| LVLT | 0.279 | 0.287 | 0.260 | 0.242 | 1.000 |'
- en: 'A table of correlations like [Table 1-7](#CorrTable) is commonly plotted to
    visually display the relationship between multiple variables. [Figure 1-6](#CorrPlot)
    shows the correlation between the daily returns for major exchange-traded funds
    (ETFs). In *R*, we can easily create this using the package `corrplot`:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 像[表 1-7](#CorrTable)这样的相关性表通常用于可视化显示多个变量之间的关系。[图 1-6](#CorrPlot)展示了主要交易所交易基金（ETFs）的日收益之间的相关性。在*R*中，我们可以使用`corrplot`包轻松创建这种图表：
- en: '[PRE18]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'It is possible to create the same graph in *Python*, but there is no implementation
    in the common packages. However, most support the visualization of correlation
    matrices using heatmaps. The following code demonstrates this using the `seaborn.heatmap`
    package. In the accompanying source code repository, we include *Python* code
    to generate the more comprehensive visualization:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在*Python*中也可以创建相同的图表，但常见的包中并没有实现。然而，大多数支持使用热图可视化相关矩阵。以下代码演示了如何使用`seaborn.heatmap`包。在随附的源代码仓库中，我们包含了生成更全面可视化的*Python*代码：
- en: '[PRE19]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The ETFs for the S&P 500 (SPY) and the Dow Jones Index (DIA) have a high correlation.
    Similarly, the QQQ and the XLK, composed mostly of technology companies, are positively
    correlated. Defensive ETFs, such as those tracking gold prices (GLD), oil prices
    (USO), or market volatility (VXX), tend to be weakly or negatively correlated
    with the other ETFs. The orientation of the ellipse indicates whether two variables
    are positively correlated (ellipse is pointed to the top right) or negatively
    correlated (ellipse is pointed to the top left). The shading and width of the
    ellipse indicate the strength of the association: thinner and darker ellipses
    correspond to stronger relationships.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 标准普尔 500 (SPY) 和道琼斯指数 (DIA) 的 ETF 具有很高的相关性。类似地，主要由科技公司组成的 QQQ 和 XLK 呈正相关。防御型
    ETF，如跟踪黄金价格 (GLD)、石油价格 (USO) 或市场波动性 (VXX) 的 ETF，通常与其他 ETF 的相关性较弱或为负相关。椭圆的方向表明两个变量是否呈正相关（椭圆指向右上方）或负相关（椭圆指向左上方）。椭圆的阴影和宽度表示关联强度：更薄和更深的椭圆对应更强的关系。
- en: '![Correlation between ETF returns.](Images/psd2_0106.png)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![ETF 收益之间的相关性。](Images/psd2_0106.png)'
- en: Figure 1-6\. Correlation between ETF returns
  id: totrans-282
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-6\. ETF 收益之间的相关性
- en: Like the mean and standard deviation, the correlation coefficient is sensitive
    to outliers in the data. Software packages offer robust alternatives to the classical
    correlation coefficient. For example, the *R* package [`robust`](https://oreil.ly/isORz)
    uses the function `covRob` to compute a robust estimate of correlation. The methods
    in the `scikit-learn` module [*sklearn.covariance*](https://oreil.ly/su7wi) implement
    a variety of approaches.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 就像均值和标准差一样，相关系数对数据中的异常值非常敏感。软件包提供了经典相关系数的强健替代方案。例如，*R* 软件包 [`robust`](https://oreil.ly/isORz)
    使用函数 `covRob` 来计算相关的强健估计。`scikit-learn` 模块中的方法 [*sklearn.covariance*](https://oreil.ly/su7wi)
    实现了多种方法。
- en: Other Correlation Estimates
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他相关估计
- en: Statisticians long ago proposed other types of correlation coefficients, such
    as *Spearman’s rho* or *Kendall’s tau*. These are correlation coefficients based
    on the rank of the data. Since they work with ranks rather than values, these
    estimates are robust to outliers and can handle certain types of nonlinearities.
    However, data scientists can generally stick to Pearson’s correlation coefficient,
    and its robust alternatives, for exploratory analysis. The appeal of rank-based
    estimates is mostly for smaller data sets and specific hypothesis tests.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 统计学家很久以前提出了其他类型的相关系数，例如 *Spearman's rho* 或 *Kendall's tau*。这些是基于数据排名的相关系数。由于它们使用排名而不是值，这些估计对异常值鲁棒并且能处理某些非线性。然而，数据科学家通常可以依赖皮尔逊相关系数及其强健替代方案进行探索性分析。基于排名的估计的吸引力主要在于较小的数据集和特定的假设检验。
- en: Scatterplots
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 散点图
- en: 'The standard way to visualize the relationship between two measured data variables
    is with a scatterplot. The x-axis represents one variable and the y-axis another,
    and each point on the graph is a record. See [Figure 1-7](#ScatterplotImage) for
    a plot of the correlation between the daily returns for ATT and Verizon. This
    is produced in *R* with the command:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 表示两个测量数据变量之间关系的标准方法是使用散点图。x 轴表示一个变量，y 轴表示另一个变量，图中的每个点都是一条记录。参见 [图 1-7](#ScatterplotImage)
    关于 ATT 和 Verizon 每日收益相关性的图。这是在 *R* 中使用以下命令生成的：
- en: '[PRE20]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The same graph can be generated in *Python* using the `pandas` scatter method:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 同样的图形可以在 *Python* 中使用 `pandas` 的散点方法生成：
- en: '[PRE21]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The returns have a positive relationship: while they cluster around zero, on
    most days, the stocks go up or go down in tandem (upper-right and lower-left quadrants).
    There are fewer days where one stock goes down significantly while the other stock
    goes up, or vice versa (lower-right and upper-left quadrants).'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 收益之间存在正相关关系：虽然它们围绕零点聚集，大多数日子里，股票上涨或下跌呈现一致性（右上和左下象限）。较少的日子里，一个股票大幅下跌，而另一个股票上涨，或反之（左上和右下象限）。
- en: While the plot [Figure 1-7](#ScatterplotImage) displays only 754 data points,
    it’s already obvious how difficult it is to identify details in the middle of
    the plot. We will see later how adding transparency to the points, or using hexagonal
    binning and density plots, can help to find additional structure in the data.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管图 [图 1-7](#ScatterplotImage) 仅显示了 754 个数据点，但已经明显看出在图的中部识别细节是多么困难。稍后我们将看到如何通过给点添加透明度，或者使用六角形分箱和密度图来帮助发现数据中的额外结构。
- en: '![Scatterplot between returns for ATT and Verizon.](Images/psd2_0107.png)'
  id: totrans-293
  prefs: []
  type: TYPE_IMG
  zh: '![ATT 和 Verizon 收益之间的散点图。](Images/psd2_0107.png)'
- en: Figure 1-7\. Scatterplot of correlation between returns for ATT and Verizon
  id: totrans-294
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-7。ATT和Verizon收益相关性的散点图
- en: Further Reading
  id: totrans-295
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '*Statistics*, 4th ed., by David Freedman, Robert Pisani, and Roger Purves (W.
    W. Norton, 2007) has an excellent discussion of correlation.'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '*统计学*，第4版，David Freedman，Robert Pisani和Roger Purves（W. W. Norton，2007年）对相关性有很好的讨论。'
- en: Exploring Two or More Variables
  id: totrans-297
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索两个或更多变量
- en: Familiar estimators like mean and variance look at variables one at a time (*univariate
    analysis*). Correlation analysis (see [“Correlation”](#Correlations)) is an important
    method that compares two variables (*bivariate analysis*). In this section we
    look at additional estimates and plots, and at more than two variables (*multivariate
    analysis*).
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 熟悉的估算器如均值和方差一次只考虑一个变量（*单变量分析*）。相关分析（参见[“相关性”](#Correlations)）是一种比较两个变量的重要方法（*双变量分析*）。在本节中，我们将探讨更多的估算和图表，以及超过两个变量的分析（*多变量分析*）。
- en: 'Like univariate analysis, bivariate analysis involves both computing summary
    statistics and producing visual displays. The appropriate type of bivariate or
    multivariate analysis depends on the nature of the data: numeric versus categorical.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 与单变量分析类似，双变量分析涉及计算摘要统计信息并生成视觉显示。适当的双变量或多变量分析类型取决于数据的性质：数值还是分类。
- en: Hexagonal Binning and Contours (Plotting Numeric Versus Numeric Data)
  id: totrans-300
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 六角形分箱和等高线（绘制数值对数值数据）
- en: 'Scatterplots are fine when there is a relatively small number of data values.
    The plot of stock returns in [Figure 1-7](#ScatterplotImage) involves only about
    750 points. For data sets with hundreds of thousands or millions of records, a
    scatterplot will be too dense, so we need a different way to visualize the relationship.
    To illustrate, consider the data set `kc_tax`, which contains the tax-assessed
    values for residential properties in King County, Washington. In order to focus
    on the main part of the data, we strip out very expensive and very small or large
    residences using the `subset` function:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 当数据值相对较少时，散点图是合适的。例如，在[图1-7](#ScatterplotImage)中的股票收益图仅涉及约750个数据点。对于包含数十万或数百万条记录的数据集，散点图会显得太密集，因此我们需要一种不同的方法来可视化关系。举例来说，考虑数据集`kc_tax`，它包含华盛顿州金县住宅物业的税务评估价值。为了聚焦于数据的主要部分，我们使用`subset`函数剔除非常昂贵或非常小/大的住宅：
- en: '[PRE22]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'In `pandas`, we filter the data set as follows:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 在`pandas`中，我们按以下方式筛选数据集：
- en: '[PRE23]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[Figure 1-8](#HexagonalBinning) is a *hexagonal binning* plot of the relationship
    between the finished square feet and the tax-assessed value for homes in King
    County. Rather than plotting points, which would appear as a monolithic dark cloud,
    we grouped the records into hexagonal bins and plotted the hexagons with a color
    indicating the number of records in that bin. In this chart, the positive relationship
    between square feet and tax-assessed value is clear. An interesting feature is
    the hint of additional bands above the main (darkest) band at the bottom, indicating
    homes that have the same square footage as those in the main band but a higher
    tax-assessed value.'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: '[图1-8](#HexagonalBinning)是金县住宅完成平方英尺与税务评估价值之间关系的*六角形分箱*图。与绘制点不同，点会形成一个巨大的暗云，我们将记录分组到六角形箱中，并用颜色表示该箱中的记录数量。在这张图中，完成平方英尺与税务评估价值之间的正向关系是明显的。一个有趣的特点是在底部主（最暗）带上方还有额外带的暗示，表明这些住宅与主带中具有相同平方英尺但税务评估价值更高的住宅相同。'
- en: '[Figure 1-8](#HexagonalBinning) was generated by the powerful *R* package `ggplot2`,
    developed by Hadley Wickham [[ggplot2]](bibliography01.xhtml#ggplot2). `ggplot2`
    is one of several new software libraries for advanced exploratory visual analysis
    of data; see [“Visualizing Multiple Variables”](#StatisticalGraphics):'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '[图1-8](#HexagonalBinning)是由强大的*R*包`ggplot2`生成的，该包由Hadley Wickham开发[[ggplot2]](bibliography01.xhtml#ggplot2)。`ggplot2`是用于高级探索性数据分析的几个新软件库之一；请参见[“可视化多个变量”](#StatisticalGraphics)：'
- en: '[PRE24]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'In *Python*, hexagonal binning plots are readily available using the `pandas`
    data frame method `hexbin`:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 在*Python*中，可以使用`pandas`数据帧的`hexbin`方法轻松绘制六角形散点图：
- en: '[PRE25]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![Hexagonal binning for tax-assessed value versus finished square feet.](Images/psd2_0108.png)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![税务评估价值与完成平方英尺的六角形分箱图。](Images/psd2_0108.png)'
- en: Figure 1-8\. Hexagonal binning for tax-assessed value versus finished square
    feet
  id: totrans-311
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-8。税务评估价值与完成平方英尺的六角形分箱图
- en: '[Figure 1-9](#Contours) uses contours overlaid onto a scatterplot to visualize
    the relationship between two numeric variables. The contours are essentially a
    topographical map to two variables; each contour band represents a specific density
    of points, increasing as one nears a “peak.” This plot shows a similar story as
    [Figure 1-8](#HexagonalBinning): there is a secondary peak “north” of the main
    peak. This chart was also created using `ggplot2` with the built-in `geom_density2d`
    function:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The `seaborn` `kdeplot` function in *Python* creates a contour plot:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '![Contour plot of tax-assessed value versus finished square feet.](Images/psd2_0109.png)'
  id: totrans-316
  prefs: []
  type: TYPE_IMG
- en: Figure 1-9\. Contour plot for tax-assessed value versus finished square feet
  id: totrans-317
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Other types of charts are used to show the relationship between two numeric
    variables, including *heat maps*. Heat maps, hexagonal binning, and contour plots
    all give a visual representation of a two-dimensional density. In this way, they
    are natural analogs to histograms and density plots.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
- en: Two Categorical Variables
  id: totrans-319
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A useful way to summarize two categorical variables is a contingency table—a
    table of counts by category. [Table 1-8](#CrossTabs) shows the contingency table
    between the grade of a personal loan and the outcome of that loan. This is taken
    from data provided by Lending Club, a leader in the peer-to-peer lending business.
    The grade goes from A (high) to G (low). The outcome is either fully paid, current,
    late, or charged off (the balance of the loan is not expected to be collected).
    This table shows the count and row percentages. High-grade loans have a very low
    late/charge-off percentage as compared with lower-grade loans.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
- en: Table 1-8\. Contingency table of loan grade and status
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
- en: '| Grade | Charged off | Current | Fully paid | Late | Total |'
  id: totrans-322
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- | --- |'
  id: totrans-323
  prefs: []
  type: TYPE_TB
- en: '| A | 1562 | 50051 | 20408 | 469 | 72490 |'
  id: totrans-324
  prefs: []
  type: TYPE_TB
- en: '|  | 0.022 | 0.690 | 0.282 | 0.006 | 0.161 |'
  id: totrans-325
  prefs: []
  type: TYPE_TB
- en: '| B | 5302 | 93852 | 31160 | 2056 | 132370 |'
  id: totrans-326
  prefs: []
  type: TYPE_TB
- en: '|  | 0.040 | 0.709 | 0.235 | 0.016 | 0.294 |'
  id: totrans-327
  prefs: []
  type: TYPE_TB
- en: '| C | 6023 | 88928 | 23147 | 2777 | 120875 |'
  id: totrans-328
  prefs: []
  type: TYPE_TB
- en: '|  | 0.050 | 0.736 | 0.191 | 0.023 | 0.268 |'
  id: totrans-329
  prefs: []
  type: TYPE_TB
- en: '| D | 5007 | 53281 | 13681 | 2308 | 74277 |'
  id: totrans-330
  prefs: []
  type: TYPE_TB
- en: '|  | 0.067 | 0.717 | 0.184 | 0.031 | 0.165 |'
  id: totrans-331
  prefs: []
  type: TYPE_TB
- en: '| E | 2842 | 24639 | 5949 | 1374 | 34804 |'
  id: totrans-332
  prefs: []
  type: TYPE_TB
- en: '|  | 0.082 | 0.708 | 0.171 | 0.039 | 0.077 |'
  id: totrans-333
  prefs: []
  type: TYPE_TB
- en: '| F | 1526 | 8444 | 2328 | 606 | 12904 |'
  id: totrans-334
  prefs: []
  type: TYPE_TB
- en: '|  | 0.118 | 0.654 | 0.180 | 0.047 | 0.029 |'
  id: totrans-335
  prefs: []
  type: TYPE_TB
- en: '| G | 409 | 1990 | 643 | 199 | 3241 |'
  id: totrans-336
  prefs: []
  type: TYPE_TB
- en: '|  | 0.126 | 0.614 | 0.198 | 0.061 | 0.007 |'
  id: totrans-337
  prefs: []
  type: TYPE_TB
- en: '| Total | 22671 | 321185 | 97316 | 9789 | 450961 |'
  id: totrans-338
  prefs: []
  type: TYPE_TB
- en: 'Contingency tables can look only at counts, or they can also include column
    and total percentages. Pivot tables in Excel are perhaps the most common tool
    used to create contingency tables. In *R*, the `CrossTable` function in the `descr`
    package produces contingency tables, and the following code was used to create
    [Table 1-8](#CrossTabs):'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The `pivot_table` method creates the pivot table in *Python*. The `aggfunc`
    argument allows us to get the counts. Calculating the percentages is a bit more
    involved:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '`pivot_table` 方法在 *Python* 中创建数据透视表。`aggfunc` 参数允许我们获取计数。计算百分比稍微复杂一些：'
- en: '[PRE29]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO2-1)'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO2-1)'
- en: The `margins` keyword argument will add the column and row sums.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: '`margins` 关键字参数将添加列和行总和。'
- en: '[![2](Images/2.png)](#co_exploratory_data_analysis_CO2-2)'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](Images/2.png)](#co_exploratory_data_analysis_CO2-2)'
- en: We create a copy of the pivot table, ignoring the column sums.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 我们创建一个忽略列总和的数据透视表副本。
- en: '[![3](Images/3.png)](#co_exploratory_data_analysis_CO2-3)'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](Images/3.png)](#co_exploratory_data_analysis_CO2-3)'
- en: We divide the rows with the row sum.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过行总和划分行。
- en: '[![4](Images/4.png)](#co_exploratory_data_analysis_CO2-4)'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](Images/4.png)](#co_exploratory_data_analysis_CO2-4)'
- en: We divide the `'All'` column by its sum.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将 `'All'` 列除以其总和。
- en: Categorical and Numeric Data
  id: totrans-351
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分类和数值数据
- en: 'Boxplots (see [“Percentiles and Boxplots”](#Boxplots)) are a simple way to
    visually compare the distributions of a numeric variable grouped according to
    a categorical variable. For example, we might want to compare how the percentage
    of flight delays varies across airlines. [Figure 1-10](#SideBySideBoxplots) shows
    the percentage of flights in a month that were delayed where the delay was within
    the carrier’s control:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 箱线图（见[“百分位数和箱线图”](#Boxplots)）是一种简单的方式，用于根据分类变量比较数值变量的分布。例如，我们可能想比较不同航空公司的航班延误百分比。[Figure 1-10](#SideBySideBoxplots)
    展示了一个月内由于航空公司控制内的延误占比：
- en: '[PRE30]'
  id: totrans-353
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The `pandas` `boxplot` method takes the `by` argument that splits the data
    set into groups and creates the individual boxplots:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas` 的 `boxplot` 方法接受 `by` 参数，将数据集分组并创建各自的箱线图：'
- en: '[PRE31]'
  id: totrans-355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '![Boxplot of percent of airline delays by carrier.](Images/psd2_0110.png)'
  id: totrans-356
  prefs: []
  type: TYPE_IMG
  zh: '![航空公司延误百分比的箱线图。](Images/psd2_0110.png)'
- en: Figure 1-10\. Boxplot of percent of airline delays by carrier
  id: totrans-357
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 1-10\. 航空公司延误百分比的箱线图
- en: 'Alaska stands out as having the fewest delays, while American has the most
    delays: the lower quartile for American is higher than the upper quartile for
    Alaska.'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 阿拉斯加以最少的延误脱颖而出，而美国航空的延误最多：美国航空的下四分位数高于阿拉斯加的上四分位数。
- en: 'A *violin plot*, introduced by [[Hintze-Nelson-1998]](bibliography01.xhtml#Hintze-Nelson-1998),
    is an enhancement to the boxplot and plots the density estimate with the density
    on the y-axis. The density is mirrored and flipped over, and the resulting shape
    is filled in, creating an image resembling a violin. The advantage of a violin
    plot is that it can show nuances in the distribution that aren’t perceptible in
    a boxplot. On the other hand, the boxplot more clearly shows the outliers in the
    data. In `ggplot2`, the function `geom_violin` can be used to create a violin
    plot as follows:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: '*小提琴图*，由[[Hintze-Nelson-1998]](bibliography01.xhtml#Hintze-Nelson-1998)介绍，是箱线图的一种改进，绘制了密度估计，y轴上显示了密度。密度是镜像和翻转的，形成填充的形状，类似于小提琴的形状。小提琴图的优势在于它可以显示箱线图中不易察觉的分布细微差别。另一方面，箱线图更清晰地显示了数据中的异常值。在
    `ggplot2` 中，可以使用 `geom_violin` 函数创建小提琴图如下：'
- en: '[PRE32]'
  id: totrans-360
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Violin plots are available with the `violinplot` method of the `seaborn` package:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 小提琴图可通过 `seaborn` 包的 `violinplot` 方法创建：
- en: '[PRE33]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: The corresponding plot is shown in [Figure 1-11](#ViolinPlot). The violin plot
    shows a concentration in the distribution near zero for Alaska and, to a lesser
    extent, Delta. This phenomenon is not as obvious in the boxplot. You can combine
    a violin plot with a boxplot by adding `geom_boxplot` to the plot (although this
    works best when colors are used).
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的图表显示在[Figure 1-11](#ViolinPlot)。小提琴图显示了阿拉斯加和达美航空在接近零的分布集中，这种现象在箱线图中不太明显。您可以通过将
    `geom_boxplot` 添加到图表中结合箱线图和小提琴图（尤其在使用颜色时效果更佳）。
- en: '![Violin plot of percent of airline delays by carrier.](Images/psd2_0111.png)'
  id: totrans-364
  prefs: []
  type: TYPE_IMG
  zh: '![航空公司延误百分比的小提琴图。](Images/psd2_0111.png)'
- en: Figure 1-11\. Violin plot of percent of airline delays by carrier
  id: totrans-365
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 1-11\. 航空公司延误百分比的小提琴图
- en: Visualizing Multiple Variables
  id: totrans-366
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可视化多个变量
- en: 'The types of charts used to compare two variables—scatterplots, hexagonal binning,
    and boxplots—are readily extended to more variables through the notion of *conditioning*.
    As an example, look back at [Figure 1-8](#HexagonalBinning), which showed the
    relationship between homes’ finished square feet and their tax-assessed values.
    We observed that there appears to be a cluster of homes that have higher tax-assessed
    value per square foot. Diving deeper, [Figure 1-12](#HouseByZip) accounts for
    the effect of location by plotting the data for a set of zip codes. Now the picture
    is much clearer: tax-assessed value is much higher in some zip codes (98105, 98126)
    than in others (98108, 98188). This disparity gives rise to the clusters observed
    in [Figure 1-8](#HexagonalBinning).'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 用于比较两个变量的图表类型——散点图、六边形分箱图和箱线图——可以通过*条件化*的概念轻松扩展到更多变量。例如，请回顾[图 1-8](#HexagonalBinning)，展示了房屋完成平方英尺与其税评估值之间的关系。我们观察到有一组房屋具有较高的每平方英尺税评估值。深入研究，[图 1-12](#HouseByZip)考虑了地理位置的影响，通过绘制一组邮政编码的数据。现在情况清晰多了：某些邮政编码（98105、98126）的税评估值要高得多，而其他邮政编码（98108、98188）较低。这种差异导致了我们在[图 1-8](#HexagonalBinning)中观察到的集群。
- en: 'We created [Figure 1-12](#HouseByZip) using `ggplot2` and the idea of *facets*,
    or a conditioning variable (in this case, zip code):'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`ggplot2`和*facets*（或条件变量，本例中为邮政编码）创建了[图 1-12](#HouseByZip)：
- en: '[PRE34]'
  id: totrans-369
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO3-1)'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO3-1)'
- en: Use the `ggplot` functions `facet_wrap` and `facet_grid` to specify the conditioning
    variable.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`ggplot`函数`facet_wrap`和`facet_grid`来指定条件变量。
- en: '![Tax assess value versus finished square feet by zip code.](Images/psd2_0112.png)'
  id: totrans-372
  prefs: []
  type: TYPE_IMG
  zh: '![按邮政编码划分的税评估值与完成平方英尺。](Images/psd2_0112.png)'
- en: Figure 1-12\. Tax-assessed value versus finished square feet by zip code
  id: totrans-373
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-12。按邮政编码划分的税评估值与完成平方英尺
- en: 'Most *Python* packages base their visualizations on `Matplotlib`. While it
    is in principle possible to create faceted graphs using `Matplotlib`, the code
    can get complicated. Fortunately, `seaborn` has a relatively straightforward way
    of creating these graphs:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数*Python*包基于`Matplotlib`进行可视化。虽然原则上可以使用`Matplotlib`创建分面图，但代码可能会变得复杂。幸运的是，`seaborn`有一种相对简单的方法来创建这些图形：
- en: '[PRE35]'
  id: totrans-375
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO4-1)'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](Images/1.png)](#co_exploratory_data_analysis_CO4-1)'
- en: Use the arguments `col` and `row` to specify the conditioning variables. For
    a single conditioning variable, use `col` together with `col_wrap` to wrap the
    faceted graphs into multiple rows.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 使用参数`col`和`row`来指定条件变量。对于单个条件变量，使用`col`与`col_wrap`将分面图包装成多行。
- en: '[![2](Images/2.png)](#co_exploratory_data_analysis_CO4-2)'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](Images/2.png)](#co_exploratory_data_analysis_CO4-2)'
- en: The `map` method calls the `hexbin` function with subsets of the original data
    set for the different zip codes. `extent` defines the limits of the x- and y-axes.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: '`map`方法调用`hexbin`函数，使用原始数据集的子集来绘制不同邮政编码的六边形分箱图。`extent`定义了x轴和y轴的限制。'
- en: The concept of conditioning variables in a graphics system was pioneered with
    *Trellis graphics*, developed by Rick Becker, Bill Cleveland, and others at Bell
    Labs [[Trellis-Graphics]](bibliography01.xhtml#Trellis-Graphics). This idea has
    propagated to various modern graphics systems, such as the `lattice` [[lattice]](bibliography01.xhtml#lattice)
    and `ggplot2` packages in *R* and the `seaborn` [[seaborn]](bibliography01.xhtml#seaborn)
    and `Bokeh` [[bokeh]](bibliography01.xhtml#bokeh) modules in *Python*. Conditioning
    variables are also integral to business intelligence platforms such as Tableau
    and Spotfire. With the advent of vast computing power, modern visualization platforms
    have moved well beyond the humble beginnings of exploratory data analysis. However,
    key concepts and tools developed a half century ago (e.g., simple boxplots) still
    form a foundation for these systems.
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 在图形系统中，条件变量的概念是由Rick Becker、Bill Cleveland等人在贝尔实验室开发的*Trellis graphics*中首次提出的[[Trellis-Graphics]](bibliography01.xhtml#Trellis-Graphics)。这一思想已经传播到各种现代图形系统，例如*R*语言中的`lattice`[[lattice]](bibliography01.xhtml#lattice)和`ggplot2`包，以及*Python*中的`seaborn`[[seaborn]](bibliography01.xhtml#seaborn)和`Bokeh`[[bokeh]](bibliography01.xhtml#bokeh)模块。条件变量也是诸如Tableau和Spotfire等商业智能平台的核心组成部分。随着计算能力的大幅提升，现代可视化平台已远远超出探索性数据分析的初衷。然而，半个世纪前开发的关键概念和工具（例如简单的箱线图）仍然构成这些系统的基础。
- en: Further Reading
  id: totrans-381
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '*Modern Data Science with R* by Benjamin Baumer, Daniel Kaplan, and Nicholas
    Horton (Chapman & Hall/CRC Press, 2017) has an excellent presentation of “a grammar
    for graphics” (the “gg” in `ggplot`).'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*用R进行现代数据科学*，作者Benjamin Baumer，Daniel Kaplan和Nicholas Horton（Chapman & Hall/CRC
    Press，2017），对“图形语法”（在`ggplot`中的“gg”）有出色的阐述。'
- en: '*ggplot2: Elegant Graphics for Data Analysis* by Hadley Wickham (Springer,
    2009) is an excellent resource from the creator of `ggplot2`.'
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*ggplot2: 数据分析的优雅图形*，作者Hadley Wickham（Springer，2009），是`ggplot2`的创建者的一个优秀资源。'
- en: Josef Fruehwald has a web-based tutorial on [`ggplot2`](https://oreil.ly/zB2Dz).
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Josef Fruehwald有一个关于[`ggplot2`](https://oreil.ly/zB2Dz)的基于Web的教程。
- en: Summary
  id: totrans-385
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概要
- en: Exploratory data analysis (EDA), pioneered by John Tukey, set a foundation for
    the field of data science. The key idea of EDA is that the first and most important
    step in any project based on data is to *look at the data*. By summarizing and
    visualizing the data, you can gain valuable intuition and understanding of the
    project.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 探索性数据分析（EDA），由John Tukey开创，为数据科学领域奠定了基础。EDA的关键思想是，基于数据的任何项目的第一步，也是最重要的步骤是*查看数据*。通过对数据进行总结和可视化，您可以获得宝贵的直觉和对项目的理解。
- en: This chapter has reviewed concepts ranging from simple metrics, such as estimates
    of location and variability, to rich visual displays that explore the relationships
    between multiple variables, as in [Figure 1-12](#HouseByZip). The diverse set
    of tools and techniques being developed by the open source community, combined
    with the expressiveness of the *R* and *Python* languages, has created a plethora
    of ways to explore and analyze data. Exploratory analysis should be a cornerstone
    of any data science project.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 本章回顾了从简单的度量，如位置和变异的估计，到丰富的可视化展示，探索多个变量之间的关系，如[图 1-12](#HouseByZip)中所示。开源社区开发的多种工具和技术，结合*R*和*Python*语言的表现力，已经创造出大量探索和分析数据的方法。探索性分析应成为任何数据科学项目的基石。
