["```py\nlibrary(tidyverse)\nlibrary(readxl)\n\nstar <- read_excel('datasets/star/star.xlsx')\nhead(star)\n#> # A tibble: 6 x 8\n#>   tmathssk treadssk classk            totexpk sex   freelunk race  schidkn\n#>      <dbl>    <dbl> <chr>               <dbl> <chr> <chr>    <chr>   <dbl>\n#> 1      473      447 small.class             7 girl  no       white      63\n#> 2      536      450 small.class            21 girl  no       black      20\n#> 3      463      439 regular.with.aide       0 boy   yes      black      19\n#> 4      559      448 regular                16 boy   no       white      69\n#> 5      489      447 small.class             5 boy   yes      white      79\n#> 6      454      431 regular                 8 boy   yes      white       5\n```", "```py\nselect(star, tmathssk, treadssk, schidkn)\n#> # A tibble: 5,748 x 3\n#>    tmathssk treadssk schidkn\n#>       <dbl>    <dbl>   <dbl>\n#>  1      473      447      63\n#>  2      536      450      20\n#>  3      463      439      19\n#>  4      559      448      69\n#>  5      489      447      79\n#>  6      454      431       5\n#>  7      423      395      16\n#>  8      500      451      56\n#>  9      439      478      11\n#> 10      528      455      66\n#> # ... with 5,738 more rows\n```", "```py\nselect(star, -tmathssk, -treadssk, -schidkn)\n#> # A tibble: 5,748 x 5\n#>    classk            totexpk sex   freelunk race\n#>    <chr>               <dbl> <chr> <chr>    <chr>\n#>  1 small.class             7 girl  no       white\n#>  2 small.class            21 girl  no       black\n#>  3 regular.with.aide       0 boy   yes      black\n#>  4 regular                16 boy   no       white\n#>  5 small.class             5 boy   yes      white\n#>  6 regular                 8 boy   yes      white\n#>  7 regular.with.aide      17 girl  yes      black\n#>  8 regular                 3 girl  no       white\n#>  9 small.class            11 girl  no       black\n#> 10 small.class            10 girl  no       white\n```", "```py\nselect(star, -c(tmathssk, treadssk, schidkn))\n#> # A tibble: 5,748 x 5\n#>    classk            totexpk sex   freelunk race\n#>    <chr>               <dbl> <chr> <chr>    <chr>\n#>  1 small.class             7 girl  no       white\n#>  2 small.class            21 girl  no       black\n#>  3 regular.with.aide       0 boy   yes      black\n#>  4 regular                16 boy   no       white\n#>  5 small.class             5 boy   yes      white\n#>  6 regular                 8 boy   yes      white\n#>  7 regular.with.aide      17 girl  yes      black\n#>  8 regular                 3 girl  no       white\n#>  9 small.class            11 girl  no       black\n#> 10 small.class            10 girl  no       white\n```", "```py\nstar <- select(star, tmathssk:totexpk)\nhead(star)\n#> # A tibble: 6 x 4\n#>   tmathssk treadssk classk            totexpk\n#>      <dbl>    <dbl> <chr>               <dbl>\n#> 1      473      447 small.class             7\n#> 2      536      450 small.class            21\n#> 3      463      439 regular.with.aide       0\n#> 4      559      448 regular                16\n#> 5      489      447 small.class             5\n#> 6      454      431 regular                 8\n```", "```py\nstar <- mutate(star, new_column = tmathssk + treadssk)\nhead(star)\n#> # A tibble: 6 x 5\n#>   tmathssk treadssk classk            totexpk new_column\n#>      <dbl>    <dbl> <chr>               <dbl>      <dbl>\n#> 1      473      447 small.class             7        920\n#> 2      536      450 small.class            21        986\n#> 3      463      439 regular.with.aide       0        902\n#> 4      559      448 regular                16       1007\n#> 5      489      447 small.class             5        936\n#> 6      454      431 regular                 8        885\n```", "```py\nstar <- rename(star, ttl_score = new_column)\nhead(star)\n#> # A tibble: 6 x 5\n#>   tmathssk treadssk classk            totexpk ttl_score\n#>      <dbl>    <dbl> <chr>               <dbl>     <dbl>\n#> 1      473      447 small.class             7       920\n#> 2      536      450 small.class            21       986\n#> 3      463      439 regular.with.aide       0       902\n#> 4      559      448 regular                16      1007\n#> 5      489      447 small.class             5       936\n#> 6      454      431 regular                 8       885\n```", "```py\narrange(star, classk, treadssk)\n#> # A tibble: 5,748 x 5\n#>    tmathssk treadssk classk  totexpk ttl_score\n#>       <dbl>    <dbl> <chr>     <dbl>     <dbl>\n#>  1      320      315 regular       3       635\n#>  2      365      346 regular       0       711\n#>  3      384      358 regular      20       742\n#>  4      384      358 regular       3       742\n#>  5      320      360 regular       6       680\n#>  6      423      376 regular      13       799\n#>  7      418      378 regular      13       796\n#>  8      392      378 regular      13       770\n#>  9      392      378 regular       3       770\n#> 10      399      380 regular       6       779\n#> # ... with 5,738 more rows\n```", "```py\n# Sort by classk descending, treadssk ascending\narrange(star, desc(classk), treadssk)\n#> # A tibble: 5,748 x 5\n#>    tmathssk treadssk classk      totexpk ttl_score\n#>       <dbl>    <dbl> <chr>         <dbl>     <dbl>\n#>  1      412      370 small.class      15       782\n#>  2      434      376 small.class      11       810\n#>  3      423      378 small.class       6       801\n#>  4      405      378 small.class       8       783\n#>  5      384      380 small.class      19       764\n#>  6      405      380 small.class      15       785\n#>  7      439      382 small.class       8       821\n#>  8      384      384 small.class      10       768\n#>  9      405      384 small.class       8       789\n#> 10      423      384 small.class      21       807\n```", "```py\nfilter(star, classk == 'small.class')\n#> # A tibble: 1,733 x 5\n#>    tmathssk treadssk classk      totexpk ttl_score\n#>       <dbl>    <dbl> <chr>         <dbl>     <dbl>\n#>  1      473      447 small.class       7       920\n#>  2      536      450 small.class      21       986\n#>  3      489      447 small.class       5       936\n#>  4      439      478 small.class      11       917\n#>  5      528      455 small.class      10       983\n#>  6      559      474 small.class       0      1033\n#>  7      494      424 small.class       6       918\n#>  8      478      422 small.class       8       900\n#>  9      602      456 small.class      14      1058\n#> 10      439      418 small.class       8       857\n#> # ... with 1,723 more rows\n```", "```py\nfilter(star, treadssk >= 500)\n#> # A tibble: 233 x 5\n#>    tmathssk treadssk classk            totexpk ttl_score\n#>       <dbl>    <dbl> <chr>               <dbl>     <dbl>\n#>  1      559      522 regular                 8      1081\n#>  2      536      507 regular.with.aide       3      1043\n#>  3      547      565 regular.with.aide       9      1112\n#>  4      513      503 small.class             7      1016\n#>  5      559      605 regular.with.aide       5      1164\n#>  6      559      554 regular                14      1113\n#>  7      559      503 regular                10      1062\n#>  8      602      518 regular                12      1120\n#>  9      536      580 small.class            12      1116\n#> 10      626      510 small.class            14      1136\n#> # ... with 223 more rows\n```", "```py\n# Get records where classk is small.class and\n# treadssk is at least 500\nfilter(star, classk == 'small.class' & treadssk >= 500)\n#> # A tibble: 84 x 5\n#>    tmathssk treadssk classk      totexpk ttl_score\n#>       <dbl>    <dbl> <chr>         <dbl>     <dbl>\n#>  1      513      503 small.class       7      1016\n#>  2      536      580 small.class      12      1116\n#>  3      626      510 small.class      14      1136\n#>  4      602      518 small.class       3      1120\n#>  5      626      565 small.class      14      1191\n#>  6      602      503 small.class      14      1105\n#>  7      626      538 small.class      13      1164\n#>  8      500      580 small.class       8      1080\n#>  9      489      565 small.class      19      1054\n#> 10      576      545 small.class      19      1121\n#> # ... with 74 more rows\n```", "```py\nstar_grouped <- group_by(star, classk)\nhead(star_grouped)\n#> # A tibble: 6 x 5\n#> # Groups:   classk [3]\n#>   tmathssk treadssk classk            totexpk ttl_score\n#>      <dbl>    <dbl> <chr>               <dbl>     <dbl>\n#> 1      473      447 small.class             7       920\n#> 2      536      450 small.class            21       986\n#> 3      463      439 regular.with.aide       0       902\n#> 4      559      448 regular                16      1007\n#> 5      489      447 small.class             5       936\n#> 6      454      431 regular                 8       885\n```", "```py\nsummarize(star_grouped, avg_math = mean(tmathssk))\n#> `summarise()` ungrouping output (override with `.groups` argument)\n#> # A tibble: 3 x 2\n#>   classk            avg_math\n#>   <chr>                <dbl>\n#> 1 regular               483.\n#> 2 regular.with.aide     483.\n#> 3 small.class           491.\n```", "```py\nstar <- read_excel('datasets/star/star.xlsx')\nhead(star)\n#> # A tibble: 6 x 8\n#>   tmathssk treadssk classk            totexpk sex   freelunk race  schidkn\n#>      <dbl>    <dbl> <chr>               <dbl> <chr> <chr>    <chr>   <dbl>\n#> 1      473      447 small.class             7 girl  no       white      63\n#> 2      536      450 small.class            21 girl  no       black      20\n#> 3      463      439 regular.with.aide       0 boy   yes      black      19\n#> 4      559      448 regular                16 boy   no       white      69\n#> 5      489      447 small.class             5 boy   yes      white      79\n#> 6      454      431 regular                 8 boy   yes      white       5\n\ndistricts <- read_csv('datasets/star/districts.csv')\n\n#> -- Column specification -----------------------------------------------------\n#> cols(\n#>   schidkn = col_double(),\n#>   school_name = col_character(),\n#>   county = col_character()\n#> )\n\nhead(districts)\n#> # A tibble: 6 x 3\n#>   schidkn school_name     county\n#>     <dbl> <chr>           <chr>\n#> 1       1 Rosalia         New Liberty\n#> 2       2 Montgomeryville Topton\n#> 3       3 Davy            Wahpeton\n#> 4       4 Steelton        Palestine\n#> 5       6 Tolchester      Sattley\n#> 6       7 Cahokia         Sattley\n```", "```py\n# Left outer join star on districts\nleft_join(select(star, schidkn, tmathssk, treadssk), districts)\n#> Joining, by = \"schidkn\"\n#> # A tibble: 5,748 x 5\n#>    schidkn tmathssk treadssk school_name     county\n#>      <dbl>    <dbl>    <dbl> <chr>           <chr>\n#>  1      63      473      447 Ridgeville      New Liberty\n#>  2      20      536      450 South Heights   Selmont\n#>  3      19      463      439 Bunnlevel       Sattley\n#>  4      69      559      448 Hokah           Gallipolis\n#>  5      79      489      447 Lake Mathews    Sugar Mountain\n#>  6       5      454      431 NA              NA\n#>  7      16      423      395 Calimesa        Selmont\n#>  8      56      500      451 Lincoln Heights Topton\n#>  9      11      439      478 Moose Lake      Imbery\n#> 10      66      528      455 Siglerville     Summit Hill\n#> # ... with 5,738 more rows\n```", "```py\nstar_grouped <- group_by(star, classk)\nstar_avg_reading <- summarize(star_grouped, avg_reading = mean(treadssk))\n#> `summarise()` ungrouping output (override with `.groups` argument)\n#>\nstar_avg_reading_sorted <- arrange(star_avg_reading, desc(avg_reading))\nstar_avg_reading_sorted\n#>\n#> # A tibble: 3 x 2\n#>   classk            avg_reading\n#>   <chr>                   <dbl>\n#> 1 small.class              441.\n#> 2 regular.with.aide        435.\n#> 3 regular                  435.\n```", "```py\n star %>%\n   group_by(classk) %>%\n   summarise(avg_reading = mean(treadssk)) %>%\n   arrange(desc(avg_reading))\n#> `summarise()` ungrouping output (override with `.groups` argument)\n#> # A tibble: 3 x 2\n#>   classk            avg_reading\n#>   <chr>                   <dbl>\n#> 1 small.class              441.\n#> 2 regular.with.aide        435.\n#> 3 regular                  435.\n```", "```py\n# Average math and reading score\n# for each school district\nstar %>%\n   group_by(schidkn) %>%\n   summarise(avg_read = mean(treadssk), avg_math = mean(tmathssk)) %>%\n   arrange(schidkn) %>%\n   head()\n#> `summarise()` ungrouping output (override with `.groups` argument)\n#> # A tibble: 6 x 3\n#>   schidkn avg_read avg_math\n#>     <dbl>    <dbl>    <dbl>\n#> 1       1     444\\.     492.\n#> 2       2     407\\.     451.\n#> 3       3     441      491.\n#> 4       4     422\\.     468.\n#> 5       5     428\\.     460.\n#> 6       6     428\\.     470.\n```", "```py\nstar_pivot <- star %>%\n                select(c(schidkn, treadssk, tmathssk)) %>%\n                mutate(id = row_number())\n```", "```py\nstar_long <- star_pivot %>%\n                 pivot_longer(cols = c(tmathssk, treadssk),\n                              values_to = 'score', names_to = 'test_type')\nhead(star_long)\n#> # A tibble: 6 x 4\n#>   schidkn    id test_type score\n#>     <dbl> <int> <chr>     <dbl>\n#> 1      63     1 tmathssk    473\n#> 2      63     1 treadssk    447\n#> 3      20     2 tmathssk    536\n#> 4      20     2 treadssk    450\n#> 5      19     3 tmathssk    463\n#> 6      19     3 treadssk    439\n```", "```py\n# Rename tmathssk and treadssk as math and reading\nstar_long <- star_long %>%\n   mutate(test_type = recode(test_type,\n                            'tmathssk' = 'math', 'treadssk' = 'reading'))\n\ndistinct(star_long, test_type)\n#> # A tibble: 2 x 1\n#>   test_type\n#>   <chr>\n#> 1 math\n#> 2 reading\n```", "```py\nstar_wide <- star_long %>%\n                pivot_wider(values_from = 'score', names_from = 'test_type')\nhead(star_wide)\n#> # A tibble: 6 x 4\n#>   schidkn    id  math reading\n#>     <dbl> <int> <dbl>   <dbl>\n#> 1      63     1   473     447\n#> 2      20     2   536     450\n#> 3      19     3   463     439\n#> 4      69     4   559     448\n#> 5      79     5   489     447\n#> 6       5     6   454     431\n```", "```py\nggplot(data = star, ![1](assets/1.png)\n          aes(x = classk)) + ![2](assets/2.png)\n   geom_bar() ![3](assets/3.png)\n```", "```py\nggplot(data = star, aes(x = treadssk)) +\n  geom_histogram()\n\n#> `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```", "```py\nggplot(data = star, aes(x = treadssk)) +\n  geom_histogram(bins = 25, fill = 'pink')\n```", "```py\nggplot(data = star, aes(x = treadssk)) +\n  geom_boxplot()\n```", "```py\nggplot(data = star, aes(y = treadssk)) +\n  geom_boxplot()\n```", "```py\nggplot(data = star, aes(x = classk, y = treadssk)) +\n  geom_boxplot()\n```", "```py\nggplot(data = star, aes(x = tmathssk, y = treadssk)) +\n  geom_point()\n```", "```py\nggplot(data = star, aes(x = tmathssk, y = treadssk)) +\n  geom_point() +\n  xlab('Math score') + ylab('Reading score') +\n  ggtitle('Math score versus reading score')\n```"]