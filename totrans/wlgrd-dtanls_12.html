<html><head></head><body>
<div id="sbo-rt-content"><div class="readable-text" id="p1">
<h1 class="readable-text-h1"><span class="chapter-title-numbering"><span class="num-string">13</span></span> <span class="chapter-title-text">Iterating on someone else’s work: Customer segmentation</span></h1>
</div>
<div class="introduction-summary">
<h3 class="introduction-header sigil_not_in_toc">This chapter covers</h3>
<ul>
<li class="readable-text" id="p2">Segmenting users based on behavioral data</li>
<li class="readable-text" id="p3">Evaluating the output of a clustering algorithm</li>
</ul>
</div>
<div class="readable-text" id="p4">
<p>In this chapter, we will use the dataset created in the previous chapter to segment users into groups based on their mobile browsing behavior. In chapter 12, we took over another analyst’s work, verified their findings, and continued analyzing our customers’ behavior. We turned an event-level dataset into a user-level one, and in this chapter, we will apply a clustering algorithm to create distinct user segments. We will evaluate these segments and address our stakeholders’ questions. Let’s recap the project before continuing.</p>
</div>
<div class="readable-text" id="p5">
<h2 class="readable-text-h2" id="sigil_toc_id_160"><span class="num-string">13.1</span> Project 8 revisited: Finding customer segments from mobile activity</h2>
</div>
<div class="readable-text" id="p6">
<p>To recap, we’re working for AppEcho Insights, an analytics company focused on mobile user behavior. They analyze data on how users use their phones and provide insights to mobile phone manufacturers and app developers.</p>
</div>
<div class="readable-text intended-text" id="p7">
<p>They want to understand whether there are groups of users who use their phones in a similar way. Knowing these user segments would be useful as their clients could target entire user bases with different initiatives. They’d like to focus on the following:</p>
</div>
<ul>
<li class="readable-text" id="p8"> The types of apps that people use. For example, do some customers use their phones more for social media than others? </li>
<li class="readable-text" id="p9"> Temporal patterns. Do users prefer to browse their phones at different times of the day? </li>
<li class="readable-text" id="p10"> The use of a more suitable segmentation method (e.g., an algorithm that can handle grouping users based on multiple dimensions). </li>
</ul>
<div class="readable-text" id="p11">
<p>We have answered their first two questions in chapter 12, where we looked at both temporal patterns and differences in app usage.</p>
</div>
<div class="readable-text intended-text" id="p12">
<p>The data is available for you to attempt the project yourself at <a href="https://davidasboth.com/book-code">https://davidasboth.com/book-code</a>. You will find the files that you can use for the project, including the first analyst’s slides, as well as the example solution in the form of a Jupyter notebook.</p>
</div>
<div class="readable-text intended-text" id="p13">
<p>We are now ready to apply a clustering algorithm to address AppEcho’s final point and create more sophisticated customer groups.</p>
</div>
<div class="readable-text" id="p14">
<h3 class="readable-text-h3" id="sigil_toc_id_161"><span class="num-string">13.1.1</span> Data dictionary</h3>
</div>
<div class="readable-text" id="p15">
<p>As a reminder, they have provided a dataset of mobile events and the presentation the initial analyst delivered. The dataset consists of individual mobile events, such as a user opening or closing a mobile app. There are only a few columns, but it is possible to extract rich behavioral information. The events are timestamped, so the temporal element can also be analyzed. See chapters 8 and 9 for more details about working with time data.</p>
</div>
<div class="readable-text print-book-callout" id="p16">
<p><span class="print-book-callout-head">NOTE</span>  The data was originally taken from <a href="https://github.com/aliannejadi/LSApp">https://github.com/aliannejadi/LSApp</a>. Thank you to Mohammad Aliannejadi for permission to use the data.</p>
</div>
<div class="readable-text" id="p17">
<p>A key initial step is to take a look at the available data. Table 13.1 shows the data dictionary.</p>
</div>
<div class="browsable-container browsable-table-container framemaker-table-container" id="p18">
<h5 class="browsable-container-h5 sigil_not_in_toc"><span class="num-string">Table 13.1</span> Data dictionary</h5>
<table>
<thead>
<tr>
<th>
<div>
         Column 
       </div></th>
<th>
<div>
         Definition 
       </div></th>
</tr>
</thead>
<tbody>
<tr>
<td>  User ID <br/></td>
<td>  A user’s unique identifier. <br/></td>
</tr>
<tr>
<td>  Session ID <br/></td>
<td>  Uniquely identifies a user’s activity session. <br/></td>
</tr>
<tr>
<td>  Timestamp <br/></td>
<td>  Date and time of an individual event. <br/></td>
</tr>
<tr>
<td>  App name <br/></td>
<td>  The name of the app in use. <br/></td>
</tr>
<tr>
<td>  Event type <br/></td>
<td>  The type of the event that took place. Values are one of the following: “Opened,” “Closed,” “User Interaction,” or “Broken.” <br/></td>
</tr>
</tbody>
</table>
</div>
<div class="readable-text" id="p19">
<p>Let’s also revisit what the outcomes of this project should be.</p>
</div>
<div class="readable-text" id="p20">
<h3 class="readable-text-h3" id="sigil_toc_id_162"><span class="num-string">13.1.2</span> Desired outcomes</h3>
</div>
<div class="readable-text" id="p21">
<p>Our stakeholders want a more in-depth analysis, which we have completed, and customer segments based on more dimensions, which is the focus of this chapter. The final output is the definition of our user segments, meaning what factors describe each segment and which users belong to which group.</p>
</div>
<div class="readable-text intended-text" id="p22">
<p>Before continuing the analysis, let’s revisit the work done so far.</p>
</div>
<div class="readable-text" id="p23">
<h3 class="readable-text-h3" id="sigil_toc_id_163"><span class="num-string">13.1.3</span> Project summary so far</h3>
</div>
<div class="readable-text" id="p24">
<p>In the previous chapter</p>
</div>
<ul>
<li class="readable-text" id="p25"> We investigated the work behind the initial presentation and verified the summary statistics presented by the previous analyst. </li>
<li class="readable-text" id="p26"> We continued the analysis by diving deeper into user behavior and concluded that there are distinct groups of people who use their phones at different times. </li>
<li class="readable-text" id="p27"> We used generative AI to categorize app names into broader app categories. </li>
<li class="readable-text" id="p28"> We used these app categories to identify different user behaviors based on what apps a user uses the most. </li>
<li class="readable-text" id="p29"> Finally, we exported a user-level dataset ready for segmentation in the next phase. </li>
</ul>
<div class="readable-text" id="p30">
<p>Figure 13.1 shows the work done so far.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p31">
<img alt="figure" height="1259" src="../Images/13-1.png" width="1009"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.1</span> The work done on the project in the previous chapter</h5>
</div>
<div class="readable-text intended-text" id="p32">
<p>We can now use the user-level dataset exported from the previous chapter to create user segments. In this chapter, we will choose a clustering method, apply it, and evaluate the results before identifying our conclusions and next steps.</p>
</div>
<div class="readable-text" id="p33">
<h3 class="readable-text-h3" id="sigil_toc_id_164"><span class="num-string">13.1.4</span> Segmentation of mobile users using clustering</h3>
</div>
<div class="readable-text" id="p34">
<p>To recap, in our version of the analysis, we’ll segment users on the following dimensions:</p>
</div>
<ul>
<li class="readable-text" id="p35"> Number of unique apps used (as a proxy for how varied their usage is) </li>
<li class="readable-text" id="p36"> Number of unique usage sessions (as a proxy for frequency of use) </li>
<li class="readable-text" id="p37"> Average duration of a user session </li>
<li class="readable-text" id="p38"> What time of day most of their usage occurs </li>
<li class="readable-text" id="p39"> What type of app they use most frequently </li>
</ul>
<div class="readable-text" id="p40">
<p>These dimensions make up 12 columns in total in our data. The dataset has 13 columns, but one is the user ID, which is an arbitrary integer and won’t be used for clustering. The steps we will take to segment the users are as follows:</p>
</div>
<ol>
<li class="readable-text" id="p41"> Transform our data so all columns are on the same scale </li>
<li class="readable-text" id="p42"> Choose a clustering algorithm </li>
<li class="readable-text" id="p43"> Apply the clustering algorithm to allocate each data point to a cluster </li>
<li class="readable-text" id="p44"> Evaluate the output </li>
</ol>
<div class="readable-text" id="p45">
<p>Let’s read in this user-level data that we created in the previous chapter. Figure 13.2 shows a sample of the data:</p>
</div>
<div class="browsable-container listing-container" id="p46">
<div class="code-area-container">
<pre class="code-area">import pandas as pd
import matplotlib.pyplot as plt
users = pd.read_parquet("./data/users.parquet")
users.head()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p47">
<img alt="figure" height="922" src="../Images/13-2.png" width="1034"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.2</span> A snapshot of the user-level data created in the previous chapter</h5>
</div>
<div class="readable-text" id="p48">
<p>Before applying a clustering algorithm to data, we need to check whether our data is on the same scale. Figure 13.3 shows a reminder of the columns in our user-level data.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p49">
<img alt="figure" height="181" src="../Images/13-3.png" width="1000"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.3</span> The columns available in our user-level data</h5>
</div>
<div class="readable-text intended-text" id="p50">
<p>We have variables that are on different scales. The indicator columns can only be zero or one, whereas columns like the number of sessions could potentially be in the thousands. This poses a problem for distance-based clustering methods.</p>
</div>
<div class="readable-text" id="p51">
<h4 class="readable-text-h4 sigil_not_in_toc">Transforming variables to be on the same scale</h4>
</div>
<div class="readable-text" id="p52">
<p>Clustering means finding data points that are close together. The definition of “close together” requires a numeric measurement of distance. If one of our columns is on a larger scale than the others, then that column will dominate our clusters. In our case, if we use the data as is, it is most likely that users will be segmented only by the number of sessions because that is the column with the largest variation. If all columns are within approximately the same range, they will contribute equally to the clusters.</p>
</div>
<div class="readable-text intended-text" id="p53">
<p>There are different scaling methods we could use. One typical approach is to transform data points into z-scores, meaning they will be measured by the distance, in standard deviations, to the mean value of that column. All data scaled this way will be approximately in the range from –5 to 5, regardless of the underlying units. If a user has a “number of sessions” value of 1 after transformation, it means their value of the number of sessions is one standard deviation above the mean number of sessions for a user. This is then directly comparable against a value of 1 for the number of apps, even though the two measures might be on different scales.</p>
</div>
<div class="readable-text intended-text" id="p54">
<p>Whichever method we choose for scaling, we will only apply it to our continuous data and not the indicator columns because those are already on a comparable scale. The following code transforms our raw data into a scaled version, and figure 13.4 shows the first few rows. Notice that the data in the figure is transposed to make it easier to see values for all 12 columns:</p>
</div>
<div class="browsable-container listing-container" id="p55">
<div class="code-area-container code-area-with-html">
<pre class="code-area">from sklearn.preprocessing import StandardScaler

scaler = StandardScaler()     <span class="aframe-location"/> #1

X = users.drop(columns=["user_id"])

continuous_features = ['number_of_apps',
                       'number_of_sessions',
                       'avg_session_length']

X_scaled = X.copy()
X_scaled.loc[:,continuous_features]
<span class="">↪</span> = scaler.fit_transform(X[continuous_features])   <span class="aframe-location"/> #2

X_scaled.head().transpose()   <span class="aframe-location"/><span class="aframe-location"/> #3</pre>
<div class="code-annotations-overlay-container">
     #1 Creates a scaler object
     <br/>#2 Transforms only continuous columns and overwrites their values
     <br/>#3 Shows a transposed version of the top five rows for readability
     <br/>
</div>
</div>
</div>
<div class="browsable-container figure-container" id="p56">
<img alt="figure" height="637" src="../Images/13-4.png" width="900"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.4</span> The first few rows of the transformed data ready for clustering</h5>
</div>
<div class="readable-text" id="p57">
<p>Notice how the indicator columns still contain binary values; only the final three continuous columns have had their values scaled. Before choosing and applying a clustering algorithm, let’s review the process so far and add the scaling step. Figure 13.5 shows the latest diagram.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p58">
<img alt="figure" height="1053" src="../Images/13-5.png" width="1009"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.5</span> The process so far, including the start of the segmentation</h5>
</div>
<div class="readable-text intended-text" id="p59">
<p>We are now ready to choose and apply a clustering algorithm to segment our users.</p>
</div>
<div class="readable-text" id="p60">
<h4 class="readable-text-h4 sigil_not_in_toc">Choosing and applying a clustering algorithm</h4>
</div>
<div class="readable-text" id="p61">
<p>Choosing a clustering algorithm depends on the available data. Some clustering methods work with large datasets better than others, while others perform better when there are many dimensions. Some require choosing the number of clusters up front, whereas some will settle on a number by themselves based on the data. As with most data analysis methods, there are pros and cons to different approaches. See the scikit-learn documentation for more information on these pros and cons: <a href="https://mng.bz/MD5W">https://mng.bz/MD5W</a>.</p>
</div>
<div class="readable-text intended-text" id="p62">
<p>For this solution, we’ll keep it simple and use the most popular k-means algorithm. It’s a distance-based method that groups points into the same cluster if they are close together in data space. It tries to find a solution where points within a cluster are as close together as possible, but clusters are as far away from each other as possible. That means groups should be as homogeneous as possible internally but otherwise differ from each other. Let’s add this decision to our growing diagram, the latest version of which is shown in figure 13.6.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p63">
<img alt="figure" height="1053" src="../Images/13-6.png" width="1009"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.6</span> Our latest progress, including the choice of clustering algorithm</h5>
</div>
<div class="readable-text" id="p64">
<p>One important component of clustering algorithms like k-means is that we need to choose the number of groups up front. This is not straightforward, as we might not have any intuition about what number makes sense for our current case. One method for finding the right ballpark for the number of clusters is referred to as the “elbow method.” This means empirically trying different numbers of groups and seeing where the benefits of adding another group start to tail off.</p>
</div>
<div class="readable-text intended-text" id="p65">
<p>We will run a k-means clustering algorithm with different numbers of groups and measure something called the “inertia,” which measures how closely points are to their cluster centers. A low inertia value means a better clustering structure. Bear in mind, however, that adding more groups <em>always</em> <em>lowers</em> the inertia because having more cluster centers means points are more likely to be close to one. Typically, we find the point where adding another cluster does not significantly lower the inertia score.</p>
</div>
<div class="readable-text print-book-callout" id="p66">
<p><span class="print-book-callout-head">Note</span>  In reality, unsupervised methods such as clustering are evaluated subjectively. It is more important to ask whether the clusters make sense for our use case than it is to optimize numeric metrics, such as inertia.</p>
</div>
<div class="readable-text" id="p67">
<p>The “elbow method” concept is best illustrated visually. The following code runs the k-means algorithm from 3 up to 15 groups and plots the associated inertia scores, shown in figure 13.7:</p>
</div>
<div class="browsable-container listing-container" id="p68">
<div class="code-area-container">
<pre class="code-area">from sklearn.cluster import KMeans

k_values = range(3, 15)
inertia_values = []

for k in k_values:
    kmeans = KMeans(n_clusters=k, random_state=42)
    kmeans.fit(X_scaled)
    inertia_values.append(kmeans.inertia_)

fig, axis = plt.subplots()

axis.plot(k_values, inertia_values)

_ = axis.set(
    title="'Inertia' values for different values of k",
    xlabel="Number of clusters (the 'k' in k-means)",
    ylabel="Inertia"
)

axis.set_ybound(0, 900)

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p69">
<img alt="figure" height="549" src="../Images/13-7.png" width="722"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.7</span> The result of clustering with a different number of groups</h5>
</div>
<div class="readable-text" id="p70">
<p>This shows a typical scenario where adding a cluster when there are few clusters significantly decreases the inertia value, but this pattern does not continue. In figure 13.7, going from seven to eight clusters barely reduces the inertia score. Most of the time, these plots look like arms, and we’re looking for the elbow, the inflection point, after which the slope of the line flatlines. In the case of figure 13.7, we will use seven as the inflection point and, therefore, start with seven clusters. Figure 13.8 shows the process with this latest decision added.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p71">
<img alt="figure" height="1053" src="../Images/13-8.png" width="1009"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.8</span> The latest process after choosing the number of clusters</h5>
</div>
<div class="readable-text intended-text" id="p72">
<p>Let’s apply k-means clustering to our data, choosing seven clusters to create. We’ll use scikit-learn for this, the popular Python library for machine learning. We will create a k-means clustering object, apply it to the data, and create a new column in our user table, recording which of the seven clusters each user belongs to. The following code does this, and figure 13.9 shows a snapshot of the enhanced user table. Again, the data is transposed so we can see values for all columns:</p>
</div>
<div class="browsable-container listing-container" id="p73">
<div class="code-area-container">
<pre class="code-area">kmeans = KMeans(n_clusters=7, random_state=42)
clusters = kmeans.fit_predict(X_scaled)
users["cluster"] = clusters

users.head().transpose()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p74">
<img alt="figure" height="717" src="../Images/13-9.png" width="900"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.9</span> Five rows of user data with added cluster assignments</h5>
</div>
<div class="readable-text" id="p75">
<p>Figure 13.9 shows the initial user data with all the dimensions as well as a new cluster assignment. It tells us that user 0 was assigned to cluster 3, users 1–3 were assigned to cluster 6, and so on. We will use this new column to evaluate the results.</p>
</div>
<div class="readable-text" id="p76">
<h4 class="readable-text-h4 sigil_not_in_toc">Evaluating the results of clustering</h4>
</div>
<div class="readable-text" id="p77">
<p>Once the clustering has finished, we want to evaluate our results, which means the following:</p>
</div>
<ul>
<li class="readable-text" id="p78"> Investigating the center of each cluster (i.e., what does a typical user in each group look like?). </li>
<li class="readable-text" id="p79"> Looking at the spread of values for each cluster (i.e., what are typical characteristics for all users in a group?). </li>
<li class="readable-text" id="p80"> Understanding whether clusters are distinct from each other. We don’t want a situation where we create two clusters that are similar. We want each group to be distinctive somehow. </li>
</ul>
<div class="readable-text" id="p81">
<p>First, let’s see how many users are in each cluster. The following code does this and produces the output in figure 13.10:</p>
</div>
<div class="browsable-container listing-container" id="p82">
<div class="code-area-container">
<pre class="code-area">users["cluster"].value_counts().sort_index()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p83">
<img alt="figure" height="255" src="../Images/13-10.png" width="379"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.10</span> Number of users per cluster</h5>
</div>
<div class="readable-text" id="p84">
<p>One thing we immediately notice is that there are two clusters with only two or three users in each. This either means those users are truly different from the others or that we need fewer clusters. One downside of a method like k-means is that asking it to create seven clusters will create seven clusters, whether or not that’s warranted. Let’s look at the clusters’ centers, which tell us the average of each group, which we can use as a proxy for what a typical user looks like in each segment.</p>
</div>
<div class="readable-text intended-text" id="p85">
<p>One thing we need to remember to do is <em>reverse</em> the transformation we did earlier to our continuous columns so that the cluster centers are on the same scale as our input data. Otherwise, the number of apps, number of sessions, and average session length would all be approximately between –3 and 3..</p>
</div>
<div class="readable-text intended-text" id="p86">
<p>The following code does this reverse transformation and prints out the center values for each cluster, which is shown in figure 13.11:</p>
</div>
<div class="browsable-container listing-container" id="p87">
<div class="code-area-container code-area-with-html">
<pre class="code-area">import numpy as np

original_cluster_centers
<span class="">↪</span> = np.copy(kmeans.cluster_centers_)   <span class="aframe-location"/> #1

cluster_centers = pd.DataFrame(
    data=original_cluster_centers,
    columns=X_scaled.columns
)

cluster_centers.loc[:,continuous_features]
<span class="">↪</span> = scaler.inverse_transform(original_cluster_centers[:,-3:])    <span class="aframe-location"/> #2

cluster_centers.transpose().round(2)<span class="aframe-location"/></pre>
<div class="code-annotations-overlay-container">
     #1 Makes a copy of the cluster centers so we don’t modify them by accident
     <br/>#2 Reverses the transformation only for the continuous columns, leaving the binary ones intact
     <br/>
</div>
</div>
</div>
<div class="browsable-container figure-container" id="p88">
<img alt="figure" height="638" src="../Images/13-11.png" width="900"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.11</span> Cluster centers and their associated properties</h5>
</div>
<div class="readable-text" id="p89">
<p>What this shows us is that, for example, reading down the first column, in cluster 0, 48% of the users are night owls, 76% of them mostly use their phones for social purposes, and they average 107 unique sessions.</p>
</div>
<div class="readable-text intended-text" id="p90">
<p>Clusters 4 and 5 only had two to three users. It looks like one reason why cluster 4 is a cluster of its own is that it is where the most extreme users are in terms of the number of sessions as the average is over 3,000. Cluster 5 looks like it represents users who have the longest session lengths, an average of 9.79 minutes. Based on these findings, we will decide to keep all seven clusters as they seem to represent different kinds of users.</p>
</div>
<div class="readable-text intended-text" id="p91">
<p>The next step is to give each group a persona to describe them. For example, cluster 1 contains users with a lot of sessions and a high number of apps; they mostly use their phones for social media and are either late-day or night browsers. This seems like a distinctive persona: someone who comes home from work and spends their phone time mostly socializing.</p>
</div>
<div class="readable-text intended-text" id="p92">
<p>Another clear persona would be cluster 2, which contains more casual users. They have a low number of total sessions, which are generally short; they use their phones mostly for browsing and only use seven different apps on average. Users in cluster 6 browse more during the day but average shorter sessions. Perhaps they’re people who use social media apps during their lunch break at work. Let’s summarize the possible personas. This summary is shown in table 13.2.</p>
</div>
<div class="browsable-container browsable-table-container framemaker-table-container" id="p93">
<h5 class="browsable-container-h5 sigil_not_in_toc"><span class="num-string">Table 13.2</span> Summary of user personas</h5>
<table>
<thead>
<tr>
<th>
<div>
         Group 
       </div></th>
<th>
<div>
         Persona name 
       </div></th>
<th>
<div>
         Persona characteristics 
       </div></th>
</tr>
</thead>
<tbody>
<tr>
<td>  0 <br/></td>
<td>  Typical social users <br/></td>
<td>  Average number of sessions, mostly social media, mostly late in the day and at night <br/></td>
</tr>
<tr>
<td>  1 <br/></td>
<td>  Heavy users <br/></td>
<td>  High number of sessions and apps used, mostly social media, mostly late in the day and at night <br/></td>
</tr>
<tr>
<td>  2 <br/></td>
<td>  Casual users <br/></td>
<td>  Low number of sessions and apps, short usage sessions, mostly for browsing <br/></td>
</tr>
<tr>
<td>  3 <br/></td>
<td>  Night owls <br/></td>
<td>  All night owls, mostly social media use <br/></td>
</tr>
<tr>
<td>  4 <br/></td>
<td>  Usage outliers <br/></td>
<td>  Averaging over 3,600 sessions in total over the period <br/></td>
</tr>
<tr>
<td>  5 <br/></td>
<td>  Session length outliers <br/></td>
<td>  Averaging almost 10 minutes per usage session <br/></td>
</tr>
<tr>
<td>  6 <br/></td>
<td>  Evening social users <br/></td>
<td>  Average number of sessions, short usage sessions, mostly for social media, mostly late in the day <br/></td>
</tr>
</tbody>
</table>
</div>
<div class="readable-text" id="p94">
<p>From this table, we can give each group a persona based on their statistics, but we may think there are groups that are similar and could be merged. For example, clusters 0 and 6 are not that different. You might do some of that additional merging before presenting to your stakeholders, or it might be done with their input. Either way, these kinds of subjective evaluations are how we would determine whether seven clusters was a good fit in this case.</p>
</div>
<div class="readable-text intended-text" id="p95">
<p>Before summarizing our findings and discussing the next steps, let’s revisit our entire process. We completed several steps from recreating the initial analysis to performing our own, and finally creating new customer segments. Figure 13.12 shows the entire process visualized.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p96">
<img alt="figure" height="1258" src="../Images/13-12.png" width="954"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 13.12</span> Diagram of the entire process</h5>
</div>
<div class="readable-text intended-text" id="p97">
<p>Let’s now summarize our findings and decide on the next steps.</p>
</div>
<div class="readable-text" id="p98">
<h3 class="readable-text-h3" id="sigil_toc_id_165"><span class="num-string">13.1.5</span> Conclusions and next steps</h3>
</div>
<div class="readable-text" id="p99">
<p>In the end, adding the dimensions our stakeholders were interested in allowed us to create increasingly complex user segments. These formed our minimum viable answer. The important question is whether our findings will lead to actions. What can the business do with these customer segments? Because the company’s business model is to sell these insights to mobile manufacturers and app developers, we can imagine some ways in which they could use this information:</p>
</div>
<ul>
<li class="readable-text" id="p100"> Having a more precise way of defining “heavy users” could help create interventions for those who use their phones too much. </li>
<li class="readable-text" id="p101"> Understanding who the “casual” users are means better targeting of intermediate content (e.g., how to get the best out of your mobile). </li>
<li class="readable-text" id="p102"> Having separate user segments for those who primarily use their phones for social media could lead to better targeting of other social media apps. </li>
</ul>
<div class="readable-text" id="p103">
<p>An important aspect of this project to realize is that our clusters were driven entirely based on our decisions. Our data manipulation choices, the choice of variables, and the choice of clustering algorithm all contributed to the final solution. A change in any of those decisions would have created different groupings. This is why collaboration with stakeholders is so important. They are the ones who can help make the decisions that create the most relevant outcomes.</p>
</div>
<div class="callout-container sidebar-container">
<div class="readable-text" id="p104">
<h5 class="callout-container-h5 readable-text-h5 sigil_not_in_toc">Presentation skills</h5>
</div>
<div class="readable-text" id="p105">
<p>Presenting your results as an analyst is something that comes with practice. It requires many interactions with people in a real context (i.e., in the context of an analysis they care about). The skills necessary to do this well include the ability to</p>
</div>
<ul>
<li class="readable-text" id="p106"> Understand your audience, their motivations, their existing understanding, and so forth </li>
<li class="readable-text" id="p107"> Empathize with your audience and tailor your message </li>
<li class="readable-text" id="p108"> Summarize your findings in a relevant way </li>
<li class="readable-text" id="p109"> Tell the story of your analysis </li>
</ul>
<div class="readable-text" id="p110">
<p>This last point broadly comes under something called “data storytelling,” which contains a collection of related skills. For more information, see <em>The Data Storyteller’s Handbook</em> by Kat Greenbrook (Rogue Kororaˉ, 2023).</p>
</div>
<div class="readable-text" id="p111">
<p>The best way to hone these skills is to present your results to a relevant audience. Getting real-time feedback from an audience is extremely valuable for improving as a presenter. Another related way is to give talks at meetups and conferences. This will help you practice communicating your expertise in a topic with confidence. Finally, building a project portfolio can be valuable in discussions with hiring managers.</p>
</div>
</div>
<div class="readable-text" id="p112">
<p>What about additional work? Although there are few columns, the data is rich enough for further iterations. One idea might be to infer a user’s mobile operating system. If they used the Google app, they’re likely on an Android device, whereas using Apple apps would mean they’re on iOS. This distinction might change the makeup of our user segments.</p>
</div>
<div class="readable-text intended-text" id="p113">
<p>We also didn’t make full use of the individual event-level aspect of the data. We could look at time spent on individual apps, number of times apps are opened and closed, whether there is variation in how often people switch apps, and so on. All of these considerations could give us richer user segments to explore.</p>
</div>
<div class="readable-text intended-text" id="p114">
<p>One caveat of the data, which we somewhat sidestepped, is that sessions don’t start and end cleanly. Sometimes, a session ends with an “Opened” event, and another starts just a few minutes later. If we wanted to explore sessions and events in more detail, we would want to clean up those sessions in more depth.</p>
</div>
<div class="callout-container sidebar-container">
<div class="readable-text" id="p115">
<h5 class="callout-container-h5 readable-text-h5 sigil_not_in_toc">Activity: Further project ideas with this data</h5>
</div>
<div class="readable-text" id="p116">
<p>Think about other analyses you could do with this dataset. Here are some directions you may want to consider:</p>
</div>
<ul>
<li class="readable-text" id="p117"> What does app-level behavior look like for different people? Do people use different apps differently? </li>
<li class="readable-text" id="p118"> What are the most popular apps in each category? </li>
<li class="readable-text" id="p119"> What does the adoption rate look like in our user base for new apps? Are there any ways to enhance your data with external sources to better answer this question? </li>
</ul>
</div>
<div class="readable-text" id="p120">
<h2 class="readable-text-h2" id="sigil_toc_id_166"><span class="num-string">13.2</span> Closing thoughts: Segmentation and clustering</h2>
</div>
<div class="readable-text" id="p121">
<p>The skills you practiced in this project to segment users are relevant to all kinds of real-world scenarios. Segmentation comes up in many domains. Whether you want to find similar customers, microwaves, or crops, the underlying ideas are the same.</p>
</div>
<div class="readable-text intended-text" id="p122">
<p>To be prepared for any clustering project in the future, it is useful to be acquainted with</p>
</div>
<ul>
<li class="readable-text" id="p123"> Some of the different clustering algorithms and in what scenario each is more useful </li>
<li class="readable-text" id="p124"> Preprocessing techniques for unsupervised machine learning, such as the standardization we performed in this project </li>
<li class="readable-text" id="p125"> Evaluation metrics, such as the inertia score we measured earlier, or more advanced concepts such as silhouette scores </li>
<li class="readable-text" id="p126"> The subjective evaluation process whereby we decide whether a set of clusters is appropriate for the given business case </li>
</ul>
<div class="readable-text" id="p127">
<p>Having at least a surface-level familiarity with these concepts means that when you encounter a relevant project in real life, you will be able to identify clustering as an appropriate method as well as research more deeply the aspects you need to produce a minimum viable answer.</p>
</div>
<div class="readable-text intended-text" id="p128">
<p>As always, the best way to hone these skills is by practicing them, so if you encounter a problem in real life where clustering is a relevant approach, use it as an opportunity to put your skills to the test.</p>
</div>
<div class="readable-text" id="p129">
<h3 class="readable-text-h3" id="sigil_toc_id_167"><span class="num-string">13.2.1</span> Skills learned to use for any project</h3>
</div>
<div class="readable-text" id="p130">
<p>Let’s recap the various aspects of this latest project and the skills required to complete it. To successfully continue someone else’s existing analysis, the key skills that can be applied to any similar project include</p>
</div>
<ul>
<li class="readable-text" id="p131"> Verifying existing calculations (e.g., for reported summary metrics such as averages) </li>
<li class="readable-text" id="p132"> Rerunning the existing analysis code, if available, to verify the findings </li>
<li class="readable-text" id="p133"> Documenting assumptions and decisions made by previous analysts on the project </li>
</ul>
<div class="readable-text" id="p134">
<p>To segment records, such as customers, into distinct groups, the key skills, which apply to any such project, include</p>
</div>
<ul>
<li class="readable-text" id="p135"> Creating a dataset at the right level of granularity (e.g., a user-level dataset if segmenting users) </li>
<li class="readable-text" id="p136"> Transforming data that is input to a clustering algorithm to all be on the same scale </li>
<li class="readable-text" id="p137"> Choosing an appropriate clustering algorithm </li>
<li class="readable-text" id="p138"> Using an appropriate tool to run the chosen clustering algorithm on the data </li>
<li class="readable-text" id="p139"> Evaluating the results both numerically (e.g., by looking at inertia scores, and subjectively by seeing if clusters make sense from a domain expertise perspective) </li>
</ul>
<div class="readable-text" id="p140">
<h2 class="readable-text-h2" id="sigil_toc_id_168">Summary</h2>
</div>
<ul>
<li class="readable-text" id="p141"> Segmentation/clustering algorithms have a wide applicability for data problems. </li>
<li class="readable-text" id="p142"> Decisions we make, such as the number of clusters or what variables to include to determine them, will radically alter the outcome of a clustering algorithm. </li>
<li class="readable-text" id="p143"> Tasks such as user segmentation require subjective human evaluation. </li>
<li class="readable-text" id="p144"> Giving clusters personas helps identify their key characteristics. </li>
</ul>
</div></body></html>