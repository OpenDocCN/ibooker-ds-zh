<html><head></head><body>
<div id="sbo-rt-content"><div class="readable-text" id="p1">
<h1 class="readable-text-h1"><span class="chapter-title-numbering"><span class="num-string">6</span></span> <span class="chapter-title-text">Categorical data</span></h1>
</div>
<div class="introduction-summary">
<h3 class="introduction-header sigil_not_in_toc">This chapter covers</h3>
<ul>
<li class="readable-text" id="p2">Determining the best approach to handle categorical data</li>
<li class="readable-text" id="p3">How to avoid common mistakes when working with categorical data</li>
<li class="readable-text" id="p4">Analyzing categorical data with the right methods to investigate patterns and associations </li>
</ul>
</div>
<div class="readable-text" id="p5">
<p>Sometimes, you may encounter data that is not numeric, and your typical analysis methods won’t apply. Instead, this data represents groups or categories with values limited to a set number of options. Customer locations, departments, and demographics are typical sources of such discrete values. We call this <em>categorical</em> data, and it is common in most datasets.</p>
</div>
<div class="readable-text intended-text" id="p6">
<p>Methods suitable for numeric or continuous data are not appropriate for categorical data. Knowing the correct way to handle categorical data will broaden your toolbox and ensure you use the right tool for the job when your data is mostly categorical. In this chapter, we will review common tools for handling categorical data before diving into the project.</p>
</div>
<div class="readable-text" id="p7">
<h2 class="readable-text-h2" id="sigil_toc_id_73"><span class="num-string">6.1</span> Working with categorical data</h2>
</div>
<div class="readable-text" id="p8">
<p>One of the first tasks in any analysis is understanding your data. In a tabular dataset, every column of data will be one of two types: continuous or categorical. This distinction doesn’t apply to unstructured data, such as audio or video files, but most analysts work mostly with tabular data. Regardless of what the values in these columns represent, they will either be on a continuous scale or part of a discrete set. Sometimes, it is not even obvious whether a column is categorical if the entries are numeric. Let’s look at an example dataset.</p>
</div>
<div class="readable-text intended-text" id="p9">
<p>Figure 6.1 shows a snapshot of a dataset used widely in the machine learning community for teaching purposes. The original data was created by Jánosi et al. (1988) and is available at <a href="https://mng.bz/vKo7">https://mng.bz/vKo7</a>. It is a medical dataset of different patient measurements, also showing whether the patients had coronary heart disease. The associated data problem is to use the measurements to predict whether a patient has coronary heart disease.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p10">
<img alt="figure" height="239" src="../Images/6-1.png" width="999"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.1</span> A preview of the UCI heart disease dataset</h5>
</div>
<div class="readable-text" id="p11">
<p>The first two columns, <code>age</code> and <code>sex</code>, are easier to identify as continuous and categorical, respectively. Even though <code>sex</code> is numeric, we treat it the same as if the values were text (e.g., “male” or “female”). For example, taking a numeric average of this column is not the same as calculating the average age of our patients would be. We call this type of categorical column <em>nominal</em> because there is no natural ordering among the categories. Other examples include color or political parties.</p>
</div>
<div class="readable-text intended-text" id="p12">
<p>Categorical data can also be <em>ordinal</em>, where categories do have a natural order but are not on a numerical scale. Examples include sizes (e.g., small, medium, and large) or survey responses (e.g., values between “strongly disagree” and “strongly agree”). For completeness, table 6.1 shows the breakdown of the different types of data we can encounter.</p>
</div>
<div class="browsable-container browsable-table-container framemaker-table-container" id="p13">
<h5 class="browsable-container-h5 sigil_not_in_toc"><span class="num-string">Table 6.1</span> An overview of the different types of data</h5>
<table>
<thead>
<tr>
<th>
<div>
         Name 
       </div></th>
<th>
<div>
         Categorical or continuous? 
       </div></th>
<th>
<div>
         Properties 
       </div></th>
<th>
<div>
         Example 
       </div></th>
</tr>
</thead>
<tbody>
<tr>
<td>  Nominal <br/></td>
<td>  Categorical <br/></td>
<td>  Data has discrete values, and categories are not ordered. <br/></td>
<td>  Colors, political parties <br/></td>
</tr>
<tr>
<td>  Ordinal <br/></td>
<td>  Categorical <br/></td>
<td>  Data has discrete values, and categories have a natural order, but spacing is uneven between categories. <br/></td>
<td>  T-shirt sizes (S/M/L), survey responses (good versus bad) <br/></td>
</tr>
<tr>
<td>  Interval <br/></td>
<td>  Continuous <br/></td>
<td>  Values are spaced evenly, but zero is not an absence of the measurement. <br/></td>
<td>  Temperature <br/></td>
</tr>
<tr>
<td>  Ratio <br/></td>
<td>  Continuous <br/></td>
<td>  Values are spaced evenly, and zero means an absence of the measurement. <br/></td>
<td>  Height, weight <br/></td>
</tr>
</tbody>
</table>
</div>
<div class="readable-text print-book-callout" id="p14">
<p><span class="print-book-callout-head">Note</span>  The word “ratio” in these definitions is not to be confused with the meaning where two measurements are compared to each other, like the ratio of new versus returning customers. In this case, “ratio” is the technical term for a continuous variable that starts at zero, where zero indicates an absence of that quantity. You can have a negative temperature but not a negative height, which is the distinction between “interval” and “ratio” quantities.</p>
</div>
<div class="readable-text" id="p15">
<p>Back to the heart disease example. What about the other columns beyond <code>age</code> and <code>sex</code>? If we just inspect the data types when importing it, we observe that all columns are numeric. Figure 6.2 shows sample Python output to verify this.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p16">
<img alt="figure" height="398" src="../Images/6-2.png" width="244"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.2</span> The data types in the heart disease data</h5>
</div>
<div class="readable-text" id="p17">
<p>From this information so far, we might conclude that because our columns are numeric, all of our data must be continuous. However, upon closer inspection, we find that a few of our columns only take a small number of discrete values. For example, figure 6.3 shows the breakdown of values in the <code>slope</code> column.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p18">
<img alt="figure" height="115" src="../Images/6-3.png" width="336"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.3</span> Breakdown of values of the <code>slope</code> column in the heart disease dataset</h5>
</div>
<div class="readable-text intended-text" id="p19">
<p>Although this is an integer column, there are only three discrete values. These values correspond to whether a patient’s exercise-related tests were done on an upward or downward slope or none at all. This column is, therefore, categorical, specifically, nominal.</p>
</div>
<div class="readable-text" id="p20">
<p>This might seem like a trivial finding, but if we were to treat this column as continuous, we might perform erroneous calculations with it, such as taking an average. We might get an average slope value of 0.6, but it would be meaningless. It does not represent a value halfway between 0, upsloping, and 1, flat, because the numbering is arbitrary. Changing the numbers we assign to each category would change this result and its interpretation.</p>
</div>
<div class="callout-container sidebar-container">
<div class="readable-text" id="p21">
<h5 class="callout-container-h5 readable-text-h5 sigil_not_in_toc">Real business case: Enhancing analyses with categorical data</h5>
</div>
<div class="readable-text" id="p22">
<p>Used cars that go through auctions have all sorts of data entered about them, and a lot of them are categorical. Transmission type, fuel type, make, and model are all categorical values and are fundamental to understanding the used car market. The models I built for predicting the price of a used car or the likelihood that it will sell all heavily relied on these categorical values.</p>
</div>
<div class="readable-text" id="p23">
<p>Our team was also periodically asked to look at whether the color of a car had any effect on its value. This not only involved manipulating a categorical <code>color</code> column but also extracting those categories from a free text field where people could enter anything for the color of the car!</p>
</div>
</div>
<div class="readable-text" id="p24">
<p>How do we then treat categorical data? Let’s review some differences between methods for continuous versus categorical data.</p>
</div>
<div class="readable-text" id="p25">
<h3 class="readable-text-h3" id="sigil_toc_id_74"><span class="num-string">6.1.1</span> Methods for handling categorical data</h3>
</div>
<div class="readable-text" id="p26">
<p>Let’s look at some key methods for analyzing continuous and categorical data. When we are working with continuous data, we are specifically interested in</p>
</div>
<ul>
<li class="readable-text" id="p27"> The range of our values </li>
<li class="readable-text" id="p28"> The distribution of our values </li>
<li class="readable-text" id="p29"> The presence of outliers </li>
<li class="readable-text" id="p30"> Associations between continuous values </li>
</ul>
<div class="readable-text" id="p31">
<p>To explore these properties, the tools we have at our disposal are</p>
</div>
<ul>
<li class="readable-text" id="p32"> Summary statistics (minimum, maximum, mean, median, etc.) </li>
<li class="readable-text" id="p33"> Histograms and box plots to investigate range and distribution </li>
<li class="readable-text" id="p34"> Scatter plots and correlation measures to investigate relationships between continuous variables </li>
</ul>
<div class="readable-text" id="p35">
<p>When it comes to categorical data, not all of these methods apply. Let’s revisit the heart disease dataset for an example where treating categorical values as continuous leads us astray.</p>
</div>
<div class="readable-text intended-text" id="p36">
<p>One mistake we might make is to use the categorical <code>slope</code> variable in a regression model as if it were continuous, that is, in a scenario where we try to predict someone’s risk of heart disease based on the slope of the apparatus while testing them. We might end up with a result that would be interpreted as “for every unit increase in slope, the likelihood of our patient having heart disease goes up by 7%.” This is a valid interpretation for continuous measures like age, where every additional year of someone’s age increases the risk of heart disease. However, what does a “unit increase” in the slope value mean? Since the numbering is arbitrary, it doesn’t actually mean anything, and the whole problem is formulated incorrectly.</p>
</div>
<div class="readable-text intended-text" id="p37">
<p>The correct treatment of the <code>slope</code> column for regression would be to convert it to binary indicator variables, each column representing one of the possible discrete values in a categorical column. In our slope example, we would create columns that represent whether each patient had a 0, 1, or 2 for their slope value, so we would create three columns, one for each possible slope value. The value of these columns would be 0 or 1, depending on whether the slope value was 0, 1, or 2. These binary columns would, therefore, be mutually exclusive since the <code>slope</code> column could only ever be one value. This is also referred to as <em>one-hot encoding</em>, and the results of this in our scenario are shown in figure 6.4 alongside the original <code>slope</code> column.</p>
</div>
<div class="readable-text print-book-callout" id="p38">
<p><span class="print-book-callout-head">Note</span>  You might have also seen the term “dummy variables” to describe this format. Technically, dummy variables are one-hot encodings with one of the columns dropped, but the idea is the same.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p39">
<img alt="figure" height="725" src="../Images/6-4.png" width="490"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.4</span> The original slope column and three new columns created by applying one-hot encoding</h5>
</div>
<div class="readable-text" id="p40">
<p>From this format, we can still infer the value of the <code>slope</code> column for each patient, but now, these columns are also valid as inputs to a regression model. This is just one example where there is a method specifically suited for categorical data. In general, for categorical data, we are interested in</p>
</div>
<ul>
<li class="readable-text" id="p41"> The frequency distribution of our values </li>
<li class="readable-text" id="p42"> Associations between our categorical values and other values, both continuous and categorical </li>
</ul>
<div class="readable-text" id="p43">
<p>Some methods that specifically tackle these attributes for categorical data are</p>
</div>
<ul>
<li class="readable-text" id="p44"> Grouping and aggregation </li>
<li class="readable-text" id="p45"> Bar charts to visualize the frequency distribution </li>
<li class="readable-text" id="p46"> Pivot tables and crosstabs to compare cooccurrences of two categorical columns </li>
<li class="readable-text" id="p47"> Histograms and box plots colored by a categorical column to show the distribution of a continuous variable across different categories </li>
</ul>
<div class="readable-text" id="p48">
<p>There are many other methods to investigate continuous and categorical data, some of which we will explore in more detail in the chapter. One common source of categorical values, which we will work with, is survey response data.</p>
</div>
<div class="readable-text" id="p49">
<h3 class="readable-text-h3" id="sigil_toc_id_75"><span class="num-string">6.1.2</span> Working with survey data</h3>
</div>
<div class="readable-text" id="p50">
<p>Survey data has its own specific considerations beyond the fact that it is a common source of categorical columns. As we’re doing our analysis, we will need to consider the following:</p>
</div>
<ul>
<li class="readable-text" id="p51"> Survey data is self-reported, meaning it will have special kinds of biases. People might choose to omit answers for personal reasons or answer untruthfully. Participants who answer the survey are likely the kinds of people who willingly answer surveys, which again means a biased sample. </li>
<li class="readable-text" id="p52"> Data might be missing for different reasons than in other datasets. Missing data could indicate an unwillingness to answer specific questions, users exiting the survey halfway through, or questions that are unavailable to the user based on answers to other questions (e.g. follow-ups to elaborate if they answered yes to something). </li>
<li class="readable-text" id="p53"> Many answers will be on a Likert scale, where participants choose one of typically five answers ranging from “strongly disagree” to “strongly agree.” This means we will be working with ordinal values—categories that have a natural order but not a consistent numeric scale. </li>
</ul>
<div class="readable-text" id="p54">
<p>The takeaway is that we should not underestimate the importance of knowing our data, and a key aspect of that is knowing the correct type of each of our columns and the source of the data itself. Let’s now put this to the test in this chapter’s project.</p>
</div>
<div class="readable-text" id="p55">
<h2 class="readable-text-h2" id="sigil_toc_id_76"><span class="num-string">6.2</span> Project 5: Analyzing a survey to understand developer attitudes toward AI tools</h2>
</div>
<div class="readable-text" id="p56">
<p>Let’s now look at our project, in which we will analyze survey responses to understand how software developers are using AI tools. Most of the data is categorical because the source is a survey that contained lots of multiple-choice questions resulting in categorical values. We will look at the problem statement, the data dictionary, the outputs we should aim for, and what capabilities our tools need to tackle this problem. We will then go through a detailed plan using our results-oriented framework before diving into an example solution.</p>
</div>
<div class="readable-text intended-text" id="p57">
<p>The data is available for you to attempt it yourself at <a href="https://davidasboth.com/book-code">https://davidasboth.com/book-code</a>. You will find the files with which you can attempt the project, as well as the example solution in the form of a Jupyter notebook.</p>
</div>
<div class="readable-text" id="p58">
<h3 class="readable-text-h3" id="sigil_toc_id_77"><span class="num-string">6.2.1</span> Problem statement</h3>
</div>
<div class="readable-text" id="p59">
<p>In this scenario, you are working as an analyst for AI Dev Elite, an AI startup focused on creating generative AI tools for people who write code, such as software developers. They are struggling to focus their product idea, so they have asked you to research how coders are currently using generative AI tools. They want to identify people’s pain points and find a market gap to exploit.</p>
</div>
<div class="readable-text intended-text" id="p60">
<p>They have two hypotheses they would like you to test:</p>
</div>
<ul>
<li class="readable-text" id="p61"> New versus experienced coders are using these tools differently. </li>
<li class="readable-text" id="p62"> People’s opinions on the usefulness and trustworthiness of current AI tools depend on their experience, job role, and what specifically they use the tools for. </li>
</ul>
<div class="readable-text" id="p63">
<p>As much as they would love to access the queries people are typing into these tools directly, they have identified the Stack Overflow Developer Survey as a good source of information for the first iteration of this project. In this survey, developers disclosed details about their jobs, current tools, and usage of and attitudes toward generative AI tools. It is from these survey results that they want us to test their hypotheses.</p>
</div>
<div class="readable-text print-book-callout" id="p64">
<p><span class="print-book-callout-head">NOTE</span>  Thank you to Stack Overflow for making their Developer Survey results available here: <a href="https://insights.stackoverflow.com/survey">https://insights.stackoverflow.com/survey</a>, under the Open Database License (ODbL).</p>
</div>
<div class="readable-text" id="p65">
<h3 class="readable-text-h3" id="sigil_toc_id_78"><span class="num-string">6.2.2</span> Data dictionary</h3>
</div>
<div class="readable-text" id="p66">
<p>The data dictionary for this dataset comes in two parts, both included in the supplementary materials:</p>
</div>
<ul>
<li class="readable-text" id="p67"> There is a question-by-question breakdown, <code>survey_results_schema.csv</code>, documenting which question a column contains answers for. Some questions’ answers are spread across multiple columns. </li>
<li class="readable-text" id="p68"> There is also a PDF copy of the survey itself. With this, you can directly observe the data-generating process, which is rare. </li>
</ul>
<div class="readable-text" id="p69">
<p>I recommend looking at the survey to start with because that will put the columns in both the data dictionary and the data itself into context. Seeing the survey questions directly will help identify the questions of interest for the analysis. Then, you can use the <code>survey_results_schema.csv</code> file to find the associated column name(s) in the answer data. Figure 6.5 shows an excerpt of this lookup file.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p70">
<img alt="figure" height="286" src="../Images/6-5.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.5</span> An excerpt of the mapping document used as a data dictionary</h5>
</div>
<div class="readable-text" id="p71">
<p>As figure 6.5 shows, the question about how many years someone has coded professionally is referenced in the answer data as <code>YearsCodePro</code>. This is how we identify all the relevant columns for analysis in the example solution.</p>
</div>
<div class="readable-text" id="p72">
<h3 class="readable-text-h3" id="sigil_toc_id_79"><span class="num-string">6.2.3</span> Desired outcomes</h3>
</div>
<div class="readable-text" id="p73">
<p>Since our stakeholders have specific hypotheses, our analysis should focus on these. We need to do some general exploration of the data to identify missing values and so on, but our focus is on the specifics of the request. Our minimum viable answer should be evidence to support or refute these hypotheses. Therefore,</p>
</div>
<ul>
<li class="readable-text" id="p74"> Our conclusions should include whether there is a difference in the use of AI across different levels of experience. </li>
<li class="readable-text" id="p75"> We should communicate the factors that affect a person’s opinion of, and trust in, AI tools, as supported by the survey data. </li>
</ul>
<div class="readable-text" id="p76">
<h3 class="readable-text-h3" id="sigil_toc_id_80"><span class="num-string">6.2.4</span> Required tools</h3>
</div>
<div class="readable-text" id="p77">
<p>As with most chapters, as long as your toolkit can read, explore, and visualize data, it will be suitable to complete this project. In the example solution, I use Python, the <code>pandas</code> library for data exploration, and <code>matplotlib</code> and <code>seaborn</code> for visualization. I also introduce some statistical functions from the <code>scipy</code> library when investigating associations within the data. The checklist for this project is, therefore, that your tool can</p>
</div>
<ul>
<li class="readable-text" id="p78"> Load multiple datasets from CSV or Excel files </li>
<li class="readable-text" id="p79"> Combine two or more datasets </li>
<li class="readable-text" id="p80"> Perform basic data manipulation tasks, such as sorting, grouping, and reshaping data </li>
<li class="readable-text" id="p81"> Create data visualizations </li>
<li class="readable-text" id="p82"> Produce statistical analysis, specifically of categorical data, but this is optional </li>
</ul>
<div class="readable-text" id="p83">
<h2 class="readable-text-h2" id="sigil_toc_id_81"><span class="num-string">6.3</span> Applying the results-driven method to analyzing the developer survey</h2>
</div>
<div class="readable-text" id="p84">
<p>Let’s now see how we keep our result in focus and formulate a results-oriented action plan. We can follow the steps of the results-driven process to explore the data with our stakeholders’ requests and hypotheses in mind.</p>
</div>
<div class="browsable-container figure-container" id="p85">
<img alt="figure" height="175" src="../Images/6-unnumb-1.png" width="529"/>
</div>
<div class="readable-text" id="p86">
<p><em><span class="aframe-location"/></em>First, we need to understand what our stakeholders want from this analysis. Their initial aim is to find evidence to support or contradict their initial theories, but their ultimate goal is to find a market gap to exploit with an AI product. We can keep these two aims in mind when analyzing the data to ensure our results are valuable.</p>
</div>
<div class="browsable-container figure-container" id="p87">
<img alt="figure" height="175" src="../Images/6-unnumb-2.png" width="529"/>
</div>
<div class="readable-text" id="p88">
<p><em><span class="aframe-location"/></em>From our stakeholders’ request, we know there are two kinds of output to create:</p>
</div>
<ul>
<li class="readable-text" id="p89"> Evidence for whether there is a difference in the use of AI tools between developers of different experience levels </li>
<li class="readable-text" id="p90"> Analysis of the factors that determine someone’s score when assessing the usefulness and trust of AI tools </li>
</ul>
<div class="readable-text" id="p91">
<p>As always, having a results-oriented focus means we can ignore certain paths our analysis could take if those paths do not serve us in finding an answer to our specific questions. In practice, this means ignoring questions in the survey that are not related to experience, usefulness, or trust in AI tools or a factor that could likely be linked to these.</p>
</div>
<div class="browsable-container figure-container" id="p92">
<img alt="figure" height="175" src="../Images/6-unnumb-3.png" width="529"/>
</div>
<div class="readable-text" id="p93">
<p><em><span class="aframe-location"/></em>In this project, the identification of the data source has been done for us. This is not an uncommon scenario, and as ever, we are working within the limitations of the available data.</p>
</div>
<div class="browsable-container figure-container" id="p94">
<img alt="figure" height="175" src="../Images/6-unnumb-4.png" width="529"/>
</div>
<div class="readable-text" id="p95">
<p><em><span class="aframe-location"/></em>There is one question to resolve at this stage, which is whether we want to look at surveys that happened before 2023 (currently the latest version). We have more than a single survey available to us, so we could choose to include past years as well. However, there are two arguments against doing this. First, we want a minimum viable answer, which means erring on the side of using less data to start with. Second, the use of AI tools has only really taken off in 2023, so earlier data may not give us more information to help our specific analysis.</p>
</div>
<div class="browsable-container figure-container" id="p96">
<img alt="figure" height="175" src="../Images/6-unnumb-5.png" width="529"/>
</div>
<div class="readable-text" id="p97">
<p><em><span class="aframe-location"/></em>Having thought about the problem before diving in, this is the part where we formulate the action plan for the analysis. We broadly want to take the following steps:</p>
</div>
<ul>
<li class="readable-text" id="p98"> Read the survey to ascertain the exact questions that were asked. </li>
<li class="readable-text" id="p99"> Examine the data dictionary and our data to see how questions relate to columns in the data. </li>
<li class="readable-text" id="p100"> Explore the data by looking at the usual properties, such as missing data, outliers, and similar. </li>
<li class="readable-text" id="p101"> Identify the questions and columns that relate to our research questions. </li>
<li class="readable-text" id="p102"> Analyze the relationship between our variables and the AI-related outcomes we are interested in. </li>
<li class="readable-text" id="p103"> Summarize our findings in light of our stakeholders’ hypotheses. </li>
</ul>
<div class="readable-text print-book-callout" id="p104">
<p><span class="print-book-callout-head">Tip</span>  This is a project where statistical tests might be useful since we have specific hypotheses to investigate. Rightly or not, stakeholders like asking whether something is statistically significant, and this is a chance to provide them with an actual answer.</p>
</div>
<div class="browsable-container figure-container" id="p105">
<img alt="figure" height="175" src="../Images/6-unnumb-6.png" width="529"/>
</div>
<div class="readable-text" id="p106">
<p><em><span class="aframe-location"/></em>In this step, we want to present the evidence to support or refute our stakeholders’ hypotheses, which were the following:</p>
</div>
<ul>
<li class="readable-text" id="p107"> There is a difference in the use of AI across different levels of experience. </li>
<li class="readable-text" id="p108"> The factors that affect a person’s opinion of and trust in AI tools are their level of experience, job role, and what specifically they use the tools for. </li>
</ul>
<div class="readable-text" id="p109">
<p>We specifically want to provide the most complete answer that can still be supported by our data. We do not want our stakeholders to take action on recommendations that are not based on robust findings, so unless we are confident in an association that we found, we should use appropriate language. Phrases such as “the data suggests” are generally preferred over words like “prove” or “shows.”</p>
</div>
<div class="browsable-container figure-container" id="p110">
<img alt="figure" height="175" src="../Images/6-unnumb-7.png" width="529"/>
</div>
<div class="readable-text" id="p111">
<p><em><span class="aframe-location"/></em>Once we have presented our findings, a discussion with our stakeholders will likely lead to further questions to explore in the data, as well as additional data sources that would help our analysis. Our goal is to get to this point sooner rather than later, so we should only include the minimum amount of complexity in our first iteration.</p>
</div>
<div class="readable-text" id="p112">
<h2 class="readable-text-h2" id="sigil_toc_id_82"><span class="num-string">6.4</span> An example solution: How do developers use AI?</h2>
</div>
<div class="readable-text" id="p113">
<p>Let’s now step through an example solution for this problem. As always, if you attempt the project yourself before reading this section, you will find it more valuable since you can compare the two solutions, with the usual caveat that our solutions may differ simply due to the choices we made.</p>
</div>
<div class="readable-text intended-text" id="p114">
<p>The first order of business is to decide which columns represent the questions we’re interested in and, therefore, which we will focus on. Next, we will look at a high-level, general exploration of the data before looking at what affects developers’ attitudes toward AI.</p>
</div>
<div class="readable-text" id="p115">
<h3 class="readable-text-h3" id="sigil_toc_id_83"><span class="num-string">6.4.1</span> Exploring categorical data</h3>
</div>
<div class="readable-text" id="p116">
<p>Usually, in an analytical project, the first step is to look at the available data. However, we have a rare opportunity to see the data-generating process itself by looking at the survey that generated our dataset. Upon scrolling through it, here are some initial observations:</p>
</div>
<ul>
<li class="readable-text" id="p117"> Most questions are not mandatory, which means we can expect lots of missing data. </li>
<li class="readable-text" id="p118"> There are questions about age, number of years of experience coding, and job title, which look immediately relevant. </li>
<li class="readable-text" id="p119"> Every question relating to a specific tool or technology includes options to mark them as “currently using” and “hoping to use next year,” and AI-related questions also include “interested in using” and “not interested in using,” as well as just “currently using.” Having all these options means we can cross-reference answers to find deeper relationships. </li>
<li class="readable-text" id="p120"> The way that participants can mark how favorable and trustworthy they deem AI tools to be is to use a Likert scale, which is the technical name for survey questions that allow positive, neutral, and negative answers and that represent ordinal data. </li>
<li class="readable-text" id="p121"> The README file states that “Free response submissions have been removed,” which is unfortunate as we will be missing answers to the survey question “Please describe how you would expect your workflow to be different, if at all, in one year as a result of AI advancements.” Also, we will not see answers to questions that have an “other” option where participants can elaborate. </li>
</ul>
<div class="readable-text" id="p122">
<p>We will no doubt revisit the survey itself when we have questions about the data, but for now, we have enough of a sense of it to start our exploration. Let’s see a snapshot of how the survey questions relate to rows in our dataset:</p>
</div>
<div class="browsable-container listing-container" id="p123">
<div class="code-area-container">
<pre class="code-area">import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

survey = pd.read_csv("./data/survey_results_public.csv.gz")
print(survey.shape)
survey.head()</pre>
</div>
</div>
<div class="readable-text" id="p124">
<p>The output of this code tells us that we are working with 89,000 survey responses, a sample of which is shown in figure 6.6.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p125">
<img alt="figure" height="580" src="../Images/6-6.png" width="1025"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.6</span> A snapshot of the raw survey data</h5>
</div>
<div class="readable-text" id="p126">
<p>From this snapshot, we can already see that</p>
</div>
<ul>
<li class="readable-text" id="p127"> There will be missing values, as predicted. </li>
<li class="readable-text" id="p128"> Most answers, even age, are categorical data represented as text. </li>
<li class="readable-text" id="p129"> Answers to multiple-choice questions are stored as semicolon-separated strings. There are multiple ways this kind of data could have been stored, so it’s good to establish which representation we’re facing. </li>
</ul>
<div class="readable-text" id="p130">
<p>Let’s dig into the missing data a bit more.</p>
</div>
<div class="readable-text" id="p131">
<h4 class="readable-text-h4 sigil_not_in_toc">Investigating missing data</h4>
</div>
<div class="readable-text" id="p132">
<p>Ideally, we should find that only nonmandatory questions will have missing answers. Is this the case? Figure 6.7 shows a snapshot of the table showing the number of missing values for each column:</p>
</div>
<div class="browsable-container listing-container" id="p133">
<div class="code-area-container">
<pre class="code-area">survey.isnull().sum()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p134">
<img alt="figure" height="328" src="../Images/6-7.png" width="355"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.7</span> Missing values for each column</h5>
</div>
<div class="readable-text" id="p135">
<p>This shows us that, for example, the participant unique identifier and the age columns both have no missing data. The <code>MainBranch</code> column represents the answer to the survey question, “Which of the following options best describes you today? For the purpose of this survey, a developer is ‘someone who writes code.’” Age was one of the questions we were interested in and was mandatory in the survey. So far, so good. As it happens, we have the data dictionary in a machine-readable format, so we can cross-reference it with the data to see which mandatory questions actually have missing data. Figure 6.8 is a snapshot of the data dictionary dataset:</p>
</div>
<div class="browsable-container listing-container" id="p136">
<div class="code-area-container">
<pre class="code-area">data_dict = pd.read_csv("./data/survey_results_schema.csv")
data_dict.head(10)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p137">
<img alt="figure" height="478" src="../Images/6-8.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.8</span> A snapshot of the data dictionary dataset</h5>
</div>
<div class="readable-text" id="p138">
<p>We have a <code>qname</code> column, which should match the column names in our answer data. We also have the question itself, seemingly in either text or HTML form, and whether the question was mandatory, represented in the <code>force_resp</code> column. Looks like we have enough to cross-reference these files, but it’s worth checking our assumption about the <code>qname</code> column. A neat trick in Python is to compare the column names using sets.</p>
</div>
<div class="readable-text intended-text" id="p139">
<p>Set theory does not often appear in a data science curriculum, but knowing a couple of tricks with sets, which are collections that only contain unique values, can help in specific cases like this one. We will create a set of both the column names in our answer data and the values in the <code>qname</code> column of the data dictionary dataset and see where they overlap.</p>
</div>
<div class="browsable-container listing-container" id="p140">
<div class="code-area-container">
<pre class="code-area">len(set(survey.columns).intersection(set(data_dict["qname"])))</pre>
</div>
</div>
<div class="readable-text" id="p141">
<p>The output is 50, meaning there are 50 columns that appear in both sets. That’s promising, but we also want to know which columns don’t overlap. Subtracting one set from another in Python actually gives us this difference. The output of this code is a collection of 34 columns in our answer data that are unaccounted for in the data dictionary, a sample of which is shown in figure 6.9:</p>
</div>
<div class="browsable-container listing-container" id="p142">
<div class="code-area-container">
<pre class="code-area">set(survey.columns) - set(data_dict["qname"])<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p143">
<img alt="figure" height="346" src="../Images/6-9.png" width="510"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.9</span> A sample of columns unaccounted for in the data dictionary</h5>
</div>
<div class="readable-text" id="p144">
<p>On inspection, a lot of these look like multiple-choice options for the same questions. For example, the survey question, “Which parts of your development workflow are you currently using AI tools for, and which are you interested in using AI tools for over the next year? Please select all that apply,” has checkbox options for “Currently using,” “Interested in using,” and “Not interested in using,” the answers to which are recorded across the three columns. Figures 6.10 and 6.11 show the format of the question as it appears in the survey and how the answers are represented in the data, respectively.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p145">
<img alt="figure" height="374" src="../Images/6-10.png" width="884"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.10</span> The question about AI tools as it appears in the survey</h5>
</div>
<div class="readable-text intended-text" id="p146">
<p>For each column of checkboxes in the survey, there is a corresponding column in the data, the value of which is all the AI use cases that were ticked for that column. That is, the participant represented in the second row in figure 6.11 said they are currently using AI tools for writing code and committing and reviewing code.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p147">
<img alt="figure" height="207" src="../Images/6-11.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.11</span> The same question represented in the survey answer data</h5>
</div>
<div class="readable-text intended-text" id="p148">
<p>It looks like we cannot easily match all our columns to the data dictionary, so another option is to look at what is mandatory according to the data dictionary and check whether all the related columns have any missing answer data. Figure 6.12 shows the mandatory columns according to the data dictionary:</p>
</div>
<div class="browsable-container listing-container" id="p149">
<div class="code-area-container">
<pre class="code-area">data_dict[data_dict["force_resp"] == True]<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p150">
<img alt="figure" height="411" src="../Images/6-12.png" width="988"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.12</span> The mandatory columns according to the data dictionary</h5>
</div>
<div class="readable-text" id="p151">
<p>At a minimum, each row in our answer data should have a value for age, highest education level, country, currency, and whether the participant currently uses AI tools in their workflow. Therefore, we should have no missing data in the <code>EdLevel</code> column. Is this the case? Figure 6.13 shows the output of the following code:</p>
</div>
<div class="browsable-container listing-container" id="p152">
<div class="code-area-container">
<pre class="code-area">survey[survey["EdLevel"].isnull()]<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p153">
<img alt="figure" height="531" src="../Images/6-13.png" width="1032"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.13</span> Rows where the education level is missing, which should never be the case</h5>
</div>
<div class="readable-text" id="p154">
<p>Clearly, there are missing answers to mandatory questions. One suspicious element here is that where <code>EdLevel</code> is missing, every answer seems to be missing. Perhaps these are completely erroneous examples. Let’s identify how many missing columns there are for each participant that has a missing value for the <code>EdLevel</code> column. Figure 6.14 shows the output:</p>
</div>
<div class="browsable-container listing-container" id="p155">
<div class="code-area-container">
<pre class="code-area">survey[survey["EdLevel"].isnull()].isnull().sum(axis=1).sort_values()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p156">
<img alt="figure" height="317" src="../Images/6-14.png" width="316"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.14</span> The number of missing values per row where EdLevel is missing</h5>
</div>
<div class="readable-text" id="p157">
<p>This tells us that wherever <code>EdLevel</code> is missing, there are precisely 80 missing values, which implies that these are survey responses with all answers missing and can be safely removed. Specifically, anywhere with all survey answer columns missing can be dropped:</p>
</div>
<div class="browsable-container listing-container" id="p158">
<div class="code-area-container">
<pre class="code-area">survey = survey.dropna(subset=survey.columns[4:], how="all")</pre>
</div>
</div>
<div class="readable-text" id="p159">
<p>Let’s revisit our cross-referencing and look at all columns in our answer data that have no missing values. We can manually cross-check this against the mandatory questions, using figure 6.12, and see whether there are any questions whose corresponding columns have missing data. The following code produces the output shown in figure 6.15:</p>
</div>
<div class="browsable-container listing-container" id="p160">
<div class="code-area-container">
<pre class="code-area">survey.isnull().sum().loc[lambda x: x==0]<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p161">
<img alt="figure" height="241" src="../Images/6-15.png" width="187"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.15</span> The list of columns with no missing data</h5>
</div>
<div class="readable-text" id="p162">
<p>If we cross-reference this with the table in figure 6.12, it appears that the <code>Currency</code> column is the only mandatory question left that has missing data. Let’s again see if there is a pattern in the missingness. Are there the same number of missing values when <code>Currency</code> is missing? Figure 6.16 shows the output of the following code:</p>
</div>
<div class="browsable-container listing-container" id="p163">
<div class="code-area-container">
<pre class="code-area">survey[survey["Currency"].isnull()].isnull().sum(axis=1)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p164">
<img alt="figure" height="328" src="../Images/6-16.png" width="342"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.16</span> The number of missing values for each row where <code>Currency</code> is missing</h5>
</div>
<div class="readable-text" id="p165">
<p>There does not appear to be a pattern here. It suggests that although there are over 20,000 missing answers for the mandatory <code>Currency</code> question, this might be a technical error of some sort. Perhaps there could be other factors influencing this, such as certain countries where the currency data is missing more often. Either way, our initial research questions do not rely on this column, so this is a good place to decide not to pursue this line of inquiry further for now. Let’s summarize our process so far. Our first decision point was to investigate and drop missing values, as illustrated by figure 6.17.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p166">
<img alt="figure" height="409" src="../Images/6-17.png" width="927"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.17</span> The first step of our analysis, visualized</h5>
</div>
<div class="readable-text" id="p167">
<p>Let’s now explore our AI-related columns in a bit more detail.</p>
</div>
<div class="readable-text" id="p168">
<h3 class="readable-text-h3" id="sigil_toc_id_84"><span class="num-string">6.4.2</span> Analyzing categorical survey data</h3>
</div>
<div class="readable-text" id="p169">
<p>First, we should understand what proportion of people are even using AI tools. A quick chart reveals the answer to this, shown in figure 6.18:</p>
</div>
<div class="browsable-container listing-container" id="p170">
<div class="code-area-container code-area-with-html">
<pre class="code-area">fig, axis = plt.subplots()

(
    survey["AISelect"]
    .value_counts(dropna=False)
    .plot
    .barh(ax=axis)
)

axis.set(title="Answers to the question:\n'Do you currently
<span class="">↪</span> use AI tools in your development process?'",
         xlabel="Number of responses")

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p171">
<img alt="figure" height="573" src="../Images/6-18.png" width="819"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.18</span> The distribution of answers to whether participants use AI tools</h5>
</div>
<div class="readable-text" id="p172">
<p>There are many directions we could continue from here. We could, for example, find out what demographics or job roles AI tool users have versus those who don’t use them. However, since we are focused on our end result, we can realize that this is not the question we are trying to answer. We are only interested in the subpopulations that already use AI tools, and we are more focused on how they use them. Having said that, an angle we are interested in is how people view the trustworthiness of AI tools, so it might be interesting to see if there is a difference in attitudes between participants who use AI and those who don’t.</p>
</div>
<div class="readable-text" id="p173">
<h4 class="readable-text-h4 sigil_not_in_toc">Investigating Likert data in survey answers</h4>
</div>
<div class="readable-text" id="p174">
<p>For the question of how AI users feel about the tools, we first want to use the <code>AISent</code> column, which reveals the answer to the question shown in figure 6.19.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p175">
<img alt="figure" height="262" src="../Images/6-19.png" width="934"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.19</span> The question about AI sentiment</h5>
</div>
<div class="readable-text" id="p176">
<p>Now, we can look at the distribution of the <code>AISent</code> column to identify how people answered. Since this question is not mandatory, we expect to find some missing data. The following code produces the output shown in figure 6.20:</p>
</div>
<div class="browsable-container listing-container" id="p177">
<div class="code-area-container">
<pre class="code-area">survey["AISent"].value_counts(dropna=False)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p178">
<img alt="figure" height="227" src="../Images/6-20.png" width="341"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.20</span> Breakdown of answers to the AI sentiment question</h5>
</div>
<div class="readable-text" id="p179">
<p>As expected, there are lots of missing answers. These are not bad data; by and large, they represent a participant who chose not to answer this question, so we can fill this value in with a placeholder, such as “no answer given.” Another, more Python-specific, step we can take is to make the data type of this column explicitly categorical. This will allow us to set the ordering of the values so that whenever they appear in a data table or a chart, they are not ordered alphabetically. We do all this using the <code>pandas</code> <code>Categorical</code> data type. The output of the following code is shown in figure 6.21:</p>
</div>
<div class="browsable-container listing-container" id="p180">
<div class="code-area-container">
<pre class="code-area">survey["AISent"] = (
    pd.Categorical(
        survey["AISent"].fillna("No answer given"),
        categories=['No answer given', 'Unsure',
                    'Very unfavorable', 'Unfavorable',
                    'Indifferent', 'Favorable', 'Very favorable'],
        ordered=True)
)

survey["AISent"].value_counts(dropna=False).sort_index()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p181">
<img alt="figure" height="235" src="../Images/6-21.png" width="352"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.21</span> Breakdown of AI sentiment answers after converting to a <code>Categorical</code> data type</h5>
</div>
<div class="readable-text" id="p182">
<p>One choice I had to make was what order the values appear in. It is mostly my personal preference that I chose to put the “no answer given” option first and start the remaining answers from negative to positive sentiment. However, it is still a choice we have to make at this point. Now, we can compare the distribution of these answers across the groups of AI tool users, nonusers, and aspiring users.</p>
</div>
<div class="readable-text" id="p183">
<h4 class="readable-text-h4 sigil_not_in_toc">Using pivot tables to cross-reference categorical values</h4>
</div>
<div class="readable-text" id="p184">
<p>Comparing answers about favorability across different groups of AI tool users involves cross-referencing two categorical variables. In <code>pandas</code>, one appropriate method is <code>crosstab</code>, and the following code produces the output in figure 6.22:</p>
</div>
<div class="browsable-container listing-container" id="p185">
<div class="code-area-container">
<pre class="code-area">pd.crosstab(
    index=survey["AISelect"],     <span class="aframe-location"/> #1
    columns=survey["AISent"]     <span class="aframe-location"/> #2
)<span class="aframe-location"/></pre>
<div class="code-annotations-overlay-container">
     #1 Rows represent whether the participant is an AI tool user.
     <br/>#2 Columns represent answers to the AI sentiment question.
     <br/>
</div>
</div>
</div>
<div class="browsable-container figure-container" id="p186">
<img alt="figure" height="190" src="../Images/6-22.png" width="1002"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.22</span> Comparing whether AI users or non-users view AI tools favorably</h5>
</div>
<div class="readable-text" id="p187">
<p>We can immediately notice that whoever said they don’t use AI did not give a follow-up answer either because the follow-up didn’t make sense, or the survey actively hid the option. We could stop here and try to make further sense of this table, as it’s not too large. However, I would err on the side of not staring at tables of numbers for very long and creating visualizations instead.</p>
</div>
<div class="readable-text" id="p188">
<h4 class="readable-text-h4 sigil_not_in_toc">Visualizing pivot tables with heatmaps</h4>
</div>
<div class="readable-text" id="p189">
<p>Visualizing a table of numbers is usually a good opportunity for a heatmap, which the <code>seaborn</code> library can provide. I have chosen a grayscale option that translates to print, but any sequential colormap would do.</p>
</div>
<div class="callout-container sidebar-container">
<div class="readable-text" id="p190">
<h5 class="callout-container-h5 readable-text-h5 sigil_not_in_toc">A note on color scale terminology</h5>
</div>
<div class="readable-text" id="p191">
<p>When deciding on colors for a visualization and multiple colors are involved, we need to make a choice of colormap, that is, the range of colors present in the visualization. Our choices are sequential, diverging, or categorical (also called nominal or qualitative).</p>
</div>
<div class="readable-text" id="p192">
<p>Sequential colormaps gradually change in lightness to represent a continuous scale. The lightness is proportional to the size of the measurement; an example is the greyscale colormap, such as the one used in figure 6.23. The darker colors indicate more people falling into a category.</p>
</div>
<div class="readable-text" id="p193">
<p>Diverging colormaps include multiple colors, which gradually change in lightness depending on the direction. Lightness is still used to indicate strength, but the hue also indicates direction. An example is negative values being red and positives being blue, with larger values being darker red or blue, respectively.</p>
</div>
<div class="readable-text" id="p194">
<p>Categorical colormaps are used when different parts of a visualization need to be distinct colors. They are usually used in pie or bar charts where each slice or bar is a completely different color. The colors are purely for visual separation and are not to be interpreted numerically.</p>
</div>
</div>
<div class="readable-text" id="p195">
<p>I have also anchored the minimum and maximum points at 0 and 1, respectively, because that is the scale we are working with. Figure 6.23 shows the generated heatmap:</p>
</div>
<div class="browsable-container listing-container" id="p196">
<div class="code-area-container code-area-with-html">
<pre class="code-area">fig, axis = plt.subplots()

sns.heatmap(
    data=pd.crosstab(
        index=survey.loc[survey["AISelect"]
<span class="">↪</span> != "No, and I don't plan to", "AISelect"],
        columns=survey.loc[survey["AISelect"]
<span class="">↪</span> != "No, and I don't plan to", "AISent"],
        normalize="index"
    ),
    cmap="Greys",
    vmin=0,
    vmax=1,
    square=True,
    annot=True,
    ax=axis
)

fig.suptitle("How favorably do different people view AI tools?")

axis.set(
    xlabel="How favorable is your stance on using AI tools?",
    ylabel="Do you currently use AI tools?"
)

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p197">
<img alt="figure" height="662" src="../Images/6-23.png" width="975"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.23</span> Heatmap showing the favorability of AI tools among users and aspiring users</h5>
</div>
<div class="readable-text print-book-callout" id="p198">
<p><span class="print-book-callout-head">Note</span>  This is a good opportunity to incorporate some programming best practices into our analysis. We will undoubtedly create more heatmaps like this, and the difference between them will be the data and the axis labels. The other options will remain the same, so we should create a reusable function that can generate a heatmap without duplicating our code. Problems of code quality are generally beyond the scope of these projects.</p>
</div>
<div class="readable-text" id="p199">
<p>The modified code to produce the heatmap from figure 6.23 looks like the following. We will reuse this <code>create_heatmap</code> method throughout the solution:</p>
</div>
<div class="browsable-container listing-container" id="p200">
<div class="code-area-container code-area-with-html">
<pre class="code-area">def create_heatmap(data, square=True):    <span class="aframe-location"/> #1
    fig, axis = plt.subplots()

    sns.heatmap(
        data=data,
        cmap="Greys",
        vmin=0,
        vmax=1,
        square=square,
        annot=True,
        ax=axis
    )

    return fig, axis    <span class="aframe-location"/> #2

fig, axis = create_heatmap(
    pd.crosstab(
        index=survey.loc[survey["AISelect"]
<span class="">↪</span> != "No, and I don't plan to", "AISelect"],
        columns=survey.loc[survey["AISelect"]
<span class="">↪</span> != "No, and I don't plan to", "AISent"],
        normalize="index"
    )
)

fig.suptitle("How favorably do different people view AI tools?")

axis.set(
    xlabel="How favorable is your stance on using AI tools?",
    ylabel="Do you currently use AI tools?"
)

plt.show()</pre>
<div class="code-annotations-overlay-container">
     #1 The function only needs the data table and an optional way to make the heatmap square or not.
     <br/>#2 We return the Figure and Axis objects to allow custom axis labels and titles.
     <br/>
</div>
</div>
</div>
<div class="readable-text" id="p201">
<p>Now, back to interpreting the heatmap. There seem to be a couple of noticeable differences between current and aspiring AI users. First, those who use AI tools view them more favorably than aspiring users, and those who do not yet use AI tools are more likely to be indifferent about them. This is perhaps not surprising. The lack of cynicism about the tools is interesting; it seems very few developers view the tools unfavorably. This might be selection bias; developers filling in this survey might already be more likely to have good use cases for AI tools and, therefore, higher opinions. Let us see how these groups fare with the question about the trustworthiness of the tools’ outputs.</p>
</div>
<div class="readable-text intended-text" id="p202">
<p>The <code>AIBen</code> column also has missing data, so we choose to fill these in and create an ordered <code>Categorical</code> column again. The following code then produces the output in figure 6.24:</p>
</div>
<div class="browsable-container listing-container" id="p203">
<div class="code-area-container">
<pre class="code-area">survey["AIBen"] = (
    pd.Categorical(
        survey["AIBen"].fillna("No answer given"),
        categories=['No answer given', 'Highly distrust',
                    'Somewhat distrust', 'Neither trust nor distrust',
                    'Somewhat trust', 'Highly trust'],
        ordered=True
    )
)

survey["AIBen"].value_counts(dropna=False).sort_index()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p204">
<img alt="figure" height="176" src="../Images/6-24.png" width="404"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.24</span> The distribution of trust in AI tools</h5>
</div>
<div class="readable-text" id="p205">
<p>Although most participants viewed AI tools favorably, there is more of a spread when it comes to trusting their outputs. The crosstab comparing these answers across AI users and aspiring users is achieved with the following code and shown in figure 6.25:</p>
</div>
<div class="browsable-container listing-container" id="p206">
<div class="code-area-container">
<pre class="code-area">pd.crosstab(
    index=survey["AISelect"],
    columns=survey["AIBen"]
)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p207">
<img alt="figure" height="395" src="../Images/6-25.png" width="787"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.25</span> Comparing AI trustworthiness across different users</h5>
</div>
<div class="readable-text" id="p208">
<p>Again, we can exclude nonusers and generate a heatmap of the crosstab, as shown in figure 6.26:</p>
</div>
<div class="browsable-container listing-container" id="p209">
<div class="code-area-container code-area-with-html">
<pre class="code-area">fig, axis = create_heatmap(
    pd.crosstab(
        index=survey.loc[survey["AISelect"]
<span class="">↪</span> != "No, and I don't plan to", "AISelect"],
        columns=survey.loc[survey["AISelect"]
<span class="">↪</span> != "No, and I don't plan to", "AIBen"],
        normalize="index"
    )
)

fig.suptitle("How much do different people trust the output of AI tools?")

axis.set(
  xlabel="How much do you trust the accuracy of the output from AI tools?",
  ylabel="Do you currently use AI tools?"
)

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p210">
<img alt="figure" height="746" src="../Images/6-26.png" width="978"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.26</span> Heatmap comparing AI trustworthiness across AI tool users and aspiring users</h5>
</div>
<div class="readable-text" id="p211">
<p>Active users of AI tools trust their outputs more and distrust them less, although very few people are comfortable saying they <em>highly</em> trust them. Aspiring users are more on the fence and have answered “neither trust nor distrust” more often. Again, it is not surprising, but it validates some basic assumptions.</p>
</div>
<div class="readable-text intended-text" id="p212">
<p>Before moving on to investigate different aspects of the data, let’s review our process so far. Figure 6.27 shows the steps taken so far.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p213">
<img alt="figure" height="996" src="../Images/6-27.png" width="1079"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.27</span> Visualizing our analysis so far</h5>
</div>
<div class="readable-text" id="p214">
<p>Now, it’s time to dive deeper into what people are using AI tools for.</p>
</div>
<div class="readable-text" id="p215">
<h4 class="readable-text-h4 sigil_not_in_toc">Transforming categorical data into indicator variables</h4>
</div>
<div class="readable-text" id="p216">
<p>For this portion, we will focus only on those who answered yes to the question about whether they use the tools. Let’s remind ourselves about the format of the answers to the question about which parts of the development workflow they are using AI tools for. Figure 6.28 shows part of the related survey question.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p217">
<img alt="figure" height="377" src="../Images/6-28.png" width="882"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.28</span> A snapshot of the survey question about what participants are using AI tools for</h5>
</div>
<div class="readable-text" id="p218">
<p>Figure 6.29 shows a snapshot of the column that represents the answers in semicolon-delimited string form. The data was selected with the following code:</p>
</div>
<div class="browsable-container listing-container" id="p219">
<div class="code-area-container">
<pre class="code-area">(
    survey.loc[survey["AISelect"] == "Yes", "AIToolCurrently Using"]
    .dropna()
    .head(10)
)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p220">
<img alt="figure" height="307" src="../Images/6-29.png" width="705"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.29</span> A snapshot of the data used to store answers to how people use AI tools</h5>
</div>
<div class="readable-text" id="p221">
<p>This is not a format we can work with directly. Typically, we would spread the available answers out as indicator variables, binary columns to represent whether each possible answer was checked. This next step, one-hot encoding, where we convert this string column into indicator variables, is a purely technical one, which makes it a perfect place to turn to AI tools if you don’t already know how to do the transformation with your existing tools. Let’s see this in action.</p>
</div>
<div class="readable-text intended-text" id="p222">
<p>I asked ChatGPT the following:</p>
</div>
<div class="readable-text" id="p223">
<blockquote>
<div>
<em>I have a pandas DataFrame that contains a column of values corresponding to multiple choice options from a survey question. The values are not exclusive, so they can contain multiple answers delimited by a semicolon. A sample value would be “option 1; option 2; option 3.” I want to turn this into multiple indicator columns, one for each value, so I should have columns called “option 1,” “option 2,” etc., each being a binary indicator of whether that value was present in the original column. What is the pandas code for this?</em>
</div>
</blockquote>
</div>
<div class="readable-text" id="p224">
<p>Its answer started with, “You can achieve this by using the <code>str.get_dummies</code> method in pandas to create indicator columns for each option in the multiple-choice column,” which turned out to be exactly the method I was after. It also suggested some code snippets, as shown in figure 6.30.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p225">
<img alt="figure" height="828" src="../Images/6-30.png" width="972"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.30</span> Code snippets suggested by ChatGPT</h5>
</div>
<div class="readable-text" id="p226">
<p>One tweak I had to make was changing the separator from “; ” to “;” because our data doesn’t have the trailing space between the semicolon-delimited values. Other than that, the <code>str.get_dummies</code> function is exactly what we are after. The following code generates the indicator columns shown in figure 6.31:</p>
</div>
<div class="browsable-container listing-container" id="p227">
<div class="code-area-container">
<pre class="code-area">ai_tool_indicators = (
    survey.loc[survey["AISelect"] == "Yes", "AIToolCurrently Using"]
    .str.get_dummies(sep=";")
)
ai_tool_indicators<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p228">
<img alt="figure" height="451" src="../Images/6-31.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.31</span> A snapshot of the newly created indicator columns</h5>
</div>
<div class="readable-text" id="p229">
<p>To reiterate, each column represents one of the checkbox rows from figure 6.28, and a value of 1 means that the checkbox was ticked under the “Currently using” column. If we were to repeat this for “Interested in using” and “Not interested in using,” we would end up with three times as many indicator variables, essentially one column per checkbox under that question.</p>
</div>
<div class="readable-text intended-text" id="p230">
<p>Experience might tell us that when separating delimited strings, we could end up with trailing spaces in column names, so let’s check and fix that:</p>
</div>
<div class="browsable-container listing-container" id="p231">
<div class="code-area-container">
<pre class="code-area">ai_tool_indicators.columns = [c.strip() for c in ai_tool_indicators.columns]</pre>
</div>
</div>
<div class="readable-text" id="p232">
<p>One benefit of indicator variables is that the sum of each column represents the number of people who ticked a particular checkbox, and the mean of each column represents the percentage. Let’s look at the percentage of participants who checked each option. Remember, this is now only AI users telling us what they currently use AI tools for. The following code produces the chart in figure 6.32:</p>
</div>
<div class="browsable-container listing-container" id="p233">
<div class="code-area-container">
<pre class="code-area">fig, axis = plt.subplots()

(
    ai_tool_indicators
    .mean()
    .sort_values()
    .plot
    .barh(ax=axis)
)

axis.set(
    title="What are AI users using their AI tools for?",
    xlabel="% of users who ticked that option"
)

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p234">
<img alt="figure" height="658" src="../Images/6-32.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.32</span> Bar chart showing what percentage of AI users ticked each “Currently using” option</h5>
</div>
<div class="readable-text" id="p235">
<p>Most developers are using AI tools to write and debug code, but there are other tangential use cases that are popular, such as testing code, project planning, and even documenting code. We can add the indicator columns to our original data and keep a filtered dataset of only AI users for use in the remaining investigations. Figure 6.33 shows a snapshot of the data after the following manipulations:</p>
</div>
<div class="browsable-container listing-container" id="p236">
<div class="code-area-container">
<pre class="code-area">survey_ai_users = (
    pd.concat([survey, ai_tool_indicators], axis=1)<span class="aframe-location"/> #1
    .dropna(subset=ai_tool_indicators.columns, how="any")
)
assert len(survey[survey["AISelect"] == "Yes"]) == len(survey_ai_users)

survey_ai_users.head()<span class="aframe-location"/></pre>
<div class="code-annotations-overlay-container">
     #1 concat will, by default, match on indices.
     <br/>
</div>
</div>
</div>
<div class="browsable-container figure-container" id="p237">
<img alt="figure" height="573" src="../Images/6-33.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.33</span> A snapshot of the combined data of AI users</h5>
</div>
<div class="readable-text" id="p238">
<p>Let’s see how favorable and trustworthy participants judge AI to be depending on what they use the tools for. Our “start at the end” philosophy is helpful here. We want a table where each row is one of the AI tool use cases (e.g., “Writing code”), and each column is one of the favorability options. Each cell then represents the count, or better, the percentage, of those who said they use AI tools for a particular purpose and answered a particular way for favorability. This should show us whether there is a difference in opinion across different users’ profiles.</p>
</div>
<div class="readable-text" id="p239">
<h4 class="readable-text-h4 sigil_not_in_toc">Converting data to a long format for easier analysis</h4>
</div>
<div class="readable-text" id="p240">
<p>Cross-referencing the different use cases with favorability opinions requires some reshaping of our data. This is another use case for an AI tool to tell us how to do this, but this time, let’s attempt it ourselves and compare notes with our AI tool afterward. What we want is data in a long format, which will make it easier to generate the right crosstab. See chapter 3 for more details on wide versus long data in the context of data modeling. The following code creates a long-form version of one of the multiple-choice options cross-referenced against favorability, and the output is shown in figure 6.34:</p>
</div>
<div class="browsable-container listing-container" id="p241">
<div class="code-area-container">
<pre class="code-area">(
    survey_ai_users[survey_ai_users["Collaborating with teammates"] == 1]
    .groupby("AISent")
    .size()
    .reset_index(name="count")
    .assign(option="Collaborating with teammates")
)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p242">
<img alt="figure" height="336" src="../Images/6-34.png" width="569"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.34</span> AI tools favorability across people who use them for collaboration</h5>
</div>
<div class="readable-text" id="p243">
<p>If we had this dataset for every option combined into one long table, we could reshape it into the crosstab we need. Let’s loop through the options and build up this long table:</p>
</div>
<div class="browsable-container listing-container" id="p244">
<div class="code-area-container">
<pre class="code-area">tool_favorability_dfs = []
for col in ai_tool_indicators.columns:     <span class="aframe-location"/> #1
    option_df = (
        survey_ai_users[survey_ai_users[col] == 1]
        .groupby("AISent")
        .size()
        .reset_index(name="count")
        .assign(option=col)
    )
    tool_favorability_dfs.append(option_df)    <span class="aframe-location"/> #2

options_vs_favorability = pd.concat(    <span class="aframe-location"/> #3
    tool_favorability_dfs,
    axis=0,
    ignore_index=True
)

print(options_vs_favorability.shape)</pre>
<div class="code-annotations-overlay-container">
     #1 Loops through all indicators
     <br/>#2 Generates the aggregation similar to figure 6.32 and tracks in a list
     <br/>#3 Combines the list into one DataFrame
     <br/>
</div>
</div>
</div>
<div class="readable-text" id="p245">
<p>The output is <code>(70,</code> <code>3)</code>, meaning we have 70 rows now, corresponding to the 10 indicator columns with seven possible favorability answers each. We can now use this data to create a crosstab of percentages, as planned. The following code does this and produces the crosstab in figure 6.35:</p>
</div>
<div class="browsable-container listing-container" id="p246">
<div class="code-area-container">
<pre class="code-area">favorability_crosstab = (
    pd.crosstab(index=options_vs_favorability["option"],
                columns=options_vs_favorability["AISent"],
                values=options_vs_favorability["count"],
                aggfunc="sum",
                normalize="index")
)
favorability_crosstab<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p247">
<img alt="figure" height="431" src="../Images/6-35.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.35</span> Crosstab of favorability vs. different AI tool use cases</h5>
</div>
<div class="readable-text" id="p248">
<p>This is now a table that is hard to interpret in its current form, so let’s generate a heatmap of this, too. The final heatmap is shown in figure 6.36:</p>
</div>
<div class="browsable-container listing-container" id="p249">
<div class="code-area-container code-area-with-html">
<pre class="code-area">fig, axis = create_heatmap(
    favorability_crosstab.round(2)
)

fig.suptitle("How favorably do people who use AI for different purposes
<span class="">↪</span> view AI tools?")

axis.set(xlabel=None, ylabel=None)

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p250">
<img alt="figure" height="781" src="../Images/6-36.png" width="1098"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.36</span> Heatmap comparing favorability across different AI tool use cases</h5>
</div>
<div class="readable-text" id="p251">
<p>This is much easier to interpret than the raw data table. There does not seem to be a big difference across use cases, but there are some observations we can make:</p>
</div>
<ul>
<li class="readable-text" id="p252"> Even when we break the data out into use cases, AI users generally view their tools favorably. </li>
<li class="readable-text" id="p253"> Those who use the tools for project planning, collaborating, committing and reviewing code, and deployment and monitoring grade the AI tools as “very favorable” the most. </li>
<li class="readable-text" id="p254"> The biggest “indifferent” category is “Other,” but we do not have the underlying data, so we cannot investigate this further. </li>
</ul>
<div class="readable-text" id="p255">
<p>Before moving on, let’s briefly look at how ChatGPT suggested we solve this particular technical challenge.</p>
</div>
<div class="readable-text" id="p256">
<h4 class="readable-text-h4 sigil_not_in_toc">Using AI tools to improve our analysis</h4>
</div>
<div class="readable-text" id="p257">
<p>Whenever something takes two or three discrete steps, I get the feeling that there is an easier way to do it, which is where AI tools can help improve our technical knowledge.</p>
</div>
<div class="readable-text print-book-callout" id="p258">
<p><span class="print-book-callout-head">Note</span>  It is important to remember that AI tools like ChatGPT are just that—tools. This makes them interchangeable over time. You might not use this specific AI tool, and there will undoubtedly be more advanced ones created in the future. Feel free to substitute all references to ChatGPT with whichever AI tool you prefer.</p>
</div>
<div class="readable-text" id="p259">
<p>In this case, ChatGPT’s answer was very similar; it suggested building up a DataFrame by looping through the options. Figure 6.37 shows ChatGPT’s answer. I did not integrate its suggestion or dig into the specific differences between it and my code; all I was looking for was whether there was a single <code>pandas</code> method I overlooked for doing this transformation. As it turns out, AI tools can do no better than looping through the different options.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p260">
<img alt="figure" height="887" src="../Images/6-37.png" width="1100"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.37</span> ChatGPT’s approach to creating the options vs. favorability crosstab</h5>
</div>
<div class="readable-text" id="p261">
<p>Previously, the question about the trustworthiness of the output generated more interesting findings, so let us repeat this latest crosstab and heatmap process for the <code>AIBen</code> column as well. The following code generates the long-format data, a snapshot of which is shown in figure 6.38:</p>
</div>
<div class="browsable-container listing-container" id="p262">
<div class="code-area-container">
<pre class="code-area">tool_trust_dfs = []
for col in ai_tool_indicators.columns:
    option_df = (
        survey_ai_users[survey_ai_users[col] == 1]
        .groupby("AIBen")
        .size()
        .reset_index(name="count")
        .assign(option=col)
    )
    tool_trust_dfs.append(option_df)

options_vs_trust = pd.concat(tool_trust_dfs, axis=0, ignore_index=True)

print(options_vs_trust.shape)
options_vs_trust.head()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p263">
<img alt="figure" height="249" src="../Images/6-38.png" width="636"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.38</span> A snapshot of long-format data comparing AI tool use case options with trustworthiness</h5>
</div>
<div class="readable-text" id="p264">
<p>This generates 60 rows of data, 10 use cases with six trustworthiness options each. Now, we can create the crosstab and heatmap generated by the following code. The final heatmap is shown in figure 6.39:</p>
</div>
<div class="browsable-container listing-container" id="p265">
<div class="code-area-container code-area-with-html">
<pre class="code-area">trust_crosstab = (
    pd.crosstab(index=options_vs_trust["option"],
                columns=options_vs_trust["AIBen"],
                values=options_vs_trust["count"],
                aggfunc="sum",
                normalize="index")
)

fig, axis = create_heatmap(
    trust_crosstab.round(2)
)

fig.suptitle("How much do people who use AI for different purposes
<span class="">↪</span> trust the output of AI tools?")

axis.set(xlabel=None, ylabel=None)

plt.show()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p266">
<img alt="figure" height="811" src="../Images/6-39.png" width="1098"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.39</span> Heatmap of different AI tool use cases vs. view on trustworthiness</h5>
</div>
<div class="readable-text" id="p267">
<p>From this heatmap, it appears that most users “somewhat trust” the AI tools’ outputs, with not much difference across use cases. Having the data about the “Other” category would be interesting, as that is where the trustworthiness varies the most.</p>
</div>
<div class="readable-text print-book-callout" id="p268">
<p><span class="print-book-callout-head">Note</span>  One limitation of using this multiple-choice data is we are double-counting anyone who said they use AI for more than one purpose. It’s not a deal breaker for our analysis, but it’s good to be aware that our categories are not mutually exclusive.</p>
</div>
<div class="readable-text" id="p269">
<p>Before continuing our analysis, let’s recap the steps so far, including the latest one, where we investigated opinions of AI across different use cases. Our latest steps are shown in figure 6.40.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p270">
<img alt="figure" height="1408" src="../Images/6-40.png" width="1054"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.40</span> Steps taken in the analysis up to investigating AI tool usage</h5>
</div>
<div class="readable-text intended-text" id="p271">
<p>Next, we are interested in the profiles of AI tool users (e.g., what job titles they have).</p>
</div>
<div class="readable-text" id="p272">
<h4 class="readable-text-h4 sigil_not_in_toc">Recategorizing data for clarity</h4>
</div>
<div class="readable-text" id="p273">
<p>There are further nuances we can explore in this data. People who said they use AI to write code may use it for very different purposes. Despite the name, the survey was not just completed by developers. Other job roles are also included, so it’s worth exploring whether attitudes toward AI vary along those roles. First, let’s look at the distribution of values in the <code>DevType</code> column, but only for people who are using AI tools. The results produced by the following code are shown in figure 6.41:</p>
</div>
<div class="browsable-container listing-container" id="p274">
<div class="code-area-container">
<pre class="code-area">survey_ai_users['DevType'].value_counts(dropna=False)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p275">
<img alt="figure" height="899" src="../Images/6-41.png" width="649"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.41</span> Distribution of job roles among participants who use AI tools</h5>
</div>
<div class="readable-text" id="p276">
<p>As we’d expect, most participants are developers with a long tail of other jobs ranging from data roles to research, marketing, and even management. For our purposes, we can probably combine a few of these categories, at least for our first iteration. To identify if different job roles use AI differently, we can get away with grouping all developers into a single group to start with. Let’s see which of these groups could go into our larger “developer” group. The result of the following code is shown in figure 6.42:</p>
</div>
<div class="browsable-container listing-container" id="p277">
<div class="code-area-container">
<pre class="code-area">devtypes = (
    survey_ai_users
    .dropna(subset=["DevType"])
    .query("DevType.str.startswith('Developer')")
    .loc[:,"DevType"]
)

devtypes.value_counts()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p278">
<img alt="figure" height="258" src="../Images/6-42.png" width="633"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.42</span> Distribution of different developer roles among AI tool users</h5>
</div>
<div class="readable-text" id="p279">
<p>Most of these roles can go in a single “Developer” category, except the last two: “Developer experience” and “Developer advocate.” These are developer-adjacent roles with more of a people focus with responsibilities such as creating and engaging with communities and not necessarily writing a lot of code. Let’s group the rest of the developer roles into a single category. Specifically, in Python, we can create a dictionary that matches each of these roles with the “new” category they should belong to:</p>
</div>
<div class="browsable-container listing-container" id="p280">
<div class="code-area-container code-area-with-html">
<pre class="code-area">devtype_map = {}

dev_exclusions = ["Developer Experience", "Developer Advocate"]

dev_devtypes = [col for col in devtypes.value_counts().index
<span class="">↪</span> if col not in dev_exclusions]

for col in dev_devtypes:
    devtype_map[col] = "Developer"</pre>
</div>
</div>
<div class="readable-text" id="p281">
<p>Looking at our list in figure 6.42 again, we see a few engineering roles that could be grouped together, so let’s also do that. The following code produces the output in figure 6.43:</p>
</div>
<div class="browsable-container listing-container" id="p282">
<div class="code-area-container">
<pre class="code-area">eng_devtypes = (
    survey_ai_users
    .dropna(subset=["DevType"])
    .query("DevType.str.contains('engineer', case=False)")
    .loc[:,"DevType"]
)

eng_devtypes.value_counts()<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p283">
<img alt="figure" height="167" src="../Images/6-43.png" width="457"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.43</span> Distribution of engineering roles among AI tool users</h5>
</div>
<div class="readable-text" id="p284">
<p>All of these roles can go under one “Engineer” category for now, except the management one. Let’s make that change and then look at the distribution of our new, more compact job category column. The following code produces the result in figure 6.44:</p>
</div>
<div class="browsable-container listing-container" id="p285">
<div class="code-area-container code-area-with-html">
<pre class="code-area">for col in ['Engineer, data', 'Cloud infrastructure engineer',
            'Engineer, site reliability', 'Hardware Engineer']:
    devtype_map[col] = "Engineer"

survey_ai_users["job_category"]
<span class="">↪</span> = survey_ai_users["DevType"].replace(devtype_map)

survey_ai_users["job_category"].value_counts(dropna=False)<span class="aframe-location"/></pre>
</div>
</div>
<div class="browsable-container figure-container" id="p286">
<img alt="figure" height="631" src="../Images/6-44.png" width="656"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.44</span> Distribution of a new <code>job_category</code> column</h5>
</div>
<div class="readable-text" id="p287">
<p>Now, we can create a crosstab similar to those we created previously, this time, to cross-reference job roles with AI use cases. First, we transform the data to a long format and then create our crosstab. Finally, we create a heatmap to make the results easier to investigate. The following code goes through these steps and produces the heatmap in figure 6.45:</p>
</div>
<div class="browsable-container listing-container" id="p288">
<div class="code-area-container">
<pre class="code-area">tool_job_dfs = []

for col in ai_tool_indicators.columns:     <span class="aframe-location"/> #1
    option_df = (
        survey_ai_users[survey_ai_users[col] == 1]
        .dropna(subset="job_category")
        .groupby("job_category")
        .size()
        .reset_index(name="count")
        .assign(option=col)
    )
    tool_job_dfs.append(option_df)

options_vs_jobs = pd.concat(tool_job_dfs, axis=0, ignore_index=True)
job_crosstab = (    <span class="aframe-location"/> #2
    pd.crosstab(index=options_vs_jobs["option"],
                columns=options_vs_jobs["job_category"],
                values=options_vs_jobs["count"],
                aggfunc="sum",
                normalize="columns")
    .transpose()
)

fig, axis = create_heatmap(     <span class="aframe-location"/> #3
    job_crosstab.round(2),
    square=False
)

fig.suptitle("What do different job roles use AI for?")

axis.set(xlabel=None, ylabel=None)

plt.show()<span class="aframe-location"/></pre>
<div class="code-annotations-overlay-container">
     #1 Cross-reference job categories with AI use cases.
     <br/>#2 Reshapes into a crosstab
     <br/>#3 Finally, plots the heatmap
     <br/>
</div>
</div>
</div>
<div class="browsable-container figure-container" id="p289">
<img alt="figure" height="905" src="../Images/6-45.png" width="1095"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.45</span> Heatmap showing AI use cases across different job roles</h5>
</div>
<div class="readable-text" id="p290">
<p>The heatmap gives us some insights into usage patterns:</p>
</div>
<ul>
<li class="readable-text" id="p291"> About 30% of people use AI tools for writing code, with database administrators, marketing and sales professionals, and designers being exceptions. </li>
<li class="readable-text" id="p292"> Database administrators use AI for learning about a codebase more than others. Apart from them, other job roles that use AI for this the most are the ones that generally write less code, such as marketing or product functions. </li>
<li class="readable-text" id="p293"> While developer advocates also use AI for writing code, they also score the highest in using it for documentation, which can be an important aspect of the role. </li>
</ul>
<div class="readable-text" id="p294">
<p>These few observations aside, participants seem to use AI tools more or less in the same way. Let’s recap our steps again, including this latest step for investigating job roles. Figure 6.46 shows the latest step diagram.<span class="aframe-location"/></p>
</div>
<div class="browsable-container figure-container" id="p295">
<img alt="figure" height="806" src="../Images/6-46.png" width="907"/>
<h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 6.46</span> The latest diagram of the steps taken in our analysis</h5>
</div>
<div class="readable-text" id="p296">
<p>Note that once we clean up the AI sentiment and trust-related columns, certain parts of our analysis can be done in parallel. Figure 6.46 illustrates this since it is not necessary to compare AI tool usage and trust and favorability before investigating AI users’ job roles. This highlights the fact that sometimes an analysis is not completely linear. </p>
</div>
<div class="readable-text intended-text" id="p297">
<p>Let’s export the data we will need to explore the questions further in the next chapter:</p>
</div>
<div class="browsable-container listing-container" id="p298">
<div class="code-area-container code-area-with-html">
<pre class="code-area">survey.to_parquet("../chapter-7/data/survey.parquet.gz",
<span class="">↪</span>compression="gzip", index=False)
survey_ai_users.to_parquet("../chapter-7/data/survey_ai_users.parquet.gz",
<span class="">↪</span>compression="gzip", index=False)</pre>
</div>
</div>
<div class="readable-text" id="p299">
<p>Let’s now review everything that we have accomplished so far and identify what else we need to do to finish getting to a minimum viable answer in the next chapter. </p>
</div>
<div class="readable-text" id="p300">
<h3 class="readable-text-h3" id="sigil_toc_id_85"><span class="num-string">6.4.3</span> Project progress so far</h3>
</div>
<div class="readable-text" id="p301">
<p>So far, we have answered one of the two main stakeholder questions, namely, whether developers’ opinions on the usefulness and trustworthiness of current AI tools depend on their experience, job role, and what specifically they use the tools for. We have analyzed the survey to conclude that</p>
</div>
<ul>
<li class="readable-text" id="p302"> Users of AI tools generally view them more favorably than nonusers. </li>
<li class="readable-text" id="p303"> Users of AI tools also trust the tools’ outputs more than nonusers say they would. </li>
<li class="readable-text" id="p304"> Help with writing and debugging code is the most popular use case for AI tools. </li>
<li class="readable-text" id="p305"> People in different job roles report using AI tools for different purposes. </li>
</ul>
<div class="readable-text" id="p306">
<p>In the following chapter, we will continue the project by addressing the second stakeholder hypothesis, which is that new and experienced coders use these tools differently. For this, we will need methods that combine continuous and categorical data and perform appropriate statistical tests.</p>
</div>
<div class="readable-text" id="p307">
<h2 class="readable-text-h2" id="sigil_toc_id_86">Summary</h2>
</div>
<ul>
<li class="readable-text" id="p308"> Categorical data is prevalent in the real world. </li>
<li class="readable-text" id="p309"> Methods for continuous data are often not appropriate for categorical data; therefore, knowing methods to handle categorical data is important for analysts. </li>
<li class="readable-text" id="p310"> Methods like one-hot encoding transform categorical data into a format better suited for analysis. </li>
</ul>
</div></body></html>