- en: Chapter 3\. Introduction to Causal Diagrams
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章\. 因果图简介
- en: In fact, with few exceptions, correlation does imply causation. If we observe
    a systematic relationship between two variables, and we have ruled out the likelihood
    that this is simply due to a random coincidence, then something must be causing
    this relationship. When the audience at a Malay shadow theatre sees a solid round
    shadow on the screen they know that some three-dimensional object has cast it,
    though they may not know if the object is a ball or a rice bowl in profile. A
    more accurate sound bite for introductory statistics would be that a simple correlation
    implies an unresolved causal structure.
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 实际上，除了少数例外，相关确实意味着因果关系。如果我们观察到两个变量之间存在系统性关系，并且我们已经排除了这只是随机巧合的可能性，那么一定存在某种因果关系。当马来影子戏剧的观众在屏幕上看到一个实心的圆形影子时，他们知道某个三维物体产生了这个影子，尽管他们可能不知道这个物体是球体还是侧面的饭碗。对于统计学入门而言，一个更准确的口号应该是简单的相关性暗示着一个未解决的因果结构。
- en: ''
  id: totrans-2
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Bill Shipley, *Cause and Correlation in Biology* (2016)
  id: totrans-3
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 比尔·希普利，《生物学中的因果与相关性》（2016）
- en: Causal diagrams (CDs) may well be one of the most powerful tools for analysis
    most people have never heard of. As such they are one of the three extremities
    (vertices) of the causal-behavioral framework ([Figure 3-1](#the_causal_behavioral_framework_for_d)).
    They provide a language to express and analyze cause-to-effect relationships,
    which works especially well when dealing with behavioral data analyses.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因果图（CDs）很可能是大多数人从未听说过的分析工具中最强大的之一。因此，它们是因果行为框架的三个极点（顶点）之一（[图 3-1](#the_causal_behavioral_framework_for_d)）。它们提供了一种语言来表达和分析因果关系，特别适用于处理行为数据分析。
- en: '![](Images/BEDA_0301.png)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/BEDA_0301.png)'
- en: Figure 3-1\. The causal-behavioral framework for data analysis
  id: totrans-6
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-1\. 数据分析的因果行为框架
- en: 'In the first section of this chapter, I’ll show how CDs fit into the framework
    from a conceptual perspective, that is, how they are connected to behaviors and
    data. In the second section, I’ll describe the three fundamental structures in
    CDs: chains, forks, and colliders. Finally, in the third section, we’ll see some
    common transformations that can be applied to CDs.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的第一部分中，我将展示CD如何从概念角度融入框架中，即它们如何与行为和数据连接。在第二部分中，我将描述CD中的三种基本结构：链式结构、分叉结构和碰撞结构。最后，在第三部分中，我们将看到可以应用于CD的一些常见转换。
- en: Causal Diagrams and the Causal-Behavioral Framework
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 因果图和因果行为框架
- en: First, let’s define what a CD is. A CD is a visual representation of variables,
    shown as boxes, and their relationships to each other shown as arrows going from
    one box to another.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们定义什么是CD。CD是变量的视觉表示，显示为方框，并显示它们之间的关系，表示为从一个框到另一个框的箭头。
- en: In our C-Mart example in [Chapter 1](ch01.xhtml#the_causal_behavioral_framework_for_da),
    the variable *IcedCoffeeSales* was affected by a single cause, *Temperature*.
    [Figure 3-2](#our_very_first_causal_diagram) shows the corresponding causal diagram.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们在[第1章](ch01.xhtml#the_causal_behavioral_framework_for_da)中的C-Mart示例中，变量 *IcedCoffeeSales*
    受到一个单一原因 *Temperature* 的影响。[图 3-2](#our_very_first_causal_diagram) 展示了相应的因果图。
- en: '![Our very first causal diagram](Images/BEDA_0302.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![我们的第一个因果图](Images/BEDA_0302.png)'
- en: Figure 3-2\. Our very first causal diagram
  id: totrans-12
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-2\. 我们的第一个因果图
- en: Each rectangle represents a variable we can observe (one we have in our data
    set), and the arrow between them represents the existence and direction of a causal
    relationship. Here, the arrow between *Temperature* and *IcedCoffeeSales* indicates
    that the former is a cause of the latter.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 每个矩形代表我们可以观察到的变量（我们在数据集中拥有的一个），它们之间的箭头表示因果关系的存在和方向。这里，*Temperature* 和 *IcedCoffeeSales*
    之间的箭头表明前者是后者的原因。
- en: Sometimes, however, there will be an additional variable that we aren’t able
    to observe. If we still want to show it in a causal diagram, we can represent
    it with a shaded rectangle^([1](ch03.xhtml#idm45968167675832)) ([Figure 3-3](#a_causal_diagram_with_an_unobserved_var)).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，有时会有一个我们无法观察到的额外变量。如果我们仍然希望在因果图中显示它，我们可以用一个阴影矩形来表示^([1](ch03.xhtml#idm45968167675832))（[图 3-3](#a_causal_diagram_with_an_unobserved_var)）。
- en: '![A causal diagram with an unobserved variable](Images/BEDA_0303.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![带有未观察变量的因果图](Images/BEDA_0303.png)'
- en: Figure 3-3\. A causal diagram with an unobserved variable
  id: totrans-16
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-3\. 带有未观察变量的因果图
- en: In [Figure 3-3](#a_causal_diagram_with_an_unobserved_var), *CustomerSweetTooth*
    is a cause of *IcedCoffeeSales*, meaning that customers with a stronger sweet
    tooth buy more iced coffee. However, we can’t observe the degree of a customer’s
    sweet tooth. We’ll discuss later the importance of unobserved confounders and
    more generally unobserved variables in causal analysis. For the time being, let’s
    just note that even if we have no way of observing a particular variable, it can
    still be included in a causal diagram by representing it as an oval.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [图3-3](#a_causal_diagram_with_an_unobserved_var) 中，*CustomerSweetTooth* 是
    *IcedCoffeeSales* 的一个原因，这意味着甜食爱好者购买更多冰咖啡。然而，我们无法观察到顾客的甜食偏好程度。稍后我们将讨论因果分析中未观察到的混杂因素和更普遍地未观察到的变量的重要性。目前，我们只需要注意即使我们无法观察到特定变量，也可以通过将其表示为椭圆形包含在因果图中。
- en: Causal Diagrams Represent Behaviors
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 因果图表现行为
- en: The first way of looking at causal diagrams is to treat them as representations
    of causal relationships between behaviors, as well as other phenomena in the real
    world that impact behaviors ([Figure 3-4](#cds_are_connected_to_behaviors_in_our_f)).
    From this perspective, the elements of CDs represent real “things” that exist
    and have effects on each other. An analogy from physical sciences would be a magnet,
    a bar of iron, and the magnetic field around the magnet. You can’t see the magnetic
    field but it exists nonetheless, and it affects the iron bar. You may not have
    any data on the magnetic field and maybe you’ve never seen the equations describing
    it, but you can sense it as you move the bar, and you can develop intuitions as
    to what it does.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 对因果图的第一种看法是将它们视为行为之间因果关系的表现，以及影响行为的现实世界中的其他现象（[图3-4](#cds_are_connected_to_behaviors_in_our_f)）。从这个角度看，因果图的元素代表着存在并相互影响的真实“事物”。物理科学中的类比可以是磁铁、铁条和磁铁周围的磁场。你看不到磁场，但它确实存在，并影响铁条。也许你对磁场没有任何数据，也许你从未见过描述它的方程，但当你移动铁条时，你能感觉到它，并且你能对它的作用产生直觉。
- en: '![CDs are connected to behaviors in our framework](Images/BEDA_0304.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![CDs are connected to behaviors in our framework](Images/BEDA_0304.png)'
- en: Figure 3-4\. CDs are connected to behaviors in our framework
  id: totrans-21
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-4\. CDs are connected to behaviors in our framework
- en: The same perspective applies when we want to understand what drives behaviors.
    We intuitively understand that human beings have habits, preferences, and emotions,
    and we treat these as causes even though we often don’t have any numeric data
    about them. When we say, “Joe bought peanuts because he was hungry,” we are relying
    on our knowledge, experience, and beliefs about humans in general and Joe in particular.
    We treat hunger as a real thing, even if we’re not measuring Joe’s blood sugar
    or brain activation.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们想要理解驱动行为的因素时，同样的观点适用。我们直观地理解人类有习惯、偏好和情感，尽管我们通常没有关于这些方面的数字数据。当我们说“乔买了花生是因为他饿了”时，我们依赖于我们对人类和乔的知识、经验和信念。我们把饥饿看作是一种真实存在的东西，即使我们没有测量乔的血糖或脑部活动。
- en: 'Here, we’re making a causal statement about reality: we’re saying that had
    Joe not been hungry, he wouldn’t have bought peanuts. Causality is so fundamental
    to our intuitive understanding of reality that even young children are able to
    make correct causal inferences (evidenced by their use of the word “because”)
    long before they have had any exposure to the scientific method or data analysis.
    Of course, intuition is subject to a variety of biases well known by behavioral
    scientists, even when it takes the more educated form of common sense or expertise.
    But more often than not, intuition guides us well in our daily lives even in the
    absence of quantitative data.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们对现实做出了因果性陈述：我们说如果乔不饿的话，他就不会买花生。因果性对我们对现实的直观理解非常基本，以至于即使是年幼的孩子在接触科学方法或数据分析之前也能做出正确的因果推论（通过使用“因为”这个词表明）。当然，直觉受到各种行为科学家所熟知的偏见的影响，即使它采取更为教育的形式，如常识或专业知识。但通常情况下，即使在没有数量数据的情况下，直觉也能在日常生活中很好地指导我们。
- en: 'You might worry that using CDs to represent intuitions and beliefs about the
    world introduces subjectivity, and that’s certainly true. But because CDs are
    tools for thinking and analysis, they don’t have to be “true.” You and I might
    have different ideas as to why Joe bought peanuts, which means we would draw different
    CDs. Even if we fully agreed on what causes what, we couldn’t represent everything
    and their relationships in one diagram; there is judgment involved in determining
    what variables and relationships to include or exclude. In some cases, when data
    is available, it will help: we’ll be able to reject a CD because it is incompatible
    with the data at hand. But in other cases, very different CDs will be equally
    compatible with the data and we won’t be able to choose between them, especially
    if we don’t have experimental data.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能担心使用CDs来表示对世界的直觉和信念引入了主观性，这当然是事实。但是因为CDs是思考和分析的工具，它们不必是“真实”的。你和我对Joe为什么买花生有不同的想法，这意味着我们可能会绘制不同的CDs。即使我们完全同意什么导致什么，我们也不能在一个图表中表示所有东西及其关系；确定包含或排除哪些变量和关系涉及判断。在某些情况下，当数据可用时，它将有所帮助：我们将能够拒绝一个与手头数据不兼容的CD。但在其他情况下，非常不同的CDs将与数据同样兼容，我们将无法在它们之间做出选择，特别是如果我们没有实验数据。
- en: This subjectivity might look like a (possibly fatal) flaw of CDs, but it’s actually
    a feature, not a bug. CDs don’t create uncertainty; they simply reflect the uncertainty
    that is already in our world. If there are several possible interpretations of
    the situation at hand that appear equally valid, you should explicitly say so.
    The alternative would be to allow people who have different mental models in their
    heads to each believe that they know the truth and others agree with them, when
    in reality that’s not the case. At least putting the uncertainty in the open will
    allow a principled discussion and guide your analysis.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这种主观性可能看起来像是CDs的一个（可能是致命的）缺陷，但实际上却是一个特性，而不是错误。CDs不会产生不确定性；它们只是反映了已经存在于我们世界中的不确定性。如果对当前情况有几种可能的解释看似同样有效，你应该明确地说明。另一种选择是允许那些在他们的头脑中有不同心理模型的人每个人都相信自己知道真相，并且其他人同意他们的看法，而实际上情况并非如此。至少公开不确定性将允许进行原则性讨论并指导您的分析。
- en: Causal Diagrams Represent Data
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 因果图代表数据
- en: While there is an art to building and interpreting CDs, there’s also a science
    to it, and we can use CDs to represent relationships between variables in our
    data ([Figure 3-5](#cds_are_also_connected_to_data)). When these relationships
    are entirely linear, or approximately so, CDs have clear equivalents in linear
    algebra. This means we can use the rules and tools of linear algebra to validate
    the “legality” of how we manipulate and transform CDs, thus ensuring that we draw
    correct conclusions.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管构建和解释CDs有一门艺术，但也有一门科学，我们可以利用CDs来表示数据中变量之间的关系（见[图 3-5](#cds_are_also_connected_to_data)）。当这些关系完全是线性的或近似线性时，CDs在线性代数中有明确的等价物。这意味着我们可以使用线性代数的规则和工具来验证我们如何操作和转换CDs的“合法性”，从而确保我们得出正确的结论。
- en: '![CDs are also connected to data](Images/BEDA_0305.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![CDs也与数据相关联](Images/BEDA_0305.png)'
- en: Figure 3-5\. CDs are also connected to data
  id: totrans-29
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-5\. CDs也与数据相关联
- en: The linearity requirement may seem very restrictive. However, some of the rules
    and tools of linear algebra continue to apply when some of these relationships
    are not linear but still belong to the broad category of models called generalized
    linear models (GLM). A logistic regression model for example is a GLM. This means
    that we can represent and handle a causal relationship where the effect variable
    is binary with CDs. As the sidebar shows, the math gets more convoluted in that
    case, but most of our intuitions about CDs remain true.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 线性要求可能看起来非常严格。然而，当某些关系不是线性的，但仍属于称为广义线性模型（GLM）的模型的广泛类别时，线性代数的一些规则和工具仍然适用。例如，逻辑回归模型就是一个GLM。这意味着我们可以用CDs来表示和处理一个因果关系，其中影响变量是二进制的。如侧边栏所示，在这种情况下，数学变得更加复杂，但我们关于CDs的大多数直觉仍然成立。
- en: 'From this perspective, the causal diagram from [Figure 3-3](#a_causal_diagram_with_an_unobserved_var)
    connecting *Temperature* to *IcedCoffeeSales* would mean that:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个角度来看，从[图 3-3](#a_causal_diagram_with_an_unobserved_var)中连接*Temperature*和*IcedCoffeeSales*的因果图意味着：
- en: '*IcedCoffeeSales = β * Temperature + *ε**'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '*IcedCoffeeSales = β * Temperature + *ε**'
- en: This linear regression means that if temperature were to increase by one degree,
    keeping everything else equal, then sales of iced coffee would increase by *β*
    dollars. Each box in the causal diagram represents a column of data, as with the
    simulated data in [Table 3-1](#simulated_data_illustrating_the_relatio).
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这个线性回归意味着，如果温度增加一度，其他条件保持不变，那么冰咖啡的销售将增加*β*美元。因果图中的每个方框代表一个数据列，就像[表格 3-1](#simulated_data_illustrating_the_relatio)中模拟数据一样。
- en: Table 3-1\. Simulated data illustrating the relationship in our causal diagram
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 表格 3-1\. 模拟数据，展示了我们因果图中的关系
- en: '| Date | *Temperature* | *IcedCoffeeSales* | *β* * *Temperature* | *ε* = *IcedCoffeeSales*
    – *β* * *Temperature* |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| 日期 | *Temperature* | *IcedCoffeeSales* | *β* * *Temperature* | *ε* = *IcedCoffeeSales*
    – *β* * *Temperature* |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| 6/1/2019 | 71 | $70,945 | $71,000 | $55 |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| 6/1/2019 | 71 | $70,945 | $71,000 | $55 |'
- en: '| 6/2/2019 | 57 | $56,969 | $57,000 | $31 |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| 6/2/2019 | 57 | $56,969 | $57,000 | $31 |'
- en: '| 6/3/2019 | 79 | $78,651 | $79,000 | -$349 |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| 6/3/2019 | 79 | $78,651 | $79,000 | -$349 |'
- en: 'For people who are familiar with linear algebra notation, we can rewrite the
    previous equation as:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 对于熟悉线性代数符号的人，我们可以将前述方程重写为：
- en: <math><mrow><mrow><mrow><mo>(</mo><mtable><mtr><mtd><mn>70</mn><mo>,</mo><mn>945</mn></mtd></mtr><mtr><mtd><mn>56</mn><mo>,</mo><mn>969</mn></mtd></mtr><mtr><mtd><mn>78</mn><mo>,</mo><mn>651</mn></mtd></mtr></mtable><mo>)</mo></mrow><mo>=</mo><mn>1000</mn><mo>*</mo><mrow><mo>(</mo><mtable><mtr><mtd><mn>71</mn></mtd></mtr><mtr><mtd><mn>57</mn></mtd></mtr><mtr><mtd><mn>79</mn></mtd></mtr></mtable><mo>)</mo></mrow><mo>+</mo><mrow><mo>(</mo><mtable><mtr><mtd><mn>55</mn></mtd></mtr><mtr><mtd><mn>31</mn></mtd></mtr><mtr><mtd><mo>−</mo><mn>349</mn></mtd></mtr></mtable><mo>)</mo></mrow></mrow></mrow></math>
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: <math><mrow><mrow><mrow><mo>(</mo><mtable><mtr><mtd><mn>70</mn><mo>,</mo><mn>945</mn></mtd></mtr><mtr><mtd><mn>56</mn><mo>,</mo><mn>969</mn></mtd></mtr><mtr><mtd><mn>78</mn><mo>,</mo><mn>651</mn></mtd></mtr></mtable><mo>)</mo></mrow><mo>=</mo><mn>1000</mn><mo>*</mo><mrow><mo>(</mo><mtable><mtr><mtd><mn>71</mn></mtd></mtr><mtr><mtd><mn>57</mn></mtd></mtr><mtr><mtd><mn>79</mn></mtd></mtr></mtable><mo>)</mo></mrow><mo>+</mo><mrow><mo>(</mo><mtable><mtr><mtd><mn>55</mn></mtd></mtr><mtr><mtd><mn>31</mn></mtd></mtr><mtr><mtd><mo>−</mo><mn>349</mn></mtd></mtr></mtable><mo>)</mo></mrow></mrow></mrow></math>
- en: From that perspective, CDs are all about data—variables and relationships between
    them. This generalizes immediately to multiple causes. Let’s draw a causal diagram
    showing that *Temperature* and *SummerMonth* both cause *IceCreamSales* ([Figure 3-8](#a_causal_diagram_with_more_than_one_cau)).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个角度来看，因果图关注的是数据——变量及其之间的关系。这立即推广到多个原因。让我们绘制一个因果图，显示*Temperature*和*SummerMonth*都会导致*IceCreamSales*（[图
    3-8](#a_causal_diagram_with_more_than_one_cau)）。
- en: '![A causal diagram with more than one cause](Images/BEDA_0308.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![一个带有多个原因的因果图](Images/BEDA_0308.png)'
- en: Figure 3-8\. A causal diagram with more than one cause
  id: totrans-44
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-8\. 一个带有多个原因的因果图
- en: 'Translating this CD in mathematical terms would yield the following equation:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 将这个因果图转化为数学术语，得到以下方程式：
- en: '*IceCreamSales = β[*T*].Temperature + β[*S*].SummerMonth + ε*'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '*IceCreamSales = β[*T*].Temperature + β[*S*].SummerMonth + ε*'
- en: Obviously, this equation is a standard multiple linear regression, but the fact
    that it is based on a CD changes its interpretation. Outside of a causal framework,
    the only conclusion we would be able to draw from it is “an increase of one degree
    of temperature is associated with an increase of *β*[*T*] dollars in ice cream
    sales.” Because correlation is not causation, it would be illegitimate to infer
    anything further. However, when a regression is backed by a CD, as is the case
    here, we can make a significantly stronger statement—namely, “unless this CD is
    wrong, an increase of one degree of temperature will cause an increase of *β*[*T*]
    dollars in ice cream sales,” which is what the business cares about.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，这个方程是标准的多元线性回归，但其基于因果图的解释方式有所不同。在因果框架之外，我们只能得出一个结论：“温度增加一度与冰淇淋销售额增加*β*[*T*]美元相关。”因为相关性并非因果关系，因此推断任何进一步的事实都是不合理的。然而，在回归模型基于因果图的情况下，如本例，我们可以做出显著更强的陈述——即，“除非这个因果图是错误的，否则温度增加一度将导致冰淇淋销售额增加*β*[*T*]美元”，这正是业务关心的。
- en: If you have a quantitative background such as data science, you may be tempted
    to focus on the connection between CDs and data at the expense of the connection
    with behaviors. It is certainly a viable path, and it has given birth to an entire
    category of statistical models called probabilistic graphical models. For instance,
    algorithms have been and are still developed to identify causal relationships
    in data without relying on human expertise or judgment. However, this field is
    still in its infancy, and when applied to real-life data, these algorithms are
    often unable to select between several possible CDs that lead to vastly different
    business implications. Business and common sense can frequently do a better job
    of selecting the most reasonable one. Therefore I strongly believe that you are
    better off using the mixed approach shown in this book’s framework and accepting
    the idea that you’ll need to use your judgment. The back and forth that CDs enable
    between your intuitions and your data is—literally, in many cases—where the money
    is.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有数据科学等量化背景，你可能会倾向于关注因果图与数据之间的连接，而牺牲了与行为之间的联系。这当然是一条可行的道路，并且它已经产生了一整套称为概率图模型的统计模型类别。例如，已经开发了算法来在数据中识别因果关系，而不依赖于人类的专业知识或判断。然而，这个领域仍处于起步阶段，当应用到现实数据时，这些算法通常无法在几种可能导致极不同业务影响的因果图之间进行选择。商业常识通常可以更好地选择最合理的一种。因此，我坚信你最好使用本书框架中展示的混合方法，并接受你需要运用自己的判断的观点。因果图在你的直觉和数据之间来回推理——在许多情况下，这正是成功之道。
- en: Fundamental Structures of Causal Diagrams
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 因果图的基本结构
- en: 'Causal diagrams can take a bewildering variety of shapes. Fortunately, researchers
    have been working on causality for a while now, and they have brought some order
    to it:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 因果图可以呈现出多种各样的形状。幸运的是，研究人员已经花了一段时间在因果性上，并为此带来了一些秩序：
- en: There exist only three fundamental structures—chains, forks, and colliders—and
    all causal diagrams can be represented as combinations of them.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 因果图只有三种基本结构——链式结构、分叉结构和碰撞器结构——所有的因果图都可以表示为它们的组合。
- en: By looking at CDs as if they were family trees, we can easily describe relationships
    between variables that are far away from each other in the diagram, for example
    by saying that one is the “descendant” or the “child” of another.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将因果图看作家谱，我们可以轻松描述在图中相距较远的变量之间的关系，例如称其中一个为另一个的“后代”或“子节点”。
- en: And really, that’s all there is to it! We’ll now see these fundamental structures
    in more detail, and once you have familiarized yourself with them and how to name
    relationships between variables, you’ll be able to fully describe any CD you work
    with.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，就是这样！我们现在将更详细地了解这些基本结构，并且一旦你熟悉了它们以及如何命名变量之间的关系，你将能够完全描述你所使用的任何因果图。
- en: Chains
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 链式结构
- en: 'A chain is a causal diagram with three boxes, representing three variables,
    and two arrows connecting these boxes in a straight line. To show you one, I’ll
    have to introduce a new treat in our C-Mart example—namely, the mighty donut.
    For the sake of simplicity, let’s assume that only one of the variables we have
    already seen affects the sales of donuts: *IcedCoffeeSales*. Then *Temperature*,
    *IcedCoffeeSales*, and *DonutSales* are causally connected ([Figure 3-9](#causal_diagram_of_a_chain)).'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 链式结构是一个有三个框表示的因果图，代表三个变量，并且两个箭头直线连接这些框。为了向你展示一个例子，我将介绍我们C-Mart例子中的一个新的待处理物——那就是强大的甜甜圈。为了简单起见，让我们假设我们已经看到的变量只有一个影响到了甜甜圈的销售：*冰咖啡销售量*。那么
    *温度*、*冰咖啡销售量* 和 *甜甜圈销售量* 是因果相关的 ([图 3-9](#causal_diagram_of_a_chain))。
- en: '![Causal diagram of a chain](Images/BEDA_0309.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![链式因果图](Images/BEDA_0309.png)'
- en: Figure 3-9\. Causal diagram of a chain
  id: totrans-57
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-9\. 链式因果图
- en: What makes this CD a chain is that the two arrows are going “in the same direction,”
    i.e., the first arrow goes from one box to another, and the second arrow goes
    from that second box to the last one. This CD is an expansion of the one in [Figure 3-3](#a_causal_diagram_with_an_unobserved_var).
    It represents the fact that temperature causes sales of iced coffee, which in
    turn causes sales of donuts.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这张因果图之所以被称为链式结构，是因为两个箭头“同向”，即第一个箭头从一个框指向另一个框，第二个箭头从第二个框指向最后一个框。这张因果图扩展了 [图 3-3](#a_causal_diagram_with_an_unobserved_var)
    中的图示。它表示了温度导致冰咖啡销售，进而导致甜甜圈销售的事实。
- en: Let’s define a few terms that will allow us to characterize the relationships
    between variables. In this diagram, *Temperature* is called the *parent* of *IcedCoffeeSales*,
    and *IcedCoffeeSales* is a *child* of *Temperature*. But *IcedCoffeeSales* is
    also a parent of *DonutSales*, which is its child. When a variable has a parent/child
    relationship with another variable we call that a *direct relationship*. When
    there are intermediary variables between them, we call that an *indirect relationship*.
    The actual count of variables that makes a relationship indirect is not generally
    important, so you don’t have to count the number of boxes to describe the fundamental
    structure of the relationship between them.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们定义一些术语，以便描述变量之间的关系。在这个图表中，*Temperature* 被称为 *IcedCoffeeSales* 的*父亲*，而 *IcedCoffeeSales*
    是 *Temperature* 的*子孙*。但是 *IcedCoffeeSales* 也是 *DonutSales* 的父亲，后者是其子孙。当一个变量与另一个变量有父/子关系时，我们称之为*直接关系*。当它们之间有中介变量时，我们称之为*间接关系*。变量数目的确切数量并不重要，因此您不必计算箱子的数量来描述它们之间关系的基本结构。
- en: In addition, we say that a variable is the *ancestor* of another variable if
    the first variable is the parent of another, which may be the parent of another,
    and so on, ending up with our second variable as a child. In our example, *Temperature*
    is an ancestor of *DonutSales* because it’s a parent of *IcedCoffeeSales*, which
    is itself a parent of *DonutSales*. Very logically, this makes *DonutSales* a
    *descendant* of *Temperature* ([Figure 3-10](#relationships_between_variables_along_a)).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，我们说一个变量是另一个变量的*祖先*，如果第一个变量是另一个的父亲，后者可能是另一个的父亲，依此类推，最终我们的第二个变量是第一个变量的子孙。在我们的例子中，*Temperature*
    是 *DonutSales* 的祖先，因为它是 *IcedCoffeeSales* 的父亲，后者又是 *DonutSales* 的父亲。非常合乎逻辑地，这使得
    *DonutSales* 成为 *Temperature* 的*后代*（[Figure 3-10](#relationships_between_variables_along_a)）。
- en: '![Relationships between variables along a chain](Images/BEDA_0310.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![链条中变量之间的关系](Images/BEDA_0310.png)'
- en: Figure 3-10\. Relationships between variables along a chain
  id: totrans-62
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-10\. 链条中变量之间的关系
- en: In this situation, *IcedCoffeeSales* is also the *mediator* of the relationship
    between *Temperature* and *DonutSales*. We’ll explore mediation in more depth
    in [Chapter 12](ch12.xhtml#mediation_and_instrumental_variables). For now, let’s
    just note that if a mediator value does not change, then the variables earlier
    in a chain won’t influence the variables further along the chain unless they are
    otherwise connected. In our example, if C-Mart were to experience a shortage of
    iced coffee, we would expect that for the duration of that shortage, changes in
    temperature would not have any effect on the sales of donuts.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，*IcedCoffeeSales* 也是 *Temperature* 和 *DonutSales* 之间关系的*中介者*。我们将在[第 12
    章](ch12.xhtml#mediation_and_instrumental_variables)中更深入地探讨中介作用。现在，让我们注意到，如果一个中介值不变，则链条中前面的变量不会影响链条中后面的变量，除非它们以其他方式相连。在我们的例子中，如果
    C-Mart 遭遇冰咖啡短缺，我们预计在此期间，温度的变化不会对甜甜圈的销售产生任何影响。
- en: Collapsing chains
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 折叠链条
- en: 'The preceding causal diagram translates into the following regression equations:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 上述因果图转化为以下回归方程：
- en: '*IcedCoffeeSales* = *β[T].Temperature*'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '*IcedCoffeeSales* = *β[T].Temperature*'
- en: '*DonutSales* = *β[I].IcedCoffeeSales*'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*DonutSales* = *β[I].IcedCoffeeSales*'
- en: 'We can replace *IcedCoffeeSales* by its expression in the second equation:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以用第二个方程中的表达式替换 *IcedCoffeeSales*：
- en: '*DonutSales* = *β*[I].(*β[T]Temperature*) = (*β[I]β[T]*)*Temperature*'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '*DonutSales* = *β[I].(*β[T]Temperature*) = (*β[I]β[T]*)*Temperature*'
- en: 'But *β*[I]*β*[T] is just the product of two constant coefficients, so we can
    treat it as a new coefficient in itself: <math><mrow><mrow><mi>D</mi><mi>o</mi><mi>n</mi><mi>u</mi><mi>t</mi><mi>S</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><msub><mrow><mover><mrow><mi>β</mi></mrow><mrow><mo>˜</mo></mrow></mover></mrow><mrow><mi>T</mi></mrow></msub><mn>.</mn><mi>T</mi><mi>e</mi><mi>m</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi></mrow></mrow></math>.
    We have managed to express *DonutSales* as a linear function of *Temperature*,
    which can in turn be translated into a causal diagram ([Figure 3-11](#collapsing_a_cd_into_another_cd)).'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 但是 *β*[I]*β*[T] 只是两个常数系数的乘积，所以我们可以将其视为一个新系数： <math><mrow><mrow><mi>D</mi><mi>o</mi><mi>n</mi><mi>u</mi><mi>t</mi><mi>S</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi><mo>=</mo><msub><mrow><mover><mrow><mi>β</mi></mrow><mrow><mo>˜</mo></mrow></mover></mrow><mrow><mi>T</mi></mrow></msub><mn>.</mn><mi>T</mi><mi>e</mi><mi>m</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi></mrow></mrow></math>。我们已成功将
    *DonutSales* 表示为 *Temperature* 的线性函数，这可以转化为因果图（[Figure 3-11](#collapsing_a_cd_into_another_cd)）。
- en: '![Collapsing a CD into another CD](Images/BEDA_0311.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![将一个 CD 折叠成另一个 CD](Images/BEDA_0311.png)'
- en: Figure 3-11\. Collapsing a CD into another CD
  id: totrans-72
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-11\. 将一个 CD 折叠成另一个 CD
- en: Here, we have *collapsed a chain*, that is, we have removed the variable in
    the middle and replaced it with an arrow going from the first variable to the
    last. By doing so, we have effectively simplified our original causal diagram
    to focus on the relationship that we’re interested in. This can be useful when
    the last variable in a chain is a business metric we’re interested in and the
    first one is actionable. In some circumstances, for example, we might be interested
    in the intermediary relations between *Temperature* and *IcedCoffeeSales* and
    between *IcedCoffeeSales* and *DonutSales* to manage pricing or promotions. In
    other circumstances, we might be interested only in the relation between *Temperature*
    and *DonutSales*—for example, to plan for inventory.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们*折叠了一个链条*，也就是说，我们去除了中间的变量，并用从第一个变量到最后一个变量的箭头替换它。通过这样做，我们有效地简化了我们原始的因果图，专注于我们感兴趣的关系。当链条中的最后一个变量是我们感兴趣的业务指标，而第一个变量是可操作的时，这是有用的。在某些情况下，例如，我们可能对*Temperature*和*IceCoffeeSales*之间以及*IceCoffeeSales*和*DonutSales*之间的中间关系感兴趣，以管理定价或促销。在其他情况下，我们可能只对*Temperature*和*DonutSales*之间的关系感兴趣，例如，为了进行库存规划。
- en: 'The transitivity property of linear algebra also applies here: if *DonutSales*
    caused another variable, then that chain could also be collapsed around *DonutSales*,
    and so on.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 线性代数的传递性财产在这里也适用：如果*DonutSales*导致另一个变量，那么这个链条也可以围绕*DonutSales*折叠，依此类推。
- en: Expanding chains
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 扩展链条
- en: 'The collapsing operation can obviously be reversed: we can go from our last
    CD to the previous one by adding the *IcedCoffeeSales* variable in the middle.
    More generally, we say that we are *expanding a chain* whenever we inject an intermediary
    variable between two variables currently connected by an arrow. For example, let’s
    say that we start with the relationship between *Temperature* and *DonutSales*
    ([Figure 3-11](#collapsing_a_cd_into_another_cd)). This causal relationship translates
    into the equation *DonutSales* = *β[T]Temperature*. Let’s assume that *Temperature*
    affects *DonutSales* only through *IcedCoffeeSales*. We can add this variable
    in our CD, which brings us back to our original CD from [Figure 3-8](#a_causal_diagram_with_more_than_one_cau)
    ([Figure 3-12](#expanding_a_cd_into_another_cd)).'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，折叠操作可以反转：我们可以通过在中间添加*IceCoffeeSales*变量，从我们的最后一个 CD 回到前一个 CD。更一般地说，我们称之为*扩展链条*，每当我们在当前由箭头连接的两个变量之间注入中间变量时。例如，假设我们从*Temperature*和*DonutSales*的关系开始([图
    3-11](#collapsing_a_cd_into_another_cd))。这种因果关系转化为方程*DonutSales* = *β[T]Temperature*。假设*Temperature*仅通过*IceCoffeeSales*影响*DonutSales*。我们可以在我们的
    CD 中添加这个变量，这使我们回到了我们从[图 3-8](#a_causal_diagram_with_more_than_one_cau)开始的原始 CD([图
    3-12](#expanding_a_cd_into_another_cd))。
- en: '![Expanding a CD into another CD](Images/BEDA_0312.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![将一个 CD 展开成另一个 CD](Images/BEDA_0312.png)'
- en: Figure 3-12\. Expanding a CD into another CD
  id: totrans-78
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-12\. 将一个 CD 展开成另一个 CD
- en: 'Expanding chains can be useful to better understand what’s happening in a given
    situation. For example, let’s say that temperature increased but sales of donuts
    did not. There could be two potential reasons for that:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展链条可以帮助更好地理解特定情况中发生的事情。例如，假设温度增加了，但甜甜圈的销售量没有增加。这可能有两个潜在的原因：
- en: First, the increase in temperature did not increase the sales of iced coffee,
    perhaps because the store manager has been more aggressive with the AC. In other
    words, the first arrow in [Figure 3-11](#collapsing_a_cd_into_another_cd) disappeared
    or weakened.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，温度的增加并没有增加冰咖啡的销量，也许是因为店长更加积极地使用了空调。换句话说，在[图 3-11](#collapsing_a_cd_into_another_cd)中，第一个箭头消失或减弱。
- en: Alternatively, the increase in temperature *did* increase the sales of iced
    coffee, but the increase in the sales of iced coffee did not increase the sales
    of donuts, e.g., because people are buying the newly offered cookies instead.
    In other words, in [Figure 3-11](#collapsing_a_cd_into_another_cd), the first
    arrow is unchanged but the second one disappeared or weakened.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或者，温度的增加确实增加了冰咖啡的销售量，但冰咖啡的销售增长并没有增加甜甜圈的销售量，例如，因为人们正在购买新推出的饼干。换句话说，在[图 3-11](#collapsing_a_cd_into_another_cd)中，第一个箭头保持不变，但第二个箭头消失或减弱。
- en: Depending on which one is true, you might take very different corrective actions—either
    turning off the AC or changing the price of cookies. In many cases, looking at
    the variable in the middle of a chain, namely the mediator, will allow you to
    make better decisions.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 根据实际情况，你可能会采取非常不同的纠正措施——要么关闭空调，要么改变饼干的价格。在许多情况下，查看链条中间的变量，即中介者，将帮助你做出更好的决策。
- en: Note
  id: totrans-83
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Because chains can be collapsed or expanded at will, in general we do not explicitly
    indicate when it has been done. It’s always assumed that any arrow could potentially
    be expanded to highlight an intermediary variable along the way.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 由于链条可以随意折叠或展开，通常我们不会明确指示何时进行折叠。通常假设任何箭头都可能被展开，以突出沿途的中介变量。
- en: 'This also implies that the definition of “direct” and “indirect” relationships
    mentioned earlier relates to a specific representation of a CD: when you collapse
    a chain, two variables that had an indirect relationship now have a direct relationship.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这也意味着之前提到的“直接”和“间接”关系的定义与CD的特定表示相关：当你折叠一个链条时，两个原本间接关系的变量现在有了直接关系。
- en: Forks
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分叉
- en: When a variable causes two or more effects, the relationship creates a *fork*.
    *Temperature* causes both *IcedCoffeeSales* and *IceCreamSales*, so a representation
    of this fork is shown in [Figure 3-13](#a_fork_between_three_variables).
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个变量导致两个或更多效应时，这种关系形成了一个*分叉*。*温度*同时导致*冰咖啡销量*和*冰淇淋销量*，所以这种分叉的表示如图[3-13](#a_fork_between_three_variables)所示。
- en: '![A fork between three variables](Images/BEDA_0313.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![三个变量之间的分叉](Images/BEDA_0313.png)'
- en: Figure 3-13\. A fork between three variables
  id: totrans-89
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-13\. 三个变量之间的分叉
- en: This CD shows that *Temperature* influences both *IceCreamSales* and *IcedCoffeeSales*,
    but that they do not have a causal relationship with each other. If it is hot
    out, demand for both ice cream and iced coffee increases, but buying one does
    not make you want to buy the other, nor does it make you less likely to buy the
    other.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 这个CD显示，*温度*影响了*冰淇淋销量*和*冰咖啡销量*，但它们之间并没有因果关系。如果天气炎热，冰淇淋和冰咖啡的需求都会增加，但购买其中一种并不会导致你想购买另一种，也不会减少你购买另一种的可能性。
- en: This situation where two variables have a common cause is very frequent but
    also potentially problematic, because it creates a correlation among these two
    variables. It makes sense that when it is hot out, we will see an increase in
    sales of both, and when it is cold fewer people will want both. A linear regression
    predicting *IceCreamSales* from *IcedCoffeeSales* would be fairly predictive,
    but here correlation does not equal causation, and since we know that the causal
    impact is 0, the coefficient provided by the model would not be accurate.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 当两个变量有一个共同原因的情况非常频繁，但也可能存在潜在问题，因为这会在这两个变量之间创建一个相关性。当天气炎热时，我们会看到冰淇淋和冰咖啡的销量增加，而天冷时，很少有人会同时想要这两种产品。从预测角度来看，从*冰咖啡销量*预测*冰淇淋销量*的线性回归会有相当的预测性，但这里相关性并不等于因果关系，由于我们知道因果影响为
    0，模型提供的系数将不准确。
- en: Another way to look at this relationship is that if C-Mart experienced a shortage
    of iced coffee, we would not expect to see a change in the sales of ice cream.
    More generally, it would be only a slight exaggeration to say that forks are one
    of the main roots of evil in the world of data analysis. Whenever we observe a
    correlation between two variables that doesn’t reflect direct causality between
    them (i.e., neither is the cause of the other), more often than not it will be
    because they share a common cause. From that perspective, one of the main benefits
    of using CDs is that they can show very clearly and intuitively what’s going on
    in those cases and how to correct for it.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种看待这种关系的方式是，如果C-Mart的冰咖啡短缺，我们不会预期看到冰淇淋销量的变化。更广义地说，说分叉是数据分析世界中的一大罪恶根源并不为过。每当我们观察到两个变量之间的相关性，而这种相关性不反映它们之间的直接因果关系（即彼此不是对方的原因），往往是因为它们共享一个共同原因。从这个角度来看，使用CD的主要好处之一是，它们可以非常清楚和直观地显示这些情况以及如何进行纠正。
- en: 'Forks are also typical of situations where we look at demographic variables:
    age, gender, and place of residence all cause a variety of other variables that
    may or may not cause each other. You can picture a demographic variable such as
    age as being at the root of a fork with many teeth.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 分叉也是我们观察人口统计变量时的典型情况：年龄、性别和居住地都可能导致各种其他可能相互作用或者不会相互作用的变量。你可以把人口统计变量比如年龄想象成一个有很多分支的分叉。
- en: A question that sometimes comes up when you have a fork in the middle of a CD
    is whether you can still collapse the chain around it. For example, let’s say
    that we’re interested in analyzing the relationship between *SummerMonth* and
    *IcedCoffeeSales* using the CD in [Figure 3-14](#a_cd_with_a_fork_and_a_chain).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 当 CD 中间有叉路时，有时会出现一个问题，即你是否仍然可以将链条围绕它折叠。例如，假设我们有兴趣使用[图 3-14](#a_cd_with_a_fork_and_a_chain)中的
    CD 分析 *SummerMonth* 和 *IcedCoffeeSales* 之间的关系。
- en: '![A CD with a fork and a chain](Images/BEDA_0314.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![带有叉路和链条的 CD](Images/BEDA_0314.png)'
- en: Figure 3-14\. A CD with a fork and a chain
  id: totrans-96
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-14\. 带有叉路和链条的 CD
- en: In this CD, there’s a fork between *SummerMonth* on one side and *IceCreamSales*
    and *Temperature* on the other, but there’s also a chain *SummerMonth* → *Temperature*
    → *IcedCoffeeSales*. Can we collapse the chain?
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个 CD 中，*SummerMonth* 一侧有一个叉路，另一侧有 *IceCreamSales* 和 *Temperature*，但也有一个链条
    *SummerMonth* → *Temperature* → *IcedCoffeeSales*。我们可以折叠链条吗？
- en: In this case, yes. We’ll see in [Chapter 5](ch05.xhtml#using_causal_diagrams_to_deconfound_da)
    how to determine when a variable is a confounder of a relationship; here it will
    suffice to say that *IceCreamSales* is not a confounder of the relationship between
    *SummerMonth* and *IcedCoffeeSales*, which is the one we’re interested in. Therefore
    we can simplify our CD ([Figure 3-15](#a_collapsed_version_of_the_previous_cd)).
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，是的。我们将在[第五章](ch05.xhtml#using_causal_diagrams_to_deconfound_da)中看到如何确定一个变量是否是关系的混杂因素；在这里，我们只需说
    *IceCreamSales* 不是 *SummerMonth* 和 *IcedCoffeeSales* 之间关系的混杂因素，这是我们感兴趣的关系。因此，我们可以简化我们的
    CD（[图 3-15](#a_collapsed_version_of_the_previous_cd)）。
- en: '![A collapsed version of the previous CD](Images/BEDA_0315.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![前一个 CD 的折叠版本](Images/BEDA_0315.png)'
- en: Figure 3-15\. A collapsed version of the previous CD
  id: totrans-100
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-15\. 前一个 CD 的折叠版本
- en: Similarly, if we were interested in the relationship between *SummerMonth* and
    *IceCreamSales* in [Figure 3-14](#a_cd_with_a_fork_and_a_chain), we could neglect
    *IcedCoffeeSales* but not *Temperature.*
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，如果我们对 [图 3-14](#a_cd_with_a_fork_and_a_chain) 中 *SummerMonth* 和 *IceCreamSales*
    之间的关系感兴趣，我们可以忽略 *IcedCoffeeSales*，但不能忽略 *Temperature*。
- en: Because forks are so important to causal analysis, we’ll sometimes want to represent
    them even when we don’t know the joint cause. When that’s the case, we’ll represent
    the unknown fork with a two-headed arrow ([Figure 3-16](#a_fork_with_an_unknown_joint_cause)).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 因为叉路对因果分析非常重要，有时我们会想要表示它们，即使我们不知道联合原因是什么。在这种情况下，我们将用一个双头箭头表示未知的叉路（[图 3-16](#a_fork_with_an_unknown_joint_cause)）。
- en: '![A fork with an unknown joint cause](Images/BEDA_0316.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![具有未知联合原因的叉路](Images/BEDA_0316.png)'
- en: Figure 3-16\. A fork with an unknown joint cause
  id: totrans-104
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-16\. 具有未知联合原因的叉路
- en: 'The two-headed arrow also looks like the two variables are causing each other.
    This is by design, and we’ll also use a two-headed arrow when we observe a correlation
    between two variables but we don’t know which is causing which. Thus, a two-headed
    arrow encompasses the three possible reasons why two variables A and B would appear
    correlated: A causes B, B causes A, and/or A and B share a cause. Sometimes we’ll
    use a two-headed arrow as a placeholder until we clarify the true reason; if we
    don’t care about the reason, we may simply retain the two-headed arrow in our
    final CD.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 双头箭头也看起来像两个变量互相导致。这是有意设计的，当我们观察到两个变量之间的相关性，但我们不知道哪个导致哪个时，我们也会使用双头箭头。因此，双头箭头包括两个变量
    A 和 B 会呈现相关的三个可能原因：A 导致 B，B 导致 A，和/或 A 和 B 共享一个原因。有时我们会使用双头箭头作为一个占位符，直到我们澄清真正的原因；如果我们不关心原因，我们可能会在最终的
    CD 中保留双头箭头。
- en: Colliders
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 碰撞器
- en: Very few things in the world have only one cause. When two or more variables
    cause the same outcome, the relationship creates a *collider*. Since C-Mart’s
    concession stand sells only two flavors of ice cream, chocolate and vanilla, a
    causal diagram representing taste and ice cream purchasing behavior would show
    that appetite for either flavor would cause past purchases of ice cream at the
    stand ([Figure 3-17](#cd_of_a_collider)).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 世界上很少有只有一个原因的事物。当两个或更多变量导致相同的结果时，关系就形成了一个*碰撞器*。由于 C-Mart 的小吃店只销售两种口味的冰淇淋，巧克力和香草，代表口味和购买行为的因果图会显示对任一口味的食欲都会导致在该店购买冰淇淋的过去经历（[图 3-17](#cd_of_a_collider)）。
- en: '![CD of a collider](Images/BEDA_0317.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![碰撞器的碰撞直径（CD）](Images/BEDA_0317.png)'
- en: Figure 3-17\. CD of a collider
  id: totrans-109
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-17\. 碰撞器的碰撞直径（CD）
- en: 'Colliders are a common occurrence, and they can also be an issue in data analysis.
    A collider is in a sense the opposite of a fork, and the problems with them are
    also symmetric: a fork is problematic if we *don’t control* for the joint cause
    whereas a collider is a problem if we *do control* for the joint effect. We’ll
    explore these issues further in [Chapter 5](ch05.xhtml#using_causal_diagrams_to_deconfound_da).'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 碰撞器是常见的现象，它们也可能是数据分析中的问题。碰撞器在某种意义上是分叉的对立面，与它们相关的问题也是对称的：如果我们*不控制*共同原因，那么分叉就会成为问题，而如果我们*控制*共同影响，碰撞器就会成为问题。我们将在[第
    5 章](ch05.xhtml#using_causal_diagrams_to_deconfound_da)中进一步探讨这些问题。
- en: To recap this section, chains, forks, and colliders represent the only three
    possible ways for three variables to be related to each other in a CD. They are
    not exclusive of each other, however, and it’s actually reasonably common to have
    three variables that exhibit all three structures at the same time, as was the
    case in our very first example ([Figure 3-18](#a_three_variable_cd_containing_a_chainc)).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 总结本节，链、分叉和碰撞器代表了因果图中三个变量之间可能的三种关系方式。然而，它们并非彼此互斥，事实上，在同一个因果图中同时展现这三种结构是相当常见的，正如我们在第一个例子中所看到的（[图 3-18](#a_three_variable_cd_containing_a_chainc)）。
- en: '![A three-variable CD containing a chain, a fork, and a collider at the same
    time](Images/BEDA_0318.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![同时包含链、分叉和碰撞器的三变量因果图](Images/BEDA_0318.png)'
- en: Figure 3-18\. A three-variable CD containing a chain, a fork, and a collider
    at the same time
  id: totrans-113
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-18\. 同时包含链、分叉和碰撞器的三变量因果图
- en: 'Here, *SummerMonth* influences *IceCreamSales* as well as *Temperature*, which
    itself influences *IceCreamSales*. The causal relationships at play are reasonably
    simple and easy to grasp, but this graph also contains all three types of basic
    relationships:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*SummerMonth* 影响 *IceCreamSales* 和 *Temperature*，而 *Temperature* 本身又影响 *IceCreamSales*。这里的因果关系相对简单易懂，但是这个图表也包含了所有三种基本关系类型：
- en: 'A chain: *SummerMonth* → *Temperature* → *IceCreamSales*'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个链：*SummerMonth* → *Temperature* → *IceCreamSales*
- en: A fork, with SummerMonth causing both *Temperature* and *IceCreamSales*
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个分叉，其中 *SummerMonth* 导致 *Temperature* 和 *IceCreamSales*
- en: A collider, with *IceCreamSales* being caused by both *Temperature* and *SummerMonth*
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个碰撞器，*IceCreamSales* 同时受 *Temperature* 和 *SummerMonth* 的影响
- en: Another thing to note in a situation like this one is that variables have more
    than one relationship with each other. For example, *SummerMonth* is the parent
    of *IceCreamSales* because there is an arrow going directly from the former to
    the latter (a direct relationship); but at the same time, *SummerMonth* is also
    indirectly an ancestor of *IceCreamSales* through the chain *SummerMonth → Temperature
    → IceCreamSales* (an indirect relationship). So you can see these are not exclusive!
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下需要注意的另一件事是，变量之间可能存在多于一种关系。例如，*SummerMonth* 是 *IceCreamSales* 的父变量，因为直接从前者到后者存在箭头（直接关系）；但与此同时，*SummerMonth*
    也通过链 *SummerMonth → Temperature → IceCreamSales*（间接关系）间接是 *IceCreamSales* 的祖先。所以你可以看到这些关系并不是排他的！
- en: While a CD is always made of these three structures, it is not static. A CD
    can be transformed by modifying the variables themselves as well as their relationships,
    as we’ll now see.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管一个因果图（CD）总是由这三种结构组成，但它并非静态的。通过修改变量本身及其关系，一个因果图可以被转换，我们现在就来看一下。
- en: Common Transformations of Causal Diagrams
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 因果图的常见转换
- en: Chains, forks, and colliders take the variables in a CD as given. But in the
    same way that a chain can be collapsed or expanded, variables can themselves be
    sliced or aggregated to “zoom” in and out of specific behaviors and categories.
    We may also decide to modify the arrows—for example, when we’re faced with otherwise
    intractable cycles.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 链、分叉和碰撞器假定因果图中的变量是给定的。但是，就像链可以收缩或扩展一样，变量本身也可以被切片或聚合以“缩放”到特定行为和类别中。我们也可以决定修改箭头，例如在面对其他无法处理的循环时。
- en: Slicing/Disaggregating Variables
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 切片/解构变量
- en: Forks and colliders are often created when you slice or disaggregate a variable
    to reveal its components. In a previous example, we looked at the relationship
    between *Temperature* and *DonutSales*, where *IcedCoffeeSales* was the mediator
    ([Figure 3-19](#the_chain_that_we_will_slice)).
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 当你切片或解构一个变量以揭示其组成部分时，分叉和碰撞器经常会被创建。在先前的例子中，我们看过 *Temperature* 和 *DonutSales*
    之间的关系，其中 *IcedCoffeeSales* 是中介者（[图 3-19](#the_chain_that_we_will_slice)）。
- en: '![The chain that we will slice](Images/BEDA_0319.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![我们将切片的链](Images/BEDA_0319.png)'
- en: Figure 3-19\. The chain that we will slice
  id: totrans-125
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-19\. 我们将切片的链
- en: 'But maybe we want to split *IcedCoffeeSales* by type to better understand demand
    dynamics. This is what I mean by “slicing” a variable. This is allowed per the
    rules of linear algebra, because we can express the total iced coffee sales as
    the sum of sales by type, say Americano and latte:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 但也许我们想要根据类型分割*IcedCoffeeSales*，以更好地理解需求动态。这就是我所说的“切片”变量。这是允许的线性代数规则，因为我们可以将总冰咖啡销量表达为按类型销量的总和，比如美式和拿铁：
- en: '*IcedCoffeeSales* = *IcedAmericanoSales* + *IcedLatteSales*'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '*IcedCoffeeSales* = *IcedAmericanoSales* + *IcedLatteSales*'
- en: Our CD would now become [Figure 3-20](#a_chain_where_the_mediator_has_been_sli),
    with a fork on the left and a collider on the right.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们的CD将成为[图 3-20](#a_chain_where_the_mediator_has_been_sli)，左侧有一个分叉，右侧有一个碰撞器。
- en: '![A chain where the mediator has been sliced](Images/BEDA_0320.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![一个链条，其中中介被切分了](Images/BEDA_0320.png)'
- en: Figure 3-20\. A chain where the mediator has been sliced
  id: totrans-130
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-20\. 一个链条，其中中介被切分了
- en: 'Each slice of the variable would now have its own equation:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，该变量的每个切片将有自己的方程式：
- en: '*IcedAmericanoSales* = *β[*TA*].Temperature*'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '*IcedAmericanoSales* = *β[*TA*].Temperature*'
- en: '*IcedLatteSales* = *β[TL].Temperature*'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '*IcedLatteSales* = *β[TL].Temperature*'
- en: 'Since the effect of *Temperature* is completely mediated by our *IcedCoffeeSales*
    slices, we can create a unified multiple regression for *DonutSales* as follows:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 由于*温度*的影响完全被我们的*IcedCoffeeSales*切片所中介，我们可以创建如下的统一多元回归用于*DonutSales*：
- en: '*DonutSales* = *β[IA].IcedAmericanoSales + β[IL].IcedLatteSales*'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '*DonutSales* = *β[IA].IcedAmericanoSales + β[IL].IcedLatteSales*'
- en: This would allow you to understand more finely what’s happening—should you plan
    for the same increase in sales in both types when temperature increases? Do they
    both have the same effect on *DonutSales* or should you try to favor one of them?
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这将使您能够更精细地了解发生了什么——当温度升高时，您是否应该计划这两种类型的销售增长？它们对*DonutSales*有相同的影响吗，还是您应该更青睐其中一种？
- en: Aggregating Variables
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 聚合变量
- en: As you may have guessed, slicing variables can be reversed, and more generally
    we can aggregate variables that have the same causes and effects. This can be
    used to aggregate and disaggregate data analysis by product, region, line of business,
    and so on. But it can also be used more loosely to represent important causal
    factors that are not precisely defined. For example, let’s say that *Age* and
    *Gender* both impact *TasteForVanilla* as well as the propensity to buy ice cream
    at C-Mart concession stands, *PurchasedIceCream* ([Figure 3-21](#age_and_gender_are_shown_separately)).
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你可能猜到的那样，切分变量是可以反转的，而且更一般地，我们可以聚合那些具有相同因果关系的变量。这可以用于按产品、地区、业务线等进行聚合和分解数据分析。但它也可以更宽泛地用于表示那些没有精确定义的重要因果因素。例如，假设*年龄*和*性别*都影响*香草味*以及在C-Mart便利店购买冰淇淋的倾向，*PurchasedIceCream*（[图
    3-21](#age_and_gender_are_shown_separately)）。
- en: '![Age and Gender are shown separately](Images/BEDA_0321.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![年龄和性别分开显示](Images/BEDA_0321.png)'
- en: Figure 3-21\. Age and Gender are shown separately
  id: totrans-140
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-21\. 年龄和性别分开显示
- en: Because *Age* and *Gender* have the same causal relationships, they can be aggregated
    into a *DemographicCharacteristics* variable ([Figure 3-22](#cd_where_age_and_gender_are_aggregated)).
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 因为*年龄*和*性别*具有相同的因果关系，它们可以被聚合成一个*人口特征*变量（[图 3-22](#cd_where_age_and_gender_are_aggregated)）。
- en: '![CD where Age and Gender are aggregated into a single variable](Images/BEDA_0322.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![CD，其中年龄和性别被聚合成单一变量](Images/BEDA_0322.png)'
- en: Figure 3-22\. CD where Age and Gender are aggregated into a single variable
  id: totrans-143
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-22\. CD，其中年龄和性别被聚合成单一变量
- en: In this case, we obviously don’t have a single column in our data called “Demographic
    Characteristics” or “Demographics”; we’re simply using that variable in our CD
    as a shortcut for a variety of variables that we may or may not want to explore
    in further detail later on. Let’s say that we want to run an A/B test and understand
    the causal relationships at hand. As we’ll see later, randomization can allow
    us to control for demographic factors so that we won’t have to include them in
    our analysis, but we might want to include them in our CD of the situation without
    randomization. If need be, we can always expand our diagram to accurately represent
    the demographic variables involved. Remember, however, that *any variable can
    be split, but only variables that have the same direct and indirect relationships
    can be aggregated.*
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们显然没有一个称为“人口特征”或“人口统计学”的单一列数据；我们只是在我们的CD中使用该变量作为一种简化，用于表示我们可能会或可能不会在以后深入探讨的各种变量。假设我们想要运行一项A/B测试并理解当前的因果关系。正如我们将在后面看到的那样，随机化可以使我们控制人口统计因素，这样我们就不必在分析中包含它们，但我们可能希望在没有随机化的情况下将它们包含在我们的CD中。如果有必要，我们总是可以扩展我们的图表以准确表示涉及的人口统计变量。然而，请记住，*任何变量都可以分割，但只有具有相同直接和间接关系的变量才可以聚合*。
- en: What About Cycles?
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 循环如何处理？
- en: In the three fundamental structures that we’ve seen, there has been only one
    arrow between two given boxes. More generally, it was not possible to reach the
    same variable twice by following the direction of arrows (e.g., A → B → C → A).
    A variable could be the effect of one variable and the cause of another, but it
    could not be at the same time the cause and the effect of one variable.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们看到的三种基本结构中，两个给定框之间只有一条箭头。更一般地说，不可能通过按箭头方向两次到达相同的变量（例如，A → B → C → A）。一个变量可能是另一个变量的效果和另一个变量的原因，但不能同时是一个变量的原因和效果。
- en: In real life, however, we often see variables that influence each other causally.
    This type of CD is called a *cycle*. Cycles can arise for a variety of reasons;
    two of the most common in behavioral data analysis are substitution effects and
    feedback loops. Fortunately, there are some workarounds that will allow you to
    deal with cycles when you encounter them.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在现实生活中，我们经常看到相互因果影响的变量。这种类型的CD被称为*循环*。循环可能由于多种原因而产生；在行为数据分析中最常见的两种是替代效应和反馈循环。幸运的是，当你遇到循环时，有一些解决方法可以帮助你应对。
- en: 'Understanding cycles: Substitution effects and feedback loops'
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 理解循环：替代效应和反馈循环
- en: 'Substitution effects are a cornerstone of economics theory: customers might
    *substitute* a product for another, depending on the products’ availability and
    price and the customers’ desire for variety. For example, customers coming to
    the C-Mart concession store might choose between iced coffee and hot coffee based
    not only on temperature but also on special promotions and how often they had
    coffee this week. Therefore, there is a causal relationship from purchases of
    iced coffee to purchases of hot coffee, and another causal relationship in the
    opposite direction ([Figure 3-23](#a_cd_with_a_substitution_effect_generat)).'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 替代效应是经济学理论的基石：顾客可能会根据产品的可用性和价格以及顾客对多样性的欲望来*替代*一种产品为另一种产品。例如，前来C-Mart便利店的顾客可能会根据不仅仅是温度，还包括特别促销以及本周喝咖啡的频率来选择冰咖啡或热咖啡。因此，从购买冰咖啡到购买热咖啡存在因果关系，反之亦然（[图 3-23](#a_cd_with_a_substitution_effect_generat)）。
- en: '![A CD with a substitution effect generating a cycle](Images/BEDA_0323.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![生成循环的替代效应CD](Images/BEDA_0323.png)'
- en: Figure 3-23\. A CD with a substitution effect generating a cycle
  id: totrans-151
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-23\. 生成循环的替代效应CD
- en: Note
  id: totrans-152
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: One thing to note is that the direction of the arrows shows the direction of
    causality (what is the cause and what is the effect), not the sign of the effect.
    In all of the CDs we looked at previously, the variables had a positive relationship
    where an increase in one caused an increase in the other. In this case, the relationships
    are negative, where an increase in one variable will cause a decrease in the other.
    The sign of the effect does not matter for causal diagrams, and a regression will
    be able to sort out the sign for the coefficient correctly as long as you correctly
    identify the relevant causal relationships.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的一点是箭头的方向显示了因果关系的方向（什么是原因，什么是结果），而不是效果的符号。在我们之前看过的所有因果图中，变量之间存在正相关关系，其中一个增加导致另一个增加。在这种情况下，关系是负的，其中一个变量的增加会导致另一个变量的减少。对于因果图来说，效果的符号并不重要，只要你正确地识别相关的因果关系，回归分析就能正确地排序系数的符号。
- en: Another common cycle is a feedback loop, where a person modifies their behavior
    in reaction to changes in the environment. For example, a store manager at C-Mart
    might keep an eye on the length of waiting lines and open new lines if the existing
    ones get too long, so that customers don’t give up and just leave ([Figure 3-24](#example_of_a_feedback_loop_generating_a)).
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个常见的循环是反馈环路，其中一个人根据环境变化调整他们的行为。例如，C-Mart的店长可能会关注等待队列的长度，如果现有的队列太长，会开设新的收银台，这样顾客就不会放弃并离开（[图 3-24](#example_of_a_feedback_loop_generating_a)）。
- en: '![Example of a feedback loop generating a cycle](Images/BEDA_0324.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![反馈环路生成循环的示例](Images/BEDA_0324.png)'
- en: Figure 3-24\. Example of a feedback loop generating a cycle
  id: totrans-156
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-24\. 反馈环路生成循环的示例
- en: Managing cycles
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 管理循环
- en: Cycles reflect situations that are often complex to study and manage, which
    is why a whole field of research, called *systems thinking*, has sprouted for
    that purpose.^([2](ch03.xhtml#ch01fn7)) Complex mathematical methods, such as
    structural equation modeling, have been developed to deal accurately with cycles,
    but their analysis would take us beyond the scope of this book. I would be remiss,
    however, if I didn’t give you any solution, so I’ll mention two rules of thumb
    that should keep you from getting stuck with cycles.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 循环反映了通常复杂的研究和管理情况，因此专门涉及这一领域的研究，称为*系统思维*，已经为此目的而兴起。（[2](ch03.xhtml#ch01fn7)）为了准确处理循环，已经开发了复杂的数学方法，如结构方程建模，但是它们的分析超出了本书的范围。然而，如果我不给出任何解决方案，那就不尽职责，因此我将提到两个经验法则，这应该能避免你被循环困扰。
- en: The first one is to pay close attention to timing. In almost all cases, it takes
    some time for one variable to influence another, which means you can “break the
    cycle” and turn it into an “acyclical” CD, i.e., a CD without cycles (which you
    can then analyze with the tools presented in this book), by looking at your data
    at a more granular level of time. For example, let’s say that it takes 15 minutes
    for a store manager to react to an increasing waiting time by getting new lines
    open, and it similarly takes 15 minutes for customers to adjust their perception
    of waiting time. In that case, by clarifying the temporal order of things, we
    can split the waiting time variable in our CD ([Figure 3-25](#breaking_a_feedback_loop_into_time_incr)).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 第一点是要密切关注时间。在几乎所有情况下，一个变量影响另一个变量需要一定的时间，这意味着你可以通过更细致的时间粒度来观察数据，从而“打破循环”，将其转变为“非循环”的因果图，即没有循环的因果图（然后可以用本书介绍的工具进行分析）。例如，假设店长在等待时间增加后需要15分钟来开新的收银台，而顾客调整他们的等待时间感知也需要15分钟。在这种情况下，通过澄清事物的时间顺序，我们可以在我们的因果图中分割等待时间变量（[图 3-25](#breaking_a_feedback_loop_into_time_incr)）。
- en: '![Breaking a feedback loop into time increments](Images/BEDA_0325.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![将反馈环路分解为时间增量](Images/BEDA_0325.png)'
- en: Figure 3-25\. Breaking a feedback loop into time increments
  id: totrans-161
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-25\. 将反馈环路分解为时间增量
- en: 'I’ll explain this CD one piece at a time. On the left, we have an arrow from
    average waiting time to number of customers waiting:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我将一点一点地解释这个因果图。在左侧，我们有一个从平均等待时间指向等待顾客数量的箭头：
- en: '*NbCustomersWaiting(t* + 15mn) = *β[1].AvgWaitingTime(t)*'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '*NbCustomersWaiting(t* + 15mn) = *β[1].AvgWaitingTime(t)*'
- en: This means that the number of customers waiting at, say, 9:15 a.m. would be
    expressed as a function of the average waiting time at 9:00 a.m. Then the number
    of customers waiting at 9:30 a.m. would have the same relation to the average
    waiting time at 9:15 a.m. and so on.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，例如，上午9:15等待的顾客数量将以上午9:00的平均等待时间作为函数表达。然后，上午9:30等待的顾客数量将与上午9:15的平均等待时间有相同的关系，依此类推。
- en: 'Similarly, on the right, we have an arrow from average waiting time to number
    of lines open:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，在右侧，我们有一个从平均等待时间到开放的排队线的箭头：
- en: '*NbLinesOpen(t* + 15mn) = *β[2].AvgWaitingTime(t)*'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '*NbLinesOpen(t* + 15mn) = *β[2].AvgWaitingTime(t)*'
- en: This means that the number of lines open at 9:15 a.m. would be expressed as
    a function of the average waiting time at 9:00 a.m. Then the number of lines open
    at 9:30 a.m. would have the same relation to the average waiting time at 9:15
    a.m. and so on.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，上午9:15开放的排队线数量将以上午9:00的平均等待时间作为函数表达。然后，上午9:30开放的排队线将与上午9:15的平均等待时间有相同的关系，依此类推。
- en: 'Then in the middle, we have causal arrows from the number of customers waiting
    and from the number of lines open to the average waiting time. Assuming linear
    relationships here for the sake of simplicity, this would translate into the following
    equation:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 然后在中间，我们有从等待顾客数量和从开放的收银台数量到平均等待时间的因果箭头。为了简单起见，在这里假设线性关系，这将转化为以下方程：
- en: '*AvgWaitingTime(t)* = *β*[3].*NbCustomersWaiting(t)* + *β*[4].*NbLinesOpen(t)*'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '*AvgWaitingTime(t)* = *β*[3].*NbCustomersWaiting(t)* + *β*[4].*NbLinesOpen(t)*'
- en: Note
  id: totrans-170
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: In reality, the assumption of linear relationships is *very* unlikely to be
    true in this case. Specific models have been developed for queues, or for time-to-event
    variables (e.g., survival analysis). These models are part of the broader category
    of GLMs, and as such, a good rule of thumb is that for our purposes they’ll behave
    like logistic regressions.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，在这种情况下假设线性关系是*非常*不可能成立的。对于队列或时间到事件变量（例如生存分析），已经开发了特定的模型。这些模型属于更广泛的广义线性模型类别，因此，我们的经验法则是它们在我们的目的下表现得像逻辑回归。
- en: This means that the average waiting time for customers reaching the checkout
    lines at 9:15 a.m. depends on the number of customers already present and the
    number of checkout lines open at 9:15 a.m. Then the average waiting time for customers
    reaching the checkout lines at 9:30 a.m. depends on the number of customers already
    present and the number of checkout lines open at 9:30 a.m. and so on.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，顾客在上午9:15到达收银台排队时的平均等待时间取决于9:15时已经在场的顾客数量以及9:15时开放的收银台数量。然后，顾客在上午9:30到达收银台排队时的平均等待时间取决于9:30时已经在场的顾客数量以及9:30时开放的收银台数量，依此类推。
- en: By breaking down variables into time increments, we have been able to create
    a CD where there is no cycle in the strict sense. We can estimate the three preceding
    linear regression equations without introducing any circular logic.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将变量分解为时间增量，我们已经能够创建一个没有严格意义上的循环的CD。我们可以在不引入任何循环逻辑的情况下估计前述三个线性回归方程。
- en: The second rule of thumb for dealing with cycles is to simplify your CD and
    to keep only the arrows along the causal path you are most interested in. Feedback
    effects (where a variable influences the variable that just influenced it) are
    generally smaller, and often much smaller, than the first effect and can be ignored
    as a first approximation.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 处理周期的第二条经验法则是简化你的CD，并只保留你最感兴趣的因果路径上的箭头。反馈效应（其中一个变量影响刚刚影响它的变量）通常较小，往往比第一效应小得多，可以作为第一近似忽略。
- en: In our example of iced and hot coffee, you might be worried that the increase
    in sales of iced coffee when it is hot will decrease the sale of hot coffee; this
    is a reasonable concern that you should investigate. However, it’s unlikely that
    the decrease in sales of hot coffee would in turn trigger a further increase in
    sales of iced coffee, and you can ignore that feedback effect in your CD ([Figure 3-26](#simplifying_a_cd_by_neglecting_certain)).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们冰咖啡和热咖啡的例子中，当天气炎热时冰咖啡的销售增加可能会减少热咖啡的销售，这是一个你应该调查的合理担忧。然而，不太可能热咖啡销售的减少会进一步触发冰咖啡销售的增加，因此你可以在你的CD中忽略这种反馈效应（[图 3-26](#simplifying_a_cd_by_neglecting_certain)）。
- en: '![Simplifying a CD by neglecting certain relationships](Images/BEDA_0326.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![简化CD图表，忽略某些关系](Images/BEDA_0326.png)'
- en: Figure 3-26\. Simplifying a CD by neglecting certain relationships
  id: totrans-177
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-26\. 简化CD图表，忽略某些关系
- en: In [Figure 3-26](#simplifying_a_cd_by_neglecting_certain), we delete the arrow
    from purchases of hot coffee to purchases of iced coffee and ignore that relationship
    as a reasonable approximation.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图3-26](#simplifying_a_cd_by_neglecting_certain)中，我们删除了从热咖啡购买到冰咖啡购买的箭头，并将该关系视为一个合理的近似。
- en: Once again, this is just a rule of thumb, and certainly not a blanket invitation
    to disregard cycles and feedback effects. These should be represented fully in
    your complete CD to guide future analyses.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，这只是一个经验法则，并绝对不是对忽略循环和反馈效应的一揽子邀请。这些应该在您的完整因果图中完全表示，以指导未来的分析。
- en: Paths
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 路径
- en: 'Having seen the various ways variables can interact, we can now introduce one
    last concept that encompasses all of them: *paths*. We say that there is a path
    between two variables *if there are arrows between them, regardless of the direction
    of the arrows, and if no variable appears twice along the way.* Let’s see what
    that looks like in a CD we have seen before ([Figure 3-27](#paths_in_a_causal_diagram)).'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在看到各种变量如何相互作用之后，我们现在可以介绍最后一个涵盖所有内容的概念：*路径*。我们说两个变量之间存在路径*如果它们之间有箭头连接，无论箭头的方向如何，并且路径中没有变量重复出现*。让我们看看我们之前见过的因果图（[图3-27](#paths_in_a_causal_diagram)）中的路径是什么样子的。
- en: '![Paths in a causal diagram](Images/BEDA_0327.png)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![因果图中的路径](Images/BEDA_0327.png)'
- en: Figure 3-27\. Paths in a causal diagram
  id: totrans-183
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-27. 因果图中的路径
- en: 'In the previous CD, there are two paths from *SummerMonth* to *IcedCoffeeSales*:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的因果图中，从*SummerMonth*到*IcedCoffeeSales*有两条路径：
- en: One path along the chain *SummerMonth* → *Temperature* → *IcedCoffeeSales*
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一条沿着链的路径*SummerMonth* → *Temperature* → *IcedCoffeeSales*
- en: A second path through *IceCreamSales*, *SummerMonth* → *IceCreamSales* ← *Temperature*
    → *IcedCoffeeSales*
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二条路径通过*IceCreamSales*，*SummerMonth* → *IceCreamSales* ← *Temperature* → *IcedCoffeeSales*
- en: 'This means that a chain is a path, but so are a fork or a collider! Also note
    that two different paths between two variables can also share some arrows, as
    long as there is at least one difference between them, as is the case here: the
    arrow from *Temperature* to *IcedCoffeeSales* appears in both paths.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着一个链是一条路径，但分叉或碰撞器也是如此！还要注意，两个不同的变量之间可能会有多条路径共享一些箭头，只要它们之间至少有一个差异，就像这里的情况一样：从*Temperature*到*IcedCoffeeSales*的箭头出现在这两条路径中。
- en: 'However, the following is not a valid path between *Temperature* and *IcedCoffeeSales*
    because *Temperature* appears twice:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，以下路径不是*Temperature*和*IcedCoffeeSales*之间的有效路径，因为*Temperature*出现了两次：
- en: '*Temperature* ← *SummerMonth* → *IceCreamSales* ← *Temperature* → *IcedCoffeeSales*'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Temperature* ← *SummerMonth* → *IceCreamSales* ← *Temperature* → *IcedCoffeeSales*'
- en: One consequence of these definitions is that if you pick two different variables
    in a CD, there is always at least one path between them. The definition of paths
    may seem so broad that it is useless, but as we’ll see in [Chapter 5](ch05.xhtml#using_causal_diagrams_to_deconfound_da),
    paths will actually play a crucial role in identifying confounders in a CD.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这些定义的一个结果是，如果你在一个因果图中选择两个不同的变量，它们之间总会至少有一条路径。路径的定义可能看起来如此宽泛以至于没有用处，但正如我们将在[第5章](ch05.xhtml#using_causal_diagrams_to_deconfound_da)中看到的那样，路径实际上将在识别因果图中的混杂变量中发挥关键作用。
- en: Conclusion
  id: totrans-191
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: Correlation is not causation because confounders can introduce bias in our analyses.
    Unfortunately, as we’ve seen through examples, simply throwing all available variables
    and the kitchen sink into a regression is not sufficient to resolve confounding.
    Worse, controlling on the wrong variables can introduce spurious correlations
    and create new biases.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 相关性并非因果关系，因为混杂变量可能会在我们的分析中引入偏倚。不幸的是，正如我们通过例子所看到的那样，简单地将所有可用变量和乱七八糟的变量放入回归中并不足以解决混杂问题。更糟糕的是，控制错误的变量可能会引入虚假相关性并产生新的偏倚。
- en: As a first step toward unbiased regression, I introduced a tool known as causal
    diagrams. CDs may be the best analytical tool you’ve never heard of. They can
    be used to represent our intuitions about causal relationships in the real world,
    as well as causal relationships between variables in our data; but they are most
    powerful as a bridge between the two, allowing us to connect our intuition and
    expert knowledge to observed data, and vice versa.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 作为朝向无偏回归的第一步，我介绍了一种称为因果图的工具。因果图可能是你从未听说过的最佳分析工具。它们可以用来表示我们对真实世界中因果关系的直觉，以及我们数据中变量之间的因果关系；但最强大的是作为将我们的直觉和专家知识与观察数据相连接的桥梁，反之亦然。
- en: 'CDs can get convoluted and complex, but they are based on three simple building
    blocks: chains, forks, and colliders. They can also be collapsed or expanded,
    sliced, or aggregated, according to simple rules that are consistent with linear
    algebra. If you want to know more about CDs, Pearl and Mackenzie (2018) is a very
    readable and enjoyable book-length introduction.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: CDs 可以变得错综复杂，但它们基于三个简单的构建模块：链、分叉和碰撞器。根据与线性代数一致的简单规则，它们还可以折叠或扩展、切片或聚合。如果你想了解更多关于
    CDs 的内容，Pearl 和 Mackenzie（2018）是一本非常易读且令人愉快的书面介绍。
- en: The full power of CDs will become apparent in [Chapter 5](ch05.xhtml#using_causal_diagrams_to_deconfound_da),
    where we’ll see that they allow us to optimally handle confounders in regression,
    even with nonexperimental data. But CDs are also helpful more broadly, to help
    us think better about data. In the next chapter, as we get into cleaning and prepping
    data for analysis, they will allow us to mitigate biases in our data prior to
    any analysis. This will give you the opportunity to get more familiar with CDs
    in a simple setting.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: CDs 的全部威力将在 [第五章](ch05.xhtml#using_causal_diagrams_to_deconfound_da) 中显现，我们将看到它们允许我们在回归中最优地处理混杂因素，即使是非实验数据。但
    CDs 在更广泛的范围内也很有帮助，帮助我们更好地思考数据。在接下来的章节中，当我们开始清理和准备数据进行分析时，它们将允许我们在分析之前减少数据中的偏差。这将为你提供在简单环境中更加熟悉
    CDs 的机会。
- en: ^([1](ch03.xhtml#idm45968167675832-marker)) The most common way to represent
    unobserved variables in CDs is with ovals instead of rectangles.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](ch03.xhtml#idm45968167675832-marker)) 在 CDs 中，表示未观察变量最常见的方法是使用椭圆形而不是矩形。
- en: '^([2](ch03.xhtml#ch01fn7-marker)) Interested readers are referred to *Thinking
    in Systems: A Primer* by Meadows and Wright (2008), as well as *The Fifth Discipline:
    The Art & Practice of the Learning Organization* by Senge (2010).'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: ^([2](ch03.xhtml#ch01fn7-marker)) 对感兴趣的读者推荐阅读 Meadows 和 Wright（2008）的《系统思维入门》，以及
    Senge（2010）的《第五项修炼：学习型组织的艺术与实践》。
