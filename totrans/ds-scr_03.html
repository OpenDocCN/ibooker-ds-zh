<html><head></head><body><section data-pdf-bookmark="Chapter 2. A Crash Course in Python" data-type="chapter" epub:type="chapter"><div class="chapter" id="python">&#13;
<h1><span class="label">Chapter 2. </span>A Crash Course in Python</h1>&#13;
&#13;
<blockquote data-type="epigraph" epub:type="epigraph">&#13;
<p>People are still crazy about Python after twenty-five years, which I find hard to believe.</p>&#13;
<p data-type="attribution">Michael Palin</p>&#13;
</blockquote>&#13;
&#13;
<p>All new employees at DataSciencester are required to go through new employee orientation, the most interesting part of which is a crash course in Python.</p>&#13;
&#13;
<p>This is not a comprehensive Python tutorial but instead is intended to highlight the parts of the language that will be most important to us (some of which are often not the focus of Python tutorials).&#13;
If you have never used Python before, you probably want to supplement this with&#13;
some sort of beginner tutorial.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Zen of Python" data-type="sect1"><div class="sect1" id="idm45635772562664">&#13;
<h1>The Zen of Python</h1>&#13;
&#13;
<p>Python<a data-primary="Python" data-secondary="Zen of Python" data-type="indexterm" id="idm45635772561096"/><a data-primary="Zen of Python" data-type="indexterm" id="idm45635772560088"/> has a somewhat Zen <a href="http://legacy.python.org/dev/peps/pep-0020/">description of its design principles</a>, which you can also find inside the Python interpreter itself by typing “import this.”</p>&#13;
&#13;
<p>One of the most discussed of these is:</p>&#13;
<blockquote>&#13;
<p>There should be one—and preferably only one—obvious way to do it.</p></blockquote>&#13;
&#13;
<p>Code written in accordance with this “obvious” way (which may not be obvious at all to a newcomer) is often described as “Pythonic.”  Although this is not a book about Python, we will occasionally contrast Pythonic and non-Pythonic ways of accomplishing the same things, and we will generally favor Pythonic solutions to our problems.</p>&#13;
&#13;
<p>Several others touch on aesthetics:</p>&#13;
<blockquote>&#13;
<p>Beautiful is better than ugly.&#13;
Explicit is better than implicit.&#13;
Simple is better than complex.</p></blockquote>&#13;
&#13;
<p>and represent ideals that we will strive for in our code.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Getting Python" data-type="sect1"><div class="sect1" id="idm45635772554888">&#13;
<h1>Getting Python</h1>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>As instructions about how to install things can change,&#13;
while printed books cannot, up-to-date instructions&#13;
on how to install Python can be found in&#13;
<a href="https://github.com/joelgrus/data-science-from-scratch/blob/master/INSTALL.md">the book’s GitHub repo</a>.</p>&#13;
&#13;
<p>If the ones printed here don’t work for you, check those.</p>&#13;
</div>&#13;
&#13;
<p>You<a data-primary="Python" data-secondary="downloading and installing" data-type="indexterm" id="idm45635772550952"/><a data-primary="Anaconda Python distribution" data-type="indexterm" id="idm45635772549976"/> can download Python from <a href="https://www.python.org/">Python.org</a>.&#13;
But if you don’t already have Python, I recommend instead installing the&#13;
<a href="https://www.anaconda.com/download/">Anaconda</a>&#13;
distribution, which already includes most of the libraries that you need to do data science.</p>&#13;
&#13;
<p>When I wrote the first version of <em>Data Science from Scratch</em>,&#13;
Python 2.7 was still the preferred version of most data scientists.&#13;
Accordingly, the first edition of the book was based on Python 2.7.</p>&#13;
&#13;
<p>In<a data-primary="Python" data-secondary="versions" data-type="indexterm" id="idm45635772526664"/> the last several years, however, pretty much everyone who counts&#13;
has migrated to Python 3. Recent versions of Python have many features&#13;
that make it easier to write clean code, and we’ll be taking ample advantage&#13;
of features that are only available in Python 3.6 or later. This means that&#13;
you should get Python 3.6 or later.&#13;
(In addition, many useful libraries are ending support for Python 2.7,&#13;
 which is another reason to switch.)</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Virtual Environments" data-type="sect1"><div class="sect1" id="virtual_environments">&#13;
<h1>Virtual Environments</h1>&#13;
&#13;
<p>Starting<a data-primary="Python" data-secondary="virtual environments" data-type="indexterm" id="idm45635772523096"/><a data-primary="virtual environments" data-type="indexterm" id="idm45635772522088"/> in the next chapter, we’ll be using the matplotlib library to generate plots and charts.&#13;
This library is not a core part of Python; you have to install it yourself.&#13;
Every data science project you do will require some combination of external libraries,&#13;
sometimes with specific versions that differ from the specific versions you used for&#13;
other projects. If you were to have a single Python installation, these libraries would&#13;
conflict and cause you all sorts of problems.</p>&#13;
&#13;
<p>The standard solution is to use <em>virtual environments</em>, which are sandboxed Python environments that maintain their own versions of Python libraries (and, depending on how you set up the environment, of Python itself).</p>&#13;
&#13;
<p>I recommended you install the Anaconda Python distribution, so in this section I’m going to explain how Anaconda’s environments work.&#13;
If you are not using Anaconda, you can either use the built-in&#13;
<a href="https://docs.python.org/3/library/venv.html"><code>venv</code></a> module&#13;
or install&#13;
<a href="https://virtualenv.pypa.io/en/latest/"><code>virtualenv</code></a>. In which case&#13;
you should follow their instructions instead.</p>&#13;
&#13;
<p>To create an (Anaconda) virtual environment, you just do the following:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="c"># create a Python 3.6 environment named "dsfs"</code>&#13;
conda create -n dsfs <code class="nv">python</code><code class="o">=</code>3.6</pre>&#13;
&#13;
<p>Follow the prompts, and you’ll have a virtual environment called “dsfs,” with the instructions:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="c">#</code>&#13;
<code class="c"># To activate this environment, use:</code>&#13;
<code class="c"># &gt; source activate dsfs</code>&#13;
<code class="c">#</code>&#13;
<code class="c"># To deactivate an active environment, use:</code>&#13;
<code class="c"># &gt; source deactivate</code>&#13;
<code class="c">#</code></pre>&#13;
&#13;
<p>As indicated, you then activate the environment using:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nb">source </code>activate dsfs</pre>&#13;
&#13;
<p>at which point your command prompt should change to indicate the active environment. On my MacBook the prompt now looks like:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="o">(</code>dsfs<code class="o">)</code> ip-10-0-0-198:~ joelg<code class="err">$</code></pre>&#13;
&#13;
<p>As long as this environment is active, any libraries you install will be installed only in the dsfs environment. Once you finish this book and go on to your own projects, you should create your own environments for them.</p>&#13;
&#13;
<p>Now<a data-primary="IPython shell" data-type="indexterm" id="idm45635771009704"/> that you have your environment, it’s worth installing <a href="http://ipython.org/">IPython</a>,&#13;
which is a full-featured Python shell:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting">python -m pip install ipython</pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Anaconda<a data-primary="conda package manager" data-type="indexterm" id="idm45635768985496"/><a data-primary="pip package manager" data-type="indexterm" id="idm45635782413912"/> comes with its own package manager, <code>conda</code>,&#13;
but you can also just use the standard Python package manager <code>pip</code>,&#13;
which is what we’ll be doing.</p>&#13;
</div>&#13;
&#13;
<p>The rest of this book will assume that you have created&#13;
and activated such a Python 3.6 virtual environment&#13;
(although you can call it whatever you want),&#13;
and later chapters may rely on the libraries&#13;
that I told you to install in earlier chapters.</p>&#13;
&#13;
<p>As a matter of good discipline, you should always work in a virtual environment,&#13;
and never using the “base” Python installation.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Whitespace Formatting" data-type="sect1"><div class="sect1" id="idm45635774803080">&#13;
<h1>Whitespace Formatting</h1>&#13;
&#13;
<p>Many<a data-primary="Python" data-secondary="whitespace formatting" data-type="indexterm" id="idm45635768597304"/><a data-primary="whitespace formatting" data-type="indexterm" id="idm45635771054712"/> languages use curly braces to delimit blocks of code.  Python uses indentation:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># The pound sign marks the start of a comment. Python itself</code>&#13;
<code class="c1"># ignores the comments, but they're helpful for anyone reading the code.</code>&#13;
<code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">]:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">i</code><code class="p">)</code>                    <code class="c1"># first line in "for i" block</code>&#13;
    <code class="k">for</code> <code class="n">j</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">]:</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="n">j</code><code class="p">)</code>                <code class="c1"># first line in "for j" block</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="n">i</code> <code class="o">+</code> <code class="n">j</code><code class="p">)</code>            <code class="c1"># last line in "for j" block</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">i</code><code class="p">)</code>                    <code class="c1"># last line in "for i" block</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"done looping"</code><code class="p">)</code></pre>&#13;
&#13;
<p>This makes Python code very readable, but it also means that you have to be very careful with your formatting.</p>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>Programmers<a data-primary="indentation, tabs versus spaces" data-type="indexterm" id="idm45635768166872"/> will often argue over whether to use tabs or spaces for indentation.&#13;
For many languages it doesn’t matter that much; however, Python considers tabs&#13;
and spaces different indentation and will not be able to run your code if you&#13;
mix the two. When writing Python you should always use spaces, never tabs.&#13;
(If you write code in an editor you can configure it so that the Tab key just inserts spaces.)</p>&#13;
</div>&#13;
&#13;
<p>Whitespace is ignored inside parentheses and brackets, which can be helpful for long-winded computations:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">long_winded_computation</code> <code class="o">=</code> <code class="p">(</code><code class="mi">1</code> <code class="o">+</code> <code class="mi">2</code> <code class="o">+</code> <code class="mi">3</code> <code class="o">+</code> <code class="mi">4</code> <code class="o">+</code> <code class="mi">5</code> <code class="o">+</code> <code class="mi">6</code> <code class="o">+</code> <code class="mi">7</code> <code class="o">+</code> <code class="mi">8</code> <code class="o">+</code> <code class="mi">9</code> <code class="o">+</code> <code class="mi">10</code> <code class="o">+</code> <code class="mi">11</code> <code class="o">+</code> <code class="mi">12</code> <code class="o">+</code>&#13;
                           <code class="mi">13</code> <code class="o">+</code> <code class="mi">14</code> <code class="o">+</code> <code class="mi">15</code> <code class="o">+</code> <code class="mi">16</code> <code class="o">+</code> <code class="mi">17</code> <code class="o">+</code> <code class="mi">18</code> <code class="o">+</code> <code class="mi">19</code> <code class="o">+</code> <code class="mi">20</code><code class="p">)</code></pre>&#13;
&#13;
<p>and for making code easier to read:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">list_of_lists</code> <code class="o">=</code> <code class="p">[[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code> <code class="p">[</code><code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">],</code> <code class="p">[</code><code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]]</code>&#13;
&#13;
<code class="n">easier_to_read_list_of_lists</code> <code class="o">=</code> <code class="p">[[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code>&#13;
                                <code class="p">[</code><code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">],</code>&#13;
                                <code class="p">[</code><code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]]</code></pre>&#13;
&#13;
<p>You can also use a backslash to indicate that a statement&#13;
continues onto the next line, although we’ll rarely do this:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">two_plus_three</code> <code class="o">=</code> <code class="mi">2</code> <code class="o">+</code> \&#13;
                 <code class="mi">3</code></pre>&#13;
&#13;
<p>One consequence of whitespace formatting is that it can be hard to copy and paste code into the Python shell. For example, if you tried to paste the code:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">]:</code>&#13;
&#13;
    <code class="c1"># notice the blank line</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">i</code><code class="p">)</code></pre>&#13;
&#13;
<p>into the ordinary Python shell, you would receive the complaint:</p>&#13;
&#13;
<pre data-type="programlisting">IndentationError: expected an indented block</pre>&#13;
&#13;
<p>because the interpreter thinks the blank line signals the end of the <code>for</code> loop’s block.</p>&#13;
&#13;
<p>IPython has a magic function called <code>%paste</code>, which correctly pastes whatever is on your clipboard, whitespace and all. This alone is a good reason to use IPython.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Modules" data-type="sect1"><div class="sect1" id="idm45635769964952">&#13;
<h1>Modules</h1>&#13;
&#13;
<p>Certain<a data-primary="Python" data-secondary="modules" data-type="indexterm" id="idm45635767947512"/><a data-primary="modules" data-type="indexterm" id="idm45635767946504"/> features of Python are not loaded by default. These include both features that are included as part of the language as well as third-party features that you download yourself.  In order to use these features, you’ll need to <code>import</code> the modules that contain them.</p>&#13;
&#13;
<p>One approach is to simply <code>import</code> the module itself:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">import</code> <code class="nn">re</code>&#13;
<code class="n">my_regex</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">compile</code><code class="p">(</code><code class="s2">"[0-9]+"</code><code class="p">,</code> <code class="n">re</code><code class="o">.</code><code class="n">I</code><code class="p">)</code></pre>&#13;
&#13;
<p>Here, <code>re</code> is the module containing functions and constants for working with regular expressions.  After this type of <code>import</code> you must prefix those functions with <code>re.</code> in order to access them.</p>&#13;
&#13;
<p>If you already had a different <code>re</code> in your code, you could use an alias:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">import</code> <code class="nn">re</code> <code class="kn">as</code> <code class="nn">regex</code>&#13;
<code class="n">my_regex</code> <code class="o">=</code> <code class="n">regex</code><code class="o">.</code><code class="n">compile</code><code class="p">(</code><code class="s2">"[0-9]+"</code><code class="p">,</code> <code class="n">regex</code><code class="o">.</code><code class="n">I</code><code class="p">)</code></pre>&#13;
&#13;
<p>You might also do this if your module has an unwieldy name or if you’re going to be typing it a lot.&#13;
For example, a standard convention when visualizing data with matplotlib is:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">import</code> <code class="nn">matplotlib.pyplot</code> <code class="kn">as</code> <code class="nn">plt</code>&#13;
&#13;
<code class="n">plt</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="o">...</code><code class="p">)</code></pre>&#13;
&#13;
<p>If you need a few specific values from a module, you can import them explicitly and use them without qualification:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code><code class="p">,</code> <code class="n">Counter</code>&#13;
<code class="n">lookup</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">int</code><code class="p">)</code>&#13;
<code class="n">my_counter</code> <code class="o">=</code> <code class="n">Counter</code><code class="p">()</code></pre>&#13;
&#13;
<p>If you were a bad person, you could import the entire contents of a module into your namespace, which might inadvertently overwrite variables you’ve already defined:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">match</code> <code class="o">=</code> <code class="mi">10</code>&#13;
<code class="kn">from</code> <code class="nn">re</code> <code class="kn">import</code> <code class="o">*</code>    <code class="c1"># uh oh, re has a match function</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">match</code><code class="p">)</code>        <code class="c1"># "&lt;function match at 0x10281e6a8&gt;"</code></pre>&#13;
&#13;
<p>However, since you are not a bad person, you won’t ever do this.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Functions" data-type="sect1"><div class="sect1" id="idm45635767947880">&#13;
<h1>Functions</h1>&#13;
&#13;
<p>A<a data-primary="Python" data-secondary="functions" data-type="indexterm" id="idm45635767787368"/><a data-primary="functions" data-type="indexterm" id="idm45635767786360"/> function is a rule for taking zero or more inputs and returning a corresponding output.  In Python, we typically define functions using <code>def</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">double</code><code class="p">(</code><code class="n">x</code><code class="p">):</code>&#13;
    <code class="sd">"""</code>&#13;
<code class="sd">    This is where you put an optional docstring that explains what the</code>&#13;
<code class="sd">    function does. For example, this function multiplies its input by 2.</code>&#13;
<code class="sd">    """</code>&#13;
    <code class="k">return</code> <code class="n">x</code> <code class="o">*</code> <code class="mi">2</code></pre>&#13;
&#13;
<p>Python<a data-primary="first-class functions" data-type="indexterm" id="idm45635767744216"/> functions are <em>first-class</em>, which means that we can assign them to variables and pass them into functions just like any other arguments:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">apply_to_one</code><code class="p">(</code><code class="n">f</code><code class="p">):</code>&#13;
    <code class="sd">"""Calls the function f with 1 as its argument"""</code>&#13;
    <code class="k">return</code> <code class="n">f</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>&#13;
&#13;
<code class="n">my_double</code> <code class="o">=</code> <code class="n">double</code>             <code class="c1"># refers to the previously defined function</code>&#13;
<code class="n">x</code> <code class="o">=</code> <code class="n">apply_to_one</code><code class="p">(</code><code class="n">my_double</code><code class="p">)</code>    <code class="c1"># equals 2</code></pre>&#13;
&#13;
<p>It is also easy to create short anonymous functions, or <em>lambdas</em>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">y</code> <code class="o">=</code> <code class="n">apply_to_one</code><code class="p">(</code><code class="k">lambda</code> <code class="n">x</code><code class="p">:</code> <code class="n">x</code> <code class="o">+</code> <code class="mi">4</code><code class="p">)</code>      <code class="c1"># equals 5</code></pre>&#13;
&#13;
<p>You can assign lambdas to variables, although most people will tell you that you should just use <code>def</code> instead:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">another_double</code> <code class="o">=</code> <code class="k">lambda</code> <code class="n">x</code><code class="p">:</code> <code class="mi">2</code> <code class="o">*</code> <code class="n">x</code>       <code class="c1"># don't do this</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">another_double</code><code class="p">(</code><code class="n">x</code><code class="p">):</code>&#13;
    <code class="sd">"""Do this instead"""</code>&#13;
    <code class="k">return</code> <code class="mi">2</code> <code class="o">*</code> <code class="n">x</code></pre>&#13;
&#13;
<p>Function parameters can also be given default arguments, which only need to be specified when you want a value other than the default:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">my_print</code><code class="p">(</code><code class="n">message</code> <code class="o">=</code> <code class="s2">"my default message"</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">message</code><code class="p">)</code>&#13;
&#13;
<code class="n">my_print</code><code class="p">(</code><code class="s2">"hello"</code><code class="p">)</code>   <code class="c1"># prints 'hello'</code>&#13;
<code class="n">my_print</code><code class="p">()</code>          <code class="c1"># prints 'my default message'</code></pre>&#13;
&#13;
<p>It is sometimes useful to specify arguments by name:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">full_name</code><code class="p">(</code><code class="n">first</code> <code class="o">=</code> <code class="s2">"What's-his-name"</code><code class="p">,</code> <code class="n">last</code> <code class="o">=</code> <code class="s2">"Something"</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">first</code> <code class="o">+</code> <code class="s2">" "</code> <code class="o">+</code> <code class="n">last</code>&#13;
&#13;
<code class="n">full_name</code><code class="p">(</code><code class="s2">"Joel"</code><code class="p">,</code> <code class="s2">"Grus"</code><code class="p">)</code>     <code class="c1"># "Joel Grus"</code>&#13;
<code class="n">full_name</code><code class="p">(</code><code class="s2">"Joel"</code><code class="p">)</code>             <code class="c1"># "Joel Something"</code>&#13;
<code class="n">full_name</code><code class="p">(</code><code class="n">last</code><code class="o">=</code><code class="s2">"Grus"</code><code class="p">)</code>        <code class="c1"># "What's-his-name Grus"</code></pre>&#13;
&#13;
<p>We will be creating many, many functions.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Strings" data-type="sect1"><div class="sect1" id="idm45635767446536">&#13;
<h1>Strings</h1>&#13;
&#13;
<p>Strings<a data-primary="Python" data-secondary="strings" data-type="indexterm" id="idm45635767488856"/><a data-primary="strings" data-type="indexterm" id="idm45635767487848"/> can be delimited by single or double quotation marks (but the quotes have to match):</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">single_quoted_string</code> <code class="o">=</code> <code class="s1">'data science'</code>&#13;
<code class="n">double_quoted_string</code> <code class="o">=</code> <code class="s2">"data science"</code></pre>&#13;
&#13;
<p>Python uses backslashes to encode special characters. For example:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">tab_string</code> <code class="o">=</code> <code class="s2">"</code><code class="se">\t</code><code class="s2">"</code>       <code class="c1"># represents the tab character</code>&#13;
<code class="nb">len</code><code class="p">(</code><code class="n">tab_string</code><code class="p">)</code>         <code class="c1"># is 1</code></pre>&#13;
&#13;
<p>If you want backslashes as backslashes (which you might in Windows directory names or in regular expressions), you<a data-primary="raw strings" data-type="indexterm" id="idm45635767475688"/> can create <em>raw</em> strings using <code>r""</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">not_tab_string</code> <code class="o">=</code> <code class="s-Affix">r</code><code class="s2">"\t"</code>  <code class="c1"># represents the characters '\' and 't'</code>&#13;
<code class="nb">len</code><code class="p">(</code><code class="n">not_tab_string</code><code class="p">)</code>     <code class="c1"># is 2</code></pre>&#13;
&#13;
<p>You can create<a data-primary="multiline strings" data-type="indexterm" id="idm45635767405576"/> multiline strings using three double quotes:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">multi_line_string</code> <code class="o">=</code> <code class="s2">"""This is the first line.</code>&#13;
<code class="s2">and this is the second line</code>&#13;
<code class="s2">and this is the third line"""</code></pre>&#13;
&#13;
<p>A<a data-primary="f-strings" data-type="indexterm" id="idm45635767374552"/> new feature in Python 3.6 is the <em>f-string</em>, which provides a simple&#13;
way to substitute values into strings. For example, if we had the first name&#13;
and last name given separately:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">first_name</code> <code class="o">=</code> <code class="s2">"Joel"</code>&#13;
<code class="n">last_name</code> <code class="o">=</code> <code class="s2">"Grus"</code></pre>&#13;
&#13;
<p>we might want to combine them into a full name.&#13;
There are multiple ways to construct such a <code>full_name</code> string:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">full_name1</code> <code class="o">=</code> <code class="n">first_name</code> <code class="o">+</code> <code class="s2">" "</code> <code class="o">+</code> <code class="n">last_name</code>             <code class="c1"># string addition</code>&#13;
<code class="n">full_name2</code> <code class="o">=</code> <code class="s2">"{0} {1}"</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">first_name</code><code class="p">,</code> <code class="n">last_name</code><code class="p">)</code>  <code class="c1"># string.format</code></pre>&#13;
&#13;
<p>but the f-string way is much less unwieldy:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">full_name3</code> <code class="o">=</code> <code class="n">f</code><code class="s2">"{first_name} {last_name}"</code></pre>&#13;
&#13;
<p>and we’ll prefer it throughout the book.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Exceptions" data-type="sect1"><div class="sect1" id="idm45635767489864">&#13;
<h1>Exceptions</h1>&#13;
&#13;
<p>When<a data-primary="Python" data-secondary="exceptions" data-type="indexterm" id="idm45635767237688"/><a data-primary="exceptions" data-type="indexterm" id="idm45635767236680"/> something goes wrong, Python raises an <em>exception</em>.  Unhandled, exceptions will cause your program to crash.  You can handle them using <code>try</code> and <code>except</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">try</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="mi">0</code> <code class="o">/</code> <code class="mi">0</code><code class="p">)</code>&#13;
<code class="k">except</code> <code class="ne">ZeroDivisionError</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"cannot divide by zero"</code><code class="p">)</code></pre>&#13;
&#13;
<p>Although in many languages exceptions are considered bad, in Python there is no shame in using them to make your code cleaner, and we will sometimes do so.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Lists" data-type="sect1"><div class="sect1" id="idm45635767272648">&#13;
<h1>Lists</h1>&#13;
&#13;
<p>Probably<a data-primary="Python" data-secondary="lists" data-type="indexterm" id="idm45635767216008"/><a data-primary="lists" data-secondary="versus arrays" data-type="indexterm" id="idm45635767215000"/><a data-primary="arrays" data-type="indexterm" id="idm45635767214056"/> the most fundamental data structure in Python is the <em>list</em>, which is simply an ordered collection (it is similar to what in other languages might be called an <em>array</em>, but with some added functionality):</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">integer_list</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
<code class="n">heterogeneous_list</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"string"</code><code class="p">,</code> <code class="mf">0.1</code><code class="p">,</code> <code class="bp">True</code><code class="p">]</code>&#13;
<code class="n">list_of_lists</code> <code class="o">=</code> <code class="p">[</code><code class="n">integer_list</code><code class="p">,</code> <code class="n">heterogeneous_list</code><code class="p">,</code> <code class="p">[]]</code>&#13;
&#13;
<code class="n">list_length</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">integer_list</code><code class="p">)</code>     <code class="c1"># equals 3</code>&#13;
<code class="n">list_sum</code>    <code class="o">=</code> <code class="nb">sum</code><code class="p">(</code><code class="n">integer_list</code><code class="p">)</code>     <code class="c1"># equals 6</code></pre>&#13;
&#13;
<p>You<a data-primary="lists" data-secondary="getting nth element of" data-type="indexterm" id="idm45635767211080"/> can get or set the <em>n</em>th element of a list with square brackets:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]</code>&#13;
&#13;
<code class="n">zero</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code>          <code class="c1"># equals 0, lists are 0-indexed</code>&#13;
<code class="n">one</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code>           <code class="c1"># equals 1</code>&#13;
<code class="n">nine</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>         <code class="c1"># equals 9, 'Pythonic' for last element</code>&#13;
<code class="n">eight</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="o">-</code><code class="mi">2</code><code class="p">]</code>        <code class="c1"># equals 8, 'Pythonic' for next-to-last element</code>&#13;
<code class="n">x</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="o">-</code><code class="mi">1</code>            <code class="c1"># now x is [-1, 1, 2, 3, ..., 9]</code></pre>&#13;
&#13;
<p>You<a data-primary="slicing lists" data-type="indexterm" id="idm45635767104616"/><a data-primary="lists" data-secondary="slicing" data-type="indexterm" id="idm45635767103976"/> can also use square brackets to <em>slice</em> lists. The slice <code>i:j</code>&#13;
means all elements from <code>i</code> (inclusive) to <code>j</code> (not inclusive).&#13;
If you leave off the start of the slice, you’ll slice from the beginning&#13;
of the list, and if you leave of the end of the slice, you’ll slice until the&#13;
end of the list:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">first_three</code> <code class="o">=</code> <code class="n">x</code><code class="p">[:</code><code class="mi">3</code><code class="p">]</code>                 <code class="c1"># [-1, 1, 2]</code>&#13;
<code class="n">three_to_end</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="mi">3</code><code class="p">:]</code>                <code class="c1"># [3, 4, ..., 9]</code>&#13;
<code class="n">one_to_four</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="mi">1</code><code class="p">:</code><code class="mi">5</code><code class="p">]</code>                <code class="c1"># [1, 2, 3, 4]</code>&#13;
<code class="n">last_three</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="o">-</code><code class="mi">3</code><code class="p">:]</code>                 <code class="c1"># [7, 8, 9]</code>&#13;
<code class="n">without_first_and_last</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="mi">1</code><code class="p">:</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>    <code class="c1"># [1, 2, ..., 8]</code>&#13;
<code class="n">copy_of_x</code> <code class="o">=</code> <code class="n">x</code><code class="p">[:]</code>                    <code class="c1"># [-1, 1, 2, ..., 9]</code></pre>&#13;
&#13;
<p>You can similarly slice strings and other “sequential” types.</p>&#13;
&#13;
<p>A<a data-primary="stride" data-type="indexterm" id="idm45635766959656"/> slice can take a third argument to indicate its <em>stride</em>, which can be negative:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">every_third</code> <code class="o">=</code> <code class="n">x</code><code class="p">[::</code><code class="mi">3</code><code class="p">]</code>                 <code class="c1"># [-1, 3, 6, 9]</code>&#13;
<code class="n">five_to_three</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="mi">5</code><code class="p">:</code><code class="mi">2</code><code class="p">:</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>            <code class="c1"># [5, 4, 3]</code></pre>&#13;
&#13;
<p>Python<a data-primary="lists" data-secondary="checking list membership" data-type="indexterm" id="idm45635766887432"/> has an <code>in</code> operator to check for list membership:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="mi">1</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>    <code class="c1"># True</code>&#13;
<code class="mi">0</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>    <code class="c1"># False</code></pre>&#13;
&#13;
<p>This check involves examining the elements of the list one at a time, which means that you probably shouldn’t use it unless you know your list is pretty small (or unless you don’t care how long the check takes).</p>&#13;
&#13;
<p>It<a data-primary="lists" data-secondary="concatenating" data-type="indexterm" id="idm45635766934664"/> is easy to concatenate lists together. If you want to modify a list in place,&#13;
you can use <code>extend</code> to add items from another collection:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
<code class="n">x</code><code class="o">.</code><code class="n">extend</code><code class="p">([</code><code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">])</code>     <code class="c1"># x is now [1, 2, 3, 4, 5, 6]</code></pre>&#13;
&#13;
<p>If you don’t want to modify <code>x</code>, you can use list addition:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
<code class="n">y</code> <code class="o">=</code> <code class="n">x</code> <code class="o">+</code> <code class="p">[</code><code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">]</code>       <code class="c1"># y is [1, 2, 3, 4, 5, 6]; x is unchanged</code></pre>&#13;
&#13;
<p>More<a data-primary="lists" data-secondary="appending items to" data-type="indexterm" id="idm45635766812712"/> frequently we will append to lists one item at a time:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
<code class="n">x</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code>      <code class="c1"># x is now [1, 2, 3, 0]</code>&#13;
<code class="n">y</code> <code class="o">=</code> <code class="n">x</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>        <code class="c1"># equals 0</code>&#13;
<code class="n">z</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">x</code><code class="p">)</code>       <code class="c1"># equals 4</code></pre>&#13;
&#13;
<p>It’s<a data-primary="unpacking lists" data-type="indexterm" id="idm45635766769624"/><a data-primary="lists" data-secondary="unpacking" data-type="indexterm" id="idm45635766722024"/> often convenient to <em>unpack</em> lists when you know how many elements they contain:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code><code class="p">,</code> <code class="n">y</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">]</code>    <code class="c1"># now x is 1, y is 2</code></pre>&#13;
&#13;
<p>although you will get a <code>ValueError</code> if you don’t have the same number of elements on both sides.</p>&#13;
&#13;
<p>A common idiom is to use an underscore for a value you’re going to throw away:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">_</code><code class="p">,</code> <code class="n">y</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">]</code>    <code class="c1"># now y == 2, didn't care about the first element</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Tuples" data-type="sect1"><div class="sect1" id="idm45635767217048">&#13;
<h1>Tuples</h1>&#13;
&#13;
<p>Tuples<a data-primary="Python" data-secondary="tuples" data-type="indexterm" id="idm45635766698920"/><a data-primary="tuples" data-type="indexterm" id="idm45635766697912"/> are lists’ immutable cousins.  Pretty much anything you can do to a list that doesn’t involve modifying it, you can do to a tuple.  You specify a tuple by using parentheses (or nothing) instead of square brackets:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">my_list</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">]</code>&#13;
<code class="n">my_tuple</code> <code class="o">=</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code>&#13;
<code class="n">other_tuple</code> <code class="o">=</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code>&#13;
<code class="n">my_list</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="mi">3</code>      <code class="c1"># my_list is now [1, 3]</code>&#13;
&#13;
<code class="k">try</code><code class="p">:</code>&#13;
    <code class="n">my_tuple</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="mi">3</code>&#13;
<code class="k">except</code> <code class="ne">TypeError</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"cannot modify a tuple"</code><code class="p">)</code></pre>&#13;
&#13;
<p>Tuples are a convenient way to return multiple values from functions:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">sum_and_product</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="p">(</code><code class="n">x</code> <code class="o">+</code> <code class="n">y</code><code class="p">),</code> <code class="p">(</code><code class="n">x</code> <code class="o">*</code> <code class="n">y</code><code class="p">)</code>&#13;
&#13;
<code class="n">sp</code> <code class="o">=</code> <code class="n">sum_and_product</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">)</code>     <code class="c1"># sp is (5, 6)</code>&#13;
<code class="n">s</code><code class="p">,</code> <code class="n">p</code> <code class="o">=</code> <code class="n">sum_and_product</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">10</code><code class="p">)</code>  <code class="c1"># s is 15, p is 50</code></pre>&#13;
&#13;
<p>Tuples (and lists) can also be used for <em>multiple assignment</em>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code><code class="p">,</code> <code class="n">y</code> <code class="o">=</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code>     <code class="c1"># now x is 1, y is 2</code>&#13;
<code class="n">x</code><code class="p">,</code> <code class="n">y</code> <code class="o">=</code> <code class="n">y</code><code class="p">,</code> <code class="n">x</code>     <code class="c1"># Pythonic way to swap variables; now x is 2, y is 1</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Dictionaries" data-type="sect1"><div class="sect1" id="idm45635766498216">&#13;
<h1>Dictionaries</h1>&#13;
&#13;
<p>Another<a data-primary="Python" data-secondary="dictionaries" data-type="indexterm" id="idm45635766485160"/><a data-primary="dictionaries" data-type="indexterm" id="idm45635766484152"/><a data-primary="key/value pairs" data-type="indexterm" id="idm45635766483480"/> fundamental data structure is a dictionary, which associates <em>values</em> with <em>keys</em> and allows you to quickly retrieve the value corresponding to a given key:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">empty_dict</code> <code class="o">=</code> <code class="p">{}</code>                     <code class="c1"># Pythonic</code>&#13;
<code class="n">empty_dict2</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">()</code>                <code class="c1"># less Pythonic</code>&#13;
<code class="n">grades</code> <code class="o">=</code> <code class="p">{</code><code class="s2">"Joel"</code><code class="p">:</code> <code class="mi">80</code><code class="p">,</code> <code class="s2">"Tim"</code><code class="p">:</code> <code class="mi">95</code><code class="p">}</code>    <code class="c1"># dictionary literal</code></pre>&#13;
&#13;
<p>You can look up the value for a key using square brackets:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">joels_grade</code> <code class="o">=</code> <code class="n">grades</code><code class="p">[</code><code class="s2">"Joel"</code><code class="p">]</code>        <code class="c1"># equals 80</code></pre>&#13;
&#13;
<p>But you’ll get a <code>KeyError</code> if you ask for a key that’s not in the dictionary:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">try</code><code class="p">:</code>&#13;
    <code class="n">kates_grade</code> <code class="o">=</code> <code class="n">grades</code><code class="p">[</code><code class="s2">"Kate"</code><code class="p">]</code>&#13;
<code class="k">except</code> <code class="ne">KeyError</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"no grade for Kate!"</code><code class="p">)</code></pre>&#13;
&#13;
<p>You can check for the existence of a key using <code>in</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">joel_has_grade</code> <code class="o">=</code> <code class="s2">"Joel"</code> <code class="ow">in</code> <code class="n">grades</code>     <code class="c1"># True</code>&#13;
<code class="n">kate_has_grade</code> <code class="o">=</code> <code class="s2">"Kate"</code> <code class="ow">in</code> <code class="n">grades</code>     <code class="c1"># False</code></pre>&#13;
&#13;
<p>This membership check is fast even for large dictionaries.</p>&#13;
&#13;
<p>Dictionaries<a data-primary="get method" data-type="indexterm" id="idm45635766326360"/> have a <code>get</code> method that returns a default value (instead of raising an exception) when you look up a key that’s not in the dictionary:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">joels_grade</code> <code class="o">=</code> <code class="n">grades</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s2">"Joel"</code><code class="p">,</code> <code class="mi">0</code><code class="p">)</code>   <code class="c1"># equals 80</code>&#13;
<code class="n">kates_grade</code> <code class="o">=</code> <code class="n">grades</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s2">"Kate"</code><code class="p">,</code> <code class="mi">0</code><code class="p">)</code>   <code class="c1"># equals 0</code>&#13;
<code class="n">no_ones_grade</code> <code class="o">=</code> <code class="n">grades</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s2">"No One"</code><code class="p">)</code>  <code class="c1"># default is None</code></pre>&#13;
&#13;
<p>You can assign key/value pairs using the same square brackets:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">grades</code><code class="p">[</code><code class="s2">"Tim"</code><code class="p">]</code> <code class="o">=</code> <code class="mi">99</code>                    <code class="c1"># replaces the old value</code>&#13;
<code class="n">grades</code><code class="p">[</code><code class="s2">"Kate"</code><code class="p">]</code> <code class="o">=</code> <code class="mi">100</code>                  <code class="c1"># adds a third entry</code>&#13;
<code class="n">num_students</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">grades</code><code class="p">)</code>            <code class="c1"># equals 3</code></pre>&#13;
&#13;
<p>As you saw in <a data-type="xref" href="ch01.html#introduction">Chapter 1</a>, you can use dictionaries to represent structured data:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">tweet</code> <code class="o">=</code> <code class="p">{</code>&#13;
    <code class="s2">"user"</code> <code class="p">:</code> <code class="s2">"joelgrus"</code><code class="p">,</code>&#13;
    <code class="s2">"text"</code> <code class="p">:</code> <code class="s2">"Data Science is Awesome"</code><code class="p">,</code>&#13;
    <code class="s2">"retweet_count"</code> <code class="p">:</code> <code class="mi">100</code><code class="p">,</code>&#13;
    <code class="s2">"hashtags"</code> <code class="p">:</code> <code class="p">[</code><code class="s2">"#data"</code><code class="p">,</code> <code class="s2">"#science"</code><code class="p">,</code> <code class="s2">"#datascience"</code><code class="p">,</code> <code class="s2">"#awesome"</code><code class="p">,</code> <code class="s2">"#yolo"</code><code class="p">]</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>although we’ll soon see a better approach.</p>&#13;
&#13;
<p>Besides looking for specific keys, we can look at all of them:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">tweet_keys</code>   <code class="o">=</code> <code class="n">tweet</code><code class="o">.</code><code class="n">keys</code><code class="p">()</code>     <code class="c1"># iterable for the keys</code>&#13;
<code class="n">tweet_values</code> <code class="o">=</code> <code class="n">tweet</code><code class="o">.</code><code class="n">values</code><code class="p">()</code>   <code class="c1"># iterable for the values</code>&#13;
<code class="n">tweet_items</code>  <code class="o">=</code> <code class="n">tweet</code><code class="o">.</code><code class="n">items</code><code class="p">()</code>    <code class="c1"># iterable for the (key, value) tuples</code>&#13;
&#13;
<code class="s2">"user"</code> <code class="ow">in</code> <code class="n">tweet_keys</code>            <code class="c1"># True, but not Pythonic</code>&#13;
<code class="s2">"user"</code> <code class="ow">in</code> <code class="n">tweet</code>                 <code class="c1"># Pythonic way of checking for keys</code>&#13;
<code class="s2">"joelgrus"</code> <code class="ow">in</code> <code class="n">tweet_values</code>      <code class="c1"># True (slow but the only way to check)</code></pre>&#13;
&#13;
<p>Dictionary keys must be “hashable”; in particular, you cannot use lists as keys. If you need a multipart key, you should probably use a tuple or figure out a way to turn the key into a string.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="defaultdict" data-type="sect2"><div class="sect2" id="idm45635766074200">&#13;
<h2>defaultdict</h2>&#13;
&#13;
<p>Imagine<a data-primary="defaultdict" data-type="indexterm" id="idm45635766072600"/><a data-primary="Python" data-secondary="default dict" data-type="indexterm" id="idm45635766071864"/> that you’re trying to count the words in a document.  An obvious approach is to create a dictionary in which the keys are words and the values are counts.  As you check each word, you can increment its count if it’s already in the dictionary and add it to the dictionary if it’s not:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">word_counts</code> <code class="o">=</code> <code class="p">{}</code>&#13;
<code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">document</code><code class="p">:</code>&#13;
    <code class="k">if</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">word_counts</code><code class="p">:</code>&#13;
        <code class="n">word_counts</code><code class="p">[</code><code class="n">word</code><code class="p">]</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
    <code class="k">else</code><code class="p">:</code>&#13;
        <code class="n">word_counts</code><code class="p">[</code><code class="n">word</code><code class="p">]</code> <code class="o">=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>You could also use the “forgiveness is better than permission” approach&#13;
and just handle the exception from trying to look up a missing key:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">word_counts</code> <code class="o">=</code> <code class="p">{}</code>&#13;
<code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">document</code><code class="p">:</code>&#13;
    <code class="k">try</code><code class="p">:</code>&#13;
        <code class="n">word_counts</code><code class="p">[</code><code class="n">word</code><code class="p">]</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
    <code class="k">except</code> <code class="ne">KeyError</code><code class="p">:</code>&#13;
        <code class="n">word_counts</code><code class="p">[</code><code class="n">word</code><code class="p">]</code> <code class="o">=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>A third approach is to use <code>get</code>, which behaves gracefully for missing keys:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">word_counts</code> <code class="o">=</code> <code class="p">{}</code>&#13;
<code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">document</code><code class="p">:</code>&#13;
    <code class="n">previous_count</code> <code class="o">=</code> <code class="n">word_counts</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="n">word</code><code class="p">,</code> <code class="mi">0</code><code class="p">)</code>&#13;
    <code class="n">word_counts</code><code class="p">[</code><code class="n">word</code><code class="p">]</code> <code class="o">=</code> <code class="n">previous_count</code> <code class="o">+</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>Every one of these is slightly unwieldy, which is why <code>defaultdict</code> is useful.  A <code>defaultdict</code> is like a regular dictionary, except that when you try to look up a key it doesn’t contain, it first adds a value for it using a zero-argument function you provided when you created it.  In order to use <code>defaultdict</code>s, you have to import them from <code>collections</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code>&#13;
&#13;
<code class="n">word_counts</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">int</code><code class="p">)</code>          <code class="c1"># int() produces 0</code>&#13;
<code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">document</code><code class="p">:</code>&#13;
    <code class="n">word_counts</code><code class="p">[</code><code class="n">word</code><code class="p">]</code> <code class="o">+=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>They can also be useful with <code>list</code> or <code>dict</code>, or even your own functions:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">dd_list</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code>             <code class="c1"># list() produces an empty list</code>&#13;
<code class="n">dd_list</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>                    <code class="c1"># now dd_list contains {2: [1]}</code>&#13;
&#13;
<code class="n">dd_dict</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">dict</code><code class="p">)</code>             <code class="c1"># dict() produces an empty dict</code>&#13;
<code class="n">dd_dict</code><code class="p">[</code><code class="s2">"Joel"</code><code class="p">][</code><code class="s2">"City"</code><code class="p">]</code> <code class="o">=</code> <code class="s2">"Seattle"</code>     <code class="c1"># {"Joel" : {"City": Seattle"}}</code>&#13;
&#13;
<code class="n">dd_pair</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="k">lambda</code><code class="p">:</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">0</code><code class="p">])</code>&#13;
<code class="n">dd_pair</code><code class="p">[</code><code class="mi">2</code><code class="p">][</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="mi">1</code>                       <code class="c1"># now dd_pair contains {2: [0, 1]}</code></pre>&#13;
&#13;
<p>These will be useful when we’re using dictionaries to “collect” results by some key and don’t want to have to check every time to see if the key exists yet.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Counters" data-type="sect1"><div class="sect1" id="idm45635766073576">&#13;
<h1>Counters</h1>&#13;
&#13;
<p>A <code>Counter</code> turns<a data-primary="word counting" data-type="indexterm" id="idm45635765761544"/><a data-primary="Python" data-secondary="Counter instances" data-type="indexterm" id="idm45635765760808"/><a data-primary="Counter instances" data-type="indexterm" id="idm45635765759864"/> a sequence of values into a <code>defaultdict(int)</code>-like object mapping keys to counts:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">Counter</code>&#13;
<code class="n">c</code> <code class="o">=</code> <code class="n">Counter</code><code class="p">([</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">0</code><code class="p">])</code>          <code class="c1"># c is (basically) {0: 2, 1: 1, 2: 1}</code></pre>&#13;
&#13;
<p>This gives us a very simple way to solve our <code>word_counts</code> problem:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># recall, document is a list of words</code>&#13;
<code class="n">word_counts</code> <code class="o">=</code> <code class="n">Counter</code><code class="p">(</code><code class="n">document</code><code class="p">)</code></pre>&#13;
&#13;
<p>A<a data-primary="most_common method" data-type="indexterm" id="idm45635765721768"/> <code>Counter</code> instance has a <code>most_common</code> method that is frequently useful:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># print the 10 most common words and their counts</code>&#13;
<code class="k">for</code> <code class="n">word</code><code class="p">,</code> <code class="n">count</code> <code class="ow">in</code> <code class="n">word_counts</code><code class="o">.</code><code class="n">most_common</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">word</code><code class="p">,</code> <code class="n">count</code><code class="p">)</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Sets" data-type="sect1"><div class="sect1" id="idm45635765649864">&#13;
<h1>Sets</h1>&#13;
&#13;
<p>Another<a data-primary="Python" data-secondary="sets" data-type="indexterm" id="idm45635765647224"/><a data-primary="sets" data-type="indexterm" id="idm45635765646216"/><a data-primary="elements" data-secondary="creating sets of" data-type="indexterm" id="idm45635765645544"/> useful data structure is set, which represents a collection of <em>distinct</em> elements. You can define a set by listing its elements between curly braces:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">primes_below_10</code> <code class="o">=</code> <code class="p">{</code><code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">7</code><code class="p">}</code></pre>&#13;
&#13;
<p>However, that doesn’t work for empty <code>set</code>s, as <code>{}</code> already means “empty <code>dict</code>.” In that case you’ll need to use <code>set()</code> itself:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">s</code> <code class="o">=</code> <code class="nb">set</code><code class="p">()</code>&#13;
<code class="n">s</code><code class="o">.</code><code class="n">add</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>       <code class="c1"># s is now {1}</code>&#13;
<code class="n">s</code><code class="o">.</code><code class="n">add</code><code class="p">(</code><code class="mi">2</code><code class="p">)</code>       <code class="c1"># s is now {1, 2}</code>&#13;
<code class="n">s</code><code class="o">.</code><code class="n">add</code><code class="p">(</code><code class="mi">2</code><code class="p">)</code>       <code class="c1"># s is still {1, 2}</code>&#13;
<code class="n">x</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">s</code><code class="p">)</code>     <code class="c1"># equals 2</code>&#13;
<code class="n">y</code> <code class="o">=</code> <code class="mi">2</code> <code class="ow">in</code> <code class="n">s</code>     <code class="c1"># equals True</code>&#13;
<code class="n">z</code> <code class="o">=</code> <code class="mi">3</code> <code class="ow">in</code> <code class="n">s</code>     <code class="c1"># equals False</code></pre>&#13;
&#13;
<p>We’ll use sets for two main reasons. The first is that <code>in</code> is a very fast operation on sets. If we have a large collection of items that we want to use for a membership test, a set is more appropriate than a list:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">stopwords_list</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"a"</code><code class="p">,</code> <code class="s2">"an"</code><code class="p">,</code> <code class="s2">"at"</code><code class="p">]</code> <code class="o">+</code> <code class="n">hundreds_of_other_words</code> <code class="o">+</code> <code class="p">[</code><code class="s2">"yet"</code><code class="p">,</code> <code class="s2">"you"</code><code class="p">]</code>&#13;
&#13;
<code class="s2">"zip"</code> <code class="ow">in</code> <code class="n">stopwords_list</code>     <code class="c1"># False, but have to check every element</code>&#13;
&#13;
<code class="n">stopwords_set</code> <code class="o">=</code> <code class="nb">set</code><code class="p">(</code><code class="n">stopwords_list</code><code class="p">)</code>&#13;
<code class="s2">"zip"</code> <code class="ow">in</code> <code class="n">stopwords_set</code>      <code class="c1"># very fast to check</code></pre>&#13;
&#13;
<p>The<a data-primary="elements" data-secondary="finding in collections" data-type="indexterm" id="idm45635765522248"/> second reason is to find the <em>distinct</em> items in a collection:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">item_list</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
<code class="n">num_items</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">item_list</code><code class="p">)</code>                <code class="c1"># 6</code>&#13;
<code class="n">item_set</code> <code class="o">=</code> <code class="nb">set</code><code class="p">(</code><code class="n">item_list</code><code class="p">)</code>                 <code class="c1"># {1, 2, 3}</code>&#13;
<code class="n">num_distinct_items</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">item_set</code><code class="p">)</code>        <code class="c1"># 3</code>&#13;
<code class="n">distinct_item_list</code> <code class="o">=</code> <code class="nb">list</code><code class="p">(</code><code class="n">item_set</code><code class="p">)</code>       <code class="c1"># [1, 2, 3]</code></pre>&#13;
&#13;
<p>We’ll use sets less frequently than dictionaries and lists.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Control Flow" data-type="sect1"><div class="sect1" id="idm45635765444104">&#13;
<h1>Control Flow</h1>&#13;
&#13;
<p>As<a data-primary="Python" data-secondary="control flow" data-type="indexterm" id="idm45635765398376"/><a data-primary="control flow" data-type="indexterm" id="idm45635765397368"/><a data-primary="if statements" data-type="indexterm" id="idm45635765396696"/> in most programming languages, you can perform an action conditionally using <code>if</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">if</code> <code class="mi">1</code> <code class="o">&gt;</code> <code class="mi">2</code><code class="p">:</code>&#13;
    <code class="n">message</code> <code class="o">=</code> <code class="s2">"if only 1 were greater than two..."</code>&#13;
<code class="k">elif</code> <code class="mi">1</code> <code class="o">&gt;</code> <code class="mi">3</code><code class="p">:</code>&#13;
    <code class="n">message</code> <code class="o">=</code> <code class="s2">"elif stands for 'else if'"</code>&#13;
<code class="k">else</code><code class="p">:</code>&#13;
    <code class="n">message</code> <code class="o">=</code> <code class="s2">"when all else fails use else (if you want to)"</code></pre>&#13;
&#13;
<p>You<a data-primary="ternerary operators" data-type="indexterm" id="idm45635765370232"/> can also write a <em>ternary</em> if-then-else<a data-primary="if-then-else statements" data-type="indexterm" id="idm45635765369080"/> on one line, which we will do occasionally:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">parity</code> <code class="o">=</code> <code class="s2">"even"</code> <code class="k">if</code> <code class="n">x</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">0</code> <code class="k">else</code> <code class="s2">"odd"</code></pre>&#13;
&#13;
<p>Python<a data-primary="while loops" data-type="indexterm" id="idm45635765311560"/> has a <code>while</code> loop:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="k">while</code> <code class="n">x</code> <code class="o">&lt;</code> <code class="mi">10</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"{x} is less than 10"</code><code class="p">)</code>&#13;
    <code class="n">x</code> <code class="o">+=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>although more often we’ll use <code>for</code> and <code>in</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># range(10) is the numbers 0, 1, ..., 9</code>&#13;
<code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"{x} is less than 10"</code><code class="p">)</code></pre>&#13;
&#13;
<p>If you need more complex logic, you can use <code>continue</code> and <code>break</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
    <code class="k">if</code> <code class="n">x</code> <code class="o">==</code> <code class="mi">3</code><code class="p">:</code>&#13;
        <code class="k">continue</code>  <code class="c1"># go immediately to the next iteration</code>&#13;
    <code class="k">if</code> <code class="n">x</code> <code class="o">==</code> <code class="mi">5</code><code class="p">:</code>&#13;
        <code class="k">break</code>     <code class="c1"># quit the loop entirely</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">x</code><code class="p">)</code></pre>&#13;
&#13;
<p>This will print <code>0</code>, <code>1</code>, <code>2</code>, and <code>4</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Truthiness" data-type="sect1"><div class="sect1" id="idm45635765399384">&#13;
<h1>Truthiness</h1>&#13;
&#13;
<p>Booleans<a data-primary="Python" data-secondary="truthiness" data-type="indexterm" id="idm45635765176104"/><a data-primary="truthiness" data-type="indexterm" id="idm45635765175096"/><a data-primary="Booleans" data-type="indexterm" id="idm45635765174424"/> in Python work as in most other languages, except that they’re capitalized:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">one_is_less_than_two</code> <code class="o">=</code> <code class="mi">1</code> <code class="o">&lt;</code> <code class="mi">2</code>          <code class="c1"># equals True</code>&#13;
<code class="n">true_equals_false</code> <code class="o">=</code> <code class="bp">True</code> <code class="o">==</code> <code class="bp">False</code>     <code class="c1"># equals False</code></pre>&#13;
&#13;
<p>Python<a data-primary="None value" data-type="indexterm" id="idm45635765167448"/><a data-primary="null values" data-type="indexterm" id="idm45635765166840"/> uses the value <code>None</code> to indicate a nonexistent value.  It is similar to other languages’ <code>null</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="bp">None</code>&#13;
<code class="k">assert</code> <code class="n">x</code> <code class="o">==</code> <code class="bp">None</code><code class="p">,</code> <code class="s2">"this is the not the Pythonic way to check for None"</code>&#13;
<code class="k">assert</code> <code class="n">x</code> <code class="ow">is</code> <code class="bp">None</code><code class="p">,</code> <code class="s2">"this is the Pythonic way to check for None"</code></pre>&#13;
&#13;
<p>Python lets you use any value where it expects a Boolean.  The following are all “falsy”:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>False</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>None</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>[]</code> (an empty <code>list</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p><code>{}</code> (an empty <code>dict</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p><code>""</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>set()</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>0</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>0.0</code></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Pretty much anything else gets treated as <code>True</code>.  This allows you to easily use <code>if</code> statements to test for empty lists, empty strings, empty dictionaries, and so on. It also sometimes causes tricky bugs if you’re not expecting this behavior:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">s</code> <code class="o">=</code> <code class="n">some_function_that_returns_a_string</code><code class="p">()</code>&#13;
<code class="k">if</code> <code class="n">s</code><code class="p">:</code>&#13;
    <code class="n">first_char</code> <code class="o">=</code> <code class="n">s</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code>&#13;
<code class="k">else</code><code class="p">:</code>&#13;
    <code class="n">first_char</code> <code class="o">=</code> <code class="s2">""</code></pre>&#13;
&#13;
<p>A shorter (but possibly more confusing) way of doing the same is:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">first_char</code> <code class="o">=</code> <code class="n">s</code> <code class="ow">and</code> <code class="n">s</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code></pre>&#13;
&#13;
<p>since <code>and</code> returns its second value when the first is “truthy,” and the first value when it’s not. Similarly, if <code>x</code> is either a number or possibly <code>None</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">safe_x</code> <code class="o">=</code> <code class="n">x</code> <code class="ow">or</code> <code class="mi">0</code></pre>&#13;
&#13;
<p>is definitely a number, although:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">safe_x</code> <code class="o">=</code> <code class="n">x</code> <code class="k">if</code> <code class="n">x</code> <code class="ow">is</code> <code class="ow">not</code> <code class="bp">None</code> <code class="k">else</code> <code class="mi">0</code></pre>&#13;
&#13;
<p>is possibly more readable.</p>&#13;
&#13;
<p>Python has an <code>all</code> function, which takes an iterable and returns <code>True</code> precisely when every element is truthy, and an <code>any</code> function, which returns <code>True</code> when at least one element is truthy:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="nb">all</code><code class="p">([</code><code class="bp">True</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="p">{</code><code class="mi">3</code><code class="p">}])</code>   <code class="c1"># True, all are truthy</code>&#13;
<code class="nb">all</code><code class="p">([</code><code class="bp">True</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="p">{}])</code>    <code class="c1"># False, {} is falsy</code>&#13;
<code class="nb">any</code><code class="p">([</code><code class="bp">True</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="p">{}])</code>    <code class="c1"># True, True is truthy</code>&#13;
<code class="nb">all</code><code class="p">([])</code>               <code class="c1"># True, no falsy elements in the list</code>&#13;
<code class="nb">any</code><code class="p">([])</code>               <code class="c1"># False, no truthy elements in the list</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Sorting" data-type="sect1"><div class="sect1" id="idm45635765177240">&#13;
<h1>Sorting</h1>&#13;
&#13;
<p>Every<a data-primary="Python" data-secondary="sorting" data-type="indexterm" id="idm45635764871704"/><a data-primary="sorting" data-type="indexterm" id="idm45635764870696"/><a data-primary="lists" data-secondary="sorting" data-type="indexterm" id="idm45635764870024"/> Python list has a <code>sort</code> method that sorts it in place. If you don’t want to mess up your list, you can use the <code>sorted</code> function, which returns a new list:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">x</code> <code class="o">=</code> <code class="p">[</code><code class="mi">4</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
<code class="n">y</code> <code class="o">=</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">x</code><code class="p">)</code>     <code class="c1"># y is [1, 2, 3, 4], x is unchanged</code>&#13;
<code class="n">x</code><code class="o">.</code><code class="n">sort</code><code class="p">()</code>          <code class="c1"># now x is [1, 2, 3, 4]</code></pre>&#13;
&#13;
<p>By default, <code>sort</code> (and <code>sorted</code>) sort a list from smallest to largest based on naively comparing the elements to one another.</p>&#13;
&#13;
<p>If you want elements sorted from largest to smallest, you can specify a <code>reverse=True</code> parameter.  And instead of comparing the elements themselves, you can compare the results of a function that you specify with <code>key</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># sort the list by absolute value from largest to smallest</code>&#13;
<code class="n">x</code> <code class="o">=</code> <code class="nb">sorted</code><code class="p">([</code><code class="o">-</code><code class="mi">4</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="o">-</code><code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code> <code class="n">key</code><code class="o">=</code><code class="nb">abs</code><code class="p">,</code> <code class="n">reverse</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code>  <code class="c1"># is [-4, 3, -2, 1]</code>&#13;
&#13;
<code class="c1"># sort the words and counts from highest count to lowest</code>&#13;
<code class="n">wc</code> <code class="o">=</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">word_counts</code><code class="o">.</code><code class="n">items</code><code class="p">(),</code>&#13;
            <code class="n">key</code><code class="o">=</code><code class="k">lambda</code> <code class="n">word_and_count</code><code class="p">:</code> <code class="n">word_and_count</code><code class="p">[</code><code class="mi">1</code><code class="p">],</code>&#13;
            <code class="n">reverse</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="List Comprehensions" data-type="sect1"><div class="sect1" id="idm45635764861528">&#13;
<h1>List Comprehensions</h1>&#13;
&#13;
<p>Frequently, you’ll<a data-primary="Python" data-secondary="list comprehensions" data-type="indexterm" id="idm45635764742936"/><a data-primary="lists" data-secondary="transforming" data-type="indexterm" id="idm45635764741960"/> want to transform a list into another list by choosing only certain elements, by transforming elements, or both.  The Pythonic way to do this is with <em>list comprehensions</em>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">even_numbers</code> <code class="o">=</code> <code class="p">[</code><code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">5</code><code class="p">)</code> <code class="k">if</code> <code class="n">x</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">0</code><code class="p">]</code>  <code class="c1"># [0, 2, 4]</code>&#13;
<code class="n">squares</code>      <code class="o">=</code> <code class="p">[</code><code class="n">x</code> <code class="o">*</code> <code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">5</code><code class="p">)]</code>            <code class="c1"># [0, 1, 4, 9, 16]</code>&#13;
<code class="n">even_squares</code> <code class="o">=</code> <code class="p">[</code><code class="n">x</code> <code class="o">*</code> <code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">even_numbers</code><code class="p">]</code>        <code class="c1"># [0, 4, 16]</code></pre>&#13;
&#13;
<p>You can similarly turn lists into dictionaries or sets:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">square_dict</code> <code class="o">=</code> <code class="p">{</code><code class="n">x</code><code class="p">:</code> <code class="n">x</code> <code class="o">*</code> <code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">5</code><code class="p">)}</code>  <code class="c1"># {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}</code>&#13;
<code class="n">square_set</code>  <code class="o">=</code> <code class="p">{</code><code class="n">x</code> <code class="o">*</code> <code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="o">-</code><code class="mi">1</code><code class="p">]}</code>      <code class="c1"># {1}</code></pre>&#13;
&#13;
<p>If you don’t need the value from the list,&#13;
it’s common to use an underscore as the variable:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">zeros</code> <code class="o">=</code> <code class="p">[</code><code class="mi">0</code> <code class="k">for</code> <code class="n">_</code> <code class="ow">in</code> <code class="n">even_numbers</code><code class="p">]</code>      <code class="c1"># has the same length as even_numbers</code></pre>&#13;
&#13;
<p>A list comprehension can include multiple <code>for</code>s:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">pairs</code> <code class="o">=</code> <code class="p">[(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">)</code>&#13;
         <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>&#13;
         <code class="k">for</code> <code class="n">y</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)]</code>   <code class="c1"># 100 pairs (0,0) (0,1) ... (9,8), (9,9)</code></pre>&#13;
&#13;
<p>and later <code>for</code>s can use the results of earlier ones:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">increasing_pairs</code> <code class="o">=</code> <code class="p">[(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">)</code>                       <code class="c1"># only pairs with x &lt; y,</code>&#13;
                    <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>           <code class="c1"># range(lo, hi) equals</code>&#13;
                    <code class="k">for</code> <code class="n">y</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="n">x</code> <code class="o">+</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">10</code><code class="p">)]</code>   <code class="c1"># [lo, lo + 1, ..., hi - 1]</code></pre>&#13;
&#13;
<p>We will use list comprehensions a lot.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Automated Testing and assert" data-type="sect1"><div class="sect1" id="idm45635764512216">&#13;
<h1>Automated Testing and assert</h1>&#13;
&#13;
<p>As<a data-primary="Python" data-secondary="automated testing and assert statements" data-type="indexterm" id="idm45635764468552"/><a data-primary="automated testing" data-type="indexterm" id="idm45635764467528"/><a data-primary="assert statements" data-type="indexterm" id="idm45635764466856"/> data scientists, we’ll be writing a lot of code.&#13;
How can we be confident our code is correct?&#13;
One way is with <em>types</em> (discussed shortly), but another way is&#13;
with <em>automated tests</em>.</p>&#13;
&#13;
<p>There are elaborate frameworks for writing and running tests,&#13;
but in this book we’ll restrict ourselves to using <code>assert</code>&#13;
statements, which will cause your code to raise an <code>AssertionError</code>&#13;
if your specified condition is not truthy:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">assert</code> <code class="mi">1</code> <code class="o">+</code> <code class="mi">1</code> <code class="o">==</code> <code class="mi">2</code>&#13;
<code class="k">assert</code> <code class="mi">1</code> <code class="o">+</code> <code class="mi">1</code> <code class="o">==</code> <code class="mi">2</code><code class="p">,</code> <code class="s2">"1 + 1 should equal 2 but didn't"</code></pre>&#13;
&#13;
<p>As you can see in the second case, you can optionally add a message to be printed&#13;
if the assertion fails.</p>&#13;
&#13;
<p>It’s not particularly interesting to assert that 1 + 1 = 2.&#13;
What’s more interesting is to assert that functions you write are&#13;
doing what you expect them to:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">smallest_item</code><code class="p">(</code><code class="n">xs</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="nb">min</code><code class="p">(</code><code class="n">xs</code><code class="p">)</code>&#13;
&#13;
<code class="k">assert</code> <code class="n">smallest_item</code><code class="p">([</code><code class="mi">10</code><code class="p">,</code> <code class="mi">20</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">40</code><code class="p">])</code> <code class="o">==</code> <code class="mi">5</code>&#13;
<code class="k">assert</code> <code class="n">smallest_item</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="o">-</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">])</code> <code class="o">==</code> <code class="o">-</code><code class="mi">1</code></pre>&#13;
&#13;
<p>Throughout the book we’ll be using <code>assert</code> in this way.&#13;
It is a good practice, and I strongly encourage you to make liberal use of it in your own code.&#13;
(If you look at the book’s code on GitHub, you will see that it contains many, many&#13;
 more <code>assert</code> statements than are printed in the book. This helps <em>me</em> be confident that&#13;
 the code I’ve written for you is correct.)</p>&#13;
&#13;
<p>Another less common use is to assert things about inputs to functions:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">smallest_item</code><code class="p">(</code><code class="n">xs</code><code class="p">):</code>&#13;
    <code class="k">assert</code> <code class="n">xs</code><code class="p">,</code> <code class="s2">"empty list has no smallest item"</code>&#13;
    <code class="k">return</code> <code class="nb">min</code><code class="p">(</code><code class="n">xs</code><code class="p">)</code></pre>&#13;
&#13;
<p>We’ll occasionally do this, but more often we’ll use <code>assert</code> to check that our code is correct.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Object-Oriented Programming" data-type="sect1"><div class="sect1" id="idm45635764469560">&#13;
<h1>Object-Oriented Programming</h1>&#13;
&#13;
<p>Like<a data-primary="Python" data-secondary="object-oriented programming" data-type="indexterm" id="idm45635764284376"/><a data-primary="object-oriented programming" data-type="indexterm" id="idm45635764283400"/><a data-primary="classes" data-type="indexterm" id="idm45635764282712"/> many languages, Python allows you to define <em>classes</em> that encapsulate data and the functions that operate on them.  We’ll use them sometimes to make our code cleaner and simpler. It’s probably simplest to explain them by constructing a heavily annotated example.</p>&#13;
&#13;
<p>Here we’ll construct a class representing a “counting clicker,”&#13;
the sort that is used at the door to track how many people have&#13;
shown up for the “advanced topics in data science” meetup.</p>&#13;
&#13;
<p>It maintains a <code>count</code>, can be <code>click</code>ed to increment the count,&#13;
allows you to <code>read_count</code>,&#13;
and can be <code>reset</code> back to zero.&#13;
(In real life one of these rolls over from 9999 to 0000, but we won’t bother with that.)</p>&#13;
&#13;
<p>To define a class, you use the <code>class</code> keyword and a PascalCase name:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">class</code> <code class="nc">CountingClicker</code><code class="p">:</code>&#13;
    <code class="sd">"""A class can/should have a docstring, just like a function"""</code></pre>&#13;
&#13;
<p>A<a data-primary="member functions" data-type="indexterm" id="idm45635764331608"/> class contains zero or more <em>member</em> functions.&#13;
By convention, each takes a first parameter, <code>self</code>, that refers&#13;
to the particular class instance.</p>&#13;
&#13;
<p>Normally, a class has a constructor, named <code>__init__</code>.&#13;
It takes whatever parameters you need to construct an instance&#13;
of your class and does whatever setup you need:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting">    <code class="k">def</code> <code class="nf-Magic">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">count</code> <code class="o">=</code> <code class="mi">0</code><code class="p">):</code>&#13;
        <code class="bp">self</code><code class="o">.</code><code class="n">count</code> <code class="o">=</code> <code class="n">count</code></pre>&#13;
&#13;
<p>Although the constructor has a funny name, we construct instances of&#13;
the clicker using just the class name:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">clicker1</code> <code class="o">=</code> <code class="n">CountingClicker</code><code class="p">()</code>           <code class="c1"># initialized to 0</code>&#13;
<code class="n">clicker2</code> <code class="o">=</code> <code class="n">CountingClicker</code><code class="p">(</code><code class="mi">100</code><code class="p">)</code>        <code class="c1"># starts with count=100</code>&#13;
<code class="n">clicker3</code> <code class="o">=</code> <code class="n">CountingClicker</code><code class="p">(</code><code class="n">count</code><code class="o">=</code><code class="mi">100</code><code class="p">)</code>  <code class="c1"># more explicit way of doing the same</code></pre>&#13;
&#13;
<p>Notice<a data-primary="dunder methods" data-type="indexterm" id="idm45635764225480"/><a data-primary="methods" data-secondary="dunder methods" data-type="indexterm" id="idm45635764224872"/> that the <code>__init__</code> method name starts and ends with double underscores.&#13;
These “magic” methods are sometimes called “dunder” methods (double-UNDERscore, get it?)&#13;
and represent “special” behaviors.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Class methods<a data-primary="private methods" data-type="indexterm" id="idm45635764182872"/><a data-primary="methods" data-secondary="private methods" data-type="indexterm" id="idm45635764182136"/> whose names start with an underscore are—by convention—considered “private,” and users of the class are not supposed to directly&#13;
call them. However, Python will not <em>stop</em> users from calling them.</p>&#13;
</div>&#13;
&#13;
<p>Another such method is <code>__repr__</code>, which produces&#13;
the string representation of a class instance:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting">    <code class="k">def</code> <code class="nf-Magic">__repr__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
        <code class="k">return</code> <code class="n">f</code><code class="s2">"CountingClicker(count={self.count})"</code></pre>&#13;
&#13;
<p>And finally we need to implement the <em>public API</em> of our class:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting">    <code class="k">def</code> <code class="nf">click</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">num_times</code> <code class="o">=</code> <code class="mi">1</code><code class="p">):</code>&#13;
        <code class="sd">"""Click the clicker some number of times."""</code>&#13;
        <code class="bp">self</code><code class="o">.</code><code class="n">count</code> <code class="o">+=</code> <code class="n">num_times</code>&#13;
&#13;
    <code class="k">def</code> <code class="nf">read</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">count</code>&#13;
&#13;
    <code class="k">def</code> <code class="nf">reset</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
        <code class="bp">self</code><code class="o">.</code><code class="n">count</code> <code class="o">=</code> <code class="mi">0</code></pre>&#13;
&#13;
<p>Having defined it, let’s use <code>assert</code> to write some test cases for our clicker:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">clicker</code> <code class="o">=</code> <code class="n">CountingClicker</code><code class="p">()</code>&#13;
<code class="k">assert</code> <code class="n">clicker</code><code class="o">.</code><code class="n">read</code><code class="p">()</code> <code class="o">==</code> <code class="mi">0</code><code class="p">,</code> <code class="s2">"clicker should start with count 0"</code>&#13;
<code class="n">clicker</code><code class="o">.</code><code class="n">click</code><code class="p">()</code>&#13;
<code class="n">clicker</code><code class="o">.</code><code class="n">click</code><code class="p">()</code>&#13;
<code class="k">assert</code> <code class="n">clicker</code><code class="o">.</code><code class="n">read</code><code class="p">()</code> <code class="o">==</code> <code class="mi">2</code><code class="p">,</code> <code class="s2">"after two clicks, clicker should have count 2"</code>&#13;
<code class="n">clicker</code><code class="o">.</code><code class="n">reset</code><code class="p">()</code>&#13;
<code class="k">assert</code> <code class="n">clicker</code><code class="o">.</code><code class="n">read</code><code class="p">()</code> <code class="o">==</code> <code class="mi">0</code><code class="p">,</code> <code class="s2">"after reset, clicker should be back to 0"</code></pre>&#13;
&#13;
<p>Writing tests like these help us be confident that our code is working the way&#13;
it’s designed to, and that it remains doing so whenever we make changes to it.</p>&#13;
&#13;
<p>We’ll also occasionally create <em>subclasses</em> that <em>inherit</em> some of their functionality from a parent class. For example, we could create a non-reset-able clicker by using <code>CountingClicker</code> as the base class and overriding the <code>reset</code> method to do nothing:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># A subclass inherits all the behavior of its parent class.</code>&#13;
<code class="k">class</code> <code class="nc">NoResetClicker</code><code class="p">(</code><code class="n">CountingClicker</code><code class="p">):</code>&#13;
    <code class="c1"># This class has all the same methods as CountingClicker</code>&#13;
&#13;
    <code class="c1"># Except that it has a reset method that does nothing.</code>&#13;
    <code class="k">def</code> <code class="nf">reset</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
        <code class="k">pass</code>&#13;
&#13;
<code class="n">clicker2</code> <code class="o">=</code> <code class="n">NoResetClicker</code><code class="p">()</code>&#13;
<code class="k">assert</code> <code class="n">clicker2</code><code class="o">.</code><code class="n">read</code><code class="p">()</code> <code class="o">==</code> <code class="mi">0</code>&#13;
<code class="n">clicker2</code><code class="o">.</code><code class="n">click</code><code class="p">()</code>&#13;
<code class="k">assert</code> <code class="n">clicker2</code><code class="o">.</code><code class="n">read</code><code class="p">()</code> <code class="o">==</code> <code class="mi">1</code>&#13;
<code class="n">clicker2</code><code class="o">.</code><code class="n">reset</code><code class="p">()</code>&#13;
<code class="k">assert</code> <code class="n">clicker2</code><code class="o">.</code><code class="n">read</code><code class="p">()</code> <code class="o">==</code> <code class="mi">1</code><code class="p">,</code> <code class="s2">"reset shouldn't do anything"</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Iterables and Generators" data-type="sect1"><div class="sect1" id="generators">&#13;
<h1>Iterables and Generators</h1>&#13;
&#13;
<p>One<a data-primary="Python" data-secondary="iterables and generators" data-type="indexterm" id="idm45635763940552"/><a data-primary="generators" data-type="indexterm" id="idm45635763939576"/><a data-primary="iterables" data-type="indexterm" id="idm45635763938904"/> nice thing about a list is that you can retrieve specific elements by their indices.&#13;
But you don’t always need this! A list of a billion numbers takes up a lot of memory.&#13;
If you only want the elements one at a time, there’s no good reason to keep them all around.&#13;
If you only end up needing the first several elements, generating the entire billion is hugely wasteful.</p>&#13;
&#13;
<p>Often all we need is to iterate over the collection using <code>for</code> and <code>in</code>.&#13;
In this case we can create  <em>generators</em>, which&#13;
can be iterated over just like lists but generate their values lazily on demand.</p>&#13;
&#13;
<p>One way to create generators is with functions and the <code>yield</code> operator:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">generate_range</code><code class="p">(</code><code class="n">n</code><code class="p">):</code>&#13;
    <code class="n">i</code> <code class="o">=</code> <code class="mi">0</code>&#13;
    <code class="k">while</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="n">n</code><code class="p">:</code>&#13;
        <code class="k">yield</code> <code class="n">i</code>   <code class="c1"># every call to yield produces a value of the generator</code>&#13;
        <code class="n">i</code> <code class="o">+=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>The following loop will consume the <code>yield</code>ed values one at a time until none are left:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="n">generate_range</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"i: {i}"</code><code class="p">)</code></pre>&#13;
&#13;
<p>(In fact, <code>range</code> is itself lazy, so there’s no point in doing this.)</p>&#13;
&#13;
<p>With a generator, you can even create an infinite sequence:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">natural_numbers</code><code class="p">():</code>&#13;
    <code class="sd">"""returns 1, 2, 3, ..."""</code>&#13;
    <code class="n">n</code> <code class="o">=</code> <code class="mi">1</code>&#13;
    <code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
        <code class="k">yield</code> <code class="n">n</code>&#13;
        <code class="n">n</code> <code class="o">+=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>although you probably shouldn’t iterate over it without using some kind of <code>break</code> logic.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>The flip side of laziness is that you can only iterate through a generator once.  If you need to iterate through something multiple times, you’ll need to either re-create the generator each time or use a list.&#13;
If generating the values is expensive, that might be a good reason to use a list instead.</p>&#13;
</div>&#13;
&#13;
<p>A second way to create generators is by using <code>for</code> comprehensions wrapped in parentheses:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">evens_below_20</code> <code class="o">=</code> <code class="p">(</code><code class="n">i</code> <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="n">generate_range</code><code class="p">(</code><code class="mi">20</code><code class="p">)</code> <code class="k">if</code> <code class="n">i</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">0</code><code class="p">)</code></pre>&#13;
&#13;
<p>Such a “generator comprehension” doesn’t do any work until&#13;
you iterate over it (using <code>for</code> or <code>next</code>). We can use this&#13;
to build up elaborate data-processing pipelines:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># None of these computations *does* anything until we iterate</code>&#13;
<code class="n">data</code> <code class="o">=</code> <code class="n">natural_numbers</code><code class="p">()</code>&#13;
<code class="n">evens</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">data</code> <code class="k">if</code> <code class="n">x</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">0</code><code class="p">)</code>&#13;
<code class="n">even_squares</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code> <code class="o">**</code> <code class="mi">2</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">evens</code><code class="p">)</code>&#13;
<code class="n">even_squares_ending_in_six</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">even_squares</code> <code class="k">if</code> <code class="n">x</code> <code class="o">%</code> <code class="mi">10</code> <code class="o">==</code> <code class="mi">6</code><code class="p">)</code>&#13;
<code class="c1"># and so on</code></pre>&#13;
&#13;
<p>Not<a data-primary="enumerate function" data-type="indexterm" id="idm45635763697320"/> infrequently, when we’re iterating over a list or a generator&#13;
we’ll want not just the values but also their indices. For this common&#13;
case Python provides an <code>enumerate</code> function, which turns values&#13;
into pairs <code>(index, value)</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">names</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"Alice"</code><code class="p">,</code> <code class="s2">"Bob"</code><code class="p">,</code> <code class="s2">"Charlie"</code><code class="p">,</code> <code class="s2">"Debbie"</code><code class="p">]</code>&#13;
&#13;
<code class="c1"># not Pythonic</code>&#13;
<code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">names</code><code class="p">)):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"name {i} is {names[i]}"</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># also not Pythonic</code>&#13;
<code class="n">i</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="k">for</code> <code class="n">name</code> <code class="ow">in</code> <code class="n">names</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"name {i} is {names[i]}"</code><code class="p">)</code>&#13;
    <code class="n">i</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
&#13;
<code class="c1"># Pythonic</code>&#13;
<code class="k">for</code> <code class="n">i</code><code class="p">,</code> <code class="n">name</code> <code class="ow">in</code> <code class="nb">enumerate</code><code class="p">(</code><code class="n">names</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"name {i} is {name}"</code><code class="p">)</code></pre>&#13;
&#13;
<p>We’ll use this a lot.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Randomness" data-type="sect1"><div class="sect1" id="idm45635764340616">&#13;
<h1>Randomness</h1>&#13;
&#13;
<p>As<a data-primary="Python" data-secondary="randomness" data-type="indexterm" id="idm45635763591704"/><a data-primary="randomness" data-type="indexterm" id="idm45635763590696"/> we learn data science, we will frequently need to generate random numbers,&#13;
which we can do with the <code>random</code> module:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">import</code> <code class="nn">random</code>&#13;
<code class="n">random</code><code class="o">.</code><code class="n">seed</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>  <code class="c1"># this ensures we get the same results every time</code>&#13;
&#13;
<code class="n">four_uniform_randoms</code> <code class="o">=</code> <code class="p">[</code><code class="n">random</code><code class="o">.</code><code class="n">random</code><code class="p">()</code> <code class="k">for</code> <code class="n">_</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">4</code><code class="p">)]</code>&#13;
&#13;
<code class="c1"># [0.5714025946899135,       # random.random() produces numbers</code>&#13;
<code class="c1">#  0.4288890546751146,       # uniformly between 0 and 1.</code>&#13;
<code class="c1">#  0.5780913011344704,       # It's the random function we'll use</code>&#13;
<code class="c1">#  0.20609823213950174]      # most often.</code></pre>&#13;
&#13;
<p>The <code>random</code> module actually produces <em>pseudorandom</em> (that is, deterministic) numbers&#13;
based on an internal state that you can set with <code>random.seed</code> if you want to get&#13;
reproducible results:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">random</code><code class="o">.</code><code class="n">seed</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>         <code class="c1"># set the seed to 10</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">random</code><code class="o">.</code><code class="n">random</code><code class="p">())</code>  <code class="c1"># 0.57140259469</code>&#13;
<code class="n">random</code><code class="o">.</code><code class="n">seed</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>         <code class="c1"># reset the seed to 10</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">random</code><code class="o">.</code><code class="n">random</code><code class="p">())</code>  <code class="c1"># 0.57140259469 again</code></pre>&#13;
&#13;
<p>We’ll sometimes use <code>random.randrange</code>, which takes either one or two arguments and returns an element chosen randomly from the corresponding <code>range</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">random</code><code class="o">.</code><code class="n">randrange</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>    <code class="c1"># choose randomly from range(10) = [0, 1, ..., 9]</code>&#13;
<code class="n">random</code><code class="o">.</code><code class="n">randrange</code><code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="mi">6</code><code class="p">)</code>  <code class="c1"># choose randomly from range(3, 6) = [3, 4, 5]</code></pre>&#13;
&#13;
<p>There are a few more methods that we’ll sometimes find convenient. For example, <code>random.shuffle</code> randomly reorders the elements of a list:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">up_to_ten</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">10</code><code class="p">]</code>&#13;
<code class="n">random</code><code class="o">.</code><code class="n">shuffle</code><code class="p">(</code><code class="n">up_to_ten</code><code class="p">)</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">up_to_ten</code><code class="p">)</code>&#13;
<code class="c1"># [7, 2, 6, 8, 9, 4, 10, 1, 3, 5]   (your results will probably be different)</code></pre>&#13;
&#13;
<p>If you need to randomly pick one element from a list, you can use <code>random.choice</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">my_best_friend</code> <code class="o">=</code> <code class="n">random</code><code class="o">.</code><code class="n">choice</code><code class="p">([</code><code class="s2">"Alice"</code><code class="p">,</code> <code class="s2">"Bob"</code><code class="p">,</code> <code class="s2">"Charlie"</code><code class="p">])</code>     <code class="c1"># "Bob" for me</code></pre>&#13;
&#13;
<p>And if you need to randomly choose a sample of elements without replacement (i.e., with no duplicates), you can use <code>random.sample</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">lottery_numbers</code> <code class="o">=</code> <code class="nb">range</code><code class="p">(</code><code class="mi">60</code><code class="p">)</code>&#13;
<code class="n">winning_numbers</code> <code class="o">=</code> <code class="n">random</code><code class="o">.</code><code class="n">sample</code><code class="p">(</code><code class="n">lottery_numbers</code><code class="p">,</code> <code class="mi">6</code><code class="p">)</code>  <code class="c1"># [16, 36, 10, 6, 25, 9]</code></pre>&#13;
&#13;
<p>To choose a sample of elements <em>with</em> replacement (i.e., allowing duplicates), you can just make multiple calls to <code>random.choice</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">four_with_replacement</code> <code class="o">=</code> <code class="p">[</code><code class="n">random</code><code class="o">.</code><code class="n">choice</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">))</code> <code class="k">for</code> <code class="n">_</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">4</code><code class="p">)]</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">four_with_replacement</code><code class="p">)</code>  <code class="c1"># [9, 4, 4, 2]</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Regular Expressions" data-type="sect1"><div class="sect1" id="idm45635763321464">&#13;
<h1>Regular Expressions</h1>&#13;
&#13;
<p>Regular expressions<a data-primary="Python" data-secondary="regular expressions" data-type="indexterm" id="idm45635763263544"/><a data-primary="regular expressions" data-type="indexterm" id="idm45635763262536"/> provide a way of searching text.  They are incredibly useful, but also fairly complicated—so much so that there are entire books written about them. We will get into their details the few times we encounter them; here are a few examples of how to use them in Python:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">import</code> <code class="nn">re</code>&#13;
&#13;
<code class="n">re_examples</code> <code class="o">=</code> <code class="p">[</code>                        <code class="c1"># All of these are True, because</code>&#13;
    <code class="ow">not</code> <code class="n">re</code><code class="o">.</code><code class="n">match</code><code class="p">(</code><code class="s2">"a"</code><code class="p">,</code> <code class="s2">"cat"</code><code class="p">),</code>              <code class="c1">#  'cat' doesn't start with 'a'</code>&#13;
    <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s2">"a"</code><code class="p">,</code> <code class="s2">"cat"</code><code class="p">),</code>                 <code class="c1">#  'cat' has an 'a' in it</code>&#13;
    <code class="ow">not</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s2">"c"</code><code class="p">,</code> <code class="s2">"dog"</code><code class="p">),</code>             <code class="c1">#  'dog' doesn't have a 'c' in it.</code>&#13;
    <code class="mi">3</code> <code class="o">==</code> <code class="nb">len</code><code class="p">(</code><code class="n">re</code><code class="o">.</code><code class="n">split</code><code class="p">(</code><code class="s2">"[ab]"</code><code class="p">,</code> <code class="s2">"carbs"</code><code class="p">)),</code>   <code class="c1">#  Split on a or b to ['c','r','s'].</code>&#13;
    <code class="s2">"R-D-"</code> <code class="o">==</code> <code class="n">re</code><code class="o">.</code><code class="n">sub</code><code class="p">(</code><code class="s2">"[0-9]"</code><code class="p">,</code> <code class="s2">"-"</code><code class="p">,</code> <code class="s2">"R2D2"</code><code class="p">)</code> <code class="c1">#  Replace digits with dashes.</code>&#13;
    <code class="p">]</code>&#13;
&#13;
<code class="k">assert</code> <code class="nb">all</code><code class="p">(</code><code class="n">re_examples</code><code class="p">),</code> <code class="s2">"all the regex examples should be True"</code></pre>&#13;
&#13;
<p>One important thing to note is that <code>re.match</code> checks whether the <em>beginning</em> of a string&#13;
matches a regular expression, while <code>re.search</code> checks whether <em>any part</em> of a string&#13;
matches a regular expression. At some point you will mix these two up and it will cause&#13;
you grief.</p>&#13;
&#13;
<p>The <a href="https://docs.python.org/3/library/re.html">official documentation</a> goes into much more detail.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Functional Programming" data-type="sect1"><div class="sect1" id="idm45635763109032">&#13;
<h1>Functional Programming</h1>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The<a data-primary="Python" data-secondary="functional programming" data-type="indexterm" id="idm45635763106888"/><a data-primary="functional programming" data-type="indexterm" id="idm45635763105880"/> first edition of this book introduced the Python functions&#13;
<code>partial</code>, <code>map</code>, <code>reduce</code>, and <code>filter</code> at this point. On my journey toward&#13;
enlightenment I have realized that these functions are best avoided,&#13;
and their uses in the book have been replaced with list comprehensions, <code>for</code> loops, and other, more Pythonic constructs.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="zip and Argument Unpacking" data-type="sect1"><div class="sect1" id="idm45635763102488">&#13;
<h1>zip and Argument Unpacking</h1>&#13;
&#13;
<p>Often<a data-primary="Python" data-secondary="zip function" data-type="indexterm" id="idm45635763100792"/><a data-primary="Python" data-secondary="argument unpacking" data-type="indexterm" id="idm45635763099784"/><a data-primary="zip function" data-type="indexterm" id="idm45635763098840"/><a data-primary="argument unpacking" data-type="indexterm" id="idm45635763098168"/> we will need to <em>zip</em> two or more iterables together. The <code>zip</code> function transforms multiple iterables into a single iterable of tuples of corresponding function:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">list1</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">]</code>&#13;
<code class="n">list2</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code>&#13;
&#13;
<code class="c1"># zip is lazy, so you have to do something like the following</code>&#13;
<code class="p">[</code><code class="n">pair</code> <code class="k">for</code> <code class="n">pair</code> <code class="ow">in</code> <code class="nb">zip</code><code class="p">(</code><code class="n">list1</code><code class="p">,</code> <code class="n">list2</code><code class="p">)]</code>    <code class="c1"># is [('a', 1), ('b', 2), ('c', 3)]</code></pre>&#13;
&#13;
<p>If the lists are different lengths, <code>zip</code> stops as soon as the first list ends.</p>&#13;
&#13;
<p>You can also “unzip” a list using a strange trick:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">pairs</code> <code class="o">=</code> <code class="p">[(</code><code class="s1">'a'</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="s1">'b'</code><code class="p">,</code> <code class="mi">2</code><code class="p">),</code> <code class="p">(</code><code class="s1">'c'</code><code class="p">,</code> <code class="mi">3</code><code class="p">)]</code>&#13;
<code class="n">letters</code><code class="p">,</code> <code class="n">numbers</code> <code class="o">=</code> <code class="nb">zip</code><code class="p">(</code><code class="o">*</code><code class="n">pairs</code><code class="p">)</code></pre>&#13;
&#13;
<p>The asterisk (<code>*</code>) performs <em>argument unpacking</em>, which uses the elements of <code>pairs</code> as individual arguments to <code>zip</code>.  It ends up the same as if you’d called:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">letters</code><code class="p">,</code> <code class="n">numbers</code> <code class="o">=</code> <code class="nb">zip</code><code class="p">((</code><code class="s1">'a'</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="s1">'b'</code><code class="p">,</code> <code class="mi">2</code><code class="p">),</code> <code class="p">(</code><code class="s1">'c'</code><code class="p">,</code> <code class="mi">3</code><code class="p">))</code></pre>&#13;
&#13;
<p>You can use argument unpacking with any function:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">add</code><code class="p">(</code><code class="n">a</code><code class="p">,</code> <code class="n">b</code><code class="p">):</code> <code class="k">return</code> <code class="n">a</code> <code class="o">+</code> <code class="n">b</code>&#13;
&#13;
<code class="n">add</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code>      <code class="c1"># returns 3</code>&#13;
<code class="k">try</code><code class="p">:</code>&#13;
    <code class="n">add</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">])</code>&#13;
<code class="k">except</code> <code class="ne">TypeError</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"add expects two inputs"</code><code class="p">)</code>&#13;
<code class="n">add</code><code class="p">(</code><code class="o">*</code><code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">])</code>   <code class="c1"># returns 3</code></pre>&#13;
&#13;
<p>It is rare that we’ll find this useful, but when we do it’s a neat trick.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="args and kwargs" data-type="sect1"><div class="sect1" id="idm45635762839400">&#13;
<h1>args and kwargs</h1>&#13;
&#13;
<p>Let’s<a data-primary="Python" data-secondary="args" data-type="indexterm" id="idm45635762881272"/><a data-primary="Python" data-secondary="kwargs" data-type="indexterm" id="idm45635762880264"/><a data-primary="kwargs" data-type="indexterm" id="idm45635762879320"/><a data-primary="args" data-type="indexterm" id="idm45635762878648"/> say we want to create a higher-order function&#13;
that takes as input some function <code>f</code>&#13;
and returns a new function that for any input returns&#13;
twice the value of <code>f</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">doubler</code><code class="p">(</code><code class="n">f</code><code class="p">):</code>&#13;
    <code class="c1"># Here we define a new function that keeps a reference to f</code>&#13;
    <code class="k">def</code> <code class="nf">g</code><code class="p">(</code><code class="n">x</code><code class="p">):</code>&#13;
        <code class="k">return</code> <code class="mi">2</code> <code class="o">*</code> <code class="n">f</code><code class="p">(</code><code class="n">x</code><code class="p">)</code>&#13;
&#13;
    <code class="c1"># And return that new function</code>&#13;
    <code class="k">return</code> <code class="n">g</code></pre>&#13;
&#13;
<p>This works in some cases:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">f1</code><code class="p">(</code><code class="n">x</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">x</code> <code class="o">+</code> <code class="mi">1</code>&#13;
&#13;
<code class="n">g</code> <code class="o">=</code> <code class="n">doubler</code><code class="p">(</code><code class="n">f1</code><code class="p">)</code>&#13;
<code class="k">assert</code> <code class="n">g</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code> <code class="o">==</code> <code class="mi">8</code><code class="p">,</code>  <code class="s2">"(3 + 1) * 2 should equal 8"</code>&#13;
<code class="k">assert</code> <code class="n">g</code><code class="p">(</code><code class="o">-</code><code class="mi">1</code><code class="p">)</code> <code class="o">==</code> <code class="mi">0</code><code class="p">,</code> <code class="s2">"(-1 + 1) * 2 should equal 0"</code></pre>&#13;
&#13;
<p>However, it doesn’t work with functions that take more than a single argument:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">f2</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">x</code> <code class="o">+</code> <code class="n">y</code>&#13;
&#13;
<code class="n">g</code> <code class="o">=</code> <code class="n">doubler</code><code class="p">(</code><code class="n">f2</code><code class="p">)</code>&#13;
<code class="k">try</code><code class="p">:</code>&#13;
    <code class="n">g</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code>&#13;
<code class="k">except</code> <code class="ne">TypeError</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"as defined, g only takes one argument"</code><code class="p">)</code></pre>&#13;
&#13;
<p>What we need is a way to specify a function that takes arbitrary arguments.&#13;
We can do this with argument unpacking and a little bit of magic:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">magic</code><code class="p">(</code><code class="o">*</code><code class="n">args</code><code class="p">,</code> <code class="o">**</code><code class="n">kwargs</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"unnamed args:"</code><code class="p">,</code> <code class="n">args</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"keyword args:"</code><code class="p">,</code> <code class="n">kwargs</code><code class="p">)</code>&#13;
&#13;
<code class="n">magic</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="n">key</code><code class="o">=</code><code class="s2">"word"</code><code class="p">,</code> <code class="n">key2</code><code class="o">=</code><code class="s2">"word2"</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># prints</code>&#13;
<code class="c1">#  unnamed args: (1, 2)</code>&#13;
<code class="c1">#  keyword args: {'key': 'word', 'key2': 'word2'}</code></pre>&#13;
&#13;
<p>That is, when we define a function like this, <code>args</code> is a tuple of its unnamed arguments&#13;
and <code>kwargs</code> is a <code>dict</code> of its named arguments.  It works the other way too, if you&#13;
want to use a <code>list</code> (or <code>tuple</code>) and <code>dict</code> to <em>supply</em> arguments to a function:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">other_way_magic</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">,</code> <code class="n">z</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">x</code> <code class="o">+</code> <code class="n">y</code> <code class="o">+</code> <code class="n">z</code>&#13;
&#13;
<code class="n">x_y_list</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">]</code>&#13;
<code class="n">z_dict</code> <code class="o">=</code> <code class="p">{</code><code class="s2">"z"</code><code class="p">:</code> <code class="mi">3</code><code class="p">}</code>&#13;
<code class="k">assert</code> <code class="n">other_way_magic</code><code class="p">(</code><code class="o">*</code><code class="n">x_y_list</code><code class="p">,</code> <code class="o">**</code><code class="n">z_dict</code><code class="p">)</code> <code class="o">==</code> <code class="mi">6</code><code class="p">,</code> <code class="s2">"1 + 2 + 3 should be 6"</code></pre>&#13;
&#13;
<p>You could do all sorts of strange tricks&#13;
with this; we will only use it to produce&#13;
higher-order functions whose inputs&#13;
can accept arbitrary arguments:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">doubler_correct</code><code class="p">(</code><code class="n">f</code><code class="p">):</code>&#13;
    <code class="sd">"""works no matter what kind of inputs f expects"""</code>&#13;
    <code class="k">def</code> <code class="nf">g</code><code class="p">(</code><code class="o">*</code><code class="n">args</code><code class="p">,</code> <code class="o">**</code><code class="n">kwargs</code><code class="p">):</code>&#13;
        <code class="sd">"""whatever arguments g is supplied, pass them through to f"""</code>&#13;
        <code class="k">return</code> <code class="mi">2</code> <code class="o">*</code> <code class="n">f</code><code class="p">(</code><code class="o">*</code><code class="n">args</code><code class="p">,</code> <code class="o">**</code><code class="n">kwargs</code><code class="p">)</code>&#13;
    <code class="k">return</code> <code class="n">g</code>&#13;
&#13;
<code class="n">g</code> <code class="o">=</code> <code class="n">doubler_correct</code><code class="p">(</code><code class="n">f2</code><code class="p">)</code>&#13;
<code class="k">assert</code> <code class="n">g</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code> <code class="o">==</code> <code class="mi">6</code><code class="p">,</code> <code class="s2">"doubler should work now"</code></pre>&#13;
&#13;
<p>As a general rule, your code will be more correct and more readable&#13;
if you are explicit about what sorts of arguments your functions require;&#13;
accordingly, we will use <code>args</code> and <code>kwargs</code> only when we have no other option.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Type Annotations" data-type="sect1"><div class="sect1" id="idm45635762882312">&#13;
<h1>Type Annotations</h1>&#13;
&#13;
<p>Python<a data-primary="Python" data-secondary="type annotations" data-type="indexterm" id="Ptype02"/><a data-primary="type annotations" data-type="indexterm" id="typeannot02"/><a data-primary="dynamically typed languages" data-type="indexterm" id="idm45635762472904"/> is a <em>dynamically typed</em> language.&#13;
That means that it in general it doesn’t care about the types of objects&#13;
we use, as long as we use them in valid ways:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">add</code><code class="p">(</code><code class="n">a</code><code class="p">,</code> <code class="n">b</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">a</code> <code class="o">+</code> <code class="n">b</code>&#13;
&#13;
<code class="k">assert</code> <code class="n">add</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mi">5</code><code class="p">)</code> <code class="o">==</code> <code class="mi">15</code><code class="p">,</code>                  <code class="s2">"+ is valid for numbers"</code>&#13;
<code class="k">assert</code> <code class="n">add</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="p">[</code><code class="mi">3</code><code class="p">])</code> <code class="o">==</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code>     <code class="s2">"+ is valid for lists"</code>&#13;
<code class="k">assert</code> <code class="n">add</code><code class="p">(</code><code class="s2">"hi "</code><code class="p">,</code> <code class="s2">"there"</code><code class="p">)</code> <code class="o">==</code> <code class="s2">"hi there"</code><code class="p">,</code> <code class="s2">"+ is valid for strings"</code>&#13;
&#13;
<code class="k">try</code><code class="p">:</code>&#13;
    <code class="n">add</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="s2">"five"</code><code class="p">)</code>&#13;
<code class="k">except</code> <code class="ne">TypeError</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"cannot add an int to a string"</code><code class="p">)</code></pre>&#13;
&#13;
<p>whereas<a data-primary="statically typed languages" data-type="indexterm" id="idm45635762469560"/> in a <em>statically typed</em> language our functions and objects&#13;
would have specific types:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">add</code><code class="p">(</code><code class="n">a</code><code class="p">:</code> <code class="nb">int</code><code class="p">,</code> <code class="n">b</code><code class="p">:</code> <code class="nb">int</code><code class="p">)</code> <code class="o">-&gt;</code> <code class="nb">int</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="n">a</code> <code class="o">+</code> <code class="n">b</code>&#13;
&#13;
<code class="n">add</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mi">5</code><code class="p">)</code>           <code class="c1"># you'd like this to be OK</code>&#13;
<code class="n">add</code><code class="p">(</code><code class="s2">"hi "</code><code class="p">,</code> <code class="s2">"there"</code><code class="p">)</code>  <code class="c1"># you'd like this to be not OK</code></pre>&#13;
&#13;
<p>In fact, recent versions of Python do (sort of) have this functionality.&#13;
The preceding version of <code>add</code> with the <code>int</code> type annotations is valid Python 3.6!</p>&#13;
&#13;
<p>However, these type annotations don’t actually <em>do</em> anything.&#13;
You can still use the annotated <code>add</code> function to add strings,&#13;
and the call to <code>add(10, "five")</code> will still raise the exact same <code>TypeError</code>.</p>&#13;
&#13;
<p>That said, there are still (at least) four good reasons to use type annotations&#13;
in your Python code:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Types are an important form of documentation. This is doubly true in a book&#13;
that is using code to teach you theoretical and mathematical concepts. Compare&#13;
the following two function stubs:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">dot_product</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">):</code> <code class="o">...</code>&#13;
&#13;
<code class="c1"># we have not yet defined Vector, but imagine we had</code>&#13;
<code class="k">def</code> <code class="nf">dot_product</code><code class="p">(</code><code class="n">x</code><code class="p">:</code> <code class="n">Vector</code><code class="p">,</code> <code class="n">y</code><code class="p">:</code> <code class="n">Vector</code><code class="p">)</code> <code class="o">-&gt;</code> <code class="nb">float</code><code class="p">:</code> <code class="o">...</code></pre>&#13;
&#13;
<p>I find the second one exceedingly more informative; hopefully you do too.&#13;
(At this point I have gotten so used to type hinting&#13;
 that I now find untyped Python difficult to read.)</p>&#13;
</li>&#13;
<li>&#13;
<p>There are external tools (the most popular is <code>mypy</code>) that will read your code,&#13;
inspect the type annotations, and let you know about type errors <em>before you ever run your code</em>.&#13;
For example, if you ran <code>mypy</code> over a file containing <code>add("hi ", "there")</code>, it would warn you:</p>&#13;
&#13;
<pre data-type="programlisting">error: Argument 1 to "add" has incompatible type "str"; expected "int"</pre>&#13;
&#13;
<p>Like <code>assert</code> testing, this is a good way to find mistakes in your code&#13;
before you ever run it. The narrative in the book will not involve such a type checker;&#13;
however, behind the scenes I will be running one,&#13;
which will help ensure <em>that the book itself is correct</em>.</p>&#13;
</li>&#13;
<li>&#13;
<p>Having to think about the types in your code forces you to design&#13;
cleaner functions and interfaces:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">typing</code> <code class="kn">import</code> <code class="n">Union</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">secretly_ugly_function</code><code class="p">(</code><code class="n">value</code><code class="p">,</code> <code class="n">operation</code><code class="p">):</code> <code class="o">...</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">ugly_function</code><code class="p">(</code><code class="n">value</code><code class="p">:</code> <code class="nb">int</code><code class="p">,</code>&#13;
                  <code class="n">operation</code><code class="p">:</code> <code class="n">Union</code><code class="p">[</code><code class="nb">str</code><code class="p">,</code> <code class="nb">int</code><code class="p">,</code> <code class="nb">float</code><code class="p">,</code> <code class="nb">bool</code><code class="p">])</code> <code class="o">-&gt;</code> <code class="nb">int</code><code class="p">:</code>&#13;
    <code class="o">...</code></pre>&#13;
&#13;
<p>Here we have a function whose <code>operation</code> parameter&#13;
is allowed to be a <code>string</code>, or an <code>int</code>, or a <code>float</code>, or a <code>bool</code>. It is highly likely that this function is fragile and difficult to use, but it becomes far more clear when the types are made explicit. Doing so, then, will force us to design in a less clunky way, for which our users will thank us.</p>&#13;
</li>&#13;
<li>&#13;
<p>Using types allows your editor to help you with things like autocomplete (<a data-type="xref" href="#VScode">Figure 2-1</a>) and to get angry at type errors.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<figure><div class="figure" id="VScode">&#13;
<img alt="VSCode, but likely your editor does the same." src="assets/dsf2_02in01.png"/>&#13;
<h6><span class="label">Figure 2-1. </span>VSCode, but likely your editor does the same</h6>&#13;
</div></figure>&#13;
&#13;
<p>Sometimes people insist that type hints may be valuable on large projects&#13;
but are not worth the time for small ones. However, since type&#13;
hints take almost no additional time to type and allow your editor to save you time,&#13;
I maintain that they actually allow you to write code more quickly,&#13;
even for small projects.</p>&#13;
&#13;
<p>For all these reasons, all of the code in the remainder of the book&#13;
will use type annotations. I expect that some readers&#13;
will be put off by the use of type annotations; however, I suspect&#13;
by the end of the book they will have changed their minds.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="How to Write Type Annotations" data-type="sect2"><div class="sect2" id="idm45635762155848">&#13;
<h2>How to Write Type Annotations</h2>&#13;
&#13;
<p>As we’ve seen, for built-in types like <code>int</code> and <code>bool</code> and <code>float</code>,&#13;
you just use the type itself as the annotation. What if you had (say) a <code>list</code>?</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">total</code><code class="p">(</code><code class="n">xs</code><code class="p">:</code> <code class="nb">list</code><code class="p">)</code> <code class="o">-&gt;</code> <code class="nb">float</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="nb">sum</code><code class="p">(</code><code class="n">total</code><code class="p">)</code></pre>&#13;
&#13;
<p>This isn’t wrong, but the type is not specific enough.&#13;
It’s clear we really want <code>xs</code> to be a <code>list</code> of <code>floats</code>, not (say) a <code>list</code> of strings.</p>&#13;
&#13;
<p>The <code>typing</code> module provides a number of parameterized types that we can use to do just this:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">typing</code> <code class="kn">import</code> <code class="n">List</code>  <code class="c1"># note capital L</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">total</code><code class="p">(</code><code class="n">xs</code><code class="p">:</code> <code class="n">List</code><code class="p">[</code><code class="nb">float</code><code class="p">])</code> <code class="o">-&gt;</code> <code class="nb">float</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="nb">sum</code><code class="p">(</code><code class="n">total</code><code class="p">)</code></pre>&#13;
&#13;
<p>Up until now we’ve only specified annotations for function parameters and return types.&#13;
For variables themselves it’s usually obvious what the type is:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># This is how to type-annotate variables when you define them.</code>&#13;
<code class="c1"># But this is unnecessary; it's "obvious" x is an int.</code>&#13;
<code class="n">x</code><code class="p">:</code> <code class="nb">int</code> <code class="o">=</code> <code class="mi">5</code></pre>&#13;
&#13;
<p>However, sometimes it’s not obvious:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">values</code> <code class="o">=</code> <code class="p">[]</code>         <code class="c1"># what's my type?</code>&#13;
<code class="n">best_so_far</code> <code class="o">=</code> <code class="bp">None</code>  <code class="c1"># what's my type?</code></pre>&#13;
&#13;
<p>In such cases we will supply inline type hints:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">typing</code> <code class="kn">import</code> <code class="n">Optional</code>&#13;
&#13;
<code class="n">values</code><code class="p">:</code> <code class="n">List</code><code class="p">[</code><code class="nb">int</code><code class="p">]</code> <code class="o">=</code> <code class="p">[]</code>&#13;
<code class="n">best_so_far</code><code class="p">:</code> <code class="n">Optional</code><code class="p">[</code><code class="nb">float</code><code class="p">]</code> <code class="o">=</code> <code class="bp">None</code>  <code class="c1"># allowed to be either a float or None</code></pre>&#13;
&#13;
<p>The <code>typing</code> module contains many other types, only a few of which we’ll ever use:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># the type annotations in this snippet are all unnecessary</code>&#13;
<code class="kn">from</code> <code class="nn">typing</code> <code class="kn">import</code> <code class="n">Dict</code><code class="p">,</code> <code class="n">Iterable</code><code class="p">,</code> <code class="n">Tuple</code>&#13;
&#13;
<code class="c1"># keys are strings, values are ints</code>&#13;
<code class="n">counts</code><code class="p">:</code> <code class="n">Dict</code><code class="p">[</code><code class="nb">str</code><code class="p">,</code> <code class="nb">int</code><code class="p">]</code> <code class="o">=</code> <code class="p">{</code><code class="s1">'data'</code><code class="p">:</code> <code class="mi">1</code><code class="p">,</code> <code class="s1">'science'</code><code class="p">:</code> <code class="mi">2</code><code class="p">}</code>&#13;
&#13;
<code class="c1"># lists and generators are both iterable</code>&#13;
<code class="k">if</code> <code class="n">lazy</code><code class="p">:</code>&#13;
    <code class="n">evens</code><code class="p">:</code> <code class="n">Iterable</code><code class="p">[</code><code class="nb">int</code><code class="p">]</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code> <code class="k">if</code> <code class="n">x</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">0</code><code class="p">)</code>&#13;
<code class="k">else</code><code class="p">:</code>&#13;
    <code class="n">evens</code> <code class="o">=</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">8</code><code class="p">]</code>&#13;
&#13;
<code class="c1"># tuples specify a type for each element</code>&#13;
<code class="n">triple</code><code class="p">:</code> <code class="n">Tuple</code><code class="p">[</code><code class="nb">int</code><code class="p">,</code> <code class="nb">float</code><code class="p">,</code> <code class="nb">int</code><code class="p">]</code> <code class="o">=</code> <code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mf">2.3</code><code class="p">,</code> <code class="mi">5</code><code class="p">)</code></pre>&#13;
&#13;
<p>Finally, since Python has first-class functions,&#13;
we need a type to represent those as well. Here’s a&#13;
pretty contrived example:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">typing</code> <code class="kn">import</code> <code class="n">Callable</code>&#13;
&#13;
<code class="c1"># The type hint says that repeater is a function that takes</code>&#13;
<code class="c1"># two arguments, a string and an int, and returns a string.</code>&#13;
<code class="k">def</code> <code class="nf">twice</code><code class="p">(</code><code class="n">repeater</code><code class="p">:</code> <code class="n">Callable</code><code class="p">[[</code><code class="nb">str</code><code class="p">,</code> <code class="nb">int</code><code class="p">],</code> <code class="nb">str</code><code class="p">],</code> <code class="n">s</code><code class="p">:</code> <code class="nb">str</code><code class="p">)</code> <code class="o">-&gt;</code> <code class="nb">str</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="n">repeater</code><code class="p">(</code><code class="n">s</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">comma_repeater</code><code class="p">(</code><code class="n">s</code><code class="p">:</code> <code class="nb">str</code><code class="p">,</code> <code class="n">n</code><code class="p">:</code> <code class="nb">int</code><code class="p">)</code> <code class="o">-&gt;</code> <code class="nb">str</code><code class="p">:</code>&#13;
    <code class="n">n_copies</code> <code class="o">=</code> <code class="p">[</code><code class="n">s</code> <code class="k">for</code> <code class="n">_</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="n">n</code><code class="p">)]</code>&#13;
    <code class="k">return</code> <code class="s1">', '</code><code class="o">.</code><code class="n">join</code><code class="p">(</code><code class="n">n_copies</code><code class="p">)</code>&#13;
&#13;
<code class="k">assert</code> <code class="n">twice</code><code class="p">(</code><code class="n">comma_repeater</code><code class="p">,</code> <code class="s2">"type hints"</code><code class="p">)</code> <code class="o">==</code> <code class="s2">"type hints, type hints"</code></pre>&#13;
&#13;
<p>As type annotations are just Python objects,&#13;
we can assign them to variables to make them&#13;
easier to refer to:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">Number</code> <code class="o">=</code> <code class="nb">int</code>&#13;
<code class="n">Numbers</code> <code class="o">=</code> <code class="n">List</code><code class="p">[</code><code class="n">Number</code><code class="p">]</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">total</code><code class="p">(</code><code class="n">xs</code><code class="p">:</code> <code class="n">Numbers</code><code class="p">)</code> <code class="o">-&gt;</code> <code class="n">Number</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="nb">sum</code><code class="p">(</code><code class="n">xs</code><code class="p">)</code></pre>&#13;
&#13;
<p>By the time you get to the end of the book,&#13;
you’ll be quite familiar with reading and writing type annotations,&#13;
and I hope you’ll use them in your code.<a data-primary="" data-startref="typeannot02" data-type="indexterm" id="idm45635761689176"/><a data-primary="" data-startref="Ptype02" data-type="indexterm" id="idm45635761688328"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Welcome to DataSciencester!" data-type="sect1"><div class="sect1" id="idm45635762476360">&#13;
<h1>Welcome to DataSciencester!</h1>&#13;
&#13;
<p>This concludes new employee orientation.  Oh, and also: try not to embezzle anything.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="For Further Exploration" data-type="sect1"><div class="sect1" id="idm45635761682600">&#13;
<h1>For Further Exploration</h1>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>There<a data-primary="Python" data-secondary="tutorials and documentation" data-type="indexterm" id="idm45635761680632"/> is no shortage of Python tutorials in the world.  The <a href="https://docs.python.org/3/tutorial/">official one</a> is not a bad place to start.</p>&#13;
</li>&#13;
<li>&#13;
<p>The <a href="http://ipython.readthedocs.io/en/stable/interactive/index.html">official IPython tutorial</a> will<a data-primary="IPython shell" data-type="indexterm" id="idm45635761677352"/> help you get started with IPython, if you decide to use it. Please use it.</p>&#13;
</li>&#13;
<li>&#13;
<p>The <a href="https://mypy.readthedocs.io/en/stable/"><code>mypy</code> documentation</a> will tell you more than you ever wanted to know about Python type annotations and type checking.</p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>