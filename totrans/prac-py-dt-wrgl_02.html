<html><head></head><body><section data-pdf-bookmark="Chapter 2. Introduction to Python" data-type="chapter" epub:type="chapter"><div class="chapter" id="chapter2">&#13;
<h1><span class="label">Chapter 2. </span>Introduction to Python</h1>&#13;
&#13;
&#13;
<p>Can you read this? If so, I have good news for you: you won’t have any trouble learning to program. Why? Because computer programming languages in general—and Python in particular—are much less complex than natural human languages. Programming languages are designed by humans to be read, for the most part, by computers, so they have simpler grammar and far fewer “parts of speech” than natural languages. So if you feel reasonably comfortable reading English—a language notorious for its large vocabulary and irregular spellings and pronunciation—rest assured that learning the fundamentals of Python is well within your reach.</p>&#13;
&#13;
<p>By the end of this chapter, you’ll have all the Python skills you need to begin doing basic data wrangling with the common data formats that we’ll cover in <a data-type="xref" href="ch04.html#chapter4">Chapter 4</a>. To get to that point, we’ll start by doing some basic coding exercises that cover the &#13;
<span class="keep-together">following</span>:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Essential Python “parts of speech” and its basic grammar/syntax</p>&#13;
</li>&#13;
<li>&#13;
<p>How the computer reads and interprets your Python code</p>&#13;
</li>&#13;
<li>&#13;
<p>How to use code “recipes” that are built by others (and yourself!) to quickly expand what your own code can do</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Throughout this chapter, you’ll find code snippets that illustrate each concept, which are also collected in the accompanying Jupyter notebooks and standalone Python files on GitHub; these can be pulled into Google Colab or downloaded and run on a computer. While these files will let you see this chapter’s code in action, however, I <em>strongly</em> suggest that you create a new Colab/Jupyter notebook or standalone Python file and practice writing, running, and commenting this code for yourself (for a refresher on how to do this, see <a data-type="xref" href="ch01.html#hello_world">“Hello World!”</a>). While you might think this is silly, there is actually nothing more useful for building your data wrangling skills and confidence than setting up a Python file “from scratch” and then seeing code you wrote yourself make the computer do what you want—even if you are “just” retyping it from another file. Yes, you will encounter more hiccups this way, but that’s sort of the point: doing good data wrangling is not really about learning to do anything “right,” <em>it’s about learning how to recover when things go wrong</em>. Giving yourself room to make little mistakes early on (and learning how to recognize and fix them) is how you’ll truly make progress as both a data wrangler and programmer. You’ll never get that experience if all you do is run already-working code.</p>&#13;
&#13;
<p>Because these little mistakes are so important, I’ve included some “Fast Forward” sections in this chapter, which will offer you ways to take the code examples I’ve provided one step further—which often involves intentionally “breaking” the code. By the end of this chapter, you’ll be ready to combine the basics we’ve covered into a full-fledged data wrangling program that relies on real-world data. For each example, I’ll also include some explicit reminders about the kinds of things you’ll want to include in your data diary, when you’ll want to back up your code to GitHub, and so on &#13;
<span class="keep-together">so that</span> you can begin to get really comfortable with those processes and also start to develop a feel for when you’ll want to take those steps during your own data &#13;
<span class="keep-together">wrangling</span> projects.</p>&#13;
&#13;
<p>Now that you know where we’re headed—let’s get started!</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Programming “Parts of Speech”" data-type="sect1"><div class="sect1" id="idm45143423804288">&#13;
<h1>The Programming “Parts of Speech”</h1>&#13;
&#13;
<p>Different human languages use different vocabularies and syntax structures, but there are many fundamental concepts that they typically share. For example, let’s take a look at the following two sentences:</p>&#13;
<pre>My name is Susan.          // English</pre>&#13;
<pre>Je m'appelle Susan.        // French</pre>&#13;
&#13;
<p>Both of these sentences express essentially the same thing: they state what my name is. And though each language uses different words and slightly different grammatical structures, they both include parts of speech like subjects, objects, verbs, and modifiers. They also both follow similar grammar and <em>syntax</em> rules, in that they organize words and ideas into structures like sentences, paragraphs, and so on.</p>&#13;
&#13;
<p>Many programming languages also share key structural and organizational elements that roughly parallel those found in natural languages. To get a better idea of how this works, let’s start in the same way that we might when learning a new human language: by exploring programming languages’ “parts of speech.”</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Nouns ≈ Variables" data-type="sect2"><div class="sect2" id="idm45143423799392">&#13;
<h2>Nouns ≈ Variables</h2>&#13;
&#13;
<p>In<a data-primary="Python" data-secondary="variables" data-type="indexterm" id="python-variables"/><a data-primary="variables" data-type="indexterm" id="variables"/> the English language, nouns are often described as any word that refers to a “person, place, or thing.” Though this isn’t a super-precise definition, it is a handy way of illustrating the different types of entities that nouns can be. In programming languages, it is <em>variables</em> that are used to hold and refer to the different<a data-primary="Python" data-secondary="variables" data-tertiary="data types" data-type="indexterm" id="python-variables-datatype"/><a data-primary="variables" data-secondary="data types" data-type="indexterm" id="variables-datatype"/><a data-primary="data types" data-type="indexterm" id="datatypes"/> data <em>types</em> that we use to write our programs. Instead of “people, places, and things,” however, variables in the Python programming language can be one of five main data types:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Number</p>&#13;
</li>&#13;
<li>&#13;
<p>String</p>&#13;
</li>&#13;
<li>&#13;
<p>List</p>&#13;
</li>&#13;
<li>&#13;
<p>Dictionary (dict)</p>&#13;
</li>&#13;
<li>&#13;
<p>Boolean</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>As with human languages, there is a lot of overlap in types of variables that different programming languages support: what in Python we call <em>lists</em> are known as <em>arrays</em> in JavaScript or C, for example; JavaScript <em>objects</em>, on the other hand, are officially known as <em>maps</em> (or <em>dict</em>ionaries) in Python.<sup><a data-type="noteref" href="ch02.html#idm45143423781840" id="idm45143423781840-marker">1</a></sup></p>&#13;
&#13;
<p>Having read the data types list, you can probably already guess what at least some of these data types will look like. The good news is that, unlike nouns in the real world, every data type in Python can be reliably identified by its formatting and punctuation—so there’s no need to worry that you’ll mix up your <em>dicts</em> and your <em>lists</em>, as long as you take the time to look closely at the symbols that surround your data.</p>&#13;
&#13;
<p>To get a sense of the unique punctuation structure of each data type, take a look at <a data-type="xref" href="#parts_of_speech">Example 2-1</a>. In particular, make sure you open or make a copy of this code in your code editor or notebook, so you can see <a data-primary="syntax highlighting" data-type="indexterm" id="idm45143423777872"/>the <em>syntax highlighting</em> in action. Numbers should be a different color than strings, for example, and the brackets, braces, and comments (on the lines that begin with a <code>#</code>) should all be another color as well.</p>&#13;
<div data-type="example" id="parts_of_speech">&#13;
<h5><span class="label">Example 2-1. </span>parts_of_speech.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"> <code class="c1"># a number is just digits</code>&#13;
 <code class="mi">25</code>&#13;
&#13;
 <code class="c1"># a string is anything surrounded by matching quotation marks</code>&#13;
 <code class="s2">"Hello World"</code>&#13;
&#13;
 <code class="c1"># a list is surrounded by square brackets, with commas between items</code>&#13;
 <code class="c1"># note that in Python, the first item in a list is considered to be</code>&#13;
 <code class="c1"># in position `0`, the next in position `1`, and so on</code>&#13;
 <code class="p">[</code><code class="s2">"this"</code><code class="p">,</code><code class="s2">"is"</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="s2">"list"</code><code class="p">]</code>&#13;
&#13;
 <code class="c1"># a dict is a set of key:value pairs, separated by commas and surrounded</code>&#13;
 <code class="c1"># by curly braces</code>&#13;
 <code class="p">{</code><code class="s2">"title"</code><code class="p">:</code><code class="s2">"Practical Python for Data Wrangling and Data Quality"</code><code class="p">,</code>&#13;
  <code class="s2">"format"</code><code class="p">:</code> <code class="s2">"book"</code><code class="p">,</code>&#13;
  <code class="s2">"author"</code><code class="p">:</code> <code class="s2">"Susan E. McGregor"</code>&#13;
 <code class="p">}</code>&#13;
&#13;
 <code class="c1"># a boolean is a data type that has only two values, true and false.</code>&#13;
 <code class="bp">True</code></pre></div>&#13;
&#13;
<p>Of course, this list is far from exhaustive; just as human languages support “complex nouns” (like “haircut” and “bedroom”), it is possible to build more complex data types in programming languages as well. As you’ll soon see, however, there’s quite a lot that we can get done even with just this handful of<a data-primary="Python" data-secondary="variables" data-startref="python-variables-datatype" data-tertiary="data types" data-type="indexterm" id="idm45143423746336"/><a data-primary="variables" data-secondary="data types" data-startref="variables-datatype" data-type="indexterm" id="idm45143423744912"/><a data-primary="data types" data-startref="datatypes" data-type="indexterm" id="idm45143423743728"/> basic types.</p>&#13;
&#13;
<p>In the <a data-primary="Python" data-secondary="variables" data-tertiary="naming" data-type="indexterm" id="python-variables-naming"/><a data-primary="variables" data-secondary="naming" data-type="indexterm" id="variables-naming"/><a data-primary="naming" data-secondary="variables" data-type="indexterm" id="naming-variables"/>real world we also often give names to the many unique instances of “people, places, and things” in our lives, to reference and communicate about them more easily. We do this in programming, too, and for exactly the same reason: naming our variables lets us reference and modify specific pieces of data in a way the computer can understand. To see how this works, let’s try translating a simple English sentence into Python code:</p>&#13;
<pre>The author is Susan E. McGregor</pre>&#13;
&#13;
<p>After reading this sentence, you will associate the name “Susan E. McGregor” with the label “author.” If someone asks you who wrote this book, you will (hopefully) remember this and say “Susan E. McGregor.” The equivalent “sentence” in Python code is shown in <a data-type="xref" href="#naming_variable">Example 2-2</a>.</p>&#13;
<div data-type="example" id="naming_variable">&#13;
<h5><span class="label">Example 2-2. </span>Naming a Python variable</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">author</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code></pre></div>&#13;
&#13;
<p>This code tells the computer to set aside a box in memory, label it <code>author</code>, and then put the string <code>"Susan E. McGregor"</code> into that box. Later on in our program, if we asked the computer about the <code>author</code> variable, it would tell us that it contains the string <code>"Susan E. McGregor"</code>, as shown in <a data-type="xref" href="#printing_variable">Example 2-3</a>.</p>&#13;
<div data-type="example" id="printing_variable">&#13;
<h5><span class="label">Example 2-3. </span>Printing the contents of a Python variable</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a variable named author, set its contents to "Susan E. McGregor"</code>&#13;
<code class="n">author</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code>&#13;
&#13;
<code class="c1"># confirm that the computer "remembers" what's in the `author` variable</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">author</code><code class="p">)</code></pre></div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What’s in a name?" data-type="sect3"><div class="sect3" id="whats_in_a_name">&#13;
<h3>What’s in a name?</h3>&#13;
&#13;
<p>In <a data-type="xref" href="#printing_variable">Example 2-3</a>, I chose to name my variable <code>author</code>, but there is nothing magical about that choice. In principle, you can name variables almost anything you want—the only “hard-and-fast” rules are that variable names cannot:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Begin with a digit</p>&#13;
</li>&#13;
<li>&#13;
<p>Contain punctuation marks other than underscores (<code>_</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p>Be “reserved” words or “keywords” (like Number or Boolean, for example)</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>For example, I could just as easily have called the variable in <a data-type="xref" href="#printing_variable">Example 2-3</a> <code>nyc_resident</code> or even <code>fuzzy_pink_bunny</code>. What matters most is that you, as the programmer, follow the few restrictions listed previously, <em>and</em> that you use <em>exactly</em> the same variable name when trying to access its contents later (capitalization counts!). For example, create a new Python file containing the code in <a data-type="xref" href="#variable_names">Example 2-4</a>, and then run it to see what results you get.</p>&#13;
<div data-type="example" id="variable_names">&#13;
<h5><span class="label">Example 2-4. </span>noun_examples.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a variable named nyc_resident, set its contents to "Susan E. McGregor"</code>&#13;
<code class="n">nyc_resident</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code>&#13;
&#13;
<code class="c1"># confirm that the computer "remembers" what's in the `nyc_resident` variable</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">nyc_resident</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># create a variable named fuzzyPinkBunny, set its contents to "Susan E. McGregor"</code>&#13;
<code class="n">fuzzyPinkBunny</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code>&#13;
&#13;
<code class="c1"># confirm that the computer "remembers" what's in the `fuzzyPinkBunny` variable</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">fuzzyPinkBunny</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># but correct capitalization matters!</code>&#13;
<code class="c1"># the following line will produce an error</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">fuzzypinkbunny</code><code class="p">)</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Best practices for naming variables" data-type="sect3"><div class="sect3" id="idm45143423645248">&#13;
<h3>Best practices for naming variables</h3>&#13;
&#13;
<p>While all of the examples used in <a data-type="xref" href="#variable_names">Example 2-4</a> are <em>legitimate</em> variable names, not all of them are especially <em>good</em> variable names. As we’ll see throughout this book, writing good code—like any other kind of writing—is about more than just writing code that “works”; it’s also about how useful and intelligible that code is to both computers <em>and</em> people. Because of this, I consider naming variables well an essential part of good programming. In practice, <em>good</em> variable names are:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Descriptive</p>&#13;
</li>&#13;
<li>&#13;
<p>Unique (within a given file or program)</p>&#13;
</li>&#13;
<li>&#13;
<p>Readable</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Because achieving the first two properties often requires using more than one word, programmers typically use one of two stylistic conventions to help ensure that their variable names also remain <em>readable</em>, both of which are shown in <a data-type="xref" href="#variable_names">Example 2-4</a>. One approach is to add underscores (<code>_</code>) between words (e.g., <code>nyc_residents</code>) or  use “camel case,” in which the first letter of every word (except the first) is capitalized (e.g., <code>fuzzyPinkBunny</code>). In general, you should use one style and stick to it, though your code will work fine (and mostly meet the readability criteria) even if you mix them together. In this book, we’ll mostly use underscores, which also happen to be considered<a data-primary="Python" data-secondary="variables" data-startref="python-variables" data-type="indexterm" id="idm45143423567344"/><a data-primary="variables" data-startref="variables" data-type="indexterm" id="idm45143423566096"/><a data-primary="Python" data-secondary="variables" data-startref="python-variables-naming" data-tertiary="naming" data-type="indexterm" id="idm45143423565152"/><a data-primary="variables" data-secondary="naming" data-startref="variables-naming" data-type="indexterm" id="idm45143423563664"/><a data-primary="naming" data-secondary="variables" data-startref="naming-variables" data-type="indexterm" id="idm45143423562448"/> more “Pythonic.”</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Verbs ≈ Functions" data-type="sect2"><div class="sect2" id="verbs_are_functions">&#13;
<h2>Verbs ≈ Functions</h2>&#13;
&#13;
<p>In <a data-primary="Python" data-secondary="functions" data-type="indexterm" id="python-functions"/><a data-primary="functions" data-type="indexterm" id="functions"/>the English language, verbs are often described as “actions” or “states of being.” We’ve already seen a programming language equivalent of the latter: the equals sign (<code>=</code>) and the <code>print()</code> function used in the preceding examples. In English, we use forms of the verb “to be” to describe what something <em>is</em>; in Python (and many other programming languages), the value of a variable <em>is</em> whatever appears on the righthand side of the equals sign. This is why the equals sign is also sometimes described as<a data-primary="assignment operator (=)" data-type="indexterm" id="idm45143423554192"/><a data-primary="equal sign (=), as assignment operator" data-type="indexterm" id="idm45143423553488"/><a data-primary="= (equal sign), as assignment operator" data-type="indexterm" id="idm45143423552848"/> the <em>assignment operator</em>.</p>&#13;
&#13;
<p>In programming, the equivalent of “action verbs” are <em>functions</em>. In Python and many other programming languages, there<a data-primary="Python" data-secondary="functions" data-tertiary="built-in versus methods" data-type="indexterm" id="python-functions-built-in"/><a data-primary="functions" data-secondary="built-in versus methods" data-type="indexterm" id="functions-built-in"/><a data-primary="built-in functions" data-type="indexterm" id="built-in-function"/> are <em>built-in functions</em>, which represent tasks—like printing output via the <code>print()</code> function—that the language “just knows” how to do. While similar, <em>methods</em> are <a data-primary="methods" data-type="indexterm" id="methods"/>special functions that are designed to work with a particular data type and need to be “called on” a variable of that data type in order to work. The methods available for a given data type tend to reflect common tasks you might want to perform with it. So just as most humans can walk, talk, eat, drink, and grasp objects, most programming languages have <em>string methods</em> that<a data-primary="string methods" data-type="indexterm" id="idm45143423543552"/> can do tasks like stick two strings together (known as <em>concatenation</em>), <a data-primary="concatenation" data-type="indexterm" id="idm45143423542304"/>split two strings apart, and so on. But since it doesn’t make sense to “split” the number 5, the Number data type <em>doesn’t</em> have a <code>split()</code> method.</p>&#13;
&#13;
<p>What is the difference between a built-in function and a method in practice? Not much, except for the way we include these “verbs” in our Python “sentences” or <em>statements</em>. With<a data-primary="Python" data-secondary="statements" data-type="indexterm" id="idm45143426927744"/><a data-primary="statements" data-type="indexterm" id="idm45143426926736"/> a built-in function, we can simply write the function name and pass along any “ingredients” it needs, by placing them between the round parentheses. For example, if you recall our <a data-type="xref" href="ch01.html#hello_world_code">Example 1-1</a>, all we had to do was pass the<a data-primary="print() function" data-type="indexterm" id="idm45143426924928"/> string <code>Hello World!</code> to the <code>print()</code> function, like this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"> <code class="k">print</code><code class="p">(</code><code class="s2">"Hello World!"</code><code class="p">)</code></pre>&#13;
&#13;
<p>In the case of<a data-primary="split() function" data-type="indexterm" id="idm45143426908144"/> the <code>split()</code> method, however, <em>we have to attach the method to a specific string</em>. That string can either be a <em>literal</em> (that is, a series of characters surrounded by quotation marks), or it can be a variable whose value is a string. Try the code in <a data-type="xref" href="#split_string">Example 2-5</a> in a standalone file or notebook, and see what kind of output you get!</p>&#13;
<div data-type="example" id="split_string">&#13;
<h5><span class="label">Example 2-5. </span>method_madness.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># splitting a string "literal" and then printing the result</code>&#13;
<code class="n">split_world</code> <code class="o">=</code> <code class="s2">"Hello World!"</code><code class="o">.</code><code class="n">split</code><code class="p">()</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">split_world</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># assigning a string to a variable</code>&#13;
<code class="c1"># then printing the result of calling the `split()` method on it</code>&#13;
<code class="n">world_msg</code> <code class="o">=</code> <code class="s2">"Hello World!"</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">world_msg</code><code class="o">.</code><code class="n">split</code><code class="p">())</code></pre></div>&#13;
&#13;
<p>Note that if you try to run the <code>split()</code> method by itself or on a data type where it doesn’t make sense, you’ll get an error. Try each of these out in succession (or in two different cells if you’re using a notebook) and see what happens:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># the following will produce an error because</code>&#13;
<code class="c1"># the `split()` method must be called on a string in order to work!</code>&#13;
<code class="n">split</code><code class="p">(</code><code class="s2">"Hello World!"</code><code class="p">)</code></pre>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># the following will produce an error because</code>&#13;
<code class="c1"># there is no `split()` method for numbers!</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="mf">5.</code><code class="n">split</code><code class="p">())</code></pre>&#13;
&#13;
<p>Just like data types, methods and functions are recognizable thanks to their typography and punctuation. A built-in function (like <code>print()</code>) will turn a specific color in your code editor or notebook. In Atom’s default One Dark theme, for example, variable names are light gray, operators like <code>=</code> are purple, and built-in functions like <code>print()</code> are aqua. You can also recognize functions by their associated punctuation: anywhere you see text <em>immediately</em> followed by round parentheses (e.g., <code>print()</code>), you are looking at a function. The same is true of methods, except that these are always preceded by an appropriate data type or variable name, and separated from it<a data-primary="Python" data-secondary="functions" data-startref="python-functions-built-in" data-tertiary="built-in versus methods" data-type="indexterm" id="idm45143426797040"/><a data-primary="functions" data-secondary="built-in versus methods" data-startref="functions-built-in" data-type="indexterm" id="idm45143426836800"/><a data-primary="built-in functions" data-startref="built-in-function" data-type="indexterm" id="idm45143426835696"/><a data-primary="methods" data-startref="methods" data-type="indexterm" id="idm45143426834752"/> by a period (<code>.</code>).</p>&#13;
&#13;
<p>In a programming language like Python, you can actually get a fair bit done with just operators, methods, and built-in functions—especially if you are mostly doing tasks like basic math. When it comes to data wrangling, however, we need a little bit more sophistication. In exactly the same way we can think about complex tasks like playing a piano or kicking a ball as “just” a careful combination of many simpler actions—like moving our fingers or feet, for example—very sophisticated programming functions can be built by thoughtfully composing relatively simple  operators, methods, and built-in functions. These <em>user-defined functions</em> are<a data-primary="Python" data-secondary="functions" data-tertiary="user-defined" data-type="indexterm" id="python-functions-user-defined"/><a data-primary="functions" data-secondary="user-defined" data-type="indexterm" id="functions-user-defined"/><a data-primary="user-defined functions" data-type="indexterm" id="user-defined-functions"/> where we can start to really amplify the power of our code by making what are essentially code “recipes” that can be used again and again.</p>&#13;
&#13;
<p>For example, let’s say we wanted to print out the same greeting to two different people. We could simply use the <code>print()</code> function as we have been, as shown in <a data-type="xref" href="#two_prints">Example 2-6</a>.</p>&#13;
<div data-type="example" id="two_prints">&#13;
<h5><span class="label">Example 2-6. </span>basic_greeting.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a variable named author</code>&#13;
<code class="n">author</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code>&#13;
&#13;
<code class="c1"># create another variable named editor</code>&#13;
<code class="n">editor</code>  <code class="o">=</code> <code class="s2">"Jeff Bleiel"</code>&#13;
&#13;
<code class="c1"># use the built-in print function to output "Hello" messages to each person</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Hello "</code><code class="o">+</code><code class="n">author</code><code class="p">)</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Hello "</code><code class="o">+</code><code class="n">editor</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>There are a couple of things to notice about the code in <a data-type="xref" href="#two_prints">Example 2-6</a>. First, using the <code>print()</code> function works just fine; this code totally gets the job done. And that’s great! The first time we write code for something (including a given data wrangling task), that’s pretty much our main goal: get it to work correctly.</p>&#13;
&#13;
<p>Once we’ve accomplished that, though, we can start to think about some simple ways to make our code “cleaner” and more useful. In the previous example, the two print statements are identical, except for the variable being used. Any time we see this type of repetition in our code, it’s a clue that we may want to make our own user-defined function instead, as in <a data-type="xref" href="#greet_me">Example 2-7</a>.</p>&#13;
<div data-type="example" id="greet_me">&#13;
<h5><span class="label">Example 2-7. </span>greet_me.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a function that prints out a greeting</code>&#13;
<code class="c1"># to any name passed to the function</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">greet_me</code><code class="p">(</code><code class="n">a_name</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"Hello "</code><code class="o">+</code><code class="n">a_name</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># create a variable named author</code>&#13;
<code class="n">author</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code>&#13;
&#13;
<code class="c1"># create another variable named editor</code>&#13;
<code class="n">editor</code>  <code class="o">=</code> <code class="s2">"Jeff Bleiel"</code>&#13;
&#13;
<code class="c1"># use my custom function, `greet_me` to output "Hello" messages to each person</code>&#13;
<code class="n">greet_me</code><code class="p">(</code><code class="n">author</code><code class="p">)</code>&#13;
<code class="n">greet_me</code><code class="p">(</code><code class="n">editor</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>Pretty nifty, right? In some ways, we didn’t change much at all—but there’s actually quite a lot going in <a data-type="xref" href="#greet_me">Example 2-7</a>. We’ll take a few moments now to highlight some of the new concepts being used here, but don’t worry if it doesn’t all make sense right away—we’ll continue to revisit these ideas throughout the book.</p>&#13;
&#13;
<p>The main thing we’ve done in <a data-type="xref" href="#greet_me">Example 2-7</a> is write our first custom function, <code>greet_me()</code>. We <a data-primary="functions" data-secondary="user-defined" data-tertiary="components of" data-type="indexterm" id="idm45143426700816"/><a data-primary="user-defined functions" data-secondary="components of" data-type="indexterm" id="idm45143426699568"/>did this by using a few different syntax structures and typographic indicators to let the computer know that we want it to create and remember this function for future use. Some of these conventions match what we’ve already seen for creating our own custom variables (for example, using the descriptive name <code>greet_me()</code>), as well as the conventions of built-in functions and methods, like following the name of our function immediately with round parentheses (<code>()</code>).</p>&#13;
&#13;
<p>In <a data-type="xref" href="#function_structure_diagram">Figure 2-1</a>, I’ve diagrammed the code for our <code>greet_me()</code> function in order to highlight what’s happening on each line.</p>&#13;
&#13;
<figure><div class="figure" id="function_structure_diagram">&#13;
<img alt="Components of a custom function" src="assets/ppdw_0201.png"/>&#13;
<h6><span class="label">Figure 2-1. </span>Components of a custom function</h6>&#13;
</div></figure>&#13;
&#13;
<p>As you can see from <a data-type="xref" href="#function_structure_diagram">Figure 2-1</a>, creating a custom function means including multiple signposts to the computer:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The <code>def</code> keyword (short for <em>def</em>ine) tells the computer that what comes next is a function name.</p>&#13;
</li>&#13;
<li>&#13;
<p>The round parentheses immediately following the function name reinforce that this is a function and are used to enclose the function’s <em>parameters</em> (if there are any).</p>&#13;
</li>&#13;
<li>&#13;
<p>The colon (<code>:</code>) indicates that the indented lines of code that follow are part of the function.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<ul class="pagebreak-before less_space">&#13;
<li>&#13;
<p>If we want to access the variable that was passed into our function as an <em>argument</em>, we use the “local” <em>parameter</em> name that appears between the round parentheses in the function definition.</p>&#13;
</li>&#13;
<li>&#13;
<p>We can use any type of functions (both built-in and custom) or methods <em>inside</em> our custom function. This is key strategy for building efficient, flexible code.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>When it comes to using or “calling” our function, we can simply write the name of the function (<code>greet_me()</code>), making sure that we put the same number of “ingredients” between the parentheses that appear in the function definition. Since we have defined <code>greet_me()</code> to take exactly <em>one</em> argument “ingredient” (in this case, the <code>a_name</code> parameter), we have to provide <em>exactly</em> one argument when we want to use it—otherwise, we’ll get<a data-primary="Python" data-secondary="functions" data-startref="python-functions-user-defined" data-tertiary="user-defined" data-type="indexterm" id="idm45143426645520"/><a data-primary="functions" data-secondary="user-defined" data-startref="functions-user-defined" data-type="indexterm" id="idm45143426643936"/><a data-primary="user-defined functions" data-startref="user-defined-functions" data-type="indexterm" id="idm45143426642720"/><a data-primary="custom functions" data-see="user-defined functions" data-type="indexterm" id="idm45143426641776"/> an error.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="greet_me_ff">&#13;
<h5>Fast Forward</h5>&#13;
<p>We’ll <a data-primary="functions" data-secondary="user-defined" data-tertiary="errors in" data-type="indexterm" id="idm45143426638704"/><a data-primary="user-defined functions" data-secondary="errors in" data-type="indexterm" id="idm45143426637424"/><a data-primary="errors" data-secondary="in user-defined functions" data-secondary-sortas="user-defined functions" data-type="indexterm" id="idm45143426636480"/><a data-primary="debugging" data-secondary="user-defined functions" data-type="indexterm" id="idm45143426635296"/>discuss errors a little more in-depth in <a data-type="xref" href="#understanding_errors">“Understanding Errors”</a>, but you should <em>always</em> feel free to play around with the code in these examples to see what happens when something goes “wrong” with your code. For the code in <a data-type="xref" href="#greet_me">Example 2-7</a>, here are a few ways to start experimenting:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Without any parameter “ingredients,” e.g., <code>greet_me()</code></p>&#13;
</li>&#13;
<li>&#13;
<p>With <em>too many</em> parameter “ingredients,” e.g., <code>greet_me(author,editor)</code></p>&#13;
</li>&#13;
<li>&#13;
<p>With something that isn’t a variable, e.g., <code>greet_me("Samantha")</code></p>&#13;
</li>&#13;
<li>&#13;
<p>With something that isn’t a string, e.g., <code>greet_me(14)</code></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>In each case, notice what happens when you try to run the code. If it produces an error message, see if you can connect the contents of that message to the changes you made. While programming error messages are not brilliantly descriptive, it’s usually possible to glean at least <em>some</em> useful information from them about why the computer is complaining. We’ll walk through <em>debugging</em>—the process of methodically fixing “broken” code—in detail soon, but this is a great way to get started now!</p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Cooking with Custom Functions" data-type="sect2"><div class="sect2" id="idm45143423560192">&#13;
<h2>Cooking with Custom Functions</h2>&#13;
&#13;
<p>As you may have noticed, I like to think of user-defined or “custom” functions as programming “recipes.” Like food recipes, they provide the computer with reusable instructions for transforming one or more raw data “ingredients” into some other useful resource. Sometimes there is only one parameter or “ingredient,” as in our <code>greet_me()</code> recipe; sometimes there are many parameters of many different data types. There’s no strictly “right” or “wrong” way to write a custom function—much as there’s no right or wrong way to write a cooking recipe; everyone will have their own style. At the same time, when it comes to strategies for deciding what should go into a given function, it can help to think about how we tend to use (or maybe even write!) recipes for cooking food.</p>&#13;
&#13;
<p>For example, it’s obviously <em>possible</em> to write a single cooking recipe called “Thanksgiving” that describes how to make an entire holiday meal from start to finish. Depending on your holiday style, it might take anywhere from 2 to 72 hours to “run,” and it would be very useful once a year—and almost never otherwise. If you <em>did</em> want to make just part of that massive recipe—perhaps you want to serve your Thanksgiving mashed potatoes at New Year’s—you’d first have to dig through the Thanksgiving instructions to identify and piece together <em>just</em> the ingredients and steps for making mashed potatoes. That would mean investing a lot of work before you ever even got cooking!</p>&#13;
&#13;
<p>So while we want our custom functions to do things that are <em>somewhat</em> more complex than what the computer can do already, we generally don’t want them to be truly <em>complicated</em>. Like a “Thanksgiving” recipe, making giant functions (or even programs) limits how effectively they can be reused. Creating simple, focused functions actually makes our code more useful and flexible in the long run—a process we’ll explore in more detail in <a data-type="xref" href="ch08.html#chapter8">Chapter 8</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Libraries: Borrowing Custom Functions from Other Coders" data-type="sect2"><div class="sect2" id="library_love">&#13;
<h2>Libraries: Borrowing Custom Functions from Other Coders</h2>&#13;
&#13;
<p>If <a data-primary="functions" data-secondary="user-defined" data-tertiary="libraries" data-type="indexterm" id="idm45143426615552"/><a data-primary="user-defined functions" data-secondary="libraries" data-type="indexterm" id="idm45143426613920"/><a data-primary="libraries" data-type="indexterm" id="idm45143426612976"/>custom functions are programming recipes, then <em>libraries</em> are programming cookbooks: large collections of <em>other people’s</em> custom functions that <em>we</em> can use to transform our raw data ingredients without having to figure out and write our own recipe “from scratch.” As I mentioned in <a data-type="xref" href="ch01.html#chapter1">Chapter 1</a>, the large community of coders who have written useful Python libraries is one of the reasons we’re using Python in the first place—and as you’ll see in <a data-type="xref" href="#hitting_the_road_intro">“Hitting the Road with Citi Bike Data”</a> at the end of this chapter, using them is both useful and <a data-primary="Python" data-secondary="functions" data-startref="python-functions-user-defined" data-tertiary="user-defined" data-type="indexterm" id="idm45143426608832"/><a data-primary="functions" data-secondary="user-defined" data-startref="functions-user-defined" data-type="indexterm" id="idm45143426607376"/><a data-primary="user-defined functions" data-startref="user-defined-functions" data-type="indexterm" id="idm45143426606160"/><a data-primary="Python" data-secondary="functions" data-startref="python-functions" data-type="indexterm" id="idm45143426605216"/><a data-primary="functions" data-startref="functions" data-type="indexterm" id="idm45143426604000"/>powerful.</p>&#13;
&#13;
<p>Before we can really take advantage of libraries, however, we need to cover two more essential grammatical structures of Python: <em>loops</em> and <em>conditionals</em>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Taking Control: Loops and Conditionals" data-type="sect1"><div class="sect1" id="idm45143423803664">&#13;
<h1>Taking Control: Loops and Conditionals</h1>&#13;
&#13;
<p>As we have discussed, writing Python code is similar to writing in English in many ways. In addition to relying on some basic “parts of speech,” Python code is written from left to right and read essentially from top to bottom. But the path that the computer takes through a data wrangling program is much more like a <a href="https://en.wikipedia.org/wiki/Choose_Your_Own_Adventure">“Choose Your Own Adventure” book</a> than a traditional essay or article: depending on the commands that you, as the programmer, provide, some bits of code may be skipped or repeated based on your data or other factors.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="In the Loop" data-type="sect2"><div class="sect2" id="in_the_loop">&#13;
<h2>In the Loop</h2>&#13;
&#13;
<p>When <a data-primary="Python" data-secondary="loops" data-type="indexterm" id="python-loops"/><a data-primary="loops" data-type="indexterm" id="loops"/>we’re data wrangling with Python, one of our most common goals will be to do <em>something</em> to every record in a dataset. For example, let’s say we wanted to add together a list of numbers to find their sum:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a list that contains the number of pages in each chapter</code>&#13;
<code class="c1"># of a fictional print version of this book</code>&#13;
&#13;
<code class="n">page_counts</code> <code class="o">=</code> <code class="p">[</code><code class="mi">28</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">44</code><code class="p">,</code> <code class="mi">23</code><code class="p">,</code> <code class="mi">56</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">12</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">30</code><code class="p">]</code></pre>&#13;
&#13;
<p>If you needed to total a group of numbers like this without programming, you would have several options: you could use the calculator program on a computer, a physical calculator, or even (gasp!) a pencil and paper. If you know how to use a spreadsheet program, you could enter each data item there and use a <code>SUM()</code> function, too. For short lists, any of these solutions would probably be fine, but they don’t <em>scale</em> well: sure, adding up 10 numbers by hand (or by calculator) might not take too long, but adding up 100 numbers would. The spreadsheet solution is somewhat better in terms of time, but it still requires a number of external steps—like copying and pasting the data into a spreadsheet and more or less manually selecting which rows or columns should be summed. With a programmatic solution, we can avoid almost all of those drawbacks—and whether we need to add 10 rows or 10 million, it will take no more work on our part, and only slightly longer for the computer to actually calculate.</p>&#13;
&#13;
<p>Because programming is still writing, of course, there are multiple ways we can express the instructions we give to the computer. One way is to have the computer look at each number in the list and keep a running total, as shown in <a data-type="xref" href="#pagecount_loop">Example 2-8</a>.</p>&#13;
<div data-type="example" id="pagecount_loop">&#13;
<h5><span class="label">Example 2-8. </span>page_count_loop.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># fictional list of chapter page counts</code>&#13;
<code class="n">page_counts</code> <code class="o">=</code> <code class="p">[</code><code class="mi">28</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">44</code><code class="p">,</code> <code class="mi">23</code><code class="p">,</code> <code class="mi">56</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">12</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">30</code><code class="p">]</code>&#13;
&#13;
<code class="c1"># variable for tracking total page count; starting value is 0</code>&#13;
<code class="n">total_pages</code> <code class="o">=</code> <code class="mi">0</code>&#13;
&#13;
<code class="c1"># for every item in the list, perform some action</code>&#13;
<code class="k">for</code> <code class="n">a_number</code> <code class="ow">in</code> <code class="n">page_counts</code><code class="p">:</code>&#13;
&#13;
    <code class="c1"># in this case, add the number to our "total_pages" variable</code>&#13;
    <code class="n">total_pages</code> <code class="o">=</code> <code class="n">total_pages</code> <code class="o">+</code> <code class="n">a_number</code>&#13;
&#13;
<code class="k">print</code><code class="p">(</code><code class="n">total_pages</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>Before we look at some other ways we could tell the computer to do this task, let’s break down <a data-type="xref" href="#pagecount_loop">Example 2-8</a>. Obviously, we start with the list of numbers. Next, <a data-primary="for loops" data-type="indexterm" id="for-loops"/>we create a variable to keep track of <code>total_pages</code>, to which we have to explicitly assign a value of <code>0</code> to start out (most calculator programs do this more or less implicitly). Finally, we begin going through our list:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="k">for</code> <code class="n">a_number</code> <code class="ow">in</code> <code class="n">page_counts</code><code class="p">:</code></pre>&#13;
&#13;
<p>To me, the easiest way to understand this line of code is to say it out loud like an English sentence: “For every <code>a_number</code> in the list, <code>page_counts</code> do the following.” And in fact, that’s exactly what happens. For every item in the <code>page_counts</code> list, the computer follows the instructions in the code indented under the <code>for...in...:</code> statement. In this case, that means adding together the current value of <code>total_pages</code> and the value of <code>a_number</code> and storing that back in <code>total_pages</code> again.</p>&#13;
&#13;
<p>In some ways, this is straightforward: we’ve already told the computer, very explicitly, the values of both <code>page_counts</code> (that’s our list of numbers) and <code>total_pages</code>. But what about <code>a_number</code>? Where did that come from, and how does the computer know where to find it?</p>&#13;
&#13;
<p>Like the <code>print()</code> statement or the <code>def...function_name():</code> construction, the <code>for...in...:</code> configuration is built into the Python language, which is why we don’t have to give it quite as many instructions as we usually will when coding. In this case, what we have to provide the <code>for...in...:</code> statement to work are two things: a list-like variable (in this case, <code>page_counts</code>) and a name that the computer can use to refer to the current item in the list (in this case, <code>a_number</code>), as shown in <a data-type="xref" href="#for_loop_diagram">Figure 2-2</a>.</p>&#13;
&#13;
<figure><div class="figure" id="for_loop_diagram">&#13;
<img alt="Structure of a `for` loop." src="assets/ppdw_0202.png"/>&#13;
<h6><span class="label">Figure 2-2. </span>Structure of a <code>for</code> loop</h6>&#13;
</div></figure>&#13;
&#13;
<p>As with all variable names, there is nothing “magic” about the variable name <code>a_number</code>—I thought that was a good option because it’s descriptive and readable. What matters is that when I want the computer to do something with each list item, the variable name I use in my indented code has to match what I’ve written in that top <code>for...in...:</code> statement.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="loop_errors">&#13;
<h5>Fast Forward</h5>&#13;
<p>Here’s <a data-primary="errors" data-secondary="in for loops" data-secondary-sortas="for loops" data-type="indexterm" id="idm45143426449104"/><a data-primary="debugging" data-secondary="for loops" data-type="indexterm" id="idm45143426447824"/>another opportunity to experiment with errors. Take the preceding <code>page_counts</code> code and do the following:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Change the variable name <code>a_number</code> to something else <em>only</em> in the <code>for...in...:</code> statement.</p>&#13;
</li>&#13;
<li>&#13;
<p>Change the variable name <code>a_number</code> to something else in <em>both</em> the <code>for...in...:</code> statement <em>and</em> in the code indented below it (use the same new variable name in both places).</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>Again, notice what happens when you try to run the code. If you’re still getting an error after the second step, make sure that your variable name is <em>exactly</em> the same in both places (copying and pasting is great for this).</p>&#13;
</div></aside>&#13;
&#13;
<p>In programming lingo, this <code>for...in...:</code> construction is known as a <em>for loop</em>—and every commonly used programming language has one. The reason why it’s known as a “loop” is because for every item in the list provided, the computer runs every relevant line of code—in the case of Python, every indented line below the <code>for...in...:</code> statement—and then moves to the next item and “loops” back to the first indented line of code again. This is a little hard to see when our “loop” only has one line of code, so let’s add a few more lines to better illustrate what’s going on, as shown in <a data-type="xref" href="#page_loop">Example 2-9</a>.</p>&#13;
<div data-type="example" id="page_loop">&#13;
<h5><span class="label">Example 2-9. </span>page_count_printout.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># fictional list of chapter page counts</code>&#13;
<code class="n">page_counts</code> <code class="o">=</code> <code class="p">[</code><code class="mi">28</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">44</code><code class="p">,</code> <code class="mi">23</code><code class="p">,</code> <code class="mi">56</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">12</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">30</code><code class="p">]</code>&#13;
&#13;
<code class="c1"># variable for tracking total page count; starting value is 0</code>&#13;
<code class="n">total_pages</code> <code class="o">=</code> <code class="mi">0</code>&#13;
&#13;
<code class="c1"># for every item in the list, perform some action</code>&#13;
<code class="k">for</code> <code class="n">a_number</code> <code class="ow">in</code> <code class="n">page_counts</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"Top of loop!"</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"The current item is:"</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">a_number</code><code class="p">)</code>&#13;
    <code class="n">total_pages</code> <code class="o">=</code> <code class="n">total_pages</code> <code class="o">+</code> <code class="n">a_number</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"The running total is:"</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">total_pages</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"Bottom of loop!"</code><code class="p">)</code>&#13;
&#13;
<code class="k">print</code><code class="p">(</code><code class="n">total_pages</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>By now you might be thinking, “This seems like a lot of work just to sum a list of numbers.” And there is, of course, a more efficient way to complete this <em>specific</em> task: Python has<a data-primary="sum() function" data-type="indexterm" id="idm45143426401536"/> a built-in <code>sum()</code> function that will take our list of numbers as an argument (<a data-type="xref" href="#pagecounts_sum">Example 2-10</a>).</p>&#13;
<div data-type="example" id="pagecounts_sum">&#13;
<h5><span class="label">Example 2-10. </span>Using the <code>sum()</code> function</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># fictional list of chapter page counts</code><code>&#13;
</code><code class="n">page_counts</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="mi">28</code><code class="p">,</code><code> </code><code class="mi">32</code><code class="p">,</code><code> </code><code class="mi">44</code><code class="p">,</code><code> </code><code class="mi">23</code><code class="p">,</code><code> </code><code class="mi">56</code><code class="p">,</code><code> </code><code class="mi">32</code><code class="p">,</code><code> </code><code class="mi">12</code><code class="p">,</code><code> </code><code class="mi">34</code><code class="p">,</code><code> </code><code class="mi">30</code><code class="p">]</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># `print()` the result of using the `sum()` function on the list </code><a class="co" href="#callout_introduction_to_python_CO1-1" id="co_introduction_to_python_CO1-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="nb">sum</code><code class="p">(</code><code class="n">page_counts</code><code class="p">)</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_introduction_to_python_CO1-1" id="callout_introduction_to_python_CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Try adding this to your existing program on your own!</p></dd>&#13;
</dl>&#13;
&#13;
<p>Even though we could have used the <code>sum()</code> function from the start, I took this opportunity to introduce <code>for</code> loops, for a couple of reasons. First, because it’s a good reminder that even when it comes to simple programming tasks, there’s always more than one approach. Second, because <code>for</code> loops are an essential part of data wrangling (and, really, all programming), <code>for...in...:</code> loops are one of the key tools we’ll use to filter, evaluate, and reformat<a data-primary="Python" data-secondary="loops" data-startref="python-loops" data-type="indexterm" id="idm45143426260128"/><a data-primary="loops" data-startref="loops" data-type="indexterm" id="idm45143426258880"/><a data-primary="for loops" data-startref="for-loops" data-type="indexterm" id="idm45143426257936"/> data.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="One Condition…" data-type="sect2"><div class="sect2" id="idm45143426598016">&#13;
<h2>One Condition…</h2>&#13;
&#13;
<p>The <code>for</code> loop <a data-primary="Python" data-secondary="conditionals" data-type="indexterm" id="python-conditionals"/><a data-primary="conditionals" data-type="indexterm" id="conditionals"/><a data-primary="if…else conditionals" data-type="indexterm" id="if-else"/>gives us a straightforward way to look at every item in a dataset, but data wrangling requires making <em>decisions</em> about our data as well. Usually, that means evaluating some aspect of the data and doing one thing if the data has a certain value and otherwise something (or nothing!) else. For example, what if we wanted to know how many chapters in this book have more than 30 pages and how many have fewer than 30 pages? We’d need a way to:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Check whether a particular number in our <code>page_counts</code> list is more than 30.</p>&#13;
</li>&#13;
<li>&#13;
<p>Add 1 to an <code>over_30</code> counter if it’s more than 30.</p>&#13;
</li>&#13;
<li>&#13;
<p>Otherwise, add 1 to our <code>under_30</code> counter.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>Fortunately, Python has a built-in grammatical structure for doing exactly this kind of evaluation and decision-making: the <code>if...else</code> statement. Let’s see how it works by modifying  the <code>for</code> loop in <a data-type="xref" href="#page_loop">Example 2-9</a> to also track the number of chapters that are more and less than 30 pages.</p>&#13;
<div class="pagebreak-before less_space" data-type="example" id="page_counts">&#13;
<h5><span class="label">Example 2-11. </span>page_count_conditional.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># fictional list of chapter page counts</code>&#13;
<code class="n">page_counts</code> <code class="o">=</code> <code class="p">[</code><code class="mi">28</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">44</code><code class="p">,</code> <code class="mi">23</code><code class="p">,</code> <code class="mi">56</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">12</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">30</code><code class="p">]</code>&#13;
&#13;
<code class="c1"># create variables to keep track of:</code>&#13;
<code class="c1"># the total pages in the book</code>&#13;
<code class="n">total_pages</code> <code class="o">=</code> <code class="mi">0</code>&#13;
&#13;
<code class="c1"># the number of chapters with more than 30 pages,</code>&#13;
<code class="n">under_30</code> <code class="o">=</code> <code class="mi">0</code>&#13;
&#13;
<code class="c1"># the number of chapters with fewer than 30 pages</code>&#13;
<code class="n">over_30</code> <code class="o">=</code> <code class="mi">0</code>&#13;
&#13;
&#13;
<code class="c1"># for every item in the page_counts list:</code>&#13;
<code class="k">for</code> <code class="n">a_number</code> <code class="ow">in</code> <code class="n">page_counts</code><code class="p">:</code>&#13;
&#13;
    <code class="c1"># add the current number of pages to our total_pages count</code>&#13;
    <code class="n">total_pages</code> <code class="o">=</code> <code class="n">total_pages</code> <code class="o">+</code> <code class="n">a_number</code>&#13;
&#13;
    <code class="c1"># check if the current number of pages is more than 30</code>&#13;
    <code class="k">if</code> <code class="n">a_number</code> <code class="o">&gt;</code> <code class="mi">30</code><code class="p">:</code>&#13;
&#13;
        <code class="c1"># if so, add 1 to our over_30 counter</code>&#13;
        <code class="n">over_30</code> <code class="o">=</code> <code class="n">over_30</code> <code class="o">+</code> <code class="mi">1</code>&#13;
&#13;
    <code class="c1"># otherwise...</code>&#13;
    <code class="k">else</code><code class="p">:</code>&#13;
        <code class="c1"># add 1 to our under_30 counter</code>&#13;
        <code class="n">under_30</code> <code class="o">=</code> <code class="n">under_30</code> <code class="o">+</code> <code class="mi">1</code>&#13;
&#13;
&#13;
<code class="c1"># print our various results</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">total_pages</code><code class="p">)</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Number of chapters over 30 pages:"</code><code class="p">)</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">over_30</code><code class="p">)</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Number of chapters under 30 pages:"</code><code class="p">)</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">under_30</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>As with <code>for</code> loops, I think the easiest way to understand what’s happening in an <code>if...else</code> conditional is to say it out loud as a sentence (and, just as importantly, write that sentence in the comments of your code): “<code>if</code> the current number of pages is more than 30, add one to the <code>over_30</code> counter. Otherwise (<code>else</code>), add one to the <code>under_30</code> counter.”</p>&#13;
&#13;
<p>While hopefully this makes some sense intuitively, I want to slow down again and go through what’s happening in a bit more detail, since <code>if...else</code> statements are another programming structure that we’ll come back to over and over.</p>&#13;
&#13;
<p>First, let’s <a data-primary="Python" data-secondary="nesting in" data-type="indexterm" id="python-nesting"/><a data-primary="nesting" data-secondary="in Python code" data-secondary-sortas="Python" data-type="indexterm" id="nesting"/><a data-primary="whitespace" data-secondary="nesting with" data-type="indexterm" id="whitespace-nesting"/>look at the indenting structure of the preceding example: everything that’s part of the <code>for</code> loop is indented one tab from the left margin; that’s how the computer knows that code is “inside” that loop. Similarly, the code that belongs to each part of the <code>if...else</code> statement is indented one tab <em>more</em>. In Python, this process of progressive indentation is actually <em>required</em> for the code to work properly—if the indenting isn’t correct, Python will complain.<sup><a data-type="noteref" href="ch02.html#idm45143426063952" id="idm45143426063952-marker">2</a></sup> This mechanism is often referred to as <em>nesting</em>. A more visual way to think about what’s happening is shown in <a data-type="xref" href="#loop_nesting_diagram">Figure 2-3</a>.</p>&#13;
&#13;
<figure><div class="figure" id="loop_nesting_diagram">&#13;
<img alt="A Venn-style diagram of code nesting." src="assets/ppdw_0203.png"/>&#13;
<h6><span class="label">Figure 2-3. </span>Code “nesting”</h6>&#13;
</div></figure>&#13;
&#13;
<p>There are a number of implications of nesting that we’ll address later in this book, but the main takeaway for now is that in order to make a line of code “belong” to a function, loop, or conditional, <em>it must be indented one tab to the right of the structure you want it to be part of</em>. To see this in action, let’s bring together everything we’ve done up to this point to create a Python program that uses a loop, a conditional, and a custom-defined function, as shown in <a data-type="xref" href="#page_counts_complete">Example 2-12</a>.</p>&#13;
<div data-type="example" id="page_counts_complete">&#13;
<h5><span class="label">Example 2-12. </span>page_count_custom_function.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># fictional list of chapter page counts</code><code>&#13;
</code><code class="n">page_counts</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="mi">28</code><code class="p">,</code><code> </code><code class="mi">32</code><code class="p">,</code><code> </code><code class="mi">44</code><code class="p">,</code><code> </code><code class="mi">23</code><code class="p">,</code><code> </code><code class="mi">56</code><code class="p">,</code><code> </code><code class="mi">32</code><code class="p">,</code><code> </code><code class="mi">12</code><code class="p">,</code><code> </code><code class="mi">34</code><code class="p">,</code><code> </code><code class="mi">30</code><code class="p">]</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># define a new `count_pages()` function that takes one ingredient/argument:</code><code>&#13;
</code><code class="c1"># a list of numbers</code><code>&#13;
</code><code class="k">def</code><code> </code><code class="nf">count_pages</code><code class="p">(</code><code class="n">page_count_list</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" href="#callout_introduction_to_python_CO2-1" id="co_introduction_to_python_CO2-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># create variables to keep track of:</code><code>&#13;
</code><code>    </code><code class="c1"># the total pages in the book</code><code>&#13;
</code><code>    </code><code class="n">total_pages</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># the number of chapters with more than 30 pages,</code><code>&#13;
</code><code>    </code><code class="n">under_30</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># the number of chapters with fewer than 30 pages</code><code>&#13;
</code><code>    </code><code class="n">over_30</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># for every item in the page_count_list:</code><code>&#13;
</code><code>    </code><code class="k">for</code><code> </code><code class="n">a_number</code><code> </code><code class="ow">in</code><code> </code><code class="n">page_count_list</code><code class="p">:</code><code> </code><a class="co" href="#callout_introduction_to_python_CO2-2" id="co_introduction_to_python_CO2-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="c1"># add the current number of pages to our total_pages count</code><code>&#13;
</code><code>        </code><code class="n">total_pages</code><code> </code><code class="o">=</code><code> </code><code class="n">total_pages</code><code> </code><code class="o">+</code><code> </code><code class="n">a_number</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="c1"># check if the current number of pages is more than 30</code><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="n">a_number</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">30</code><code class="p">:</code><code>&#13;
</code><code>&#13;
</code><code>            </code><code class="c1"># if so, add 1 to our over_30 counter</code><code>&#13;
</code><code>            </code><code class="n">over_30</code><code> </code><code class="o">=</code><code> </code><code class="n">over_30</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="c1"># otherwise...</code><code>&#13;
</code><code>        </code><code class="k">else</code><code class="p">:</code><code>&#13;
</code><code>            </code><code class="c1"># add 1 to our under_30 counter</code><code>&#13;
</code><code>            </code><code class="n">under_30</code><code> </code><code class="o">=</code><code> </code><code class="n">under_30</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># print our various results</code><code>&#13;
</code><code>    </code><code class="k">print</code><code class="p">(</code><code class="n">total_pages</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="k">print</code><code class="p">(</code><code class="s2">"</code><code class="s2">Number of chapters over 30 pages:</code><code class="s2">"</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="k">print</code><code class="p">(</code><code class="n">over_30</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="k">print</code><code class="p">(</code><code class="s2">"</code><code class="s2">Number of chapters under 30 pages:</code><code class="s2">"</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="k">print</code><code class="p">(</code><code class="n">under_30</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># call/execute this "recipe", being sure to pass in our</code><code>&#13;
</code><code class="c1"># actual list as an argument/ingredient</code><code>&#13;
</code><code class="n">count_pages</code><code class="p">(</code><code class="n">page_counts</code><code class="p">)</code><code> </code><a class="co" href="#callout_introduction_to_python_CO2-3" id="co_introduction_to_python_CO2-3"><img alt="3" src="assets/3.png"/></a></pre></div>&#13;
<dl class="calloutlist pagebreak-before less_space">&#13;
<dt><a class="co" href="#co_introduction_to_python_CO2-1" id="callout_introduction_to_python_CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We can “wrap” our existing code into a new function (here called <code>count_​pages()</code>) by indenting one tab and adding the function definition line.</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO2-2" id="callout_introduction_to_python_CO2-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We have to match the name of the list variable the <code>for</code> loop references to the parameter name provided between the round parentheses in the function definition in <img alt="1" src="assets/1.png"/>.</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO2-3" id="callout_introduction_to_python_CO2-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>A function does not <em>do</em> anything until it is actually <em>called</em> or <em>executed</em>. At this point, we need to provide it with the specific argument/ingredient we want it to work on.</p></dd>&#13;
</dl>&#13;
&#13;
<p>If you compare <a data-type="xref" href="#page_counts_complete">Example 2-12</a> to <a data-type="xref" href="#page_counts">Example 2-11</a>, you’ll see that I actually just copied the code from <a data-type="xref" href="#page_counts">Example 2-11</a> and did three things:</p>&#13;
<ol>&#13;
<li>&#13;
<p>I added the function defining statement <code>def count_pages(page_count_list):</code>.</p>&#13;
</li>&#13;
<li>&#13;
<p>I indented all the existing code one additional tab so that the computer views it as “belonging” to our new <code>count_pages()</code> function. In Atom, you can do this all at once by highlighting all the lines of code you want to move and hitting the Tab key. I also updated the variable referenced at the top of the <code>for</code> loop to match the parameter name provided between the round parentheses on the <code>def</code> line of the function.</p>&#13;
</li>&#13;
<li>&#13;
<p>I made sure to “call” the function at the end, giving it the <code>page_counts</code> variable as<a data-primary="Python" data-secondary="functions" data-tertiary="arguments" data-type="indexterm" id="idm45143428393024"/><a data-primary="functions" data-secondary="arguments" data-type="indexterm" id="idm45143428391856"/><a data-primary="arguments" data-type="indexterm" id="idm45143428390912"/> an “ingredient” or <em>argument</em>. Notice that the <code>count_pages(page_counts)</code> statement isn’t indented at all.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>Hopefully, you’re starting to get a little bit of a handle on how all this fits together. Before we start using these tools to do some real-world data wrangling, though, we need to spend some time talking about what happens<a data-primary="Python" data-secondary="nesting in" data-startref="python-nesting" data-type="indexterm" id="idm45143428351392"/><a data-primary="nesting" data-secondary="in Python code" data-secondary-sortas="Python" data-startref="nesting" data-type="indexterm" id="idm45143428350144"/><a data-primary="whitespace" data-secondary="nesting with" data-startref="whitespace-nesting" data-type="indexterm" id="idm45143428348656"/><a data-primary="Python" data-secondary="conditionals" data-startref="python-conditionals" data-type="indexterm" id="idm45143428347440"/><a data-primary="conditionals" data-startref="conditionals" data-type="indexterm" id="idm45143428346224"/><a data-primary="if…else conditionals" data-startref="if-else" data-type="indexterm" id="idm45143428275024"/> when code goes wrong.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Understanding Errors" data-type="sect1"><div class="sect1" id="understanding_errors">&#13;
<h1>Understanding Errors</h1>&#13;
&#13;
<p>As we’ve <a data-primary="Python" data-secondary="errors" data-type="indexterm" id="python-errors"/><a data-primary="errors" data-type="indexterm" id="errors"/><a data-primary="debugging" data-type="indexterm" id="debugging"/>mentioned in <a data-type="xref" href="ch01.html#chapter1">Chapter 1</a>, computers are <em>very</em> good at doing repetitive tasks quickly (and usually accurately). This lets us write programs that <em>scale</em> well: the same code that can sum or sort a list that’s 10 items long (like our <code>page_counts</code> example) can also be used pretty effectively on a list that’s 10,000 items long.</p>&#13;
&#13;
<p>At the same time, however, computers are truly, importantly, and irretrievably stupid. Computers can’t really infer or innovate—they can only choose paths through their code based on the instructions and data that humans provide to them. As a result, there are many ways in which writing code is like giving instructions to a toddler: you have to be extremely literal and very explicit, and if something unexpected happens, you should expect a tantrum.<sup><a data-type="noteref" href="ch02.html#idm45143428265504" id="idm45143428265504-marker">3</a></sup></p>&#13;
&#13;
<p>For example, when humans encounter a spelling or grammatical error in a written sentence, we often don’t even notice it: based on the context of the surrounding sentence or paragraph, much of the time we’ll infer the appropriate meaning without even really trying. In fact, even if almost <em>all</em> of the letters in <em>all</em> of the words in a sentence are rearranged, we can uusally siltl raed it wihtuot too mcuh erfoft.<sup><a data-type="noteref" href="ch02.html#idm45143428263280" id="idm45143428263280-marker">4</a></sup> Computers, by contrast, will just complain loudly and stop reading altogether if your code has even a comma out of place.</p>&#13;
&#13;
<p>Because of this, errors in programming aren’t just inevitable, they’re <em>expected</em>. No matter how much you program, any chunk of code you write that’s longer than a few lines will have errors in it of one kind or another. Rather than worrying about how to <em>avoid</em> errors, it is much more useful to learn how to <em>interpret</em> and <em>correct</em> errors. Throughout this book, I will at times intentionally generate errors (or encourage you to do so, as in <a data-type="xref" href="#greet_me_ff">“Fast Forward”</a> and <a data-type="xref" href="#loop_errors">“Fast Forward”</a>) so that you can get familiar with them and begin to develop your own process for working through them. As a starting point, we’ll discuss the three main <em>types</em> of errors that occur in programming: syntax errors, runtime errors, and logic errors.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Syntax Snafus" data-type="sect2"><div class="sect2" id="idm45143428256944">&#13;
<h2>Syntax Snafus</h2>&#13;
&#13;
<p>Grammatical <a data-primary="Python" data-secondary="errors" data-tertiary="syntax errors" data-type="indexterm" id="python-errors-syntax"/><a data-primary="errors" data-secondary="syntax errors" data-type="indexterm" id="errors-syntax"/><a data-primary="debugging" data-secondary="syntax errors" data-type="indexterm" id="debugging-syntax"/><a data-primary="syntax errors" data-type="indexterm" id="syntax-errors"/>or <em>syntax</em> errors in programming may simultaneously be the simplest and most frustrating type of error you’ll encounter—in part because they happen very frequently and because the computer complains loudly about them. The example I gave earlier about a comma being out of place is an example of a syntax error: in one way or another, your code has violated the grammatical rules of the programming language.</p>&#13;
&#13;
<p>The reason I describe these errors as “simple” is that they almost always are. In my experience, most syntax errors—and, by extension, programming errors—are basically typos: a comma or quotation mark gets forgotten, or a line of code gets indented too much or not enough. Unfortunately, many newer programmers I’ve worked with seem to find these errors especially frustrating precisely because they are simple—and because they feel silly for making them.</p>&#13;
&#13;
<p>In truth, experienced programmers experience syntax errors all the time. If you’re just starting out, the main thing you can learn from syntax errors is how <em>not</em> to let them derail you. In fact, one of the reasons why I’ve included the preceding “Fast Forward” sections on how to “break” your code intentionally is to help illustrate how easily errors can happen—and be fixed. In some ways one of the greatest skills you’ll learn when programming is how to be wrong a <em>lot</em> and not let it discourage you.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45143428234096">&#13;
<h5>Get Your Game On</h5>&#13;
<p>One thing that can help make programming errors less frustrating—especially early on—is to approach the process sort of like a video game: beating a difficult level often means attempting it (at least) dozens of times. Sometimes you’ll have to retry because an enemy (or problem) is truly difficult, but sometimes you just make a mistake and fall down a hole (or forget a comma). In both cases, the key thing is to try again—up to a point. While you certainly don’t want to give up on a programming task as soon as you get an error, you can definitely burn out in a programming session the same way you might when you’re trying to beat a hard level on a game. When that happens, try to take a break for at least 20 or 30 minutes before trying again. Over time, you’ll start to  develop a sense for when you need a break—another programming skill that will be invaluable in the long run.</p>&#13;
</div></aside>&#13;
&#13;
<p>If you run a piece of code that has a syntax error, you’ll know because the last line of the (usually multiline) error message will say <code>SyntaxError</code>. But more useful than this when actually <em>fixing</em> the error will be the part of the error message that tells you <em>which file</em> the error is in and <em>which line</em> the error is on. Over time, just going to that line of code and looking for problems (typically missing punctuation: commas, brackets, colons, and quotation marks) will be enough for you to spot what’s wrong. While the error message will also include the (presumably) offending line of code with a caret (<code>^</code>) below the spot where Python believes the missing character might belong, this isn’t foolproof. For instance, <a data-type="xref" href="#object_error">Example 2-13</a> shows a Python <code>dict</code> that is missing a comma on one line.</p>&#13;
<div data-type="example" id="object_error">&#13;
<h5><span class="label">Example 2-13. </span>Introducing an error</h5>&#13;
&#13;
<pre data-code-language="python" data-line-numbering="numbered" data-type="programlisting"><span class="line-number">1 </span><code class="c1"># although the actual error is on line 4 (missing comma)</code>&#13;
<span class="line-number">2 </span><code class="c1"># the error message points to line 5</code>&#13;
<span class="line-number">3 </span><code class="n">book</code> <code class="o">=</code> <code class="p">{</code><code class="s2">"title"</code><code class="p">:</code><code class="s2">"Practical Python for Data Wrangling and Data Quality"</code><code class="p">,</code>&#13;
<span class="line-number">4 </span> <code class="s2">"format"</code><code class="p">:</code> <code class="s2">"book"</code>&#13;
<span class="line-number">5 </span> <code class="s2">"author"</code><code class="p">:</code> <code class="s2">"Susan E. McGregor"</code>&#13;
<span class="line-number">6 </span><code class="p">}</code></pre></div>&#13;
&#13;
<p>And here is the error output:</p>&#13;
&#13;
<pre data-type="programlisting">  File "ObjectError.py", line 5&#13;
    "author": "Susan E. McGregor"&#13;
            ^&#13;
SyntaxError: invalid syntax</pre>&#13;
&#13;
<p>As you can see, even though the code in <a data-type="xref" href="#object_error">Example 2-13</a> is missing a comma after the value <code>"book"</code> on line 4, the computer reports the error as being on line 5 (because that’s the point at which the computer has realized there is a problem). In general, though, you can usually find a syntax error on the line (or the line before) wherever the computer has <a data-primary="Python" data-secondary="errors" data-startref="python-errors-syntax" data-tertiary="syntax errors" data-type="indexterm" id="idm45143428206656"/><a data-primary="errors" data-secondary="syntax errors" data-startref="errors-syntax" data-type="indexterm" id="idm45143428205168"/><a data-primary="debugging" data-secondary="syntax errors" data-startref="debugging-syntax" data-type="indexterm" id="idm45143428203952"/><a data-primary="syntax errors" data-startref="syntax-errors" data-type="indexterm" id="idm45143428202736"/>reported it.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Runtime Runaround" data-type="sect2"><div class="sect2" id="idm45143428256320">&#13;
<h2>Runtime Runaround</h2>&#13;
&#13;
<p>A <em>runtime</em> error <a data-primary="Python" data-secondary="errors" data-tertiary="runtime errors" data-type="indexterm" id="python-errors-runtime"/><a data-primary="errors" data-secondary="runtime errors" data-type="indexterm" id="errors-runtime"/><a data-primary="debugging" data-secondary="runtime errors" data-type="indexterm" id="debugging-runtime"/><a data-primary="runtime errors" data-type="indexterm" id="runtime-errors"/>in programming is used to describe any type of problem that crops up in the process of “running” or <em>executing</em> your code. Like syntax errors, a large portion of runtime errors are <em>also</em> essentially typos, such as incorrectly copied variable names. For example, anytime you see an error that includes the phrase <em><code>some_variable</code></em> <code>is not defined</code>, you’ve almost certainly got mismatched variable names somewhere in your code (remember: capitalization counts!). Since reading the entire “traceback” error can get a little convoluted (they tend to reference the inner workings of the Python programming language more than I, personally, find strictly useful), I recommend copying the variable name directly from the error and then doing a case-<em>insensitive</em> search for it in your code (this is the default behavior in Atom). This approach will highlight similar (but not <em>quite</em> identical) spellings of a variable name, speeding up your search for the mismatch.</p>&#13;
&#13;
<p>For example, in <a data-type="xref" href="#param_mismatch">Example 2-14</a> the parameter name provided in the function definition for <code>greet_me(a_name)</code> doesn’t <em>precisely</em> match what’s used within the body of the function definition on the next line.</p>&#13;
<div data-type="example" id="param_mismatch">&#13;
<h5><span class="label">Example 2-14. </span>Slightly mismatched variable names will generate runtime errors</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a function that prints out a greeting to any name passed to the function</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">greet_me</code><code class="p">(</code><code class="n">a_name</code><code class="p">):</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"Hello "</code><code class="o">+</code><code class="n">A_name</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># create a variable named author</code>&#13;
<code class="n">author</code> <code class="o">=</code> <code class="s2">"Susan E. McGregor"</code>&#13;
&#13;
<code class="c1"># pass my `author` variable as the "ingredient" to the `greet_me` function</code>&#13;
<code class="n">greet_me</code><code class="p">(</code><code class="n">author</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>Because the parameter name that appears inside the round parentheses of the function definition always takes precedence, running the code in <a data-type="xref" href="#param_mismatch">Example 2-14</a> generates the following error:</p>&#13;
&#13;
<pre data-type="programlisting">  File "greet_me_parameter_mismatch.py", line 10, in &lt;module&gt;&#13;
    greet_me(author)&#13;
  File "greet_me_parameter_mismatch.py", line 4, in greet_me&#13;
    print("Hello "+A_name)&#13;
NameError: global name 'A_name' is not defined</pre>&#13;
&#13;
<p>Note that, as usual, the last few lines of the error message are giving us the most helpful information. The last line lets us know that we’re trying to use the variable name <code>A_name</code> without having defined it first, and the line above contains the actual code where it appears. With these two pieces of information (plus our search strategy), it probably won’t take too long before we see where we went wrong.</p>&#13;
&#13;
<p>Another very common type of runtime error occurs when you try to do something with a particular data type that it wasn’t designed for. In the <a data-type="xref" href="#greet_me_ff">“Fast Forward”</a>, you may have tried running the code <code>greet_me(14)</code>. In this case, the last line of the error output will include the word <code>TypeError</code>, which means that some part of our code received a different data type than it was expecting. In that example, the problem is that the function expects a string (which can be “added” or <em>concatenated</em> to another string using the <code>+</code> sign), but we provided it with a number, in this case, <code>14</code>.</p>&#13;
&#13;
<p>The challenge <a data-primary="Python" data-secondary="variables" data-tertiary="errors" data-type="indexterm" id="idm45143428136976"/><a data-primary="variables" data-secondary="errors" data-type="indexterm" id="idm45143428135696"/>with fixing this kind of error is that identifying exactly where the problem lies can be a bit tricky, because it involves a mismatch between where a variable’s value was <em>assigned</em> and where that variable (and therefore its value) was actually <em>used</em>. Especially as your programs grow more sophisticated, these two processes may be nowhere near each other in your code. Looking at the error output from <a data-type="xref" href="#param_mismatch">Example 2-14</a>, for example, you can see that it reports two locations. The first is a line where the variable was passed into the function, and so where the available value was <em>assigned</em>:</p>&#13;
<pre>File "greet_me_parameter_mismatch.py", line 10, in &lt;module&gt;</pre>&#13;
&#13;
<p>The second is the line where the value passed to it was <em>used</em>:</p>&#13;
<pre>File "greet_me_parameter_mismatch.py", line 4, in greet_me</pre>&#13;
&#13;
<p>As I have mentioned already, starting your debugging work with where a problematic variable or value was <em>used</em> and then working backward through your code to see where the value was assigned is helpful; just know that the line of code where the value was assigned may or may <em>not</em> actually appear in the error output. This is part of what makes these kinds of runtime errors more difficult to track down than your average syntax error.</p>&#13;
&#13;
<p>The fact that runtime errors are some of the harder ones to diagnose is a key reason why I recommend both saving and testing your code frequently. The source of a new runtime error is much easier to identify if you’ve only written a few new lines of code since you last tested it, because the problem <em>must</em> be in that little bit of new code. With this sort of <code>write, run, repeat</code> approach, you’ll have much less ground to cover when it comes to looking for the source of any new errors, and you’ll probably be able to fix them relatively<a data-primary="Python" data-secondary="errors" data-startref="python-errors-runtime" data-tertiary="runtime errors" data-type="indexterm" id="idm45143428098288"/><a data-primary="errors" data-secondary="runtime errors" data-startref="errors-runtime" data-type="indexterm" id="idm45143428096768"/><a data-primary="debugging" data-secondary="runtime errors" data-startref="debugging-runtime" data-type="indexterm" id="idm45143428095552"/><a data-primary="runtime errors" data-startref="runtime-errors" data-type="indexterm" id="idm45143428094336"/> quickly.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45143428093136">&#13;
<h5>Except…</h5>&#13;
<p>One of <a data-primary="Python" data-secondary="errors" data-tertiary="exceptions" data-type="indexterm" id="idm45143428091568"/><a data-primary="errors" data-secondary="exceptions" data-type="indexterm" id="idm45143428090288"/><a data-primary="debugging" data-secondary="exceptions" data-type="indexterm" id="idm45143428089344"/><a data-primary="exceptions" data-type="indexterm" id="idm45143428088400"/>the realities of data wrangling is that our code will often come up against inappropriate or unpredictable input, because the data we’re working with may have missing or invalid values. For example, a column of otherwise numerical values may have some that are empty. As we’ll see in <a data-type="xref" href="ch06.html#chapter6">Chapter 6</a> in particular, those empty values won’t automatically be converted to a number like zero.<sup><a data-type="noteref" href="ch02.html#idm45143428086384" id="idm45143428086384-marker">5</a></sup> This means that those empty values may generate errors if your code is only written to handle numerical values.</p>&#13;
&#13;
<p>In Python, this kind of unfortunate-but-foreseeable error is known as an <em>exception</em>, because it happens when your program encounters an “exceptional” or unexpected situation—like an inappropriate data type. While especially common in data wrangling work, it is possible to write our programs to “handle” exceptions—that is, to tell our code to do something <em>other</em> than throw an error and stop running.</p>&#13;
&#13;
<p>While handling exceptions can be useful, we won’t be spending a lot of time on it in this book. The reason is that our goal here is not simply to create programs that can <em>work</em> on a given set of data but to ensure the <em>quality</em> of that data as well. As a result, most of the time we’ll actually <em>want</em> to know when and where our data is not what we expect, rather than writing our code to just roll past those problems without stopping. So it usually makes more sense for us to deal with runtime errors as they arise, rather than trying to plan for (and handle) all possible errors in advance.<sup><a data-type="noteref" href="ch02.html#idm45143428081024" id="idm45143428081024-marker">6</a></sup></p>&#13;
&#13;
<p>Of course, it <em>is</em> possible to write Python exceptions that can help us meaningfully assess data quality; it’s just that in most cases we won’t need to do this directly because the Python libraries we’ll use (again, especially in <a data-type="xref" href="ch06.html#chapter6">Chapter 6</a>) do much of this work for us. We’ll also minimize the likelihood of needing exceptions by taking an incremental approach to writing our data wrangling code: we’ll start by designing and testing our code on a subset of our target dataset, and then we’ll run the program on the entire dataset (or versions of the entire dataset) to see how it performs. This will help us balance speed and scale by allowing us to quickly assess the quality of a given dataset while still creating code that can handle the entire dataset if things work out.</p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Logic Loss" data-type="sect2"><div class="sect2" id="idm45143428201072">&#13;
<h2>Logic Loss</h2>&#13;
&#13;
<p>By far<a data-primary="Python" data-secondary="errors" data-tertiary="logic errors" data-type="indexterm" id="python-errors-logic"/><a data-primary="errors" data-secondary="logic errors" data-type="indexterm" id="errors-logic"/><a data-primary="debugging" data-secondary="logic errors" data-type="indexterm" id="debugging-logic"/><a data-primary="logic errors" data-type="indexterm" id="logic-errors"/> the trickiest type of programming problem is the <em>logic</em> error, which is broadly used to describe what happens when your program <em>works</em>, just <em>not how you intended</em>. These errors are especially insidious because—from the computer’s perspective—everything is fine: your code is not trying to do anything it finds confusing or “wrong.” But computers are stupid, remember, so they will happily let your program do things that produce meaningless, nonsensical, or even misleading results. In precisely the same way that one can do correct math on bad data (as we’ll discuss in <a data-type="xref" href="ch03.html#chapter3">Chapter 3</a>), it’s very possible to write functioning code that does something inappropriate or incorrect. In fact, we already have!</p>&#13;
&#13;
<p>If you look back at <a data-type="xref" href="#page_counts_complete">Example 2-12</a>, you’ll notice that there’s actually a slight disconnect between what our comments <em>say</em> we wanted to accomplish and what our code actually <em>does</em>. The output of that example looks like this:</p>&#13;
&#13;
<pre data-type="programlisting">291&#13;
Number of chapters over 30 pages:&#13;
5&#13;
Number of chapters under 30 pages:&#13;
4</pre>&#13;
&#13;
<p>But our data looks like this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"> <code class="n">page_counts</code> <code class="o">=</code> <code class="p">[</code><code class="mi">28</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">44</code><code class="p">,</code> <code class="mi">23</code><code class="p">,</code> <code class="mi">56</code><code class="p">,</code> <code class="mi">32</code><code class="p">,</code> <code class="mi">12</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">30</code><code class="p">]</code></pre>&#13;
&#13;
<p>See the problem? While it’s true that we have 5 chapters whose page count is more than 30, we actually have only 3 chapters whose page count is <em>under</em> 30—there’s one chapter with exactly 30 pages.</p>&#13;
&#13;
<p>Right now, this may not seem like a particularly significant error—after all, how important is it if one 30-page chapter gets lumped in with chapters that are fewer than 30 pages? But imagine that instead of counting chapter pages, this code was being used to determine voting eligibility? If that code was counting only people who were “over 18,” hundreds of thousands of people would be disenfranchised.</p>&#13;
&#13;
<p>Fixing this error is not difficult or complicated in terms of the code we need to adjust. All we have to do is change this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"> <code class="c1"># check if the current number of pages is more than 30</code>&#13;
 <code class="k">if</code> <code class="n">a_number</code> <code class="o">&gt;</code> <code class="mi">30</code><code class="p">:</code></pre>&#13;
&#13;
<p>To this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"> <code class="c1"># check if the current number of pages is greater than or equal to 30</code>&#13;
 <code class="k">if</code> <code class="n">a_number</code> <code class="o">&gt;=</code> <code class="mi">30</code><code class="p">:</code></pre>&#13;
&#13;
<p>The challenge this type of error presents is that it relies entirely on our diligence as programmers to make sure that as we <em>design</em> our programs, we don’t overlook some possible data value or discrepancy that can result in incorrect measurements or results. Because the computer cannot warn us about logic errors, the only reliable way to avoid them is to plan our programs carefully in the first place, and to carefully “sanity check” the results. In <a data-type="xref" href="#hitting_the_road_intro">“Hitting the Road with Citi Bike Data”</a>, we’ll see what this process looks like when we write a program to deal with a real-world <a data-primary="Python" data-secondary="errors" data-startref="python-errors-logic" data-tertiary="logic errors" data-type="indexterm" id="idm45143427967936"/><a data-primary="errors" data-secondary="logic errors" data-startref="errors-logic" data-type="indexterm" id="idm45143427966480"/><a data-primary="debugging" data-secondary="logic errors" data-startref="debugging-logic" data-type="indexterm" id="idm45143427965264"/><a data-primary="logic errors" data-startref="logic-errors" data-type="indexterm" id="idm45143428005328"/><a data-primary="Python" data-secondary="errors" data-startref="python-errors" data-type="indexterm" id="idm45143428004384"/><a data-primary="errors" data-startref="errors" data-type="indexterm" id="idm45143428003168"/><a data-primary="debugging" data-startref="debugging" data-type="indexterm" id="idm45143428002224"/>dataset.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="dont_forget_git">&#13;
<h5>Don’t Forget Git!</h5>&#13;
<p>Encountering <a data-primary="Git" data-secondary="committing code" data-type="indexterm" id="idm45143427999312"/><a data-primary="repositories (GitHub)" data-secondary="committing code" data-type="indexterm" id="idm45143427998304"/><a data-primary="Git" data-secondary="commands" data-tertiary="commit" data-type="indexterm" id="idm45143427997360"/><a data-primary="commands (git)" data-secondary="commit" data-type="indexterm" id="idm45143427996144"/>errors can be frustrating, but it will be less so if you are confident that new errors aren’t costing you previous progress you’ve made in getting your code to work. That’s why I recommend that whenever you <em>do</em> get a new bit of code working properly, you should not just save but also <code>commit</code> your code to your Git repo.</p>&#13;
&#13;
<p>This doesn’t have to be a difficult process, whether you are working in a notebook or in a standalone file. If you’ve been working inside the <em>data_wrangling</em> folder that we set up in <a data-type="xref" href="ch01.html#tying_it_together">“Tying it all together”</a>, then your repo is already set up and connected to GitHub. All you need to do is <code>add</code> any new files you’ve created to your local repo, <code>commit</code> them (with messages!), and then <code>push</code>. While that may sound like a lot, it’s really only a few commands in the terminal, and they’ll be almost second nature once you’ve done this a few times.</p>&#13;
&#13;
<p>I always like to start any <code>commit</code> process by first checking the <code>status</code> of my repo, so I know which files need to be <code>add</code>ed, and which just need to be <code>commit</code>ted. So for me, a typical Git “check in” process would look like:</p>&#13;
&#13;
<pre data-type="programlisting">git status&#13;
git add <em>filename</em>&#13;
git commit -m "Descriptive commit message!" <em>filename</em>&#13;
git push</pre>&#13;
&#13;
<p>That’s it! Of course, you don’t need to <code>git push</code> with every <code>commit</code>; whenever you <code>git push</code>, all the <code>commit</code>s you’ve made locally will get uploaded to GitHub all at once. Either way, checking in your code this way on a regular basis means that if something goes wrong or you need to take a break, it will always be easy to restart with working code.</p>&#13;
</div></aside>&#13;
&#13;
<p>Phew! Now that we’ve covered all the fundamentals of Python programming (really!), we’re ready to move on from our “toy” examples using data that is (sort of) about this book. To get our feet wet with a data wrangling task using a real dataset, we’ll turn to information from  the New York City bike-sharing system, Citi Bike.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Hitting the Road with Citi Bike Data" data-type="sect1"><div class="sect1" id="hitting_the_road_intro">&#13;
<h1>Hitting the Road with Citi Bike Data</h1>&#13;
&#13;
<p>Every month, <a data-primary="Citi Bike dataset" data-type="indexterm" id="citibike"/>millions of people use bike-sharing systems to navigate cities and towns around the world. New York City’s Citi Bike program launched in 2013 with 6,000 bikes, and in 2020, the system saw its <a href="https://citibikenyc.com/about">100 millionth ride</a>.</p>&#13;
&#13;
<p>Citi Bike provides freely accessible data about its system operations that is both real-time and historical. To see what it takes to do data wrangling with a real-world dataset, we’re going to use Citi Bike data to answer a simple question: how many rides each day are taken by different types of Citi Bike riders?</p>&#13;
&#13;
<p>We need our Python skills to answer this question because Citi Bike riders take hundreds of thousands of rides per day—meaning that just one day of this data has too many rows for either Microsoft Excel or Google Sheets to handle. But even on a Chromebook, Python will have no problem working with this amount of data.</p>&#13;
&#13;
<p>To think about how to approach this, let’s revisit the steps of <a data-primary="data wrangling" data-secondary="process of" data-type="indexterm" id="idm45143427928464"/>data wrangling outlined in  <a data-type="xref" href="ch01.html#describing_data_wrangling">“What Is “Data Wrangling”?”</a>:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Locating or collecting data</p>&#13;
</li>&#13;
<li>&#13;
<p>Assessing the data’s quality</p>&#13;
</li>&#13;
<li>&#13;
<p>“Cleaning,” standardizing, and/or transforming the data</p>&#13;
</li>&#13;
<li>&#13;
<p>Analyzing the data</p>&#13;
</li>&#13;
<li>&#13;
<p>Visualizing the data</p>&#13;
</li>&#13;
<li>&#13;
<p>Communicating the data</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>For this exercise, we’re going to focus on steps 1–4, though as you’ll see, I’ve done some preparation that will cut down on how long we spend with certain steps. For example, I’ve already located <a href="https://citibikenyc.com/system-data">the Citi Bike system data</a>  and downloaded <a href="https://s3.amazonaws.com/tripdata/index.html">the September 2020 trip history data</a>, confirmed that the only values that appear in the <code>User Type</code> column are <code>Customer</code> and <code>Subscriber</code>, and cut down the whole September dataset to <em>just</em> the rides that began on September 1, 2020. While we’ll delve into how to do all of these processes in subsequent chapters, for now I want to focus on how to apply the lessons from this chapter to data that we didn’t make up for ourselves.<sup><a data-type="noteref" href="ch02.html#idm45143427916368" id="idm45143427916368-marker">7</a></sup></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Starting with Pseudocode" data-type="sect2"><div class="sect2" id="idm45143427914688">&#13;
<h2>Starting with Pseudocode</h2>&#13;
&#13;
<p>One of<a data-primary="data wrangling" data-secondary="pseudocode" data-type="indexterm" id="data-wrangling-pseudo"/><a data-primary="Python" data-secondary="pseudocode" data-type="indexterm" id="python-pseudo"/><a data-primary="Citi Bike dataset" data-secondary="pseudocode" data-type="indexterm" id="citibike-pseudo"/><a data-primary="pseudocode" data-type="indexterm" id="pseudocode"/> the best ways to get started with a data wrangling project of any size is to plan out your approach in advance and include that program outline in you Python file through a process known as <em>pseudocoding</em>. Pseudocoding basically means writing, in regular English (though you could certainly pseudocode in another natural language if you prefer!), what your program will do, step by step. In addition to giving you space to think through what your program needs to accomplish without worrying about how to code it, pseudocoding will give you a valuable reference for what to work on next when you need to take a break from your project and come back to it later. Although you’ll no doubt meet many professional programmers who <em>don’t</em> do this part of the process regularly, I can guarantee that it will help you finish your wrangling projects more quickly—and that it’s the kind of habit that is welcome in any professional programming or data science setting.</p>&#13;
&#13;
<p>I prefer to put my program outline and pseudocode right at the top of my Python file, in a large block of comments. To start out, I’m going to do three things:</p>&#13;
<ol>&#13;
<li>&#13;
<p>State my question.</p>&#13;
</li>&#13;
<li>&#13;
<p>Describe how I will “answer” my question.</p>&#13;
</li>&#13;
<li>&#13;
<p>Outline in plain language the steps my program will take.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>This means that the first thing I’m going to do is write a <em>lot</em> of comments in my file, as you can see in <a data-type="xref" href="#citibike_comment_block">Example 2-15</a>.</p>&#13;
<div data-type="example" id="citibike_comment_block">&#13;
<h5><span class="label">Example 2-15. </span>hitting_the_road_with_citibike.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># question: How many Citi Bike rides each day are taken by</code>&#13;
<code class="c1"># "subscribers" versus "customers"?</code>&#13;
&#13;
<code class="c1"># answer: Choose a single day of rides to examine.</code>&#13;
<code class="c1"># the dataset used for this exercise was generated from the original</code>&#13;
<code class="c1"># Citi Bike system data found here: https://s3.amazonaws.com/tripdata/index.html</code>&#13;
<code class="c1"># filename: 202009-citibike-tripdata.csv.zip</code>&#13;
&#13;
<code class="c1"># program Outline:</code>&#13;
<code class="c1"># 1. read in the data file: 202009CitibikeTripdataExample.csv</code>&#13;
<code class="c1"># 2. create variables to count: subscribers, customers, and other</code>&#13;
<code class="c1"># 3. for each row in the file:</code>&#13;
<code class="c1">#       a. If the "User Type" is "Subscriber," add 1 to "subscriber_count"</code>&#13;
<code class="c1">#       b. If the "User Type" is "Customer," add 1 to "customer_count"</code>&#13;
<code class="c1">#       c. Otherwise, add 1 to the "other" variable</code>&#13;
<code class="c1"># 4. print out my results</code></pre></div>&#13;
&#13;
<p>Now <a data-primary="data wrangling" data-secondary="pseudocode" data-startref="data-wrangling-pseudo" data-type="indexterm" id="idm45143427883952"/><a data-primary="Python" data-secondary="pseudocode" data-startref="python-pseudo" data-type="indexterm" id="idm45143427882864"/><a data-primary="Citi Bike dataset" data-secondary="pseudocode" data-startref="citibike-pseudo" data-type="indexterm" id="idm45143427881648"/><a data-primary="pseudocode" data-startref="pseudocode" data-type="indexterm" id="idm45143427880432"/>that the program outline is all squared away, it’s time to get started with the first part of our program: reading in our data.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>Anytime you start a new file like this, remember that even if it’s saved inside a local Git repo folder, you’ll need to run <code>git add</code> to <a data-primary="Git" data-secondary="commands" data-tertiary="add" data-type="indexterm" id="idm45143427877456"/><a data-primary="commands (git)" data-secondary="add" data-type="indexterm" id="idm45143427876176"/>have Git back up any changes you make (you can’t <code>commit</code> a file until you <code>add</code> it, remember). These steps are outlined in <a data-type="xref" href="#dont_forget_git">“Don’t Forget Git!”</a>, in case you’d like a refresher. While how often you <code>commit</code> is up to you, for this exercise I recommend that you <code>commit</code> your code (with a descriptive commit message, of course!) after each code block in this section. As you get more comfortable with the coding and Git <code>commit</code> process, of course, you’ll find a frequency and rhythm for backing up your code that works best for you.</p>&#13;
</div>&#13;
&#13;
<p>Loading<a data-primary="data wrangling" data-secondary="reading data" data-type="indexterm" id="data-wrangling-reading"/><a data-primary="Citi Bike dataset" data-secondary="reading data" data-type="indexterm" id="citibike-read"/><a data-primary="Python" data-secondary="reading data" data-type="indexterm" id="python-read"/><a data-primary="reading data" data-type="indexterm" id="read-data"/><a data-primary="csv library" data-type="indexterm" id="csv-library"/> different data formats, as we’ll see in-depth in <a data-type="xref" href="ch04.html#chapter4">Chapter 4</a>, can actually be one of the trickier aspects of data wrangling. Fortunately, there are many Python libraries available to help, and we’re going to make use of one right now! I mentioned libraries briefly in <a data-type="xref" href="#library_love">“Libraries: Borrowing Custom Functions from Other Coders”</a>; they are essentially cookbooks of code. For this project, we’re going to use the code “recipes” from the <em>csv</em> library, which is mostly designed to deal with—you guessed it!—<em>.csv</em> files. The file extension <em>.csv</em> stands for <em>c</em>omma-<em>s</em>eparated <em>v</em>alue, and if you haven’t seen it before, don’t worry. We’ll go into (significant) detail about file types in <a data-type="xref" href="ch04.html#chapter4">Chapter 4</a>. Right now, having the <em>csv</em> library on hand means that we don’t actually <em>need</em> to know too much about this file type in order to work with it, because the library’s code recipes are going to do a lot of the work for us!</p>&#13;
&#13;
<p>If you’re following along in your own file, you’ll want to add the code in <a data-type="xref" href="#hitting_the_road_1">Example 2-16</a> to the program outline.</p>&#13;
<div data-type="example" id="hitting_the_road_1">&#13;
<h5><span class="label">Example 2-16. </span>hitting_the_road_with_citibike.py (continued)</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># import the `csv` library </code><a class="co" href="#callout_introduction_to_python_CO3-1" id="co_introduction_to_python_CO3-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">csv</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># open the `202009CitibikeTripdataExample.csv` file in read ("r") mode</code><code>&#13;
</code><code class="c1"># this file should be in the same folder as our Python script or notebook</code><code>&#13;
</code><code class="n">source_file</code><code> </code><code class="o">=</code><code> </code><code class="nb">open</code><code class="p">(</code><code class="s2">"</code><code class="s2">202009CitibikeTripdataExample.csv</code><code class="s2">"</code><code class="p">,</code><code class="s2">"</code><code class="s2">r</code><code class="s2">"</code><code class="p">)</code><code> </code><a class="co" href="#callout_introduction_to_python_CO3-2" id="co_introduction_to_python_CO3-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code class="c1"># pass our `source_file` as an ingredient to the `csv` library's</code><code>&#13;
</code><code class="c1"># DictReader "recipe".</code><code>&#13;
</code><code class="c1"># store the result in a variable called `citibike_reader`</code><code>&#13;
</code><code class="n">citibike_reader</code><code> </code><code class="o">=</code><code> </code><code class="n">csv</code><code class="o">.</code><code class="n">DictReader</code><code class="p">(</code><code class="n">source_file</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># the DictReader method has added some useful information to our data,</code><code>&#13;
</code><code class="c1"># like a `fieldnames` property that lets us access all the values</code><code>&#13;
</code><code class="c1"># in the first or "header" row</code><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="n">citibike_reader</code><code class="o">.</code><code class="n">fieldnames</code><code class="p">)</code><code> </code><a class="co" href="#callout_introduction_to_python_CO3-3" id="co_introduction_to_python_CO3-3"><img alt="3" src="assets/3.png"/></a></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_introduction_to_python_CO3-1" id="callout_introduction_to_python_CO3-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>The <em>csv</em> library includes a range of handy code recipes for dealing with our data files.</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO3-2" id="callout_introduction_to_python_CO3-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p><code>open()</code> is a built-in function that takes a file name and a “mode” as parameters. In this example, the target file (<em>202009CitibikeTripdataExample.csv</em>) should be in the same folder as our Python script or notebook. Values for the “mode” can be <code>"r"</code> for “read” or <code>"w"</code> for “write.”</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO3-3" id="callout_introduction_to_python_CO3-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>By printing out the <code>citibike_reader.fieldnames</code> values, we can see that the exact label for the “User Type” column is <code>usertype</code>.</p></dd>&#13;
</dl>&#13;
&#13;
<p>At this point, we could actually run this script, and we should see output that looks something like this:</p>&#13;
<pre>['tripduration', 'starttime', 'stoptime', 'start station id', 'start station&#13;
 name', 'start station latitude', 'start station longitude', 'end station id',&#13;
 'end station name', 'end station latitude', 'end station longitude', 'bikeid',&#13;
 'usertype', 'birth year', 'gender']</pre>&#13;
&#13;
<p>We’ve also now succeeded in completing the first step of our outline: we’ve read in our data. But we’ve also used the <em>csv</em> library to transform that data and even generate some  <em>metadata</em> about it. Importantly, we now know that the <em>precise</em> name of the column containing our “User Type” information is actually <code>usertype</code>. This will help us when it comes time to write our <code>if...else</code> statements. To confirm that things are working as you expect, be sure to save and run your code. If it works as expected (that is, it prints out a list of column headers), now is a good time to do a <code>git commit</code> cycle:</p>&#13;
<pre data-type="programlisting">&#13;
git status&#13;
git commit -m "<em>Commit message here</em>" <em>filename_with_extension</em>&#13;
git push&#13;
</pre>&#13;
&#13;
<p>Remember that if you are working on Google Colab, you can commit your code directly to GitHub by choosing File → “Save a copy in GitHub” and entering your commit message in the overlay window that <a data-primary="data wrangling" data-secondary="reading data" data-startref="data-wrangling-reading" data-type="indexterm" id="idm45143427732224"/><a data-primary="Citi Bike dataset" data-secondary="reading data" data-startref="citibike-read" data-type="indexterm" id="idm45143427730976"/><a data-primary="Python" data-secondary="reading data" data-startref="python-read" data-type="indexterm" id="idm45143427729760"/><a data-primary="reading data" data-startref="read-data" data-type="indexterm" id="idm45143427728544"/><a data-primary="csv library" data-startref="csv-library" data-type="indexterm" id="idm45143427727600"/>appears.</p>&#13;
&#13;
<p>Now that we’ve completed step one successfully, let’s go on to step two, as shown in <a data-type="xref" href="#hitting_the_road_2">Example 2-17</a>.<sup><a data-type="noteref" href="ch02.html#idm45143427725168" id="idm45143427725168-marker">8</a></sup></p>&#13;
<div data-type="example" id="hitting_the_road_2">&#13;
<h5><span class="label">Example 2-17. </span>hitting_the_road_with_citibike.py (continued again)</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># create a variable to hold the count of each type of Citi Bike user</code>&#13;
<code class="c1"># assign or "initialize" each with a value of zero (0)</code>&#13;
<code class="n">subscriber_count</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="n">customer_count</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="n">other_user_count</code> <code class="o">=</code> <code class="mi">0</code></pre></div>&#13;
&#13;
<p>Pretty simple, right? On to step three! Since<a data-primary="data wrangling" data-secondary="looping through data" data-type="indexterm" id="data-wrangling-loop"/><a data-primary="Python" data-secondary="loops" data-type="indexterm" id="python-loops-citibike"/><a data-primary="loops" data-secondary="Citi Bike dataset example" data-type="indexterm" id="loops-citibike"/><a data-primary="Citi Bike dataset" data-secondary="looping through data" data-type="indexterm" id="citibike-loop"/><a data-primary="for loops" data-secondary="Citi Bike dataset example" data-type="indexterm" id="for-loops-citibike"/> we need to check each row of data in the file, we’ll need to write a <code>for...in</code> loop, which will need to have an <code>if...else</code> inside of it to test for specific values in the <code>usertype</code> column. To help keep track of what each line of code is doing, I’m going to write a <em>lot</em> of comments explaining the code in English, as shown in <a data-type="xref" href="#hitting_the_road_3">Example 2-18</a>.</p>&#13;
<div data-type="example" id="hitting_the_road_3">&#13;
<h5><span class="label">Example 2-18. </span>hitting_the_road_with_citibike.py (still rolling)</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># step 3: loop through every row of our data</code><code>&#13;
</code><code class="k">for</code><code> </code><code class="n">a_row</code><code> </code><code class="ow">in</code><code> </code><code class="n">citibike_reader</code><code class="p">:</code><code> </code><a class="co" href="#callout_introduction_to_python_CO4-1" id="co_introduction_to_python_CO4-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># step 3a: if the value in the `usertype` column</code><code>&#13;
</code><code>    </code><code class="c1"># of the current row is "Subscriber"</code><code>&#13;
</code><code>    </code><code class="k">if</code><code> </code><code class="n">a_row</code><code class="p">[</code><code class="s2">"</code><code class="s2">usertype</code><code class="s2">"</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="s2">"</code><code class="s2">Subscriber</code><code class="s2">"</code><code class="p">:</code><code> </code><a class="co" href="#callout_introduction_to_python_CO4-2" id="co_introduction_to_python_CO4-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="c1"># add 1 to `subscriber_count`</code><code>&#13;
</code><code>        </code><code class="n">subscriber_count</code><code> </code><code class="o">=</code><code> </code><code class="n">subscriber_count</code><code> </code><code class="o">+</code><code class="mi">1</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># step 3b: otherwise (else), if the value in the `usertype` column</code><code>&#13;
</code><code>    </code><code class="c1"># of the current row is "Customer"</code><code>&#13;
</code><code>    </code><code class="k">elif</code><code> </code><code class="n">a_row</code><code class="p">[</code><code class="s2">"</code><code class="s2">usertype</code><code class="s2">"</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="s2">"</code><code class="s2">Customer</code><code class="s2">"</code><code class="p">:</code><code> </code><a class="co" href="#callout_introduction_to_python_CO4-3" id="co_introduction_to_python_CO4-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="c1"># add 1 to `subscriber_count`</code><code>&#13;
</code><code>        </code><code class="n">customer_count</code><code> </code><code class="o">=</code><code> </code><code class="n">customer_count</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1"># step 3c: the `usertype` value is _neither_"Subscriber" nor "Customer",</code><code>&#13;
</code><code>    </code><code class="c1"># so we'll add 1 to our catch-all `other_user_count` variable</code><code>&#13;
</code><code>    </code><code class="k">else</code><code class="p">:</code><code> </code><a class="co" href="#callout_introduction_to_python_CO4-4" id="co_introduction_to_python_CO4-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="n">other_user_count</code><code> </code><code class="o">=</code><code> </code><code class="n">other_user_count</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_introduction_to_python_CO4-1" id="callout_introduction_to_python_CO4-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We want to make sure our <code>for</code> loop is working with the data that’s already been transformed by our DictReader recipe, so we want to make sure we’re referencing our <code>citibike_reader</code> variable here.</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO4-2" id="callout_introduction_to_python_CO4-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>In order for my <code>if</code> statements to be “inside” my loop, they have to be indented one more <code>tab</code> to the right.</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO4-3" id="callout_introduction_to_python_CO4-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>Because we need to use “else” here—but also need another “if” statement—we’re using the compound keyword <code>elif</code>, which is short for “else if.”</p></dd>&#13;
<dt><a class="co" href="#co_introduction_to_python_CO4-4" id="callout_introduction_to_python_CO4-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>This final <code>else</code> will “catch” any rows of data where the value of <code>usertype</code> was not one of the values we checked for explicitly (in this case, “Subscriber” or “Customer”). This serves as a (very) basic data quality check: if this data column contains any unexpected values, <code>other_user_count</code> will be greater than zero (<code>0</code>), and we need to look at our original data more closely.</p></dd>&#13;
</dl>&#13;
&#13;
<p>OK, there is a <em>lot</em> going on in <a data-type="xref" href="#hitting_the_road_3">Example 2-18</a>—or at least it looks like there is! Really, all we did was check whether the value in each row’s <code>usertype</code> column was <code>"Subscriber"</code> or <code>"Customer"</code> and added<a data-primary="Python" data-secondary="variables" data-tertiary="incrementing" data-type="indexterm" id="idm45143427536416"/><a data-primary="variables" data-secondary="incrementing" data-type="indexterm" id="idm45143427535136"/><a data-primary="incrementing variables" data-type="indexterm" id="idm45143427534192"/> one to (or <em>incremented</em>) the corresponding <code>count</code> variable if it was. If the <code>usertype</code> value was <em>neither</em> of those, we added one to the <code>other_user_count</code> variable.</p>&#13;
&#13;
<p>While it may <a data-primary="Python" data-secondary="comments" data-type="indexterm" id="idm45143427530800"/><a data-primary="commenting code" data-type="indexterm" id="idm45143427529792"/>seem strange that we’ve added so many more lines of comments than code, this is actually pretty normal—even good! After all, while the computer never “forgets” how to read Python code, <em>you</em> will <em>absolutely</em> forget what this code is doing and why if you don’t explain it in the comments. And that’s not a bad thing! After all, memorizing all of your code would make programming pretty inefficient. By writing detailed comments, you ensure that you can easily understand your code in the future, without having to do the work of translating Python to English all over <a data-primary="data wrangling" data-secondary="looping through data" data-startref="data-wrangling-loop" data-type="indexterm" id="idm45143427527568"/><a data-primary="Python" data-secondary="loops" data-startref="python-loops-citibike" data-type="indexterm" id="idm45143427526320"/><a data-primary="loops" data-secondary="Citi Bike dataset example" data-startref="loops-citibike" data-type="indexterm" id="idm45143427525104"/><a data-primary="Citi Bike dataset" data-secondary="looping through data" data-startref="citibike-loop" data-type="indexterm" id="idm45143427523872"/><a data-primary="for loops" data-secondary="Citi Bike dataset example" data-startref="for-loops-citibike" data-type="indexterm" id="idm45143427522656"/>again!</p>&#13;
&#13;
<p>Before we move on, make sure to run your code. Since “no news is good news” for our most common types of errors, if you don’t get any errors, go ahead and do a <code>git commit</code> cycle. Otherwise, now is a good time to pause and troubleshoot any issues you’ve encountered. Once those are resolved, you’ll see there’s only one <a data-primary="data wrangling" data-secondary="printing results" data-type="indexterm" id="data-wrangling-print"/><a data-primary="Python" data-secondary="printing results" data-type="indexterm" id="python-print"/><a data-primary="Citi Bike dataset" data-secondary="printing results" data-type="indexterm" id="citibike-print"/><a data-primary="print() function" data-type="indexterm" id="print-function"/>very simple step left: printing! Let’s just go the most straightforward route and use built-in <code>print</code> statements, as shown in <a data-type="xref" href="#hitting_the_road_4">Example 2-19</a>.</p>&#13;
<div data-type="example" id="hitting_the_road_4">&#13;
<h5><span class="label">Example 2-19. </span>hitting_the_road_with_citibike.py (we’ve arrived!)</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># step 4: print out our results, being sure to include "labels" in the process:</code><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="s2">"</code><code class="s2">Number of subscribers:</code><code class="s2">"</code><code class="p">)</code><code> </code><a class="co" href="#callout_introduction_to_python_CO5-1" id="co_introduction_to_python_CO5-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="n">subscriber_count</code><code class="p">)</code><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="s2">"</code><code class="s2">Number of customers:</code><code class="s2">"</code><code class="p">)</code><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="n">customer_count</code><code class="p">)</code><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="s2">"</code><code class="s2">Number of </code><code class="s2">'</code><code class="s2">other</code><code class="s2">'</code><code class="s2"> users:</code><code class="s2">"</code><code class="p">)</code><code>&#13;
</code><code class="k">print</code><code class="p">(</code><code class="n">other_user_count</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_introduction_to_python_CO5-1" id="callout_introduction_to_python_CO5-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Note that these <code>print()</code> statements are left justified, because we only want to print values once the <code>for</code> loop has finished going through the entire dataset.</p></dd>&#13;
</dl>&#13;
&#13;
<p>When you’ve added the code in <a data-type="xref" href="#hitting_the_road_4">Example 2-19</a> to your file, save and run it. Your output should look something like this:</p>&#13;
<pre>['tripduration', 'starttime', 'stoptime', 'start station id', 'start station&#13;
 name', 'start station latitude', 'start station longitude', 'end station id',&#13;
 'end station name', 'end station latitude', 'end station longitude', 'bikeid',&#13;
 'usertype', 'birth year', 'gender']&#13;
Number of subscribers:&#13;
58961&#13;
Number of customers:&#13;
17713&#13;
Number of 'other' users:&#13;
0</pre>&#13;
&#13;
<p>If that’s what you see—congratulations! You’ve successfully written your first real-world data wrangling program. Make sure to do a <code>git commit</code> cycle to back up your <a data-primary="data wrangling" data-secondary="printing results" data-startref="data-wrangling-print" data-type="indexterm" id="idm45143427471520"/><a data-primary="Python" data-secondary="printing results" data-startref="python-print" data-type="indexterm" id="idm45143427470240"/><a data-primary="Citi Bike dataset" data-secondary="printing results" data-startref="citibike-print" data-type="indexterm" id="idm45143427440256"/><a data-primary="print() function" data-startref="print-function" data-type="indexterm" id="idm45143427439040"/>great work!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Seeking Scale" data-type="sect2"><div class="sect2" id="idm45143427913776">&#13;
<h2>Seeking Scale</h2>&#13;
&#13;
<p>In writing this script, we’ve accomplished a number of things:</p>&#13;
<ol>&#13;
<li>&#13;
<p>We’ve successfully and precisely counted the number of “Subscribers” and “Customers” who used Citi Bikes on a single day in September 2020.</p>&#13;
</li>&#13;
<li>&#13;
<p>We’ve confirmed that there are no other values in the <code>usertype</code> column (because the value in our <code>other_user_count</code> variable was 0).</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>If <a data-primary="Python" data-secondary="scalability of" data-type="indexterm" id="python-scalability"/><a data-primary="scalability of Python" data-type="indexterm" id="scalability-python"/><a data-primary="Citi Bike dataset" data-secondary="scalability of Python" data-type="indexterm" id="citibike-scalability"/><a data-primary="data wrangling" data-secondary="Python" data-tertiary="scalability of" data-type="indexterm" id="data-wrangling-scalability"/>you’ve done data wrangling before using spreadsheet or database programs, for example, but this was your first time working in Python, chances are this process took longer than your previous method, all things considered. But as I’ve mentioned a few times already, a key advantage that coding offers over many other methods is the ability to <em>scale</em> almost seamlessly. That scale works in two ways. First, it does the same work on a larger dataset almost as fast as a smaller one. For example, on my Chromebook, the <em>hitting_the_road_with_citibike.py</em> script completes in about half a second. If I run the same script on the data from <em>the entire month of September</em>, it takes about 12 seconds. Most software programs that could even handle the entire month’s data would probably need that long just to <em>open</em> the file, much less do any work to it. So, using Python helps us scale because we can handle larger datasets much more quickly and effectively. You can test this out for yourself by changing the line:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">source_file</code> <code class="o">=</code> <code class="nb">open</code><code class="p">(</code><code class="s2">"202009CitibikeTripdataExample.csv"</code><code class="p">,</code><code class="s2">"r"</code><code class="p">)</code></pre>&#13;
&#13;
<p>to:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">source_file</code> <code class="o">=</code> <code class="nb">open</code><code class="p">(</code><code class="s2">"202009-citibike-tripdata.csv"</code><code class="p">,</code><code class="s2">"r"</code><code class="p">)</code></pre>&#13;
&#13;
<p>If you’re working in a standalone Python file, you can even measure how long it takes to run your script on the new file by adding the <code>time</code> keyword before your <code>python</code> command:</p>&#13;
<pre>time python _your_filename_.py</pre>&#13;
&#13;
<p>This illustrates the second type of scale we achieve with Python, which has to do with the <em>marginal effort</em> required to have the computer do the same task on a different dataset (with the same structure) once we have written our program, and this is where Python (and programming in general) really shines. In order to run my script on data from the whole month of September 2020, <em>all I had to do was load a different data file</em>. By changing the target filename that I opened with my <code>source_file =</code> statement, I was able to process <em>all</em> of the September data instead of just the data from one day. In other words, the additional (or “marginal”) effort to process hundreds of thousands of additional rows of data was exactly as long as it took me to copy and paste the filename. Building on that example, I could process an entire year of data in a few minutes (or less, as we’ll see in <a data-type="xref" href="ch08.html#chapter8">Chapter 8</a>). That is something that is nearly impossible to achieve with any noncoding data wrangling method.</p>&#13;
&#13;
<p>The complete script we’ve built in this section is an example of how, even using just the basic structures we’ve covered in this chapter, you can do some really useful and efficient data wrangling with Python. Though there are many new data formats and challenges to explore in the remaining chapters, I hope this has given you a sense of how much you can achieve with even these “basic” Python tools and just a little effort and attention to detail. Imagine what else you can accomplish if you <a data-primary="Citi Bike dataset" data-startref="citibike" data-type="indexterm" id="idm45143427371808"/><a data-primary="Python" data-secondary="scalability of" data-startref="python-scalability" data-type="indexterm" id="idm45143427414288"/><a data-primary="scalability of Python" data-startref="scalability-python" data-type="indexterm" id="idm45143427413072"/><a data-primary="Citi Bike dataset" data-secondary="scalability of Python" data-startref="citibike-scalability" data-type="indexterm" id="idm45143427412128"/><a data-primary="data wrangling" data-secondary="Python" data-startref="data-wrangling-scalability" data-tertiary="scalability of" data-type="indexterm" id="idm45143427410912"/>keep going!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Conclusion" data-type="sect1"><div class="sect1" id="idm45143427934016">&#13;
<h1>Conclusion</h1>&#13;
&#13;
<p>Believe it or not, in this chapter we’ve covered <em>all</em> the essential Python tools you’ll need to do data wrangling—as well as almost any other kind of Python programming! To recap what we’ve covered, we learned about:</p>&#13;
<dl>&#13;
<dt>Data types</dt>&#13;
<dd>&#13;
<p>These are the “nouns” of programming: numbers, strings, lists, dicts, and &#13;
<span class="keep-together">Booleans</span>.</p>&#13;
</dd>&#13;
<dt>Functions</dt>&#13;
<dd>&#13;
<p>These are the “verbs” of programming: operators, built-in functions, and user-defined functions.</p>&#13;
</dd>&#13;
<dt>Using <code>for...in...</code> loops</dt>&#13;
<dd>&#13;
<p>These let us run a particular chunk of code on every item in a list.</p>&#13;
</dd>&#13;
</dl>&#13;
<dl>&#13;
<dt>Using <code>if...else</code> conditionals</dt>&#13;
<dd>&#13;
<p>These let us to make “decisions” about what code should be run, based (usually) on the attributes of our data.</p>&#13;
</dd>&#13;
<dt>Errors</dt>&#13;
<dd>&#13;
<p>We explored the different types of errors that we’re likely to encounter when programming and how to best address and prevent them.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>We also practiced combining and composing these concepts to create a basic program to work with some sample data from the New York Citi Bike system. While we’ll expand on this example and explore others in future chapters, our next task is to understand more about how to evaluate data itself as part of our data wrangling work.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45143423781840"><sup><a href="ch02.html#idm45143423781840-marker">1</a></sup> There are also many language-specific data types (such as Python’s <em>tuple</em> data type) that are not as relevant to our data wrangling efforts, so we won’t address these in detail.</p><p data-type="footnote" id="idm45143426063952"><sup><a href="ch02.html#idm45143426063952-marker">2</a></sup> In many other programming languages, curly braces are used to indicate which pieces of code belong inside a loop or a conditional statement. As we mentioned in <a data-type="xref" href="ch01.html#readability">“Readability”</a>, however, Python is <em>whitespace dependent</em>.</p><p data-type="footnote" id="idm45143428265504"><sup><a href="ch02.html#idm45143428265504-marker">3</a></sup> Unlike computers, of course, toddlers are capable of genuine originality and learning.</p><p data-type="footnote" id="idm45143428263280"><sup><a href="ch02.html#idm45143428263280-marker">4</a></sup> For more, see Scott Rosenberg’s Wordyard <a href="http://wordyard.com/2003/09/15/if-u-cn-rd-ths-msg-u-r-jst-lke-vryne-lse">blog post about the topic</a>.</p><p data-type="footnote" id="idm45143428086384"><sup><a href="ch02.html#idm45143428086384-marker">5</a></sup> This is actually a good thing, as we’ll see in <a data-type="xref" href="ch03.html#chapter3">Chapter 3</a>.</p><p data-type="footnote" id="idm45143428081024"><sup><a href="ch02.html#idm45143428081024-marker">6</a></sup> For information on code coverage best practices, see “Code Coverage Best Practices” on the <a href="https://testing.googleblog.com/2020/08/code-coverage-best-practices.html">Google Testing Blog</a>.</p><p data-type="footnote" id="idm45143427916368"><sup><a href="ch02.html#idm45143427916368-marker">7</a></sup> All of the code for this exercise can be found in the <em>hitting_the_road_with_citibike.py</em> and <em>hitting_the_road_with_citibike.ipynb</em> files. However, I strongly encourage you to create new files of your own and enter the provided code yourself.</p><p data-type="footnote" id="idm45143427725168"><sup><a href="ch02.html#idm45143427725168-marker">8</a></sup> Once again—and from here on out—add this code to your file below the last line of the previous block.</p></div></div></section></body></html>