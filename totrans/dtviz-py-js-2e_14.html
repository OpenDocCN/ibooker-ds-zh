<html><head></head><body>
<div id="sbo-rt-content"><section data-pdf-bookmark="Chapter 10. Visualizing Data with Matplotlib" data-type="chapter" epub:type="chapter"><div class="chapter" id="chapter_matplotlib">
<h1><span class="label">Chapter 10. </span>Visualizing Data with Matplotlib</h1>
<p>As a data visualizer, one of the best ways to come to grips with your data is to visualize it interactively, using the full range of charts and plots that have evolved to summarize and refine datasets.<a data-primary="Matplotlib" data-type="indexterm" id="ix_Matp"/> Conventionally, the fruits of this exploratory phase are then presented as static figures, but increasingly they are used to construct more engaging interactive web-based charts, such as the cool D3 visualizations you have probably seen (one of which we’ll be building in <a data-type="xref" href="part05.xhtml#part_viz">Part V</a>).</p>
<p>Python’s Matplotlib and its family of extensions (such as the statistically focused seaborn) form a mature and very customizable plotting ecosystem. Matplotlib plots can be used interactively by IPython (the Qt and notebook versions), providing a very powerful and intuitive way of finding interesting nuggets in your data. In this chapter, we’ll introduce Matplotlib and one of its great extensions, seaborn.</p>
<section data-pdf-bookmark="pyplot and Object-Oriented Matplotlib" data-type="sect1"><div class="sect1" id="idm45607769779280">
<h1>pyplot and Object-Oriented Matplotlib</h1>
<p>Matplotlib can be more than a little confusing, especially if you start randomly sampling examples online. <a data-primary="object-oriented Matplotlib" data-secondary="pyplot and" data-type="indexterm" id="idm45607769778016"/><a data-primary="pyplot module" data-type="indexterm" id="idm45607769777136"/><a data-primary="Matplotlib" data-secondary="pyplot and object-oriented Matplotlib" data-type="indexterm" id="idm45607769776464"/>The main complicating factor is that there are two main ways to create plots, which are similar enough to be confused but different enough to lead to a lot of frustrating errors. The first way uses a global state machine to interact directly with Matplotlib’s <code>pyplot</code> module. The second, object-oriented approach uses the more familiar notion of figure and axes classes to provide a programmatic alternative.  I’ll clarify their differences in the sections ahead, but as a rough rule of thumb, if you’re working interactively with single plots, <code>pyplot</code>’s global state is a convenient shortcut. For all other occasions, it makes sense to explicitly declare your figures and axes using the object-oriented approach.</p>
</div></section>
<section data-pdf-bookmark="Starting an Interactive Session" data-type="sect1"><div class="sect1" id="idm45607769774368">
<h1>Starting an Interactive Session</h1>
<p>We will be using a  <a href="https://jupyter.org">Jupyter notebook</a> for our interactive visualization. <a data-primary="Matplotlib" data-secondary="starting an interactive session" data-type="indexterm" id="idm45607769772016"/><a data-primary="Jupyter notebooks" data-secondary="using in interactive Matplotlib session" data-type="indexterm" id="idm45607769771072"/><a data-primary="IPython" data-secondary="use in Matplotlib interactive session" data-type="indexterm" id="idm45607769770160"/>Use the following command to start a session:</p>
<pre data-type="programlisting">$ jupyter notebook</pre>
<p>You can then use one of the <a href="https://oreil.ly/KhWbX">Matplotlib magic commands</a> within the IPython session to enable interactive Matplotlib. <a data-primary="magic commands" data-type="indexterm" id="idm45607769766976"/><a data-primary="GUI session for Matplotlib" data-type="indexterm" id="idm45607769766304"/>On its own, <code>%matplotlib</code> will use the default GUI backend to create a plotting window, but you can specify the backend directly.<a data-primary="Qt console IPython" data-type="indexterm" id="idm45607769764896"/> The following should work on standard and Qt console IPython:<sup><a data-type="noteref" href="ch10.xhtml#idm45607769764064" id="idm45607769764064-marker">1</a></sup></p>
<pre data-type="programlisting">%matplotlib [qt | osx | wx ...]</pre>
<p>To get inline graphics in the notebook or Qt console, you can use the <code>inline</code> directive. <a data-primary="inline plots (Matplotlib)" data-type="indexterm" id="idm45607769761152"/>Note that with inline plots, you can’t amend them after creation, unlike the standalone Matplotlib window:</p>
<pre data-type="programlisting">%matplotlib inline</pre>
<p>Whether you are using Matplotlib interactively or in Python programs, you’ll use similar imports:</p>
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">numpy</code> <code class="k">as</code> <code class="nn">np</code>
<code class="kn">import</code> <code class="nn">pandas</code> <code class="k">as</code> <code class="nn">pd</code>
<code class="kn">import</code> <code class="nn">matplotlib.pyplot</code> <code class="k">as</code> <code class="nn">plt</code></pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>You will find many examples of Matplotlib using <code>pylab</code>. <code>pylab</code> is a convenience module that bulk-imports <code>matplotlib.pyplot</code> (for plotting) and NumPy in a single namespace.<a data-primary="NumPy" data-secondary="merging and importing with pyplot" data-type="indexterm" id="idm45607769733632"/><a data-primary="pyplot module" data-secondary="merging and importing with NumPy" data-type="indexterm" id="idm45607769732688"/> <code>pylab</code> is pretty much deprecated now, but even were it not,  I’d still recommend avoiding this namespace and merging and importing <code>pyplot</code> and <code>numpy</code> explicitly.</p>
</div>
<p>While NumPy and pandas are not mandatory, Matplotlib is designed to play well with them, handling NumPy arrays and, by association, pandas Series.<a data-primary="pandas" data-secondary="use with Matplotlib" data-type="indexterm" id="idm45607769729920"/></p>
<p>The ability to create inline plots is key to enjoyable interaction with Matplotlib, and we achieve this in IPython with the following “magic”<sup><a data-type="noteref" href="ch10.xhtml#idm45607769728560" id="idm45607769728560-marker">2</a></sup> injunction:</p>
<pre data-type="programlisting">In [0]: %matplotlib inline</pre>
<p>Your Matplotlib plots will now be inserted into your IPython workflow. This works with Qt and notebook versions. In notebooks, the plots are incorporated into the active cell.</p>
<div data-type="tip"><h1>Amending Plots</h1>
<p>In inline mode, after a Jupyter notebook cell or (multiline) input has been run, the drawing context is flushed. This means you cannot change the plot from a previous cell or input using the <code>gcf</code> (get current figure) method but have to repeat all the plot commands with any additions or amendments in a new input/cell.</p>
</div>
</div></section>
<section data-pdf-bookmark="Interactive Plotting with pyplot’s Global State" data-type="sect1"><div class="sect1" id="sect_pyplot_global">
<h1>Interactive Plotting with pyplot’s Global State</h1>
<p>The <code>pyplot</code> module provides a global state that you can manipulate interactively.<sup><a data-type="noteref" href="ch10.xhtml#idm45607769721600" id="idm45607769721600-marker">3</a></sup> This is <a data-primary="pyplot module" data-secondary="interactive plotting with pyplot's global state" data-type="indexterm" id="ix_pypltinter"/><a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-type="indexterm" id="ix_Matpinter"/>intended for use in interactive data exploration and is best when you are creating simple plots, usually containing single figures. <code>pyplot</code> is convenient and many of the examples you’ll see use it, but for more complex plotting Matplotlib’s object-oriented API (which we’ll see shortly) comes into its own. <a data-primary="period_range method (pandas)" data-type="indexterm" id="idm45607769703120"/>Before demoing use of the global plot, let’s create some random data to display, courtesy of pandas’s useful <code>period_range</code> method:</p>
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code><code> </code><code class="nn">datetime</code><code> </code><code class="kn">import</code><code> </code><code class="n">datetime</code><code>
</code><code>
</code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">period_range</code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">(</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">periods</code><code class="o">=</code><code class="mi">200</code><code class="p">,</code><code> </code><code class="n">freq</code><code class="o">=</code><code class="s1">'</code><code class="s1">d</code><code class="s1">'</code><code class="p">)</code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO1-1" id="co_visualizing_data_with_matplotlib_CO1-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">x</code><code class="o">.</code><code class="n">to_timestamp</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">to_pydatetime</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO1-2" id="co_visualizing_data_with_matplotlib_CO1-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">y</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">random</code><code class="o">.</code><code class="n">randn</code><code class="p">(</code><code class="mi">200</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">)</code><code class="o">.</code><code class="n">cumsum</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO1-3" id="co_visualizing_data_with_matplotlib_CO1-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO1-1" id="callout_visualizing_data_with_matplotlib_CO1-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Creates a pandas <code>datetime</code> index with 200 day (<code>d</code>) elements, starting from the current time (<code>datetime.now()</code>).</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO1-2" id="callout_visualizing_data_with_matplotlib_CO1-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Converts <code>datetime</code> index to Python <code>datetimes</code>.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO1-3" id="callout_visualizing_data_with_matplotlib_CO1-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>Creates three 200-element random arrays summed along the 0 axis.</p></dd>
</dl>
<p>We now have a y-axis with 200 time slots and three random arrays for the complementary x values. These are provided as separate arguments to the <code>(line)plot</code> method:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">plt</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">)</code></pre>
<p>This gives us the not particularly inspiring chart shown in <a data-type="xref" href="#mpl_3lines_default">Figure 10-1</a>. Note how Matplotlib deals naturally with a multidimensional NumPy line array.</p>
<figure><div class="figure" id="mpl_3lines_default">
<img alt="dpj2 1001" height="1343" src="assets/dpj2_1001.png" width="1829"/>
<h6><span class="label">Figure 10-1. </span>Default line plot</h6>
</div></figure>
<p>Although Matplotlib’s defaults are, by general consensus, less than ideal, one of its strengths is the sheer amount of customization you can perform. This is why there is a rich ecosystem of chart libraries that wrap Matplotlib with better defaults, more attractive color schemes, and more. Let’s see some of this customization in action by using vanilla Matplotlib to tailor our default plot.</p>
<section data-pdf-bookmark="Configuring Matplotlib" data-type="sect2"><div class="sect2" id="idm45607769581984">
<h2>Configuring Matplotlib</h2>
<p>Matplotlib provides a wide range of <a href="https://oreil.ly/IbgVA">configurations</a>, which can be specified in a <a href="https://oreil.ly/knyiZ"><code>matplotlibrc</code> file</a> or dynamically, through the dictionary-like <code>rcParams</code> variable. <a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-tertiary="configuring Matplotlib" data-type="indexterm" id="idm45607769578336"/>Here we change the width and default color of our plot lines:</p>
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">matplotlib</code> <code class="k">as</code> <code class="nn">mpl</code>
<code class="n">mpl</code><code class="o">.</code><code class="n">rcParams</code><code class="p">[</code><code class="s1">'lines.linewidth'</code><code class="p">]</code> <code class="o">=</code> <code class="mi">2</code>
<code class="n">mpl</code><code class="o">.</code><code class="n">rcParams</code><code class="p">[</code><code class="s1">'lines.color'</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'r'</code> <code class="c1"># red</code></pre>
<p>You can find a sample <code>matplotlibrc</code> file at the <a href="https://oreil.ly/LBqxb">main site</a>.</p>
<p>As well as using the <code>rcParams</code> variable, you can use the <code>gcf</code> (get current figure) method to grab the currently active figure and manipulate it directly.<a data-primary="rcParams variable (pyplotlib)" data-type="indexterm" id="idm45607769525456"/><a data-primary="gcf (get current figure) method (pyplotlib)" data-type="indexterm" id="idm45607769524784"/></p>
<p>Let’s see a little example of configuration, setting the current figure’s size.</p>
</div></section>
<section data-pdf-bookmark="Setting the Figure’s Size" data-type="sect2"><div class="sect2" id="idm45607769523632">
<h2>Setting the Figure’s Size</h2>
<p>If your plot’s default readability is poor or the width-to-height ratio suboptimal, you will want to change its size.<a data-primary="pyplot module" data-secondary="interactive plotting with pyplot's global state" data-tertiary="setting figure size" data-type="indexterm" id="idm45607769522208"/><a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-tertiary="setting figure size" data-type="indexterm" id="idm45607769501728"/> By default, Matplotlib uses inches for its plotting size. This makes sense when you consider the many backends (often vector-graphic-based) that Matplotlib can save to.  Here we show two ways to use <code>pyplot</code> to set the figure size to eight by four inches, using <code>rcParams</code> and <code>gcf</code>:</p>
<pre data-code-language="python" data-type="programlisting"><code class="c1"># Two ways to set the figure size to 8 by 4 inches</code>
<code class="n">plt</code><code class="o">.</code><code class="n">rcParams</code><code class="p">[</code><code class="s1">'figure.figsize'</code><code class="p">]</code> <code class="o">=</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code><code class="mi">4</code><code class="p">)</code>
<code class="n">plt</code><code class="o">.</code><code class="n">gcf</code><code class="p">()</code><code class="o">.</code><code class="n">set_size_inches</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="mi">4</code><code class="p">)</code></pre>
</div></section>
<section data-pdf-bookmark="Points, Not Pixels" data-type="sect2"><div class="sect2" id="idm45607769458176">
<h2>Points, Not Pixels</h2>
<p>Matplotlib uses points, not pixels, to measure the size of its figures.<a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-tertiary="points, not pixels measuring figure size" data-type="indexterm" id="idm45607769445360"/> This is the accepted measure for print-quality publications, and Matplotlib is used to deliver publication-quality images.</p>
<p>By default a point is approximately 1/72 of an inch wide, but Matplotlib allows you to adjust this by changing the dots-per-inch (dpi) for any figures generated.<a data-primary="dots-per-inch (dpi)" data-type="indexterm" id="idm45607769479488"/> The higher this number, the better the quality of the image. For the purpose of the inline figures shown interactively during IPython sessions, the resolution is usually a product of the backend engine being used to generate the plots (e.g., Qt, WxAgg, tkinter). See the <a href="https://oreil.ly/4ENnG">Matplotlib documentation</a> for an explanation of backends.<a data-primary="backend engines for Matplotlib plots" data-type="indexterm" id="idm45607769478000"/></p>
</div></section>
<section data-pdf-bookmark="Labels and Legends" data-type="sect2"><div class="sect2" id="idm45607769477104">
<h2>Labels and Legends</h2>
<p><a data-type="xref" href="#mpl_3lines_default">Figure 10-1</a> needs, among other things, to tell us what the lines mean. Matplotlib has a handy legend box for line labeling, which, like most things Matplotlib, is heavily configurable.<a data-primary="labels" data-secondary="labels and legends in Matplotlib plots" data-type="indexterm" id="idm45607769474592"/><a data-primary="legends" data-seealso="labels" data-type="indexterm" id="idm45607769471760"/> Labeling our three lines involves a little indirection as the <code>plot</code> method only takes one label, which it applies to all lines generated. Usefully, the <code>plot</code> command returns all <code>Line2D</code> objects created. These can be used by the <code>legend</code> method to set individual labels.</p>
<p>Because this plot will be appearing in black and white (if you’re reading the print version of this book), we need a way to distinguish the lines other than the default colors. The easiest way to do this with Matplotlib is to create the lines sequentially, specifying <em>x</em> and <em>y</em> values and a line style.<sup><a data-type="noteref" href="ch10.xhtml#idm45607769467872" id="idm45607769467872-marker">4</a></sup> We’ll make our line styles solid (-), dashed (--), and dash-dotted (-.). Note the use of NumPy’s column indexing (see <a data-type="xref" href="ch07.xhtml#numpy_indexing">Figure 7-1</a>):</p>
<pre class="pagebreak-before" data-code-language="python" data-type="programlisting"><code class="c1">#plots = plt.plot(x,y)</code>
<code class="n">plots</code> <code class="o">=</code> <code class="n">plt</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">[:,</code><code class="mi">0</code><code class="p">],</code> <code class="s1">'-'</code><code class="p">,</code> <code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">[:,</code><code class="mi">1</code><code class="p">],</code> <code class="s1">'--'</code><code class="p">,</code> <code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">[:,</code><code class="mi">2</code><code class="p">],</code> <code class="s1">'-.'</code><code class="p">)</code>
<code class="n">plots</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[</code><code class="o">&lt;</code><code class="n">matplotlib</code><code class="o">.</code><code class="n">lines</code><code class="o">.</code><code class="n">Line2D</code> <code class="n">at</code> <code class="mh">0x9b31a90</code><code class="o">&gt;</code><code class="p">,</code>
 <code class="o">&lt;</code><code class="n">matplotlib</code><code class="o">.</code><code class="n">lines</code><code class="o">.</code><code class="n">Line2D</code> <code class="n">at</code> <code class="mh">0x9b4da90</code><code class="o">&gt;</code><code class="p">,</code>
 <code class="o">&lt;</code><code class="n">matplotlib</code><code class="o">.</code><code class="n">lines</code><code class="o">.</code><code class="n">Line2D</code> <code class="n">at</code> <code class="mh">0x9b4dcd0</code><code class="o">&gt;</code><code class="p">]</code></pre>
<p>The <a href="https://oreil.ly/2hEMc"><code>legend</code> method</a> can set labels, suggest a location for the legend box, and configure a number of other things:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">plt</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="n">plots</code><code class="p">,</code><code> </code><code class="p">(</code><code class="s1">'</code><code class="s1">foo</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">bar</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">baz</code><code class="s1">'</code><code class="p">)</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO2-1" id="co_visualizing_data_with_matplotlib_CO2-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>           </code><code class="n">loc</code><code class="o">=</code><code class="s1">'</code><code class="s1">best</code><code class="s1">'</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO2-2" id="co_visualizing_data_with_matplotlib_CO2-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code>           </code><code class="n">framealpha</code><code class="o">=</code><code class="mf">0.5</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO2-3" id="co_visualizing_data_with_matplotlib_CO2-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code>           </code><code class="n">prop</code><code class="o">=</code><code class="p">{</code><code class="s1">'</code><code class="s1">size</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">small</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">family</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">monospace</code><code class="s1">'</code><code class="p">}</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO2-4" id="co_visualizing_data_with_matplotlib_CO2-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO2-1" id="callout_visualizing_data_with_matplotlib_CO2-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Sets the labels for our three plots.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO2-2" id="callout_visualizing_data_with_matplotlib_CO2-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Using the <code>best</code> location should avoid obscuring lines.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO2-3" id="callout_visualizing_data_with_matplotlib_CO2-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>Sets the legend’s transparency.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO2-4" id="callout_visualizing_data_with_matplotlib_CO2-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></dt>
<dd><p>Here we adjust the font properties of the legend.<sup><a data-type="noteref" href="ch10.xhtml#idm45607769227712" id="idm45607769227712-marker">5</a></sup></p></dd>
</dl>
</div></section>
<section data-pdf-bookmark="Titles and Axes Labels" data-type="sect2"><div class="sect2" id="sect_mpl_titles">
<h2>Titles and Axes Labels</h2>
<p>Adding a title and label for your <a data-primary="text" data-secondary="titles and axes labels in Matplotlib plots" data-type="indexterm" id="idm45607769224592"/><a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-tertiary="titles and axes labels" data-type="indexterm" id="idm45607769223520"/><a data-primary="labels" data-secondary="axes labels in Matplotlib plots" data-type="indexterm" id="idm45607769222272"/> axes is as easy as can be:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">plt</code><code class="o">.</code><code class="n">title</code><code class="p">(</code><code class="s1">'Random trends'</code><code class="p">)</code>
<code class="n">plt</code><code class="o">.</code><code class="n">xlabel</code><code class="p">(</code><code class="s1">'Date'</code><code class="p">)</code>
<code class="n">plt</code><code class="o">.</code><code class="n">ylabel</code><code class="p">(</code><code class="s1">'Cum. sum'</code><code class="p">)</code></pre>
<p>You can add some text with the <code>figtext</code> method:<sup><a data-type="noteref" href="ch10.xhtml#idm45607769200272" id="idm45607769200272-marker">6</a></sup></p>
<pre data-code-language="python" data-type="programlisting"><code class="n">plt</code><code class="o">.</code><code class="n">figtext</code><code class="p">(</code><code class="mf">0.995</code><code class="p">,</code><code> </code><code class="mf">0.01</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO3-1" id="co_visualizing_data_with_matplotlib_CO3-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>            </code><code class="s1">'</code><code class="s1">© Acme designs 2022</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>            </code><code class="n">ha</code><code class="o">=</code><code class="s1">'</code><code class="s1">right</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">va</code><code class="o">=</code><code class="s1">'</code><code class="s1">bottom</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO3-2" id="co_visualizing_data_with_matplotlib_CO3-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO3-1" id="callout_visualizing_data_with_matplotlib_CO3-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>The location of the text proportionate to figure size.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO3-2" id="callout_visualizing_data_with_matplotlib_CO3-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Horizontal (<code>ha</code>) and vertical (<code>va</code>) alignment.</p></dd>
</dl>
<p>The complete code is shown in <a data-type="xref" href="#mpl_3lines_custom_code">Example 10-1</a> and the resulting chart in <a data-type="xref" href="#mpl_3lines_custom">Figure 10-2</a>.</p>
<div data-type="example" id="mpl_3lines_custom_code">
<h5><span class="label">Example 10-1. </span>Customized line chart</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">plots</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">[</code><code class="p">:</code><code class="p">,</code><code class="mi">0</code><code class="p">]</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">-</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">[</code><code class="p">:</code><code class="p">,</code><code class="mi">1</code><code class="p">]</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">--</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">[</code><code class="p">:</code><code class="p">,</code><code class="mi">2</code><code class="p">]</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">-.</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="n">plots</code><code class="p">,</code><code> </code><code class="p">(</code><code class="s1">'</code><code class="s1">foo</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">bar</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">baz</code><code class="s1">'</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">loc</code><code class="o">=</code><code class="s1">'</code><code class="s1">best,</code><code>
</code><code>                    </code><code class="n">framealpha</code><code class="o">=</code><code class="mf">0.25</code><code class="p">,</code><code>
</code><code>                    </code><code class="n">prop</code><code class="o">=</code><code class="p">{</code><code class="s1">'</code><code class="s1">size</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">small</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">family</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">monospace</code><code class="s1">'</code><code class="p">}</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">gcf</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">set_size_inches</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">title</code><code class="p">(</code><code class="s1">'</code><code class="s1">Random trends</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">xlabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Date</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Cum. sum</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">grid</code><code class="p">(</code><code class="kc">True</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO4-1" id="co_visualizing_data_with_matplotlib_CO4-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">figtext</code><code class="p">(</code><code class="mf">0.995</code><code class="p">,</code><code> </code><code class="mf">0.01</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">© Acme Designs 2021</code><code class="s1">'</code><code class="p">,</code><code>
</code><code class="n">ha</code><code class="o">=</code><code class="s1">'</code><code class="s1">right</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">va</code><code class="o">=</code><code class="s1">'</code><code class="s1">bottom</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">tight_layout</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO4-2" id="co_visualizing_data_with_matplotlib_CO4-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO4-1" id="callout_visualizing_data_with_matplotlib_CO4-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>This will add a dotted grid to the figure, marking the axis ticks.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO4-2" id="callout_visualizing_data_with_matplotlib_CO4-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>The <a href="https://oreil.ly/roH2Z"><code>tight_layout</code> method</a> should guarantee that all your plot elements are within the figure box. Otherwise, you might find tick-labels or legends truncated.<a data-primary="tight_layout method (Matplotlib)" data-type="indexterm" id="idm45607768887424"/></p></dd>
</dl></div>
<figure><div class="figure" id="mpl_3lines_custom">
<img alt="dpj2 1002" height="1142" src="assets/dpj2_1002.png" width="2340"/>
<h6><span class="label">Figure 10-2. </span>Customized line chart</h6>
</div></figure>
<p>We used the <code>tight_layout</code> method in <a data-type="xref" href="#mpl_3lines_custom_code">Example 10-1</a> to prevent plot elements from being obscured or truncated. <code>tight_layout</code> has been known to cause problems with some systems, particularly macOS. If you have any problems, this <a href="https://oreil.ly/qGONZ">issue thread</a> may help. As of now, the best advice is to use the <code>set_tight_layout</code> method on the current figure:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">plt</code><code class="o">.</code><code class="n">gcf</code><code class="p">()</code><code class="o">.</code><code class="n">set_tight_layout</code><code class="p">(</code><code class="kc">True</code><code class="p">)</code></pre>
</div></section>
<section data-pdf-bookmark="Saving Your Charts" data-type="sect2"><div class="sect2" id="idm45607769225872">
<h2>Saving Your Charts</h2>
<p>One area where Matplotlib shines is in saving your plots, providing many output formats.<sup><a data-type="noteref" href="ch10.xhtml#idm45607768868400" id="idm45607768868400-marker">7</a></sup> The available formats depend on the backends available, but generally PNG, PDF, PS, EPS, and SVG are <span class="keep-together">supported</span>. <a data-primary="PNG (portable network graphics) format" data-type="indexterm" id="idm45607769090592"/>PNG stands for Portable Network Graphics and is the most popular format for distributing web images.<a data-primary="SVG (Scalable Vector Graphics)" data-secondary="file format for Matplotlib charts" data-type="indexterm" id="idm45607769089648"/> The other formats are vector-based, which can scale smoothly without pixelation artifacts. For high-quality print work, this is probably what you want.</p>
<p>Saving is as simple as this:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">plt</code><code class="o">.</code><code class="n">tight_layout</code><code class="p">()</code> <code class="c1"># force plot into figure dimensions</code>
<code class="n">plt</code><code class="o">.</code><code class="n">savefig</code><code class="p">(</code><code class="s1">'mpl_3lines_custom.svg'</code><code class="p">)</code></pre>
<p>You can set the format explicitly using <code>format="svg"</code>, but Matplotlib understands the <em>.svg</em> suffix. To avoid truncated labels, use the <code>tight_layout</code> method.<sup><a data-type="noteref" href="ch10.xhtml#idm45607768834368" id="idm45607768834368-marker">8</a></sup></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Figures and Object-Oriented Matplotlib" data-type="sect1"><div class="sect1" id="idm45607769723616">
<h1>Figures and Object-Oriented Matplotlib</h1>
<p>As just shown, interactively manipulating <code>pyplot</code>’s global state works fine for quick data sketching and single-plot work.<a data-primary="pyplot module" data-secondary="interactive plotting with pyplot's global state" data-startref="ix_pypltinter" data-type="indexterm" id="idm45607768830080"/><a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-startref="ix_Matpinter" data-type="indexterm" id="idm45607768828864"/><a data-primary="object-oriented Matplotlib" data-secondary="figures and" data-type="indexterm" id="idm45607768827680"/><a data-primary="Matplotlib" data-secondary="figures and object-oriented Matplotlib" data-type="indexterm" id="idm45607768826768"/> However, if you want to have more control over your charts, Matplotlib’s figure and axes Object-Oriented (OO) approach is the way to go. Most of the more advanced plotting demos you see will be done this way.</p>
<p>In essence, with OO Matplotlib we are dealing with a figure, which you can think of as a drawing canvas with one or more axes (or plots) embedded in it.<a data-primary="figures (Matplotlib)" data-type="indexterm" id="idm45607768825344"/>  Both figures and axes have properties that can be independently specified. <a data-primary="pyplot module" data-secondary="figure method" data-type="indexterm" id="idm45607768824512"/>In this sense, the interactive <code>pyplot</code> route discussed earlier was plotting to a single axis of a global figure.</p>
<p>We can create a figure by using <code>pyplot</code>’s <code>figure</code> method:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">fig</code> <code class="o">=</code> <code class="n">plt</code><code class="o">.</code><code class="n">figure</code><code class="p">(</code>
          <code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="mi">4</code><code class="p">),</code> <code class="c1"># figure size in inches</code>
          <code class="n">dpi</code><code class="o">=</code><code class="mi">200</code><code class="p">,</code> <code class="c1"># dots per inch</code>
          <code class="n">tight_layout</code><code class="o">=</code><code class="kc">True</code><code class="p">,</code> <code class="c1"># fit axes, labels, etc. to canvas</code>
          <code class="n">linewidth</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code> <code class="n">edgecolor</code><code class="o">=</code><code class="s1">'r'</code> <code class="c1"># 1 pixel wide, red border</code>
          <code class="p">)</code></pre>
<p>As you can see, figures share a subset of properties with the global <code>pyplot</code> module. These can be set on creation of the figure or through similar methods (i.e., <code>fig.text()</code> as opposed to <code>plt.fig_text()</code>). Each figure can have multiple axes, each of which is analogous to the single, global plot state but with the considerable advantage that multiple axes can exist on one figure, each with independent properties.</p>
<section data-pdf-bookmark="Axes and Subplots" data-type="sect2"><div class="sect2" id="mpl_axes_subplots">
<h2>Axes and Subplots</h2>
<p>The <code>figure.add_axes</code> method allows precise control over the position of axes within a figure (e.g., enabling you to embed a smaller plot within the main).<a data-primary="axes" data-secondary="adding in Matplotlib figure" data-type="indexterm" id="idm45607768769232"/><a data-primary="figures (Matplotlib)" data-secondary="axes and subplots" data-type="indexterm" id="idm45607768768288"/><a data-primary="Matplotlib" data-secondary="figures and object-oriented Matplotlib" data-tertiary="axes and subplots" data-type="indexterm" id="idm45607768767344"/> Positioning of plot elements uses a 0 → 1 coordinate system, where 1 is the width or height of the figure.
You can specify the position using a four-element list or tuple to set bottom-left and top-right bounds:</p>
<pre data-code-language="python" data-type="programlisting"><code class="c1"># h = height, w = width</code>
<code class="n">fig</code><code class="o">.</code><code class="n">add_axes</code><code class="p">([</code><code class="mf">0.2</code><code class="p">,</code> <code class="mf">0.2</code><code class="p">,</code> <code class="c1">#[bottom(h*0.2), left(w*0.2),</code>
              <code class="mf">0.8</code><code class="p">,</code> <code class="mf">0.8</code><code class="p">])</code><code class="c1"># top(h*0.8), right(w*0.8)]</code></pre>
<p><a data-type="xref" href="#mpl_add_axes_code">Example 10-2</a> shows the code needed to insert smaller axes into larger ones, using our random test data. The result is shown in <a data-type="xref" href="#mpl_add_axes">Figure 10-3</a>.</p>
<div data-type="example" id="mpl_add_axes_code">
<h5><span class="label">Example 10-2. </span>A plot insert with <code>figure.add_axes</code></h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">fig</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">figure</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code class="mi">4</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="c1"># --- Main Axes</code><code>
</code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">fig</code><code class="o">.</code><code class="n">add_axes</code><code class="p">(</code><code class="p">[</code><code class="mf">0.1</code><code class="p">,</code><code> </code><code class="mf">0.1</code><code class="p">,</code><code> </code><code class="mf">0.8</code><code class="p">,</code><code> </code><code class="mf">0.8</code><code class="p">]</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_title</code><code class="p">(</code><code class="s1">'</code><code class="s1">Main Axes with Insert Child Axes</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">[</code><code class="p">:</code><code class="p">,</code><code class="mi">0</code><code class="p">]</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO5-1" id="co_visualizing_data_with_matplotlib_CO5-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xlabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Date</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Cum. sum</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="c1"># --- Inserted Axes</code><code>
</code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">fig</code><code class="o">.</code><code class="n">add_axes</code><code class="p">(</code><code class="p">[</code><code class="mf">0.15</code><code class="p">,</code><code> </code><code class="mf">0.15</code><code class="p">,</code><code> </code><code class="mf">0.3</code><code class="p">,</code><code> </code><code class="mf">0.3</code><code class="p">]</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">[</code><code class="p">:</code><code class="p">,</code><code class="mi">1</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">g</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="c1"># 'g' for green</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xticks</code><code class="p">(</code><code class="p">[</code><code class="p">]</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO5-2" id="co_visualizing_data_with_matplotlib_CO5-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO5-1" id="callout_visualizing_data_with_matplotlib_CO5-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>This selects the first column of our random NumPy y-data.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO5-2" id="callout_visualizing_data_with_matplotlib_CO5-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Removes the x ticks and labels from our embedded plot.</p></dd>
</dl></div>
<p>Although <code>add_axes</code> gives us a lot of scope for fine-tuning the appearance of our charts, most of the time Matplotlib’s built-in grid-layout system makes life much easier.<sup><a data-type="noteref" href="ch10.xhtml#idm45607768572320" id="idm45607768572320-marker">9</a></sup> The simplest option is to use <code>figure.subplots</code>, which allows you to specify row-column layouts of equal-sized plots. <a data-primary="subplots (Matplotlib)" data-type="indexterm" id="idm45607768570800"/>If you want a grid with different-sized plots, the <code>gridspec</code> module is your go-to.</p>
<figure><div class="figure" id="mpl_add_axes">
<img alt="dpj2 1003" height="1142" src="assets/dpj2_1003.png" width="2099"/>
<h6><span class="label">Figure 10-3. </span>Inserted plot with <code>figure.add_axes</code></h6>
</div></figure>
<p>Calling <code>subplots</code> without arguments returns a figure with single axes. This is closest in use to using the <code>pyplot</code> state machine shown in <a data-type="xref" href="#sect_pyplot_global">“Interactive Plotting with pyplot’s Global State”</a>.  <a data-type="xref" href="#mpl_3lines_custom_axes_code">Example 10-3</a> shows the figure and axes equivalent to the <code>pyplot</code> demo in <a data-type="xref" href="#mpl_3lines_custom_code">Example 10-1</a>, producing the chart in <a data-type="xref" href="#mpl_3lines_custom">Figure 10-2</a>. Note the use of “setter” methods for figure and axes.</p>
<div data-type="example" id="mpl_3lines_custom_axes_code">
<h5><span class="label">Example 10-3. </span>Plotting with single figure and axes</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">figure</code><code class="p">,</code> <code class="n">ax</code> <code class="o">=</code> <code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">()</code>
<code class="n">plots</code> <code class="o">=</code> <code class="n">ax</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">,</code> <code class="n">label</code><code class="o">=</code><code class="s1">''</code><code class="p">)</code>
<code class="n">figure</code><code class="o">.</code><code class="n">set_size_inches</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="mi">4</code><code class="p">)</code>
<code class="n">ax</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="n">plots</code><code class="p">,</code> <code class="p">(</code><code class="s1">'foo'</code><code class="p">,</code> <code class="s1">'bar'</code><code class="p">,</code> <code class="s1">'baz'</code><code class="p">),</code> <code class="n">loc</code><code class="o">=</code><code class="s1">'best'</code><code class="p">,</code> <code class="n">framealpha</code><code class="o">=</code><code class="mf">0.25</code><code class="p">,</code>
          <code class="n">prop</code><code class="o">=</code><code class="p">{</code><code class="s1">'size'</code><code class="p">:</code><code class="s1">'small'</code><code class="p">,</code> <code class="s1">'family'</code><code class="p">:</code><code class="s1">'monospace'</code><code class="p">})</code>
<code class="n">ax</code><code class="o">.</code><code class="n">set_title</code><code class="p">(</code><code class="s1">'Random trends'</code><code class="p">)</code>
<code class="n">ax</code><code class="o">.</code><code class="n">set_xlabel</code><code class="p">(</code><code class="s1">'Date'</code><code class="p">)</code>
<code class="n">ax</code><code class="o">.</code><code class="n">set_ylabel</code><code class="p">(</code><code class="s1">'Cum. sum'</code><code class="p">)</code>
<code class="n">ax</code><code class="o">.</code><code class="n">grid</code><code class="p">(</code><code class="kc">True</code><code class="p">)</code>
<code class="n">figure</code><code class="o">.</code><code class="n">text</code><code class="p">(</code><code class="mf">0.995</code><code class="p">,</code> <code class="mf">0.01</code><code class="p">,</code> <code class="s1">'©  Acme Designs 2022'</code><code class="p">,</code>
            <code class="n">ha</code><code class="o">=</code><code class="s1">'right'</code><code class="p">,</code> <code class="n">va</code><code class="o">=</code><code class="s1">'bottom'</code><code class="p">)</code>
<code class="n">figure</code><code class="o">.</code><code class="n">tight_layout</code><code class="p">()</code></pre></div>
<p class="pagebreak-before">Calling <code>subplots</code> with arguments for number of rows (<code>nrows</code>) and columns (<code>ncols</code>) (as shown in <a data-type="xref" href="#mpl_subplots_code">Example 10-4</a>) allows multiple plots to be placed on a grid layout (see the results in <a data-type="xref" href="#mpl_subplots">Figure 10-4</a>). The call to <code>subplots</code> returns the figure and an array of axes, in row-column order. In the example, we specify one column so <code>axes</code> is a single array of three stacked axes.</p>
<div data-type="example" id="mpl_subplots_code">
<h5><span class="label">Example 10-4. </span>Using subplots</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">axes</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code>
</code><code>                    </code><code class="n">nrows</code><code class="o">=</code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">ncols</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO6-1" id="co_visualizing_data_with_matplotlib_CO6-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>                    </code><code class="n">sharex</code><code class="o">=</code><code class="kc">True</code><code class="p">,</code><code> </code><code class="n">sharey</code><code class="o">=</code><code class="kc">True</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO6-2" id="co_visualizing_data_with_matplotlib_CO6-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code>                    </code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">8</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">labelled_data</code><code> </code><code class="o">=</code><code> </code><code class="nb">zip</code><code class="p">(</code><code class="n">y</code><code class="o">.</code><code class="n">transpose</code><code class="p">(</code><code class="p">)</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO6-3" id="co_visualizing_data_with_matplotlib_CO6-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code>                    </code><code class="p">(</code><code class="s1">'</code><code class="s1">foo</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">bar</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">baz</code><code class="s1">'</code><code class="p">)</code><code class="p">,</code><code> </code><code class="p">(</code><code class="s1">'</code><code class="s1">b</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">g</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">r</code><code class="s1">'</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">suptitle</code><code class="p">(</code><code class="s1">'</code><code class="s1">Three Random Trends</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">fontsize</code><code class="o">=</code><code class="mi">16</code><code class="p">)</code><code>
</code><code class="k">for</code><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">ld</code><code> </code><code class="ow">in</code><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">labelled_data</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">axes</code><code class="p">[</code><code class="n">i</code><code class="p">]</code><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">ld</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">label</code><code class="o">=</code><code class="n">ld</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="n">ld</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="p">)</code><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">set_ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Cum. sum</code><code class="s1">'</code><code class="p">)</code><code>
</code><code>    </code><code class="n">ax</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="n">loc</code><code class="o">=</code><code class="s1">'</code><code class="s1">upper left</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">framealpha</code><code class="o">=</code><code class="mf">0.5</code><code class="p">,</code><code>
</code><code>              </code><code class="n">prop</code><code class="o">=</code><code class="p">{</code><code class="s1">'</code><code class="s1">size</code><code class="s1">'</code><code class="p">:</code><code class="s1">'</code><code class="s1">small</code><code class="s1">'</code><code class="p">}</code><code class="p">)</code><code>
</code><code class="n">axes</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">set_xlabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Date</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO6-4" id="co_visualizing_data_with_matplotlib_CO6-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO6-1" id="callout_visualizing_data_with_matplotlib_CO6-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Specifies a subplot grid of three rows by one column.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO6-2" id="callout_visualizing_data_with_matplotlib_CO6-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>We want to share x- and y-axes, automatically adjusting limits for easy comparison.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO6-3" id="callout_visualizing_data_with_matplotlib_CO6-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>Switch y to row-column and zip the line data, labels, and line colors together.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO6-4" id="callout_visualizing_data_with_matplotlib_CO6-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></dt>
<dd><p>Labels the last of the shared x-axes.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_subplots">
<img alt="dpj2 1004" height="2299" src="assets/dpj2_1004.png" width="2314"/>
<h6><span class="label">Figure 10-4. </span>Three subplots</h6>
</div></figure>
<p>We make use of Python’s handy <code>zip</code> method to produce three dictionaries with line data. <a href="https://oreil.ly/G8YGh"><code>zip</code></a> takes lists or tuples of length <em>n</em> and returns <em>n</em> lists, formed by matching the elements by order:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">letters</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">]</code>
<code class="n">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">]</code>
<code class="nb">zip</code><code class="p">(</code><code class="n">letters</code><code class="p">,</code> <code class="n">numbers</code><code class="p">)</code>
<code class="n">Out</code><code class="p">:</code>
<code class="p">[(</code><code class="s1">'a'</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="s1">'b'</code><code class="p">,</code> <code class="mi">2</code><code class="p">)]</code></pre>
<p>In the <code>for</code> loop, we use <code>enumerate</code> to supply an index <code>i</code>, which we use to select an axis by row, using our zipped <code>labelled_data</code> to provide the plot properties.<a data-primary="indices" data-secondary="index in Matplotlib figure used to select axis by row" data-type="indexterm" id="idm45607768049040"/></p>
<p>Note the shared x- and y-axes specified in the <code>subplots</code> call in <a data-type="xref" href="#mpl_subplots_code">Example 10-4</a> (2). This allows easy comparison of the three charts, particularly on the now normalized y-axis.  To avoid redundant x labels, we only call <code>set_xlabel</code> on the last row, using Python’s handy negative indexing.<a data-primary="labels" data-secondary="labeling last of shared x-axes in Matplotlib subplot" data-type="indexterm" id="idm45607768046048"/></p>
<p>Now that we’ve covered the two ways in which IPython and Matplotlib engage interactively, using the global state (accessed through <code>plt</code>) and the object-oriented API, let’s look at a few of the common plot types you’ll use to explore your datasets.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="Plot Types" data-type="sect1"><div class="sect1" id="idm45607768771056">
<h1>Plot Types</h1>
<p>As well as the line plot just demonstrated, Matplotlib has a number of plot types available.<a data-primary="Matplotlib" data-secondary="plot types" data-type="indexterm" id="ix_Matpplt"/> I’ll now demonstrate a few of the ones commonly used in exploratory data visualization.</p>
<section data-pdf-bookmark="Bar Charts" data-type="sect2"><div class="sect2" id="idm45607768024544">
<h2>Bar Charts</h2>
<p>The humble bar chart is a staple for a lot of visual data exploration. As with most of Matplotlib charts, there’s a good deal of customization possible. We’ll now run through a few variants to give you the gist.<a data-primary="Matplotlib" data-secondary="plot types" data-tertiary="bar charts" data-type="indexterm" id="ix_Matppltbar"/><a data-primary="bar charts" data-secondary="Matplotlib" data-type="indexterm" id="ix_barchtMtpl"/></p>
<p>The code in <a data-type="xref" href="#mpl_barchart_code">Example 10-5</a> produces the bar chart in <a data-type="xref" href="#mpl_barchart">Figure 10-5</a>. Note that you have to specify your own bar and label locations. This kind of flexibility is beloved by hardcore Matplotlibbers and is pretty easy to get the hang of. Nevertheless, it’s the sort of thing that can get tedious. It’s trivial to write some helper methods here, and there are many libraries that wrap Matplotlib and make things a little more user-friendly. As we’ll see in <a data-type="xref" href="ch11.xhtml#chapter_pandas_exploring">Chapter 11</a>, pandas’s built-in Matplotlib-based plots are quite a bit simpler to use.</p>
<div data-type="example" id="mpl_barchart_code">
<h5><span class="label">Example 10-5. </span>A simple bar chart</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">labels</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s2">"</code><code class="s2">Physics</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Chemistry</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Literature</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Peace</code><code class="s2">"</code><code class="p">]</code><code>
</code><code class="n">foo_data</code><code> </code><code class="o">=</code><code>   </code><code class="p">[</code><code class="mi">3</code><code class="p">,</code><code> </code><code class="mi">6</code><code class="p">,</code><code> </code><code class="mi">10</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">]</code><code>
</code><code>
</code><code class="n">bar_width</code><code> </code><code class="o">=</code><code> </code><code class="mf">0.5</code><code>
</code><code class="n">xlocations</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">foo_data</code><code class="p">)</code><code class="p">)</code><code class="p">)</code><code> </code><code class="o">+</code><code> </code><code class="n">bar_width</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO7-1" id="co_visualizing_data_with_matplotlib_CO7-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">xlocations</code><code class="p">,</code><code> </code><code class="n">foo_data</code><code class="p">,</code><code> </code><code class="n">width</code><code class="o">=</code><code class="n">bar_width</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">yticks</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="mi">12</code><code class="p">)</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO7-2" id="co_visualizing_data_with_matplotlib_CO7-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">xticks</code><code class="p">(</code><code class="n">xlocations</code><code class="p">,</code><code> </code><code class="n">labels</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO7-3" id="co_visualizing_data_with_matplotlib_CO7-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">title</code><code class="p">(</code><code class="s2">"</code><code class="s2">Prizes won by Fooland</code><code class="s2">"</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">gca</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">get_xaxis</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">tick_bottom</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">gca</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">get_yaxis</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">tick_left</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">gcf</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">set_size_inches</code><code class="p">(</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO7-1" id="callout_visualizing_data_with_matplotlib_CO7-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Here we create the middle bar locations, two <code>bar_width</code>’s apart.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO7-2" id="callout_visualizing_data_with_matplotlib_CO7-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>We’re hardcoding the x values for demonstration purposes—usually you will want to calculate ranges on the fly.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO7-3" id="callout_visualizing_data_with_matplotlib_CO7-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>This places tick labels at the middle of the bars.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_barchart">
<img alt="dpj2 1005" height="1106" src="assets/dpj2_1005.png" width="2308"/>
<h6><span class="label">Figure 10-5. </span>A simple bar chart</h6>
</div></figure>
<p>Bar charts with multiple groups are particularly useful.<a data-primary="bar charts" data-secondary="Matplotlib" data-tertiary="grouped bar chart" data-type="indexterm" id="idm45607767878144"/> In <a data-type="xref" href="#mpl_barchart_multi_code">Example 10-6</a>, we add some more country data (for a mythical Barland) and use the <code>subplots</code> method to produce grouped bar charts (see <a data-type="xref" href="#mpl_barchart_multi">Figure 10-6</a>). <a data-primary="subplots (Matplotlib)" data-secondary="use in bar chart" data-type="indexterm" id="idm45607767816048"/>Once again we specify the bar locations manually, adding two bar groups—this time with <code>ax.bar</code>. <a data-primary="axes" data-secondary="in Matplotlib bar chart" data-secondary-sortas="Matplotlib" data-type="indexterm" id="idm45607767814416"/>Note that our axes’ x-limits are automatically rescaled in a sensible fashion, at increments of 0.5:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">ax</code><code class="o">.</code><code class="n">get_xlim</code><code class="p">()</code>
<code class="c1"># Out: (-0.5, 3.5)</code></pre>
<p>Use the respective setter methods (<code>set_xlim</code>, in this case) if autoscaling doesn’t achieve the desired look.</p>
<div data-type="example" id="mpl_barchart_multi_code">
<h5><span class="label">Example 10-6. </span>Creating a grouped bar chart</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">labels</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s2">"</code><code class="s2">Physics</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Chemistry</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Literature</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Peace</code><code class="s2">"</code><code class="p">]</code><code>
</code><code class="n">foo_data</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="mi">3</code><code class="p">,</code><code> </code><code class="mi">6</code><code class="p">,</code><code> </code><code class="mi">10</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">]</code><code>
</code><code class="n">bar_data</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="mi">6</code><code class="p">,</code><code> </code><code class="mi">1</code><code class="p">]</code><code>
</code><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">bar_width</code><code> </code><code class="o">=</code><code> </code><code class="mf">0.4</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO8-1" id="co_visualizing_data_with_matplotlib_CO8-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">xlocs</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">foo_data</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">xlocs</code><code class="o">-</code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">foo_data</code><code class="p">,</code><code> </code><code class="n">bar_width</code><code class="p">,</code><code>
</code><code>       </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">#fde0bc</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">Fooland</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO8-2" id="co_visualizing_data_with_matplotlib_CO8-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">xlocs</code><code class="p">,</code><code> </code><code class="n">bar_data</code><code class="p">,</code><code> </code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">peru</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">Barland</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="c1">#--- ticks, labels, grids, and title</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_yticks</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">12</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xticks</code><code class="p">(</code><code class="n">ticks</code><code class="o">=</code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">foo_data</code><code class="p">)</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xticklabels</code><code class="p">(</code><code class="n">labels</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">yaxis</code><code class="o">.</code><code class="n">grid</code><code class="p">(</code><code class="kc">True</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="n">loc</code><code class="o">=</code><code class="s1">'</code><code class="s1">best</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Number of prizes</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">suptitle</code><code class="p">(</code><code class="s1">'</code><code class="s1">Prizes by country</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">tight_layout</code><code class="p">(</code><code class="n">pad</code><code class="o">=</code><code class="mi">2</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO8-3" id="co_visualizing_data_with_matplotlib_CO8-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">savefig</code><code class="p">(</code><code class="s1">'</code><code class="s1">mpl_barchart_multi.png</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">dpi</code><code class="o">=</code><code class="mi">200</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO8-4" id="co_visualizing_data_with_matplotlib_CO8-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO8-1" id="callout_visualizing_data_with_matplotlib_CO8-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>With a width of <code>1</code> for our two-bar groups, this bar width gives 0.1 bar padding.<a data-primary="groups" data-secondary="grouped bar charts" data-type="indexterm" id="idm45607767546096"/></p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO8-2" id="callout_visualizing_data_with_matplotlib_CO8-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Matplotlib supports standard HTML colors, taking hex values or a name.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO8-3" id="callout_visualizing_data_with_matplotlib_CO8-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>We use the <code>pad</code> argument to specify padding around the figure as a fraction of the font size.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO8-4" id="callout_visualizing_data_with_matplotlib_CO8-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></dt>
<dd><p>This saves the figure at the high resolution of 200 dots per inch.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_barchart_multi">
<img alt="dpj2 1006" height="1131" src="assets/dpj2_1006.png" width="2314"/>
<h6><span class="label">Figure 10-6. </span>Grouped bar charts</h6>
</div></figure>
<p>It’s often useful to use horizontal bars, particularly if there are a lot of them and/or you are using tick labels, which are likely to run into one another if placed on the same line.<a data-primary="bar charts" data-secondary="Matplotlib" data-tertiary="horizontal bars" data-type="indexterm" id="idm45607767557712"/><a data-primary="horizontal bar charts" data-type="indexterm" id="idm45607767492032"/> Turning <a data-type="xref" href="#mpl_barchart_multi">Figure 10-6</a> on its side is easy enough, requiring only that we replace the <code>bar</code> method with its horizontal counterpart <code>barh</code> and switch the axis labels and limits (see <a data-type="xref" href="#mpl_barchart_multi_h_code">Example 10-7</a> and the resulting chart <a data-type="xref" href="#mpl_barchart_multi_h">Figure 10-7</a>).</p>
<div data-type="example" id="mpl_barchart_multi_h_code">
<h5><span class="label">Example 10-7. </span>Converting <a data-type="xref" href="#mpl_barchart_multi_code">Example 10-6</a> to horizontal bars</h5>
<pre data-code-language="python" data-type="programlisting"><code class="c1"># ...</code><code>
</code><code class="n">ylocs</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">foo_data</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">barh</code><code class="p">(</code><code class="n">ylocs</code><code class="o">-</code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">foo_data</code><code class="p">,</code><code> </code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">#fde0bc</code><code class="s1">'</code><code class="p">,</code><code>
</code><code>        </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">Fooland</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO9-1" id="co_visualizing_data_with_matplotlib_CO9-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">barh</code><code class="p">(</code><code class="n">ylocs</code><code class="p">,</code><code> </code><code class="n">bar_data</code><code class="p">,</code><code> </code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">peru</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">Barland</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="c1"># --- labels, grids and title, then save</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xticks</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">12</code><code class="p">)</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO9-2" id="co_visualizing_data_with_matplotlib_CO9-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_yticks</code><code class="p">(</code><code class="n">ticks</code><code class="o">=</code><code class="n">ylocs</code><code class="o">-</code><code class="n">bar_width</code><code class="o">/</code><code class="mi">2</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_yticklabels</code><code class="p">(</code><code class="n">labels</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">xaxis</code><code class="o">.</code><code class="n">grid</code><code class="p">(</code><code class="kc">True</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">legend</code><code class="p">(</code><code class="n">loc</code><code class="o">=</code><code class="s1">'</code><code class="s1">best</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xlabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Number of prizes</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="c1"># ...</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO9-1" id="callout_visualizing_data_with_matplotlib_CO9-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>To create a horizontal bar chart, we use <code>barh</code> in place of <code>bar</code>.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO9-2" id="callout_visualizing_data_with_matplotlib_CO9-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>A horizontal chart necessitates swapping the horizontal and vertical axes.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_barchart_multi_h">
<img alt="dpj2 1007" height="1131" src="assets/dpj2_1007.png" width="2304"/>
<h6><span class="label">Figure 10-7. </span>Turning the bars on their side</h6>
</div></figure>
<p>Stacked bars are easy to achieve in<a data-primary="bar charts" data-secondary="Matplotlib" data-tertiary="stacked bars" data-type="indexterm" id="idm45607767373392"/><a data-primary="stacked bar charts" data-type="indexterm" id="idm45607767372144"/> Matplotlib.<sup><a data-type="noteref" href="ch10.xhtml#idm45607767371344" id="idm45607767371344-marker">10</a></sup> <a data-type="xref" href="#mpl_barchart_multi_stack_code">Example 10-8</a> converts <a data-type="xref" href="#mpl_barchart_multi">Figure 10-6</a> to a stacked form; <a data-type="xref" href="#mpl_barchart_multi_stack">Figure 10-8</a> shows the result. The trick is to use the bottom argument to <code>bar</code> to set the bottom of the raised bars as the top of the previous group.</p>
<div data-type="example" id="mpl_barchart_multi_stack_code">
<h5><span class="label">Example 10-8. </span>Converting <a data-type="xref" href="#mpl_barchart_multi_code">Example 10-6</a> to stacked bars</h5>
<pre data-code-language="python" data-type="programlisting"><code class="c1"># ...</code><code>
</code><code class="n">bar_width</code><code> </code><code class="o">=</code><code> </code><code class="mf">0.8</code><code>
</code><code class="n">xlocs</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">foo_data</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">xlocs</code><code class="p">,</code><code> </code><code class="n">foo_data</code><code class="p">,</code><code> </code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">#fde0bc</code><code class="s1">'</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO10-1" id="co_visualizing_data_with_matplotlib_CO10-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>       </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">Fooland</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">bar</code><code class="p">(</code><code class="n">xlocs</code><code class="p">,</code><code> </code><code class="n">bar_data</code><code class="p">,</code><code> </code><code class="n">bar_width</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">peru</code><code class="s1">'</code><code class="p">,</code><code>    </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO10-2" id="co_visualizing_data_with_matplotlib_CO10-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code>       </code><code class="n">label</code><code class="o">=</code><code class="s1">'</code><code class="s1">Barland</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">bottom</code><code class="o">=</code><code class="n">foo_data</code><code class="p">)</code><code>
</code><code class="c1"># --- labels, grids and title, then save</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_yticks</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">18</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xticks</code><code class="p">(</code><code class="n">ticks</code><code class="o">=</code><code class="n">xlocs</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_xticklabels</code><code class="p">(</code><code class="n">labels</code><code class="p">)</code><code>
</code><code class="c1"># ...</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO10-1" id="callout_visualizing_data_with_matplotlib_CO10-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>The <code>foo_data</code> and <code>bar_data</code> bar groups share the same x-locations.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO10-2" id="callout_visualizing_data_with_matplotlib_CO10-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>The bottom of the <code>bar_data</code> group is the top of the <code>foo_data</code>, providing stacked bars.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_barchart_multi_stack">
<img alt="dpj2 1008" height="1131" src="assets/dpj2_1008.png" width="2314"/>
<h6><span class="label">Figure 10-8. </span>Stacked bar chart</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="Scatter Plots" data-type="sect2"><div class="sect2" id="idm45607768023952">
<h2>Scatter Plots</h2>
<p>Another useful chart is the scatter plot, which takes 2D arrays of points with options for point size, color, and more.<a data-primary="bar charts" data-secondary="Matplotlib" data-startref="ix_barchtMtpl" data-type="indexterm" id="idm45607767213504"/><a data-primary="Matplotlib" data-secondary="plot types" data-startref="ix_Matppltbar" data-tertiary="bar charts" data-type="indexterm" id="idm45607767166448"/><a data-primary="scatter plots (Matplotlib)" data-type="indexterm" id="ix_sctplt"/></p>
<p><a data-type="xref" href="#mpl_scatter_code">Example 10-9</a> shows the code for a quick scatter plot, using Matplotlib autoscaling for x and y limits. We create a noisy line by adding normally distributed random numbers (sigma of 10). <a data-type="xref" href="#mpl_scatterplot">Figure 10-9</a> shows the resulting chart.</p>
<div data-type="example" id="mpl_scatter_code">
<h5><span class="label">Example 10-9. </span>A simple scatter plot</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">num_points</code><code> </code><code class="o">=</code><code> </code><code class="mi">100</code><code>
</code><code class="n">gradient</code><code> </code><code class="o">=</code><code> </code><code class="mf">0.5</code><code>
</code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">y</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">random</code><code class="o">.</code><code class="n">randn</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code> </code><code class="o">*</code><code> </code><code class="mi">10</code><code> </code><code class="o">+</code><code> </code><code class="n">x</code><code class="o">*</code><code class="n">gradient</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO11-1" id="co_visualizing_data_with_matplotlib_CO11-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">scatter</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO11-2" id="co_visualizing_data_with_matplotlib_CO11-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">suptitle</code><code class="p">(</code><code class="s1">'</code><code class="s1">A Simple Scatterplot</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO11-1" id="callout_visualizing_data_with_matplotlib_CO11-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p><code>randn</code> gives normally distributed random numbers, which we scale to be within 0 and 10 and to which we then add an x-dependent value.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO11-2" id="callout_visualizing_data_with_matplotlib_CO11-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>The equally sized x and y arrays provide the point coordinates.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_scatterplot">
<img alt="dpj2 1009" height="1122" src="assets/dpj2_1009.png" width="2309"/>
<h6><span class="label">Figure 10-9. </span>A simple scatter plot</h6>
</div></figure>
<p>We can adjust the size and color of individual points by passing an array of marker sizes and color indices to the current default colormap. One thing to note, which can be confusing, is that we are specifying the area of the markers’ bounding boxes, not the circles’ diameters. <a data-primary="scatter plots (Matplotlib)" data-secondary="adjusting point size and color" data-type="indexterm" id="idm45607767083648"/>This means if we want points to double the diameter of the circles, we must increase the size by a factor of four.<sup><a data-type="noteref" href="ch10.xhtml#idm45607767082480" id="idm45607767082480-marker">11</a></sup> In <a data-type="xref" href="#mpl_scatter_sc_code">Example 10-10</a>, we add size and color information to our simple scatter plot, producing <a data-type="xref" href="#mpl_scatter_sc">Figure 10-10</a>.</p>
<div data-type="example" id="mpl_scatter_sc_code">
<h5><span class="label">Example 10-10. </span>Adjusting point size and color</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">num_points</code><code> </code><code class="o">=</code><code> </code><code class="mi">100</code><code>
</code><code class="n">gradient</code><code> </code><code class="o">=</code><code> </code><code class="mf">0.5</code><code>
</code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">y</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">random</code><code class="o">.</code><code class="n">randn</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code> </code><code class="o">*</code><code> </code><code class="mi">10</code><code> </code><code class="o">+</code><code> </code><code class="n">x</code><code class="o">*</code><code class="n">gradient</code><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">colors</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">random</code><code class="o">.</code><code class="n">rand</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO12-1" id="co_visualizing_data_with_matplotlib_CO12-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">size</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">pi</code><code> </code><code class="o">*</code><code> </code><code class="p">(</code><code class="mi">2</code><code> </code><code class="o">+</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">random</code><code class="o">.</code><code class="n">rand</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code> </code><code class="o">*</code><code> </code><code class="mi">8</code><code class="p">)</code><code> </code><code class="o">*</code><code class="o">*</code><code> </code><code class="mi">2</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO12-2" id="co_visualizing_data_with_matplotlib_CO12-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">scatter</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">,</code><code> </code><code class="n">s</code><code class="o">=</code><code class="n">size</code><code class="p">,</code><code> </code><code class="n">c</code><code class="o">=</code><code class="n">colors</code><code class="p">,</code><code> </code><code class="n">alpha</code><code class="o">=</code><code class="mf">0.5</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO12-3" id="co_visualizing_data_with_matplotlib_CO12-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">suptitle</code><code class="p">(</code><code class="s1">'</code><code class="s1">Scatterplot with Color and Size Specified</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO12-1" id="callout_visualizing_data_with_matplotlib_CO12-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>This produces 100 random color values between 0 and 1 for the default colormap.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO12-2" id="callout_visualizing_data_with_matplotlib_CO12-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>We use the power notation <code>**</code> to square values between 2 and 10, the width range for our markers.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO12-3" id="callout_visualizing_data_with_matplotlib_CO12-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>We use the <code>alpha</code> argument to make our markers half-transparent.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_scatter_sc">
<img alt="dpj2 1010" height="1122" src="assets/dpj2_1010.png" width="2309"/>
<h6><span class="label">Figure 10-10. </span>Adjusting point size and color</h6>
</div></figure>
<div data-type="tip"><h1>Matplotlib Colormaps</h1>
<p>Matplotlib has a huge variety of colormaps available, the choice of which can significantly improve the quality of your visualization.<a data-primary="colormaps (Matplotlib)" data-type="indexterm" id="idm45607766857152"/> See <a href="https://oreil.ly/g8Q9b">the colormap docs</a> for details.</p>
</div>
<section data-pdf-bookmark="Adding a regression line" data-type="sect3"><div class="sect3" id="idm45607766855472">
<h3>Adding a regression line</h3>
<p>A regression line is a simple predictive model of the correlation between two variables, in this case the x and y coordinates of our scatter plot.<a data-primary="scatter plots (Matplotlib)" data-secondary="adding regression line" data-type="indexterm" id="idm45607766853968"/><a data-primary="regression line in Matplotlib scatter plot" data-type="indexterm" id="idm45607766853024"/> The line is essentially a best fit through the points of the plot, and adding one to a scatter plot is a useful dataviz technique and a good way to demo Matplotlib and NumPy interaction.</p>
<p>In <a data-type="xref" href="#mpl_scatter_regression_code">Example 10-11</a> NumPy’s very useful <code>polyfit</code> function is used to generate the gradient and constant of a best-fit line for the points defined by the x and y arrays.<a data-primary="NumPy" data-secondary="polyfit function" data-type="indexterm" id="idm45607766850496"/><a data-primary="polyfit function (NumPy)" data-type="indexterm" id="idm45607766849520"/> We then plot this line on the same axes as the scatter plot (see <a data-type="xref" href="#mpl_scatter_regression">Figure 10-11</a>).</p>
<div data-type="example" id="mpl_scatter_regression_code">
<h5><span class="label">Example 10-11. </span>Scatter plot with regression line</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">num_points</code><code> </code><code class="o">=</code><code> </code><code class="mi">100</code><code>
</code><code class="n">gradient</code><code> </code><code class="o">=</code><code> </code><code class="mf">0.5</code><code>
</code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">y</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">random</code><code class="o">.</code><code class="n">randn</code><code class="p">(</code><code class="n">num_points</code><code class="p">)</code><code> </code><code class="o">*</code><code> </code><code class="mi">10</code><code> </code><code class="o">+</code><code> </code><code class="n">x</code><code class="o">*</code><code class="n">gradient</code><code>
</code><code class="n">fig</code><code class="p">,</code><code> </code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">figsize</code><code class="o">=</code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">scatter</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code class="p">)</code><code>
</code><code class="n">m</code><code class="p">,</code><code> </code><code class="n">c</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">polyfit</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">y</code><code> </code><code class="p">,</code><code class="mi">1</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO13-1" id="co_visualizing_data_with_matplotlib_CO13-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">ax</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code> </code><code class="n">m</code><code class="o">*</code><code class="n">x</code><code> </code><code class="o">+</code><code> </code><code class="n">c</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO13-2" id="co_visualizing_data_with_matplotlib_CO13-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">fig</code><code class="o">.</code><code class="n">suptitle</code><code class="p">(</code><code class="s1">'</code><code class="s1">Scatterplot With Regression-line</code><code class="s1">'</code><code class="p">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO13-1" id="callout_visualizing_data_with_matplotlib_CO13-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>We use NumPy’s <code>polyfit</code> in 1D to get a line gradient (<code>m</code>) and constant (<code>c</code>) for a best-fit line through our random points.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO13-2" id="callout_visualizing_data_with_matplotlib_CO13-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Use the gradient and constant to plot a line on the scatter plot’s axes (<code>y</code> = <code>mx</code> + <code>c</code>).</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_scatter_regression">
<img alt="dpj2 1011" height="1122" src="assets/dpj2_1011.png" width="2309"/>
<h6><span class="label">Figure 10-11. </span>Scatter plot with regression line</h6>
</div></figure>
<p>It’s generally a good idea to plot confidence intervals when doing line regression. This gives an idea of how reliable the line fit is, based on the number and distribution of the points. Confidence intervals can be achieved with Matplotlib and NumPy, but it is a little awkward. Luckily, there is a library built on Matplotlib that has extra, specialized functions for statistical analysis and data visualization and, in the opinion of many, looks a lot better than Matplotlib’s defaults. That library is seaborn, which we are going to take a quick look at now.<a data-primary="scatter plots (Matplotlib)" data-startref="ix_sctplt" data-type="indexterm" id="idm45607766740784"/><a data-primary="Matplotlib" data-secondary="plot types" data-startref="ix_Matpplt" data-type="indexterm" id="idm45607766739840"/></p>
</div></section>
</div></section>
</div></section>
<section data-pdf-bookmark="seaborn" data-type="sect1"><div class="sect1" id="mpl_seaborn">
<h1>seaborn</h1>
<p>There are a number of <a data-primary="seaborn library" data-type="indexterm" id="ix_seab"/><a data-primary="Matplotlib" data-secondary="seaborn library" data-type="indexterm" id="ix_Matpseab"/>libraries that wrap the powerful plotting abilities of Matplotlib in a more user-friendly guise<sup><a data-type="noteref" href="ch10.xhtml#idm45607766687440" id="idm45607766687440-marker">12</a></sup> and, as important for us data visualizers, play nicely with pandas.</p>
<p><a href="https://bokeh.pydata.org/en/latest">Bokeh</a> is an interactive visualization library with the web in mind, producing browser-rendered output and therefore playing very nicely with IPython notebook. It’s a great achievement, with a design philosophy similar to D3’s.<sup><a data-type="noteref" href="ch10.xhtml#idm45607766685872" id="idm45607766685872-marker">13</a></sup></p>
<p>But for the kind of interactive, exploratory dataviz necessary to get a feel for your data and suggest visualizations, I recommend <a href="https://oreil.ly/b2RpH">seaborn</a>. seaborn extends Matplotlib with some powerful statistical plots and is well integrated with the PyData stack, playing nicely with NumPy, pandas, and the statistical routines found in SciPy and <a href="https://oreil.ly/peqqT">statsmodels</a>.</p>
<p>One of the nice things about seaborn is that it doesn’t hide the Matplotlib API, allowing you to tweak your charts with Matplotlib’s extensive tools. In this sense, it’s not a replacement for Matplotlib and the relevant skills, but a very impressive extension.</p>
<p>To work with seaborn, simply extend your standard Matplotlib imports:</p>
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">numpy</code> <code class="k">as</code> <code class="nn">np</code>
<code class="kn">import</code> <code class="nn">pandas</code> <code class="k">as</code> <code class="nn">pd</code>
<code class="kn">import</code> <code class="nn">seaborn</code> <code class="k">as</code> <code class="nn">sns</code> <code class="c1"># relies on matplotlib</code>
<code class="kn">import</code> <code class="nn">matplotlib</code> <code class="k">as</code> <code class="nn">mpl</code>
<code class="kn">import</code> <code class="nn">matplotlib.pyplot</code> <code class="k">as</code> <code class="nn">plt</code></pre>
<p class="pagebreak-before">Matplotlib provides a number of plotting styles that can be invoked by calling a <code>use</code> method with a style key. Let’s set the current style to seaborn’s default, which will provide a subtle gray grid to the charts:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">matplotlib</code><code class="o">.</code><code class="n">style</code><code class="o">.</code><code class="n">use</code><code class="p">(</code><code class="s1">'seaborn'</code><code class="p">)</code></pre>
<p>You can check out all available styles and their visual effects in the <a href="https://oreil.ly/9RTub">Matplotlib <span class="keep-together">documentation</span></a>.</p>
<p>Many of seaborn’s functions are designed to accept a pandas DataFrame, allowing you to specify, for example, the column values describing 2D scattered points. Let’s take our existing x and y arrays from <a data-type="xref" href="#mpl_scatter_code">Example 10-9</a> and use them to make some dummy data:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">data</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">DataFrame</code><code class="p">({</code><code class="s1">'dummy x'</code><code class="p">:</code><code class="n">x</code><code class="p">,</code> <code class="s1">'dummy y'</code><code class="p">:</code><code class="n">y</code><code class="p">})</code></pre>
<p>We now have some <code>data</code> with columns of x (<code>'dummy x'</code>) and y (<code>'dummy y'</code>) values. <a data-type="xref" href="#mpl_scatter_seaborn_code">Example 10-12</a> demonstrates the use of seaborn’s dedicated linear regression plot <code>lmplot</code>, which produces the chart in <a data-type="xref" href="#mpl_scatter_seaborn">Figure 10-12</a>. Note that for some seaborn plots, to adjust figure size we pass a size (height) in inches and an aspect ratio (width/height). Note also that seaborn shares <code>pyplot</code>’s global <span class="keep-together">context</span>.</p>
<div data-type="example" id="mpl_scatter_seaborn_code">
<h5><span class="label">Example 10-12. </span>Linear regression plot with seaborn</h5>
<pre data-code-language="python" data-type="programlisting"><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">DataFrame</code><code class="p">(</code><code class="p">{</code><code class="s1">'</code><code class="s1">dummy x</code><code class="s1">'</code><code class="p">:</code><code class="n">x</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">dummy y</code><code class="s1">'</code><code class="p">:</code><code class="n">y</code><code class="p">}</code><code class="p">)</code><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">lmplot</code><code class="p">(</code><code class="n">data</code><code class="o">=</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">x</code><code class="o">=</code><code class="s1">'</code><code class="s1">dummy x</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">y</code><code class="o">=</code><code class="s1">'</code><code class="s1">dummy y</code><code class="s1">'</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO14-1" id="co_visualizing_data_with_matplotlib_CO14-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>           </code><code class="n">height</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mi">2</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO14-2" id="co_visualizing_data_with_matplotlib_CO14-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">tight_layout</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO14-3" id="co_visualizing_data_with_matplotlib_CO14-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code class="n">plt</code><code class="o">.</code><code class="n">savefig</code><code class="p">(</code><code class="s1">'</code><code class="s1">mpl_scatter_seaborn.png</code><code class="s1">'</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO14-3" id="co_visualizing_data_with_matplotlib_CO14-4"><img alt="3" height="12" src="assets/3.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO14-1" id="callout_visualizing_data_with_matplotlib_CO14-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>The <code>x</code> and <code>y</code> arguments specify the column names of the DataFrame data that define the coordinates of the plot points.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO14-2" id="callout_visualizing_data_with_matplotlib_CO14-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>To set figure size, we provide the height in inches and an aspect ratio of width/height. Here we’ll use a ratio of two to better fit this book’s page format.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO14-3" id="callout_visualizing_data_with_matplotlib_CO14-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>seaborn shares the <code>pyplot</code> global context, allowing you to save its plots as you would Matplotlib’s.</p></dd>
</dl></div>
<figure><div class="figure" id="mpl_scatter_seaborn">
<img alt="dpj2 1012" height="1072" src="assets/dpj2_1012.png" width="2274"/>
<h6><span class="label">Figure 10-12. </span>Linear regression plot with seaborn</h6>
</div></figure>
<p>As you would expect from a library that places an emphasis on attractive-looking plots, seaborn allows a lot of visual customization. Let’s make a few changes to the look of <a data-type="xref" href="#mpl_scatter_seaborn">Figure 10-12</a>  and adjust the confidence interval to the <a href="https://oreil.ly/gOLOo">standard error</a> estimate of 68% (see <a data-type="xref" href="#mpl_scatter_seaborn_custom">Figure 10-13</a> for the result):</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">sns</code><code class="o">.</code><code class="n">lmplot</code><code class="p">(</code><code class="n">data</code><code class="o">=</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">x</code><code class="o">=</code><code class="s1">'</code><code class="s1">dummy x</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">y</code><code class="o">=</code><code class="s1">'</code><code class="s1">dummy y</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">height</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mi">2</code><code class="p">,</code><code>
</code><code>           </code><code class="n">scatter_kws</code><code class="o">=</code><code class="p">{</code><code class="s2">"</code><code class="s2">color</code><code class="s2">"</code><code class="p">:</code><code> </code><code class="s2">"</code><code class="s2">slategray</code><code class="s2">"</code><code class="p">}</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO15-1" id="co_visualizing_data_with_matplotlib_CO15-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>           </code><code class="n">line_kws</code><code class="o">=</code><code class="p">{</code><code class="s2">"</code><code class="s2">linewidth</code><code class="s2">"</code><code class="p">:</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">linestyle</code><code class="s2">"</code><code class="p">:</code><code class="s1">'</code><code class="s1">--</code><code class="s1">'</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO15-2" id="co_visualizing_data_with_matplotlib_CO15-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code>                     </code><code class="s2">"</code><code class="s2">color</code><code class="s2">"</code><code class="p">:</code><code> </code><code class="s2">"</code><code class="s2">seagreen</code><code class="s2">"</code><code class="p">}</code><code class="p">,</code><code>
</code><code>           </code><code class="n">markers</code><code class="o">=</code><code class="s1">'</code><code class="s1">D</code><code class="s1">'</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO15-3" id="co_visualizing_data_with_matplotlib_CO15-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code>           </code><code class="n">ci</code><code class="o">=</code><code class="mi">68</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO15-4" id="co_visualizing_data_with_matplotlib_CO15-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO15-1" id="callout_visualizing_data_with_matplotlib_CO15-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Provide the scatter plot component’s keyword arguments, setting our points’ color to slate gray.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO15-2" id="callout_visualizing_data_with_matplotlib_CO15-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Provide the line plot component’s  keyword arguments, setting line width and style.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO15-3" id="callout_visualizing_data_with_matplotlib_CO15-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>Set the plot markers to diamonds using Matplotlib marker code <em>D</em>.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO15-4" id="callout_visualizing_data_with_matplotlib_CO15-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></dt>
<dd><p>We set a confidence interval of 68%, the standard error <span class="keep-together">estimate</span>.</p></dd>
</dl>
<figure><div class="figure" id="mpl_scatter_seaborn_custom">
<img alt="dpj2 1013" height="1072" src="assets/dpj2_1013.png" width="2274"/>
<h6><span class="label">Figure 10-13. </span>Customizing the seaborn scatter plot</h6>
</div></figure>
<p>seaborn offers a number of useful plots beyond Matplotlib’s basic set. Let’s take a look at one of the most interesting, using seaborn’s FacetGrid to plot reflections of multidimensional data.</p>
<section data-pdf-bookmark="FacetGrids" data-type="sect2"><div class="sect2" id="idm45607766298496">
<h2>FacetGrids</h2>
<p>Often referred to as “lattice” or “trellis” plotting, the ability to draw multiple instances of the same plot on different subsets of your dataset is a good way to get a bird’s-eye view of your data.<a data-primary="Matplotlib" data-secondary="seaborn library" data-tertiary="FacetGrids" data-type="indexterm" id="ix_MatpseabFG"/><a data-primary="seaborn library" data-secondary="FacetGrids" data-type="indexterm" id="ix_seabFG"/><a data-primary="FacetGrids" data-type="indexterm" id="ix_Fctgrd"/> Large amounts of information can be presented in one plot, and relationships between the different dimensions can be quickly apprehended.<a data-primary="lattice or trellis plotting" data-see="FacetGrids" data-type="indexterm" id="idm45607766292704"/><a data-primary="trellis plotting" data-see="FacetGrids" data-type="indexterm" id="idm45607766291792"/> This technique is related to the <a href="https://oreil.ly/Ck1fT">small multiples</a> popularized by Edward Tufte.</p>
<p>FacetGrids require the data to be in the form of a pandas DataFrame (see <a data-type="xref" href="ch08.xhtml#pandas_objects">“The DataFrame”</a>) and in a form referred to by Hadley Wickham, creator of ggplot2, as “tidy,” meaning each column in the DataFrame should be a variable and each row an observation.<a data-primary="DataFrames" data-secondary="requirement for FacetGrids" data-type="indexterm" id="idm45607766288816"/></p>
<p>Let’s use Tips, one of seaborn’s test datasets,<sup><a data-type="noteref" href="ch10.xhtml#idm45607766287520" id="idm45607766287520-marker">14</a></sup> to show a FacetGrid in action. Tips is a small set of data showing the distribution of tips by various dimensions, such as day of the week or whether the customer was a smoker.<sup><a data-type="noteref" href="ch10.xhtml#idm45607766286048" id="idm45607766286048-marker">15</a></sup> First, let’s load our Tips dataset into a pandas DataFrame using the <code>load_dataset</code> method:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">0</code><code class="p">]:</code> <code class="n">tips</code> <code class="o">=</code> <code class="n">sns</code><code class="o">.</code><code class="n">load_dataset</code><code class="p">(</code><code class="s1">'tips'</code><code class="p">)</code>
<code class="n">Out</code><code class="p">[</code><code class="mi">0</code><code class="p">]:</code>
     <code class="n">total_bill</code>   <code class="n">tip</code>     <code class="n">sex</code> <code class="n">smoker</code>   <code class="n">day</code>    <code class="n">time</code>  <code class="n">size</code>
<code class="mi">0</code>         <code class="mf">16.99</code>  <code class="mf">1.01</code>  <code class="n">Female</code>     <code class="n">No</code>   <code class="n">Sun</code>  <code class="n">Dinner</code>     <code class="mi">2</code>
<code class="mi">1</code>         <code class="mf">10.34</code>  <code class="mf">1.66</code>    <code class="n">Male</code>     <code class="n">No</code>   <code class="n">Sun</code>  <code class="n">Dinner</code>     <code class="mi">3</code>
<code class="mi">2</code>         <code class="mf">21.01</code>  <code class="mf">3.50</code>    <code class="n">Male</code>     <code class="n">No</code>   <code class="n">Sun</code>  <code class="n">Dinner</code>     <code class="mi">3</code>
<code class="mi">3</code>         <code class="mf">23.68</code>  <code class="mf">3.31</code>    <code class="n">Male</code>     <code class="n">No</code>   <code class="n">Sun</code>  <code class="n">Dinner</code>     <code class="mi">2</code>
<code class="o">...</code></pre>
<p>To create a FacetGrid, we specify the <code>tips</code> DataFrame and a column of interest, such as the smoking status of the customer.<a data-primary="scatter plots (Matplotlib)" data-secondary="with FacetGrids" data-secondary-sortas="FacetGrids" data-type="indexterm" id="idm45607766254176"/> This column will be used to create our plot groups. There are two categories in the smoker column (<code>'smoker=Yes'</code> and <code>'smoker=No'</code>), which means there will be two charts in our facet-grid.  We then use the grid’s <code>map</code> method to create multiple scatter plots of tip size against total bill:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">g</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">FacetGrid</code><code class="p">(</code><code class="n">tips</code><code class="p">,</code><code> </code><code class="n">col</code><code class="o">=</code><code class="s2">"</code><code class="s2">smoker</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">height</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">map</code><code class="p">(</code><code class="n">plt</code><code class="o">.</code><code class="n">scatter</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">total_bill</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">tip</code><code class="s2">"</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO16-1" id="co_visualizing_data_with_matplotlib_CO16-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO16-1" id="callout_visualizing_data_with_matplotlib_CO16-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p><code>map</code> takes a plot class, in this case <code>scatter</code>, and two (<code>tips</code>) dimensions required for this scatter plot.</p></dd>
</dl>
<p>This produces the two scatter plots shown in <a data-type="xref" href="#mpl_facetgrid_1">Figure 10-14</a>, one for each smoker status, with tips and total bills correlated.</p>
<figure><div class="figure" id="mpl_facetgrid_1">
<img alt="dpj2 1014" height="1071" src="assets/dpj2_1014.png" width="2271"/>
<h6><span class="label">Figure 10-14. </span>A seaborn FacetGrid using scatter plots</h6>
</div></figure>
<p>We can include another dimension of the <code>tips</code> data by specifying the marker to be used in our scatter plots. Let’s make it a red diamond for females and a blue square for males:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">pal</code><code> </code><code class="o">=</code><code> </code><code class="nb">dict</code><code class="p">(</code><code class="n">Female</code><code class="o">=</code><code class="s1">'</code><code class="s1">red</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">Male</code><code class="o">=</code><code class="s1">'</code><code class="s1">blue</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">g</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">FacetGrid</code><code class="p">(</code><code class="n">tips</code><code class="p">,</code><code> </code><code class="n">col</code><code class="o">=</code><code class="s2">"</code><code class="s2">smoker</code><code class="s2">"</code><code class="p">,</code><code>
</code><code>                  </code><code class="n">hue</code><code class="o">=</code><code class="s2">"</code><code class="s2">sex</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">hue_kws</code><code class="o">=</code><code class="p">{</code><code class="s2">"</code><code class="s2">marker</code><code class="s2">"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="s2">"</code><code class="s2">D</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">s</code><code class="s2">"</code><code class="p">]</code><code class="p">}</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO17-1" id="co_visualizing_data_with_matplotlib_CO17-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>                  </code><code class="n">palette</code><code class="o">=</code><code class="n">pal</code><code class="p">,</code><code> </code><code class="n">height</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="p">)</code><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">map</code><code class="p">(</code><code class="n">plt</code><code class="o">.</code><code class="n">scatter</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">total_bill</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">tip</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">alpha</code><code class="o">=</code><code class="mf">.4</code><code class="p">)</code><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">add_legend</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO17-1" id="callout_visualizing_data_with_matplotlib_CO17-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Adds a marker color (<code>hue</code>) for the <code>sex</code> dimension with diamond (<code>D</code>) and square (<code>s</code>) shapes, and uses our color palette (<code>pal</code>) to make them red and blue.</p></dd>
</dl>
<p>You can see the resulting FacetGrid in <a data-type="xref" href="#mpl_facetgrid_2">Figure 10-15</a>.</p>
<figure><div class="figure" id="mpl_facetgrid_2">
<img alt="dpj2 1015" height="1082" src="assets/dpj2_1015.png" width="2595"/>
<h6><span class="label">Figure 10-15. </span>Scatter plot with diamond and square markers for sex</h6>
</div></figure>
<p>We can use rows as well as columns to create subsets of the data by dimension. Combining <a data-primary="regplots (regression plots)" data-type="indexterm" id="idm45607766008864"/>the two allows, with the help of a <code>regplot</code>,<sup><a data-type="noteref" href="ch10.xhtml#idm45607766007680" id="idm45607766007680-marker">16</a></sup> five dimensions to be explored:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">pal</code><code> </code><code class="o">=</code><code> </code><code class="nb">dict</code><code class="p">(</code><code class="n">Female</code><code class="o">=</code><code class="s1">'</code><code class="s1">red</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">Male</code><code class="o">=</code><code class="s1">'</code><code class="s1">blue</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">g</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">FacetGrid</code><code class="p">(</code><code class="n">tips</code><code class="p">,</code><code> </code><code class="n">col</code><code class="o">=</code><code class="s2">"</code><code class="s2">smoker</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">row</code><code class="o">=</code><code class="s2">"</code><code class="s2">time</code><code class="s2">"</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO18-1" id="co_visualizing_data_with_matplotlib_CO18-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>                  </code><code class="n">hue</code><code class="o">=</code><code class="s2">"</code><code class="s2">sex</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">hue_kws</code><code class="o">=</code><code class="p">{</code><code class="s2">"</code><code class="s2">marker</code><code class="s2">"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="s2">"</code><code class="s2">D</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">s</code><code class="s2">"</code><code class="p">]</code><code class="p">}</code><code class="p">,</code><code>
</code><code>                  </code><code class="n">palette</code><code class="o">=</code><code class="n">pal</code><code class="p">,</code><code> </code><code class="n">height</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="p">)</code><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">map</code><code class="p">(</code><code class="n">sns</code><code class="o">.</code><code class="n">regplot</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">total_bill</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">tip</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">alpha</code><code class="o">=</code><code class="mf">.4</code><code class="p">)</code><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">add_legend</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO18-1" id="callout_visualizing_data_with_matplotlib_CO18-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Adds a time row to separate tips by lunch and dinner.</p></dd>
</dl>
<p><a data-type="xref" href="#mpl_facetgrid_tips3">Figure 10-16</a> shows four <code>regplot</code>s producing a linear-regression model fit with confidence intervals for female and male hue-groups. The plot titles show the data subset being used, each row having the same time and smoker status.</p>
<figure><div class="figure" id="mpl_facetgrid_tips3">
<img alt="dpj2 1016" height="2283" src="assets/dpj2_1016.png" width="2595"/>
<h6><span class="label">Figure 10-16. </span>Visualizing five dimensions</h6>
</div></figure>
<p>We can achieve the same effect <a data-primary="lmplot method" data-type="indexterm" id="idm45607765858096"/>using the <code>lmplot</code> we saw in <a data-type="xref" href="#mpl_scatter_seaborn_code">Example 10-12</a>, which wraps the functionality of FacetGrid and <code>regplot</code> for convenience. The following code produces <a data-type="xref" href="#mpl_facetgrid_tips3">Figure 10-16</a>:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">pal</code><code> </code><code class="o">=</code><code> </code><code class="nb">dict</code><code class="p">(</code><code class="n">Female</code><code class="o">=</code><code class="s1">'</code><code class="s1">red</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">Male</code><code class="o">=</code><code class="s1">'</code><code class="s1">blue</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">sns</code><code class="o">.</code><code class="n">lmplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"</code><code class="s2">total_bill</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">y</code><code class="o">=</code><code class="s2">"</code><code class="s2">tip</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">hue</code><code class="o">=</code><code class="s2">"</code><code class="s2">sex</code><code class="s2">"</code><code class="p">,</code><code>
</code><code>           </code><code class="n">markers</code><code class="o">=</code><code class="p">[</code><code class="s2">"</code><code class="s2">D</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">s</code><code class="s2">"</code><code class="p">]</code><code class="p">,</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO19-1" id="co_visualizing_data_with_matplotlib_CO19-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code>           </code><code class="n">col</code><code class="o">=</code><code class="s2">"</code><code class="s2">smoker</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">row</code><code class="o">=</code><code class="s2">"</code><code class="s2">time</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">data</code><code class="o">=</code><code class="n">tips</code><code class="p">,</code><code> </code><code class="n">palette</code><code class="o">=</code><code class="n">pal</code><code class="p">,</code><code>
</code><code>           </code><code class="n">height</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">aspect</code><code class="o">=</code><code class="mi">1</code><code>
</code><code>           </code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO19-1" id="callout_visualizing_data_with_matplotlib_CO19-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Note the use of a <code>markers</code> keyword as opposed to the <code>kws_hue</code> dictionary we used with the FacetGrid plot.</p></dd>
</dl>
<p><code>lmplot</code> offers a nice shortcut to producing FacetGrid <code>regplot</code>s, but FacetGrid’s <code>map</code> allows you to use the full panoply of seaborn and Matplotlib charts to create plots on dimensional subsets. It’s a very powerful technique and a great way to drill down into your data.<a data-primary="Matplotlib" data-secondary="seaborn library" data-startref="ix_MatpseabFG" data-tertiary="FacetGrids" data-type="indexterm" id="idm45607765727664"/><a data-primary="seaborn library" data-secondary="FacetGrids" data-startref="ix_seabFG" data-type="indexterm" id="idm45607765726144"/><a data-primary="FacetGrids" data-startref="ix_Fctgrd" data-type="indexterm" id="idm45607765724928"/></p>
</div></section>
<section data-pdf-bookmark="PairGrids" data-type="sect2"><div class="sect2" id="idm45607766297552">
<h2>PairGrids</h2>
<p>PairGrids are another rather cool seaborn plot type that provide a way to quickly assess multidimensional data.<a data-primary="Matplotlib" data-secondary="seaborn library" data-tertiary="PairGrids" data-type="indexterm" id="ix_MatpseabPrgrd"/><a data-primary="seaborn library" data-secondary="PairGrids" data-type="indexterm" id="ix_seabPrgrd"/><a data-primary="PairGrids" data-type="indexterm" id="ix_Prgrd"/> Unlike with FacetGrids, you don’t divide the dataset into subsets that are then compared by designated dimensions. With PairGrids, the dataset’s dimensions are all compared pair-wise in a square grid. By default all dimensions are compared, but you can specify which ones get plotted by providing a list to the <code>vars</code> parameter when declaring the PairGrid.<sup><a data-type="noteref" href="ch10.xhtml#idm45607765677072" id="idm45607765677072-marker">17</a></sup></p>
<p>Let’s demonstrate the utility of this pair-wise comparison by using the classic Iris dataset, showing some vital statistics for a set containing members of three Iris species. First, we’ll load the example <span class="keep-together">dataset</span>:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">0</code><code class="p">]:</code> <code class="n">iris</code> <code class="o">=</code> <code class="n">sns</code><code class="o">.</code><code class="n">load_dataset</code><code class="p">(</code><code class="s1">'iris'</code><code class="p">)</code>
<code class="n">In</code> <code class="p">[</code><code class="mi">1</code><code class="p">]:</code> <code class="n">iris</code><code class="o">.</code><code class="n">head</code><code class="p">()</code>
<code class="n">Out</code><code class="p">[</code><code class="mi">1</code><code class="p">]:</code>
   <code class="n">sepal_length</code> <code class="n">sepal_width</code>  <code class="n">petal_length</code>  <code class="n">petal_width</code>  <code class="n">species</code>
<code class="mi">0</code>           <code class="mf">5.1</code>         <code class="mf">3.5</code>           <code class="mf">1.4</code>          <code class="mf">0.2</code>   <code class="n">setosa</code>
<code class="mi">1</code>           <code class="mf">4.9</code>         <code class="mf">3.0</code>           <code class="mf">1.4</code>          <code class="mf">0.2</code>   <code class="n">setosa</code>
<code class="mi">2</code>           <code class="mf">4.7</code>         <code class="mf">3.2</code>           <code class="mf">1.3</code>          <code class="mf">0.2</code>   <code class="n">setosa</code>
<code class="o">...</code></pre>
<p>To capture the relationship between petal and sepal dimensions by species, we first create a <code>PairGrid</code> object, set its hue to <code>species</code>, and then use its mapping methods to create plots on and off the diagonal of the pair-wise grid, producing the charts in <a data-type="xref" href="#mpl_pairgrid_iris">Figure 10-17</a>:</p>
<pre data-code-language="python" data-type="programlisting"><code class="n">sns</code><code class="o">.</code><code class="n">set_theme</code><code class="p">(</code><code class="n">font_scale</code><code class="o">=</code><code class="mf">1.5</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO20-1" id="co_visualizing_data_with_matplotlib_CO20-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a><code>
</code><code class="n">g</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">PairGrid</code><code class="p">(</code><code class="n">iris</code><code class="p">,</code><code> </code><code class="n">hue</code><code class="o">=</code><code class="s2">"</code><code class="s2">species</code><code class="s2">"</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO20-2" id="co_visualizing_data_with_matplotlib_CO20-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">map_diag</code><code class="p">(</code><code class="n">plt</code><code class="o">.</code><code class="n">hist</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO20-3" id="co_visualizing_data_with_matplotlib_CO20-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">map_offdiag</code><code class="p">(</code><code class="n">plt</code><code class="o">.</code><code class="n">scatter</code><code class="p">)</code><code> </code><a class="co" href="#callout_visualizing_data_with_matplotlib_CO20-4" id="co_visualizing_data_with_matplotlib_CO20-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a><code>
</code><code class="n">g</code><code class="o">.</code><code class="n">add_legend</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO20-1" id="callout_visualizing_data_with_matplotlib_CO20-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Tweaks the font size using seaborn’s <code>set_theme</code> method (see <a href="https://oreil.ly/rSmrH">the documentation</a> for the full list of available tweaks).</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO20-2" id="callout_visualizing_data_with_matplotlib_CO20-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Sets the markers and subbars to be colored by species.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO20-3" id="callout_visualizing_data_with_matplotlib_CO20-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>Places histograms of the species’ dimensions on the grid’s <span class="keep-together">diagonal</span>.</p></dd>
<dt><a class="co" href="#co_visualizing_data_with_matplotlib_CO20-4" id="callout_visualizing_data_with_matplotlib_CO20-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></dt>
<dd><p>Uses standard scatter plots to compare the dimensions of the diagonal.</p></dd>
</dl>
<figure><div class="figure" id="mpl_pairgrid_iris">
<img alt="dpj2 1017" height="2849" src="assets/dpj2_1017.png" width="3321"/>
<h6><span class="label">Figure 10-17. </span>PairGrid summation of Iris measures</h6>
</div></figure>
<p>As you can see in <a data-type="xref" href="#mpl_pairgrid_iris">Figure 10-17</a>, a few lines of seaborn go a long way in creating a richly informative set of plots correlating the different Iris metrics. <a data-primary="scatter-plot matrix" data-type="indexterm" id="idm45607765487584"/>This plot is known as a <a href="https://oreil.ly/UAJ8T">scatter-plot matrix</a> and is a great way of finding linear correlations between pairs of variables in a multivariate set. As it stands, there is redundancy in the grid: for example, plots for <code>sepal_width-petal_length</code> and <code>petal_length-septal_width</code>. <code>PairGrid</code> gives you the opportunity to use the redundant plots above or below the main diagonal to provide a different reflection of the data. Check out some of the examples <a href="https://stanford.io/1YydS2V">at the seaborn docs</a> for more info.<sup><a data-type="noteref" href="ch10.xhtml#idm45607765484192" id="idm45607765484192-marker">18</a></sup></p>
<p>I’ve covered a few of the seaborn plots in this section, and you’ll be seeing a few more when we explore our Nobel Prize dataset in the next chapter. But seaborn has a lot of other very handy and very powerful plotting tools, mainly of a statistical nature. For further investigation,  I’d recommend starting with the <a href="https://stanford.io/28L8ezk">main seaborn documentation</a>. There are some nice examples, a well-documented API, and some good tutorials that should complement what you’ve learned in this chapter.<a data-primary="Matplotlib" data-secondary="seaborn library" data-startref="ix_MatpseabPrgrd" data-tertiary="PairGrids" data-type="indexterm" id="idm45607765481552"/><a data-primary="seaborn library" data-secondary="PairGrids" data-startref="ix_seabPrgrd" data-type="indexterm" id="idm45607765480064"/><a data-primary="PairGrids" data-startref="ix_Prgrd" data-type="indexterm" id="idm45607765478848"/><a data-primary="Matplotlib" data-secondary="seaborn library" data-startref="ix_Matpseab" data-type="indexterm" id="idm45607765477904"/><a data-primary="seaborn library" data-startref="ix_seab" data-type="indexterm" id="idm45607765476688"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="idm45607766691200">
<h1>Summary</h1>
<p>This chapter introduced Matplotlib, Python’s plotting powerhouse. It’s a big, mature library with lots of documentation and an active community. If you have a particular customization in mind, chances are there’s an example out there somewhere. I’d recommend firing up a <a href="https://jupyter.org">Jupyter notebook</a> and playing around with a dataset.</p>
<p>We saw how seaborn extends Matplotlib with some useful statistical methods and that it has what many consider to be superior aesthetics. It also allows access to the Matplotlib figure and axes internals, allowing full customization if required.</p>
<p>In the next chapter, we’ll use Matplotlib along with pandas to explore our freshly scraped and cleaned Nobel dataset. We’ll use some of the plot types demonstrated in this chapter and see a few useful new ones.</p>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="idm45607769764064"><sup><a href="ch10.xhtml#idm45607769764064-marker">1</a></sup> If you have errors trying to start a GUI session, try changing the backend setting (e.g., if using macOS and <code>%matplotlib qt</code> doesn’t work, try <code>%matplotlib osx</code>).</p><p data-type="footnote" id="idm45607769728560"><sup><a href="ch10.xhtml#idm45607769728560-marker">2</a></sup> IPython has a large number of such functions to enable a whole slew of useful extras to the vanilla Python interpreter. Check them out <a href="https://oreil.ly/0gUSc">on the IPython website</a>.</p><p data-type="footnote" id="idm45607769721600"><sup><a href="ch10.xhtml#idm45607769721600-marker">3</a></sup> This was inspired by <a href="https://oreil.ly/sw9KZ">MATLAB</a>.</p><p data-type="footnote" id="idm45607769467872"><sup><a href="ch10.xhtml#idm45607769467872-marker">4</a></sup> You can find details of Matplotlib’s line styles in <a href="https://oreil.ly/iqlBE">its documentation</a>.</p><p data-type="footnote" id="idm45607769227712"><sup><a href="ch10.xhtml#idm45607769227712-marker">5</a></sup> See <a href="https://oreil.ly/upz5A">the docs</a> for more details.</p><p data-type="footnote" id="idm45607769200272"><sup><a href="ch10.xhtml#idm45607769200272-marker">6</a></sup> See <a href="https://oreil.ly/oD0lN">the Matplotlib website</a> for details.</p><p data-type="footnote" id="idm45607768868400"><sup><a href="ch10.xhtml#idm45607768868400-marker">7</a></sup> As well as providing many formats, it also understands <a href="https://www.latex-project.org">LaTeX math mode</a>, which is a language that will allow you to use mathematical symbols in the titles, legends, and the like.<a data-primary="Matplotlib" data-secondary="interactive plotting with pyplot's global state" data-tertiary="saving the charts" data-type="indexterm" id="idm45607769093456"/><a data-primary="file formats, Matplotlib plots" data-type="indexterm" id="idm45607769092352"/> This is one of the reasons Matplotlib is much beloved by academics, as it is quite capable of journal-quality images.</p><p data-type="footnote" id="idm45607768834368"><sup><a href="ch10.xhtml#idm45607768834368-marker">8</a></sup> More details are available on the <a href="https://oreil.ly/GacYP">Matplotlib website</a>.</p><p data-type="footnote" id="idm45607768572320"><sup><a href="ch10.xhtml#idm45607768572320-marker">9</a></sup> The handy <code>tight_layout</code> option assumes grid-layout subplots.</p><p data-type="footnote" id="idm45607767371344"><sup><a href="ch10.xhtml#idm45607767371344-marker">10</a></sup> It’s questionable whether stacked bar charts are a particularly good way of appreciating groups of data. See <a href="https://oreil.ly/nClO0">Solomon Messing’s blog</a> for a nice discussion and one example of “good” use.</p><p data-type="footnote" id="idm45607767082480"><sup><a href="ch10.xhtml#idm45607767082480-marker">11</a></sup> Setting marker size, rather than width or radius, is actually a good default, making it proportional to whatever value we are trying to reflect.</p><p data-type="footnote" id="idm45607766687440"><sup><a href="ch10.xhtml#idm45607766687440-marker">12</a></sup> It’s generally agreed that Matplotlib’s defaults aren’t that great and making them better is an easy win for any wrapper.</p><p data-type="footnote" id="idm45607766685872"><sup><a href="ch10.xhtml#idm45607766685872-marker">13</a></sup> Both D3 and Bokeh tip their hats to the classic visualization text, Leland Wilkinson’s <em>The Grammar of Graphics</em> (Springer).</p><p data-type="footnote" id="idm45607766287520"><sup><a href="ch10.xhtml#idm45607766287520-marker">14</a></sup> seaborn has a number of handy datasets, which you can find <a href="https://oreil.ly/clELR">on GitHub</a>.</p><p data-type="footnote" id="idm45607766286048"><sup><a href="ch10.xhtml#idm45607766286048-marker">15</a></sup> The Tips dataset uses sex as a category, whereas the datasets in this book have used gender. In the past these tended to be used interchangeably, but this is no longer the case. See this <a href="https://oreil.ly/P0zWt">Yale School of Medicine article</a> for an explanation.</p><p data-type="footnote" id="idm45607766007680"><sup><a href="ch10.xhtml#idm45607766007680-marker">16</a></sup> <code>regplot</code>, short for regression plot, is equivalent to <code>lmplot</code>, used in <a data-type="xref" href="#mpl_scatter_seaborn_code">Example 10-12</a>. The latter combines <code>regplot</code> and FacetGrid for convenience.</p><p data-type="footnote" id="idm45607765677072"><sup><a href="ch10.xhtml#idm45607765677072-marker">17</a></sup> There are also <code>x_vars</code> and <code>y_vars</code> parameters enabling you to specify nonsquare grids.</p><p data-type="footnote" id="idm45607765484192"><sup><a href="ch10.xhtml#idm45607765484192-marker">18</a></sup> For the curious, there’s a D3 example that builds a scatter-plot matrix  at the <a href="https://oreil.ly/ox8VW"><em>bl.ocks.org</em> site</a>.</p></div></div></section></div></body></html>