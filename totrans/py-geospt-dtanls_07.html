<html><head></head><body>
<div id="sbo-rt-content"><section data-pdf-bookmark="Chapter 7. GeoPandas and Spatial Statistics" data-type="chapter" epub:type="chapter"><div class="chapter" id="geopandas_and_spatial_statistics">
<h1><span class="label">Chapter 7. </span>GeoPandas and Spatial Statistics</h1>
<p>Maps are beautiful. <a contenteditable="false" data-primary="GeoPandas" data-type="indexterm" id="ix_GeoPan"/>The stories they tell can be so captivating that it’s easy to unintentionally disregard the geospatial statistics within them. But geospatial maps are not simply static images. <a contenteditable="false" data-primary="spatial statistics" data-secondary="GeoPandas and" data-see="GeoPandas" data-type="indexterm" id="idm45433740324608"/><a contenteditable="false" data-primary="geospatial statistics" data-seealso="GeoPandas" data-type="indexterm" id="idm45433740322560"/>There is information embedded in them, such as attributes associated with a specific feature in a GIS layer or pixel densities observed in raster images.</p>
<p>Python has a variety of packages for working with geospatial data. If you are familiar with Python, you likely know <a href="https://oreil.ly/j6YBd">pandas</a>, a data analysis tool built specifically for Python.<a contenteditable="false" data-primary="pandas" data-seealso="GeoPandas" data-type="indexterm" id="idm45433740318496"/> Pandas allows us to read a wide variety of data types into a dataframe: a set of tables containing rows (which denote records) and columns (denoting attributes). <a href="https://oreil.ly/pb8lC">GeoPandas</a> is an extension of pandas that lets you manipulate geometric and geospatial data using what it calls a <em>GeoDataFrame:</em> a geospatial dataframe in which each row is a spatial feature, such as a point, line, or polygon.<a contenteditable="false" data-primary="dataframes" data-secondary="GeoDataFrame" data-type="indexterm" id="idm45433740315728"/><a contenteditable="false" data-primary="GeoDataFrame" data-type="indexterm" id="idm45433740313536"/></p>
<p>This chapter will show you how to analyze your data and create maps using GeoPandas and GeoDataFrames, as well as some other important packages, such as <a href="https://matplotlib.org">matplotlib</a> to visualize data and Census Data API. You will also learn how to access geospatial files and delve deeper into demographic data by creating and comparing demographic maps.</p>
<section data-pdf-bookmark="Installing GeoPandas" data-type="sect1"><div class="sect1" id="installing_geopandas">
<h1>Installing GeoPandas</h1>
<p>To install GeoPandas, you’ll use <code>conda</code> and <code>conda-forge</code> in your terminal.<a contenteditable="false" data-primary="GeoPandas" data-secondary="installing" data-type="indexterm" id="idm45433740308800"/> As in previous chapters, I’ll also show you how to create an environment for all the files you’ll need to work with the data in this chapter.</p>
<p class="pagebreak-before less_space">Installing GeoPandas can be a little tricky. Think of it as a moody teenager. It often wants to go first (importing) and likes the latest trends (pay attention to versioning of dependencies). <a contenteditable="false" data-primary="gpd (GeoPandas)" data-type="indexterm" id="idm45433740439008"/>It also prefers a catchy nickname: typically, GeoPandas is called <code>gpd</code>, but from time to time, the code will write out <code>geopandas</code> instead. Pay attention and adjust your variables.</p>
<p>To set up your<a contenteditable="false" data-primary="Conda environment, creating" data-secondary="for installing GeoPandas" data-type="indexterm" id="idm45433740303088"/> environment, start with this:</p>
<pre data-type="programlisting">
conda create --name geop_env python = 3.X </pre>
<p>You can add your Python version here.</p>
<pre data-type="programlisting">
MacBook-Pro<span>-8</span>:~ USERNAME$ conda activate geop_env</pre>
<p>Now you can start installing files into the <code>geop_env</code>:</p>
<pre data-type="programlisting">
conda install -c conda-forge geopandas</pre>
<p>Now you can add any packages you would like to access to your <code>geop_env</code>. If you would like a collection of packages for geospatial analysis, I suggest downloading the geospatial package, but<a contenteditable="false" data-primary="geospatial package" data-type="indexterm" id="idm45433740295472"/> for now you can add packages individually if you prefer:</p>
<pre data-type="programlisting">
conda install -c conda-forge geospatial</pre>
<p>GeoPandas simplifies working with geospatial data in Python. Let’s explore the expanded operations that enable you to perform spatial operations on geometric data.</p>
</div></section>
<section data-pdf-bookmark="Working with GeoJSON files" data-type="sect1"><div class="sect1" id="working_with_geojson_files">
<h1>Working with GeoJSON files</h1>
<p>GeoPandas lets you work with GeoJSON files. <a contenteditable="false" data-primary="GeoPandas" data-secondary="working with GeoJSON files" data-type="indexterm" id="ix_GeoPanGeoJSON"/><a contenteditable="false" data-primary="GeoJSON" data-secondary="working with GeoJSON files using GeoPandas" data-type="indexterm" id="ix_GeoJSON"/>You may have heard of JSON, a common data exchange format. <a contenteditable="false" data-primary="JSON" data-secondary="GeoJSON" data-type="indexterm" id="idm45433740287280"/>GeoJSON is a data exchange format based on JSON that’s specifically designed to represent geographic data structures and their nonspatial attributes. Working with GeoJSON files makes it fairly simple to identify coordinates and locations for your maps.</p>
<p><a data-type="xref" href="#zooming_in_on_parisapostrophes_onest_ar">Figure 7-1</a> shows a map from <a href="https://oreil.ly/JmXP4"><em>geojson.io</em></a>. <span class="keep-together">Geojson.io</span> is an open source tool that simplifies creating, viewing, and sharing your maps. You can perform a variety of functions on the internet without downloading any data to your computer.</p>
<figure><div class="figure" id="zooming_in_on_parisapostrophes_onest_ar"><img alt="Zooming in on Paris’s 1st Arrondissement and selecting boundaries to create a GeoJSON file" height="841" src="assets/pgda_0701.png" width="1349"/>
<h6><span class="label">Figure 7-1. </span>Zooming in on Paris’s 1st Arrondissement and selecting boundaries to create a GeoJSON file</h6>
</div></figure>
<p>Click on the link <a class="orm:hideurl" href="https://geojson.io"><em>geojson.io</em></a> and zoom into a country. I chose France because, well, it’s France. An easy way to locate coordinates for a specific location is to select the region you are interested in and drag the polygon around the area. The tools for selecting a polygon are visible on the right edge of the mapping dashboard. Try locating Paris, France, on the map. Find the Tuileries Garden and draw a polygon around it. Once you save the polygon, you can view formatting options and style properties by clicking within the boundary.</p>
<p>The Meta tab in the top menu (shown in <a data-type="xref" href="#zooming_in_on_parisapostrophes_onest_ar">Figure 7-1</a>) allows you to generate a <em>bounding box (bbox)</em>, which contains the coordinates and set of points you are interested in mapping. It defines the spatial location of an object of interest and its coordinates. You can also load a string in the well-known text (WKT) markup language for vector geometry objects.<a contenteditable="false" data-primary="well-known text (WKT) markup language" data-type="indexterm" id="idm45433742212768"/></p>
<p>The buttons in the lower left corner, visible in <a data-type="xref" href="#map_viewer_options">Figure 7-2</a>, let you toggle between Mapbox (vector tiles), Satellite (raster data), and OSM (OpenStreetMap, which you learned about in <a data-type="xref" href="ch05.xhtml#openstreetmap_accessing_geospatial_data">Chapter 5</a>).</p>
<figure><div class="figure" id="map_viewer_options"><img alt="Map viewer options" height="956" src="assets/pgda_0702.png" width="2016"/>
<h6><span class="label">Figure 7-2. </span>Map viewer options</h6>
</div></figure>
<p>If you want to save this file, you can do so in several different formats, including <em>.csv</em>, <em>.txt</em>, and a shapefile. Then you can import it to QGIS, ArcGIS, or a platform of your choice for additional exploration and analysis. Spreadsheet data is stored as <em>.csv</em> or <em>.txt</em> and often contains location information, such as coordinate data for longitude and latitude, addresses, or zip codes. Shapefiles are Esri vector files that capture location, shape, and related files about locations.<a contenteditable="false" data-primary="GeoPandas" data-secondary="working with GeoJSON files" data-startref="ix_GeoPanGeoJSON" data-type="indexterm" id="idm45433740949296"/><a contenteditable="false" data-primary="GeoJSON" data-secondary="working with GeoJSON files using GeoPandas" data-startref="ix_GeoJSON" data-type="indexterm" id="idm45433740947008"/></p>
</div></section>
<section data-pdf-bookmark="Creating a GeoDataFrame" data-type="sect1"><div class="sect1" id="creating_a_geodataframe">
<h1>Creating a GeoDataFrame</h1>
<p>A GeoDataFrame is much the same as a pandas dataframe but with an extra column of geometric data. <a contenteditable="false" data-primary="GeoPandas" data-secondary="creating  GeoDataFrame" data-type="indexterm" id="ix_GeoPancrGDF"/><a contenteditable="false" data-primary="GeoDataFrame" data-secondary="creating" data-type="indexterm" id="ix_GeoDaFrm"/>Many types of vector data describe discrete data with a fixed location while continuous data is often represented by raster data (although both can be either).</p>
<p>GeoPandas makes a few dataset examples available for exploration.<a contenteditable="false" data-primary="datasets" data-secondary="available from GeoPandas" data-type="indexterm" id="idm45433740259472"/> You are going to access an example from NYC Boroughs, abbreviated as <code>nybb</code>:</p>
<pre data-type="programlisting">
geopandas.datasets.available = ['naturalearth_cities', 'naturalearth_lowres',
'nybb']</pre>
<p>These files represent the positions of cities, the contours of different countries, and the boundaries of New York City’s boroughs. To access them, you will need to include the name of the dataset as a parameter:</p>
<pre data-type="programlisting">
geopandas.datasets.get_path("nybb")</pre>
<p>You can open this in a Jupyter Notebook from your terminal:</p>
<pre data-type="programlisting">
(geop_env) MacBook-Pro<span>-8</span>:~ USERNAME$ jupyter notebook</pre>
<p>Now, with the notebook open, you can create a dataframe. First, import the packages you’ll need into your environment:</p>
<pre data-type="programlisting">
%matplotlib inline

<strong>import</strong> requests
<strong>import</strong> pandas <strong>as</strong> pd
<strong>import</strong> geopandas <strong>as</strong> gpd

<strong>from</strong> scipy.spatial.distance <strong>import</strong> cdist</pre>
<p>Next, you’ll need to retrieve the dataset and call for the active geometry <a contenteditable="false" data-primary="geometry" data-secondary="active geometry column for GeoDataFrame" data-type="indexterm" id="idm45433740250224"/>column (in this instance, “geometry”) by creating a dataframe called <code>world.geometry.name</code>. When you call <code>head()</code>, the top five rows and the columns in the dataset will be returned:</p>
<pre data-type="programlisting">
boros_world = gpd.read_file(gpd.datasets.get_path(<span>'nybb'</span>))
print(<span>f"</span>{type(boros_world)}<span>,</span> {boros_world.geometry.name}<span>"</span>)
print(boros_world.head())
print(boros_world.geometry.geom_type.value_counts())</pre>
<p>You should get the following output:</p>
<pre data-type="programlisting">
&lt;<strong>class</strong> '<strong><span>geopandas</span></strong>.<strong><span>geodataframe</span></strong>.<strong><span>GeoDataFrame</span></strong>'&gt;, <strong><span>geometry</span></strong>
 <strong><span>BoroCode</span></strong>  <strong><span>BoroName</span></strong>  <strong><span>Shape_Leng</span> <span>Shape_Area</span></strong> \
0   5   <strong><span>Staten</span> <span>Island</span></strong> 330470.010332 1.623820<strong><span>e</span></strong>+09 
1   4   <strong><span>Queens</span></strong> 896344.047763 3.045213<strong><span>e</span></strong>+09 
2   3   <strong><span>Brooklyn</span></strong> 741080.523166 1.937479<strong><span>e</span></strong>+09 
3   1   <strong><span>Manhattan</span></strong> 359299.096471 6.364715<strong><span>e</span></strong>+08 
4   2   <strong><span>Bronx</span></strong> 464392.991824 1.186925<strong><span>e</span></strong>+09 

           <strong><span>geometry</span></strong> 
0 <strong><span>MULTIPOLYGON</span></strong> (((<span>970217.022</span> <span>145643.332</span>, <span>970227.</span>... 
<span>1</span> MULTIPOLYGON (((<span>1029606.077</span> <span>156073.814</span>, <span>102957.</span>.. 
<span>2</span> MULTIPOLYGON (((<span>1021176.479</span> <span>151374.797</span>, <span>102100.</span>.. 
<span>3</span> MULTIPOLYGON (((<span>981219.056</span> <span>188655.316</span>, <span>980940.</span>... 
<span>4</span> MULTIPOLYGON (((<span>1012821.806</span> <span>229228.265</span>, <span>101278.</span>.. 
MultiPolygon <span>5</span>
dtype: int64</pre>
<p>Make note of the index assignments in the first column. You will be able to isolate a single borough by referring to it by its index location. <code>BoroCode</code> and <code>BoroName</code> are additional identifiers you can specify, but you may notice the simplicity of calling by index in the code snippets that follow.</p>
<p>You are now working with a GeoDataFrame. <a contenteditable="false" data-primary="GeoDataFrame" data-secondary="creating" data-tertiary="generating plot in locations of New York City boroughs" data-type="indexterm" id="idm45433740255024"/>You can use it to generate the plot in <a data-type="xref" href="#locations_of_new_york_city_boroughs_in">Figure 7-3</a> by running the following code in your Jupyter <a contenteditable="false" data-primary="Jupyter Notebooks" data-secondary="code generating plot for GeoDataFrame" data-type="indexterm" id="idm45433740218160"/>Notebook:</p>
<pre data-type="programlisting">
boros = gpd.read_file(gpd.datasets.get_path(<span>'nybb'</span>))
ax = boros.plot(figsize=(<span>10</span>, <span>10</span>), alpha=<span>0.5</span>, edgecolor=<span>'k'</span>)</pre>
<figure><div class="figure" id="locations_of_new_york_city_boroughs_in"><img alt="Locations of New York City boroughs in a GeoDataFrame" height="574" src="assets/pgda_0703.png" width="594"/>
<h6><span class="label">Figure 7-3. </span>Locations of New York City boroughs in a GeoDataFrame</h6>
</div></figure>
<p>You can change the size of the figure using the <code>figsize</code> argument. <a contenteditable="false" data-primary="GeoDataFrame" data-secondary="manipulating options in generated plot" data-type="indexterm" id="idm45433740212192"/>In the example in <a data-type="xref" href="#locations_of_new_york_city_boroughs_in">Figure 7-3</a>, an alpha value of less than 1 adjusts the transparency. Edge color can be customized as well. You can find details in the <a href="https://oreil.ly/jy6fs">matplotlib documentation</a>.</p>
<p>I prefer maps without the visible axes in most instances. To remove the frames, simply add:</p>
<pre data-type="programlisting">
ax.set_axis_off()</pre>
<p>You will next explore the data by interactive map, so the area coordinates are not necessary. <a contenteditable="false" data-primary="interactive maps" data-type="indexterm" id="idm45433740204032"/>That will generate the image in <a data-type="xref" href="#locations_of_new_york_city_boroughs_wit">Figure 7-4</a>.</p>
<figure><div class="figure" id="locations_of_new_york_city_boroughs_wit"><img alt="Locations of New York City boroughs without the axis frame" height="551" src="assets/pgda_0704.png" width="624"/>
<h6><span class="label">Figure 7-4. </span>Locations of New York City boroughs without the axis frame</h6>
</div></figure>
<p>You can request a single borough by calling out a row number. Staten Island is in row 0 of the GeoDataFrame you generated a few pages ago. You can access a location by its index number using the callable function <a href="https://oreil.ly/vSEXO"><code>DataFrame.loc</code></a>. I think of <code>loc</code> as an abbreviation for “label of column” since it requires an input label, such as “index” or “geometry.” The abbreviation <code>iloc</code> is for integer location index/integer of column. Substitute the name of the dataframe you created:</p>
<pre data-type="programlisting">
boros.loc[<span>0</span>,<span>'geometry'</span>]</pre>
<p>This outputs the image of Staten Island shown in <a data-type="xref" href="#calling_a_single_borough_using_the_dotl">Figure 7-5</a>.</p>
<figure><div class="figure" id="calling_a_single_borough_using_the_dotl"><img alt="Calling a single borough using the .loc function" height="304" src="assets/pgda_0705.png" width="319"/>
<h6><span class="label">Figure 7-5. </span>Calling a single borough using the <code>.loc</code> function</h6>
</div></figure>
<p class="pagebreak-before less_space">You can see the boundaries of Staten Island borough in <a data-type="xref" href="#calling_a_single_borough_using_the_dotl">Figure 7-5</a>, but it would be helpful to have more information now that you know how to access the GeoDataFrame. You can also find the area of a borough:</p>
<pre data-type="programlisting">
gdf = gdf.set_index(<span>"BoroName"</span>)
gdf[<span>"area"</span>] = gdf.area
gdf[<span>"area"</span>]</pre>
<p>This outputs:</p>
<pre data-type="programlisting">
BoroName
Staten Island   1.623822e+09
Queens          3.045214e+09
Brooklyn        1.937478e+09
Manhattan       6.364712e+08
Bronx           1.186926e+09
Name: area, dtype: float64</pre>
<p>To view a borough’s boundary, run:</p>
<pre data-type="programlisting">
gdf[<span>'boundary'</span>] = gdf.boundary
gdf[<span>'boundary'</span>]</pre>
<p>This outputs:</p>
<pre data-type="programlisting">
BoroName
Staten Island   MULTILINESTRING ((970217.022 145643.332, 97022...
Queens          MULTILINESTRING ((1029606.077 156073.814, 1029...
Brooklyn        MULTILINESTRING ((1021176.479 151374.797, 1021...
Manhattan       MULTILINESTRING ((981219.056 188655.316, 98094...
Bronx           MULTILINESTRING ((1012821.806 229228.265, 1012...
Name: boundary, dtype: geometry</pre>
<p>In the interactive map (<a data-type="xref" href="#interactive_map_of_the_new_york_city_bo">Figure 7-6</a>), you can retrieve information by hovering over the borough. <a contenteditable="false" data-primary="GeoDataFrame" data-secondary="creating" data-tertiary="interactive map of New York City boroughs" data-type="indexterm" id="idm45433740181824"/>The reference distance is 0 because Staten Island’s index number is 0. Clicking on any of the other boroughs will tell you the distance from Staten Island.<a contenteditable="false" data-primary="gdf.explore function" data-type="indexterm" id="idm45433740182992"/> The <code>gdf.explore</code> function generates an interactive map:</p>
<pre data-type="programlisting">
gdf.explore(<span>"area"</span>, legend=<strong>True</strong>)</pre>
<figure><div class="figure" id="interactive_map_of_the_new_york_city_bo"><img alt="Interactive map of the New York City boroughs" height="758" src="assets/pgda_0706.png" width="782"/>
<h6><span class="label">Figure 7-6. </span>Interactive map of the New York City boroughs</h6>
</div></figure>
<p>Adding geospatial capabilities like geometry to pandas dataframes is only the beginning. Census data is a treasure trove of open source data, and knowing how to use GeoPandas will help you expand your ability to access and ask questions of this important dataset. Let’s look at some more census data.<a contenteditable="false" data-primary="GeoPandas" data-secondary="creating  GeoDataFrame" data-startref="ix_GeoPancrGDF" data-type="indexterm" id="idm45433741289040"/><a contenteditable="false" data-primary="GeoDataFrame" data-secondary="creating" data-startref="ix_GeoDaFrm" data-type="indexterm" id="idm45433741330192"/></p>
</div></section>
<section data-pdf-bookmark="Working with US Census Data: Los Angeles Population Density Map" data-type="sect1"><div class="sect1" id="working_with_us_census_data_los_angeles">
<h1>Working with US Census Data: Los Angeles Population Density Map</h1>
<p>In this exercise, you’ll calculate population density by census tract across the county of Los Angeles, California.<a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-type="indexterm" id="ix_censGPD"/><a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-type="indexterm" id="ix_GeoPancensda"/></p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>Be careful when working with Python census packages. <a contenteditable="false" data-primary="Python" data-secondary="census packages, caution with" data-type="indexterm" id="idm45433740160624"/>If a developer loses interest in maintaining them or is overwhelmed with other tasks, your maps and graphics will no longer function. I learned that the hard way while writing this chapter. The good news is that it reminded me of the fail-safe basics that will always be reliable.</p>
</div>
<p>If you need a high-quality map of a census data question for professional services or research, you can build one in an open source platform like QGIS or by using proprietary software like ArcGIS. This example will walk you through the basics. When you understand how the Census API is structured and are able to write code outside of a fancy Python package, access to one of the most powerful publicly available datasets is at your fingertips.</p>
<p>The first step is locating the data on <a href="https://oreil.ly/k6wuo"><em>census.gov</em></a>. Data from the 2020 decennial census is becoming available for analysis depending on your area of interest.<a contenteditable="false" data-primary="census.gov" data-type="indexterm" id="idm45433741801120"/><a contenteditable="false" data-primary="Census Reporter" data-type="indexterm" id="idm45433741800480"/> I rely on <a href="https://oreil.ly/TnwCF">Census Reporter</a> for identifying and downloading datasets. <a contenteditable="false" data-primary="datasets" data-secondary="census data" data-type="indexterm" id="idm45433740152912"/>Most repositories have the ACS data (often called the “long-form census”), which is collected each year from a proportion of the nation and bundled yearly or in five-year vintages.<a contenteditable="false" data-primary="ACS (American Community Survey) data" data-type="indexterm" id="idm45433740168688"/> The API fetches the last five-year ACS vintage by default. This is an easy-to-navigate first stop to holistically understand the type of data captured.</p>
<p>Census Reporter has ready-to-use neighborhood data for many metropolitan areas, and that is the data you will see in these examples.</p>
<div data-type="tip"><h6>Tip</h6>
<p>For more advanced users, <a href="https://www.ipums.org">IPUMS</a> (formerly the Integrated Public Use Microdata Series, now known by its acronym) offers <a contenteditable="false" data-primary="IPUMS" data-type="indexterm" id="idm45433740150080"/>global harmonized datasets from census and survey data with supporting documentation. You can use this to integrate ACS and decennial census data with merged data from other sources.</p>
</div>
<section data-pdf-bookmark="Accessing Tract and Population Data Through the Census API and FTP" data-type="sect2"><div class="sect2" id="accessing_tract_and_population_data_thr">
<h2>Accessing Tract and Population Data Through the Census API and FTP</h2>
<p>Accessing the Census API, through the FTP site or directly, is the foundation for being able to work outside the Census GUI. <a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-tertiary="accessing tract and population data through Census API and FTP" data-type="indexterm" id="ix_censGPDacc"/><a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-tertiary="accessing tract and population data through Census API nd FTP" data-type="indexterm" id="ix_GeoPancensdaacc"/><a contenteditable="false" data-primary="US Census Bureau FTP site, connecting to" data-type="indexterm" id="idm45433740143488"/>This will help you address bigger questions, with data ready for analysis in notebooks or QGIS.</p>
<p>FTP sites provide quick and easy access to large files that can be challenging to navigate. If you are working in a MacOS environment, you may need to adjust a few settings, but I prefer the reliability and lack of clutter of accessing census data through FTP.<a contenteditable="false" data-primary="FTP site of US Census Bureau, connecting to" data-type="indexterm" id="idm45433740142288"/></p>
<p>Select System Preferences &gt;&gt; Sharing and check Remote Login. Select which users to allow access.</p>
<p>Next, navigate to your Finder window and select Go. In the dropdown menu, you will see a Connect to Server option (<a data-type="xref" href="#connecting_to_the_us_census_bureau_ftp">Figure 7-7</a>).</p>
<figure><div class="figure" id="connecting_to_the_us_census_bureau_ftp"><img alt="Connecting to the US Census Bureau FTP site" height="464" src="assets/pgda_0707.png" width="966"/>
<h6><span class="label">Figure 7-7. </span>Connecting to the US Census Bureau FTP site</h6>
</div></figure>
<p>The <a href="ftp://ftp2.census.gov/geo/tiger/">FTP site</a> is accessible through the link. You will be able to scroll through the available files. You can also gain access through the <a href="https://oreil.ly/OlwXw">server site</a>. The <a href="https://oreil.ly/bsd2s">summary files</a> are where most of the files of interest are located.</p>
<p>You are going to explore decennial population data from the US census. <a contenteditable="false" data-primary="Google Colab" data-see="Colab" data-type="indexterm" id="idm45433740131680"/><a contenteditable="false" data-primary="Colab" data-type="indexterm" id="idm45433740130368"/>The geographical data included here is from the 2019 ACS one-year survey. The census tables for population are from the 2010 census.<sup><a data-type="noteref" href="ch07.xhtml#ch01fn10" id="ch01fn10-marker">1</a></sup> <a href="https://oreil.ly/ytceM">Google Colab</a> works well for this exercise because the file structure is readily available, and once your session is over, the files are removed.</p>
<p>You will need to download<a contenteditable="false" data-primary="Colab" data-secondary="downloading packages not already included in" data-type="indexterm" id="idm45433740129136"/> the following packages not already included in Colab:</p>
<pre data-type="programlisting">
!pip install geopandas #install separately to avoid errors

<strong><span>import</span></strong> <span>requests</span> # accessing from the CensusAPI<span>
<strong>import</strong> sys </span> # checking python version<span>
<strong>import</strong> pandas <strong>as</strong> pd</span> # working with dataframes<span>
<strong>import</strong> geopandas <strong>as</strong> gpd</span> # creating maps<span>
<strong>import</strong> folium <strong>as</strong> fm</span> # creating HTML map complete with OSM basemap</pre>
<p>I learned an important lesson when working with census data: always know the version of your packages, in case there are dependencies (or conflicts!). This is a helpful practice to add to your notebooks.<a contenteditable="false" data-primary="versions, displaying for census packages" data-type="indexterm" id="idm45433740119456"/> Use the following code to display versions:</p>
<pre data-type="programlisting">
<span># Display package versions</span>
print(<span>"Python Version"</span>, sys.version)
print(<span>"requests version:"</span>, requests.__version__)
print(<span>"pandas version:"</span>, pd.__version__)
print(<span>"geopandas version:"</span>, gpd.__version__)
print(<span>"folium version:"</span>, fm.__version__)</pre>
<p>Now you can request census tract information from the FTP server. You are looking for shapefiles for the census tracts.<a contenteditable="false" data-primary="shapefiles (.shp)" data-secondary="for census tracts" data-secondary-sortas="census" data-type="indexterm" id="idm45433740112992"/> These are <em>.zip</em> files; note that the files you need may be bundled into a larger file. Download the <a href="https://oreil.ly/THPPT">topologically integrated geographic encoding and referencing (TIGER) files</a> for California: FIPS 06. (Federal Information Processing Standards Publications, or FIPS, files designate state and county equivalents.) TIGER shapefiles contain  geographic information but not demographics, so we will add that information shortly.<a contenteditable="false" data-primary="topologically integrated geographic encoding and referencing files" data-see="TIGER shapefiles" data-type="indexterm" id="idm45433740109504"/><a contenteditable="false" data-primary="TIGER (topologically integrated geographic encoding and referencing) shapefiles" data-type="indexterm" id="idm45433740140224"/> The link identifies the US Census Bureau FTP site and denotes geographic files from 2019 at the tract level in California:</p>
<pre data-type="programlisting">
'ftp://ftp2.census.gov/geo/tiger/TIGER2019/TRACT/tl_2019_06_tract.zip'</pre>
<p>Once you identify the file in the FTP, to retrieve it, you need the <code>!wget</code> call. <a contenteditable="false" data-primary="!wget call" data-primary-sortas="wget" data-type="indexterm" id="idm45433740105744"/>The wget utility retrieves FTP files from web servers:</p>
<pre data-type="programlisting">
!wget ftp://ftp2.census.gov/geo/tiger/TIGER2019/TRACT/tl_2019_06_tract.zip</pre>
<p>The quotations on the <em>.zip</em> file path are not needed for the <code>!wget</code> call, and the file will unzip into your Colab notebook. <a contenteditable="false" data-primary="Colab" data-secondary="unzipping census files into Colab notebook" data-type="indexterm" id="idm45433740100688"/>You can watch the progress right in the notebook as it unzips to 100%. Your output should look like this:</p>
<pre data-type="programlisting">
<span>--2022-08-22 15:52:00-- </span> ftp://ftp2.census.gov/geo/tiger/TIGER2019/TRACT/
tl_2019_06_tract.zip
           =&gt; 'tl_2019_06_tract.zip'
Resolving ftp2.census.gov (ftp2.census.gov)... 148.129.75.35, 2610:20:2010:a09:
1000:0:9481:4b23
Connecting to ftp2.census.gov (ftp2.census.gov)|148.129.75.35|:21... connected.
Logging in as anonymous ... Logged in!
==&gt; SYST ... done.    ==&gt; PWD ... done.
==&gt; TYPE I ... done.  ==&gt; CWD (1) /geo/tiger/TIGER2019/TRACT ... done.
==&gt; SIZE tl_2019_06_tract.zip ... 29388806
==&gt; PASV ... done.    ==&gt; RETR tl_2019_06_tract.zip ... done.
Length: 29388806 (28M) (unauthoritative)

tl_2019_06_tract.zi 100%[===================&gt;]  28.03M   262KB/s    in 69s     

2022-08-22 15:53:10 (416 KB/s) - 'tl_2019_06_tract.zip' saved [29388806]</pre>
<p><a data-type="xref" href="#google_colab_file_structure">Figure 7-8</a> shows the files after they are unzipped into the folder hierarchy. Navigate to county-level data, using the same steps you used to locate the state tracts for California.</p>
<figure><div class="figure" id="google_colab_file_structure"><img alt="Google Colab file structure" height="908" src="assets/pgda_0708.png" width="578"/>
<h6><span class="label">Figure 7-8. </span>Google Colab file structure</h6>
</div></figure>
<p>Now that the files are unzipped, we can retrieve the FTP files from the web servers:</p>
<pre data-type="programlisting">
<span>'ftp://ftp2.census.gov/geo/tiger/TIGER2019/COUNTY/tl_2019_us_county.zip'</span>
!wget ftp://ftp2.census.gov/geo/tiger/TIGER2019/COUNTY/tl_2019_us_county.zip</pre>
<p>Now you can plot the California tracts (<code>ca_tracts</code>) using GeoPandas, reading the file from your Colab window. Each file has three dots next to the filename. Right-click on the dots and select Copy Path to copy the link to your files:</p>
<pre data-type="programlisting">
ca_tracts = gpd.read_file(<span>'/content/tl_2019_06_tract.shp'</span>)
ca_tracts.plot()</pre>
<p>The output is shown in <a data-type="xref" href="#california_census_tracts">Figure 7-9</a>.</p>
<figure><div class="figure" id="california_census_tracts"><img alt="California census tracts" height="976" src="assets/pgda_0709.png" width="893"/>
<h6><span class="label">Figure 7-9. </span>California census tracts</h6>
</div></figure>
<p>Let’s take a moment to figure out what the table IDs mean, to help you find the right data.<a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-startref="ix_censGPDacc" data-tertiary="accessing tract and population data through Census API nd FTP" data-type="indexterm" id="idm45433740085616"/><a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-startref="ix_GeoPancensdaacc" data-tertiary="accessing tract and population data through Census API nd FTP" data-type="indexterm" id="idm45433740084272"/></p>
</div></section>
<section data-pdf-bookmark="Accessing Data from the Census API in Your Browser" data-type="sect2"><div class="sect2" id="accessing_data_from_the_census_api_in_y">
<h2>Accessing Data from the Census API in Your Browser</h2>
<p>Next, you’ll need to open the <a href="https://oreil.ly/A3Bwq">US Census Bureau website</a>. In <a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-tertiary="accessing data from Census API in your browser" data-type="indexterm" id="ix_GeoPancensdaaccbrws"/>the<a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-tertiary="accessing data from Census API in your browser" data-type="indexterm" id="ix_censGPDaccbrws"/> search window, enter <code><strong>DP03</strong></code>, the table ID for census data (<a data-type="xref" href="#census_api_data">Figure 7-10</a>). The ID might seem random, but actually it provides important information. Right away, you can tell from the results that the DP indicates a data profile table. The <a href="https://oreil.ly/Fhioi">table IDs</a> describe this table as containing “broad social, economic, housing, and demographic information.” The following number in the ID, 03, also refers to selected economic characteristics.</p>
<figure><div class="figure" id="census_api_data"><img alt="Census API: data" height="552" src="assets/pgda_0710.png" width="703"/>
<h6><span class="label">Figure 7-10. </span>Census API: data</h6>
</div></figure>
<p>Select Enter to see a list of available tables. <a data-type="xref" href="#data_profile_tables_available_from_the">Figure 7-11</a> shows the different years and types of ACS surveys available from this search. <a contenteditable="false" data-primary="data profiles" data-type="indexterm" id="idm45433740073024"/>These are called <em>data profiles</em>, and we will touch on them again a little later.</p>
<figure><div class="figure" id="data_profile_tables_available_from_the"><img alt="Data profile tables available from the US Census Bureau" height="532" src="assets/pgda_0711.png" width="1525"/>
<h6><span class="label">Figure 7-11. </span>Data profile tables available from the US Census Bureau</h6>
</div></figure>
<p>The <a href="https://oreil.ly/tJM7C">Available APIs page on <em>census.gov</em></a> (<a data-type="xref" href="#available_apis_and_other_us_census_bure">Figure 7-12</a>) is an important resource that contains publicly available datasets on a wide variety of topics. <a contenteditable="false" data-primary="census.gov" data-secondary="Available APIs page" data-type="indexterm" id="idm45433740066224"/><a contenteditable="false" data-primary="Available APIs page (census.gov)" data-type="indexterm" id="idm45433740065360"/><a contenteditable="false" data-primary="ACS (American Community Survey) data" data-type="indexterm" id="idm45433740064624"/>From here, select American Community Survey (ACS).</p>
<figure><div class="figure" id="available_apis_and_other_us_census_bure"><img alt="Available APIs and other US Census Bureau datasets" height="831" src="assets/pgda_0712.png" width="1207"/>
<h6><span class="label">Figure 7-12. </span>Available APIs and other US Census Bureau datasets</h6>
</div></figure>
<p>Under American Community Survey (ACS), select 1-Year Estimates and scroll down to 2019. Scroll down the list of tables until you see the data profiles. Grab the first link and paste it into your browser. You are going to edit this link and generate a <em>.csv</em> file.</p>
<div data-type="tip"><h6>Tip</h6>
<p>While you’re on the Available APIs page, you can request a key for running US Census Bureau service requests. You won’t need one for this exercise, but I recommend requesting one and saving it in a reliable location. Look around at the other datasets listed and familiarize yourself with the scope of publicly available data. Another useful US Census Bureau resource is the Developer Forum, an active community that accepts requests for datasets and consultancy.<a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-startref="ix_censGPDaccbrws" data-tertiary="accessing data from Census API in your browser" data-type="indexterm" id="idm45433740107552"/><a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-startref="ix_GeoPancensdaaccbrws" data-tertiary="accessing data from Census API in your browser" data-type="indexterm" id="idm45433741105808"/></p>
</div>
</div></section>
<section data-pdf-bookmark="Using Data Profiles" data-type="sect2"><div class="sect2" id="using_data_profiles">
<h2>Using Data Profiles</h2>
<p>In the data<a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-tertiary="using data profiles" data-type="indexterm" id="idm45433740052800"/> profile section, you<a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-tertiary="using data profiles" data-type="indexterm" id="idm45433740051120"/> have the example <a contenteditable="false" data-primary="data profiles" data-type="indexterm" id="idm45433740049264"/>call that you will edit and other details about the data profile tables:</p>
<ul>
<li>
<p><strong>Example Call:</strong></p>
<p><em>api.census.gov/data/2019/acs/acs1/profile?get=group(DP02)&amp;for=us:1&amp;key=YOUR_KEY_GOES_HERE</em></p>
</li>
<li>
<p>2019 ACS Data Profiles Variables [ <a href="https://oreil.ly/G0PZ0">html</a> | <a href="https://oreil.ly/Iw9CJ">xml</a> | <a href="https://oreil.ly/ruuB4">json</a> ]</p>
</li>
<li>
<p><a href="https://oreil.ly/ynqzy">ACS Technical Documentation</a></p>
</li>
<li>
<p><a href="https://oreil.ly/z8LI5">Examples and Supported Geography</a></p>
</li>
</ul>
<p>Click the link to gather more information. Your first edits will include substituting your table of interest, <code>DP03</code>, and removing the placeholder <code>&amp;key=YOUR_KEY_GOES_HERE</code> from the URL:</p>
<p><em>api.census.gov/data/2019/acs/acs1/profile?get=group(DP03)&amp;for=us:1</em></p>
<p>Then paste the URL into your browser and hit Enter. You will now want to customize the geography portion of your URL to include all metropolitan areas. Select Examples and Supported Geography from the previous page and scroll down to the metropolitan area in the geography hierarchy shown in <a data-type="xref" href="#geography_hierarchy">Figure 7-13</a>.</p>
<figure><div class="figure" id="geography_hierarchy"><img alt="Geography hierarchy" height="745" src="assets/pgda_0713.png" width="1280"/>
<h6><span class="label">Figure 7-13. </span>Geography hierarchy</h6>
</div></figure>
<p>Noticing the * (wildcard option), copy the URL, being sure to delete the <code>YOUR_KEY_GOES_HERE</code> section once again. The other option will give you data for a single metropolitan area: the Akron, Ohio, metro area.</p>
<p>Once you are familiar with the URLs and data tables, it takes just a few quick edits to get a usable file with the demographic or economic data of interest. Modify the URL as shown:</p>
<p><em>https://api.census.gov/data/2019/acs/acs1/profile?get=NAME,DP03_0001E&amp;for=metropolitan%20statistical%20area/micropolitan%20statistical%20area:*</em></p>
<p>Now paste it into your browser and hit Enter. <a contenteditable="false" data-primary="JSON" data-secondary="converting to .csv file" data-type="indexterm" id="idm45433740190736"/>The file saves in JSON format on my Mac. Instead of saving it as a <em>.csv</em> file, which would force you to edit it in Microsoft Excel, run the following lines of code to convert it from <em>.json</em> to <em>.csv</em>:</p>
<pre data-type="programlisting">
df = pd.read_json(‘link to json file’)

df.to_csv()
df</pre>
<p>This will output a formatted <em>.csv</em> file.</p>
</div></section>
<section data-pdf-bookmark="Creating the Map" data-type="sect2"><div class="sect2" id="creating_the_map">
<h2>Creating the Map</h2>
<p>To complete our project creating population densities, you will return to the URL for the 2010 census.<a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-tertiary="creating the map" data-type="indexterm" id="ix_GeoPancensdacrmap"/> </p>
<p>Let’s begin by looking at the reference URL from the 2010 census:</p>
<p><em>https://api.census.gov/data/2010/dec/sf1?get=LSAD_NAME,P001001&amp;for=tract:*&amp;in=state:06</em></p>
<p>Now that you are familiar with Census API calls, you can break the link down in Python to calculate the densities and customize the tables. The total population in the URL call for the census tracts in California includes table <code>P001001</code>; <code>sf1</code> refers to the decennial census:</p>
<pre data-type="programlisting">
# The built out request for the URL  https://api.census.gov/data/2010/dec/
sf1?get=LSAD_NAME,P001001&amp;for=tract:*&amp;in=state:06<span>
HOST =</span> <span>"https://api.census.gov/data"</span><span>
year =</span> <span>"2010"</span><span>
dataset =</span> <span>"dec/sf1"</span><span>
base_url =</span> <span>"/"</span><span>.join([HOST, year, dataset])
predicates = {}
get_vars = [</span><span>"LSAD_NAME"</span><span>,</span> <span>"P001001"</span><span>]
predicates[</span><span>"get"</span><span>] =</span> <span>","</span><span>.join(get_vars)
predicates[</span><span>"for"</span><span>] =</span> <span>"tract:*"</span><span>
predicates[</span><span>"in"</span><span>] =</span> <span>"state:06"</span><span>
r = requests.get(base_url, params=predicates)</span></pre>
<p>Now that you’ve made your request, let’s look at the column names for your data:</p>
<pre data-type="programlisting">
<span>print(r.json()[<span>0</span>])</span>
['LSAD_NAME', 'P001001', 'state', 'county', 'tract']</pre>
<p>Remember the <code>index</code> function. <a contenteditable="false" data-primary="index function" data-type="indexterm" id="idm45433740006400"/>You only need the first row (<code>r</code>) of data to read the headings. You can also create new names:</p>
<pre data-type="programlisting">
# Create user friendly column names<span>
tract_name = [</span><span>"tract_name"</span><span>,</span> <span>"tract_pop"</span><span>,</span> <span>"state_fips"</span><span>,</span> <span>"county_fips"</span><span>,</span> 
<span>"tract_fips"</span><span>]</span>
# Reading the json into pandas df<span>
tractdf = pd.DataFrame(columns=tract_name, data=r.json()[</span><span>1</span><span>:])</span>
# Changing data types to integer<span>
tractdf[</span><span>"tract_pop"</span><span>] = tractdf[</span><span>"tract_pop"</span><span>].astype(int)

tractdf.head()</span></pre>
<p>Follow along in the notebook. The following code will select by attributes for all Los Angeles County census tracts, remove any nulls, and create a new <code>geoid</code> column. Run the code and verify that the <code>geoid</code> column has indeed been added.</p>
<p>First, we need to select attributes from Los Angeles county:</p>
<pre data-type="programlisting">
onecounty_tractdf = tractdf.loc[tractdf[<span>'county_fips'</span>] == 
<span>'037'</span>].copy()Onecounty_tractdf</pre>
<p>Next, we create the new dataframe that includes our new geoid column:</p>
<pre data-type="programlisting">
onecounty_tractdf[<span>'tract_fips'</span>] = onecounty_tractdf[<span>'tract_fips'</span>].<span>str</span>.ljust(<span>6</span>,<span>'0'</span>)
onecounty_tractdf[<span>'geoid'</span>] = onecounty_tractdf[<span>'state_fips'</span>] + 
onecounty_tractdf[<span>'county_fips'</span>] + onecounty_tractdf[<span>'tract_fips'</span>]
onecounty_tractdf</pre>
<p>There are 2,346 records in the dataframe. You can also do a quick count of records with a single line of code:</p>
<pre data-type="programlisting">
onecounty_tractdf.count()</pre>
<p>To join the tract-level and county-level files, you will need to select an attribute for the join. To refresh your mind as to the choices, check the column headings with code:</p>
<pre data-type="programlisting">
ca_tracts.info</pre>
<p>The join will combine column headings <code>GEOID</code> and <code>geoid</code> from the two datasets:</p>
<pre data-type="programlisting">
attr_joined = pd.merge(ca_tracts, onecounty_tractdf, left_on=<span>'GEOID'</span>, 
right_on=<span>'geoid'</span>)
<span># Check that all 2345 Census Tracts joined</span>
attr_joined.count()</pre>
<p>Double-check the coordinate reference system to make sure they match on both the geography file and the census data.<a contenteditable="false" data-primary="CRS (coordinate reference system)" data-secondary="checking for geography file and census data" data-type="indexterm" id="idm45433739980976"/> ALAND is the area, in square meters. Now you can add the block groups to your map:</p>
<pre data-type="programlisting">
<span>map</span> = fm.Map(location=[center_y, center_x], zoom_start=<span>10</span>)

<span># Add Study Area Block Groups to Map</span>
fm.Choropleth(
   geo_data = ca_prj,
   data=ca_prj,
   columns=[<span>'tract_pop'</span>,<span>'ALAND'</span>],
   key_on= <span>'feature.properties.tract_pop'</span>,
   fill_color=<span>'YlGnBu'</span>,
   name = <span>'Population Density'</span>,
   legend_name=<span>'Population Density'</span>
).add_to(map)
map</pre>
<p>Population density measures how many people reside within a given area, and it is normally calculated in square kilometers. You can convert the study area to square kilometers right in the code cell:</p>
<pre data-type="programlisting">
<span># Create a new column for Census Tract area in square Kilometers</span><span>

ca_prj[</span>'AreaLandKM2'<span>] = (ca_prj[</span>'ALAND'<span>] *</span> .000001<span>)

ca_prj[[</span>'geoid'<span>,</span>'TRACTCE'<span>,</span>'ALAND'<span>,</span>'AWATER'<span>,</span>'AreaLandKM2'<span>]].head()</span>

<span>ca_prj[</span>'ppl_perKM2'<span>]=(ca_prj[</span>'tract_pop'<span>]/ca_prj[</span>'AreaLandKM2'<span>])
ca_prj[[</span>'geoid'<span>,</span>'TRACTCE'<span>,</span>'tract_pop'<span>,</span>'AreaLandKM2'<span>,</span>'ppl_perKM2'<span>]].head(</span>16<span>)</span></pre>
<p>Next, select where you want the center of the map to be:</p>
<pre data-type="programlisting">
center_x = (ca_prj.bounds.minx.mean() + ca_prj.bounds.maxx.mean())/<span>2</span>
center_y = (ca_prj.bounds.miny.mean() + ca_prj.bounds.maxy.mean())/<span>2</span>
print(<span>f'The center of the data file is located at</span> {center_x} {center_y}<span>'</span>)</pre>
<p>Now you can view the map and the legend (generated automatically) showing population density within Los Angeles County by running the following code:</p>
<pre data-type="programlisting">
map = fm.Map(location=[center_y, center_x], zoom_start=<span>10</span>)

<span># Add Study Area Block Groups to Map</span>
fm.Choropleth(
   geo_data = ca_prj,
   data=ca_prj,
   columns=[<span>'TRACTCE'</span>,<span>'ppl_perKM2'</span>],
   key_on= <span>'feature.properties.TRACTCE'</span>,
   fill_color=<span>'YlGnBu'</span>,
   name = <span>'Population Density'</span>,
   legend_name=<span>'Population Density'</span>
).add_to(map)
map</pre>
<p>The output, your completed map, is shown in <a data-type="xref" href="#los_angeles_county_population_tracts_by">Figure 7-14</a>.</p>
<figure><div class="figure" id="los_angeles_county_population_tracts_by"><img alt="Los Angeles County population tracts by density" height="1270" src="assets/pgda_0714.png" width="2632"/>
<h6><span class="label">Figure 7-14. </span>Los Angeles County population tracts by density</h6>
</div></figure>
<p>Importing TIGER files from the Census API FTP site guarantees a single source of location accuracy at a variety of geographies. <a contenteditable="false" data-primary="TIGER (topologically integrated geographic encoding and referencing) shapefiles" data-type="indexterm" id="idm45433739957168"/>Here you’ve looked at census tract levels, but a simple edit to a URL call allows you to change to the level of counties, congressional districts, or municipalities, for example. Although these file types do not include demographic or economic information, you learned how to discover data resources and view them in the notebook. The ability to save JSON files in <em>.csv</em> format also means that you can upload them to a GUI, like QGIS, for further exploration.<a contenteditable="false" data-primary="census data" data-secondary="working with in GeoPandas, Los Angeles population density map" data-startref="ix_censGPD" data-type="indexterm" id="idm45433742289296"/><a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-startref="ix_GeoPancensdacrmap" data-tertiary="creating the map" data-type="indexterm" id="idm45433742347728"/><a contenteditable="false" data-primary="GeoPandas" data-secondary="working with US census data, Los Angeles population density map" data-startref="ix_GeoPancensda" data-type="indexterm" id="idm45433739939712"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="summary-id00020">
<h1>Summary</h1>
<p>GeoPandas is a powerful open source Python project that lets users integrate geographic data with pandas objects and perform spatial operations. It quietly works beneath the surface in geospatial calculations. In this chapter, you have read and written files, selected data, made maps and plots, tackled interactive mapping and geometric manipulations, and explored a few useful packages to include in your future geospatial analyses.<a contenteditable="false" data-primary="GeoPandas" data-startref="ix_GeoPan" data-type="indexterm" id="idm45433739937792"/></p>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="ch01fn10"><sup><a href="ch07.xhtml#ch01fn10-marker">1</a></sup> The final data for the 2020 census was not yet available as of this writing. When it becomes available, you will only need to replace the link in the code cells with an updated link, and you will have the updated information.</p></div></div></section></div></body></html>