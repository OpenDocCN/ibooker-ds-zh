<html><head></head><body><section data-pdf-bookmark="Chapter 10. Presenting Your Data" data-type="chapter" epub:type="chapter"><div class="chapter" id="chapter10">&#13;
<h1><span class="label">Chapter 10. </span>Presenting Your Data</h1>&#13;
&#13;
&#13;
<p>After all the effort we’ve put into accessing, assessing, cleaning, transforming, augmenting, and analyzing our data, we’ve finally reached the point where we’re ready to start thinking about communicating what we’ve learned to others. Whether it’s for a formal presentation to colleagues or a social media post for friends and followers, sharing the insights we’ve generated through our data wrangling work is an opportunity for our work to have impact beyond ourselves.</p>&#13;
&#13;
<p>Like every other part of our data wrangling process, effectively and accurately conveying our insights involves applying only a few hard-and-fast rules but a whole lot of judgment. This is certainly true of written communications, but perhaps even more so when it comes to the aspect of data communication that often gets the most attention: <em>visualization</em>.</p>&#13;
&#13;
<p>As<a data-primary="visualizations" data-secondary="tailoring to audience" data-type="indexterm" id="visual-tailoring"/> we touched on in <a data-type="xref" href="ch09.html#vizforanalysis">“Visualization for Data Analysis”</a>, creating visualizations to effectively share our data insights with others requires a different focus and approach than we had when building the visualizations for generating those insights in the first place. For example, unless you’re trying to reach a <em>pretty</em> specialized audience (say, through an academic publication), it’s deeply unlikely that a histogram will find its way into your visualization vocabulary when it’s time to share your findings with the world. At the same time, it is <em>extremely</em> likely that you will end up using some form of bar or column chart<sup><a data-type="noteref" href="ch10.html#idm45143395782464" id="idm45143395782464-marker">1</a></sup> to share your insights with a nonspecialist audience, since these widely used and highly legible graphic forms are relatively easy for most audiences to interpret accurately.</p>&#13;
&#13;
<p>In other words, the way we choose to visually represent our data findings should be informed by not just the <em>data</em> we have (or used to reach our conclusions) but also the <em>audience</em> we are trying to reach. Many software packages (including some of the ones we have already used) will happily generate charts and graphs if you simply point them to a structured dataset and pass in a few optional parameters. While this will work in the bare-minimum sense of producing a visualization, the output will be much more like a machine translation than a poem. Yes, at a high level it may conform to the “rules” of the language, but the clarity of its meaning (to say nothing of its effectiveness or <em>eloquence</em>) is questionable. As such, using visualization to make our data insights truly accessible to others requires thinking carefully about <em>what</em> you want to convey, <em>which</em> visual form suits it best, and <em>how</em> you can tailor it to your specific <a data-primary="visualizations" data-secondary="tailoring to audience" data-startref="visual-tailoring" data-type="indexterm" id="idm45143395577376"/>needs.</p>&#13;
&#13;
<p>Over the course of this chapter, we’ll cover each of these tasks in turn, starting with some strategies designed to help you identify the key points in your data findings. After that, we’ll do a review of the most common (and useful!) visual forms for data. In each instance, we’ll cover the rules and best practices for using each of them, in addition to presenting some basic code for rendering them in Python using a combination of the <em>seaborn</em> and <em>matplotlib</em> libraries. Finally, we’ll take a basic visualization of real-world data and work through how to customize and refine its various elements in order to turn the (usually) serviceable default presentation into something that is both accurate <em>and</em> appealing. Along the way, I hope you’ll encounter at least a few new tools and approaches that will help you think more critically about data visualization in general—whether it’s the result of your own data wrangling efforts or not.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Foundations for Visual Eloquence" data-type="sect1"><div class="sect1" id="idm45143395626928">&#13;
<h1>Foundations for Visual Eloquence</h1>&#13;
&#13;
<p>As I’ve <a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-type="indexterm" id="visual-eloquent"/><a data-primary="eloquent graphics" data-type="indexterm" id="eloquent"/>mentioned a few times, the process of writing good code mirrors that of writing well in most other circumstances. For example, in <a data-type="xref" href="ch08.html#chapter8">Chapter 8</a> we spent time revising and restructuring code that—while it already <em>worked</em>—evolved into scripts and functions that were ultimately clearer, cleaner, and more reusable. At a high level, this process was not dissimilar to how you might revise an essay or an article: once you have all your key ideas collected in one place, you can come back to the piece later and see how it might be reworded and reorganized so that the writing is more concise and the concepts flow more logically.</p>&#13;
&#13;
<p>Though this same write-edit-polish cycle applies to data visualizations, however, the unit we are working with is much less like an essay and much more like a single <em>paragraph</em>—because in general, a single visualization should be used to convey just <em>one single</em> idea. This is true whether your visualization is printed or digital, static or interactive, whether it is part of a longer talk or will be a standalone social media post. One visualization = one key idea.</p>&#13;
&#13;
<p class="pagebreak-before less_space">I’m emphasizing this now because if you came to this chapter hoping for examples of how to build <a href="https://www.google.com/publicdata/directory">Gapminder-style</a> interactives or elaborate <a href="https://flowingdata.com/2008/02/25/ebb-and-flow-of-box-office-receipts-over-past-20-years">stream graphs</a>, I want to disappoint you promptly: in this chapter, my focus will be on the most commonly used visualization types, such as bar, column, and line charts. The reason is partly because they remain the simplest and most interpretable way to represent data that has only one independent variable—and that’s all you should be trying to present most of the time, anyway. Yes, more complex visualizations <em>can</em> be used to plot multiple independent variables—the original Gapminder visualization is a rare good example of this—but without <a href="https://youtube.com/watch?v=jbkSRLYSojo">an endearing Swedish man to guide viewers through them in real time</a>, they are more like pretty toys than informative tools. That’s why our focus here will be on refining accessible visual forms into what I like to call <em>eloquent</em> graphics—visualizations that, like the best text, convey information clearly, simply, and accessibly. While making eloquent graphics doesn’t preclude visual complexity or even interactivity, it <em>does</em> require that every aspect of the visualization contributes to the clarity and meaning of the graphic.</p>&#13;
&#13;
<p>Achieving this kind of visual eloquence means thinking about data visualization in three main phases:</p>&#13;
<dl>&#13;
<dt>1. Refining your focus</dt>&#13;
<dd>&#13;
<p>What <em>precisely</em> are you trying to communicate? In some ways, this parallels the process of choosing your original data wrangling question: no matter what your wrangling and analysis have revealed, you need to communicate <em>one</em> idea per visualization. How do you know if you’ve done this effectively? Most of the time, this means you will able to express it <em>in a single sentence</em>. As with your earlier data wrangling question, the data statement you craft will act as a kind of “ground truth” for making choices about your visualization. Anything that helps you convey your idea more clearly gets kept; <em>everything else</em> gets cut.</p>&#13;
</dd>&#13;
<dt>2. Finding your visual form</dt>&#13;
<dd>&#13;
<p>Is your data best displayed as a column or line chart? Is it a map? A pie chart? A scatter plot or bubble chart? Identifying the best visual form for your data will always involve some experimentation. At the same time, choosing a visual form to express your data statement is not solely a matter of preference, or taste; there are a handful of incontrovertible rules about how certain types of data and data relationships must be visually encoded. Yes, aesthetics <em>do</em> play a role in the effectiveness of a visualization—but they cannot override the need for accuracy.</p>&#13;
</dd>&#13;
<dt>3. Enhancing clarity and meaning</dt>&#13;
<dd>&#13;
<p>Even with the major visual form identified, there are a plethora of ways in which the details of your visualization can improve or degrade its clarity, accessibility, visual appeal, and eloquence. At minimum, you will need to make decisions about color, pattern, scales, and legends, as well as labels, titles, and annotations. If your data statement is especially complex, you will need to carefully layer on even more visual structure to capture these nuances, such as error bars or uncertainty ranges, or perhaps projected and/or missing data.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>In the following sections, we’ll not only discuss each of these phases conceptually, but we’ll use real-world data to see how they are applied in practice using<a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-startref="visual-eloquent" data-type="indexterm" id="idm45143395731456"/><a data-primary="eloquent graphics" data-startref="eloquent" data-type="indexterm" id="idm45143395729968"/> Python.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Making Your Data Statement" data-type="sect1"><div class="sect1" id="whats_your_point">&#13;
<h1>Making Your Data Statement</h1>&#13;
&#13;
<p>Many <a data-primary="visualizations" data-secondary="data statements for" data-tertiary="creating" data-type="indexterm" id="visual-data-statement-create"/><a data-primary="data statements for visualizations" data-secondary="creating" data-type="indexterm" id="data-statement-visual-create"/>years ago, I was fortunate to have <em>The New York Times</em>’ <a href="https://en.wikipedia.org/wiki/Amanda_Cox">Amanda Cox</a> as a guest speaker in one of my data visualization courses, where she shared an excellent tip for assessing whether a given data statement was truly appropriate for visualization: “If you don’t have a verb in your headline, you have a problem.”</p>&#13;
&#13;
<p>Treated superficially, of course, this requirement is easy to meet.<sup><a data-type="noteref" href="ch10.html#idm45143395497264" id="idm45143395497264-marker">2</a></sup> The spirit of her statement, however, implies something much more rigorous: that your graphic’s headline should clearly articulate some significant relationship or claim, and the supporting evidence should be visible in the graphic itself. Why is this so important? For one thing, putting your claims right in the headline will encourage readers to actually <em>look</em> at your graphic in the first place; naming them clearly helps ensure that viewers will—quite literally—know <em>where</em> to look for supporting evidence for those claims. Of course, it’s our job as information designers to make sure that all of our graphic’s visual cues do this too, but often <a href="https://psychologicalscience.org/news/how-headlines-change-the-way-we-think.html">it’s the headline that draws people in</a>.</p>&#13;
&#13;
<p>If you simply can’t manage to get an action verb in your graphic’s headline, it’s a clue that a visualization is probably <em>not</em> the best way to convey your insights. True, in the right circumstances humans <a href="https://news.mit.edu/2014/in-the-blink-of-an-eye-0116">can process visualizations incredibly quickly</a>, but that advantage is only realized if the visualization has something to “say.” In other words, while you may be able to generate a visually accurate chart titled “One Year of Daily Treasury Long-Term Rates,” the reality is that even the biggest policy wonk will wonder why they should bother looking at it. Don’t insist on visualization if it’s not the right tool! Remember that our goal is to convey our data wrangling insights as effectively as possible—not to express them visually at all costs. By focusing first on refining your data statement—and confirming it has the power you need—you will avoid spending lots of time designing and building a visualization that doesn’t really do what you want or what your audience needs. Sure, basic data visualizations can be quickly generated with a dataset and a solid visualization library (like <em>seaborn</em>). But making really <em>eloquent</em> visualizations requires careful thought as well as detailed customization of even the best library’s default charts. Before you commit all that time and energy, then, it’s worth making sure that your complex visualization wouldn’t have been better off as a single, highlighted statistic from your analysis.</p>&#13;
&#13;
<p>Once you’ve got a powerful data statement “headline” in place, however, it’s time to identify the graphic form that will help you most effectively present the data evidence for your claim.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Charts, Graphs, and Maps: Oh My!" data-type="sect1"><div class="sect1" id="charts_graphs_maps">&#13;
<h1>Charts, Graphs, and Maps: Oh My!</h1>&#13;
&#13;
<p>Even if we limit ourselves to the more straightforward graphic forms, there are still enough options to make the process of finding the best one for our data a little bit overwhelming. Should you choose a line chart or a bar graph? If a bar graph is best, should it be horizontal or vertical? Are pie charts <em>ever</em> OK? Unfortunately, this is one situation where our Python libraries largely <em>cannot</em> help us, since in general they will just valiantly attempt to produce whatever type of chart you ask for with the data you give them. We need a better way.</p>&#13;
&#13;
<p>This is where <a data-primary="visualizations" data-secondary="data statements for" data-tertiary="choosing visualization type" data-type="indexterm" id="idm45143395810240"/><a data-primary="data statements for visualizations" data-secondary="choosing visualization type" data-type="indexterm" id="idm45143395808944"/>having a well-focused data statement comes in. Does your statement reference <em>absolute</em> values—like the <code>CurrentApprovalAmount</code> in our PPP loan data—or does it focus on the <em>relationship</em> between values, as in <a href="https://economist.com/graphic-detail/2021/06/21/the-pandemic-cut-annual-fdi-flows-by-one-third">“The pandemic cut annual FDI flows by one-third”</a>? While claims about <em>absolute</em> values are often best expressed through bar charts, data statements about relationships can be well supported through a wider range of visual forms. If your data statement includes a claim about change over time, for example, a line graph or scatter plot is a good place to start. Meanwhile some visual forms, like pie charts and maps, are difficult to adapt to anything except data from a single point in time.</p>&#13;
&#13;
<p>In truth, there are few hard-and-fast rules for visualizing data,<sup><a data-type="noteref" href="ch10.html#idm45143395160848" id="idm45143395160848-marker">3</a></sup> but I have outlined those that exist in the sections that follow—along with some general tips for designing your graphics. While these guidelines will help you choose a form for your visualization that doesn’t work <em>against</em> your data, that’s only the next step. The choices that can really elevate your graphics are the ones that we’ll cover in <a data-type="xref" href="#elementsofeloquentvisuals">“Elements of Eloquent Visuals”</a>. That section is where we’ll move beyond the (still quite excellent) defaults of <em>seaborn</em> and begin digging more into <em>matplotlib</em> in order to control things like the labels, colors, and annotations that can really set your visualization apart.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Pie Charts" data-type="sect2"><div class="sect2" id="idm45143395156992">&#13;
<h2>Pie Charts</h2>&#13;
&#13;
<p>Pie charts <a data-primary="visualizations" data-secondary="pie charts" data-type="indexterm" id="visual-pie"/><a data-primary="pie charts" data-type="indexterm" id="pie"/><a data-primary="proportionality" data-secondary="pie charts for" data-type="indexterm" id="proportionality-pie"/>are a surprisingly polarizing topic in visualization. Though pie charts are helpful for <a href="https://pbs.org/parents/recipes/pegs-pizza-fractions">teaching children about fractions</a>, there are plenty of folks who feel they have <a href="https://storytellingwithdata.com/blog/2011/07/death-to-pie-charts">little to no place in an effective visualization lexicon</a>.</p>&#13;
&#13;
<p>Personally, I think there are specific—if limited—situations in which a pie chart is the best visualization for supporting your data statement. For example, if you are trying to make a point about what <em>proportion</em> or <em>share</em> of your data has a particular value and the remaining values can be sensibly grouped into four or fewer categories, then a pie chart may well be what you want. This is especially true if the resulting chart highlights values that correspond to some <a href="https://store.moma.org/for-the-home/kitchen-dining/cookware-kitchen-tools/visual-measuring-cups/8711-802262.html">“recognizable”</a> fraction of the whole (e.g., 1/4, 1/3, 1/2, 2/3, or 3/4), since the human eye is able to detect such differences in line orientation <a href="https://csc2.ncsu.edu/faculty/healey/PP">without much effort</a>.</p>&#13;
&#13;
<p>For example, looking at the <a href="https://washingtonpost.com/elections/election-results/new-york/nyc-primary">results of the New York City Democratic primary for mayor in June 2021</a>, we can imagine writing a data statement along the lines of “Despite Wide Field, Top 3 Candidates Capture Nearly 3/4 of First-Choice Votes.” Because only four candidates received more than 10% of the first-choice votes, it is also reasonable to lump all the remaining candidates into a single “Other” category. In this instance, then, a pie chart is a perfectly reasonable way to both accurately present the results and support our claim—in part because it makes it easy to see how significantly the front-runners outpaced the other candidates.</p>&#13;
&#13;
<p>Given the <a data-primary="matplotlib library" data-secondary="pie charts" data-type="indexterm" id="matplotlib-pie"/>contentious nature of pie charts, it’s not totally surprising that there is no pie chart option provided in the generally quite versatile <em>seaborn</em> library. We can, however, use <em>matplotlib</em> directly to get a very serviceable pie chart.<sup><a data-type="noteref" href="ch10.html#idm45143395804112" id="idm45143395804112-marker">4</a></sup> Still, there are a few idiosyncrasies in the <em>matplotlib</em> pie charting function that we have to overcome. For example, best practice dictates that pie charts are laid out with the largest section starting at “12 o’clock,” with the rest added in descending size order clockwise from there. In <em>matplotlib</em>, however, the first section starts at “3 o’clock,” and additional sections are added <em>counter</em>clockwise from there. As a result, we need to specify <code>startangle=90</code> and reverse the largest-to-smallest order of our segments.<sup><a data-type="noteref" href="ch10.html#idm45143395798752" id="idm45143395798752-marker">5</a></sup> Likewise, <em>matplotlib</em> also assigns each “slice” of the pie a different color hue (e.g., purple, red, green, orange, and blue) by default, in a particular range of colors that may be inaccessible to folks with certain kinds of colorblindness. Since our data statement is conceptually grouping the top three candidates, I’ve made all of these the same shade of green; and since <em>all</em> the candidates are from the same political party, I’ve kept all the slices in the green family. To see how this type of chart is coded (including these small customizations), take a look at <a data-type="xref" href="#a_humble_pie">Example 10-1</a> and the resulting visualization in <a data-type="xref" href="#nyc_primary_pie">Figure 10-1</a>.</p>&#13;
<div data-type="example" id="a_humble_pie">&#13;
<h5><span class="label">Example 10-1. </span>a_humble_pie.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code><code> </code><code class="nn">matplotlib.pyplot</code><code> </code><code class="kn">as</code><code> </code><code class="nn">plt</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># matplotlib works counterclockwise, so we need to essentially reverse</code><code>&#13;
</code><code class="c1"># the order of our pie-value "slices"</code><code>&#13;
</code><code class="n">candidate_names</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s1">'</code><code class="s1">Adams</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Wiley</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Garcia</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Yang</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Others</code><code class="s1">'</code><code class="p">]</code><code>&#13;
</code><code class="n">candidate_names</code><code class="o">.</code><code class="n">reverse</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code class="n">vote_pct</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="mf">30.8</code><code class="p">,</code><code> </code><code class="mf">21.3</code><code class="p">,</code><code> </code><code class="mf">19.6</code><code class="p">,</code><code> </code><code class="mf">12.2</code><code class="p">,</code><code> </code><code class="mf">16.1</code><code class="p">]</code><code>&#13;
</code><code class="n">vote_pct</code><code class="o">.</code><code class="n">reverse</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="n">colors</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s1">'</code><code class="s1">#006d2c</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">#006d2c</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">#006d2c</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">#31a354</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">#74c476</code><code class="s1">'</code><code class="p">]</code><code>&#13;
</code><code class="n">colors</code><code class="o">.</code><code class="n">reverse</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="n">fig1</code><code class="p">,</code><code> </code><code class="n">ax1</code><code> </code><code class="o">=</code><code> </code><code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code class="c1"># by default, the starting axis is the x-axis; making this value 90 ensures</code><code>&#13;
</code><code class="c1"># that it is a vertical line instead</code><code>&#13;
</code><code class="n">ax1</code><code class="o">.</code><code class="n">pie</code><code class="p">(</code><code class="n">vote_pct</code><code class="p">,</code><code> </code><code class="n">labels</code><code class="o">=</code><code class="n">candidate_names</code><code class="p">,</code><code> </code><code class="n">autopct</code><code class="o">=</code><code class="s1">'</code><code class="si">%.1f</code><code class="si">%%</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">startangle</code><code class="o">=</code><code class="mi">90</code><code class="p">,</code><code>&#13;
</code><code>        </code><code class="n">colors</code><code class="o">=</code><code class="n">colors</code><code class="p">)</code><code> </code><a class="co" href="#callout_presenting_your_data_CO1-1" id="co_presenting_your_data_CO1-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="n">ax1</code><code class="o">.</code><code class="n">axis</code><code class="p">(</code><code class="s1">'</code><code class="s1">equal</code><code class="s1">'</code><code class="p">)</code><code>  </code><code class="c1"># equal aspect ratio ensures that pie is drawn as a circle.</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># show the plot!</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">(</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_presenting_your_data_CO1-1" id="callout_presenting_your_data_CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>The argument that we pass to <code>autopct</code> should be a “formatted string literal,” also known as an <a href="https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals"><em>f-string</em></a>. This example specifies that the fraction be expressed as a <em>floating point</em> (decimal) number to one-point of precision. The double percent sign (<code>%%</code>) is used here to print a single one in the output (by escaping the reserved percent sign symbol with <a data-primary="matplotlib library" data-secondary="pie charts" data-startref="matplotlib-pie" data-type="indexterm" id="idm45143395099520"/>another one).</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="nyc_primary_pie">&#13;
<img alt="New York City Primary Pie Chart." src="assets/ppdw_1001.png"/>&#13;
<h6><span class="label">Figure 10-1. </span>New York City primary pie chart</h6>&#13;
</div></figure>&#13;
&#13;
<p>To recap, if you’re considering a pie chart:</p>&#13;
<dl>&#13;
<dt>Rule</dt>&#13;
<dd>&#13;
<p>Your data categories must conceptually (and literally) sum to a single “whole.”</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>The number of categories should be condensed to five or fewer.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>The proportion of data you want to highlight should be 1/4, 1/3, 1/2, 2/3, or 3/4 of the total.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>If your data doesn’t fit one or more of those requirements, however, a bar chart may be the next graphic form to<a data-primary="visualizations" data-secondary="pie charts" data-startref="visual-pie" data-type="indexterm" id="idm45143395467904"/><a data-primary="pie charts" data-startref="pie" data-type="indexterm" id="idm45143395466656"/><a data-primary="proportionality" data-secondary="pie charts for" data-startref="proportionality-pie" data-type="indexterm" id="idm45143395465712"/> explore.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Bar and Column Charts" data-type="sect2"><div class="sect2" id="idm45143395156368">&#13;
<h2>Bar and Column Charts</h2>&#13;
&#13;
<p>Bar charts <a data-primary="visualizations" data-secondary="bar/column charts" data-type="indexterm" id="visual-bar-column"/><a data-primary="bar charts" data-type="indexterm" id="barchart"/><a data-primary="column charts" data-type="indexterm" id="column-chart"/><a data-primary="context" data-secondary="in bar/column charts" data-secondary-sortas="bar/column charts" data-type="indexterm" id="relationship-bar-column"/>are often the most effective way to highlight the relationships (including differences) among discrete, nominal (as opposed to proportional) data values. Unlike pie charts, bar charts can accurately represent datasets where the values do not sum to a single “whole.” They can also effectively represent both positive and negative values (simultaneously, if needed) and can display both point-in-time comparisons of different categories of data and data values over time. The bars can also be oriented vertically (sometimes these graphics are described as <em>column</em> charts) or horizontally to make labels and data relationships more legible.</p>&#13;
&#13;
<p>In other words, bar charts are <em>incredibly</em> flexible and offer many options for presenting the evidence for data claims effectively. There is, however, <em>one hard-and-fast rule</em> for working with bar charts: <em>data values MUST start at zero</em>! There are really no exceptions to this rule, though that <a href="https://datajournalism.com/read/longreads/the-unspoken-rules-of-visualisation">doesn’t stop some people from trying</a>. Why is this rule so important? Because starting bars of a chart at a number <em>other</em> than zero means that their visual difference in length will no longer be proportional to their <em>actual</em> difference in value.</p>&#13;
&#13;
<p>For example, imagine you were arguing for a raise at work, where you currently earn the US federal minimum wage of $7.25 per hour. You ask your boss to raise your hourly rate <a href="https://data.bls.gov/cgi-bin/cpicalc.pl?cost1=7.25&amp;year1=200907&amp;year2=202107">to $9.19 per hour</a>, to account for the effect of inflation since the minimum wage was last raised in 2009.</p>&#13;
&#13;
<p>“Well,” says your boss, “let’s see what that kind of raise would look like,” and then shows you a chart like the one shown in <a data-type="xref" href="#inaccurate_comparison">Figure 10-2</a>.</p>&#13;
&#13;
<figure class="width-90"><div class="figure" id="inaccurate_comparison">&#13;
<img alt="An Inaccurate Wage Comparison" src="assets/ppdw_1002.png"/>&#13;
<h6><span class="label">Figure 10-2. </span>An inaccurate wage comparison</h6>&#13;
</div></figure>&#13;
&#13;
<p>See the problem? By starting the bars at 5 rather than zero, the chart in <a data-type="xref" href="#inaccurate_comparison">Figure 10-2</a> makes it <em>look</em> like $9.19 per hour would be almost <em>double</em> your current wage. But of course some simple math (9.19 – 7.25 / 7.25 = ~.27) illustrates that it’s just over 25% more than you’re currently making. As you can see, starting bar charts at zero isn’t a matter of taste, aesthetics or semantics—it’s <a href="https://flowingdata.com/2017/02/09/how-to-spot-visualization-lies">a visual lie</a>.</p>&#13;
&#13;
<p>Still, even professional graphics teams sometimes get this wrong. Take this example, highlighted on Kaiser Fung’s excellent blog, <em>Junk Charts</em>, titled <a href="https://junkcharts.typepad.com/junk_charts/2005/11/finally_a_tange.html">“Working Culture”</a> and reproduced in <a data-type="xref" href="#inaccurate_retirement">Figure 10-3</a>.</p>&#13;
&#13;
<figure><div class="figure" id="inaccurate_retirement">&#13;
<img alt="An Inaccurate Retirement Age Comparison" src="assets/ppdw_1003.png"/>&#13;
<h6><span class="label">Figure 10-3. </span>An inaccurate retirement age comparison</h6>&#13;
</div></figure>&#13;
&#13;
<p>In <a data-type="xref" href="#inaccurate_retirement">Figure 10-3</a>, a “broken” bar chart claims to display when men in different countries stop working, as compared to the official retirement age. As in <a data-type="xref" href="#inaccurate_comparison">Figure 10-2</a>, failing to start the bars at zero grossly misrepresents their real value difference: according to the data labels, men in France retired roughly 10 years before men in Japan—a 15% difference in working years. But the actual bar for Japan is <em>more than twice as long</em> as the one for France. Of course, if the bars all started at zero, the difference in their values would not seem so dramatic.</p>&#13;
&#13;
<p>What gives? Are the designers of this visualization really trying to trick us into thinking that men in Japan work twice as long as men in France? Almost certainly not. Graphics like the one in <a data-type="xref" href="#inaccurate_retirement">Figure 10-3</a> are the reason why expressing <em>one</em> idea per visualization is so important: trying to layer in more than that is where you’re most likely to run into trouble and end up with an inaccurate and misleading visualization. In <a data-type="xref" href="#inaccurate_retirement">Figure 10-3</a>, the designers are trying to show two different measures (difference between the official retirement age and the age men stop working <em>and</em> what that age is) whose scales are incompatible. Start the bars at zero, and readers won’t be able to distinguish the ages where the dots are placed; change the scale so the dot placement is legible, and the bars become inaccurate. Either way, you’re forcing the reader to do a lot of work—especially since the graphic’s heading hasn’t told them what they should be looking for ;-)</p>&#13;
&#13;
<p>Let’s see what happens when we start with a clear, action-verb headline and use that to redesign this graphic: “Men in Japan work years past retirement age, while others stop well before.” Here, our headline/data statement is about highlighting the <em>difference</em> between official retirement and actual retirement. Now we can design a horizontal bar chart that both supports this claim <em>and</em> accurately represents the underlying data, as shown in <a data-type="xref" href="#retirement_age">Example 10-2</a> and the resulting <a data-type="xref" href="#retirement_gap_graphic">Figure 10-4</a>.</p>&#13;
<div data-type="example" id="retirement_age">&#13;
<h5><span class="label">Example 10-2. </span>retirement_age.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code><code> </code><code class="nn">matplotlib.pyplot</code><code> </code><code class="kn">as</code><code> </code><code class="nn">plt</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">pandas</code><code> </code><code class="kn">as</code><code> </code><code class="nn">pd</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">seaborn</code><code> </code><code class="kn">as</code><code> </code><code class="nn">sns</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">numpy</code><code> </code><code class="kn">as</code><code> </code><code class="nn">np</code><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># (abbreviated) list of countries</code><code>&#13;
</code><code class="n">countries</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s1">'</code><code class="s1">Japan</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Iceland</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Switzerland</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">France</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Ireland</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Germany</code><code class="s1">'</code><code class="p">,</code><code>&#13;
</code><code>             </code><code class="s1">'</code><code class="s1">Italy</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">Belgium</code><code class="s1">'</code><code class="p">]</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># difference in years between official and actual retirement age</code><code>&#13;
</code><code class="n">retirement_gap</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="mi">9</code><code class="p">,</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="o">-</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="o">-</code><code class="mi">2</code><code class="p">,</code><code> </code><code class="o">-</code><code class="mi">2</code><code class="p">,</code><code> </code><code class="o">-</code><code class="mi">7</code><code class="p">,</code><code> </code><code class="o">-</code><code class="mi">8</code><code class="p">]</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># zip the two lists together, and specify the column names as we make the DataFrame</code><code>&#13;
</code><code class="n">retirement_data</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">DataFrame</code><code class="p">(</code><code class="nb">list</code><code class="p">(</code><code class="nb">zip</code><code class="p">(</code><code class="n">countries</code><code class="p">,</code><code> </code><code class="n">retirement_gap</code><code class="p">)</code><code class="p">)</code><code class="p">,</code><code>&#13;
</code><code>               </code><code class="n">columns</code><code> </code><code class="o">=</code><code class="p">[</code><code class="s1">'</code><code class="s1">country</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">retirement_gap</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># in practice, we might prefer to write a function that generates this list,</code><code>&#13;
</code><code class="c1"># based on our data values</code><code>&#13;
</code><code class="n">bar_colors</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="s1">'</code><code class="s1">#d01c8b</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">#d01c8b</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">#d01c8b</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">#4dac26</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">#4dac26</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">#4dac26</code><code class="s1">'</code><code class="p">,</code><code>&#13;
</code><code>              </code><code class="s1">'</code><code class="s1">#4dac26</code><code class="s1">'</code><code class="p">,</code><code class="s1">'</code><code class="s1">#4dac26</code><code class="s1">'</code><code class="p">]</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># pass our data and palette to the `seaborn` `barplot()` function</code><code>&#13;
</code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">barplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"</code><code class="s2">retirement_gap</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">y</code><code class="o">=</code><code class="s2">"</code><code class="s2">country</code><code class="s2">"</code><code class="p">,</code><code>&#13;
</code><code>                 </code><code class="n">data</code><code class="o">=</code><code class="n">retirement_data</code><code class="p">,</code><code> </code><code class="n">palette</code><code class="o">=</code><code class="n">bar_colors</code><code class="p">)</code><code> </code><a class="co" href="#callout_presenting_your_data_CO2-1" id="co_presenting_your_data_CO2-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code class="c1"># show the plot!</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">(</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_presenting_your_data_CO2-1" id="callout_presenting_your_data_CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>By assigning our numerical values to the x-axis, and categorical values to the y-axis, <em>seaborn</em> will render this as a horizontal, rather than vertical, bar chart.</p></dd>&#13;
</dl>&#13;
&#13;
<figure class="width-90"><div class="figure" id="retirement_gap_graphic">&#13;
<img alt="Retirement gap horizontal bar chart." src="assets/ppdw_1004.png"/>&#13;
<h6><span class="label">Figure 10-4. </span>Retirement gap horizontal bar chart</h6>&#13;
</div></figure>&#13;
&#13;
<p>Because my data statement/headline is now clearly about the <em>difference</em> in years between official and actual retirement age, I’ve chosen to chart this difference directly and also reorder the data: men in France only retire one year early, while men in Belgium retire about eight years early. To further highlight the before/after official retirement age distinction, I’ve also color-coded the bars according to their positive/negative value.</p>&#13;
&#13;
<p>The mix of positive and negative values in this dataset—along with the longer country name labels—makes this graphic much more readable as a horizontal bar chart rather than a vertical one. If we want to test it out as a vertical chart for the sake of comparison, however, we need to swap which data columns we pass as the <code>x</code> and <code>y</code> arguments to the <code>barplot()</code> function. For example, by changing this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">ax</code> <code class="o">=</code> <code class="n">sns</code><code class="o">.</code><code class="n">barplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"retirement_gap"</code><code class="p">,</code> <code class="n">y</code><code class="o">=</code><code class="s2">"country"</code><code class="p">,</code> <code class="n">data</code><code class="o">=</code><code class="n">retirement_data</code><code class="p">,</code>&#13;
                 <code class="n">palette</code><code class="o">=</code><code class="n">bar_colors</code><code class="p">)</code></pre>&#13;
&#13;
<p>to this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">ax</code> <code class="o">=</code> <code class="n">sns</code><code class="o">.</code><code class="n">barplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"country"</code><code class="p">,</code> <code class="n">y</code><code class="o">=</code><code class="s2">"retirement_gap"</code><code class="p">,</code> <code class="n">data</code><code class="o">=</code><code class="n">retirement_data</code><code class="p">,</code>&#13;
                 <code class="n">palette</code><code class="o">=</code><code class="n">bar_colors</code><code class="p">)</code></pre>&#13;
&#13;
<p>While this change is easy enough to make, there can be real differences in the readability of a given dataset when it’s rendered vertically or horizontally. Specifically, vertical bars tend to be better for data with shorter labels, less variation, and/or few to no negative values, while horizontal bars are usually better for divergent data (especially if there is a high proportion of negative values) and/or data that has longer labels.</p>&#13;
&#13;
<p>While the visualization shown in <a data-type="xref" href="#retirement_gap_graphic">Figure 10-4</a> is still quite simple, if you run the code you’ll see for yourself the difference in quality that, for example, taking care with your color palette brings to a visualization. While I have chosen a binary magenta/green color encoding here, I could also have specified one of <code>seaborn</code>’s <a href="https://medium.com/@morganjonesartist/color-guide-to-seaborn-palettes-da849406d44f">170 color palettes</a> (e.g., <code>palette='BuGn'</code>), which would (mostly) align the color intensity with the value of each bar.</p>&#13;
&#13;
<p>To recap, when working with bar charts:</p>&#13;
<dl>&#13;
<dt>Rule</dt>&#13;
<dd>&#13;
<p>Bars must begin at zero!</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Vertical bars are good for denser data with less variation.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Horizontal bars are better for more variation and/or longer<a data-primary="visualizations" data-secondary="bar/column charts" data-startref="visual-bar-column" data-type="indexterm" id="idm45143394987520"/><a data-primary="bar charts" data-startref="barchart" data-type="indexterm" id="idm45143394986272"/><a data-primary="column charts" data-startref="column-chart" data-type="indexterm" id="idm45143394985328"/><a data-primary="context" data-secondary="in bar/column charts" data-secondary-sortas="bar/column charts" data-startref="relationship-bar-column" data-type="indexterm" id="idm45143394984384"/> labels.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Line Charts" data-type="sect2"><div class="sect2" id="idm45143395463456">&#13;
<h2>Line Charts</h2>&#13;
&#13;
<p>When <a data-primary="visualizations" data-secondary="line charts" data-type="indexterm" id="visualization-line"/><a data-primary="line charts" data-type="indexterm" id="line-chart"/><a data-primary="rates of change in line charts" data-secondary-sortas="line charts" data-type="indexterm" id="rates-change-line"/><a data-primary="charts" data-see="visualizations" data-type="indexterm" id="idm45143395444608"/><a data-primary="graphs" data-see="visualizations" data-type="indexterm" id="idm45143395443664"/>your data statement is about <em>rates of change</em> rather than <em>value differences</em>, it’s time to explore line charts. Like bar charts, line charts can effectively display multiple categories of numerical data, but only as it <em>changes over time</em>. Because they don’t visually encode the absolute data values, however, line chart scales do <em>not</em> need to start at zero.</p>&#13;
&#13;
<p>At first, this might seem like an invitation for manipulation—and indeed, line charts have been at the center of some major political controversies.<sup><a data-type="noteref" href="ch10.html#idm45143395440176" id="idm45143395440176-marker">6</a></sup> For both bar charts and line charts, however, what’s actually driving the scale of the y-axis is the <em>data</em>: just as we cannot decide to start bar charts at a value other than zero, it would be absurd to scale the y-axis to many times the value of our largest data measure, as shown in <a data-type="xref" href="#bad_wage_math_flat">Figure 10-5</a>.</p>&#13;
&#13;
<figure><div class="figure" id="bad_wage_math_flat">&#13;
<img alt="Another Bad Wage Comparison Graphic" src="assets/ppdw_1005.png"/>&#13;
<h6><span class="label">Figure 10-5. </span>Another bad wage comparison graphic</h6>&#13;
</div></figure>&#13;
&#13;
<p>While technically accurate, the hyperextended y-scale in <a data-type="xref" href="#bad_wage_math_flat">Figure 10-5</a> has so compressed the data values that our eyes can no longer accurately or effectively distinguish the difference between them. For bar charts, then, the highest y-axis value should usually be at the next “whole” labeled increment (more about this in <a data-type="xref" href="#selecting_scales">“Selecting Scales”</a>). For line charts, visualization experts like Dona Wong recommend that the value range of the data occupy about two-thirds of the y-axis space.<sup><a data-type="noteref" href="ch10.html#idm45143395430576" id="idm45143395430576-marker">7</a></sup></p>&#13;
&#13;
<p>Of course, this approach highlights the influence that the <em>selection</em> of data points in a line chart has on the overall message. For example, consider <a href="https://economist.com/graphic-detail/2021/06/21/the-pandemic-cut-annual-fdi-flows-by-one-third">this graphic from <em>The Economist</em></a>, reproduced in <a data-type="xref" href="#fdi_flow_original">Figure 10-6</a>.</p>&#13;
&#13;
<figure><div class="figure" id="fdi_flow_original">&#13;
<img alt="Foreign Direct Investment Flows, 2007 - 2020" src="assets/ppdw_1006.png"/>&#13;
<h6><span class="label">Figure 10-6. </span>Foreign direct investment flows (FDI), 2007–2020</h6>&#13;
</div></figure>&#13;
&#13;
<p>In this case, the original headline, “The pandemic cut annual FDI flows by one-third,” is actually pretty effective; it’s both active and specific. But while the data this headline describes is <em>included</em> in the accompanying chart, it’s far from emphasized—the visualization includes more than a decade’s worth of data even though the change described took place between 2019 and 2020. If we revise the graphic to focus <em>only</em> on what happened between those two years, as shown in <a data-type="xref" href="#fdi_slopegraph">Figure 10-7</a>, we can both support the data statement more clearly <em>and</em> reveal an additional dimension of the data: though foreign direct investment dropped substantially in “developed” countries, it largely held steady in “developing” regions. As the article itself states, “Inflows to rich countries fell faster than those to developing ones—by 58% against just 8%.”</p>&#13;
&#13;
<p>This<a data-primary="visualizations" data-secondary="slope graphs" data-type="indexterm" id="idm45143395421024"/><a data-primary="slope graphs" data-type="indexterm" id="idm45143395420016"/> two-point line graph—also known as a <em>slope graph</em>—not only makes it easy for readers to see the evidence behind the headline claim, it also allows them to infer the disparate impact of the pandemic on FDI with respect to “developed” versus “developing” countries—thereby providing evidence for the article’s later claim as well. As you can see in <a data-type="xref" href="#covid_fdi_impact">Example 10-3</a>, generating this type of basic line chart takes just a few lines of code.</p>&#13;
&#13;
<figure><div class="figure" id="fdi_slopegraph">&#13;
<img alt="The pandemic cut annual FDI flows by one-third." src="assets/ppdw_1007.png"/>&#13;
<h6><span class="label">Figure 10-7. </span>The pandemic cut annual FDI flows by one-third</h6>&#13;
</div></figure>&#13;
<div data-type="example" id="covid_fdi_impact">&#13;
<h5><span class="label">Example 10-3. </span>covid_FDI_impact.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">matplotlib.pyplot</code> <code class="kn">as</code> <code class="nn">plt</code>&#13;
<code class="kn">import</code> <code class="nn">pandas</code> <code class="kn">as</code> <code class="nn">pd</code>&#13;
<code class="kn">import</code> <code class="nn">seaborn</code> <code class="kn">as</code> <code class="nn">sns</code>&#13;
<code class="kn">import</code> <code class="nn">numpy</code> <code class="kn">as</code> <code class="nn">np</code>&#13;
&#13;
&#13;
<code class="c1"># each individual array is a row of data</code>&#13;
<code class="n">FDI</code> <code class="o">=</code> <code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">([[</code><code class="mf">0.8</code><code class="p">,</code> <code class="mf">0.7</code><code class="p">],</code> <code class="p">[</code><code class="mf">0.3</code><code class="p">,</code> <code class="mf">0.6</code><code class="p">]])</code>&#13;
&#13;
<code class="n">fdi_data</code> <code class="o">=</code> <code class="n">pd</code><code class="o">.</code><code class="n">DataFrame</code><code class="p">(</code><code class="n">data</code><code class="o">=</code><code class="n">FDI</code><code class="p">,</code>&#13;
              <code class="n">columns</code><code class="o">=</code><code class="p">[</code><code class="s1">'Developed'</code><code class="p">,</code> <code class="s1">'Developing'</code><code class="p">])</code>&#13;
&#13;
<code class="n">ax</code> <code class="o">=</code> <code class="n">sns</code><code class="o">.</code><code class="n">lineplot</code><code class="p">(</code><code class="n">data</code><code class="o">=</code><code class="n">fdi_data</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># show the plot!</code>&#13;
<code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">()</code></pre></div>&#13;
&#13;
<p>At this point, you may be wondering, though, whether it’s somehow <em>wrong</em> to include only two years of data. After all, we have (at least) a decade’s worth on hand.</p>&#13;
&#13;
<p>The real question, of course, is not whether we <em>have</em> more data but whether the data claim we’re making somehow misrepresents a broader trend. Looking at the original plot in <a data-type="xref" href="#fdi_flow_original">Figure 10-6</a>, it’s clear that the FDI has only dropped this <em>quickly</em> twice in the past 15 years or so: from 2007 to 2008 and again between 2016 and 2017. Why? We don’t know for sure—neither the original chart nor the full article text (I checked!) make it clear. What we <em>do</em> know is the absolute change in value (around $500B) and the proportional change in value are both large enough <em>and</em> unique enough that focusing just on the one-year change is not misleading. If we want to reassure our readers of this, we’d be better off providing the additional detail in a table, where they can review the precise numbers in detail without being distracted from the main point.</p>&#13;
&#13;
<p>Line charts are essential visual forms when the <em>rate of change</em> (captured in the slope of each line) is central to the data statement’s message. While this type of chart does not need to start at zero, it can <em>only</em> be used to represent data over time. To review, when working with line charts, the following apply:</p>&#13;
<dl>&#13;
<dt>Rule</dt>&#13;
<dd>&#13;
<p>Data points must represent values <em>over time</em>.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Data lines should occupy roughly 2/3 of the vertical chart area.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Four or fewer lines should be distinctly colored/labeled.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>While it may seem counterintuitive at first, it’s actually OK to have a large number of lines on a line chart—as long as they are styled so that they don’t compete with the evidence for our data statement. As we’ll see in the next section, this kind of “background” data can actually be a useful way to provide additional context for readers, thereby supporting your headline claims even more <a data-primary="visualizations" data-secondary="line charts" data-startref="visualization-line" data-type="indexterm" id="idm45143395299888"/><a data-primary="line charts" data-startref="line-chart" data-type="indexterm" id="idm45143395298640"/><a data-primary="rates of change in line charts" data-secondary-sortas="line charts" data-startref="rates-change-line" data-type="indexterm" id="idm45143395297696"/>effectively.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Scatter Charts" data-type="sect2"><div class="sect2" id="idm45143394982384">&#13;
<h2>Scatter Charts</h2>&#13;
&#13;
<p>Although<a data-primary="visualizations" data-secondary="scatter plots" data-type="indexterm" id="visual-scatter"/><a data-primary="scatter plots" data-type="indexterm" id="scatter"/> scatter plots are not frequently used in general data communications, they can be irreplaceable as a  point-in-time counterpart to line charts, especially when you have a large number of data points that illustrate a clear trend—or deviation from that trend.</p>&#13;
&#13;
<p>Consider, for example, the graphic in <a data-type="xref" href="#nyt_temp_scatter">Figure 10-8</a>,&#13;
which reproduces one from this <a href="https://nytimes.com/interactive/2021/06/29/upshot/portland-seattle-vancouver-weather.html"><em>New York Times</em> story</a>,&#13;
and illustrates how,&#13;
even among thousands of temperature readings taken over the course of more than four decades, three consecutive days in June 2021 were well outside the expected range in cities from Portland, Oregon, to Vancouver, Canada. While the headline could certainly be punchier, the visualization itself has a clear message: the maximum temperatures reached in Portland, OR, on three days in late June were higher <em>than every other day</em> of the last 40 years.</p>&#13;
&#13;
<figure><div class="figure" id="nyt_temp_scatter">&#13;
<img alt="Daily maximum temperatures in Portland, 1979-2021." src="assets/ppdw_1008.png"/>&#13;
<h6><span class="label">Figure 10-8. </span>Daily maximum temperatures in Portland, 1979–2021</h6>&#13;
</div></figure>&#13;
&#13;
<p>Most of the time, scatter plots are used to display data values captured either over the course of time (as in <a data-type="xref" href="#nyt_temp_scatter">Figure 10-8</a>) or across many individual members of some “group” (e.g., “schools,” “large cities”, “river-fed lakes,” or “Marvel movies”). At times, scatter plots may include calculated trend lines that serve as a benchmark for comparing individual data points with “expected” average values; at other times, the benchmark might be a value determined by professional, legal, or social norms.</p>&#13;
&#13;
<p>For example, drawing inspiration from a <em>Pioneer Press</em> story about schools where students perform better than the typical indicators would suggest,<sup><a data-type="noteref" href="ch10.html#idm45143395284112" id="idm45143395284112-marker">8</a></sup> we can use <em>seaborn</em> to plot historical data from the California school system to generate a scatter plot and highlight an unusual data point. The code for this example can be found in <a data-type="xref" href="#schools_that_work">Example 10-4</a>.</p>&#13;
<div data-type="example" id="schools_that_work">&#13;
<h5><span class="label">Example 10-4. </span>schools_that_work.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code><code> </code><code class="nn">matplotlib.pyplot</code><code> </code><code class="kn">as</code><code> </code><code class="nn">plt</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">seaborn</code><code> </code><code class="kn">as</code><code> </code><code class="nn">sns</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">pandas</code><code> </code><code class="kn">as</code><code> </code><code class="nn">pd</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># import the school test data</code><code>&#13;
</code><code class="n">school_data</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">read_csv</code><code class="p">(</code><code class="s2">"</code><code class="s2">apib12tx.csv</code><code class="s2">"</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># plot test scores against the percentage of students receiving meal support</code><code>&#13;
</code><code class="n">sns</code><code class="o">.</code><code class="n">scatterplot</code><code class="p">(</code><code class="n">data</code><code class="o">=</code><code class="n">school_data</code><code class="p">,</code><code> </code><code class="n">x</code><code class="o">=</code><code class="s2">"</code><code class="s2">MEALS</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">y</code><code class="o">=</code><code class="s2">"</code><code class="s2">API12B</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">alpha</code><code class="o">=</code><code class="mf">0.6</code><code class="p">,</code><code> </code><code class="n">linewidth</code><code class="o">=</code><code class="mi">0</code><code class="p">)</code><code> </code><a class="co" href="#callout_presenting_your_data_CO3-1" id="co_presenting_your_data_CO3-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code class="c1"># highlight a high-performing school</code><code>&#13;
</code><code class="n">highlight_school</code><code> </code><code class="o">=</code><code> </code><code class="n">school_data</code><code class="p">[</code><code class="n">school_data</code><code class="p">[</code><code class="s1">'</code><code class="s1">SNAME</code><code class="s1">'</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code>\&#13;
</code><code>                               </code><code class="s2">"</code><code class="s2">Chin (John Yehall) Elementary</code><code class="s2">"</code><code class="p">]</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">scatter</code><code class="p">(</code><code class="n">highlight_school</code><code class="p">[</code><code class="s1">'</code><code class="s1">MEALS</code><code class="s1">'</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">highlight_school</code><code class="p">[</code><code class="s1">'</code><code class="s1">API12B</code><code class="s1">'</code><code class="p">]</code><code class="p">,</code><code>&#13;
</code><code>            </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">orange</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">alpha</code><code class="o">=</code><code class="mf">1.0</code><code class="p">)</code><code> </code><a class="co" href="#callout_presenting_your_data_CO3-2" id="co_presenting_your_data_CO3-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code class="c1"># show the plot!</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">(</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_presenting_your_data_CO3-1" id="callout_presenting_your_data_CO3-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>The <code>alpha</code> argument governs the opacity of the dots; 60% opacity (<code>0.6</code> as a decimal) proved the right balance here for legibility of individual as well as overlapping dots. The argument <code>linewidth=0</code> eliminates the outlines around each dot, which interferes with the heatmap effect of adjusting the opacity.</p></dd>&#13;
<dt><a class="co" href="#co_presenting_your_data_CO3-2" id="callout_presenting_your_data_CO3-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>To “highlight” a school, we are essentially just creating a one-dot scatter plot at the x and y coordinates of our selected data point.</p></dd>&#13;
</dl>&#13;
&#13;
<p>One of the key challenges when using scatter plots is the problem <a data-primary="occlusion (in visualizations)" data-type="indexterm" id="idm45143394330208"/>of <em>occlusion</em>, in which data points may end up superimposed on one another, thus obscuring the true density of the data. One approach to this is to <a data-primary="jitter (in visualizations)" data-type="indexterm" id="idm45143394328464"/>add <em>jitter</em>—a small amount of randomness to the placement of individual dots designed to minimize this visual overlap. As of <em>seaborn</em> 0.11.2, however, jitter is <a href="https://seaborn.pydata.org/generated/seaborn.scatterplot.html">listed as an optional argument</a> but is listed as “not supported.” Fortunately, we can preserve the precision of our data without losing its interpretability by adjusting the opacity<a data-primary="opacity (transparency) in visualizations" data-type="indexterm" id="idm45143394325872"/><a data-primary="alpha (transparency) in visualizations" data-type="indexterm" id="idm45143394325232"/> or <em>alpha</em> of the data points. By making all the dots in our visualization somewhat transparent, overlapping data points translate to a kind of opacity-driven <em>heatmap</em> that <a data-primary="heatmaps" data-type="indexterm" id="idm45143394288064"/>clarifies trends without losing specificity, as shown in <a data-type="xref" href="#schools_that_work_scatter">Figure 10-9</a>.</p>&#13;
&#13;
<figure><div class="figure" id="schools_that_work_scatter">&#13;
<img alt="At some schools, history isn't destiny" src="assets/ppdw_1009.png"/>&#13;
<h6><span class="label">Figure 10-9. </span>At some schools, history isn’t destiny</h6>&#13;
</div></figure>&#13;
&#13;
<p>So when do scatter plots make sense?</p>&#13;
<dl>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Data must be high-volume enough for trends and outliers to be visible.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Relevant benchmarks, whether arising from the data or outside rules, should be visualized.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Most of the data should be a “background” color, with no more than a handful of points highlighted.</p>&#13;
</dd>&#13;
<dt>Guideline</dt>&#13;
<dd>&#13;
<p>Adjust opacity or apply jitter to minimize data<a data-primary="visualizations" data-secondary="scatter plots" data-startref="visual-scatter" data-type="indexterm" id="idm45143394279536"/><a data-primary="scatter plots" data-startref="scatter" data-type="indexterm" id="idm45143394278448"/> occlusion.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Maps" data-type="sect2"><div class="sect2" id="idm45143395295744">&#13;
<h2>Maps</h2>&#13;
&#13;
<p>For <a data-primary="visualizations" data-secondary="maps" data-type="indexterm" id="visual-map"/><a data-primary="maps" data-type="indexterm" id="maps"/><a data-primary="geographic data, maps for" data-type="indexterm" id="geographic-data"/>many of us, maps are one of the most familiar visualization types available; depending on your circumstances, you may use maps to plan your route to work or school, find a new shop or restaurant, or locate a new park or bike path. Maps are also a common visual form in mass communications, where they appear as weather maps, election maps, or even “locator” maps that provide a frame of reference for unfamiliar locations. If our data has a geographic component, then, it’s natural to consider mapping it.</p>&#13;
&#13;
<p>In reality, however, <em>unless your data is</em> about <em>geography, you really shouldn’t be mapping it</em>. Why? Because maps <a data-primary="land area in maps" data-type="indexterm" id="idm45143394270992"/>represent <em>land area</em>. Not prevalence, or even population—which is usually what our data is about. For example, let’s think back to our PPP loan data from <a data-type="xref" href="ch06.html#chapter6">Chapter 6</a>. If you were to cluster the number of approved loans by state using <code>value_counts('ProjectState')</code>, you would end up with the following output (reformatted into columns to save space):</p>&#13;
&#13;
<pre data-type="programlisting">CA    99478      VA    18682      CT    10197      NH     4197      AK     2076&#13;
TX    60245      NC    18022      AL     9025      ID     3697      PR     2032&#13;
NY    54199      MN    16473      OK     8598      NM     3524      VT     1918&#13;
FL    46787      CO    15662      SC     8522      ME     3490      WY     1791&#13;
IL    33614      MD    15170      UT     7729      HI     3414      GU      305&#13;
PA    30768      WI    14729      KY     7623      DC     3175      VI      184&#13;
OH    26379      IN    13820      IA     7003      RI     3012      MP       55&#13;
NJ    24907      MO    13511      KS     6869      WV     2669      AS       18&#13;
MI    24208      TN    12994      NV     6466      MT     2648&#13;
MA    21734      AZ    12602      NE     4965      ND     2625&#13;
GA    20069      OR    10899      AR     4841      DE     2384&#13;
WA    18869      LA    10828      MS     4540      SD     2247</pre>&#13;
&#13;
<p>Without too much effort, you can probably guess that the order in which states appear in this table is similar to their order in <a href="https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population">this one</a>, which ranks the states by population. In other words, if we were to “map” the data about PPP loan approvals, it would basically end up being a population map. But let’s say we fixed this, and we normalized the number of loans by population, and so generated a new column called “Approved Loans Per Person” or something similar. Even now that we’ve converted our data from population to prevalence, we’ve really just given ourselves the bar chart problem in geographic form: the actual <em>visual area</em> occupied by a particular state is just <em>not</em> proportional to the data we’re displaying. No matter how we choose our color palette or data ranges, Delaware will occupy 1/50 the visual space of Wyoming, even though it has 25% more approved loans. By mapping this, we’re just guaranteeing that our visual representation is working against the actual data.</p>&#13;
&#13;
<p>Obviously, there are a <em>lot</em> of map visualizations out there, and a fair number of them probably make one or both of the mistakes I’ve highlighted thus far. Mapping offers such a <em>seemingly</em> straightforward visual organizing principle that many people can’t resist it, but using it for nongeographic data is really a disservice to both the data and your readers.</p>&#13;
&#13;
<p>There are, of course, excellent maps of genuinely geographic phenomena out there: these <em>New York Times</em> census maps, for example, offer a thoughtful approach to presenting <a href="https://nytimes.com/interactive/2015/07/08/us/census-race-map.html">census data</a>, while <em>ProPublicas</em>’s work on <a href="https://projects.propublica.org/graphics/harvey-maps">Houston’s flood zones</a> illustrates how important geography (both natural and human-made) is during extreme weather events. And for a beautiful and original presentation of wind data, check out <a href="http://hint.fm/wind">this wind map on hint.fm</a>.</p>&#13;
&#13;
<p>Given how rarely maps will be the <em>right</em> visualization for supporting your data claims (as well as how complex building them can be in Python), we’re not going to go through a code example for mapping here. If you’re working with data that you feel you truly <em>must</em> map, I recommend looking <a data-primary="geopandas library" data-type="indexterm" id="idm45143394256768"/>at the <a href="https://geopandas.org/index.html"><em>geopandas</em> library</a>, which is designed to combine mapping-related shape information easily with <em>pandas</em> DataFrames to<a data-primary="visualizations" data-secondary="maps" data-startref="visual-map" data-type="indexterm" id="idm45143394254576"/><a data-primary="maps" data-startref="maps" data-type="indexterm" id="idm45143394253296"/><a data-primary="geographic data, maps for" data-startref="geographic-data" data-type="indexterm" id="idm45143394252352"/> produce visualizations.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45143394251312">&#13;
<h5>Pull Out the Paper</h5>&#13;
<p>Though your visualizations are<a data-primary="visualizations" data-secondary="paper sketches of" data-type="indexterm" id="idm45143394250048"/><a data-primary="paper sketches of visualizations" data-type="indexterm" id="idm45143394249072"/><a data-primary="sketching visualizations" data-type="indexterm" id="idm45143394248432"/> probably destined to live digitally, I strongly recommend that when it’s time to begin your design process, you step away from your keyboard and pick up a pen (or pencil, or crayon) instead. Don’t worry if you “can’t draw”—your goal here is to identify (and possibly solve) visual challenges without being prejudiced by what your digital tools can and can’t easily do. If this means that your visualization  <a href="https://en.wikipedia.org/wiki/Paper_prototyping">“paper prototypes”</a> end up looking more like scratch paper than an illustration, that’s actually all the better: user-experience research shows that if a sample design is too detailed or precise, viewers are more likely to fixate on details like the specific font size or colors used, rather than on “bigger picture” questions about layout and meaning. Sketching your visualization ideas out on paper (or a whiteboard) as a first step also offers an effective way to try out a variety of visual forms for your data while also being fast, cheap, and easy.</p>&#13;
&#13;
<p>Personally, I find that making a sketch helps me see more quickly whether a given visual form (say, a bar chart) really illustrates the relationship among data elements that I need it to. It also makes it easy to consider—and change—things like the data highlights, annotations, scales, and axis labels that often constitute the difference between a serviceable graphic and an excellent one. I also find that starting with a pen or pencil makes generating the final (digital) visualization two to three times faster when it eventually is time to start coding.</p>&#13;
&#13;
<p>One tip about this process: don’t worry about painstakingly accounting for every single data point when you make these sketches. What you want is to get a general feel for what type of visualization will work best for your data, and to make key decisions about what will be highlighted and what will be left off. Even without precise data values at hand, sketching out your ideas will allow you to review, share, and get input on them in ways that you won’t be able to once you’ve committed your ideas to code.</p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Elements of Eloquent Visuals" data-type="sect1"><div class="sect1" id="elementsofeloquentvisuals">&#13;
<h1>Elements of Eloquent Visuals</h1>&#13;
&#13;
<p>Although I have been an information designer for most of my career, I do not consider myself a true graphic designer. I cannot make you a good logo for your business, any more than you—having now learned a decent amount about Python programming—can troubleshoot a printer problem. Fortunately, through study, lots of reading, a few courses, and the generosity of the many talented designers with whom I’ve worked, I’ve learned a fair bit about effective visual design in general, and information design in particular. My takeaways from a couple of decades in the work are outlined here.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The “Finicky” Details Really Do Make a Difference" data-type="sect2"><div class="sect2" id="idm45143394241440">&#13;
<h2>The “Finicky” Details Really Do Make a Difference</h2>&#13;
&#13;
<p>A million <a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-tertiary="attention to detail" data-type="indexterm" id="idm45143394240144"/><a data-primary="eloquent graphics" data-secondary="attention to detail" data-type="indexterm" id="idm45143394238592"/>years ago, when I first started working as a frontend programmer for a web startup, my number-one priority was to make things that <em>worked</em>—and let me tell you, I was <em>really</em> glad when they did. Over time, I even refined and refactored my code in some of the same ways we did in <a data-type="xref" href="ch08.html#chapter8">Chapter 8</a>, and I was pretty happy with those programming artifacts. From the perspective of a programmer, my work was pretty clean.</p>&#13;
&#13;
<p>But I worked on a <em>design</em> team, and the designers I worked with were always pushing me to tweak little details that seemed to me more on the side of “nice to have,” rather than essential. Did it <em>really</em> matter if the photos in a slideshow slowed down or rebounded just a bit as they slid into place? At the time, coding up effects like that meant writing and tweaking (very approximate) physics equations, which I did not love. Plus, all those customizations were cluttering up my code.</p>&#13;
&#13;
<p>But one of the things I like most about programming is problem-solving, so eventually I hunkered down and made the changes they asked for. And once I saw it in action, I realized how much more polished and satisfying the end result really was. I began to appreciate that the <em>quality</em> of the design was in those “little” details and that “finicky” things—like a color change on tap or click—actually made my interfaces and graphics both clearer and more usable. In other words, don’t dismiss the design “details”—they’re not just about making things “look pretty.” <em>Design is how it works.</em></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Trust Your Eyes (and the Experts)" data-type="sect2"><div class="sect2" id="idm45143394231680">&#13;
<h2>Trust Your Eyes (and the Experts)</h2>&#13;
&#13;
<p>Visual <a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-tertiary="colors in" data-type="indexterm" id="visual-eloquent-color"/><a data-primary="eloquent graphics" data-secondary="colors in" data-type="indexterm" id="eloquent-color"/><a data-primary="colors" data-secondary="choosing for visualizations" data-type="indexterm" id="color-choosing"/>elements rendered digitally are necessarily expressed in quantitative terms: the mathematical origins of <a href="https://computerhope.com/htmcolor.htm">hexadecimal color codes</a> and x/y coordinate positioning might make it seem like finding the “correct” colors for a chart or the right positioning for an annotation label is a matter of doing the right math. It isn’t. Color perception, for example, is both complex and highly individual—we can’t really be sure that other people are seeing “the same” color that we are—and, of course, there are many types of color “blindness” that may prevent <a data-primary="colors" data-secondary="accessibility" data-type="indexterm" id="idm45143394224432"/><a data-primary="accessibility" data-secondary="of colors" data-secondary-sortas="colors" data-type="indexterm" id="idm45143394223456"/>some people from perceiving the difference between certain pairs of complementary colors (e.g., red/green, blue/orange, yellow/purple) at all. There is no equation that can account for that.</p>&#13;
&#13;
<p>In fact, every “color” that we might work with is, in fact, characterized by three different properties: hue<a data-primary="hue (of colors)" data-type="indexterm" id="idm45143394221392"/><a data-primary="brightness (of colors)" data-type="indexterm" id="idm45143394220688"/><a data-primary="luminosity (in visualizations)" data-type="indexterm" id="idm45143394220016"/><a data-primary="saturation (of colors)" data-type="indexterm" id="idm45143394219328"/><a data-primary="colors" data-secondary="properties of" data-type="indexterm" id="idm45143394218656"/> (for example red versus blue), brightness (or luminosity), and saturation. Colors that “go” together align or contrast across these features in very particular ways. When it comes to visualizations, of course, we need colors to do much more than just look good together; they have to <em>meaningfully encode</em> information. But what does it mean for a color to be “20% more blue” than another? Whatever it is, it’s not just a matter of flipping some numbers in your hexadecimal color value.<sup><a data-type="noteref" href="ch10.html#idm45143394216688" id="idm45143394216688-marker">9</a></sup></p>&#13;
&#13;
<p>Luckily, we have the help of experts. For more than two decades, anyone looking for color advice (mostly for maps, though it is also a great place to start for other types of charts) has been able to turn to the work of <a href="http://personal.psu.edu/cab38">Cynthia Brewer</a>, a cartographer and professor of geography at Penn State, whose <a href="https://colorbrewer2.org">ColorBrewer</a> tool provides excellent, free color distributions for visual design. Likewise, Dona Wong’s excellent book <em>The Wall Street Journal Guide to Information Graphics</em> (Norton) includes some of my personal favorites when it comes to color combinations for graphics.</p>&#13;
&#13;
<p>If you feel really strongly about choosing your own color palette, then the next best approach is to turn to the greatest color authority we’ve got: nature. Find a photograph of the natural world (photos of flowers often work particularly well), and use a color capture tool to select contrasting colors, if you need them, or several shades of a single color. Use these to update the defaults on almost any visualization package, and you’ll appreciate how much more appealing and professional-looking your graphic has become.</p>&#13;
&#13;
<p>When it comes to things like font size and label placement, there are also no equations to follow—you mostly just have to <em>look</em> at your graphic and then nudge things around if they don’t seem quite right. For example, I clearly remember coding up one of my colleague’s designs at <em>The Wall Street Journal</em>, which contained a list of items in the layout, and naturally I had written a <code>for</code> loop to place them precisely. The problem was, something looked off when I ran the code and rendered it. Convinced that I just had estimated the spacing poorly, I asked him how many pixels of white space there should be between each element. “I don’t know,” he said, “I just looked &#13;
<span class="keep-together">at it</span>.”</p>&#13;
&#13;
<p class="pagebreak-before less_space">While I recognize that this kind of advice can be frustrating when you’re just starting out with visual design, I can also promise that if you give yourself some time to experiment, you’ll eventually learn to trust your <em>own</em> eyes. With that, some practice, and attention to the (well-defined) details laid out in the following sections, you’ll soon be producing visualizations that are both accurate <em>and</em> eloquent.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Selecting Scales" data-type="sect2"><div class="sect2" id="selecting_scales">&#13;
<h2>Selecting Scales</h2>&#13;
&#13;
<p>Throughout <a data-type="xref" href="#charts_graphs_maps">“Charts, Graphs, and Maps: Oh My!”</a>, we<a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-tertiary="scales for" data-type="indexterm" id="idm45143394204560"/><a data-primary="eloquent graphics" data-secondary="scales for" data-type="indexterm" id="idm45143394203008"/><a data-primary="scales, choosing for visualizations" data-type="indexterm" id="idm45143394202064"/> addressed the issue of scale with respect to the <em>accuracy</em> of our visualizations; here our focus is on clarity and readability. Packages like <em>seaborn</em> and <em>matplotlib</em> will automatically choose scales and axis limits based on your data, but these defaults may need tweaking for a variety of reasons. Once you’ve confirmed the appropriate <em>numerical</em> range for your data, you’ll want to review how your graphic is actually rendering and make sure that it is also following these general rules:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Axis limits and marked values should be whole numbers and/or multiples of 5 &#13;
<span class="keep-together">or 10.</span></p>&#13;
</li>&#13;
<li>&#13;
<p>Value labels should <em>not</em> be in scientific notation.</p>&#13;
</li>&#13;
<li>&#13;
<p>Units should only appear on the last element of each axis.</p>&#13;
</li>&#13;
<li>&#13;
<p>Though not ideal, labels may need to be edited or (less preferably) angled in order to remain readable.</p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Choosing Colors" data-type="sect2"><div class="sect2" id="idm45143394193600">&#13;
<h2>Choosing Colors</h2>&#13;
&#13;
<p>In addition to seeking expert advice on specific color selection, consider how many colors your data elements should have. Color can be an invaluable way to highlight a specific data point or distinguish between measured and projected values. When selecting colors for your chart or graph, remember:</p>&#13;
<dl>&#13;
<dt>One color per data category</dt>&#13;
<dd>&#13;
<p>If you are displaying several months of data about the PPP loan program, for example, all of the bars should be the <em>same</em> color. Likewise, different values of the same variable should be shades of a single color.</p>&#13;
</dd>&#13;
<dt>Avoid continuous color distributions</dt>&#13;
<dd>&#13;
<p>While adjusting the color of each visual element according to its value may <em>seem</em> more precise, like the visual compression of data we saw in <a data-type="xref" href="#bad_wage_math_flat">Figure 10-5</a>, continuous color palettes (or <em>ramps</em>) generate color differences so small that the human eye cannot really perceive them. This is where your distribution calculations (you <em>did</em> do those, right?) will come in handy: create a color scale (or <em>ramp</em>) of up to five colors and then assign each one to a single <em>quintile</em> of your data.<sup><a data-type="noteref" href="ch10.html#idm45143394184624" id="idm45143394184624-marker">10</a></sup></p>&#13;
</dd>&#13;
<dt>Use diverging color scales with care</dt>&#13;
<dd>&#13;
<p>Diverging color scales are really only suitable when there is a true “neutral” value that the data varies around. In some cases, this may be zero. In others, it may be an agreed-upon value in the field (for example, the US Federal Reserve views an inflation rate of <a href="https://federalreserve.gov/faqs/5D58E72F066A4DBDA80BBA659C55F774.htm">about 2%</a> to be ideal).</p>&#13;
</dd>&#13;
<dt>Never color-code more than four distinct categories of data</dt>&#13;
<dd>&#13;
<p>But, including contextual data in a background gray is fine.</p>&#13;
</dd>&#13;
<dt>Test for color accessibility</dt>&#13;
<dd>&#13;
<p>Tools like ColorBrewer include<a data-primary="colors" data-secondary="accessibility" data-type="indexterm" id="idm45143394175168"/><a data-primary="accessibility" data-secondary="of colors" data-secondary-sortas="colors" data-type="indexterm" id="idm45143394174192"/> an option to produce only colorblind-safe combinations. If you are using your own colors, test your selections by converting your graphic to grayscale. If you can still distinguish all the colors in your visualization, your readers should be<a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-startref="visual-eloquent-color" data-tertiary="colors in" data-type="indexterm" id="idm45143394172592"/><a data-primary="eloquent graphics" data-secondary="colors in" data-startref="eloquent-color" data-type="indexterm" id="idm45143394170832"/><a data-primary="colors" data-secondary="choosing for visualizations" data-startref="color-choosing" data-type="indexterm" id="idm45143394169616"/> able to also.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Above All, Annotate!" data-type="sect2"><div class="sect2" id="idm45143394167952">&#13;
<h2>Above All, Annotate!</h2>&#13;
&#13;
<p>The goal<a data-primary="visualizations" data-secondary="as eloquent graphics" data-secondary-sortas="eloquent graphics" data-tertiary="annotations in" data-type="indexterm" id="idm45143394166688"/><a data-primary="eloquent graphics" data-secondary="annotations in" data-type="indexterm" id="idm45143394165136"/><a data-primary="annotations in visualizations" data-type="indexterm" id="idm45143394164192"/> of our visualization process is to share our data insights and support our claims. While our action-verb headline should encapsulate the main idea of our graphic, it is often valuable to highlight or add context to specific data points within the visualization itself. This is <em>not</em> the place for asterisks and footnotes. Information needed to accurately or effectively understand the graphic needs to be part of the graphic’s main visual field. Some of the key ways you can make the data within your visualization easier to understand include the following:</p>&#13;
<dl>&#13;
<dt>Label categorical differences directly</dt>&#13;
<dd>&#13;
<p>Rather than creating a separate legend, place data labels directly on the visualization. This saves readers from having to look back and forth between your graphic and a separate key to make sense of the information being presented.</p>&#13;
</dd>&#13;
<dt>Highlight relevant data points with color</dt>&#13;
<dd>&#13;
<p>If one key data point is central to your overall claim, highlight it in a contrasting color.</p>&#13;
</dd>&#13;
<dt>Add contextual annotations</dt>&#13;
<dd>&#13;
<p>These small amounts of text (connected to the relevant data element using a thin <em>leader</em> line, if necessary) could be a label, an explanation, or important contextual information. Whatever it is, make sure it appears as close to the data as possible and always within the visual bounds of the graphic itself.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="From Basic to Beautiful: Customizing a Visualization &#10;with seaborn and matplotlib" data-type="sect1"><div class="sect1" id="idm45143394156592">&#13;
<h1>From Basic to Beautiful: Customizing a Visualization &#13;
<span class="keep-together">with seaborn and matplotlib</span></h1>&#13;
&#13;
<p>One <a data-primary="visualizations" data-secondary="customizing with seaborn and matplotlib" data-type="indexterm" id="visual-custom"/><a data-primary="customizing visualizations" data-type="indexterm" id="custom-visuals"/><a data-primary="seaborn library" data-type="indexterm" id="seaborn-custom-visual"/><a data-primary="matplotlib library" data-secondary="customizing visualizations" data-type="indexterm" id="matplotlib-custom-visual"/>final word about design—visual or otherwise. While I made an effort in <a data-type="xref" href="#elementsofeloquentvisuals">“Elements of Eloquent Visuals”</a> to break down the elements of effective visualization into component parts, a truly eloquent graphic is not a collection of swappable parts. Shifting one part of it—moving a label, changing a color—means that many, if not all, of its remaining elements will need to be adjusted to bring the whole back into balance. This is precisely why I haven’t provided code examples for each individual design aspect outlined previously: seen in isolation, it can be hard to understand why any given element is so important. But viewed as part of a cohesive whole, it will (hopefully) become clear how each contributes to the impact of the graphic.</p>&#13;
&#13;
<p>To actually realize these customized visuals in Python, we are still going to be relying on the <em>seaborn</em> and <em>matplotlib</em> libraries. But while we let <em>seaborn</em> do most of the heavy lifting in previous instances, in this example, it’s the fine-grained control offered by <em>matplotlib</em> that will really shine. Yes, we’ll still let <em>seaborn</em> handle the high-level tasks, like actually plotting the data values to scale. But <em>matplotlib</em> will give us the leverage we need to specify everything from label placement and orientation to units, labeling, annotation, and highlighting values—everything we need to truly tailor our visualization to our claims.</p>&#13;
&#13;
<p>For this example, we’re going to take a break from the PPP data and instead work with some COVID-19 data collated by a team of researchers based on data from Johns Hopkins University and made available at <a href="https://ourworldindata.org/coronavirus-source-data">Our World in Data</a>.&#13;
Our goal with this visualization will be to highlight the spike in confirmed COVID-19 cases in the United States during July 2020, which at the time was attributed to the accelerated reopening<sup><a data-type="noteref" href="ch10.html#idm45143394142944" id="idm45143394142944-marker">11</a></sup> in many states earlier that spring<sup><a data-type="noteref" href="ch10.html#idm45143394140400" id="idm45143394140400-marker">12</a></sup> as well as gatherings over the July 4th holiday.<sup><a data-type="noteref" href="ch10.html#idm45143394137600" id="idm45143394137600-marker">13</a></sup> To understand the difference between relying on the defaults and customizing the axis ranges, labels, and colors, compare <a data-type="xref" href="#seaborn_defaults">Figure 10-10</a> to <a data-type="xref" href="#customized_visuals">Figure 10-11</a>. The code to produce <a data-type="xref" href="#customized_visuals">Figure 10-11</a> is shown in <a data-type="xref" href="#refined_covid_barchart">Example 10-5</a>.</p>&#13;
<div data-type="example" id="refined_covid_barchart">&#13;
<h5><span class="label">Example 10-5. </span>refined_covid_barchart.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># `pandas` for data loading; `seaborn` and `matplotlib` for visuals</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">pandas</code><code> </code><code class="kn">as</code><code> </code><code class="nn">pd</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">seaborn</code><code> </code><code class="kn">as</code><code> </code><code class="nn">sns</code><code>&#13;
</code><code class="kn">import</code><code> </code><code class="nn">matplotlib.pyplot</code><code> </code><code class="kn">as</code><code> </code><code class="nn">plt</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># `FuncFormatter` to format axis labels</code><code>&#13;
</code><code class="kn">from</code><code> </code><code class="nn">matplotlib.ticker</code><code> </code><code class="kn">import</code><code> </code><code class="n">FuncFormatter</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># `datetime` to interpret and customize dates</code><code>&#13;
</code><code class="kn">from</code><code> </code><code class="nn">datetime</code><code> </code><code class="kn">import</code><code> </code><code class="n">datetime</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># load the data</code><code>&#13;
</code><code class="n">vaccine_data</code><code> </code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">read_csv</code><code class="p">(</code><code class="s1">'</code><code class="s1">owid-covid-data.csv</code><code class="s1">'</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># convert the `date` column to a "real" date</code><code>&#13;
</code><code class="n">vaccine_data</code><code class="p">[</code><code class="s1">'</code><code class="s1">date</code><code class="s1">'</code><code class="p">]</code><code class="o">=</code><code> </code><code class="n">pd</code><code class="o">.</code><code class="n">to_datetime</code><code class="p">(</code><code class="n">vaccine_data</code><code class="p">[</code><code class="s1">'</code><code class="s1">date</code><code class="s1">'</code><code class="p">]</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># group the data by country and month</code><code>&#13;
</code><code class="n">country_and_month</code><code> </code><code class="o">=</code><code> </code><code class="n">vaccine_data</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="s1">'</code><code class="s1">iso_code</code><code class="s1">'</code><code class="p">)</code><code class="o">.</code><code class="n">resample</code><code class="p">(</code><code class="s1">'</code><code class="s1">M</code><code class="s1">'</code><code class="p">,</code><code>&#13;
</code><code>                                                              </code><code class="n">on</code><code class="o">=</code><code class="s1">'</code><code class="s1">date</code><code class="s1">'</code><code class="p">)</code><code class="o">.</code><code class="n">sum</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># use `reset_index()` to "flatten" the DataFrame headers</code><code>&#13;
</code><code class="n">country_and_month_update</code><code> </code><code class="o">=</code><code> </code><code class="n">country_and_month</code><code class="o">.</code><code class="n">reset_index</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># select just the United States' data</code><code>&#13;
</code><code class="n">just_USA</code><code> </code><code class="o">=</code><code> </code><code class="n">country_and_month_update</code><code class="p">[</code><code class="n">country_and_month_update</code><code class="p">[</code><code class="s1">'</code><code class="s1">iso_code</code><code class="s1">'</code><code class="p">]</code><code class="o">==</code><code class="s1">'</code><code class="s1">USA</code><code class="s1">'</code><code class="p">]</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># make the foundational barplot with `seaborn`</code><code>&#13;
</code><code class="n">ax</code><code> </code><code class="o">=</code><code> </code><code class="n">sns</code><code class="o">.</code><code class="n">barplot</code><code class="p">(</code><code class="n">x</code><code class="o">=</code><code class="s2">"</code><code class="s2">date</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">y</code><code class="o">=</code><code class="s2">"</code><code class="s2">new_cases</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">palette</code><code class="o">=</code><code class="p">[</code><code class="s1">'</code><code class="s1">#bababa</code><code class="s1">'</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">data</code><code class="o">=</code><code class="n">just_USA</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># loop through the bars rectangles and set the color for the July 2020</code><code>&#13;
</code><code class="c1"># bar to red</code><code>&#13;
</code><code class="k">for</code><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">bar</code><code> </code><code class="ow">in</code><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">ax</code><code class="o">.</code><code class="n">patches</code><code class="p">)</code><code class="p">:</code><code>&#13;
</code><code>    </code><code class="k">if</code><code> </code><code class="n">i</code><code> </code><code class="o">==</code><code> </code><code class="mi">6</code><code class="p">:</code><code>&#13;
</code><code>        </code><code class="n">bar</code><code class="o">.</code><code class="n">set_color</code><code class="p">(</code><code class="s1">'</code><code class="s1">#ca0020</code><code class="s1">'</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># set the maximum y-axis value to 7M</code><code>&#13;
</code><code class="n">ax</code><code class="o">.</code><code class="n">set_ylim</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="mi">7000000</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># setting the axis labels</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">xlabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">Month</code><code class="s1">'</code><code class="p">)</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">ylabel</code><code class="p">(</code><code class="s1">'</code><code class="s1">New cases (M)</code><code class="s1">'</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># modify the color, placement and orientation of the "tick labels"</code><code>&#13;
</code><code class="n">ax</code><code class="o">.</code><code class="n">tick_params</code><code class="p">(</code><code class="n">direction</code><code class="o">=</code><code class="s1">'</code><code class="s1">out</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">length</code><code class="o">=</code><code class="mi">5</code><code class="p">,</code><code> </code><code class="n">width</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">#404040</code><code class="s1">'</code><code class="p">,</code><code>&#13;
</code><code>               </code><code class="n">colors</code><code class="o">=</code><code class="s1">'</code><code class="s1">#404040</code><code class="s1">'</code><code class="p">,</code><code class="n">pad</code><code class="o">=</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">grid_color</code><code class="o">=</code><code class="s1">'</code><code class="s1">#404040</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">grid_alpha</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code>&#13;
</code><code>               </code><code class="n">rotation</code><code class="o">=</code><code class="mi">45</code><code class="p">)</code><code> </code><a class="co" href="#callout_presenting_your_data_CO4-1" id="co_presenting_your_data_CO4-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># functions for formatting the axis "tick labels"</code><code>&#13;
</code><code class="c1"># `millions()` will convert the scientific notation to millions of cases</code><code>&#13;
</code><code class="k">def</code><code> </code><code class="nf">millions</code><code class="p">(</code><code class="n">val</code><code class="p">,</code><code> </code><code class="n">pos</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" href="#callout_presenting_your_data_CO4-2" id="co_presenting_your_data_CO4-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">modified_val</code><code> </code><code class="o">=</code><code> </code><code class="n">val</code><code class="o">*</code><code class="mf">1e-6</code><code>&#13;
</code><code>    </code><code class="n">formatted_val</code><code> </code><code class="o">=</code><code> </code><code class="nb">str</code><code class="p">(</code><code class="n">modified_val</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="k">if</code><code> </code><code class="n">val</code><code> </code><code class="o">==</code><code> </code><code class="n">ax</code><code class="o">.</code><code class="n">get_ylim</code><code class="p">(</code><code class="p">)</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="p">:</code><code>&#13;
</code><code>        </code><code class="n">formatted_val</code><code> </code><code class="o">=</code><code> </code><code class="n">formatted_val</code><code class="o">+</code><code class="s1">'</code><code class="s1">M</code><code class="s1">'</code><code>&#13;
</code><code>    </code><code class="k">if</code><code> </code><code class="n">val</code><code> </code><code class="o">==</code><code> </code><code class="mi">0</code><code class="p">:</code><code>&#13;
</code><code>        </code><code class="n">formatted_val</code><code> </code><code class="o">=</code><code> </code><code class="s2">"</code><code class="s2">0</code><code class="s2">"</code><code>&#13;
</code><code>    </code><code class="k">return</code><code> </code><code class="n">formatted_val</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># `custom_dates()` will abbreviate the dates to be more readable</code><code>&#13;
</code><code class="k">def</code><code> </code><code class="nf">custom_dates</code><code class="p">(</code><code class="n">val</code><code class="p">,</code><code> </code><code class="n">pos</code><code class="p">)</code><code class="p">:</code><code> </code><a class="co" href="#callout_presenting_your_data_CO4-2" id="co_presenting_your_data_CO4-3"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">dates_list</code><code> </code><code class="o">=</code><code> </code><code class="n">just_USA</code><code class="o">.</code><code class="n">date</code><code class="o">.</code><code class="n">tolist</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="n">date_label</code><code> </code><code class="o">=</code><code> </code><code class="s2">"</code><code class="s2">"</code><code>&#13;
</code><code>    </code><code class="k">if</code><code> </code><code class="n">pos</code><code> </code><code class="ow">is</code><code> </code><code class="ow">not</code><code> </code><code class="bp">None</code><code class="p">:</code><code> </code><a class="co" href="#callout_presenting_your_data_CO4-3" id="co_presenting_your_data_CO4-4"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="n">current_value</code><code> </code><code class="o">=</code><code> </code><code class="n">dates_list</code><code class="p">[</code><code class="n">pos</code><code class="p">]</code><code>&#13;
</code><code>        </code><code class="n">current_month</code><code> </code><code class="o">=</code><code> </code><code class="n">datetime</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><code class="n">current_value</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">%</code><code class="s1">b</code><code class="s1">'</code><code class="p">)</code><code>&#13;
</code><code>        </code><code class="n">date_label</code><code> </code><code class="o">=</code><code> </code><code class="n">current_month</code><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="n">date_label</code><code> </code><code class="o">==</code><code> </code><code class="s1">'</code><code class="s1">Jan</code><code class="s1">'</code><code class="p">:</code><code>&#13;
</code><code>            </code><code class="n">date_label</code><code> </code><code class="o">=</code><code> </code><code class="n">date_label</code><code> </code><code class="o">+</code><code> </code><code class="s2">"</code><code class="s2"> </code><code class="s2">'</code><code class="s2">"</code><code class="o">+</code><code> </code><code class="n">datetime</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><code class="n">current_value</code><code class="p">,</code><code>&#13;
</code><code>                                                              </code><code class="s1">'</code><code class="s1">%</code><code class="s1">y</code><code class="s1">'</code><code class="p">)</code><code>&#13;
</code><code>    </code><code class="k">return</code><code> </code><code class="n">date_label</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># assign formatter functions</code><code>&#13;
</code><code class="n">y_formatter</code><code> </code><code class="o">=</code><code> </code><code class="n">FuncFormatter</code><code class="p">(</code><code class="n">millions</code><code class="p">)</code><code>&#13;
</code><code class="n">x_formatter</code><code> </code><code class="o">=</code><code> </code><code class="n">FuncFormatter</code><code class="p">(</code><code class="n">custom_dates</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># apply the formatter functions to the appropriate axis</code><code>&#13;
</code><code class="n">ax</code><code class="o">.</code><code class="n">yaxis</code><code class="o">.</code><code class="n">set_major_formatter</code><code class="p">(</code><code class="n">y_formatter</code><code class="p">)</code><code>&#13;
</code><code class="n">ax</code><code class="o">.</code><code class="n">xaxis</code><code class="o">.</code><code class="n">set_major_formatter</code><code class="p">(</code><code class="n">x_formatter</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># create and position the annotation text</code><code>&#13;
</code><code class="n">ax</code><code class="o">.</code><code class="n">text</code><code class="p">(</code><code class="mi">4</code><code class="p">,</code><code> </code><code class="mi">3000000</code><code class="p">,</code><code> </code><code class="s2">"</code><code class="s2">Confirmed cases</code><code class="se">\n</code><code class="s2">often lag infection</code><code class="se">\n</code><code class="s2">by several weeks.</code><code class="s2">"</code><code class="p">)</code><code> </code><a class="co" href="#callout_presenting_your_data_CO4-4" id="co_presenting_your_data_CO4-5"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>&#13;
</code><code class="c1"># get the value of all bars as a list</code><code>&#13;
</code><code class="n">bar_value</code><code> </code><code class="o">=</code><code> </code><code class="n">just_USA</code><code class="o">.</code><code class="n">new_cases</code><code class="o">.</code><code class="n">tolist</code><code class="p">(</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># create the leader line</code><code>&#13;
</code><code class="n">ax</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code> </code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="mi">6</code><code class="p">,</code><code> </code><code class="n">color</code><code class="o">=</code><code class="s1">'</code><code class="s1">#404040</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">linewidth</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">alpha</code><code class="o">=</code><code class="o">.</code><code class="mi">7</code><code class="p">,</code><code>&#13;
</code><code>                         </code><code class="n">ymin</code><code> </code><code class="o">=</code><code> </code><code class="n">bar_value</code><code class="p">[</code><code class="mi">6</code><code class="p">]</code><code class="o">+</code><code class="mi">100000</code><code class="p">,</code><code> </code><code class="n">ymax</code><code> </code><code class="o">=</code><code> </code><code class="mi">3000000</code><code class="o">-</code><code class="mi">100000</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># set the title of the chart</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">title</code><code class="p">(</code><code class="s2">"</code><code class="s2">COVID-19 cases spike following relaxed restrictions</code><code class="se">\n</code><code class="s2">"</code><code> </code><code class="o">+</code><code> </code><code>\&#13;
</code><code>          </code><code class="s2">"</code><code class="s2">in the spring of 2020</code><code class="s2">"</code><code class="p">,</code><code> </code><code class="n">fontweight</code><code class="o">=</code><code class="s2">"</code><code class="s2">bold</code><code class="s2">"</code><code class="p">)</code><code>&#13;
</code><code>&#13;
</code><code class="c1"># show the chart!</code><code>&#13;
</code><code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">(</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_presenting_your_data_CO4-1" id="callout_presenting_your_data_CO4-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Customizing the orientation, color, and other attributes of the “tick labels” that indicate the values on each axis of the chart can be done via the <em>matplotlib</em> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html"><code>tick_params()</code> method</a>.</p></dd>&#13;
<dt><a class="co" href="#co_presenting_your_data_CO4-2" id="callout_presenting_your_data_CO4-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>The arguments that are supplied to any custom function assigned to any <code>FuncFormatter</code> function will be “value” and “tick” position.</p></dd>&#13;
<dt><a class="co" href="#co_presenting_your_data_CO4-4" id="callout_presenting_your_data_CO4-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>In “interactive mode,” this function will throw errors if <code>pos</code> is <code>None</code>.</p></dd>&#13;
<dt><a class="co" href="#co_presenting_your_data_CO4-5" id="callout_presenting_your_data_CO4-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>By default, the positioning of <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.text.html">text elements layered on top of the chart</a> is “data coordinates,” e.g., a value of 1 will left-align the start of the text with the center point of the first column. The provided “y” value anchors the <em>bottom</em> of the text box.</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="seaborn_defaults">&#13;
<img alt="Basic seaborn chart." src="assets/ppdw_1010.png"/>&#13;
<h6><span class="label">Figure 10-10. </span>Bar chart produced by visualization library defaults</h6>&#13;
</div></figure>&#13;
&#13;
<figure><div class="figure" id="customized_visuals">&#13;
<img alt="Customized visualization" src="assets/ppdw_1011.png"/>&#13;
<h6><span class="label">Figure 10-11. </span>Customized visualization</h6>&#13;
</div></figure>&#13;
&#13;
<p>As you can see from <a data-type="xref" href="#refined_covid_barchart">Example 10-5</a>, the process of customizing our visualization in Python is somewhat involved; tailoring the look and feel of the default output has nearly tripled the lines of code required.</p>&#13;
&#13;
<p>At the same time, the default output in this instance was basically illegible.  By softening the colors, highlighting salient data points, and (perhaps most importantly) refining our data labels, we’ve managed to create a chart that could hold its own in most publication contexts. And obviously a good chunk of the code we have in here could be refined and repurposed to make this degree of customization a much less bespoke effort for <a data-primary="visualizations" data-secondary="customizing with seaborn and matplotlib" data-startref="visual-custom" data-type="indexterm" id="idm45143393570720"/><a data-primary="customizing visualizations" data-startref="custom-visuals" data-type="indexterm" id="idm45143393569408"/><a data-primary="seaborn library" data-startref="seaborn-custom-visual" data-type="indexterm" id="idm45143393568448"/><a data-primary="matplotlib library" data-secondary="customizing visualizations" data-startref="matplotlib-custom-visual" data-type="indexterm" id="idm45143393567504"/>future graphics.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Beyond the Basics" data-type="sect1"><div class="sect1" id="idm45143394156000">&#13;
<h1>Beyond the Basics</h1>&#13;
&#13;
<p>While I’ve <a data-primary="visualizations" data-secondary="critiquing others' work" data-type="indexterm" id="idm45143393564416"/><a data-primary="unemployment example" data-type="indexterm" id="unemployment-visual"/>aimed to cover the essentials of effective and accurate data visualization in this chapter, the truth is that valuable visualization ideas can come from anywhere—not just books or blogs that are dedicated to the topic. One of my favorite graphics from my time at <em>The Wall Street Journal</em> is <a href="https://jennifervalentinodevries.com/2009/09/16/grid-graphic-u-s-unemployment-rate">the unemployment visualization</a> shown in <a data-type="xref" href="#unemployment_grid">Figure 10-12</a>, which was inspired by a similar form I encountered at a museum exhibit about climate change; the geometric heatmap format allows readers to visually compare decades of monthly unemployment rates at a glance. If you’re interested in design, you can learn a lot about what does (and doesn’t) work by simply looking critically at the media you see around you every day—whether it’s an online advertisement or a restaurant menu. If something doesn’t feel polished or appealing, look carefully at its components. Are the colors incongruous? Is the typeface hard to read? Or are there just too many things crowded together into too small a space?</p>&#13;
&#13;
<p>Critiquing the work of others is easy, of course. If you really want to improve your own visualizations, challenge yourself to try to build better solutions, and you’ll learn an enormous amount along the way. And if you find yourself searching for the right vocabulary to describe what isn’t working, you may want to look through some of the resources in <a data-type="xref" href="app04.html#appendix_d">Appendix D</a>, where you’ll find some of my favorite resources for expanding and improving my own visualization work.</p>&#13;
&#13;
<figure><div class="figure" id="unemployment_grid">&#13;
<img alt="US Unemployment Over Time." src="assets/ppdw_1012.png"/>&#13;
<h6><span class="label">Figure 10-12. </span>US unemployment over time (originally designed for <em>The Wall Street Journal</em>)</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Conclusion" data-type="sect1"><div class="sect1" id="idm45143393555216">&#13;
<h1>Conclusion</h1>&#13;
&#13;
<p>Like <a data-primary="unemployment example" data-startref="unemployment-visual" data-type="indexterm" id="idm45143393553616"/>programming, visualization is an applied art: the only way to get better at it is to <em>do</em> it. If you don’t have a project at hand to work on, start with a “found” visualization that you think is somehow subpar and redesign it yourself. You can use Python or other computational tools or just a pencil and paper—the point is to try to solve the problems you see in the original. Along the way, you’ll experience firsthand the trade-offs inherent in every design decision, and you’ll start building the skills needed to minimize those trade-offs in service of your visualization goals. Then when you’re faced with your own data visualization challenges, you’ll have a portfolio of prior work you can refer to when thinking about how best to present the data you have and make the point that you need to.</p>&#13;
&#13;
<p>At this point, we’ve done just about all the data wrangling with Python that we set out to do—but there is a world of data and visualization tools <em>beyond</em> Python that can be amazingly useful in supporting your data wrangling and data quality work right alongside it. We’ll turn to those in <a data-type="xref" href="ch11.html#chapter11">Chapter 11</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45143395782464"><sup><a href="ch10.html#idm45143395782464-marker">1</a></sup> Of which a histogram is a special type.</p><p data-type="footnote" id="idm45143395497264"><sup><a href="ch10.html#idm45143395497264-marker">2</a></sup> Particularly if you give yourself credit for <a href="https://merriam-webster.com/dictionary/linking%20verb"><em>linking verbs</em></a>.</p><p data-type="footnote" id="idm45143395160848"><sup><a href="ch10.html#idm45143395160848-marker">3</a></sup> Though even those few are often are violated publicly and frequently, e.g., Junk Chart’s <a href="https://junkcharts.typepad.com/junk_charts/2021/06/start-at-zero-improves-this-chart-but-only-slightly.html">“Start at Zero Improves This Chart but Only Slightly”</a>.</p><p data-type="footnote" id="idm45143395804112"><sup><a href="ch10.html#idm45143395804112-marker">4</a></sup> Since both the <em>pandas</em> and <em>seaborn</em> libraries rely heavily on <em>matplotlib</em>, there are many instances where significant customization requires using <em>matplotlib</em> features directly, as we’ll see in more detail in <a data-type="xref" href="#elementsofeloquentvisuals">“Elements of Eloquent Visuals”</a>.</p><p data-type="footnote" id="idm45143395798752"><sup><a href="ch10.html#idm45143395798752-marker">5</a></sup> Obviously, we could simply reverse the order in which we originally specified the data, but I prefer to have the data order and the eventual visual order match up.</p><p data-type="footnote" id="idm45143395440176"><sup><a href="ch10.html#idm45143395440176-marker">6</a></sup> “The Hockey Stick: The Most Controversial Chart in Science, Explained” by Chris Mooney, <a href="https://theatlantic.com/technology/archive/2013/05/the-hockey-stick-the-most-controversial-chart-in-science-explained/275753"><em class="hyperlink">https://theatlantic.com/technology/archive/2013/05/the-hockey-stick-the-most-controversial-chart-in-science-explained/275753</em></a>; that said, <a href="http://voices.washingtonpost.com/ezra-klein/2009/07/when_health-care_reform_stops.html">organizational charts</a> have also (expletive warning) <a href="https://flickr.com/photos/robertpalmer/3743826461">had their day</a>.</p><p data-type="footnote" id="idm45143395430576"><sup><a href="ch10.html#idm45143395430576-marker">7</a></sup> For more, see Wong’s <em>The Wall Street Journal Guide to Information Graphics</em> (Norton).</p><p data-type="footnote" id="idm45143395284112"><sup><a href="ch10.html#idm45143395284112-marker">8</a></sup> Megan Boldt et al., “Schools That Work: Despite Appearances, Schools Doing Better than Expected Have Traits in Common,” July 9, 2010, <a href="https://twincities.com/2010/07/09/schools-that-work-despite-appearances-schools-doing-better-than-expected-have-traits-in-common"><em class="hyperlink">https://twincities.com/2010/07/09/schools-that-work-despite-appearances-schools-doing-better-than-expected-have-traits-in-common</em></a>.</p><p data-type="footnote" id="idm45143394216688"><sup><a href="ch10.html#idm45143394216688-marker">9</a></sup> Believe me, I’ve tried.</p><p data-type="footnote" id="idm45143394184624"><sup><a href="ch10.html#idm45143394184624-marker">10</a></sup> You can accomplish this quickly in <em>pandas</em> by using the <code>quantile()</code> function and passing in the values <code>0.2</code>, <code>0.4</code>, <code>0.6</code>, and so on. For a more general refresher on how to calculate these values and what they represent, see <a data-type="xref" href="ch09.html#ppp_loan_central_and_dist">Example 9-3</a> in <a data-type="xref" href="ch09.html#chapter9">Chapter 9</a></p><p data-type="footnote" id="idm45143394142944"><sup><a href="ch10.html#idm45143394142944-marker">11</a></sup> Lazaro Gamio, “How Coronavirus Cases Have Risen Since States Reopened,” <em>The New York Times</em>, July 9, 2020, <a href="https://nytimes.com/interactive/2020/07/09/us/coronavirus-cases-reopening-trends.html"><em class="hyperlink">https://nytimes.com/interactive/2020/07/09/us/coronavirus-cases-reopening-trends.html</em></a>.</p><p data-type="footnote" id="idm45143394140400"><sup><a href="ch10.html#idm45143394140400-marker">12</a></sup> Anne Gearan, Derek Hawkins, and Siobhán O’Grady, “Coronavirus Cases Rose by Nearly 50 Percent Last Month, Led by States That Reopened First,” <em>The Washington Post</em>, July 1, 2020, <a href="https://washingtonpost.com/politics/coronavirus-cases-rose-by-nearly-50-percent-last-month-led-by-states-that-reopened-first/2020/07/01/3337f1ec-bb96-11ea-80b9-40ece9a701dc_story.html"><em class="hyperlink">https://washingtonpost.com/politics/coronavirus-cases-rose-by-nearly-50-percent-last-month-led-by-states-that-reopened-first/2020/07/01/3337f1ec-bb96-11ea-80b9-40ece9a701dc_story.html</em></a>.</p><p data-type="footnote" id="idm45143394137600"><sup><a href="ch10.html#idm45143394137600-marker">13</a></sup> Mark Olalde and Nicole Hayden, “California COVID-19 Cases Spiked after July 4th. Family Gatherings Helped the Spread, Experts Say.” <em>USA Today</em>, August 2, 2020, <a href="https://usatoday.com/story/news/nation/2020/08/02/covid-19-spike-california-after-july-4-linked-family-gatherings/5569158002"><em class="hyperlink">https://usatoday.com/story/news/nation/2020/08/02/covid-19-spike-california-after-july-4-linked-family-gatherings/5569158002</em></a>.</p></div></div></section></body></html>