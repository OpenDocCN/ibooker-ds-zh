- en: Chapter 11\. Introduction to Moderation
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第11章\. 温和性介绍
- en: One of the most gratifying aspects of combining the causal and behavioral perspectives
    is that things that may seem entirely unrelated under one of them can turn out
    to be the exact same thing under the other. More simply put, when you have the
    right hammer, a lot of things *are indeed nails*.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 将因果和行为视角结合的最令人满意的方面之一是，一个在一种视角下看起来完全无关的事物在另一种视角下可能是完全相同的事物。简单来说，当你有合适的工具时，很多事情*确实都是钉子*。
- en: 'So far, we’ve used causal diagrams to understand what drives behaviors on average:
    if temperature increases by one degree, keeping all the relevant other variables
    constant, by how much do sales of ice cream in C-Mart stands increase? But very
    often, we’re not just interested in that grand average, and we would like to break
    it down further:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经使用因果图来理解平均情况下行为的驱动因素：如果温度升高一度，保持所有相关变量恒定，C-Mart冰淇淋的销量会增加多少？但很多时候，我们不仅仅对那个总体平均感兴趣，我们希望进一步细分：
- en: Does that number apply equally to the stands in Texas and Wisconsin? If not,
    this means our data shows an opportunity for *segmentation*.
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个数字对德克萨斯州和威斯康星州的摊位适用吗？如果不是，这意味着我们的数据显示了*分段*的机会。
- en: Does that number apply equally for chocolate and vanilla ice cream? If not,
    this means that there is an *interaction* between temperature and ice cream flavor.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个数字对巧克力和香草冰淇淋适用吗？如果不是，这意味着温度和冰淇淋口味之间存在*交互作用*。
- en: Does that number apply equally at low and high temperatures? If not, this means
    that there is a *nonlinearity* in the effect of temperatures on sales.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个数字对低温和高温一样适用吗？如果不是，这意味着温度对销售的影响存在*非线性*。
- en: The hammer we’ll see in this chapter is called moderation analysis by social
    scientists, and it will allow us to address these three types of questions in
    the exact same way.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本章将看到的工具被社会科学家称为温和性分析，它将允许我们以完全相同的方式处理这三种类型的问题。
- en: In the first section after reviewing the data and packages for this chapter,
    we’ll do a tour of moderation and see how it can apply to a variety of behavioral
    situations. Because the math remains the same in all cases, I have gathered all
    practical and technical considerations to review in the last section.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在查看本章数据和软件包后的第一节，我们将进行温和性的介绍，并看看它如何适用于各种行为情况。因为数学在所有情况下保持不变，我已经收集了所有实际和技术考虑事项，将在最后一节进行审查。
- en: Data and Packages
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据和软件包
- en: The [GitHub folder for this chapter](https://oreil.ly/BehavioralDataAnalysisCh11)
    contains the CSV file *chap11-historical_data.csv* with the variables listed in
    [Table 11-1](#variables_in_our_data-id00084).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的[GitHub文件夹](https://oreil.ly/BehavioralDataAnalysisCh11)包含CSV文件*chap11-historical_data.csv*，其中列出了[表 11-1](#variables_in_our_data-id00084)中的变量。
- en: Table 11-1\. Variables in our data
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 表11-1\. 我们数据中的变量
- en: '| Variable name | Variable description |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| 变量名称 | 变量描述 |'
- en: '| --- | --- |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| *Day* | Day index, 1-20 |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| *天* | 天索引，1-20 |'
- en: '| *Store* | Store index, 1-50 |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| *商店* | 商店索引，1-50 |'
- en: '| *Children* | Binary 0/1, whether the customer is accompanied by young children
    |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| *儿童* | 二进制0/1，顾客是否带有幼儿 |'
- en: '| *Age* | Customer age, 20-80 |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| *年龄* | 客户年龄，20-80 |'
- en: '| *VisitDuration* | Duration of store visit in minutes, 3-103 |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| *访问持续时间* | 商店访问持续时间，单位为分钟，3-103 |'
- en: '| *PlayArea* | Binary 0/1, store level, whether the store has a play area |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| *游乐区* | 二进制0/1，店铺级别，店内是否设有游乐区 |'
- en: '| *GroceriesPurchases* | Amount spent on groceries purchases during visit in
    dollars, 0-324 |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| *杂货购买* | 每次访问中在杂货购买上的花费，单位为美元，0-324 |'
- en: In this chapter, we’ll only use the common packages so there are no chapter-specific
    ones.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们只会使用通用软件包，没有特定于章节的软件包。
- en: Behavioral Varieties of Moderation
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 温和性的行为类型
- en: 'The formal definition of moderation is extremely simple: it’s the inclusion
    in a regression of a multiplication between two predictors. For example, I suggested
    earlier that sales of ice cream may increase more or less per degree of temperature
    in Texas and Wisconsin; this would be expressed mathematically as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 温和的正式定义非常简单：它是回归中两个预测变量的乘积。例如，我先前建议过冰淇淋的销售在德克萨斯州和威斯康星州可能会因温度每升高一度而有所增加或减少；这在数学上可以表达如下：
- en: '*IceCreamSales* = *β[t]*.*Temperature* + *β[s].State* + *β[ts]*.(*Temperature*
    * *State*)'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '*冰淇淋销售* = *β[t]*.*温度* + *β[s].状态* + *β[ts]*.(*温度* * *状态*)'
- en: 'Moderation can be used to understand all of the following behavioral phenomena,
    which we’ll review in turn:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 温和性可用于理解以下所有行为现象，我们将依次审查：
- en: Segmentation
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分段
- en: Interactions
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 互动
- en: Nonlinearities (a.k.a. self-moderation)
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非线性（即自我调节）
- en: Segmentation
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分割
- en: Building relevant customer segments is a key task in marketing analytics, and
    more broadly business analytics. We’ll review how to do it with observational
    data, then with experimental data.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 建立相关的客户分段是市场分析的关键任务，也更广泛地是业务分析。我们将讨论如何在观察数据和实验数据中进行这项工作。
- en: Segmenting observational data
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 观察数据的分割
- en: 'Our starting point will be a C-Mart example: the company has recently introduced
    play areas in some of its stores and is interested in understanding how it affected
    customer visit duration. Regression analysis supported by causal diagrams gives
    us an average causal effect: across all the customer visits in our data, what
    is the effect on visit duration of having a play area in the store? However, averages
    can be misleading and hide large differences between segments of our population.
    For example, it makes sense to assume that the presence of a play area influences
    visit duration more for customers with children. How should we account for that
    in our regression? You might think that simply including *Children* as another
    predictor of *VisitDuration* would do the trick, as in [Figure 11-1](#including_children_as_a_predictor_of_vi).'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的起点将是 C-Mart 的例子：该公司最近在部分商店引入了游乐区，并且有兴趣了解它如何影响顾客的访问持续时间。由因果图支持的回归分析给出了一个平均因果效应：在我们的数据中所有顾客访问中，商店内有游乐区对访问持续时间的影响是什么？然而，平均值可能具有误导性，并且会隐藏我们人群各个分段之间的大差异。例如，可以合理假设对于有儿童的顾客，游乐区的存在更可能影响访问持续时间。在我们的回归分析中如何考虑这一点呢？您可能认为简单地将
    *Children* 作为 *VisitDuration* 的另一个预测因素包含进去就可以了，如图 [11-1](#including_children_as_a_predictor_of_vi)
    所示。
- en: '![Including Children as a predictor of VisitDuration](Images/BEDA_1101.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![包括 Children 作为 VisitDuration 的预测因素](Images/BEDA_1101.png)'
- en: Figure 11-1\. Including Children as a predictor of VisitDuration
  id: totrans-33
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-1\. 包括 Children 作为 VisitDuration 的预测因素
- en: 'The problem with that approach is that it accounts for the impact of *Children*
    on *VisitDuration*, *regardless of whether there is a play area or not*, and vice
    versa: when doing a regression, each variable is examined independently. Each
    coefficient is set such that overall residual distances are minimized, but the
    coefficients have to be the same for each variable regardless of the values of
    other variables. That means that the coefficient, and thus the measured effect,
    of *PlayArea* on *VisitDuration* is mathematically forced to be a weighted average
    of its effect for customers with and without children. Likewise, the effect of
    customers having children is measured as a weighted average of the effects when
    there is a play area present and when there is not. This can be confirmed by looking
    at the corresponding equations. The equation for the CD we just drew is shown
    in [Equation 11-1](#eqtn1) (including the constant coefficient *β*[0], which we
    usually omit for simplicity).'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 该方法的问题在于，它考虑了 *Children* 对 *VisitDuration* 的影响，*无论是否有游乐区*，反之亦然：在进行回归分析时，每个变量都是独立考虑的。每个系数都被设定为最小化总体残差距离，但系数必须对每个变量不考虑其他变量的值而言是相同的。这意味着，*PlayArea*
    对 *VisitDuration* 的系数及因此所测得的效应，在数学上被强制成为其在顾客有和没有儿童时的效应的加权平均。同样地，顾客有儿童对效应的测量，也被看作是顾客有游乐区和没有游乐区时效应的加权平均。这可以通过查看相应的方程来确认。我们刚刚画出的
    CD 方程显示在 [Equation 11-1](#eqtn1) 中（通常为简单起见，我们省略了常数系数 *β*[0]）。
- en: Equation 11-1\.
  id: totrans-35
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 11-1\.
- en: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children*'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children*'
- en: 'Because *PlayArea* and *Children* are both binary variables, we have four possible
    cases depending on whether each one of them is equal to 0 or 1:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 *PlayArea* 和 *Children* 都是二进制变量，所以根据它们是否等于 0 或 1，我们有四种可能的情况：
- en: '*β*[0] is the average visit duration for customers without children in stores
    without a play area (which we’ll abbreviate as C = 0, P = 0 for brevity).'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*β*[0] 是在没有儿童且没有游乐区的商店中顾客的平均访问持续时间（我们简称为 C = 0, P = 0）。'
- en: '*β*[0] + *β[c]* is the average visit duration for customers with children in
    stores without a play area (C = 1, P = 0).'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*β*[0] + *β[c]* 是在没有游乐区但有儿童的商店中顾客的平均访问持续时间（C = 1, P = 0）。'
- en: '*β*[0] + *β[p]* is the average visit duration for customers without children
    in stores with a play area (C = 0, P = 1).'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*β*[0] + *β[p]* 是在有游乐区但没有儿童的商店中顾客的平均访问持续时间（C = 0, P = 1）。'
- en: '*β*[0] + *β[p]* + *β[c]* is the average visit duration for customers with children
    in stores with a play area (C = 1, P = 1).'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*β*[0] + *β[p]* + *β[c]* 是带有孩子顾客在带有游乐区的商店（C = 1，P = 1）的平均访问持续时间。'
- en: 'This means that whether a customer has children with them or not doesn’t affect
    the impact of adding a play area, as we can easily check:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着无论顾客是否携带孩子，添加游乐区对影响都没有差异，我们可以轻松验证：
- en: 'If *Children* = 0, the impact of adding a play area is:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果*Children* = 0，添加游乐区的影响是：
- en: '*VisitDuration(C* = [0], *P* = 1) - *VisitDuration(C* = 0, *P* = 0) = (*β*[0]
    + *β[p]*) - (*β*[0]) = *β[p]*'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration(C* = [0]，*P* = 1) - *VisitDuration(C* = 0，*P* = 0) = (*β*[0]
    + *β[p]*) - (*β*[0]) = *β[p]*'
- en: 'If *Children* = 1, the impact of adding a play area is:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果*Children* = 1，添加游乐区的影响是：
- en: '*VisitDuration(C* = 1, *P* = 1) - *VisitDuration(C* = 1, *P* = 0) = (*β*[0]
    + *β[c]* + *β[p]*) - (*β*[0] + *β[c]*) = *β[p]*'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration(C* = 1，*P* = 1) - *VisitDuration(C* = 1，*P* = 0) = (*β*[0] +
    *β[c]* + *β[p]*) - (*β*[0] + *β[c]*) = *β[p]*'
- en: 'The difference between these two equations (i.e., how much *more* adding a
    play area increases visit duration for customers with children compared to customers
    without children) is by definition:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个方程之间的差异（即为有孩子的顾客比没有孩子的顾客增加游乐区增加访问持续时间的更多量）根据定义为：
- en: '[(*β*[0] + *β[c]* + *β[p]*) - (*β*[0])] - [(*β*[0] + *β[p]*) - (*β*[0])] =
    *β[p]* - *β[p]* = 0'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '[(*β*[0] + *β[c]* + *β[p]*) - (*β*[0])] - [(*β*[0] + *β[p]*) - (*β*[0])] =
    *β[p]* - *β[p]* = 0'
- en: An equivalent way of looking at the problem is that we have four equations,
    with four corresponding averages, but only three coefficients. Once we have set
    *β*[0] , *β[c]*, and *β[p]* based on the first three equations, if it so happens
    that the average visit duration for (C = 1, P =1 ) is not equal to *β*[0] + *β[p]*
    + *β[c]*, we’re stuck. Our algorithm will do its best to find the values that
    minimize the error in our regression, but our estimates will be biased. Unfortunately,
    that’s precisely the case we’re trying to account for! In other words, simply
    adding *Children* as a variable in our regression doesn’t account for the interaction
    between *Children* and *PlayArea*. There is no way for us to determine through
    these equations whether the presence of a play area influences visit duration
    more for customers with children.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 从另一个角度看，我们有四个方程，对应四个平均值，但只有三个系数。一旦我们根据前三个方程设置了*β*[0]，*β[c]*和*β[p]*，如果发现（C =
    1，P = 1）的平均访问持续时间不等于*β*[0] + *β[p]* + *β[c]*，我们就陷入了困境。我们的算法会尽力找到能够最小化回归误差的值，但我们的估计会有偏差。不幸的是，这恰恰是我们试图解决的问题！换句话说，简单地将*Children*作为回归中的一个变量并不能解释*Children*和*PlayArea*之间的相互作用。通过这些方程我们无法确定游乐区的存在是否更多地影响了带有孩子的顾客的访问持续时间。
- en: This is where moderation comes in. We can solve our problem by adding a fourth
    coefficient, for the interaction of *PlayArea* and *Children* (shown in [Equation
    11-2](#eqtn2)).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是中介的作用。我们可以通过添加第四个系数来解决问题，用于解释*PlayArea*和*Children*的交互作用（见[Equation 11-2](#eqtn2)）。
- en: Equation 11-2\.
  id: totrans-51
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程式11-2。
- en: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children* + *β[i].(PlayArea*
    * *Children*)'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children* + *β[i].(PlayArea*
    * *Children*)'
- en: 'The equation for (C = 1, P = 1) becomes *VisitDuration* = *β*[0] + *β[p]* +
    *β[c]* + *β[i]* and we can adjust the coefficient *β[i]* to account for the interaction
    effect. Now we have:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 对于(C = 1，P = 1)的方程式变为*VisitDuration* = *β*[0] + *β[p]* + *β[c]* + *β[i]*，我们可以调整系数*β[i]*来解释交互效应。现在我们有：
- en: If *Children* = 0, the impact of adding a play area is (*β*[0] + *β[p]*) - (*β*[0])
    = *β[p]*.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果*Children* = 0，添加游乐区的影响是（*β*[0] + *β[p]*）- (*β*[0]) = *β[p]*。
- en: If *Children* = 1, the impact of adding a play area is (*β*[0] + *β[c]* + *β[p]*
    + *β[i]*) - (*β*[0] + *β[c]*) = *β[p]* + *β[i]*.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果*Children* = 1，添加游乐区的影响是（*β*[0] + *β[c]* + *β[p]* + *β[i]*）- (*β*[0] + *β[c]*)
    = *β[p]* + *β[i]*。
- en: 'The difference between these two equations is:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个方程的差异是：
- en: '[(*β*[0] + *β[c]* + *β[p]* + *β[i]*) - (*β*[0])] - [(*β*[0] + *β[p]* + *β[i]*)
    - (*β*[0])] = *β[p]* + *β[i]* - *β[p]* = *β[i]*'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '[(*β*[0] + *β[c]* + *β[p]* + *β[i]*) - (*β*[0])] - [(*β*[0] + *β[p]* + *β[i]*)
    - (*β*[0])] = *β[p]* + *β[i]* - *β[p]* = *β[i]*'
- en: Adding a play area increases visit duration by *β[i]* minutes *more* for customers
    with children than for customers without children.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 添加游乐区会使有孩子的顾客的访问持续时间增加*β[i]*分钟*更多*，而对没有孩子的顾客则少。
- en: The multiplication term in [Equation 11-2](#eqtn2) is traditionally represented
    in a CD by an arrow ending in the middle of the original arrow ([Figure 11-2](#the_effect_of_playarea_on_visitduratio)).
    In that case, the variable *Children* is called the *moderator*, and the relationship
    between *PlayArea* and *VisitDuration* is *moderated*.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[方程 11-2](#eqtn2) 中的乘法项通常在 CD 上用一个箭头来表示，箭头中间是原始箭头的结束位置（[图 11-2](#the_effect_of_playarea_on_visitduratio)）。在这种情况下，变量
    *Children* 被称为 *调节变量*，*PlayArea* 和 *VisitDuration* 之间的关系是 *调节的*。'
- en: '![The effect of PlayArea on VisitDuration is moderated by the customers having
    children with them](Images/BEDA_1102.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![PlayArea 对 VisitDuration 的影响由顾客是否带孩子来进行调节](Images/BEDA_1102.png)'
- en: Figure 11-2\. The effect of PlayArea on VisitDuration is moderated by the customers
    having children with them
  id: totrans-61
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-2\. PlayArea 对 VisitDuration 的影响由顾客是否带孩子来进行调节
- en: 'Regression software recognizes moderation, and usually includes a shortcut:
    if you include only the product of two variables, the software will recognize
    that you want to calculate coefficients for the individual variables as well:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 回归软件识别调节作用，并通常包括一个快捷方式：如果只包括两个变量的乘积，软件将识别出你想要计算这些变量的系数：
- en: '[PRE0]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Note
  id: totrans-65
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: 'When you use the shortcut described in the preceding, your software of choice
    will add *PlayArea* and *Children* as individual predictors of *VisitDuration*,
    and estimate [Equation 11-2](#eqtn2) as a result. Wouldn’t it be better to estimate
    instead the equation without *Children* as a separate term? That is:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用上文描述的快捷方式时，你选择的软件将添加 *PlayArea* 和 *Children* 作为 *VisitDuration* 的单独预测变量，并且作为
    [方程 11-2](#eqtn2) 的估计结果。但是，是否不使用 *Children* 作为一个单独的项来估算这个方程会更好呢？也就是说：
- en: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[i].(PlayArea * Children)*'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[i].(PlayArea * Children)*'
- en: 'Short answer: no. For more details, see reference works such as Hayes (2017),
    but basically for the coefficients to mean what you want them to, include in your
    regression the moderator and moderated variables as individual variables too,
    even if their coefficients are not economically or statistically significant.
    Don’t override your software to remove them; this is a feature, not a bug.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 简短的回答：不需要。有关更多详细信息，请参考 Hayes (2017) 等参考文献，但基本上，为了使系数达到你想要的效果，请在回归中包括调节变量和被调节变量作为单独的变量，即使它们的系数在经济或统计上并不显著。不要通过软件将它们去除；这是一个特性，而不是错误。
- en: 'The coefficients in this regression match the averages for the four cases we’ve
    listed:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这个回归中的系数与我们列出的四种情况的平均值匹配：
- en: The average visit duration for a customer without children in a store without
    a play area is *β*[0] , the coefficient for the intercept, i.e., 20 minutes.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不带孩子去没有游乐区的商店的顾客的平均访问时长是 *β*[0]，也就是截距的系数，即 20 分钟。
- en: The average visit duration for a customer without children in a store with a
    play area is *β*[0] + *β[p]*, the sum of the coefficients for the intercept and
    *PlayArea*, i.e., around 20 + 4 = 24 minutes.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不带孩子去有游乐区的商店的顾客的平均访问时长是 *β*[0] + *β[p]*，即截距和 *PlayArea* 的系数之和，大约是 20 + 4 = 24
    分钟。
- en: The average visit duration for a customer with children in a store without a
    play area is *β*[0] + *β[c]*, the sum of the coefficients for the intercept and
    *Children*, i.e., around 20 + 10 = 30 minutes.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带孩子去没有游乐区的商店的顾客的平均访问时长是 *β*[0] + *β[c]*，即截距和 *Children* 的系数之和，大约是 20 + 10 =
    30 分钟。
- en: The average visit duration for a customer with children in a store with a play
    area is *β*[0] + *β[c]* + *β[p]* + *β[i]*, the sum of the coefficients for the
    intercept, *PlayArea*, *Children*, and the interaction term between *PlayArea*
    and *Children*, around 20 + 4 + 10 + 21 = 55 minutes.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带孩子去有游乐区的商店的顾客的平均访问时长是 *β*[0] + *β[c]* + *β[p]* + *β[i]*，即截距、*PlayArea*、*Children*
    和 *PlayArea* 和 *Children* 之间的交互项的系数之和，大约是 20 + 4 + 10 + 21 = 55 分钟。
- en: In other words, having a play area has a big impact on the average visit duration
    of customers with children, and a much smaller but non-negligible impact on the
    average visit duration of customers without children (the relaxation of shopping
    tantrum-free, maybe).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，有游乐区对带孩子的顾客的平均访问时长有很大影响，对不带孩子的顾客的平均访问时长也有一个较小但不可忽视的影响（可能是因为可以轻松无忧地购物）。
- en: This can be represented visually, as in [Figure 11-3](#visual_representation_of_moderation).
    The values for the *Children* variable are on the x-axis, and *VisitDuration*
    is on the y-axis, and we have two lines, one for each possible value of *PlayArea*.
    In other words, the four points at the extremities of the two lines represent
    the four cases we just saw, and their y values match the coefficients.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以用图11-3中的视觉表示，*Children*变量的值位于x轴上，*VisitDuration*位于y轴上，我们有两条线，每个*PlayArea*值对应一条。换句话说，两条线末端的四个点代表我们刚刚看到的四种情况，它们的y值与系数匹配。
- en: If there was no interaction effect between our two variables, the two lines
    would be parallel, as having a play area would shift the average visit duration
    upward by the same increment. The fact that they’re not parallel demonstrates
    that *PlayArea* has a bigger impact on customers with children.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们的两个变量之间没有交互效应，那么两条线将是平行的，因为有游乐区会将平均访问时长向上移动同样的增量。它们不平行的事实表明*PlayArea*对带有孩子的顾客影响更大。
- en: '![Visual representation of moderation](Images/BEDA_1103.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![交互作用的视觉表示](Images/BEDA_1103.png)'
- en: Figure 11-3\. Visual representation of moderation
  id: totrans-78
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-3\. 交互作用的视觉表示
- en: If you want to connect this figure back to our math, the distance between the
    two points on the left (for C = 0) is equal to *β[p]* while the distance between
    the two points on the right (C = 1) is *β[p]* + *β[i]*.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想把这个图与我们的数学联系起来，左侧两点（对于C = 0）之间的距离等于*β[p]*，而右侧两点（C = 1）之间的距离是*β[p]* + *β[i]*。
- en: Insights from moderation analysis allow us to better target our actions, e.g.,
    if C-Mart wants to determine in which stores to build play areas next. While the
    individual coefficient *β[p]* is relevant to determine if a play area would pay
    for itself in general, it is completely irrelevant for store prioritization. Choosing
    between stores requires determining the store and customer characteristics that
    have the strongest interactions with the *PlayArea* variable, and then determining
    which store would yield the highest “lift” from the addition of a play area.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 调节分析的见解使我们能够更好地定位我们的行动，例如，如果C-Mart想确定在哪些商店建设下一个游乐区。尽管个别系数*β[p]*有助于确定游乐区是否在总体上值得投资，但对于商店的优先顺序完全无关紧要。在选择商店时，需要确定与*PlayArea*变量具有最强交互作用的商店和顾客特征，然后确定哪家商店会因增加游乐区而产生最大的“提升”。
- en: Alternatively, in stores that already have a play area, moderation analysis
    would allow C-Mart to determine which potential customers to target with a mailing
    touting the presence of a play area.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，在已经设有游乐区的商店中，调节分析将允许C-Mart确定向哪些潜在顾客推广邮件以宣传游乐区的存在。
- en: Segmenting experimental data
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分割实验数据
- en: The process to segment experimental data is pretty much identical to the process
    we just used with observational data. Therefore I will not repeat the quantitative
    analyses and I’ll just point out some nuances and subtleties to keep in mind.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 分割实验数据的过程与我们刚刚用于观测数据的过程几乎完全相同。因此，我不会重复定量分析，只会指出一些需要注意的细微差别和微妙之处。
- en: When running an experiment, we often care not only about measuring the average
    effect of the treatment in our sample, but also about determining groups for which
    the effect is particularly strong or weak. Sending a letter or training an employee
    can be costly; even if financial costs are negligible, as with emails, there might
    be intangible costs such as annoying a customer. As a result, we generally want
    to apply a treatment only to the people for which it works.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行实验时，我们通常不仅关心测量样本中治疗的平均效果，还关心确定效果特别强或弱的群体。发送信件或培训员工可能很昂贵；即使财务成本微不足道，如电子邮件一样，也可能存在无形成本，比如让顾客感到恼火。因此，我们通常只想将治疗应用于其有效的人群。
- en: Beyond cost considerations, personalization is a key rationale for targeting
    specific messages or treatments to specific segments of our customer base. The
    very idea of personalized messaging is that individuals outside of the target
    segment will not react, or may even react negatively to the message. If you have
    a message that appeals to everyone, good for you, but that’s not personalization.
    For example, a coupon for pro ice-skating blades may annoy the vast majority of
    people who have no use for it. An ad targeting outdoorsy types may antagonize
    quiet bookworms and vice versa. Personalization means that you’re trading increasing
    effectiveness on a certain subgroup for decreased effectiveness on another one.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 超越成本考虑，个性化是将特定消息或处理针对我们客户群体的特定部分的关键理由。个性化消息的核心理念是目标群体之外的个体可能不会做出反应，甚至可能对消息产生负面反应。如果你有一条适合所有人的消息，那很好，但这并不是个性化。例如，一张促销滑冰刀券可能会惹恼大多数对此无用的人。面向户外爱好者的广告可能会激怒安静的书虫，反之亦然。个性化意味着你在某个子群体上提高了效果，但在另一个子群体上效果降低。
- en: 'In marketing analytics, this approach is often referred to as “uplift” analysis
    or modeling, because we’re trying to identify the groups of customers for which
    a given campaign or treatment increases their propensity to take action the most
    (e.g., buying or voting), *regardless of their initial propensity*. That last
    point is often a source of confusion so it’s worth elaborating: identifying customers
    with a high propensity can have its uses, but it should not be used as a basis
    for targeting by itself.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在市场分析中，这种方法通常被称为“提升”分析或建模，因为我们试图识别哪些客户群体对于特定的广告活动或处理能够最大程度地增加他们采取行动的倾向（例如购买或投票），*而不管他们的初始倾向如何*。这最后一点通常会引起混淆，因此值得进一步解释：识别具有高倾向性的客户可能会有其用途，但不能仅此作为定位的依据。
- en: 'Let’s say you compare younger customers (below 30 years old) and older customers
    (above 60 years old):'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 比如，假设你比较年轻客户（30岁以下）和老年客户（60岁以上）：
- en: The first group has a probability to take action of 20% if they’re not emailed,
    and 40% if they’re emailed.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一组如果不发送电子邮件，采取行动的概率为20%，如果发送电子邮件，则为40%。
- en: The second group has a probability to take action of 80% if they’re not emailed,
    and 90% if they’re emailed.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二组如果不发送电子邮件，采取行动的概率为80%，如果发送电子邮件，则为90%。
- en: 'Emailing the first group, the younger customers, would be much more effective
    on average than emailing the second group, the older customers: it would increase
    by a larger number the total number of customers taking action.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第一组年轻客户而言，发送电子邮件的效果平均要比对第二组老年客户发送更加有效：这将显著增加采取行动的客户总数。
- en: However, that fact can often be obscured in real life by the lack of a proper
    control group. If you were to email the second group only and compare their behavior
    with the rest of the population it would dramatically inflate the apparent effectiveness
    of the email campaign.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在现实生活中，由于缺乏适当的对照组，这一事实经常会被掩盖。如果你只给第二组发送电子邮件，并将他们的行为与其他人口进行比较，那么这将大大夸大电子邮件活动的表现效果。
- en: Mathematically, identifying a group with a high effectiveness of treatment means
    finding demographic variables that are moderators of the effect of the treatment
    variable on the effect of interest. In that sense, moderation analysis offers
    us a strong and unified conceptual framework to think about uplift analysis, personalization,
    and more generally targeting.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 从数学上讲，确定一个高有效处理群体意味着找到是处理变量对感兴趣效果的调节变量的人群特征。在这种意义上，调节分析为我们提供了一个关于提升分析、个性化和更广泛的定位的强大和统一的概念框架。
- en: Interactions
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 互动
- en: 'The CD we drew to represent segmentation was asymmetrical: the variable *PlayArea*
    has an arrow going directly to *VisitDuration*, whereas the variable *Children*
    has an arrow going to the first arrow. However, our regression equation is perfectly
    symmetrical; nothing indicates which of the two variables is the moderator and
    which is moderated. Technically speaking, we could interpret [Equation 11-2](#eqtn2)
    to mean that *Children* is the cause and *PlayArea* is the moderator.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们绘制的用于表示分割的CD是不对称的：变量*PlayArea*直接指向*VisitDuration*，而变量*Children*则指向第一个箭头。然而，我们的回归方程却是完全对称的；没有任何迹象表明这两个变量中哪个是调节变量，哪个是被调节变量。严格来说，我们可以解释[方程11-2](#eqtn2)意味着*Children*是原因，*PlayArea*是调节变量。
- en: Is one of these representations more “right” than the other? When we have an
    individual characteristic and a business or behavioral variable involved in moderation,
    as is the case here, we generally represent the individual characteristic (e.g.,
    having children) as the moderator, and refer to it as segmentation. That is, the
    effect of a play area is different between the segment of customers with children
    and the segment of customers without children.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 其中一种表达方式比另一种“正确”吗？当我们有一个个人特征和涉及调节的商业或行为变量时，通常会表示个人特征（例如，是否有子女）为调节变量，并称之为分割。也就是说，游乐区的影响在有子女的客户段和没有子女的客户段之间是不同的。
- en: On the other hand, if we have moderation between two variables of the same type,
    such as two individual characteristics or two business interventions, it doesn’t
    make sense to introduce an asymmetry between them. For example, we may imagine
    that having a play area and having a lounge area both increase visit duration
    independently (the play area for customers with children, and the lounge area
    for customers without children), but having the two together has a bigger effect
    than the sum of their individual effects, because customers with children can
    now use the lounge area. In such circumstances, we can represent moderation by
    joining arrows together as in [Figure 11-4](#representing_symmetrical_interactions),
    and refer to it as *interaction*.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，如果两个类型相同的变量之间存在调节，例如两个个人特征或两个业务干预，那么在它们之间引入不对称是没有意义的。例如，我们可以想象，拥有游乐区和休息区都独立地增加了访问时长（对于有子女的客户来说是游乐区，对于没有子女的客户来说是休息区），但是同时拥有两者的效果比它们各自的效果之和更大，因为有子女的客户现在可以使用休息区。在这种情况下，我们可以通过像图11-4中描述的那样将箭头连接起来表示调节，并称之为*交互作用*。
- en: '![Representing symmetrical interactions](Images/BEDA_1104.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![Representing symmetrical interactions](Images/BEDA_1104.png)'
- en: Figure 11-4\. Representing symmetrical interactions
  id: totrans-98
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-4\. 表示对称交互作用
- en: 'The equation for this CD would be:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 该CD的方程将是：
- en: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[l].LoungeArea* + *β[p][l].(PlayArea
    * LoungeArea*)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[l].LoungeArea* + *β[p][l].(PlayArea
    * LoungeArea*)'
- en: As you can see, the equation is exactly the same as for segmentation, and if
    we wanted we could call *LoungeArea* the moderator of the effect of *PlayArea*
    on *VisitDuration* (or vice versa). Conceptually, interactions let us think about
    situations where “the whole is more than the sum of the parts,” such as complementary
    behaviors.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，该方程与分割的方程完全相同，如果我们愿意，我们可以将*LoungeArea*称为*PlayArea*对*VisitDuration*的影响的调节变量（或反之）。概念上，交互作用让我们思考“整体大于部分之和”的情况，例如互补行为。
- en: Note
  id: totrans-102
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: On a side note, it is my belief that some of the power of newer and more complex
    machine learning methods like random forests, XGBoost, or neural networks comes
    from their ability to capture such interactions. By including interactions in
    regression, we can reduce the performance gap while preserving the interpretability
    of causal relationships we have with regression.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 顺便说一句，我相信一些新型和更复杂的机器学习方法，如随机森林、XGBoost或神经网络的一些力量来自于它们捕捉这种相互作用的能力。通过在回归中包含相互作用，我们可以减少性能差距，同时保持回归中我们与因果关系的可解释性。
- en: Nonlinearities
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 非线性关系
- en: 'In many circumstances, the relationship between a cause and an effect is not
    linear. It may have what economists call “decreasing returns”: you get less and
    less bang for your buck. For example, a satisfied customer might buy more than
    an unsatisfied one, but an ecstatic customer might not buy that much more than
    a happy one. Sending one marketing email per month to a customer might increase
    purchases, but sending 11 emails instead of 10 probably doesn’t help much, as
    in the left panel of [Figure 11-5](#nonlinear_relationships_between_variabl).'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，原因和结果之间的关系并非线性。它可能具有经济学家所称的“递减收益”：你花费的成本越多，得到的回报越少。例如，一个满意的客户可能比一个不满意的客户购买更多，但一个狂热的客户可能购买的并不比一个快乐的客户多得多。对客户每月发送一封营销邮件可能会增加购买量，但是相比发送10封邮件，发送11封邮件可能并不会帮助太多，就像图11-5左侧面板中描述的那样[Figure 11-5](#nonlinear_relationships_between_variabl)。
- en: 'Conversely, a causal relationship may have increasing returns, such as the
    network effects touted by start-ups: the more properties AirCnC has on its website,
    the more customers it will attract; but then the wider its customer base, the
    higher the incentive for owners to offer their property on its website, and so
    on, as in the right panel of [Figure 11-5](#nonlinear_relationships_between_variabl).'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，因果关系可能存在递增回报，例如初创公司宣传的网络效应：AirCnC在其网站上拥有的房源越多，吸引的客户就越多；然后，其客户群越广，房主提供其房源的动机就越高，依此类推，就像图11-5右侧所示。
- en: '![Nonlinear relationships between variables: left is decreasing returns while
    right is increasing returns](Images/BEDA_1105.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![变量之间的非线性关系：左侧是递减回报，右侧是递增回报](Images/BEDA_1105.png)'
- en: 'Figure 11-5\. Nonlinear relationships between variables: left is decreasing
    returns while right is increasing returns'
  id: totrans-108
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-5\. 变量之间的非线性关系：左侧是递减回报，右侧是递增回报
- en: Note
  id: totrans-109
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Mathematically, the curve on the left is concave, and the curve on the right
    is convex. A common mistake is to believe that such relationships cannot be represented
    with linear regression. In reality, what matters for a regression to be “linear”
    is that the predicted variable has a linear relationship with the coefficients,
    not the variables. *Y* = *β*[1].e^(X[1]) + *β*[2].e^(X[2]) is a proper linear
    regression because multiplying each coefficient by 2 would multiply Y by 2\. Conversely,
    *Y* = *e*^(*β*[1])^(.X[1]) + *β*[2]*X*[2] is not a proper linear regression because
    Y does not have a linear relationship with the coefficients.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 从数学上讲，左侧的曲线是凹的，右侧的曲线是凸的。一个常见的错误是认为这样的关系不能用线性回归表示。实际上，对于回归来说，“线性”的关键在于预测变量与系数的线性关系，而不是变量本身。*Y*
    = *β*[1].e^(X[1]) + *β*[2].e^(X[2])是一个正确的线性回归，因为将每个系数乘以2会将Y乘以2。相反，*Y* = *e*^(*β*[1])^(.X[1])
    + *β*[2]*X*[2]不是一个正确的线性回归，因为Y与系数没有线性关系。
- en: 'We can address nonlinear relationships between variables by adding the explanatory
    variable taken to the square (i.e., a quadratic term). For example, we can model
    the relationship between marketing emails and purchases we just discussed as:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将解释变量取平方（即二次项），我们可以解决变量之间的非线性关系。例如，我们可以将我们刚讨论的营销电子邮件与购买之间的关系建模为：
- en: '*Purchases* = *β*[0] + *β*[1].Emails + *β*[2]*.Emails*²'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '*购买* = *β*[0] + *β*[1].邮件 + *β*[2].邮件*²'
- en: Adding a quadratic term can significantly improve the accuracy of a regression.
    In [Figure 11-6](#linear_left_parenthesisdashedright_pare), you can see that the
    solid curve, which represents the line of best fit for the linear regression with
    a quadratic term, is much closer to the data points than the dashed line, which
    represents a standard regression without a quadratic term. Here, additional monthly
    emails have a decreasing impact, which translates into the quadratic term having
    a negative coefficient in the regression.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 添加二次项可以显著提高回归的准确性。在[图11-6](#linear_left_parenthesisdashedright_pare)中，您可以看到实线曲线代表具有二次项的线性回归的最佳拟合线比虚线更接近数据点。在这里，每月额外的电子邮件具有递减的影响，这意味着二次项在回归中具有负系数。
- en: '![Linear (dashed) and quadratic (solid) lines of best fit](Images/BEDA_1106.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![线性（虚线）和二次（实线）最佳拟合线](Images/BEDA_1106.png)'
- en: Figure 11-6\. Linear (dashed) and quadratic (solid) lines of best fit
  id: totrans-115
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-6\. 线性（虚线）和二次（实线）最佳拟合线
- en: However, a quadratic term is nothing more than an interaction between a variable
    and itself. In other words, a nonlinear causal relationship between two variables
    can be reframed as self-moderation ([Figure 11-7](#representing_self_moderation)).
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，二次项无非是一个变量与自身的交互作用。换句话说，两个变量之间的非线性因果关系可以重新构建为自我调节（[图11-7](#representing_self_moderation)）。
- en: '![Representing self-moderation](Images/BEDA_1107.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![表达自我调节](Images/BEDA_1107.png)'
- en: Figure 11-7\. Representing self-moderation
  id: totrans-118
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-7\. 表达自我调节
- en: Conceptually, this means that adding an extra email per month has a different
    impact depending on the current business-as-usual number of emails sent.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 从概念上讲，这意味着每月增加一个额外的电子邮件对当前的业务通常发送的电子邮件数量具有不同的影响。
- en: 'The syntax in code to include self-moderation is:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 代码中包含自我调节的语法是：
- en: '[PRE2]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'In both R and Python, this is done by using the identity function `I()`, which
    prevents the linear regression algorithm from trying to interpret the squared
    term and just passes it to the general solver. In R, a squared term is expressed
    with a caret,^([1](ch11.xhtml#idm45968143988536)) whereas in Python it is expressed
    with two multiplication symbols. This also implies that self-moderation is validated
    in exactly the same way as traditional moderation: we would build a Bootstrap
    confidence interval, and determine whether it includes zero and whether it is
    economically significant.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在R和Python中，通过使用身份函数`I()`来完成，这可以防止线性回归算法尝试解释平方项，而只是将其传递给一般求解器。在R中，平方项用符号^表示（[1](ch11.xhtml#idm45968143988536)），而在Python中用两个乘法符号表示。这也意味着自我调节与传统调节完全相同的验证方式：我们将建立一个Bootstrap置信区间，确定是否包含零以及是否在经济上显著。
- en: 'To recap our exploration of moderation, we’ve seen three varieties of it, which
    are mathematically identical but have different interpretations based on the types
    of variables involved:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 总结我们对调节的探索，我们看到了它的三种类型，数学上是相同的，但基于涉及的变量类型有不同的解释：
- en: Segmentation
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 分割
- en: In segmentation personal characteristics (e.g., demographic variables) moderate
    the effect of a business behavior, such as an experimental intervention (it is
    then known as uplift analysis).
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在分割个人特征（例如人口统计变量）中，会调节商业行为的效果，比如实验干预（此时被称为提升分析）。
- en: Interaction
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 互动
- en: In interaction we observe moderation between variables of the same nature, such
    as two demographic or two behavioral variables.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在互动中，我们观察到同一性质变量之间的调节，例如两个人口统计变量或两个行为变量。
- en: Nonlinearities
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 非线性
- en: With nonlinearities a variable self-moderates its causal impact on another variable.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 非线性导致一个变量自我调节其对另一个变量的因果影响。
- en: Now that we have a clear understanding of the behavioral interpretation of moderation,
    let’s turn to the details of its application.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们对调节的行为解释有了清晰的理解，让我们转向其应用的细节。
- en: How to Apply Moderation
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何应用调节
- en: 'As we discussed in the previous section, moderation can be used to capture
    a variety of behavioral effects, simply by adding the product of two variables
    to a regression. In this section, we’ll turn to technical considerations:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在前一节中讨论的那样，通过将两个变量的乘积添加到回归中，调节可以用来捕捉各种行为效应。在本节中，我们将转向技术考虑：
- en: When to look for moderation
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 何时寻找调节
- en: How to validate it
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何验证它
- en: Moderated moderation
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调节的调节
- en: How to interpret the coefficients for individual variables in a moderated regression
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何解释调节回归中各个变量的系数
- en: When to Look for Moderation?
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 何时寻找调节？
- en: 'With so many possible applications of moderation, it can be tempting to look
    for it everywhere, but as a second-order effect (i.e., an effect on an effect),
    moderation generally yields small coefficients and the risk of false positives
    is high. This is especially true with experimental data, where the motivation
    is strong to find a meaningful effect: “Sure, the average effect of the email
    campaign is almost null, but look at the response rate for thirty-year-old men
    in Kansas!”'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 由于调节有很多可能的应用，很容易到处寻找，但作为二阶效应（即对效应的影响），调节通常产生较小的系数，并且存在高假阳性的风险。这在实验数据中尤为真实，因为有强烈的动机寻找显著效应：“确实，电子邮件活动的平均效果几乎为零，但看看堪萨斯州三十岁男性的响应率！”
- en: 'Let’s say that you’re getting started on analyzing observational data or designing
    an experiment. At what point should you be thinking about moderation, and how
    should you integrate it into your analyses? First, I’ll talk about the experimental
    design stage. The process for the data analysis stage is the same regardless of
    whether the data is observational or experimental in nature, so I’ll cover the
    two cases together after that. Finally, I’ll cover nonlinearities, which will
    be easy: because there is only one variable involved, you don’t really have to
    worry about potential risks and you can include nonlinearity liberally in your
    analyses.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你开始分析观察数据或设计实验。在什么时候应该考虑调节，以及如何将其整合到分析中？首先，我将讨论实验设计阶段。无论数据是观察性的还是实验性的，数据分析阶段的过程都是相同的，所以我将在之后同时涵盖这两种情况。最后，我将涵盖非线性，这很简单：因为只涉及一个变量，你不必真正担心潜在的风险，可以在分析中自由地包含非线性。
- en: Including moderation in the experimental design stage
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在实验设计阶段包括调节。
- en: 'I’ll distinguish between two situations that will call for different approaches:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我将区分两种情况，这将需要不同的方法：
- en: The primary object of your analysis is the main effect, regardless of moderation,
    and moderation is a secondary object of your analysis.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的分析的主要对象是主效应，不管有没有调节，调节是你分析的次要对象。
- en: Moderation is the primary object of your analysis.
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的分析的主要对象是适度。
- en: 'If you’re designing an experiment in which the primary goal is not to measure
    moderation, my recommendation will be simple: leverage the possibility of moderation
    to refine your theory of change, but do not try to adjust your sample size.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您设计一个实验，其主要目标不是测量调节效应，我的建议很简单：利用调节的可能性来完善您的变化理论，但不要试图调整样本大小。
- en: In [Part IV](part04.xhtml#designing_and_analyzing_experiments), we saw that
    before running an experiment, you should make your theory of change explicit with
    the help of causal diagrams. In that case, the focus was on average causal effects,
    i.e., the average effect of an experimental treatment across the board, but in
    many cases, we can refine that logic through moderation.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第四部分](part04.xhtml#designing_and_analyzing_experiments)中，我们看到在运行实验之前，您应该通过因果图明确您的变化理论。在这种情况下，重点是平均因果效应，即实验处理在整体上的平均效应，但在许多情况下，我们可以通过调节来完善这一逻辑。
- en: In [Chapter 8](ch08.xhtml#experimental_design_the_basics), we designed an experiment
    where we sought to increase AirCnC’s booking rate by offering “1-click booking.”
    It is conceivable that this effect could be moderated by age ([Figure 11-8](#experimental_treatment_moderated_by_age)).
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第八章](ch08.xhtml#experimental_design_the_basics)中，我们设计了一个实验，希望通过提供“1-点击预订”来增加
    AirCnC 的预订率。可以想象，这种效应可能会受到年龄的调节影响（[图 11-8](#experimental_treatment_moderated_by_age)）。
- en: '![Experimental treatment moderated by age](Images/BEDA_1108.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![年龄调节的实验处理](Images/BEDA_1108.png)'
- en: Figure 11-8\. Experimental treatment moderated by age
  id: totrans-149
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-8\. 年龄调节的实验处理
- en: 'The behavioral logic of our theory of change was that the 1-click button would
    reduce the duration of the booking process, which itself impacts the probability
    of completing a booking. This means there are two possibilities in terms of moderation:
    age moderates the effect of the 1-click button on the booking duration, or it
    moderates the effect of booking duration on the probability of completing a booking,
    or both ([Figure 11-9](#age_may_moderate_two_causal_relationshi)).'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们改变理论的行为逻辑是，1-点击按钮将缩短预订流程的时间，这本身影响了完成预订的可能性。这意味着在调节方面有两种可能性：年龄调节了 1-点击按钮对预订时间的影响，或者调节了预订时间对完成预订的影响，或者两者都有（[图 11-9](#age_may_moderate_two_causal_relationshi)）。
- en: '![Age may moderate two causal relationships](Images/BEDA_1109.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![年龄可能调节两个因果关系](Images/BEDA_1109.png)'
- en: Figure 11-9\. Age may moderate two causal relationships
  id: totrans-152
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-9\. 年龄可能调节两个因果关系
- en: Putting together our behavioral logic and a potential moderator is very powerful,
    because it allows us to think through the behavioral implications, and in some
    cases to run analyses, before our experiment takes place.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 将我们的行为逻辑和潜在的调节因素结合起来非常强大，因为它使我们能够在实验进行之前思考行为影响，并在某些情况下进行分析。
- en: Let’s start with the first relationship on the left of the CD, between the 1-click
    button and the booking duration. We don’t have any data about the 1-click button
    in our historical data, so we can’t measure this moderation effect directly. However,
    if we see an (unconfounded) correlation in our historical data between age and
    booking duration, this lends some credence to the idea, because it suggests that
    the cognitive processes at play are affected by age. On the other hand, if age
    is not correlated with booking duration, moderation would rely on younger and
    older customers having different reactions to the button itself specifically.
    While not impossible, this is a “narrower” behavioral path, somewhat less likely
    per Occam’s Razor—the simplest explanation is generally the right one. More importantly,
    it is a testable behavioral path. For example, if you bring a sample of baby boomers
    into the UX lab and you find that they don’t trust a 1-click process because they
    want to go through all the steps, then moderation is very likely, and you can
    target your experiment to younger customers, or at least oversample them.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从 CD 左侧的第一个关系开始，即“1-click”按钮和预订持续时间之间的关系。我们在历史数据中没有关于“1-click”按钮的任何数据，因此无法直接测量这种调节效应。然而，如果我们在历史数据中看到年龄和预订持续时间之间的（非混杂的）相关性，这就在一定程度上支持这个想法，因为它暗示了年龄影响了正在发生的认知过程。另一方面，如果年龄与预订持续时间无关，调节将依赖于年轻和年长客户对按钮本身的不同反应。虽然这并非不可能，但这是一条“较窄”的行为路径，根据奥卡姆剃刀原理，最简单的解释通常是正确的。更重要的是，这是一条可测试的行为路径。例如，如果你将婴儿潮一代的样本带入用户体验实验室，并发现他们不信任“1-click”过程，因为他们想要经历所有步骤，那么调节就是非常可能的，你可以将实验对象定位为年轻客户，或至少过采样他们。
- en: For the second relationship, between booking duration and booking completion,
    we have all the required variables in our historical data, which means we can
    confirm or disprove moderation before even running our experiment, with a much
    higher accuracy than with the limited sample size of a single experiment. Again,
    if we confirm the presence of moderation, we can adjust our experimental design
    accordingly (e.g., by targeting only younger or older customers, depending on
    the direction of moderation).
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第二个关系，即预订持续时间与预订完成之间的关系，我们在历史数据中拥有所有必需的变量，这意味着我们可以在甚至运行实验之前确认或否定调节效应，其准确性比单个实验的有限样本量高得多。同样，如果我们确认存在调节效应，我们可以相应调整我们的实验设计（例如，根据调节的方向，仅针对年轻或年长客户）。
- en: 'There is a broader takeaway here: by articulating the behavioral logic of an
    intervention, we can often expand the chain between our intervention and our effect
    of interest in the CD by identifying one or several mediators between them for
    which we already have data. We can then explore whether the relationship between
    mediator(s) and final effect is moderated. In addition, we can explore whether
    that relationship is self-moderated. In our example here, maybe the booking rate
    is unaffected by the booking duration up to a point, but then drops precipitously,
    e.g., customers don’t really care if booking takes 30 or 45 seconds, but bail
    out of the process en masse if it takes more than 2 minutes ([Figure 11-10](#the_relationship_between_the_mediator_a)).'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个更广泛的经验教训：通过表达干预的行为逻辑，我们通常可以扩展我们的干预与我们在 CD 中感兴趣的效果之间的链条，通过识别一个或多个已经有数据的中介者来进行这种扩展。然后，我们可以探索中介者与最终效果之间的关系是否被调节。此外，我们还可以探索这种关系是否是自我调节的。在我们的例子中，也许预订率在某一点之前不受预订持续时间的影响，但之后急剧下降，例如，顾客可能并不在乎预订需要30秒还是45秒，但如果超过2分钟，他们会大量放弃这一过程（见[图 11-10](#the_relationship_between_the_mediator_a)）。
- en: '![The relationship between the mediator and final effect is self-moderated](Images/BEDA_1110.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![中介者与最终效果之间的关系是自我调节的](Images/BEDA_1110.png)'
- en: Figure 11-10\. Relationship between the mediator and final effect is self-moderated
  id: totrans-158
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-10\. 中介者与最终效果之间的关系是自我调节的
- en: Note
  id: totrans-159
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: During that process of identifying moderators in your historical data, you’ll
    have to keep in mind that “correlation is not causation” applies, and the relationships
    you’re looking at might be confounded, as in [Figure 11-11](#income_is_a_confounder_of_the_relations).
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在识别历史数据中的调节变量的过程中，你必须牢记，“相关不意味着因果关系”适用，并且你正在观察的关系可能是混杂的，如[图 11-11](#income_is_a_confounder_of_the_relations)所示。
- en: '![Income is a confounder of the relationship between duration and booking rate](Images/BEDA_1111.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![收入是持续时间和预订率关系的混杂变量](Images/BEDA_1111.png)'
- en: Figure 11-11\. Income is a confounder of the relationship between duration and
    booking rate
  id: totrans-162
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-11\. *Income*是持续时间和预订率之间关系的混杂变量
- en: Note
  id: totrans-163
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: In such a situation, the confounding effect of *Income* would bias the relationship
    between *Duration* and *Booking* compared to the real causal effect (which is
    what you would act upon through the 1-click button experiment). Therefore, you
    would need to control for the confounding effect when assessing moderation.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，*Income*的混杂效应会使*Duration*和*Booking*之间的关系偏离真实的因果效应（这是您通过一键式按钮实验将要采取行动的）。因此，在评估调节效应时，您需要控制混杂效应。
- en: In the case of a variable like *Age* that is observable before our experimental
    allocation, we can use it directly for the allocation itself. For example, instead
    of drawing a random sample from our whole customer base, we can limit our experiment
    to customers under a certain age, where we expect the largest effect.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 对于像*Age*这样在我们实验分配之前就可以观察到的变量，我们可以直接将其用于分配本身。例如，我们可以将我们的实验限制在某个年龄段以下的客户，我们预计会产生最大的效果。
- en: 'Obviously, we can’t observe *BookingDuration* before a customer starts the
    booking process, which means we can’t use it in the experimental allocation itself.
    However, we can try to identify proxies for the target variable: for example,
    maybe bookings tend to be longer on the weekend than on weekdays. We can then
    use these proxies to define our experimental population and, say, run our experiment
    only on weekend customers. This will work well if the proxy and the target variable
    are closely related, e.g., there are some shorter bookings as well over the weekend,
    but 90% of the longer-duration bookings happen over the weekend. Conversely, if
    the two variables are only loosely related, e.g., 60% of the longer-duration bookings
    happen over the weekend, the results observed in your experiment may not generalize
    well to longer-duration bookings on weekdays.'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，在客户开始预订过程之前，我们无法观察*BookingDuration*，这意味着我们不能在实验分配中使用它。然而，我们可以尝试识别目标变量的代理：例如，也许预订在周末比工作日长。然后，我们可以使用这些代理来定义我们的实验人群，比如仅对周末的客户运行我们的实验。如果代理和目标变量密切相关，这将很有效，例如，在周末也有一些较短的预订，但90%的较长持续时间预订发生在周末。相反，如果两个变量只有松散的关系，例如，60%的较长持续时间预订发生在周末，那么您在实验中观察到的结果可能无法很好地推广到工作日的较长持续时间预订。
- en: This is all I recommend you do if moderation is not the primary focus of your
    experiment, i.e., you haven’t measured the unmoderated effect yet. That’s because
    the power to detect moderation and interactions is significantly lower than the
    power to detect the main effects, which means the sample size required to measure
    moderation would be significantly larger (think 10–20x larger or more). That’s
    a lot of time spent on the possibility of moderation for an average effect you
    haven’t even confirmed yet.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如果调节不是您实验的主要焦点，即您尚未测量未调节效应。这是因为检测调节和交互作用的能力明显低于检测主效应的能力，这意味着测量调节所需的样本量会显著更大（考虑增加10-20倍甚至更多）。这对于尚未确认的平均效应而言，花费大量时间来探索调节的可能性并不划算。
- en: Therefore, I recommend that you run your first experiment with a focus on measuring
    accurately the average, unmoderated effect, and then measure moderation effects
    in the results. If you find any promising moderation effect, it will most likely
    have a large confidence interval that crosses zero, due to the fact that the experiment
    was not powered to capture it. If that moderation effect seems promising enough
    from an economic standpoint, run a second experiment powered to appropriately
    measure it.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我建议您首先运行第一次实验，重点是准确测量平均未调节效应，然后再测量结果中的调节效应。如果发现任何有希望的调节效应，由于实验未能捕捉到它，其置信区间很可能很大地跨越零点。如果从经济学的角度来看，这种调节效应似乎足够有前景，那么可以运行第二个实验来适当地测量它。
- en: 'Once you know the unmoderated effect size, you can decide to run an experiment
    dedicated to measuring or confirming moderation. The process for determining the
    appropriate sample size remains the same: you would set a target power and hypothesized/target
    effect sizes, then determine the proportion of false negatives in repeated simulations
    at different sample sizes, as we’ve done in previous power analyses. The only
    difference is that you would use your prior knowledge for the main effect size,
    and only set a target effect size for moderation.'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您知道未调节效应大小，您可以决定进行专门测量或确认调节的实验。确定适当样本大小的过程仍然相同：您将设定目标功效和假设/目标效应大小，然后确定在不同样本大小下重复模拟中的假阴性比例，正如我们在以前的功效分析中所做的那样。唯一的区别是，您将使用您的先验知识作为主效应大小，并仅为调节设定目标效应大小。
- en: Including moderation in the data analysis stage
  id: totrans-170
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在数据分析阶段包括调节
- en: You have some data on hand, either observational in nature or from an experiment
    you have run. How can you identify relevant moderation effects without running
    into false positives? You’ll have to do a fishing expedition, that is, try including
    a moderation term with one variable, then another, and so on. In the following,
    I’ll provide several guidelines to minimize the risk of false positives.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 您手头有一些数据，可能是观察性的，也可能是您运行的实验。如何在不遇到假阳性的情况下识别相关的调节效应？您将不得不进行渔猎探险，即尝试包括一个变量的调节项，然后是另一个变量，依此类推。接下来，我将提供几条指南，以最小化假阳性的风险。
- en: 'First, I’ll provide you with a rough but powerful sanity check when you’re
    looking to moderate the effect of a categorical variable on a numeric variable.
    The requirement of a numeric effect simply means that you’re looking at a linear
    and not a logistic regression. The requirement of a categorical cause may seem
    very restrictive, but it applies to all experimental assignments (i.e., the experimental
    assignment is always a binary or categorical variable). In addition, if your cause
    is numeric, you can discretize it for this purpose by taking its quartiles:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，当您试图调节分类变量对数值变量的影响时，我将为您提供一个粗略但强大的理性检查。数值效应的要求仅意味着您正在进行线性而不是逻辑回归。分类原因的要求可能看起来非常严格，但它适用于所有实验性任务（即实验性任务始终是二元或分类变量）。此外，如果您的原因是数值型的，您可以通过取其四分位数来将其离散化：
- en: '[PRE4]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The sanity check is to compare the standard deviation of the effect of interest
    across the groups defined by your cause of interest. If the standard deviation
    is meaningfully higher in the treatment group (for experimental data) or differs
    across groups (for observational data), this suggests the possible presence of
    moderation and you can proceed with your fishing expedition with reasonable confidence.
    If the standard deviations are similar across groups, this suggests that there
    is no moderation; you can still try a few potential moderators if you’d like,
    but you need to have a strong theoretical rationale for them.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 理性检查是比较您感兴趣的效应在由您感兴趣的原因定义的组之间的标准差。如果在治疗组（对于实验数据）中标准差显著较高，或者在观察性数据中各组之间差异较大，这表明可能存在调节的可能性，您可以有合理的信心继续您的渔猎探险。如果各组之间的标准差相似，则表明没有调节效应；如果您愿意，仍然可以尝试几个潜在的调节变量，但需要对它们有坚实的理论基础。
- en: 'What do “meaningfully higher” or “similar” mean in that context? If you want
    a rigorous justification, there are statistical tests you can run to help you
    determine if the observed difference is statistically unusual, such as the Brown–Forsythe
    test.^([2](ch11.xhtml#ch01fn28)) Personally, I would recommend simply eyeballing
    it: is the difference economically meaningful in relation to the difference in
    means across the groups?'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，“有意义地更高”或“相似”意味着什么？如果您想要严格的理由，可以运行一些统计测试来帮助您确定观察到的差异是否在统计上异常，例如布朗-福斯斯试验^([2](ch11.xhtml#ch01fn28))。就我个人而言，我建议您简单地直观判断：相对于组间均值差异，这种差异在经济上是否有意义？
- en: 'Going back to the example of play areas in C-Mart stores, the code would be
    as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 回到C-Mart商店游乐区的示例，代码如下：
- en: '[PRE6]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: In the example here, a 10-minute difference in standard deviations is definitely
    something C-Mart would be interested in exploring, given that the difference in
    means across the groups is about 13 minutes.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，标准差相差10分钟绝对是C-Mart有兴趣探索的内容，因为组间均值差异大约是13分钟。
- en: Note
  id: totrans-181
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Obviously, the risk of false positives increases with the number of categories.
    If your primary cause is state or profession, you’re likely to see some variations
    in standard deviations across the board, just out of randomness and special cases.
    Therefore, I would look at moderation for such a variable only if I had a pretty
    strong rationale in the first place.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，假阳性的风险随着类别数量的增加而增加。如果您的主要原因是州或职业，那么您可能会看到一些标准差在全面范围内的变化，只是由于随机性和特殊情况。因此，我只会在第一次有相当强的理由的情况下才会考虑这种变量的调节。
- en: One way to mitigate the risk of false positives and make any moderation you
    might find more meaningful is to replace your categorical variable by quartiles
    of a relevant numeric variable. For example, political leaning or average income
    for states, proportion of women or average level of education for profession.
    Saying that the 25% of states with the lowest average income have a lower standard
    deviation of purchases than the 25% of states with the highest average income
    is a much more robust and actionable insight than saying that California has a
    higher standard deviation than Mississippi.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 减少假阳性风险并使任何可能发现的调节更有意义的一种方法是，将您的分类变量替换为相关数值变量的四分位数。例如，州的政治倾向或平均收入，职业的女性比例或平均教育水平。说25%收入最低的州比25%收入最高的州的购买标准差小是一个比说加利福尼亚州的标准差高于密西西比州更健壮且可操作的洞察更多的方法。
- en: Assuming your data passes this first sanity check, the second step is to establish
    upper bounds on moderated effects. The key intuition here is that moderation can
    only “redistribute” the average effect; it doesn’t increase it. A visual illustration
    will make this clearer, taking the example of *Children* as a potential moderator
    of the effect of *PlayArea* on *VisitDuration*. [Figure 11-12](#average_effect_of_a_play_area_across_cu)
    shows the average effect of a play area across our data (11.92 minutes), with
    the width of the bars representing the proportion of customers without and with
    children in our population.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您的数据通过了这个第一步的合理性检查，第二步是确定调节效应的上限。这里的关键直觉是，调节只能“重新分配”平均效果；它不会增加它。通过视觉示例可以更清楚地说明这一点，以*Children*作为*PlayArea*对*VisitDuration*效果的潜在调节因素。图[11-12](#average_effect_of_a_play_area_across_cu)显示了游乐区在我们数据中的平均效果（11.92分钟），柱子的宽度表示我们人口中没有和有儿童的顾客比例。
- en: '![Average effect of a play area across customers without and with children](Images/BEDA_1112.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![不同有无儿童顾客的游乐区的平均效果](Images/BEDA_1112.png)'
- en: Figure 11-12\. Average effect of a play area across customers without and with
    children
  id: totrans-186
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-12\. 不同有无儿童顾客的游乐区的平均效果
- en: Let’s assume for a second that the presence of a play area has at worst a null
    effect on customers without children (i.e., it cannot have a negative effect),
    a plausible assumption from a behavioral perspective if the play area is appropriately
    soundproofed. This implies that, at most, the entire average effect is coming
    from customers with children, and moderation redistributes the entire area of
    the left bar to the right bar, as in [Figure 11-13](#average_effect_coming_entirely_from_cus).
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 假设游乐区对没有儿童的顾客没有任何负面效果（即它不会产生负面效果），这从行为角度来看是一个合理的假设，尤其是如果游乐区适当隔音的话。这意味着，最多的情况下，整个平均效果来自有儿童的顾客，调节会将整个左侧柱的面积重新分配到右侧柱上，如图[11-13](#average_effect_coming_entirely_from_cus)所示。
- en: '![Average effect coming entirely from customers with children](Images/BEDA_1113.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![完全来自有儿童顾客的平均效果](Images/BEDA_1113.png)'
- en: Figure 11-13\. Average effect coming entirely from customers with children
  id: totrans-189
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-13\. 完全来自有儿童顾客的平均效果
- en: 'Under that “most extreme scenario,” let’s calculate the effect size in the
    group of customers with children. By definition of the average, we have:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种“最极端的情况”下，让我们计算有儿童顾客群体中的效果大小。根据平均值的定义，我们有：
- en: '*Avg. effect size* = (*Sum of individual effect sizes*) / (*Total number of
    customers*)'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均效果大小* = (*各个个体效果大小的总和*) / (*顾客总数*)'
- en: 'Let’s separate customers with and without children in the numerator:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将分子中的有儿童和没有儿童的顾客分开：
- en: '*Avg. effect size* = (*Sum of individual effect sizes for customers without
    children + sum of individual effect sizes for customer with children*) / (*Total
    number of* *customers*)'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均效果大小* = (*没有儿童顾客的各个个体效果大小总和 + 有儿童顾客的各个个体效果大小总和*) / (*顾客总数*)'
- en: 'If we assume no effect on customers without children, the first term in the
    numerator is equal to zero:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们假设对没有孩子的客户没有影响，则分子中的第一项等于零：
- en: '*Avg. effect size* = (*Sum of individual effect sizes for customers with children*)
    / (*Total number of customers*)'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均效应大小* =（*具有孩子的客户的个体效应大小总和*）/（*客户总数*）'
- en: 'Let’s multiply both sides of the equation by the total number of customers:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将等式的两边都乘以客户总数：
- en: '*Avg. effect size* * *Total number of customers* = *Sum of individual effect
    sizes for customers with children*'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均效应大小* * *客户总数* = *具有孩子的客户的个体效应大小总和*'
- en: 'And then divide both sides by the number of customers with children:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 然后将等式的两边都除以具有孩子的客户数量：
- en: '*Avg. effect size* * *Total number of customers* / *N**umber of customers with
    children* = *Avg. effect size for customers with children*'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均效应大小* * *客户总数* / *具有孩子的客户数量* = *具有孩子的客户的平均效应大小*'
- en: '*Avg. effect size* * *1* / *Proportion of customers with children* = *Avg.
    effect size for customers with children*'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均效应大小* * *1* / *客户中具有孩子的比例* = *具有孩子的客户的平均效应大小*'
- en: 'Swapping left- and righthand sides for readability and plugging in the numbers
    from the preceding example, we get:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提高可读性并在前面的示例中插入数字，我们交换了左右两边：
- en: '*Avg. effect size for customers with children* = 11.92 * 1 / 0.387 = 30.8'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '*具有孩子的客户的平均效应大小* = 11.92 * 1 / 0.387 = 30.8'
- en: 'In other words, the average effect size for customers with children can be
    no higher than 30.8 additional minutes for *VisitDuration*, given the overall
    average effect size. If that number is too low to be of economic interest, then
    there is no point in measuring moderation between *PlayArea* and *Children*. Beyond
    that specific example, the formula *Avg. effect size/Proportion of customers in
    segment* can be applied to any potential moderator: if you have an equal split
    of men and women in your customer base, this means that at most, one gender has
    double the average effect and the other has no effect. Hoping that somehow one
    gender will have triple the average effect or that moderation will increase the
    effect for both genders is wishful thinking, and mathematically impossible. To
    put it another way, we tend to focus on groups with above-average effect sizes,
    for understandable reasons, but the counterpart has to be groups with below-average
    effect sizes.'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，针对具有孩子的客户的平均效应大小不能高于30.8分钟的*访问时长*，考虑到总体平均效应大小。如果这个数字对经济利益来说太低，那么测量*PlayArea*和*Children*之间的调节就没有意义。除了这个具体的例子之外，公式*平均效应大小/段中客户的比例*可以应用于任何潜在的调节因素：如果你的客户群体中男女平分，这意味着最多，一种性别的效果是平均效果的两倍，另一种性别没有效果。希望某种方式一种性别会有三倍于平均效果，或者调节将增加两种性别的效果是一种幻想，数学上不可能的。换句话说，我们倾向于关注具有高于平均效应大小的群体，这是可以理解的原因，但对应的是具有低于平均效应大小的群体。
- en: 'This means that your search for potential moderators should start with variables
    that have a strong behavioral rationale or have been found to be impactful in
    past analyses, and that generate subgroups large enough to matter. Beyond a certain
    degree of inequality in group sizes, the search becomes an exercise in futility:
    if you have a variable that splits your customer base 90%-10%, then even if the
    group representing 10% of your customer base shows no effect at all, this will
    increase at most the effect in the 90% group to 1 / 0.9 = 111% of the average
    effect, an increase of 11%.'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着你搜索潜在的调节因素应该从具有强有力的行为基础或在过去的分析中被发现具有影响力的变量开始，并且产生的子组足够大。超过一定程度的组大小不平等后，搜索就变得毫无意义：如果你有一个将你的客户群体分为90％-10％的变量，那么即使代表你客户群体10％的群体根本没有效果，这最多也只会将90％群体的效果增加到1/0.9
    = 111％的平均效果，增加了11％。
- en: More broadly, moderation cannot save a mediocre average effect. It should only
    be sought to add a bit more oomph to your treatment; for example if you are at
    90% of the breakeven or target value for it, or if you are in a high-volume environment
    and you’re trying to extract any efficiency gains you can.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 更广泛地说，调节不能拯救平均效果一般般。它只应该被寻求以给你的治疗方案增加一点点力量；例如，如果你的达到了它的盈亏平衡值或目标值的90％，或者如果你处于高交易量的环境中，并且你正在尝试提取任何你能够的效率提升。
- en: For each variable you want to test, the process is the same. First, run a regression
    with an interaction between the experimental treatment variable and the potential
    moderator. Then if you find an interaction effect large enough, confirm it by
    building a Bootstrap CI around the estimated effect.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个你想要测试的变量，过程是相同的。首先，运行一个回归，其中包含实验处理变量和潜在调节变量之间的交互作用。然后，如果发现一个足够大的交互效应，通过构建一个Bootstrap
    CI来确认它。
- en: 'There are some rules, such as the Bonferroni correction, to reduce the risk
    of false positives when testing a large number of hypotheses in this fashion.
    I would not recommend them however, for two reasons:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种方式下测试大量假设时，有一些规则，比如邦费隆尼校正，可以减少误报的风险。但出于两个原因，我不建议它们：
- en: They generally rely, explicitly or implicitly, on the Null Hypothesis Statistical
    Testing framework with normality assumptions.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们通常依赖于零假设统计检验框架，具有正态性假设，显式或隐式地。
- en: They can be unduly conservative and unacceptably increase the risk of false
    negatives.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们可能过于保守，并且在增加假阴性的风险方面是不可接受的。
- en: Instead, my recommendation would be to validate promising subgroups through
    follow-up experiments whenever possible. If a moderation effect is large enough
    to be of business value, then it should be considered large enough to warrant
    further validation. If you’re working with experimental data, repeating the experiment
    is conceptually straightforward. If you’re working with observational data, what
    experiment you should run may not be immediately clear. However, for your moderation
    effect to have any economic value, it must mean you’re planning to do something
    differently. Otherwise it’s just an interesting tidbit for cocktail parties. Whatever
    it is you would do differently, you can probably randomize it in some fashion,
    and now you have an experiment.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，我建议在可能的情况下通过后续实验验证有潜力的子群体。如果调节效应足够大以至于有商业价值，那么应该考虑进行进一步验证。如果你正在处理实验数据，重复实验在概念上是直接的。如果你正在处理观察数据，你应该运行哪种实验可能并不立即清楚。然而，你的调节效应要有任何经济价值，就必须意味着你计划做一些不同的事情。否则，它只是餐会上的一个有趣细节。不论你要做的是什么，你可能可以以某种方式随机化它，现在你有了一个实验。
- en: One key success factor in this process is to appropriately convey to business
    partners that the results of such repeated testing should be considered provisional
    hypotheses, not proven fact. They shouldn’t feel like you’ve failed to deliver
    when an experiment yields a null result because it was a long shot anyway. Also
    remember that due to the nature of the process, your final effect size is likely
    to be smaller than what you found in the first pass.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个过程中的一个关键成功因素是恰当地向业务伙伴传达这样重复测试的结果应被视为暂时性假设，而不是已经证明的事实。当一个实验因为它本来就是一个长期的尝试而产生了零结果时，他们不应该感觉你没有交付。还要记住，由于过程的性质，最终的效果大小可能比你在第一次尝试中发现的要小。
- en: Nonlinearities
  id: totrans-212
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 非线性
- en: Nonlinearities, a.k.a. self-moderation, represent a special case compared to
    other forms of moderation because, by definition, there is only one moderator
    under consideration, which limits the risk of false positives. In addition, the
    consequences of a false positive are typically limited, as long as you don’t draw
    inference outside of the range of data available. For example, if you were to
    measure the effect of income on purchases based mostly on customers with annual
    incomes between $25,000 and $75,000 and then draw inferences for customers with
    an annual income of $250,000, both the risks and consequences of a false positive
    are high (even without considering moderation, extrapolating that far out would
    be a terrible idea anyway).
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 非线性，即自我调节，在与其他形式的调节相比，代表了一个特殊情况，因为根据定义，只有一个调节变量在考虑范围内，这限制了误报的风险。此外，误报的后果通常是有限的，只要你不从可用数据范围外推断。例如，如果你基本上基于年收入在25,000到75,000美元之间的顾客测量收入对购买的影响，然后为年收入25万美元的顾客推断，即使不考虑调节，误报的风险和后果也是高的（总之，这样推断是一个可怕的想法）。
- en: Therefore, it’s mostly OK to routinely test your cause of interest for self-moderation
    if you have at least a few hundred rows in your data. The variable must also be
    numeric, because a categorical variable self-moderating would be nonsensical.
    You should then validate the self-moderation effect by building a Bootstrap confidence
    interval, as we’ll see a bit later in this section.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果您的数据至少有几百行，通常可以定期测试您感兴趣的原因以进行自我调节。该变量必须是数值型，因为分类变量进行自我调节是不合理的。然后，您应该通过构建Bootstrap置信区间来验证自我调节效应，我们稍后将在本节中看到。
- en: Beyond improving the fit of your regression and accounting for intuitive behavioral
    effects such as decreasing returns, including self-moderation in your regression
    can alert you to the presence of a hidden moderator.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 除了改进回归模型的拟合度和考虑直观行为效应，例如递减回报之外，将自我调节纳入回归模型中可以提醒您存在隐藏的调节变量。
- en: 'Let’s look at a C-Mart example: the relationship between visit duration and
    groceries purchases. It is conceivable that very short visits represent targeted
    shopping runs to buy a specific article whereas longer trips are more likely to
    be grocery runs. This would make the reason for a visit a confounder of the relationship
    between *VisitDuration* and *GroceriesPurchases* ([Figure 11-14](#reason_for_visit_is_a_confounder_of_the)).'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一个C-Mart的例子：访问持续时间和杂货购买之间的关系。可以想象，非常短的访问代表有针对性的购物行程以购买特定物品，而较长的行程更可能是杂货购物。这将使访问原因成为
    *访问持续时间* 和 *杂货购买* 之间关系的混淆因素（[图11-14](#reason_for_visit_is_a_confounder_of_the)）。
- en: '![Reason for visit is a confounder of the relationship between VisitDuration
    and GroceriesPurchases](Images/BEDA_1114.png)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![访问原因是访问持续时间和杂货购买之间关系的混淆因素](Images/BEDA_1114.png)'
- en: Figure 11-14\. Reason for visit is a confounder of the relationship between
    VisitDuration and GroceriesPurchases
  id: totrans-218
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-14\. 访问原因是访问持续时间和杂货购买之间关系的混淆因素
- en: But at the same time, *VisitReason* might conceivably moderate the effect of
    *VisitDuration* on *GroceriesPurchases*. If you’re going to the store to grab
    a birthday gift or a hammer, keeping you in the store longer (e.g., by adding
    a play area) is unlikely to entice you to buy sun-dried tomatoes the way it might
    if you’re doing a grocery run ([Figure 11-15](#reason_for_visit_moderates_the_effect_o)).
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 但同时，*访问原因* 可能会理论上调节 *访问持续时间* 对 *杂货购买* 的影响。如果你去商店买生日礼物或锤子，让你在店里逗留更长时间（例如添加一个游乐区）不太可能诱使你购买晒干番茄，而这在你进行杂货购物时可能会起作用（[图11-15](#reason_for_visit_moderates_the_effect_o)）。
- en: '![Reason for visit moderates the effect of VisitDuration on GroceriesPurchases](Images/BEDA_1115.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![访问原因调节访问持续时间对杂货购买的影响](Images/BEDA_1115.png)'
- en: Figure 11-15\. Reason for visit moderates VisitDuration’s effect on GroceriesPurchases
  id: totrans-221
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-15\. 访问原因调节访问持续时间对杂货购买的影响
- en: 'If we were able to observe the reason for the visit, we would be able to add
    it to our CD, and it would become a straightforward case of confounding + moderation.
    Assuming that we can’t observe the reason for the visit, we’re left with the following
    observable facts:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们能观察到访问原因，我们就能将其添加到我们的CD中，并且它将成为一个明显的混淆+调节案例。假设我们不能观察访问原因，我们只能留下以下可观察的事实：
- en: '*GroceriesPurchases* is positively correlated with *VisitDuration* (both because
    of a true effect and because of the confounding effect of reason for visit).'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*杂货购买* 与 *访问持续时间* 正相关（既因为真实效应，也因为访问原因的混淆效应）。'
- en: Increasing visit duration has a bigger impact on groceries purchases for longer
    visits than for shorter visits.
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加访问持续时间对较长访问的杂货购买影响更大，而对较短访问的影响较小。
- en: In other words, the relationship between *VisitDuration* and *GroceriesPurchases*
    exhibits nonlinearity. A self-moderation term would increase the accuracy of our
    regression, so we should include it.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，*访问持续时间* 和 *杂货购买* 之间的关系表现出非线性。自我调节项将提高我们回归的准确性，因此我们应该包含它。
- en: More generally, whenever you have a variable that appears to self-moderate without
    a clear behavioral rationale, you should explore the possibility of a hidden variable
    that is both a cause and a moderator of that variable.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 更一般地说，每当您有一个看似自我调节的变量而又没有明确的行为基础时，您都应该探索可能既是该变量的原因又是调节变量的隐藏变量的可能性。
- en: To recap, finding relevant moderators is an important part of behavioral analysis,
    but like most of our tools, it is often more art than science. In the experimental
    design stage, we can sharpen our behavioral logic by looking for moderated mediators
    in our historical data, or through UX testing of our treatment. In the data analysis
    stage, a fishing expedition can discover promising potential moderators; while
    Bootstrap confidence intervals help reduce the risk of false positives, follow-up
    experiments are ultimately your best guarantee of success. Conversely, self-moderation
    is safe to explore and include routinely.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，寻找相关的调节变量是行为分析的重要部分，但像大多数工具一样，它往往更多的是艺术而非科学。在实验设计阶段，我们可以通过历史数据中调节的中介变量或通过我们的处理进行用户体验测试来加深我们的行为逻辑。在数据分析阶段，钓鱼探险可以发现有前景的潜在调节变量；而自举法置信区间有助于减少假阳性的风险，跟进实验最终是你成功的最佳保证。相反，自我调节则安全地探索并定期包括。
- en: Multiple Moderators
  id: totrans-228
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 多个调节变量
- en: For the sake of simplicity, so far I’ve only shown one moderator at a time,
    but an effect can have multiple moderators. Going from one to multiple moderators
    is straightforward; the main subtlety to keep in mind is whether the moderators
    are interacting with each other or not.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简单起见，到目前为止，我只展示了一个调节变量，但效果可能有多个调节变量。从一个调节变量到多个调节变量的转变很简单；需要牢记的主要细微之处是调节变量是否彼此互动。
- en: Parallel moderators
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 平行调节变量
- en: Getting back to our C-Mart example, we could imagine that another demographic
    variable, *Age*, also separately moderates the effect of *PlayArea* on *VisitDuration*,
    as in [Figure 11-16](#the_effect_of_playarea_on_visitdurati).
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 回到我们的 C-Mart 示例，我们可以想象另一个人口统计变量*年龄*也分别调节了*游乐区*对*访问时长*的影响，如图[11-16](#the_effect_of_playarea_on_visitdurati)所示。
- en: '![The effect of PlayArea on VisitDuration has two moderators](Images/BEDA_1116.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![游乐区对访问时长的影响具有两个调节变量](Images/BEDA_1116.png)'
- en: Figure 11-16\. Effect of PlayArea on VisitDuration has two moderators
  id: totrans-233
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-16\. 游乐区对访问时长的影响具有两个调节变量
- en: The corresponding regression equation is shown in [Equation 11-3](#eqtn3).
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的回归方程式如[方程式 11-3](#eqtn3)所示。
- en: Equation 11-3\.
  id: totrans-235
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程式 11-3\.
- en: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children* + *β[a].Age* +
    *β[pc].(PlayArea* * Children) + *β[pa]*.(*PlayArea * Age*)'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '*访问时长* = *β*[0] + *β[p].游乐区* + *β[c].孩子* + *β[a].年龄* + *β[pc].(游乐区 * 孩子)* +
    *β[pa].(游乐区 * 年龄)*'
- en: Note that the equation includes an individual term for *Age*, even though there
    is no arrow going from *Age* to *VisitDuration*. The warning provided earlier
    still applies here, and you need to include all individual terms in your regression.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，即使*年龄*到*访问时长*之间没有箭头，方程式中仍包括*年龄*的个体项。前面提供的警告在这里仍然适用，你需要在回归中包含所有个体项。
- en: 'The interpretation of [Equation 11-3](#eqtn3) would be that:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '[方程式 11-3](#eqtn3)的解释将是：'
- en: The impact of *PlayArea* on *VisitDuration* is different for customers with
    and without children.
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*游乐区*对*访问时长*的影响对有和没有孩子的客户也不同。'
- en: The impact of *PlayArea* on *VisitDuration* is different for younger and older
    customers. These two moderating effects are independent of each other.
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*游乐区*对*访问时长*的影响在年轻和年长客户之间不同。这两个调节效应是彼此独立的。'
- en: '*Age* is a numeric variable, so its interpretation must be adjusted accordingly:
    the coefficient for *PlayArea * Age* represents the difference in the effect of
    *PlayArea* on *VisitDuration* between customers who have a one-year age difference.
    Depending on the business problem at hand, we can either:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '*年龄*是一个数值变量，因此其解释必须相应调整：*游乐区 * 年龄* 的系数代表了年龄相差一年的客户之间*游乐区*对*访问时长*影响的差异。根据手头的业务问题，我们可以选择：'
- en: Keep it in numeric format if we wanted to have a precise, causally grounded
    estimate of *VisitDuration*, for example to determine the increase in sales we
    should expect from adding a play area to a certain store.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们想要对*访问时长*进行精确、因果合理的估计，我们应该保持其数值化，例如确定向某个商店添加游乐区后我们可以预期的销售增长。
- en: Or make it categorical by “binning” it in an appropriate manner. For example,
    we could convert *Age* into brackets such as “less than 20,” “20 to 40,” “40+,”
    or any other breakdown, making the corresponding coefficients easier to interpret
    for segmentation purposes.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或通过适当的“分箱”方式使其分类化。例如，我们可以将*年龄*转换为“小于20岁”，“20至40岁”，“40岁以上”等分段，使相应的系数更容易用于分段目的的解释。
- en: Taken together, *Children* and *Age* create a two-dimension demographic segmentation
    that allows us to compare the average visit duration of, say, a 28-year-old with
    children to a 45-year-old without children.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，*Children*和*Age*形成了一个二维人口统计分割，使我们能够比较例如28岁有孩子的人与45岁无孩子的人的平均访问持续时间。
- en: Because the two moderation effects are independent of each other, we would be
    able to validate each one of them independently by bootstrapping the regression
    for [Equation 11-3](#eqtn3) and looking at the confidence interval for each moderator
    (see the next subsection).
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 因为这两种调节效应彼此独立，我们可以通过对[方程 11-3](#eqtn3)进行自助法回归来独立验证每一个调节效应，并查看每个调节变量的置信区间（请参见下一小节）。
- en: Note
  id: totrans-246
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注：
- en: 'This also implies that there is no order between the two moderators, and they
    can be drawn interchangeably: in [Figure 11-16](#the_effect_of_playarea_on_visitdurati),
    *Children* comes first but *Age* could as well. It doesn’t matter.'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 这也意味着这两个调节变量之间没有顺序之分，它们可以互换使用：在[图 11-16](#the_effect_of_playarea_on_visitdurati)中，*Children*排在前面，但*Age*同样可以先出现。这并不重要。
- en: The logic of multiple moderators applies similarly for interactions between
    variables of the same nature. For example, we could have *Children* interact with
    both *Age* and *Gender* ([Figure 11-17](#age_and_gender_both_interact_with_child)).
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 多个调节变量之间的逻辑同样适用于相同性质变量之间的交互作用。例如，我们可以让*Children*与*Age*和*Gender*都进行交互作用（[图 11-17](#age_and_gender_both_interact_with_child)）。
- en: '![Age and Gender both interact with Children](Images/BEDA_1117.png)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
  zh: '![年龄和性别与儿童均有交互作用](Images/BEDA_1117.png)'
- en: Figure 11-17\. Age and Gender both interact with Children
  id: totrans-250
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-17\. 年龄和性别都与儿童有交互作用
- en: 'The corresponding regression equation would be:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 对应的回归方程为：
- en: '*VisitDuration* = *β*[0] + *β[c].Children* + *β[a].Age* + *β[g].Gender* + *β[ca]*.(*Children*
    * *Age*) + *β[cg]*.(*Children* * *Gender*)'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[0] + *β[c].Children* + *β[a].Age* + *β[g].Gender* + *β[ca]*.(*Children*
    * *Age*) + *β[cg]*.(*Children* * *Gender*)'
- en: Finally, a regression can include multiple variables that each self-moderate.
    Here again, the analysis would proceed independently for each one of them.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，回归可以包括多个每个自我调节的变量。在这里，分析将独立进行每一个变量。
- en: Overall, it is very simple to add multiple independent moderators, but sometimes
    it also makes sense to assume that the moderators interact with each other, which
    we’ll now turn to.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 总体而言，添加多个独立的调节变量非常简单，但有时也有必要假设这些调节变量之间存在交互作用，接下来我们将详细讨论。
- en: Interacting moderators
  id: totrans-255
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 交互作用的调节变量
- en: Looking at the effect of *PlayArea* on *VisitDuration*, it makes sense that
    it would be moderated both by *Children* and *Age*. But among customers with children,
    we may also imagine that the increase in visit duration depends on the age of
    the customer, e.g., if grandparents are less likely to drop off their grandchildren
    at the play area than parents are to drop off their children. In such a case,
    the moderating effect of *Children* on the effect of *PlayArea* on *VisitDuration*
    would itself be moderated by *Age*, which in social sciences is called “moderated
    moderation” ([Figure 11-18](#moderated_moderation)).
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 分析*PlayArea*对*VisitDuration*的影响时，可以理解其受到*Children*和*Age*的共同调节。但在有儿童的顾客中，我们也可以想象，访问持续时间的增加取决于顾客的年龄，例如，如果祖父母不像父母那样带孩子去玩区，那么*Children*对*PlayArea*对*VisitDuration*的调节效应本身也会受到*Age*的调节，这在社会科学中称为“调节的调节”（[图 11-18](#moderated_moderation)）。
- en: '![Moderated moderation](Images/BEDA_1118.png)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![调节的调节](Images/BEDA_1118.png)'
- en: Figure 11-18\. Moderated moderation
  id: totrans-258
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-18\. 调节的调节
- en: '[Figure 11-19](#moderated_moderation_across_different_a) shows the moderated
    moderation at play, with each subgraph representing an age group among our customers.
    We can see that going from younger to older customers, the impact of *Children*
    on the impact of *PlayArea* on *VisitDuration* decreases (quite a mouthful!),
    as the distance between the two points for C = 1 decreases across subgraphs.'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 11-19](#moderated_moderation_across_different_a)展示了调节调节的作用，每个子图代表我们顾客中的一个年龄组。我们可以看到，从年轻到老的顾客，*Children*对*PlayArea*对*VisitDuration*的影响逐渐减弱（说起来很拗口！），因为C=1的两点之间的距离在子图中逐渐减小。'
- en: '![Moderated moderation across different age groups](Images/BEDA_1119.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![不同年龄组之间的调节调节](Images/BEDA_1119.png)'
- en: Figure 11-19\. Moderated moderation across different age groups
  id: totrans-261
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-19\. 不同年龄组之间的调节调节
- en: 'The corresponding equation would be as shown:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的方程如下所示：
- en: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children* + *β[a].Age* +
    *β[pc]*.(*PlayArea * Children*) + *β[pa]*.(*PlayArea * Age*)+ *β[ca]*.(*Children
    * Age*)+ *β[pca]*.(PlayArea * Children * Age)'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[0] + *β[p].PlayArea* + *β[c].Children* + *β[a].Age* +
    *β[pc]*.(*PlayArea * Children*) + *β[pa]*.(*PlayArea * Age*)+ *β[ca]*.(*Children
    * Age*)+ *β[pca]*.(PlayArea * Children * Age)'
- en: 'This equation is identical to [Equation 11-3](#eqtn3) with the addition of
    a three-way term at the end. Let’s run the regression (note how I entered only
    the three-way interaction term in the regression and the software automatically
    adds all the individual variables and two-way interaction terms):'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 这个方程与 [方程 11-3](#eqtn3) 相同，只是最后增加了一个三向项。让我们进行回归分析（注意我只输入了回归中的三向交互项，软件会自动添加所有单独的变量和两向交互项）。
- en: '[PRE8]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The coefficient for our 3-way term, the last one in the output, is negative,
    as well as economically meaningful, and the 90%-CI is approximately [–0.1671 ;
    –0.1590], which is narrow enough to give us confidence it can’t be close to zero.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 我们输出中的三元项系数是负的，经济上也是有意义的，90% 的置信区间大约是 [–0.1671 ; –0.1590]，这个区间足够狭窄，让我们对它不可能接近于零感到自信。
- en: Moderated moderation obeys the same logic and rules as simple moderation. Therefore
    it is symmetric, meaning that we can interpret *Age* as moderating the moderating
    effect of *Children*, or we can see it as *Children* moderating the moderating
    effect of *Age*the last one in the output.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 调节的调节遵循简单调节的相同逻辑和规则。因此，它是对称的，这意味着我们可以解释 *Age* 作为调节 *Children* 的调节效果，或者可以看作是
    *Children* 调节 *Age* 的调节效果。
- en: 'From a behavioral perspective, the interpretation of moderated moderation depends
    on whether the underlying logic is that of segmentation or interaction:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 从行为角度来看，调节的调节的解释取决于底层逻辑是分段还是交互：
- en: We would interpret it as segmentation if we have two personal-characteristic
    variables moderating a business characteristic or business behavior. That was
    the case for instance with the play area, where *Children* and *Age* moderate
    the effect of the *PlayArea* variable. Intuitively, this means that we have a
    two-dimension segmentation where the moderating effect of a dimension is increasing
    or decreasing along the other dimension (e.g., the moderating effect of having
    children decreases when *Age* increases).
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们有两个个人特征变量调节一个业务特征或业务行为，我们将其解释为分段。例如，这种情况出现在游乐区，其中 *Children* 和 *Age* 调节了
    *PlayArea* 变量的效果。直观地说，这意味着我们有一个二维分段，其中一个维度的调节效果沿着另一个维度增加或减少（例如，当 *Age* 增加时，有孩子的调节效果减少）。
- en: With three variables of the same nature, we would interpret it as a three-way
    interaction between three variables, as in [Figure 11-20](#three_way_interaction_between_three_bus).
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于三个同类型的变量，我们将其解释为三个变量之间的三向交互作用，如 [图 11-20](#three_way_interaction_between_three_bus)
    中所示。
- en: '![Three-way interaction between three business-characteristic variables](Images/BEDA_1120.png)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
  zh: '![三个业务特征变量之间的三向交互作用](Images/BEDA_1120.png)'
- en: Figure 11-20\. Three-way interaction between three business-characteristic variables
  id: totrans-273
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-20\. 三个业务特征变量之间的三向交互作用
- en: The point of this distinction is not to be pedantic, but to remind you to keep
    track of your analysis goals. Finding and validating moderation between predictors
    in a regression is all well and good, but what are you going to do with that information?
    You can *change* business behaviors, and sometimes business characteristics, but
    you can only *target* customers’ personal characteristics. Similarly, if you find
    that a certain customer behavior moderates the effect of a business behavior (e.g.,
    a cross-selling email campaign works best on customers who have recently been
    in a store), that information could be used either to target the customers who
    have exhibited this behavior, or to encourage customers to have that behavior
    in the first place.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 区分的重点不是学究式的，而是提醒您跟踪分析目标。在回归中找到和验证预测变量之间的调节确实很好，但您打算如何利用这些信息呢？您可以改变业务行为，有时也可以改变业务特征，但您只能针对客户的个人特征进行定位。同样地，如果您发现某种客户行为调节了业务行为的效果（例如，交叉销售电子邮件营销在最近到店的客户中效果最佳），这些信息可以用来定位展现这种行为的客户，或者鼓励客户首先表现出这种行为。
- en: Note
  id: totrans-275
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Technically speaking, moderated moderation could also apply to nonlinearities,
    by having a cube term (e.g., *Purchases* = *β*[0] + *β*[1]*.Emails* + *β*[2]*.Emails*²
    + *β*[3].*Emails*³), but that’s extremely rare and more of a curiosity devoid
    of practical applications.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 严格来说，调节的调节也可以应用于非线性，通过具有立方项（例如，*Purchases* = *β*[0] + *β*[1]*.Emails* + *β*[2]*.Emails*²
    + *β*[3].*Emails*³），但这种情况非常罕见，更多是一个缺乏实际应用的好奇心。
- en: At this point, you may have a budding or even full-fledged headache. Moderation
    can quickly get overly complex. I have shown you 3-way interactions to let you
    know that it’s a possibility, but I would not go down that path unless you have
    some reasonably strong preexisting behavioral rationale to do so. Beyond that,
    we could theoretically have 5-way or even 12-way interactions (“moderation of
    moderation of…”), but simply throwing in as many interaction terms as you can
    is a recipe for false positives and ultimately a dazzling but pointless model.
    A straightforward simple moderation is often all you need, and can add some significant
    oomph to your analysis at a reasonable cost in terms of added complexity.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，您可能已经开始头痛。调节效应很快会变得非常复杂。我向您展示了三路交互以让您知道这是可能的，但我不会在没有合理强大的行为基础的情况下走这条路。除此之外，理论上我们可以有五路甚至十二路的交互效应（“调节的调节…”），但是仅仅加入尽可能多的交互项会导致虚假阳性，最终形成令人眼花缭乱但无意义的模型。简单直接的调节效应通常已经足够，而且可以在增加的复杂性成本下为分析增添显著的力量。
- en: Validating Moderation with Bootstrap
  id: totrans-278
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用自助法验证调节效应
- en: So far, we have only looked at the regression coefficients for moderation terms,
    and not at p-values. But like any other regression coefficient, our coefficients
    for moderation are subject to uncertainty and sampling variability. Uncertainty
    is all the more important to account for with moderation because it is a “second
    order” effect (i.e., an effect on an effect, not a direct effect on a variable);
    these are typically much smaller than “first order” effects.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们只看了调节项的回归系数，而没有看p值。但是和任何其他回归系数一样，我们的调节系数也受到不确定性和抽样变异性的影响。在调节中更加重要考虑不确定性，因为它是“二阶”效应（即对变量的效应的效应），通常比“一阶”效应小得多。
- en: Let’s get back to our example of play areas in C-Mart. Our estimated coefficient
    for the moderation between *PlayArea* and *Children* was *β[pc]* = 21\. As usual,
    we’ll use Bootstrap simulations to determine how certain we can be of the values
    we observed. Let’s start by drawing 1,000 random samples of 10,000 rows each from
    the historical data available to us, and running each time the same regression
    as in the previous section. The distribution of values for the interaction coefficient
    is displayed in [Figure 11-21](#distribution_of_bootstrapped_values_fo).
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到C-Mart玩耍区的例子。我们对*PlayArea*和*Children*之间的调节效应的估计系数为*β[pc]* = 21。像往常一样，我们将使用自助法模拟来确定我们观察到的值的确定程度。让我们从可用的历史数据中每次抽取1,000个随机样本，每个样本包含10,000行，并运行与上一节相同的回归。交互系数的值分布显示在[图 11-21](#distribution_of_bootstrapped_values_fo)中。
- en: '![Distribution of bootstrapped values for interaction coefficient (1k samples
    of 10k rows)](Images/BEDA_1121.png)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![交互系数的自举值分布（来自10,000行的1,000个样本）](Images/BEDA_1121.png)'
- en: Figure 11-21\. Distribution of bootstrapped values for interaction coefficient
    (1k samples of 10k rows)
  id: totrans-282
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-21\. 交互系数的自举值分布（1k个10k行样本）
- en: 'In [Chapter 7](ch07.xhtml#measuring_uncertainty_with_the_bootstra), we saw
    that increasing the number of samples increased the smoothness of the histogram
    and the accuracy of confidence interval estimates, and increasing the size of
    the samples reduced the dispersion of values. Whether we need to do either of
    these depends on the business question at hand:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第7章](ch07.xhtml#measuring_uncertainty_with_the_bootstra)中，我们看到增加样本数量可以增加直方图的平滑度和置信区间估计的准确性，增加样本大小可以减少值的离散度。我们是否需要进行这些操作取决于手头的业务问题：
- en: If the question is, “Is there any moderation whatsoever?” (i.e., Is the coefficient
    *β[pc]* different from zero?), then [Figure 11-21](#distribution_of_bootstrapped_values_fo)
    already allows us to answer unequivocally “yes” and there’s no need to dig deeper.
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果问题是，“是否存在任何调节效应？”（即，系数*β[pc]*是否与零不同？），那么[图 11-21](#distribution_of_bootstrapped_values_fo)已经让我们能够明确回答“是”，并且没有必要深入挖掘。
- en: If the question is more uncertain, e.g., “How confident are we that the coefficient
    for moderation is above 20.5?” then we’ll have to increase the sample size. Right
    now, the histogram goes beyond 20.5 toward the left (and quite so). Each of the
    values lower than 20.5 represents a Bootstrap simulation where the coefficient
    for moderation was below that threshold. Let’s next increase the size of the Bootstrap
    samples to 200,000 rows ([Figure 11-22](#distribution_of_bootstrapped_values_f)).
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果问题更为不确定，例如，“我们有多大把握交互系数高于20.5？”那么我们将不得不增加样本大小。现在，直方图超过20.5朝左边延伸（而且相当多）。低于20.5的每个值代表一个Bootstrap模拟，其中调节系数低于该阈值。接下来，让我们增加Bootstrap样本大小至20万行（[图11-22](#distribution_of_bootstrapped_values_f)）。
- en: '![Distribution of bootstrapped values for interaction coefficient (1k samples
    of 200k rows)](Images/BEDA_1122.png)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![与交互系数相关的Bootstrap值分布（20万行的1千个样本）](Images/BEDA_1122.png)'
- en: Figure 11-22\. Distribution of bootstrapped values for interaction coefficient
    (1k samples of 200k rows)
  id: totrans-287
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图11-22\. 与交互系数相关的Bootstrap值分布（20万行的1千个样本）
- en: As you can see, the values are now much more narrowly concentrated around 21,
    and safely away from 20.5\. That second simulation was enough to answer our business
    question.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，这些值现在更加集中在21附近，并且安全地远离20.5。第二次模拟足以回答我们的业务问题。
- en: In the present case, we have a grand total of about 600,000 rows in our historical
    data so after validating the code with a dry run, we could have jumped directly
    to that sample size without much inconvenience (remember that you should never
    use a Bootstrap sample size larger than the size of the data you’re drawing from).
    But what if your historical data had 10 or 100 million rows? Instead of answering
    your business question in a matter of minutes, you would have spent hours or days
    waiting for the results of simulating a thousand samples of that size; certainly,
    your final CI would be extremely narrow, for example [20.9999; 21.0001], but that
    would be a complete waste of time if the question is only, “Is it higher than
    20.5?” That’s why I wanted to show you the process of progressively increasing
    the Bootstrap sample size, instead of jumping directly to the size of your historical
    data.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前情况下，我们的历史数据中总共约有600,000行，因此在通过干跑验证代码后，我们本可以直接跳转到这个样本大小，而几乎不会遇到什么麻烦（请记住，您不应该使用比您抽样数据量更大的Bootstrap样本大小）。但如果您的历史数据有1,000万或1亿行呢？如果不是几分钟内回答您的业务问题，您将花费数小时或数天等待模拟那么大数量样本的结果；当然，您的最终置信区间将非常窄，例如[20.9999;
    21.0001]，但如果问题仅是“高于20.5吗？”那将是完全浪费时间。这就是为什么我想向您展示逐步增加Bootstrap样本大小的过程，而不是直接跳转到您的历史数据大小。
- en: 'To summarize, after running a small Bootstrap simulation to make sure that
    your code runs correctly, you should increase the number of samples or the sample
    size as needed to answer your business question. This iterative process has the
    added benefit of engaging your critical sense and preventing you from running
    the analysis on autopilot. This applies to all forms of moderation: segmentation
    (including of experimental data), interaction, and self-moderation.'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，运行小规模Bootstrap模拟以确保您的代码正确运行后，应根据需要增加样本数量或样本大小来回答您的业务问题。这个迭代过程的额外好处是激发您的批判意识，避免您自动运行分析。这适用于所有形式的调节：分割（包括实验数据的分割），交互和自调节。
- en: Interpreting Individual Coefficients
  id: totrans-291
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 解释个别系数
- en: I mentioned several times in this chapter that the variables involved in moderation
    must also be included as individual variables in the regression, even if you don’t
    plan to use them or they don’t appear significant. If, however, you want to use
    them, there are some subtleties involved, that we’ll now review.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 我在本章中多次提到，参与调节的变量必须作为回归中的个别变量包括，即使您不打算使用它们或它们看起来不显著。然而，如果您想使用它们，这涉及到一些微妙之处，我们现在将进行审查。
- en: 'Let’s start by comparing the following two regressions (including only *Age*
    beyond *PlayArea* for the sake of simplicity):'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始比较以下两个回归（为简单起见，仅包括*年龄*，而不是*游戏区域*之外的变量）：
- en: '*VisitDuration* = *β*[0] + *β*[*p*0].*PlayArea* + *β*[*a*0].*Age*'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: '*访问时长* = *β*[0] + *β*[*p*0].*游戏区域* + *β*[*a*0].*年龄*'
- en: and
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: and
- en: '*VisitDuration* = *β*[1] + *β*[*p*1].*PlayArea* + *β*[*a*1].*Age* + *β*[*pa*1].(*PlayArea
    * Age*)'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '*访问时长* = *β*[1] + *β*[*p*1].*游戏区域* + *β*[*a*1].*年龄* + *β*[*pa*1].(*游戏区域 * 年龄*)'
- en: At first glance, it might seem that the interpretation of the second equation
    is identical to the first one, with the only addition of the moderation term.
    It is not. *β*[*p*0] and *β*[*p*1] are not equal and do not have the same meaning,
    and similarly for *β*[*a*0] and *β*[*a*1].
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 乍一看，第二个方程的解释似乎与第一个方程相同，只是增加了调节项。但事实并非如此。*β*[*p*0] 和 *β*[*p*1] 并不相等，也没有相同的含义，*β*[*a*0]
    和 *β*[*a*1] 也是如此。
- en: 'Let’s visualize the difference by drawing a sample of 1,000 data points for
    the sake of readability and representing them in the *Age * VisitDuration* plane
    (Figures [11-23](#sample_of_onecommazerozerozero_data_po) and [11-24](#sample_of_onecommazerozerozero_data_poi)).
    In both figures, there are two regression lines plotted: one for customers with
    a play area and one for customers with no play area.'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过绘制 1,000 个数据点的样本来直观地显示差异，为了可读性，将它们表示在 *Age * VisitDuration* 平面上（图 [11-23](#sample_of_onecommazerozerozero_data_po)
    和 [11-24](#sample_of_onecommazerozerozero_data_poi)）。在这两幅图中，都绘制了两条回归线：一条是有游乐区的顾客，另一条是没有游乐区的顾客。
- en: '[Figure 11-23](#sample_of_onecommazerozerozero_data_po) represents the first
    equation, without moderation. The two lines have the same slope, equal to *β*[*a*0]
    = -0.024, and the (constant) distance between the two lines is equal to *β*[*p*0]
    = 12.56.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 11-23](#sample_of_onecommazerozerozero_data_po) 表示第一个没有调节项的方程。这两条线的斜率相同，等于
    *β*[*a*0] = -0.024，而两条线之间的（常数）距离等于 *β*[*p*0] = 12.56。'
- en: '![Sample of 1,000 data points and regression lines with a play area (full dots,
    solid line) and without (crosses, dashed line), without moderation term](Images/BEDA_1123.png)'
  id: totrans-300
  prefs: []
  type: TYPE_IMG
  zh: '![带游乐区（实心点，实线）和不带游乐区（交叉点，虚线）的 1,000 个数据点和回归线，不带调节项](Images/BEDA_1123.png)'
- en: Figure 11-23\. Sample of 1,000 data points and regression lines with a play
    area (full dots, solid line) and without (crosses, dashed line), without moderation
    term
  id: totrans-301
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-23\. 1,000 个数据点的样本和回归线，带有游乐区（实心点，实线）和没有游乐区（交叉点，虚线），没有调节项
- en: '[Figure 11-24](#sample_of_onecommazerozerozero_data_poi) shows the corresponding
    figure for the second equation. The lines are not parallel. This implies that
    we can’t just say, “*β*[*p*1] represents the vertical distance between two regression
    lines,” we have to state at which age we’re measuring that vertical distance.
    Similarly, we can’t just say that “*β*[*a*1] represents the slope of these regression
    lines,” we have to pick which of these lines we’re referring to (i.e., we have
    to state for which value of *PlayArea* we’re measuring that slope).'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 11-24](#sample_of_onecommazerozerozero_data_poi) 展示了第二个方程的对应图。这些线不是平行的。这意味着我们不能只说，“*β*[*p*1]代表两条回归线之间的垂直距离”，我们必须说明我们测量这个垂直距离的年龄。同样地，我们不能只说“*β*[*a*1]代表这些回归线的斜率”，我们必须选择我们正在引用的这些线（即，我们必须说明我们测量该斜率的*PlayArea*的值）。'
- en: This has important ramifications from a business perspective. If a business
    partner asks, “What is the impact of a play area on visit duration?” and you’re
    relying on the first equation, without a moderation term, you can answer, “That
    impact is equal to *β*[*p*0].” However, if you’ve determined that there is a significant
    moderation effect between the two variables and you want to rely on the second
    equation (as you should), your answer should really be the “well, it depends”
    that business partners dread.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 这对于商业角度来看有重要的影响。如果商业伙伴问，“游乐区对访问时长有何影响？”而你依赖于第一个没有调节项的方程，你可以回答，“该影响等于 *β*[*p*0]。”然而，如果你已经确定这两个变量之间存在显著的调节效应，并且你想依赖于第二个方程（正如你应该的那样），你的答案应该是商业伙伴所畏惧的“嗯，这取决于”。
- en: 'Fortunately, this problem can easily be resolved with a little care, in two
    possible ways:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，只要稍加注意，这个问题可以很容易地通过两种可能的方式解决：
- en: Setting meaningful reference points
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置有意义的参考点
- en: Calculating effects at the level of business decisions
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在业务决策层面计算影响
- en: '![Sample of 1,000 data points and regression lines with a play area (full dots,
    solid line) and without (crosses, dashed line), with moderation term](Images/BEDA_1124.png)'
  id: totrans-307
  prefs: []
  type: TYPE_IMG
  zh: '![带游乐区（实心点，实线）和不带游乐区（交叉点，虚线）的 1,000 个数据点和回归线，带调节项](Images/BEDA_1124.png)'
- en: Figure 11-24\. Sample of 1,000 data points and regression lines with a play
    area (full dots, solid line) and without (crosses, dashed line), with moderation
    term
  id: totrans-308
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 11-24\. 1,000 个数据点的样本和回归线，带有游乐区（实心点，实线）和没有游乐区（交叉点，虚线），带有调节项
- en: Setting meaningful reference points
  id: totrans-309
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置有意义的参考点
- en: 'The first solution is to set meaningful reference points for our variables.
    First let’s get back to our equation with moderation:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个解决方案是为我们的变量设置有意义的参考点。首先让我们回到我们的方程，并适度进行：
- en: '*VisitDuration* = *β*[1] + *β*[*p*1].*PlayArea* + *β*[*a*1].*Age* + *β*[*pa*1].(*PlayArea
    * Age*)'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[1] + *β*[p1].*PlayArea* + *β*[a1].*Age* + *β*[pa1].(*PlayArea
    * Age*)'
- en: 'If we set a customer’s age to zero, the expected visit duration for our newborn
    customer is *β*[1] without a play area and *β*[1] + *β*[p1] with a play area.
    Therefore *β*[p1] is truthfully the impact of a play area on visit duration for
    age zero. However, newborn customers are not our primary target and we can do
    better by normalizing the *Age* variable. A typical approach is to set it to the
    average age in our data set:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们将客户的年龄设置为零，则我们的新生客户的预计访问时长为*β*[1]（没有游乐区）和*β*[1] + *β*[p1]（有游乐区）。因此，*β*[p1]实际上是游乐区对年龄为零客户访问时长的影响。然而，新生儿客户并非我们的主要目标，我们可以通过对*Age*变量进行归一化来进一步改进。一个典型的方法是将其设置为我们数据集中的平均年龄：
- en: '[PRE10]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-314
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Doing so reduces the coefficient for *PlayArea* from 15.85 to 12.56 and we
    can say, “The impact of a play area on visit duration is 12.56 additional minutes
    *for the average customer age in our data*.” Similarly, because *PlayArea* is
    a binary variable, *β*[*a*1] is by default the slope of the line for customers
    without a play area. You can change that by reversing the levels of *PlayArea*
    (i.e., setting 1 or “Y” as the default and 0 or “N” as the change, depending on
    how your binary variable is formulated):'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 这样做会将*PlayArea*的系数从15.85减少到12.56，我们可以说，“游乐区对访问时长的影响是12.56分钟 *对我们数据中平均客户年龄的影响*。”
    同样，因为*PlayArea*是一个二元变量，*β*[a1]通常是没有游乐区客户的线斜率。您可以通过颠倒*PlayArea*的级别（即将1或“Y”设置为默认值，0或“N”设置为变更值，具体取决于二元变量的构成方式）来改变这一点：
- en: '[PRE12]'
  id: totrans-316
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Changing the default level for *PlayArea* changes the coefficient for *β*[*a*1]
    from 0 to −0.07 (the slope of the upper solid line in [Figure 11-24](#sample_of_onecommazerozerozero_data_poi)).
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 改变*PlayArea*的默认级别将*β*[a1]的系数从0改变到−0.07（在[图 11-24](#sample_of_onecommazerozerozero_data_poi)中上部实线的斜率）。
- en: 'How should you set the defaults for your variables? It depends on the business
    problem at hand as well as the nature of the variable:'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该如何设置变量的默认值？这取决于手头的业务问题以及变量的性质：
- en: In some situations, the relevant default for a numeric variable is not the average,
    but the minimum, the maximum, or the average in a relevant subgroup (e.g., the
    average age of customers with children, or the average age of customers in stores
    with a play area as opposed to the global average). In particular, when you’re
    dealing with count variables such as number of children or number of calls, zero
    might be a better reference point than the average.
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下，数值变量的相关默认值不是平均值，而是最小值、最大值或相关子组的平均值（例如，有孩子客户的平均年龄，或者有游乐区店铺客户的平均年龄与全局平均值相比）。特别是在处理诸如儿童数量或呼叫数量等计数变量时，零可能比平均值更好作为参考点。
- en: For binary variables, the relevant default is usually the status quo. Here for
    example, you would set the default for *PlayArea* to 0 if you’re considering adding
    new play areas, and to 1 if you’re considering some of the existing ones.
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于二元变量，相关默认值通常是现状。例如，在考虑增加新游乐区时，您将为*PlayArea*设置默认值为0，而在考虑现有游乐区时，您将为其设置1。
- en: For categorical variables such as gender or state, unless there is a meaningful
    reference point, you can default to the most common category.
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于如性别或州等分类变量，除非有一个有意义的参考点，你可以将其默认设置为最常见的类别。
- en: 'Setting meaningful reference points for all the variables involved in moderation
    has the advantage of computational simplicity and is often straightforward. However,
    it can get quickly cumbersome as the number of variables involved increases. Let’s
    imagine for example that we add an interaction between state and gender to our
    regression:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 为涉及适度的所有变量设置有意义的参考点具有计算简单性的优势，通常也很直接。然而，随着涉及变量数量的增加，这种方法可能会迅速变得繁琐。例如，假设我们将性别和州之间的交互添加到我们的回归模型中：
- en: '*VisitDuration* =*β*[1] + *β[p]*[1].*PlayArea* + *β[a]*[1].*Age* + *β[pa]*[1].(*PlayArea
    * Age*) + *β[g]*[1].*Gender* + *β[s]*[1].*State* + *β[gs]*[1].(*Gender * State*)'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* = *β*[1] + *β*[p1].*PlayArea* + *β*[a1].*Age* + *β*[pa1].(*PlayArea
    * Age*) + *β*[g1].*Gender* + *β*[s1].*State* + *β*[gs1].(*Gender * State*)'
- en: 'Now *β[p]*[1] is the impact of a play area for customers of the reference age
    and gender in the reference state. “The effect of a play area is 10 for female
    California customers of age 43” starts to be a mouthful and can become rather
    meaningless if the variables are not independent: the fact that we have more female
    than male customers, that we have more customers in California than in any other
    state, and that the overall average age is 43 doesn’t imply that we have a lot
    of 43-year-old female California customers, or any whatsoever for that matter.
    This brings us to the other solution, calculating the average effect in our sample.'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 现在*β[p]*[1]代表参考年龄和性别、参考状态下的顾客对游乐区的影响。“对于43岁加州女性顾客，游乐区的影响为10”已经有点啰嗦了，如果变量不独立的话，可能会变得毫无意义：我们有比男性更多的女性顾客，我们在加州的顾客比其他州多，总体平均年龄为43岁并不意味着我们有很多43岁的女性加州顾客，甚至一个也没有。这就引出了另一种解决方案，在我们的样本中计算平均效果。
- en: Calculating effects at the level of business decisions
  id: totrans-326
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在业务决策层面计算效果
- en: From a scientific perspective, one of the main advantages of the previous approach
    is that it provides a single number for a coefficient, which can presumably be
    applied to completely different circumstances, or at least compared with the numbers
    obtained in other circumstances. However, the goal of applied analytics is not
    to measure things for the sake of measurement, but to guide business decisions
    (if you’re running a data analysis and you don’t know what possible decisions
    could come out of it, you need to have a conversation with your manager, because
    at least one of you is not doing their job correctly). Therefore, an alternative
    approach is to calculate the value of your effect variable of interest with and
    without that decision.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 从科学的角度来看，前一种方法的主要优势之一是它提供了一个系数的单一数字，这个数字可以推测地应用于完全不同的情况，或者至少可以与其他情况中得到的数字进行比较。然而，应用分析的目标并不是为了测量而测量，而是为了指导业务决策（如果你正在进行数据分析，但不知道可能出现什么决策，那么你需要与你的经理交流，因为你们中至少有一个人的工作做得不对）。因此，另一种替代方法是计算您感兴趣的效果变量的价值，无论有没有这个决定。
- en: 'Let’s imagine for example that the decision at hand for C-Mart is to pick the
    next store in which to set up a play area. To answer that question, we don’t need
    to determine the single “average” effect of a play area, and trying to do so would
    actually be counterproductive. Instead, for each store that doesn’t have a play
    area today, we can directly determine what would be the average additional visit
    duration if we added a play area. The process is as follows (the callout numbers
    are shared between R and Python):'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 比如说，C-Mart眼下需要做的决定是在哪个店铺设置游乐区。为了回答这个问题，我们无需确定游乐区的单一“平均”效果，实际上这样做反而会事倍功半。相反，对于今天没有游乐区的每个店铺，我们可以直接确定如果添加游乐区，额外平均访问时长会增加多少。流程如下（标注数字在R和Python中通用）：
- en: '[PRE14]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[![1](Images/1.png)](#comarker111a)'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '[![1](Images/1.png)](#comarker111a)'
- en: Run and save the model to use it for predictions.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 运行并保存模型以便用于预测。
- en: '[![2](Images/2.png)](#comarker112a)'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: '[![2](Images/2.png)](#comarker112a)'
- en: Select the stores without a play area today.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 选择今天没有游乐区的店铺。
- en: '[![3](Images/3.png)](#comarker113a)'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: '[![3](Images/3.png)](#comarker113a)'
- en: Add the predicted visit duration under the current circumstances, `pred_dur0`.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前情况下添加预测访问时长`pred_dur0`。
- en: '[![4](Images/4.png)](#comarker114a)'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: '[![4](Images/4.png)](#comarker114a)'
- en: Change the binary variable *PlayArea* from `0` to `1`.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 将二进制变量*PlayArea*从`0`更改为`1`。
- en: '[![5](Images/5.png)](#comarker115a)'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: '[![5](Images/5.png)](#comarker115a)'
- en: Determine the predicted visit duration with the added play area, `pred_dur1`.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 确定添加游乐区后的预测访问时长`pred_dur1`。
- en: '[![6](Images/6.png)](#comarker116a)'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '[![6](Images/6.png)](#comarker116a)'
- en: Calculate the difference between the two.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 计算两者之间的差异。
- en: '[![7](Images/7.png)](#comarker117a)'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: '[![7](Images/7.png)](#comarker117a)'
- en: Aggregate at the store level, either by looking at the average or total additional
    duration (the average is more intuitive, but the total relates more directly to
    business outcomes by favoring larger stores).
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 在店铺级别进行聚合，可以查看额外平均或总时长（平均更直观，但总数与业务结果更直接相关，因为它有利于较大的店铺）。
- en: 'We can then select the store(s) with the highest benefits of a play area. Crucially,
    you can check for yourself that centering numeric variables at the beginning of
    the process leads to the exact same final conclusions. Mathematically, that’s
    because we’re subtracting the same quantity from the two terms in a difference:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 我们随后可以选择具有游乐区最高收益的商店。关键是，您可以自行检查，在过程的开始处将数值变量居中会导致完全相同的最终结论。从数学上讲，这是因为我们正在从差异中减去两个项中的相同数量：
- en: (*VisitDuration*[*i*1] - *mean*(*VisitDuration*)) - (*VisitDuration*[*i*][0]
    - *mean*(*VisitDuration*)) = *VisitDuration[i]*[1] - *VisitDuration[i]*[0]
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: (*VisitDuration*[*i*1] - *mean*(*VisitDuration*)) - (*VisitDuration*[*i*][0]
    - *mean*(*VisitDuration*)) = *VisitDuration[i]*[1] - *VisitDuration[i]*[0]
- en: where *VisitDuration[i]*[1] and *VisitDuration[i]*[0] are the predicted visit
    duration, respectively with and without a play area (regardless of current conditions).
    Therefore, with a decision-centric perspective the reference points and centering,
    or lack thereof, are irrelevant and you don’t need to worry about that anymore.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 这里 *VisitDuration[i]*[1] 和 *VisitDuration[i]*[0] 分别是预测的访问持续时间，无论是否有游乐区（不考虑当前条件）。因此，从决策中心的角度来看，参考点和居中，或缺乏居中，都是无关紧要的，您不必再担心这一点。
- en: 'To recap: adding a moderation term changes the value and interpretation of
    the individual coefficients for the variables involved. This happens because the
    very definition of moderation is that these coefficients are not the same “everywhere,”
    and moderation changes the baseline values at which they are measured. The individual
    coefficients must thus be interpreted either in relation to relevant reference
    points of the variables involved (which you can adjust through centering), or
    across our entire data set but in relation to the decision at hand.'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下：添加调节项会改变所涉变量的各个系数的值和解释。这是因为调节的定义是这些系数在“任何地方”都不相同，而调节会改变它们被测量的基准值。因此，必须将各个系数的解释视为与所涉变量的相关参考点（通过居中可以调整）或整个数据集相关，但与手头的决策相关。
- en: Conclusion
  id: totrans-349
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: One of the key tenets of behavioral science is that “behavior is a function
    of the person and the environment.” That phrase is generally taken to mean that
    we can influence behaviors by changing the environment. That is certainly true
    but I also like to see it as a reminder that averages are just that, averages,
    and it behooves the diligent behavioral analyst to dig deeper with moderation
    analysis. In particular, I think that some of the recent failures to replicate
    classic psychology experiments would be best interpreted not as meaning that “there
    is no effect” but that “the effect is strongly moderated by population characteristics
    (i.e., the person) and experimental conditions (i.e., the environment).”
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 行为科学的一个关键原则之一是“行为是个人和环境的函数”。通常认为这句话意味着我们可以通过改变环境来影响行为。这当然是真的，但我也喜欢把它看作是一个提醒，即平均值只是平均值，勤奋的行为分析师应该通过调节分析进行深入挖掘。特别是，我认为最近一些经典心理学实验未能复制的失败最好不是解释为“没有效果”，而是“效果受到人口特征（即个人）和实验条件（即环境）的强烈调节”。
- en: This may seem to be a matter of academic interest only, but it’s not. In business
    settings, many heated discussions where both sides have commandeered anecdotal
    supporting evidence can be usefully recast in terms of moderation. What is true
    on the East Coast may not be on the West Coast. A training program may be effective
    with inexperienced staff but not with experienced employees, or vice versa. By
    definition, a regression without moderation would not be able to shed light on
    either of these two cases.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能看起来只是学术上的问题，但事实并非如此。在商业环境中，许多双方都拿出了以案例为支持证据的激烈讨论，这些讨论可以有益地以调节的方式重新构建。东海岸真实的情况在西海岸可能并不适用。一个培训计划可能对经验不足的员工有效，但对有经验的员工无效，反之亦然。根据定义，没有调节的回归将无法阐明这两种情况中的任何一种。
- en: 'This makes moderation analysis a very valuable, but often neglected, addition
    to the behavioral analytics tool belt. In this chapter, we saw that it can be
    applied both to observational and experimental data in a very simple way: add
    a multiplicative term between the two variables to your regression. In the next
    and last chapter, we’ll turn to another of the key behavioral data analysis tools,
    mediation.'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得调节分析成为行为分析工具中非常有价值但经常被忽视的补充。在本章中，我们看到它可以在观察和实验数据中非常简单地应用：在回归模型中添加两个变量之间的乘法项。在下一章，也是最后一章，我们将转向另一个关键的行为数据分析工具，中介分析。
- en: ^([1](ch11.xhtml#idm45968143988536-marker)) The caret is the symbol on the 6
    key of your keyboard.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](ch11.xhtml#idm45968143988536-marker)) 插字符号是你键盘上6键的符号。
- en: ^([2](ch11.xhtml#ch01fn28-marker)) Available in R as the `bf.test()` function
    from the [`onewaytests` package](https://oreil.ly/iq7KN) and in Python as the
    `stats.levene()` function from the `scipy` package, with the parameter `center='median'`.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: ^([2](ch11.xhtml#ch01fn28-marker)) 在R中作为[`onewaytests` package](https://oreil.ly/iq7KN)的`bf.test()`函数提供，并在Python中作为`scipy`包的`stats.levene()`函数提供，其中参数`center='median'`。
