<html><head></head><body><section class="pagenumrestart" data-pdf-bookmark="Chapter 1. Introduction" data-type="chapter" epub:type="chapter"><div class="chapter" id="introduction">&#13;
<h1><span class="label">Chapter 1. </span>Introduction</h1>&#13;
&#13;
<blockquote data-type="epigraph" epub:type="epigraph">&#13;
<p>“Data! Data! Data!” he cried impatiently. “I can’t make bricks without clay.”</p>&#13;
<p data-type="attribution">Arthur Conan Doyle</p>&#13;
</blockquote>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Ascendance of Data" data-type="sect1"><div class="sect1" id="idm45635769407464">&#13;
<h1>The Ascendance of Data</h1>&#13;
&#13;
<p>We<a data-primary="data science" data-secondary="ascendance of data" data-type="indexterm" id="idm45635769406104"/> live in a world that’s drowning in data.  Websites track every user’s every click.  Your smartphone is building up a record of your location and speed every second of every day.  “Quantified selfers” wear pedometers-on-steroids that are always recording their heart rates, movement habits, diet, and sleep patterns.  Smart cars collect driving habits, smart homes collect living habits, and smart marketers collect purchasing habits.  The internet itself represents a huge graph of knowledge that contains (among other things) an enormous cross-referenced encyclopedia; domain-specific databases about movies, music, sports results, pinball machines, memes, and cocktails; and too many government statistics (some of them nearly true!) from too many governments to wrap your head around.</p>&#13;
&#13;
<p>Buried in these data are answers to countless questions that no one’s ever thought to ask.  In this book, we’ll learn how to find them.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What Is Data Science?" data-type="sect1"><div class="sect1" id="idm45635769245848">&#13;
<h1>What Is Data Science?</h1>&#13;
&#13;
<p>There’s<a data-primary="data science" data-secondary="definition of term" data-type="indexterm" id="idm45635769244760"/> a joke that says a data scientist is someone who knows more statistics than a computer scientist and more computer science than a statistician. (I didn’t say it was a good joke.) In fact, some data scientists are—for all practical purposes—statisticians, while others are fairly indistinguishable from software engineers.  Some are machine learning experts, while others couldn’t machine-learn their way out of kindergarten.  Some are PhDs with impressive publication records, while others have never read an academic paper (shame on them, though).  In short, pretty much no matter how you define data science, you’ll find practitioners for whom the definition is totally, absolutely wrong.</p>&#13;
&#13;
<p>Nonetheless, we won’t let that stop us from trying.  We’ll say that a data scientist is someone who extracts insights from messy data.  Today’s world is full of people trying to turn data into insight.</p>&#13;
&#13;
<p>For<a data-primary="data science" data-secondary="applications of" data-tertiary="real-life examples of" data-type="indexterm" id="idm45635769241880"/> instance, the dating site OkCupid asks its members to answer thousands of questions in order to find the most appropriate matches for them.  But it also analyzes these results to figure out innocuous-sounding questions you can ask someone to find out <a href="https://theblog.okcupid.com/the-best-questions-for-a-first-date-dba6adaa9df2">how likely someone is to sleep with you on the first date</a>.</p>&#13;
&#13;
<p>Facebook asks you to list your hometown and your current location, ostensibly to make it easier for your friends to find and connect with you.  But it also analyzes these locations to <a href="https://www.facebook.com/notes/facebook-data-science/coordinated-migration/10151930946453859">identify global migration patterns</a> and <a href="https://www.facebook.com/notes/facebook-data-science/nfl-fans-on-facebook/10151298370823859">where the fanbases of different football teams live</a>.</p>&#13;
&#13;
<p>As a large retailer, Target tracks your purchases and interactions, both online and in-store. And it uses the <a href="https://www.nytimes.com/2012/02/19/magazine/shopping-habits.html">data to predictively model</a> which of its customers are pregnant, to better market baby-related purchases to them.</p>&#13;
&#13;
<p>In 2012, the Obama campaign employed dozens of data scientists who data-mined and experimented their way to identifying voters who needed extra attention, choosing optimal donor-specific fundraising appeals and programs, and focusing get-out-the-vote efforts where they were most likely to be useful. And in 2016 the Trump campaign <a href="https://www.wired.com/2016/11/facebook-won-trump-election-not-just-fake-news/">tested a staggering variety of online ads</a> and analyzed the data to find what worked and what didn’t.</p>&#13;
&#13;
<p>Now, before you start feeling too jaded: some data scientists also occasionally use their skills for good—<a href="https://www.marketplace.org/2014/08/22/tech/beyond-ad-clicks-using-big-data-social-good">using data to make government more effective</a>, <a href="https://dssg.uchicago.edu/2014/08/20/tracking-the-paths-of-homelessness/">to help the homeless</a>, and to <a href="https://plus.google.com/communities/109572103057302114737">improve public health</a>. But it certainly won’t hurt your career if you like figuring out the best way to get people to click on advertisements.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Motivating Hypothetical: DataSciencester" data-type="sect1"><div class="sect1" id="idm45635774821688">&#13;
<h1>Motivating Hypothetical: DataSciencester</h1>&#13;
&#13;
<p>Congratulations! You’ve just been hired to lead the data science efforts at DataSciencester, <em>the</em> social network for data scientists.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>When I wrote the first edition of this book, I thought that&#13;
“a social network for data scientists” was a fun, silly hypothetical.&#13;
Since then people have actually created social networks for data&#13;
scientists, and have raised much more money from venture capitalists&#13;
than I made from my book. Most likely there is a valuable lesson here&#13;
about silly data science hypotheticals and/or book publishing.</p>&#13;
</div>&#13;
&#13;
<p>Despite being <em>for</em> data scientists, DataSciencester has never actually invested in building its own data science practice. (In fairness, DataSciencester has never really invested in building its product either.)  That will be your job!  Throughout the book, we’ll be learning about data science concepts by solving problems that you encounter at work.  Sometimes we’ll look at data explicitly supplied by users, sometimes we’ll look at data generated through their interactions with the site, and sometimes we’ll even look at data from experiments that we’ll design.</p>&#13;
&#13;
<p>And because DataSciencester has a strong “not-invented-here” mentality, we’ll be building our own tools from scratch.  At the end, you’ll have a pretty solid understanding of the fundamentals of data science.  And you’ll be ready to apply your skills at a company with a less shaky premise, or to any other problems that happen to interest you.</p>&#13;
&#13;
<p>Welcome aboard, and good luck!  (You’re allowed to wear jeans on Fridays, and the bathroom is down the hall on the right.)</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Finding Key Connectors" data-type="sect2"><div class="sect2" id="idm45635774815000">&#13;
<h2>Finding Key Connectors</h2>&#13;
&#13;
<p>It’s<a data-primary="data science" data-secondary="applications of" data-tertiary="network analysis" data-type="indexterm" id="DSappfind01"/><a data-primary="key connectors, finding" data-type="indexterm" id="key01"/><a data-primary="network analysis" data-secondary="finding key connectors example" data-type="indexterm" id="NAkey01"/> your first day on the job at DataSciencester, and the VP of Networking is full of questions about your users. Until now he’s had no one to ask, so he’s very excited to have you aboard.</p>&#13;
&#13;
<p>In particular, he wants you to identify&#13;
who the “key connectors” are among data scientists.  To this end, he gives you&#13;
a dump of the entire DataSciencester network. (In real life, people don’t typically hand you the data you need. <a data-type="xref" href="ch09.html#getting_data">Chapter 9</a> is devoted to getting data.)</p>&#13;
&#13;
<p>What does this data dump look like?  It consists of a list of users, each represented by a <code>dict</code> that contains that user’s <code>id</code> (which is a number) and <code>name</code> (which, in one of the great cosmic coincidences, rhymes with the user’s <code>id</code>):</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">users</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">0</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Hero"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">1</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Dunn"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">2</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Sue"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">3</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Chi"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">4</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Thor"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">5</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Clive"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">6</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Hicks"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">7</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Devin"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">8</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Kate"</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"id"</code><code class="p">:</code> <code class="mi">9</code><code class="p">,</code> <code class="s2">"name"</code><code class="p">:</code> <code class="s2">"Klein"</code> <code class="p">}</code>&#13;
<code class="p">]</code></pre>&#13;
&#13;
<p>He also gives you the “friendship” data, represented as a list of pairs of IDs:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">friendship_pairs</code> <code class="o">=</code> <code class="p">[(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">2</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">3</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">),</code>&#13;
                    <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">7</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="mi">8</code><code class="p">),</code> <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">)]</code></pre>&#13;
&#13;
<p>For example, the tuple <code>(0, 1)</code> indicates that the data scientist with <code>id</code> 0 (Hero) and the data scientist with <code>id</code> 1 (Dunn) are friends. The network is illustrated in <a data-type="xref" href="#datasciencester_network_ch01">Figure 1-1</a>.</p>&#13;
&#13;
<figure><div class="figure" id="datasciencester_network_ch01">&#13;
<img alt="The DataSciencester network." src="assets/dsf2_0101.png"/>&#13;
<h6><span class="label">Figure 1-1. </span>The DataSciencester network</h6>&#13;
</div></figure>&#13;
&#13;
<p>Having friendships represented as a list of pairs is not the easiest way to work with them.&#13;
To find all the friendships for user 1, you have to iterate over every pair&#13;
looking for pairs containing 1. If you had a lot of pairs, this would take a long time.</p>&#13;
&#13;
<p>Instead, let’s create a <code>dict</code> where the keys are user <code>id</code>s and the values are&#13;
lists of friend <code>id</code>s. (Looking things up in a <code>dict</code> is very fast.)</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Don’t get too hung up on the details of the code right now.&#13;
In <a data-type="xref" href="ch02.html#python">Chapter 2</a>, I’ll take you through a crash course&#13;
in Python.  For now just try to get the general flavor of what we’re doing.</p>&#13;
</div>&#13;
&#13;
<p>We’ll still have to look at every pair to create the <code>dict</code>, but we only&#13;
have to do that once, and we’ll get cheap lookups after that:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># Initialize the dict with an empty list for each user id:</code>&#13;
<code class="n">friendships</code> <code class="o">=</code> <code class="p">{</code><code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">]:</code> <code class="p">[]</code> <code class="k">for</code> <code class="n">user</code> <code class="ow">in</code> <code class="n">users</code><code class="p">}</code>&#13;
&#13;
<code class="c1"># And loop over the friendship pairs to populate it:</code>&#13;
<code class="k">for</code> <code class="n">i</code><code class="p">,</code> <code class="n">j</code> <code class="ow">in</code> <code class="n">friendship_pairs</code><code class="p">:</code>&#13;
    <code class="n">friendships</code><code class="p">[</code><code class="n">i</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">j</code><code class="p">)</code>  <code class="c1"># Add j as a friend of user i</code>&#13;
    <code class="n">friendships</code><code class="p">[</code><code class="n">j</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">i</code><code class="p">)</code>  <code class="c1"># Add i as a friend of user j</code></pre>&#13;
&#13;
<p>Now that we have the friendships in a <code>dict</code>, we can easily ask questions of our graph, like “What’s the average number of connections?”</p>&#13;
&#13;
<p>First we find the <em>total</em> number of connections, by summing up the lengths of all the <code>friends</code> lists:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">number_of_friends</code><code class="p">(</code><code class="n">user</code><code class="p">):</code>&#13;
    <code class="sd">"""How many friends does _user_ have?"""</code>&#13;
    <code class="n">user_id</code> <code class="o">=</code> <code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">]</code>&#13;
    <code class="n">friend_ids</code> <code class="o">=</code> <code class="n">friendships</code><code class="p">[</code><code class="n">user_id</code><code class="p">]</code>&#13;
    <code class="k">return</code> <code class="nb">len</code><code class="p">(</code><code class="n">friend_ids</code><code class="p">)</code>&#13;
&#13;
<code class="n">total_connections</code> <code class="o">=</code> <code class="nb">sum</code><code class="p">(</code><code class="n">number_of_friends</code><code class="p">(</code><code class="n">user</code><code class="p">)</code>&#13;
                        <code class="k">for</code> <code class="n">user</code> <code class="ow">in</code> <code class="n">users</code><code class="p">)</code>        <code class="c1"># 24</code></pre>&#13;
&#13;
<p>And then we just divide by the number of users:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">num_users</code> <code class="o">=</code> <code class="nb">len</code><code class="p">(</code><code class="n">users</code><code class="p">)</code>                            <code class="c1"># length of the users list</code>&#13;
<code class="n">avg_connections</code> <code class="o">=</code> <code class="n">total_connections</code> <code class="o">/</code> <code class="n">num_users</code>   <code class="c1"># 24 / 10 == 2.4</code></pre>&#13;
&#13;
<p>It’s also easy to find the most connected people—they’re the people&#13;
who have the largest numbers of friends.</p>&#13;
&#13;
<p>Since there aren’t very many users, we can simply sort them from “most friends” to “least friends”:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># Create a list (user_id, number_of_friends).</code>&#13;
<code class="n">num_friends_by_id</code> <code class="o">=</code> <code class="p">[(</code><code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">],</code> <code class="n">number_of_friends</code><code class="p">(</code><code class="n">user</code><code class="p">))</code>&#13;
                     <code class="k">for</code> <code class="n">user</code> <code class="ow">in</code> <code class="n">users</code><code class="p">]</code>&#13;
&#13;
<code class="n">num_friends_by_id</code><code class="o">.</code><code class="n">sort</code><code class="p">(</code>                                <code class="c1"># Sort the list</code>&#13;
       <code class="n">key</code><code class="o">=</code><code class="k">lambda</code> <code class="n">id_and_friends</code><code class="p">:</code> <code class="n">id_and_friends</code><code class="p">[</code><code class="mi">1</code><code class="p">],</code>   <code class="c1"># by num_friends</code>&#13;
       <code class="n">reverse</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code>                                   <code class="c1"># largest to smallest</code>&#13;
&#13;
<code class="c1"># Each pair is (user_id, num_friends):</code>&#13;
<code class="c1"># [(1, 3), (2, 3), (3, 3), (5, 3), (8, 3),</code>&#13;
<code class="c1">#  (0, 2), (4, 2), (6, 2), (7, 2), (9, 1)]</code></pre>&#13;
&#13;
<p>One<a data-primary="degree centrality" data-type="indexterm" id="idm45635774259016"/><a data-primary="centrality" data-secondary="degree" data-type="indexterm" id="idm45635774231128"/> way to think of what we’ve done is as a way of identifying people who are somehow central to the network. In fact, what we’ve just computed is the network metric <em>degree centrality</em> (<a data-type="xref" href="#network_sized_by_degree">Figure 1-2</a>).</p>&#13;
&#13;
<figure><div class="figure" id="network_sized_by_degree">&#13;
<img alt="The DataSciencester network sized by degree." src="assets/dsf2_0102.png"/>&#13;
<h6><span class="label">Figure 1-2. </span>The DataSciencester network sized by degree</h6>&#13;
</div></figure>&#13;
&#13;
<p>This has the virtue of being pretty easy to calculate, but it doesn’t always give the results you’d want or expect.  For example, in the DataSciencester network Thor (<code>id</code> 4) only has two connections, while Dunn (<code>id</code> 1) has three. Yet when we look at the network, it intuitively seems like Thor should be more central. In <a data-type="xref" href="ch22.html#network_analysis">Chapter 22</a>, we’ll investigate networks in more detail, and we’ll look at more complex notions of centrality that may or may not accord better with our intuition.<a data-primary="" data-startref="key01" data-type="indexterm" id="idm45635774223976"/><a data-primary="" data-startref="DSappfind01" data-type="indexterm" id="idm45635774223032"/><a data-primary="" data-startref="NAkey01" data-type="indexterm" id="idm45635774222088"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Data Scientists You May Know" data-type="sect2"><div class="sect2" id="idm45635774814056">&#13;
<h2>Data Scientists You May Know</h2>&#13;
&#13;
<p>While<a data-primary="recommender systems" data-secondary="“Data Scientists You May Know” suggester" data-secondary-sortas="Data Scientists You May Know” suggester" data-type="indexterm" id="RSdata01"/><a data-primary="data science" data-secondary="applications of" data-tertiary="recommender systems" data-type="indexterm" id="DSaprec01"/> you’re still filling out new-hire paperwork, the VP of Fraternization comes by your desk.  She wants to encourage more connections among your members, and she asks you to design a “Data Scientists You May Know” suggester.</p>&#13;
&#13;
<p>Your first instinct is to suggest that users might know&#13;
the friends of their friends.  So you write some code to&#13;
iterate over their friends and collect the friends’ friends:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">foaf_ids_bad</code><code class="p">(</code><code class="n">user</code><code class="p">):</code>&#13;
    <code class="sd">"""foaf is short for "friend of a friend" """</code>&#13;
    <code class="k">return</code> <code class="p">[</code><code class="n">foaf_id</code>&#13;
            <code class="k">for</code> <code class="n">friend_id</code> <code class="ow">in</code> <code class="n">friendships</code><code class="p">[</code><code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">]]</code>&#13;
            <code class="k">for</code> <code class="n">foaf_id</code> <code class="ow">in</code> <code class="n">friendships</code><code class="p">[</code><code class="n">friend_id</code><code class="p">]]</code></pre>&#13;
&#13;
<p>When we call this on <code>users[0]</code> (Hero), it produces:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code></pre>&#13;
&#13;
<p>It includes user 0 twice, since Hero is indeed friends with both of his friends.  It includes users 1 and 2, although they are both friends with Hero already. And it includes user 3 twice, as Chi is reachable through two different friends:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">print</code><code class="p">(</code><code class="n">friendships</code><code class="p">[</code><code class="mi">0</code><code class="p">])</code>  <code class="c1"># [1, 2]</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">friendships</code><code class="p">[</code><code class="mi">1</code><code class="p">])</code>  <code class="c1"># [0, 2, 3]</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">friendships</code><code class="p">[</code><code class="mi">2</code><code class="p">])</code>  <code class="c1"># [0, 1, 3]</code></pre>&#13;
&#13;
<p>Knowing that people are friends of friends in multiple ways seems like interesting information, so maybe instead we should produce a <em>count</em> of mutual friends. And we should probably exclude people already known to the user:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">Counter</code>                   <code class="c1"># not loaded by default</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">friends_of_friends</code><code class="p">(</code><code class="n">user</code><code class="p">):</code>&#13;
    <code class="n">user_id</code> <code class="o">=</code> <code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">]</code>&#13;
    <code class="k">return</code> <code class="n">Counter</code><code class="p">(</code>&#13;
        <code class="n">foaf_id</code>&#13;
        <code class="k">for</code> <code class="n">friend_id</code> <code class="ow">in</code> <code class="n">friendships</code><code class="p">[</code><code class="n">user_id</code><code class="p">]</code>     <code class="c1"># For each of my friends,</code>&#13;
        <code class="k">for</code> <code class="n">foaf_id</code> <code class="ow">in</code> <code class="n">friendships</code><code class="p">[</code><code class="n">friend_id</code><code class="p">]</code>     <code class="c1"># find their friends</code>&#13;
        <code class="k">if</code> <code class="n">foaf_id</code> <code class="o">!=</code> <code class="n">user_id</code>                     <code class="c1"># who aren't me</code>&#13;
        <code class="ow">and</code> <code class="n">foaf_id</code> <code class="ow">not</code> <code class="ow">in</code> <code class="n">friendships</code><code class="p">[</code><code class="n">user_id</code><code class="p">]</code>   <code class="c1"># and aren't my friends.</code>&#13;
    <code class="p">)</code>&#13;
&#13;
&#13;
<code class="k">print</code><code class="p">(</code><code class="n">friends_of_friends</code><code class="p">(</code><code class="n">users</code><code class="p">[</code><code class="mi">3</code><code class="p">]))</code>               <code class="c1"># Counter({0: 2, 5: 1})</code></pre>&#13;
&#13;
<p>This correctly tells Chi (<code>id</code> 3) that she has two mutual friends with Hero (<code>id</code> 0) but only one mutual friend with Clive (<code>id</code> 5).</p>&#13;
&#13;
<p>As a data scientist, you know that you also might enjoy meeting users with similar interests. (This is a good example of the “substantive expertise” aspect of data science.)  After asking around, you manage to get your hands on this data, as a list of pairs <code>(user_id, interest)</code>:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">interests</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Hadoop"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Big Data"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"HBase"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Java"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Spark"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Storm"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Cassandra"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"NoSQL"</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"MongoDB"</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"Cassandra"</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"HBase"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"Postgres"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"Python"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"scikit-learn"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"scipy"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"numpy"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"statsmodels"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"pandas"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"R"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"Python"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"statistics"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"regression"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"probability"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"machine learning"</code><code class="p">),</code> <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"regression"</code><code class="p">),</code> <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"decision trees"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"libsvm"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"Python"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"R"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"Java"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"C++"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"Haskell"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"programming languages"</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"statistics"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"probability"</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"mathematics"</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"theory"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"machine learning"</code><code class="p">),</code> <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"scikit-learn"</code><code class="p">),</code> <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"Mahout"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"neural networks"</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"neural networks"</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"deep learning"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"Big Data"</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"artificial intelligence"</code><code class="p">),</code> <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"Hadoop"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"Java"</code><code class="p">),</code> <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"MapReduce"</code><code class="p">),</code> <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"Big Data"</code><code class="p">)</code>&#13;
<code class="p">]</code></pre>&#13;
&#13;
<p>For example, Hero (<code>id</code> 0) has no friends in common with Klein (<code>id</code> 9), but they share interests in Java and big data.</p>&#13;
&#13;
<p>It’s easy to build a function that finds users with a certain interest:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">data_scientists_who_like</code><code class="p">(</code><code class="n">target_interest</code><code class="p">):</code>&#13;
    <code class="sd">"""Find the ids of all users who like the target interest."""</code>&#13;
    <code class="k">return</code> <code class="p">[</code><code class="n">user_id</code>&#13;
            <code class="k">for</code> <code class="n">user_id</code><code class="p">,</code> <code class="n">user_interest</code> <code class="ow">in</code> <code class="n">interests</code>&#13;
            <code class="k">if</code> <code class="n">user_interest</code> <code class="o">==</code> <code class="n">target_interest</code><code class="p">]</code></pre>&#13;
&#13;
<p>This works, but it has to examine the whole list of interests for every search.  If we have a lot of users and interests (or if we just want to do a lot of searches), we’re probably better off building an index from interests to users:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code>&#13;
&#13;
<code class="c1"># Keys are interests, values are lists of user_ids with that interest</code>&#13;
<code class="n">user_ids_by_interest</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code>&#13;
&#13;
<code class="k">for</code> <code class="n">user_id</code><code class="p">,</code> <code class="n">interest</code> <code class="ow">in</code> <code class="n">interests</code><code class="p">:</code>&#13;
    <code class="n">user_ids_by_interest</code><code class="p">[</code><code class="n">interest</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">user_id</code><code class="p">)</code></pre>&#13;
&#13;
<p>And another from users to interests:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># Keys are user_ids, values are lists of interests for that user_id.</code>&#13;
<code class="n">interests_by_user_id</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code>&#13;
&#13;
<code class="k">for</code> <code class="n">user_id</code><code class="p">,</code> <code class="n">interest</code> <code class="ow">in</code> <code class="n">interests</code><code class="p">:</code>&#13;
    <code class="n">interests_by_user_id</code><code class="p">[</code><code class="n">user_id</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">interest</code><code class="p">)</code></pre>&#13;
&#13;
<p>Now it’s easy to find who has the most interests in common with a given user:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Iterate over the user’s interests.</p>&#13;
</li>&#13;
<li>&#13;
<p>For each interest, iterate over the other users with that interest.</p>&#13;
</li>&#13;
<li>&#13;
<p>Keep count of how many times we see each other user.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>In code:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">most_common_interests_with</code><code class="p">(</code><code class="n">user</code><code class="p">):</code>&#13;
    <code class="k">return</code> <code class="n">Counter</code><code class="p">(</code>&#13;
        <code class="n">interested_user_id</code>&#13;
        <code class="k">for</code> <code class="n">interest</code> <code class="ow">in</code> <code class="n">interests_by_user_id</code><code class="p">[</code><code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">]]</code>&#13;
        <code class="k">for</code> <code class="n">interested_user_id</code> <code class="ow">in</code> <code class="n">user_ids_by_interest</code><code class="p">[</code><code class="n">interest</code><code class="p">]</code>&#13;
        <code class="k">if</code> <code class="n">interested_user_id</code> <code class="o">!=</code> <code class="n">user</code><code class="p">[</code><code class="s2">"id"</code><code class="p">]</code>&#13;
    <code class="p">)</code></pre>&#13;
&#13;
<p>We could then use this to build a richer “Data Scientists You May Know” feature based on a combination of mutual friends and mutual interests.  We’ll explore these kinds of applications in <a data-type="xref" href="ch23.html#recommender_systems">Chapter 23</a>.<a data-primary="" data-startref="DSaprec01" data-type="indexterm" id="idm45635773433864"/><a data-primary="" data-startref="RSdata01" data-type="indexterm" id="idm45635773432952"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Salaries and Experience" data-type="sect2"><div class="sect2" id="idm45635774220232">&#13;
<h2>Salaries and Experience</h2>&#13;
&#13;
<p>Right<a data-primary="predictive models" data-secondary="salaries and experience example" data-type="indexterm" id="PMsalar1"/><a data-primary="data science" data-secondary="applications of" data-tertiary="predictive models" data-type="indexterm" id="DSappred01"/> as you’re about to head to lunch, the VP of Public Relations asks if you can provide some fun facts about how much data scientists earn.  Salary data is of course sensitive, but he manages to provide you an anonymous dataset containing each user’s <code>salary</code> (in dollars) and <code>tenure</code> as a data scientist (in years):</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">salaries_and_tenures</code> <code class="o">=</code> <code class="p">[(</code><code class="mi">83000</code><code class="p">,</code> <code class="mf">8.7</code><code class="p">),</code> <code class="p">(</code><code class="mi">88000</code><code class="p">,</code> <code class="mf">8.1</code><code class="p">),</code>&#13;
                        <code class="p">(</code><code class="mi">48000</code><code class="p">,</code> <code class="mf">0.7</code><code class="p">),</code> <code class="p">(</code><code class="mi">76000</code><code class="p">,</code> <code class="mi">6</code><code class="p">),</code>&#13;
                        <code class="p">(</code><code class="mi">69000</code><code class="p">,</code> <code class="mf">6.5</code><code class="p">),</code> <code class="p">(</code><code class="mi">76000</code><code class="p">,</code> <code class="mf">7.5</code><code class="p">),</code>&#13;
                        <code class="p">(</code><code class="mi">60000</code><code class="p">,</code> <code class="mf">2.5</code><code class="p">),</code> <code class="p">(</code><code class="mi">83000</code><code class="p">,</code> <code class="mi">10</code><code class="p">),</code>&#13;
                        <code class="p">(</code><code class="mi">48000</code><code class="p">,</code> <code class="mf">1.9</code><code class="p">),</code> <code class="p">(</code><code class="mi">63000</code><code class="p">,</code> <code class="mf">4.2</code><code class="p">)]</code></pre>&#13;
&#13;
<p>The natural first step is to plot the data (which we’ll see how to do in <a data-type="xref" href="ch03.html#visualizing_data">Chapter 3</a>). You can see the results in <a data-type="xref" href="#salaries">Figure 1-3</a>.</p>&#13;
&#13;
<figure><div class="figure" id="salaries">&#13;
<img alt="Salary by Years Experience." src="assets/dsf2_0103.png"/>&#13;
<h6><span class="label">Figure 1-3. </span>Salary by years of experience</h6>&#13;
</div></figure>&#13;
&#13;
<p>It seems clear that people with more experience tend to earn more. How can you turn this into a fun fact? Your first idea is to look at the average salary for each tenure:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># Keys are years, values are lists of the salaries for each tenure.</code>&#13;
<code class="n">salary_by_tenure</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code>&#13;
&#13;
<code class="k">for</code> <code class="n">salary</code><code class="p">,</code> <code class="n">tenure</code> <code class="ow">in</code> <code class="n">salaries_and_tenures</code><code class="p">:</code>&#13;
    <code class="n">salary_by_tenure</code><code class="p">[</code><code class="n">tenure</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">salary</code><code class="p">)</code>&#13;
&#13;
<code class="c1"># Keys are years, each value is average salary for that tenure.</code>&#13;
<code class="n">average_salary_by_tenure</code> <code class="o">=</code> <code class="p">{</code>&#13;
    <code class="n">tenure</code><code class="p">:</code> <code class="nb">sum</code><code class="p">(</code><code class="n">salaries</code><code class="p">)</code> <code class="o">/</code> <code class="nb">len</code><code class="p">(</code><code class="n">salaries</code><code class="p">)</code>&#13;
    <code class="k">for</code> <code class="n">tenure</code><code class="p">,</code> <code class="n">salaries</code> <code class="ow">in</code> <code class="n">salary_by_tenure</code><code class="o">.</code><code class="n">items</code><code class="p">()</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>This turns out to be not particularly useful, as none of the users have the same tenure, which means we’re just reporting the individual users’ salaries:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="p">{</code><code class="mf">0.7</code><code class="p">:</code> <code class="mf">48000.0</code><code class="p">,</code>&#13;
 <code class="mf">1.9</code><code class="p">:</code> <code class="mf">48000.0</code><code class="p">,</code>&#13;
 <code class="mf">2.5</code><code class="p">:</code> <code class="mf">60000.0</code><code class="p">,</code>&#13;
 <code class="mf">4.2</code><code class="p">:</code> <code class="mf">63000.0</code><code class="p">,</code>&#13;
 <code class="mi">6</code><code class="p">:</code> <code class="mf">76000.0</code><code class="p">,</code>&#13;
 <code class="mf">6.5</code><code class="p">:</code> <code class="mf">69000.0</code><code class="p">,</code>&#13;
 <code class="mf">7.5</code><code class="p">:</code> <code class="mf">76000.0</code><code class="p">,</code>&#13;
 <code class="mf">8.1</code><code class="p">:</code> <code class="mf">88000.0</code><code class="p">,</code>&#13;
 <code class="mf">8.7</code><code class="p">:</code> <code class="mf">83000.0</code><code class="p">,</code>&#13;
 <code class="mi">10</code><code class="p">:</code> <code class="mf">83000.0</code><code class="p">}</code></pre>&#13;
&#13;
<p>It might be more helpful to bucket the tenures:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">tenure_bucket</code><code class="p">(</code><code class="n">tenure</code><code class="p">):</code>&#13;
    <code class="k">if</code> <code class="n">tenure</code> <code class="o">&lt;</code> <code class="mi">2</code><code class="p">:</code>&#13;
        <code class="k">return</code> <code class="s2">"less than two"</code>&#13;
    <code class="k">elif</code> <code class="n">tenure</code> <code class="o">&lt;</code> <code class="mi">5</code><code class="p">:</code>&#13;
        <code class="k">return</code> <code class="s2">"between two and five"</code>&#13;
    <code class="k">else</code><code class="p">:</code>&#13;
        <code class="k">return</code> <code class="s2">"more than five"</code></pre>&#13;
&#13;
<p>Then we can group together the salaries corresponding to each bucket:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># Keys are tenure buckets, values are lists of salaries for that bucket.</code>&#13;
<code class="n">salary_by_tenure_bucket</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code>&#13;
&#13;
<code class="k">for</code> <code class="n">salary</code><code class="p">,</code> <code class="n">tenure</code> <code class="ow">in</code> <code class="n">salaries_and_tenures</code><code class="p">:</code>&#13;
    <code class="n">bucket</code> <code class="o">=</code> <code class="n">tenure_bucket</code><code class="p">(</code><code class="n">tenure</code><code class="p">)</code>&#13;
    <code class="n">salary_by_tenure_bucket</code><code class="p">[</code><code class="n">bucket</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">salary</code><code class="p">)</code></pre>&#13;
&#13;
<p>And finally compute the average salary for each group:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="c1"># Keys are tenure buckets, values are average salary for that bucket.</code>&#13;
<code class="n">average_salary_by_bucket</code> <code class="o">=</code> <code class="p">{</code>&#13;
  <code class="n">tenure_bucket</code><code class="p">:</code> <code class="nb">sum</code><code class="p">(</code><code class="n">salaries</code><code class="p">)</code> <code class="o">/</code> <code class="nb">len</code><code class="p">(</code><code class="n">salaries</code><code class="p">)</code>&#13;
  <code class="k">for</code> <code class="n">tenure_bucket</code><code class="p">,</code> <code class="n">salaries</code> <code class="ow">in</code> <code class="n">salary_by_tenure_bucket</code><code class="o">.</code><code class="n">items</code><code class="p">()</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Which is more interesting:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="p">{</code><code class="s1">'between two and five'</code><code class="p">:</code> <code class="mf">61500.0</code><code class="p">,</code>&#13;
 <code class="s1">'less than two'</code><code class="p">:</code> <code class="mf">48000.0</code><code class="p">,</code>&#13;
 <code class="s1">'more than five'</code><code class="p">:</code> <code class="mf">79166.66666666667</code><code class="p">}</code></pre>&#13;
&#13;
<p>And you have your soundbite: “Data scientists with more than five years’ experience earn 65% more than data scientists with little or no experience!”</p>&#13;
&#13;
<p>But we chose the buckets in a pretty arbitrary way.  What we’d really like is to make some statement about the salary effect—on average—of having an additional year of experience.  In addition to making for a snappier fun fact, this allows us to <em>make predictions</em> about salaries that we don’t know. We’ll explore this idea in <a data-type="xref" href="ch14.html#simple_linear_regression">Chapter 14</a>.<a data-primary="" data-startref="PMsalar1" data-type="indexterm" id="idm45635772997592"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Paid Accounts" data-type="sect2"><div class="sect2" id="idm45635773431752">&#13;
<h2>Paid Accounts</h2>&#13;
&#13;
<p>When<a data-primary="predictive models" data-secondary="paid accounts example" data-type="indexterm" id="idm45635772995112"/> you get back to your desk,&#13;
the VP of Revenue is waiting for you. She wants to better understand which users pay for accounts and which don’t. (She knows their names, but that’s not particularly actionable information.)</p>&#13;
&#13;
<p>You notice that there seems to be a correspondence between years of experience and paid accounts:</p>&#13;
&#13;
<pre data-type="programlisting">0.7  paid&#13;
1.9  unpaid&#13;
2.5  paid&#13;
4.2  unpaid&#13;
6.0  unpaid&#13;
6.5  unpaid&#13;
7.5  unpaid&#13;
8.1  unpaid&#13;
8.7  paid&#13;
10.0 paid</pre>&#13;
&#13;
<p>Users with very few and very many years of experience tend to pay;&#13;
users with average amounts of experience don’t. Accordingly, if you wanted to create a model—though this is definitely not enough data to base a model on—you might try to predict “paid” for users with very few and very many years of experience,&#13;
and “unpaid” for users with middling amounts of experience:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">def</code> <code class="nf">predict_paid_or_unpaid</code><code class="p">(</code><code class="n">years_experience</code><code class="p">):</code>&#13;
  <code class="k">if</code> <code class="n">years_experience</code> <code class="o">&lt;</code> <code class="mf">3.0</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="s2">"paid"</code>&#13;
  <code class="k">elif</code> <code class="n">years_experience</code> <code class="o">&lt;</code> <code class="mf">8.5</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="s2">"unpaid"</code>&#13;
  <code class="k">else</code><code class="p">:</code>&#13;
    <code class="k">return</code> <code class="s2">"paid"</code></pre>&#13;
&#13;
<p>Of course, we totally eyeballed the cutoffs.</p>&#13;
&#13;
<p>With more data (and more mathematics), we could build a model&#13;
predicting the likelihood that a user would pay based on his years of&#13;
experience.  We’ll investigate this sort of problem in <a data-type="xref" href="ch16.html#logistic_regression">Chapter 16</a>.<a data-primary="" data-startref="DSappred01" data-type="indexterm" id="idm45635772921528"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Topics of Interest" data-type="sect2"><div class="sect2" id="idm45635772920456">&#13;
<h2>Topics of Interest</h2>&#13;
&#13;
<p>As<a data-primary="data science" data-secondary="applications of" data-tertiary="extracting topics from data" data-type="indexterm" id="idm45635772918760"/> you’re wrapping up your first day, the VP of Content Strategy&#13;
asks you for data about what topics users are most interested in,&#13;
so that she can plan out her blog calendar accordingly.&#13;
You already have the raw data from the friend-suggester project:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">interests</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Hadoop"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Big Data"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"HBase"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Java"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Spark"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Storm"</code><code class="p">),</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s2">"Cassandra"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"NoSQL"</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"MongoDB"</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"Cassandra"</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"HBase"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s2">"Postgres"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"Python"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"scikit-learn"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"scipy"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"numpy"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"statsmodels"</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s2">"pandas"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"R"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"Python"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"statistics"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"regression"</code><code class="p">),</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="s2">"probability"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"machine learning"</code><code class="p">),</code> <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"regression"</code><code class="p">),</code> <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"decision trees"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="s2">"libsvm"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"Python"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"R"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"Java"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"C++"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"Haskell"</code><code class="p">),</code> <code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="s2">"programming languages"</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"statistics"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"probability"</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"mathematics"</code><code class="p">),</code> <code class="p">(</code><code class="mi">6</code><code class="p">,</code> <code class="s2">"theory"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"machine learning"</code><code class="p">),</code> <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"scikit-learn"</code><code class="p">),</code> <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"Mahout"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">7</code><code class="p">,</code> <code class="s2">"neural networks"</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"neural networks"</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"deep learning"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"Big Data"</code><code class="p">),</code> <code class="p">(</code><code class="mi">8</code><code class="p">,</code> <code class="s2">"artificial intelligence"</code><code class="p">),</code> <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"Hadoop"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"Java"</code><code class="p">),</code> <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"MapReduce"</code><code class="p">),</code> <code class="p">(</code><code class="mi">9</code><code class="p">,</code> <code class="s2">"Big Data"</code><code class="p">)</code>&#13;
<code class="p">]</code></pre>&#13;
&#13;
<p>One simple (if not particularly exciting) way to find the most popular interests is to count the words:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Lowercase each interest (since different users may or may not capitalize their interests).</p>&#13;
</li>&#13;
<li>&#13;
<p>Split it into words.</p>&#13;
</li>&#13;
<li>&#13;
<p>Count the results.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>In code:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="n">words_and_counts</code> <code class="o">=</code> <code class="n">Counter</code><code class="p">(</code><code class="n">word</code>&#13;
                           <code class="k">for</code> <code class="n">user</code><code class="p">,</code> <code class="n">interest</code> <code class="ow">in</code> <code class="n">interests</code>&#13;
                           <code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">interest</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code><code class="o">.</code><code class="n">split</code><code class="p">())</code></pre>&#13;
&#13;
<p>This makes it easy to list out the words that occur more than once:</p>&#13;
&#13;
<pre data-code-language="py" data-type="programlisting"><code class="k">for</code> <code class="n">word</code><code class="p">,</code> <code class="n">count</code> <code class="ow">in</code> <code class="n">words_and_counts</code><code class="o">.</code><code class="n">most_common</code><code class="p">():</code>&#13;
    <code class="k">if</code> <code class="n">count</code> <code class="o">&gt;</code> <code class="mi">1</code><code class="p">:</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="n">word</code><code class="p">,</code> <code class="n">count</code><code class="p">)</code></pre>&#13;
&#13;
<p>which gives the results you’d expect (unless you expect “scikit-learn” to get split into two words, in which case it doesn’t give the results you expect):</p>&#13;
&#13;
<pre data-type="programlisting">learning 3&#13;
java 3&#13;
python 3&#13;
big 3&#13;
data 3&#13;
hbase 2&#13;
regression 2&#13;
cassandra 2&#13;
statistics 2&#13;
probability 2&#13;
hadoop 2&#13;
networks 2&#13;
machine 2&#13;
neural 2&#13;
scikit-learn 2&#13;
r 2</pre>&#13;
&#13;
<p>We’ll look at more sophisticated ways to extract topics from data in <a data-type="xref" href="ch21.html#natural_language_processing">Chapter 21</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Onward" data-type="sect2"><div class="sect2" id="idm45635772919864">&#13;
<h2>Onward</h2>&#13;
&#13;
<p>It’s been a successful first day!&#13;
Exhausted, you slip out of the building before anyone can ask you for anything else.&#13;
Get a good night’s rest, because tomorrow is new employee orientation. (Yes, you went through a full day of work <em>before</em> new employee orientation.  Take it up with HR.)</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>