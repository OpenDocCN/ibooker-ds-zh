<html><head></head><body>
<div id="sbo-rt-content"><section class="pagenumrestart" data-pdf-bookmark="Chapter 1. Introduction to Geospatial Analytics" data-type="chapter" epub:type="chapter"><div class="chapter" id="introduction_to_geospatial_analytics">
<h1><span class="label">Chapter 1. </span>Introduction to Geospatial Analytics</h1>
<p>Are you a geographer, geologist, or computer scientist? Impressive, if you answered yes! I’m none of those: I am a spatial data analyst, interested in exploring data and integrating location information into data analysis.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="introduction to" data-type="indexterm" id="ix_geosintr"/></p>
<p>Geospatial data is collected everywhere. Appreciating the <em>where</em> in data analyses introduces a new dimension: comprehending the impact of a wider variety of features on a particular observation or outcome. For instance, I spend a lot of professional time examining large open source datasets in public health and health care. Once you become familiar with geocoding and spatial files, not only can you curate insights across multiple domains, but you can also recognize and target areas where profound social and economic gaps exist.</p>
<p>Early in my evolution as a data analyst, I began to realize I had bigger and more complex questions to consider, and I needed more resources.<a contenteditable="false" data-primary="Python" data-type="indexterm" id="idm45433742907408"/> With an eye toward working with United States census data, I enrolled in a course in applied analytics. I had worked in the R programming language, but this course was taught in Python. I made it through, but I discovered a lot in the following months that I wish I had learned along with basic Python. This book is meant to share what I wish I’d been taught.</p>
<p>What I hope to share here is not the complete coding paradigm of Python, nor is it a Python 101 course. Instead, it is meant to supplement your Python learning by showing you how to write actionable code so that you can learn by doing. The book contains simple examples that explore key concepts in detail. The graphics in earlier chapters will familiarize you with how the maps look and how different tools can render relationships. Later chapters explore the code and various platforms, empowering you to use Python as a resource for answering geospatial questions.<a contenteditable="false" data-primary="Python" data-secondary="integration into spatial analysis" data-type="indexterm" id="idm45433743028848"/> If you are looking for flexibility in manipulating data in both open source and proprietary systems, Python may be the missing piece of the puzzle. It is fairly easy to learn and has a variety of libraries for pivoting and reshaping tables, merging data, and generating plots.</p>
<p>Integrating Python into spatial analysis is the focus of this book.<a contenteditable="false" data-primary="OSMnx package" data-type="indexterm" id="idm45433742876832"/><a contenteditable="false" data-primary="OpenStreetMap (OSM)" data-type="indexterm" id="idm45433742875600"/> Open source platforms like <a href="http://openstreetmap.org">OpenStreetMap (OSM)</a> allow us to zoom in and add attributes. OSMnx is a Python package that lets you download spatial data from OSM and model, project, visualize, and analyze real-world street networks and structures in the landscape in a Jupyter Notebook, independent of any specific application or tool.<sup><a data-type="noteref" href="ch01.xhtml#ch01fn1" id="ch01fn1-marker">1</a></sup> You can download and model walkable, drivable, or bikeable urban networks with a single line of Python code, then easily analyze and visualize them. You can also download and work with other infrastructure types, amenities and points of interest, building footprints, elevation data, street bearings and orientations, speed, and travel times. <a data-type="xref" href="ch05.xhtml#openstreetmap_accessing_geospatial_data">Chapter 5</a> of this book offers an opportunity to dig a little deeper into OSM.</p>
<p>Using the principles of spatial data analysis, you can consider challenges at the local, regional, and global levels. These might include the environment, health care, biology, geography, economics, history, engineering, local government, urban planning, and supply chain management, to name a few. Even issues that seem local or regional cross physical and political boundaries, ecological regions, municipalities, and watersheds and possess a spatial component. Since maps are one of the first appreciations we have of data visualization, it makes sense that after interrogating your data you may become curious about location. This chapter will introduce you to some of the broad objectives of spatial data analysis and look at how geospatial information can affect our thinking.</p>
<section data-pdf-bookmark="Democratizing Data" data-type="sect1"><div class="sect1" id="democratizing_data">
<h1>Democratizing Data</h1>
<p>The accessibility of open source data tools and massive open online courses (MOOCs) has empowered a new cohort of citizen scientists. <a contenteditable="false" data-primary="open source data tools and massive open online courses (MOOCs)" data-type="indexterm" id="idm45433742864048"/><a contenteditable="false" data-primary="democratizing data" data-type="indexterm" id="ix_democ"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="introduction to" data-tertiary="democratizing data" data-type="indexterm" id="ix_geosintrdemo"/>Now that the general public has access to location data and geospatial datasets, many people are becoming “data curious,” regardless of their professional titles or areas of study. Perhaps you’re a bird watcher and you’re interested in a certain species of bird—say, the blue heron. You might want to access spatial data to learn about its habitat. You might ask research questions like: Where are blue herons nesting? Where do they migrate? Which of their habitats support the most species, and how is this changing over time? You might create maps of your own sightings or other variables of interest.</p>
<p class="pagebreak-before less_space">In addition to personal or professional hobbies, geospatial analysts examine the socioeconomics of neighborhoods<a contenteditable="false" data-primary="socioeconomics of neighborhoods" data-type="indexterm" id="idm45433742990464"/> and how they change geographically over time. The study of environmental racism seeks to analyze how the built infrastructure can inhibit or influence health outcomes in marginalized communities. We’ll explore this idea a little later, when we generate a data question to explore.</p>
<p>The <a href="https://mapwarper.net">Map Warper</a> project is an open source collection of historical maps and current locations. The challenge is that older maps contain many errors due to outdated survey technology. <a contenteditable="false" data-primary="Map Warper project" data-type="indexterm" id="idm45433743058000"/>The Map Warper project is a map-rectification project: it aims to correct those errors to match today’s precise maps by searching for modern matching ground control points and warping the image accordingly. These control points are known coordinates spaced within areas of interest utilized as precise known locations. You can use rectified maps to explore development over time in different cities or to reimagine a historical location more accurately. How do investments in infrastructure and industrial development affect neighborhoods over time, for example? <a data-type="xref" href="#a_map_of_manhattan_from_oneeightsevenze">Figure 1-1</a> shows a rectified map. You can browse already rectified maps or assist the New York Public Library by aligning a map yourself. Everyone is welcome to participate!</p>
<p>There are many opportunities for professionals across multiple industries to include location intelligence in their analytics.<a contenteditable="false" data-primary="location intelligence" data-type="indexterm" id="idm45433742860960"/> Location intelligence is actionable information derived from exploring geospatial relationships—that is, formulating data questions and evaluating hypotheses. Since open source tools are welcoming new end users, we need a lexicon that works for people with diverse interests, resources, and learning backgrounds. I want you to be able to explore all of the tools this book discusses.</p>
<p>Although<a contenteditable="false" data-primary="subscription-based applications and tools" data-type="indexterm" id="idm45433752363200"/> powerful subscription-based applications and tools are available, they are mostly priced as enterprise solutions, not for individual users, which limits access for anyone not affiliated with a large institution. Take GIS software, for example: there are many options, all with pros and cons. <a contenteditable="false" data-primary="ArcGIS" data-type="indexterm" id="idm45433742992256"/>Two of the most prominent options are the Aeronautical Reconnaissance Coverage Geographic Information System, now known as ArcGIS, which I discuss in <a data-type="xref" href="ch06.xhtml#the_arcgis_python_api">Chapter 6</a>, and Quantum GIS, or QGIS, which is the topic of <a data-type="xref" href="ch03.xhtml#qgis_exploring_pyqgis_and_native_algori">Chapter 3</a>. In my professional work I use both, but when teaching, I like to give QGIS the main stage because it is truly open source: you don’t need to pay for different levels of licensing to access its tools.</p>
<figure><div class="figure" id="a_map_of_manhattan_from_oneeightsevenze"><img alt="A map of Manhattan from 1870 (top) and a rectified map of contemporary Manhattan (bottom)" height="1996" src="assets/pgda_0101.png" width="1441"/>
<h6><span class="label">Figure 1-1. </span>A map of Manhattan from 1870 (top) and a rectified map of contemporary Manhattan (bottom)</h6>
</div></figure>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>I learned the hard way just how expensive subscription-based tools can be. ArcGIS uses a credit system, and when I began using it, I didn’t realize that the paid service would kick in automatically when I uploaded a CSV file with location data. Don’t make that mistake! QGIS, on the other hand, offers two options—both free.<a contenteditable="false" data-primary="democratizing data" data-startref="ix_democ" data-type="indexterm" id="idm45433743009056"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="introduction to" data-startref="ix_geosintrdemo" data-tertiary="democratizing data" data-type="indexterm" id="idm45433742991408"/></p>
</div>
</div></section>
<section data-pdf-bookmark="Asking Data Questions" data-type="sect1"><div class="sect1" id="asking_data_questions">
<h1>Asking Data Questions</h1>
<p>National census bureaus are a rich source of data, especially about demographics.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="introduction to" data-tertiary="asking data questions" data-type="indexterm" id="ix_geosintrask"/><a contenteditable="false" data-primary="data questions, asking" data-type="indexterm" id="ix_daquest"/><a contenteditable="false" data-primary="ArcGIS" data-secondary="map visualizing county-level race variables in continental US" data-type="indexterm" id="idm45433742817024"/><a contenteditable="false" data-primary="ACS (American Community Survey) data" data-type="indexterm" id="idm45433742815808"/><a contenteditable="false" data-primary="census data" data-secondary="asking data questions" data-type="indexterm" id="ix_censask"/> I generated the map of the United States shown in <a data-type="xref" href="#an_arcgis_map_visualizing_county_level">Figure 1-2</a> in ArcGIS using US census data: specifically, county-level race variables from the American Community Survey (ACS).<sup><a data-type="noteref" href="ch01.xhtml#ch01fn2" id="ch01fn2-marker">2</a></sup> Publicly available resources like the US Census Bureau provide an <em>application programming interface (API):</em> a data transmission interface that lets anyone retrieve demographic data with a few lines of Python code. You can pull the specific data you want instead of downloading an entire massive dataset.</p>
<figure><div class="figure" id="an_arcgis_map_visualizing_county_level"><img alt="An ArcGIS map visualizing county-level race variables in the continental US" height="931" src="assets/pgda_0102.png" width="1843"/>
<h6><span class="label">Figure 1-2. </span>An ArcGIS map visualizing county-level race variables in the continental US</h6>
</div></figure>
<p>The polygons on the map are shaded in different colors corresponding to the racial categories used in the census and show where each group represents the majority of the local population. At first glance you can see clusters of categorical variables, but what else might you want to know? This is where geospatial data becomes so valuable. Can you answer your question with the data you have? You may need to reformulate your question if faced with missing data or resources you are unable to access. What might you determine about these clusters if you also examine other attributes?</p>
<p>You will have the opportunity to add nonspatial data as an additional layer in <a data-type="xref" href="ch07.xhtml#geopandas_and_spatial_statistics">Chapter 7</a>, when we use the Census Data API to explore US census data. For now, I will give you a hint: the devil is in the details—or should I say, the layers. Layers are collections of geographic data you can select based on your specific query. For example, in the layer in <a data-type="xref" href="#an_arcgis_map_visualizing_county_level">Figure 1-2</a>, polygons are shaded based on areas where a certain race is the majority population.</p>
<p>This is a good place to introduce the expression: the defaults should not be the endpoints. The default settings are where you should begin your analysis. What information is summarized in your data that might be best explored with additional granularity? A deeper understanding of GIS will allow you to move away from default settings and create unique and deeper insights.</p>
<p>You will explore how customizing your variable selection specifically for spatial and nonspatial attributes enhances the questions you ask and the insights you gather.</p>
<p>The first rule of spatial data analysis is that <em>any analysis requires a defined question</em>. What do you want to know? Do you have a hypothesis that you want to test? Once you formulate your research question, you can look for data that will help answer it.</p>
<p>When formulating a data question, I like <a contenteditable="false" data-primary="Tobler’s First Law of Geography" data-type="indexterm" id="idm45433742869296"/>to refer to Tobler’s First Law of Geography: “Everything is related to everything else, but near things are more related than distant things.”<sup><a data-type="noteref" href="ch01.xhtml#ch01fn3" id="ch01fn3-marker">3</a></sup> Applied directly to geospatial concepts, when you think about objects being “near,” the concept extends to time and space, not simply adjacency. For example, oceanfront homes may experience the direct impact of rising sea levels and intensified storms, but the ensuing flooding can disrupt a much larger region. You have to learn to think of spatial connectivity when thinking about spatial configurations and the “nearness” described in connected space.</p>
<p>To be clear, that doesn’t mean cherry-picking data to match the answers you want. You need to look at all of the relevant data to shape a hypothesis or generate an insight. In thinking about how to understand race and racism in the US, you might seek to reveal policy gaps, address unmet health needs, or foster empathy. Working backward from your goal, you might use geospatial data to examine how race intersects with place in arenas such as housing, employment, transportation, and education, to name a few. When you become familiar with census data, you begin to understand the heavy lifting race has been asked to accomplish. That’s the kind of research that spurred me to integrate geospatial applications like ArcGIS and QGIS into my talks about poverty, racial inequity, structural determinants of health, and a wide variety of emerging questions.<a contenteditable="false" data-primary="census data" data-secondary="asking data questions" data-startref="ix_censask" data-type="indexterm" id="idm45433742796384"/></p>
<p>When you rely on spreadsheets or tables without spatial data, you may be missing out on critical insights. Nonspatial data describes how values are distributed—and you can rely on descriptive statistics. <a contenteditable="false" data-primary="nonspatial data versus spatial analysis" data-type="indexterm" id="idm45433742807760"/>But what if you are curious about the impact spatial relationships might have on these values? Static metrics, such as the location of a road or a specific event, as well as dynamic measures like the spread of an infectious disease become more powerful when you integrate them with location intelligence. <em>Spatial analysis</em> examines the relationships between features identified within a geographic boundary.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="introduction to" data-startref="ix_geosintr" data-type="indexterm" id="idm45433743140576"/><a contenteditable="false" data-primary="data questions, asking" data-startref="ix_daquest" data-type="indexterm" id="idm45433742905040"/><a contenteditable="false" data-primary="spatial analysis" data-type="indexterm" id="idm45433742785600"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="introduction to" data-startref="ix_geosintrask" data-tertiary="asking data questions" data-type="indexterm" id="idm45433742879776"/></p>
</div></section>
<section data-pdf-bookmark="A Conceptual Framework for Spatial Data Science" data-type="sect1"><div class="sect1" id="a_conceptual_framework_for_spatial_data">
<h1>A Conceptual Framework for Spatial Data Science</h1>
<p>Geospatial problems are complex and change over space and time. <a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-type="indexterm" id="ix_spdasci"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-type="indexterm" id="ix_geosspdasccncpt"/> Look no further than current headlines to find examples: racial inequity, climate change, structural determinants of health, criminal justice, water pollution, unsustainable agriculture practices, ocean acidification, poverty, species endangerment and extinction, and economic strife. How does an individual’s location influence their health, well-being, or economic opportunity? You can answer questions like these using GIS, by discovering and showing spatial patterns in phenomena such as the diffusion rates of diseases, patients’ distances to the nearest hospital, and the locations of roadways, waterways, tree cover, and city walkability.</p>
<p>Spatial thinking includes considerations like proximity, overlap containment, adjacency, ways of measuring geographic space, and how geographical features and phenomena relate to one another. It is part of spatial literacy, a type of literacy that begins with content knowledge and encompasses an understanding of the Earth’s systems, how they interact with the sphere of human influence, and how geographic space is represented. Spatial literacy allows you to use maps and other spatial tools to reason and make key decisions about spatial concepts.<sup><a data-type="noteref" href="ch01.xhtml#ch01fn4" id="ch01fn4-marker">4</a></sup> For example, geometric visualization is a spatial literacy skill that includes calculating distances between features, calculating buffer regions (how far away one feature is from another, for example), and identifying areas or perimeters. </p>
<p>The <a href="https://www.agci.org">Aspen Global Change Institute</a> identifies six systems of the planet: the atmosphere, cryosphere, hydrosphere, biosphere, geosphere, and anthroposphere (or human presence on Earth). Geospatial data allows us to comprehend the <span class="keep-together">interconnectivity</span> of all these systems, and we can use big data—lots of data—to answer well-formulated data questions.</p>
<p>You don’t have to become an expert to retain important spatial literacy skills for bigger questions. If you understand at a fundamental level how things work in geospatial data and technology, you are already on your way to constructing more complex ideas. You will learn to formulate a data question and determine actionable steps toward developing your novel application or solution. For tools written with Python, the source code is available, and I encourage you to learn from, modify, extend, and share these and other analysis tools.</p>
<p>Let’s look at an example. The map you see in <a data-type="xref" href="#risk_index_summer_meals_left_parenthesi">Figure 1-3</a> was created as an exploration of economic precarity.</p>
<figure><div class="figure" id="risk_index_summer_meals_left_parenthesi"><img alt="Risk Index Summer Meals (ArcGIS) targeting expansion of US Department of Agriculture summer meal programs" height="931" src="assets/pgda_0103.png" width="1852"/>
<h6><span class="label">Figure 1-3. </span>Risk Index Summer Meals (ArcGIS) targeting expansion of US Department of Agriculture summer meal programs</h6>
</div></figure>
<p>The red <a contenteditable="false" data-primary="ArcGIS" data-secondary="Risk Index Summer Meals" data-type="indexterm" id="idm45433743049776"/>squares indicate populations in Washington, DC, where the average family could not afford a few hundred dollars to cover an unexpected emergency. These red squares show the families at the most risk for being unable to meet household expenses, and bigger squares reflect a larger number of households. The green squares are sites where, in 2020, the Summer Food Service Program (SFSP) served free meals to low-income children when school was not in session. Do you have any thoughts regarding where SFSP assigned the locations?</p>
<p>Looking at these layers of geospatial data together on the map in <a data-type="xref" href="#risk_index_summer_meals_left_parenthesi">Figure 1-3</a>, you can see the relevance of nonspatial data. You would be limited when interpreting tabular data without an understanding of population characteristics, like the size and location of the families affected and how and whether these characteristics influence the risk index.</p>
<p>Geographic information systems analyze data and display real-time geographic information across a wide variety of industries.<a contenteditable="false" data-primary="GIS" data-type="indexterm" id="idm45433742752992"/> Although there are similarities between spatial and nonspatial analyses, spatial statistics are developed specifically for use with geographic data. <a contenteditable="false" data-primary="nonspatial statistics" data-type="indexterm" id="idm45433742807056"/><a contenteditable="false" data-primary="spatial statistics" data-type="indexterm" id="idm45433742800032"/>Both are associated with geographic features, but spatial statistics look specifically at <em>geocoded</em> geographical spatial data. <a contenteditable="false" data-primary="geocoded geographical spatial data" data-type="indexterm" id="idm45433742742496"/>That is, they incorporate space (including proximity, area, connectivity, and other spatial relationships) directly into their mathematics. For example, think about the kinds of data that airports generate. There are nonspatial statistics for variables such as region, use (military or civilian/public), and lists of on-time arrivals and departures. There are also spatial components, such as runway elevation and geographical coordinates.</p>
<p>Complex problems are spatial. Where are these problems occurring, and how can we plan for better outcomes in the future?</p>
<section data-pdf-bookmark="Map Projections" data-type="sect2"><div class="sect2" id="map_projections">
<h2>Map Projections</h2>
<p>Our level of comfort in viewing maps belies their complexity.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-tertiary="map projections" data-type="indexterm" id="ix_geosspdasccncptmap"/><a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-tertiary="map projections" data-type="indexterm" id="ix_spdascimpprj"/><a contenteditable="false" data-primary="map projections" data-type="indexterm" id="ix_mapproj"/> Most maps contain multiple layers of information. We can make interactive maps layering multiple datasets and experiment with how we communicate findings. But we also need to exercise caution. Maps might be familiar, but familiarity isn’t the same as accuracy or competency. Projections are a great example.</p>
<p>Planet Earth is not perfectly spherical. That makes sense when you think of the chemical nature of the planet and how the centrifugal force caused by spinning in space tends to push out the middle, resulting in an oblate spheroid shape.<a contenteditable="false" data-primary="ellipsoid" data-type="indexterm" id="idm45433752531232"/> Technically, the Earth’s shape is an <em>ellipsoid</em>: its circumference around the poles is shorter than the circumference around the equator, almost like the planet has been squished from top to bottom.<a contenteditable="false" data-primary="geographic coordinate systems" data-type="indexterm" id="idm45433742832720"/> When we attempt to map the planet’s surface to create a two-dimensional map, we use a geographic coordinate system (<a data-type="xref" href="#geographic_coordinate_systems">Figure 1-4</a>) with latitude and longitude lines—called a <em>graticule</em>—to project that imperfect sphere, that coordinate system, onto a flat surface. <a contenteditable="false" data-primary="graticules" data-type="indexterm" id="idm45433742727648"/>The simplified projections account for complex factors, like how the earth’s gravitational field changes with alterations in topography.<a contenteditable="false" data-primary="geoid" data-type="indexterm" id="idm45433742728832"/> We call this the <em>geoid</em>. It is important to be aware that the whole world won’t fit on a piece of paper or a computer screen—at least, not in a visible, easily interpretable manner.</p>
<figure><div class="figure" id="geographic_coordinate_systems"><img alt="Geographic coordinate systems" height="1044" src="assets/pgda_0104.png" width="938"/>
<h6><span class="label">Figure 1-4. </span>Geographic coordinate systems</h6>
</div></figure>
<p>These different projections include <em>conic</em>, <em>azimuthal</em>, and <em>cylindrical</em>. And if you use OpenStreetMap or Google Maps, you’re familiar with the Web Mercator coordinate system. <a contenteditable="false" data-primary="Web Mercator coordinate system" data-type="indexterm" id="idm45433742719120"/><a contenteditable="false" data-primary="azimuthal projections" data-type="indexterm" id="idm45433742718480"/>Each has advantages and disadvantages, including distortions in area, distance, direction, and size. You will be glad to know that we don’t need to wrestle with these compromises alone—software manages much of the complicated math.</p>
<p>Getting to know the variations of these maps (<a data-type="xref" href="#some_equal_area_projections">Figure 1-5</a>) will allow you to select the optimal projection for your purposes. You will always have to make compromises and trade-offs, choosing which aspect to optimize and accepting a little bit of distortion in other aspects.<a contenteditable="false" data-primary="Mercator projection" data-type="indexterm" id="idm45433743024064"/> The popular Mercator projection (<a data-type="xref" href="#mercator_projection">Figure 1-6</a>) is useful for navigation but distorts the areas near the poles—which, famously, makes Greenland look enormous. You can see how different the visualizations are in the equal area projections shown in <a data-type="xref" href="#some_equal_area_projections">Figure 1-5</a>, but Greenland remains at the appropriate scale in all of them. In the Mercator projection in <a data-type="xref" href="#mercator_projection">Figure 1-6</a>, although South America is actually eight times larger than Greenland, they appear to be similar in size.<a contenteditable="false" data-primary="Hammer projection" data-type="indexterm" id="idm45433742714048"/><a contenteditable="false" data-primary="Lambert azimuthal equal-area projection" data-type="indexterm" id="idm45433742713408"/><a contenteditable="false" data-primary="Mollweide projection" data-type="indexterm" id="idm45433752435008"/><a contenteditable="false" data-primary="sinusoidal projection" data-type="indexterm" id="idm45433742714176"/><a contenteditable="false" data-primary="Winkel-Tripel projection" data-type="indexterm" id="idm45433742711600"/><a contenteditable="false" data-primary="Goode-homolosine projection" data-type="indexterm" id="idm45433742710624"/></p>
<figure><div class="figure" id="some_equal_area_projections"><img alt="Some equal area projections" height="1347" src="assets/pgda_0105.png" width="1441"/>
<h6><span class="label">Figure 1-5. </span>Some equal area projections</h6>
</div></figure>
<p>In my work in population health, area is the most critical aspect.<a contenteditable="false" data-primary="cylindrical projections" data-type="indexterm" id="idm45433742706736"/> It has to be maintained as accurately as possible on projections. When I’m mapping percentages or raw numbers on a map, I want to be as impartial as possible; if a small place looks too large compared to other places, there’s an inherent bias there that affects my interpretation of that map. I’m going to do my best to look at the projection’s weaknesses and its strengths and say, “I’m going to choose one that maintains area.” Maps that maintain <a contenteditable="false" data-primary="equal area projections" data-type="indexterm" id="idm45433742789600"/>area are called <em>equal area projections</em>. </p>
<figure><div class="figure" id="mercator_projection"><img alt="Mercator projection" height="701" src="assets/pgda_0106.png" width="1436"/>
<h6><span class="label">Figure 1-6. </span>Mercator projection</h6>
</div></figure>
<p>If I ensure that the measures most relevant to my visualization are captured in the coordinate system I select, I’m most of the way there. Naturally, I would like my values to match the actual values in the real world as closely as possible.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="map_error_scores">
<h5>Map Error Scores</h5>
<p>A map’s <a contenteditable="false" data-primary="map projections" data-secondary="map error scores" data-type="indexterm" id="idm45433743012976"/>degree of deviation<a contenteditable="false" data-primary="Goldberg-Gott error score" data-type="indexterm" id="idm45433743006496"/> from the accuracy of a globe (which is 0.0) is called <em>error</em>. It is typically measured by the Goldberg-Gott error score,<sup><a data-type="noteref" href="ch01.xhtml#ch01fn5" id="ch01fn5-marker">5</a></sup> which is derived from the normalized sum of the squares of the six parameters:</p>
<p><math><mrow><mrow><msub><mi mathvariant="normal">Σ</mi><mo>∈</mo></msub><mo>=</mo><mrow><mrow><msup><mrow><mo>(</mo><mrow><mfrac><mn>I</mn><msub><mi>N</mi><mi>i</mi></msub></mfrac></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow><mo>+</mo><mrow><msup><mrow><mo>(</mo><mrow><mfrac><mi>A</mi><msub><mi>N</mi><mi>a</mi></msub></mfrac></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow><mo>+</mo><mrow><msup><mrow><mo>(</mo><mrow><mfrac><mi>F</mi><msub><mi>N</mi><mi>f</mi></msub></mfrac></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow><mo>+</mo><mrow><msup><mrow><mo>(</mo><mrow><mfrac><mi>S</mi><msub><mi>N</mi><mi>s</mi></msub></mfrac></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow><mo>+</mo><mrow><msup><mrow><mo>(</mo><mrow><mfrac><mi>D</mi><msub><mi>N</mi><mi>d</mi></msub></mfrac></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow><mo>+</mo><mrow><msup><mrow><mo>(</mo><mrow><mfrac><mi>B</mi><msub><mi>N</mi><mi>b</mi></msub></mfrac></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow></mrow></mrow><mo>⁢</mo></mrow></math></p>
<p>The normalization constants (<em>x</em> = λ, <em>y</em> = φ) are: <em>Ni</em> = 0.51, <em>Na</em> = 0.41, <em>Nf</em> = 0.64, <em>Ns</em> = 0.60, <em>Nd</em> = 0.449, and <em>Nb</em> = 0.25. <em>I</em> = isotropy, <em>A</em> = area, <em>F</em> = flexion, <em>S</em> = skewness, <em>D</em> = distances, and <em>B</em> = boundary cuts for some standard projections.</p>
<p>A lower score reflects fewer errors or compromises in the rendering of the flat map, minimizing distortion in area, direction, and distance. For reference, a globe would be 0.0. The Mercator projection (<a data-type="xref" href="#mercator_projection">Figure 1-6</a>) has an error score of 8.296, while the Winkel tripel projection (one of the examples shown in <a data-type="xref" href="#some_equal_area_projections">Figure 1-5</a>) comes in at 4.563. The most recent <a href="https://oreil.ly/wUiBK">J. Richard Gott map</a> has the lowest error score to date: 0.881.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-startref="ix_geosspdasccncptmap" data-tertiary="map projections" data-type="indexterm" id="idm45433742665024"/><a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-startref="ix_spdascimpprj" data-tertiary="map projections" data-type="indexterm" id="idm45433742663584"/><a contenteditable="false" data-primary="map projections" data-startref="ix_mapproj" data-type="indexterm" id="idm45433742661696"/></p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Vector Data: Places as Objects" data-type="sect2"><div class="sect2" id="vector_data_places_as_objects">
<h2>Vector Data: Places as Objects</h2>
<p>Before we dig deeper into how to explore vector data in Python, I need to introduce a few concepts that will be useful as we move through the book.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-tertiary="vector data" data-type="indexterm" id="ix_geosspdasccncptvctr"/><a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-tertiary="vector data" data-type="indexterm" id="ix_spdascivctr"/><a contenteditable="false" data-primary="vector data" data-type="indexterm" id="ix_vctr"/> We’ll be working with <em>vector data,</em> which uses points, lines, and polygons to communicate data. We will use Python scripts and QGIS integrations to load datasets into a map and examine the structure of the vector data. I’ll also show you how different tools allow you to customize maps with colors and symbols to improve clarity and accuracy.</p>
<p><a data-type="xref" href="#arcgis_rendering_of_vector_data_showing">Figure 1-7</a> is an ArcGIS rendering of New York City’s Central Park and surrounding buildings. <a contenteditable="false" data-primary="ArcGIS" data-secondary="rendering of New York City's Central Park and surrounding buildings" data-type="indexterm" id="idm45433742730400"/>You can see that the geometry of each feature is represented as points, lines, or polygons. The geometry of a feature determines how it is rendered: as a point, line, or polygon. Additional information about the features might reveal the type of structure, year built, architectural dimensions, and other attributes<a contenteditable="false" data-primary="attribute tables" data-secondary="ArcGIS" data-type="indexterm" id="idm45433742731264"/> accessible in an <em>attribute table</em>.</p>
<figure><div class="figure" id="arcgis_rendering_of_vector_data_showing"><img alt="ArcGIS rendering of vector data showing building types in New York City, with attribute table" height="1125" src="assets/pgda_0107.png" width="1987"/>
<h6><span class="label">Figure 1-7. </span>ArcGIS rendering of vector data showing building types in New York City, with attribute table</h6>
</div></figure>
<p>Geographical systems can work with many types of data. You may see a vector data file designated<a contenteditable="false" data-primary="shapefiles (.shp)" data-type="indexterm" id="idm45433742644256"/> as a shapefile (formatted with the extension <em>.shp</em>) or geodatabase (<em>.gdb</em>). <a contenteditable="false" data-primary="geodatabase files (.gdb)" data-type="indexterm" id="idm45433742643152"/>Lidar (light detection and ranging) surveys are collected as vector data but are often created and stored in gridded raster data formats.<a contenteditable="false" data-primary="lidar (light detection and ranging) surveys" data-type="indexterm" id="idm45433742640832"/><a contenteditable="false" data-primary="file formats (GIS)" data-type="indexterm" id="idm45433742657696"/></p>
<p>Compare the file formats used with word-processing programs like Microsoft Word (.<em>docx</em>) to a simple text file (.<em>txt</em>). The content (the words on the page) might be the same in both files, but the complexity and sophistication are certainly less in the text file. If you wanted to share a piece of writing, why would you choose a text file? What if you wanted the document to be read by everyone regardless of software, or what if you wanted ease of portability or a smaller storage format?</p>
<p>GIS file formats work<a contenteditable="false" data-primary="GIS" data-secondary="file formats" data-type="indexterm" id="idm45433742636928"/> that way, too: although the content is the same, GIS file formats vary in functionality. Shapefiles do not have a topological or spatial layer, whereas with a geodatabase, such layers are optional. GIS file formats also vary in simplicity, redundancy, error detection, and storage size. Census geographic data uses TIGER/Line extracts, or shapefiles.<a contenteditable="false" data-primary="TIGER/Line extracts" data-type="indexterm" id="idm45433742808832"/> They are grouped as a set that includes digital files (vector coordinates with an <em>.shp</em> extension), an index (<em>.shx</em>), and dBase attribute data (<em>.dbf</em>).</p>
<p>The most familiar coordinate projection system is longitude and latitude.<a contenteditable="false" data-primary="geographic coordinate systems" data-secondary="longitude and latitude" data-type="indexterm" id="idm45433742852832"/><a contenteditable="false" data-primary="longitude and latitude" data-type="indexterm" id="idm45433742628896"/> These coordinates accurately describe where a particular place is on the Earth’s surface. You can be dropped anywhere in the world, and if you have your longitude (X) and latitude (Y), you know your location. <a contenteditable="false" data-primary="point feature" data-type="indexterm" id="idm45433742854240"/>This precise location is called a <em>point feature</em>. A <em>point attribute</em> has X and Y values as well, but attributes can be quantitative or qualitative descriptions. <a contenteditable="false" data-primary="point attribute" data-type="indexterm" id="idm45433742756080"/>The point attribute describes the feature. Optionally, a Z value can be used to represent values in three dimensions, with Z referring to elevation. When location data appears in a spreadsheet, you can use the columns for latitude and longitude to find a point. The air-quality spreadsheet shown in <a data-type="xref" href="#a_dataset_of_air_quality_measurements_t">Figure 1-8</a> includes geographic data (latitude and longitude) and nongeographic data (the air-quality measurement in the value column), allowing a GIS application to add information associated with a particular geographic location.</p>
<figure><div class="figure" id="a_dataset_of_air_quality_measurements_t"><img alt="A dataset of air-quality measurements that includes spatial and nonspatial data" height="559" src="assets/pgda_0108.png" width="1024"/>
<h6><span class="label">Figure 1-8. </span>A dataset of air-quality measurements that includes spatial and nonspatial data</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="Raster Data: Understanding Spatial Relationships" data-type="sect2"><div class="sect2" id="raster_data_understanding_spatial_relat">
<h2>Raster Data: Understanding Spatial Relationships</h2>
<p>Vector data focuses on what is visible in a particular location.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-startref="ix_geosspdasccncptvctr" data-tertiary="vector data" data-type="indexterm" id="idm45433742622112"/><a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-startref="ix_spdascivctr" data-tertiary="vector data" data-type="indexterm" id="idm45433742620416"/><a contenteditable="false" data-primary="vector data" data-type="indexterm" id="idm45433742618592"/> There are specific boundaries or areas on a map where data or objects are either present or absent.<a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-tertiary="raster data" data-type="indexterm" id="ix_spdascirstr"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-tertiary="raster data" data-type="indexterm" id="ix_geosspdasccncptrstr"/><a contenteditable="false" data-primary="raster data" data-type="indexterm" id="ix_rstr"/> You wouldn’t expect a building, or even a polygonal object representing a city, to exist in every location within a specific boundary.</p>
<p><em>Raster data</em>, on the other hand, is continuous data that lacks specific boundaries but is present across the entire map view, such as imagery, surface temperatures, and digital elevations. <em>Raster</em> is data displayed as a pixelated image matrix, such as that shown in <a data-type="xref" href="#san_francisco_depicted_as_a_raster_left">Figure 1-9</a>, instead of the points, lines, and polygons of vector data. Each pixel corresponds to a specific geographical location. Don’t worry if this seems abstract now: both types of data will be easier to visualize once we begin working with them. Perhaps slightly more intuitive, consider surface elevation, precipitation, or surface temperature. You can record these measures at each location included within your study location, regardless of your study view.</p>
<figure><div class="figure" id="san_francisco_depicted_as_a_raster_left"><img alt="San Francisco depicted as a raster (QGIS)" height="865" src="assets/pgda_0109.png" width="1391"/>
<h6><span class="label">Figure 1-9. </span>San Francisco depicted as a raster (QGIS)</h6>
</div></figure>
<p>So far, I am simply describing the distribution of points, polygons, or lines within our research location. Raster data is represented as an array of values divided into a grid of cells.<a contenteditable="false" data-primary="pixels" data-type="indexterm" id="idm45433742698368"/> The terms <em>cells</em> and <em>pixels</em> describe spatial resolution and are often used interchangeably. The dimension of the cell or pixel represents the area being covered. <em>Spatial data models</em> take these abstract representations of real-world objective and/or field views and explore mathematical relationships to model or predict relationships.<a contenteditable="false" data-primary="data models (spatial)" data-type="indexterm" id="idm45433742740496"/><a contenteditable="false" data-primary="spatial data models" data-type="indexterm" id="idm45433742693728"/></p>
<p>The big differentiator between photos and raster images is that rasters include data on the expanded bands of light wavelengths. This enhanced data, beyond simply red, green, and blue wavelengths, allows machine-learning models to distinguish among a wide variety of objects. This is because different objects reflect infrared light in different ways, yielding additional information in a multispectral image. Many space agencies around the world make data from their Earth observation satellites available freely. These datasets are immensely valuable to scientists, researchers, governments, and businesses.<a contenteditable="false" data-primary="hillshade raster" data-type="indexterm" id="idm45433742650400"/></p>
<p>A <em>hillshade</em> raster, as seen in <a data-type="xref" href="#san_francisco_depicted_as_a_raster_left">Figure 1-9</a>, uses light and shadow to create the 3D effect of the area in view.</p>
<p>It is necessary to consider multiple concepts simultaneously when reviewing a systems-level approach to GIS. The smaller components working within a larger system interact dynamically to reveal patterns in the system. Geometric visualization, for example, includes calculating distances between features, calculating buffer regions (how far away one feature is from another, for example), and identifying areas or perimeters. It will simplify our discussion if you think of these topics as parts of a whole. Understanding these introductory concepts will simplify your learning in the following chapters. It is important to begin with a baseline of spatial literacy.<a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-startref="ix_spdascirstr" data-tertiary="raster data" data-type="indexterm" id="idm45433742839264"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-startref="ix_geosspdasccncptrstr" data-tertiary="raster data" data-type="indexterm" id="idm45433742836912"/><a contenteditable="false" data-primary="raster data" data-startref="ix_rstr" data-type="indexterm" id="idm45433742902672"/><a contenteditable="false" data-primary="spatial data science" data-secondary="conceptual framework for" data-startref="ix_spdasci" data-type="indexterm" id="idm45433742911168"/><a contenteditable="false" data-primary="geospatial analytics" data-secondary="conceptual framework for spatial data science" data-startref="ix_geosspdasccncpt" data-type="indexterm" id="idm45433742587504"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Evaluating and Selecting Datasets" data-type="sect1"><div class="sect1" id="evaluating_and_selecting_datasets">
<h1>Evaluating and Selecting Datasets</h1>
<p>There are many datasets to explore for use in tutorials for learning a new skill, following along in a new application, or even launching your own independent geospatial project.<a contenteditable="false" data-primary="geospatial analytics" data-secondary="evaluating and selecting datasets" data-type="indexterm" id="idm45433742584704"/><a contenteditable="false" data-primary="datasets" data-secondary="evaluating and inspecting" data-type="indexterm" id="idm45433742611088"/> The datasets in this book have been vetted and found workable on a wide variety of applications and workflows.</p>
<p>Before selecting your dataset, you need to evaluate your options.<a contenteditable="false" data-primary="metadata" data-type="indexterm" id="idm45433742580144"/> Information about a dataset is called <em>metadata</em>. Often there is also a supplemental data file that describes attributes like field headings.<a contenteditable="false" data-primary="data dictionaries" data-type="indexterm" id="idm45433742576976"/><a contenteditable="false" data-primary="Landsat Data Dictionary" data-type="indexterm" id="idm45433742576272"/> This is called a <em>data dictionary</em>. You can explore an example: the <a href="https://oreil.ly/BgBaG">Landsat Data Dictionary</a>, published by the US Geological Survey (USGS).</p>
<p>You can learn a lot by looking through metadata. You might think of metadata as the label on a can of soup: you read it because you want to know what the ingredients are and whether the soup is good for you. <a data-type="xref" href="#example_of_metadata">Figure 1-10</a> shows an example of metadata. The most important information you’ll want to check should include the geographic area shown, the attributes listed, the map projection the dataset uses, its scale, and whether there is a fee to use it.</p>
<p>I suggest first attempting to follow along with the suggested data resources listed in this book. Once you feel confident, explore datasets related to your interests and see what you can discover.</p>
<figure><div class="figure" id="example_of_metadata"><img alt="Example of metadata" height="1666" src="assets/pgda_0110.png" width="2080"/>
<h6><span class="label">Figure 1-10. </span>Example of metadata</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="summary-id00013">
<h1>Summary</h1>
<p>The field of geospatial analysis is vast, and Python is an expansive topic about which much has been written. It’s hard to imagine any single book introducing either of these topics, let alone both, in a complete and authoritative manner. So I won’t attempt to do so in this book; instead, the goal here is to explain important foundational elements and introduce you to open source tools and datasets that you can use to answer geospatial questions.</p>
<p>This chapter presented an overview of important geospatial concepts like coordinate systems, projections, and the two main types of geospatial data: vectors and rasters. You also began to learn how to think spatially, and we finished with an introduction to datasets and how to choose what data to work with. Don’t be alarmed if this all seems like a lot! Right now, I just want to launch your curiosity by sharing the possibilities of working with open source geospatial data using Python. </p>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="ch01fn1"><sup><a href="ch01.xhtml#ch01fn1-marker">1</a></sup> Boeing, G. 2017. “OSMnx: New Methods for Acquiring, Constructing, Analyzing, and Visualizing Complex Street Networks.” <em>Computers, Environment and Urban Systems</em> 65: 126–139. <a href="https://doi.org/10.1016/j.compenvurbsys.2017.05.004"><em>https://doi.org/10.1016/j.compenvurbsys.2017.05.004</em></a>.</p><p data-type="footnote" id="ch01fn2"><sup><a href="ch01.xhtml#ch01fn2-marker">2</a></sup> The annual ACS replaced the long form of the decennial census in 2005. It asks a wide variety of questions to identify shifting demographics and gather information about local communities. Geographic census data from around the world is also available for download from the <a href="https://www.ipums.org">Integrated Public Use Microdata Series (IPUMS)</a>. IPUMS’s integration and documentation make it easy to study change, conduct comparative research, merge information across data types, and analyze individuals within family and community context. Its data and services are available free of charge.</p><p data-type="footnote" id="ch01fn3"><sup><a href="ch01.xhtml#ch01fn3-marker">3</a></sup> Tobler, W. 1970. “A Computer Movie Simulating Urban Growth in the Detroit Region.” <em>Economic Geography</em> 46 (Supplement): 234–240. <a href="https://doi.org/10.2307/143141"><em>https://doi.org/10.2307/143141</em></a>.</p><p data-type="footnote" id="ch01fn4"><sup><a href="ch01.xhtml#ch01fn4-marker">4</a></sup> To learn more about spatial literacy, see National Research Council. 2006. <em>Learning to Think Spatially</em>. Washington, DC: The National Academies Press. <a href="https://oreil.ly/i3olt"><em>https://oreil.ly/i3olt</em></a>.</p><p data-type="footnote" id="ch01fn5"><sup><a href="ch01.xhtml#ch01fn5-marker">5</a></sup> Gott, J. Richard, III, Goldberg, David M., and Vanderbei, Robert J. 2021. “Flat Maps that Improve on the Winkel Tripel.” arXiv preprint arXiv:2102.08176.</p></div></div></section></div></body></html>