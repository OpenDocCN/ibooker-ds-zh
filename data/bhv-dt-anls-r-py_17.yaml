- en: Chapter 12\. Mediation and Instrumental Variables
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第12章 调解和工具变量
- en: In the last chapter, we saw that moderation allows us to open the black box
    of a causal relationship by revealing groups for which that relationship is stronger
    or weaker. *Mediation* refers to the presence of an intermediary variable between
    two variables in a chain; it offers a different way to probe that black box by
    understanding the causal mechanism at play—the “how” of the causal effect.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们看到调节能够通过揭示特定群体中关系更强或更弱的特征，打开因果关系的黑匣子。*调解*指的是链条中两个变量之间存在中介变量的情况；它通过理解起作用的因果机制——因果效应的“如何”，提供了另一种探索黑匣子的方式。
- en: This has several benefits on both the causal and behavioral sides of our framework.
    From a causal perspective, mediation reduces the risk of false positives, and
    not accounting adequately for it can bias our analyses. From a behavioral perspective,
    mediation helps us better design and understand experiments. In a sense, mediation
    is nothing new, and most of the arguments in this chapter could have been summarized
    as “expand the chains in your CDs as much as you can, at least at the beginning.”
    But I believe such a simplification would have been a disservice to you, because
    the search for mediators is at the root of many scientific discoveries. “But why?”
    is one of the best follow-up questions after confirming the causal relationship
    between two variables. Customer satisfaction increases retention, *but why*? Is
    it because it reduces the probability of looking for alternatives or because it
    increases the customer’s opinion of the company?
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这对我们框架中因果和行为两方面都有多重好处。从因果角度看，调解减少了误报的风险，如果不充分考虑它可能会使我们的分析产生偏差。从行为角度看，调解帮助我们更好地设计和理解实验。在某种程度上，调解并不新鲜，本章中的大多数论点都可以总结为“尽可能扩展您的CD链，至少在开始时如此”。但我认为这样的简化会对你不利，因为寻找调解因素是许多科学发现的根源之一。“但为什么？”是确认两个变量之间因果关系后最好的后续问题之一。客户满意度增加了留存率，*但为什么*？是因为它减少了寻找替代品的可能性，还是因为它提高了客户对公司的看法？
- en: Mediation also offers a nice stepping stone for the last tool we’ll see in this
    book, instrumental variables (IVs). IVs, which are like mediation on steroids,
    allow us to answer questions that would otherwise be intractable. As promised
    at the beginning of the book, we’ll obtain an unbiased estimate of the effect
    of customer satisfaction on later purchasing behavior, and IVs make that possible.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 调解还为本书中最后一个工具，即工具变量（IVs），提供了一个很好的过渡。IVs可以像激素一样增强调解，使我们能够回答否则难以解决的问题。正如本书开头所承诺的，我们将获得关于客户满意度对后续购买行为影响的无偏估计，而IVs使这成为可能。
- en: 'In the next section, I’ll introduce you to mediation in the context of the
    C-Mart store play areas example from [Chapter 11](ch11.xhtml#introduction_to_moderation)
    and show you how mediation can make a causal-behavioral analysis more effective.
    Then in the second section, we’ll get to the grand finale: instrumental variables.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我将在C-Mart商店游乐区示例（来自[第11章](ch11.xhtml#introduction_to_moderation)）的背景下向你介绍调解，并展示调解如何使因果行为分析更加有效。然后在第二部分，我们将进入盛大结局：工具变量。
- en: Mediation
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调解
- en: Let’s continue with the C-Mart example from the previous chapter and assume
    that C-Mart is now interested in measuring the effect of the play areas on grocery
    purchases ([Figure 12-1](#our_relationship_of_interest)).
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续使用上一章的C-Mart示例，假设C-Mart现在有兴趣测量游乐区对杂货购买的影响（[图12-1](#our_relationship_of_interest)）。
- en: '![Our relationship of interest](Images/BEDA_1201.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![我们感兴趣的关系](Images/BEDA_1201.png)'
- en: Figure 12-1\. Our relationship of interest
  id: totrans-8
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-1\. 我们感兴趣的关系
- en: 'Based on prior analyses, the management of C-Mart believes that visit duration
    is a key causal mechanism in this relationship. That is, they believe that *PlayArea*
    causes *VisitDuration*, which itself causes *GroceryPurchases*. Obviously, we
    could disregard that hypothesis and analyze the relationship displayed in [Figure 12-1](#our_relationship_of_interest)
    directly by building the corresponding regression, CIs, etc. However, we’re going
    to confirm and measure that causal mechanism, because taking it into account has
    several benefits:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 根据先前的分析，C-Mart的管理层认为访问持续时间是这种关系的关键因果机制。也就是说，他们认为*PlayArea*导致*VisitDuration*，进而导致*GroceryPurchases*。显然，我们可以忽略这一假设，并直接分析[图12-1](#our_relationship_of_interest)中显示的关系，建立相应的回归、置信区间等。然而，我们将确认并测量这一因果机制，因为考虑它具有多重好处：
- en: Mediation allows us to understand the mechanisms at play and generate actionable
    insights.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过调解，我们可以理解其中的机制，并生成可操作的见解。
- en: In certain circumstances, not accounting for mediation could bias a causal estimate.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下，不考虑调解可能会导致因果估计的偏误。
- en: Let’s review these benefits in more detail in the next two subsections, and
    then I’ll get into the technical considerations of measuring mediation.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在接下来的两个小节中更详细地回顾这些好处，然后我将进入测量调解的技术考虑。
- en: Understanding Causal Mechanisms
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解因果机制
- en: The first benefit of identifying and measuring mediation is that it provides
    an explanation of the causal mechanism at hand. Correlation is still not (always)
    causation, but understanding what’s actually happening from a behavioral perspective
    is a strong safeguard against spurious correlations. If you have two variables
    that are correlated but you’re unsure whether that correlation is causal, finding
    and validating a mediator between them offers very strong evidence that the relationship
    is causal. At that point, the most likely source of error would be reverse causality—the
    causality flows in the opposite direction. (The alternative is that each of the
    three variables just happens to have a spurious correlation with the other two;
    that’s three spurious correlations from random chance instead of one, which is
    a highly improbable event.)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 辨识和测量调解的首个好处是提供所涉因果机制的解释。相关性并非总是因果关系，但从行为角度理解实际发生的事情是对虚假相关的强有力保护。如果你有两个相关的变量，但不确定这种相关是否是因果关系，找到并验证其间的中介者提供了非常强有力的证据表明这种关系是因果的。此时，错误的最可能来源是逆向因果关系——因果性的方向相反。
    （另一种可能性是这三个变量恰好分别与其他两个存在虚假相关性；这是三个与随机事件的虚假相关性，而不是一个，这是一个极不可能发生的事件。）
- en: Mediation is also a very effective complement to moderation, in both the discovery
    and the design phases. In the discovery phase (what I referred to as the “fishing
    expedition” in the previous chapter), identifying likely mediators can help the
    brainstorming process. Even if a mediator is not observable (e.g., a belief or
    emotion), simply considering it might lead you to a measurable moderator and provide
    a rationale for it. We saw in [Chapter 11](ch11.xhtml#introduction_to_moderation)
    that the relationship between *PlayArea* and *GroceryPurchases* is moderated by
    *Children*, something that makes immediate and intuitive sense. However, recognizing
    that this relationship is mediated by *VisitDuration* can give us clues to other
    possible moderators. For example, if the mediation is complete, the overall effect
    is likely to be weaker for visits near the closing time, something that would
    not be immediately apparent if we disregarded the role of *VisitDuration* ([Figure 12-2](#the_relationship_between_playarea_and_g)).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 调解在发现和设计阶段都是很有效的补充。在发现阶段（我在上一章中称之为“钓鱼远征”），识别可能的中介者可以帮助头脑风暴过程。即使中介者不可观察（例如信念或情感），仅仅考虑它可能会导致找到可测量的调节因素，并为其提供合理性。我们在[第11章](ch11.xhtml#introduction_to_moderation)中看到，*PlayArea*和*GroceryPurchases*之间的关系受*Children*的调节，这在直觉上是立即理解的。然而，认识到这种关系是通过*VisitDuration*调解的可以给我们提供其他可能的调节因素的线索。例如，如果调解是完全的，那么在接近闭店时间的访问中，总体效果可能会较弱，这是如果我们忽视*VisitDuration*的角色将不会立即显现的事情（[图12-2](#the_relationship_between_playarea_and_g)）。
- en: '![The relationship between PlayArea and GroceryPurchases](Images/BEDA_1202.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![PlayArea和GroceryPurchases之间的关系](Images/BEDA_1202.png)'
- en: Figure 12-2\. The relationship between PlayArea and GroceryPurchases
  id: totrans-17
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-2. PlayArea和GroceryPurchases之间的关系
- en: We could probe that hypothesis by checking whether the effect of *PlayArea*
    on *GroceryPurchases* is weaker for visits that start near the closing time, which
    would provide further information about the nature of the effect.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过检查*PlayArea*对*GroceryPurchases*的影响在接近闭店时间开始的访问中是否较弱来探索这一假设，这将进一步提供关于效果性质的信息。
- en: Mediation can also be helpful for designing or improving business processes
    and messages. Too often, segmentation exercises end up with “segment A shows a
    stronger effect than segment B.” This is only useful in better targeting preexisting
    treatments, such as marketing campaigns. Understanding the mechanism through which
    the moderation acts provides us with useful insights for ideation. Having confirmed
    that the moderating effect of *Children* on *PlayArea* is mediated by *VisitDuration*,
    we could lean into it by offering a perk, like extra parking validation or a snack
    station near the play area. We could also replace the play areas with (potentially
    cheaper) mini-cinemas showing cartoons.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 仲裁也可用于设计或改进业务流程和信息传递。太多时候，分割练习以“A段显示比B段更强烈的效果”而告终。这只在更好地定位预先存在的治疗方法（如营销活动）方面有用。理解调节作用的机制为构思提供了有用的见解。确认*儿童*对*游乐区*的调节效应由*访问持续时间*中介，我们可以通过提供额外的停车验证或靠近游乐区的小吃站等福利来支持它。我们还可以用（可能更便宜的）迷你电影院替换游乐区，放映卡通片。
- en: Causal Biases
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 因果偏差
- en: Mediation is not just a “nice to have” tool. In some circumstances, not accounting
    for it can introduce biases in our causal estimates.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 仲裁不仅仅是一个“好用”的工具。在某些情况下，不考虑它可能会引入我们因果估计中的偏差。
- en: The simplest case where this occurs is when we’re trying to measure the (total)
    effect of one variable on another, but we unwittingly include a mediator in our
    regression as a control variable. Let’s assume that we’ve measured the effect
    of having a play area on grocery purchases at the individual level, in line with
    the recommendations from [Chapter 2](ch02.xhtml#understanding_behavioral_data).
    It is conceivable that a play area not only affects the visit duration of customers
    who would have come regardless but also draws new customers. To account for this
    causal path, we need to recast our CD at the store level ([Figure 12-3](#cd_recast_at_the_store_level)).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的情况是，当我们试图衡量一个变量对另一个变量（总体）的影响时，但在回归中无意中包括一个中介作为控制变量时，就会发生这种情况。假设我们已经在个体水平上测量了在[第2章](ch02.xhtml#understanding_behavioral_data)建议的方向上，在超市购买的影响。可以想象，游乐区不仅影响了无论如何都会来的客户的访问时间，还吸引了新的客户。为了考虑这种因果路径，我们需要重新设计我们在商店水平上的CD（[图12-3](#cd_recast_at_the_store_level)）。
- en: '![CD recast at the store level](Images/BEDA_1203.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![在商店水平上重新设计CD](Images/BEDA_1203.png)'
- en: Figure 12-3\. CD recast at the store level
  id: totrans-24
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-3\. 在商店水平上重新设计CD
- en: Note that while average grocery purchases at the customer level are fully mediated
    by average visit duration, this is not the case for total grocery sales at the
    store level. The level at which you measure behaviors matters!
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，尽管顾客水平上的平均购物金额完全由平均访问持续时间中介，但在商店水平上的总杂货销售情况并非如此。您测量行为的级别是有影响的！
- en: 'In [Figure 12-3](#cd_recast_at_the_store_level), it is clear that *CustomersNumber*
    is a mediator of the effect of *PlayArea* on *GrocerySales*. However, we can easily
    imagine that someone investigating that effect would decide to include *CustomersNumber*
    as a control variable in that regression: *GrocerySales* = *β[p].PlayArea* + *β[c].CustomersNumber*.
    After all, the size of a store’s customer base certainly affects its total grocery
    sales, and it may have impacted the selection of stores where play areas would
    be built ([Figure 12-4](#the_storeapostrophes_customer_base_is_a)).'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图12-3](#cd_recast_at_the_store_level)中，很明显*顾客数*是*游乐区*对*杂货销售*影响的中介。然而，我们很容易想象，调查这种效果的人会决定在回归中包括*顾客数*作为控制变量：*杂货销售*
    = *β[p].游乐区* + *β[c].顾客数*。毕竟，商店的顾客基数大小肯定会影响其总杂货销售量，并且可能会影响选择建立游乐区的商店（[图12-4](#the_storeapostrophes_customer_base_is_a)）。
- en: '![The store’s customer base is a confounder](Images/BEDA_1204.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![商店的顾客基数是混杂因素](Images/BEDA_1204.png)'
- en: Figure 12-4\. The store’s customer base is a confounder
  id: totrans-28
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-4\. 商店的顾客基数是混杂因素
- en: '[Figure 12-4](#the_storeapostrophes_customer_base_is_a) presents a causal conundrum:
    the store’s customer base, measured by the number of potential customers who are
    within shopping distance of the store, may be a confounder of the relationship
    between *PlayArea* and *GrocerySales*. But at the same time, *CustomersNumber*
    is a mediator of that relationship. This situation calls for thoughtful controlling
    of the relevant regressions—that is, all the regressions where the dependent variable
    is *CustomersNumber* or *GrocerySales*.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 12-4](#the_storeapostrophes_customer_base_is_a) 提出了一个因果难题：商店的顾客基数，即那些离商店购物距离内的潜在顾客数量，可能是
    *PlayArea* 与 *GrocerySales* 之间关系的混杂变量。但与此同时，*CustomersNumber* 是这种关系的一个介导变量。这种情况需要对相关的回归进行深思熟虑的控制——也就是说，所有依赖变量为
    *CustomersNumber* 或 *GrocerySales* 的回归。'
- en: This can be achieved by adding to these regressions thoughtful control variables.
    For instance, the number of customers one year before installing the play area
    is a good proxy for the customer base and by definition doesn’t capture any of
    the effects of installing a play area. Alternatively, we could choose another
    proxy such as a *Rural/Urban* categorical variable.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过在这些回归中添加周到的控制变量来实现这一点。例如，安装游乐区前一年的顾客数量是顾客基数的一个很好的代理变量，并且根据定义不会捕捉到安装游乐区的任何影响。或者，我们可以选择另一个代理变量，比如
    *Rural/Urban* 的分类变量。
- en: 'Once again, this illustrates the dangers of the “everything and the kitchen
    sink” approach to variable inclusion: just because the current number of customers
    is available and relevant to our situation doesn’t mean that it should automatically
    be included as a control.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 再次说明“包罗万象”方法对变量包含的危险性：仅仅因为当前顾客数量在我们的情况下可用且相关，并不意味着它应自动包含为控制变量。
- en: Identifying Mediation
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 识别介导作用
- en: When I introduced the building blocks of CDs in [Chapter 3](ch03.xhtml#introduction_to_causal_diagrams),
    I mentioned that a *mediator* is a variable between two other variables in a chain,
    as in [Figure 12-5](#the_effect_of_having_a_play_area_on_gro).
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 当我在 [第 3 章](ch03.xhtml#introduction_to_causal_diagrams) 中介绍 CD 的基本组成部分时，我提到
    *mediator* 是一个链条中连接两个其他变量的变量，如 [图 12-5](#the_effect_of_having_a_play_area_on_gro)
    中所示。
- en: '![The effect of having a play area on grocery purchases is mediated by the
    duration of the visit](Images/BEDA_1205.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![有游乐区对杂货购买的影响通过访问持续时间介导](Images/BEDA_1205.png)'
- en: Figure 12-5\. The effect of having a play area on grocery purchases is mediated
    by the duration of the visit
  id: totrans-35
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 12-5\. 有游乐区对杂货购买的影响通过访问持续时间介导
- en: '*VisitDuration* is an effect of *PlayArea*, and a cause of *GroceryPurchases*.
    As such, it is the mediator of the effect of *PlayArea* on *GroceryPurchases*
    in this CD.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '*VisitDuration* 是 *PlayArea* 的效应，也是 *GroceryPurchases* 的原因。因此，在这个 CD 中，它是 *PlayArea*
    对 *GroceryPurchases* 的影响的介导变量。'
- en: Assuming that the CD in [Figure 12-5](#the_effect_of_having_a_play_area_on_gro)
    gives us the whole story, *PlayArea* has no effect on *GroceryPurchases* apart
    from the path through *VisitDuration*; changing *PlayArea* while holding *VisitDuration*
    constant would not change *GroceryPurchases*. The effect of *PlayArea* on *GroceryPurchases*
    is said to be “completely” or “fully” mediated. Alternatively, we could imagine
    a situation where *PlayArea* also has a direct effect on *GroceryPurchases*, apart
    from the *VisitDuration* path ([Figure 12-6](#partial_mediation)).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 假设 [图 12-5](#the_effect_of_having_a_play_area_on_gro) 中的 CD 完全揭示了整个故事，*PlayArea*
    对 *GroceryPurchases* 没有其他影响，除了通过 *VisitDuration* 的路径；在保持 *VisitDuration* 恒定的情况下改变
    *PlayArea* 不会改变 *GroceryPurchases*。*PlayArea* 对 *GroceryPurchases* 的影响被称为“完全”或“完全介导”。或者，我们可以想象
    *PlayArea* 除了通过 *VisitDuration* 路径之外，对 *GroceryPurchases* 还有直接影响的情况（[图 12-6](#partial_mediation)）。
- en: '![Partial mediation](Images/BEDA_1206.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![部分介导](Images/BEDA_1206.png)'
- en: Figure 12-6\. Partial mediation
  id: totrans-39
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 12-6\. 部分介导
- en: This is called “partial” mediation. *VisitDuration* is still a mediator, even
    if it doesn’t account for the total effect of *PlayArea* on *GroceryPurchases*.
    The direct effect from *PlayArea* to *GroceryPurchases* may be truly direct—there
    is no intermediary variable involved—or it may represent one or several other
    mediators we don’t know of or are not interested in analyzing (in which case we
    have collapsed the corresponding chain or chains).
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 这被称为“部分”介导。即使 *VisitDuration* 不能完全解释 *PlayArea* 对 *GroceryPurchases* 的总效应，它仍然是一个介导变量。从
    *PlayArea* 到 *GroceryPurchases* 的直接效应可能是真正的直接效应——没有中介变量参与——或者它可能代表我们不知道或不感兴趣分析的一个或多个其他介导变量（在这种情况下，我们已经合并了相应的链条）。
- en: Like the search for potential moderators, the search for mediators is a trial-and-error
    fishing expedition, but the scope of the search (and therefore the risk of false
    positives) is much more limited. Since a potential mediator should be investigated
    only if there is a strong behavioral rationale for it, the number of candidates
    is considerably restricted. In addition, confirming a mediator involves several
    regressions, which also reduces the risk of false positives.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 就像寻找潜在的调节变量一样，寻找中介者也是一个试探性和试错性的寻找过程，但是搜索范围（因此误报风险）要小得多。由于只有在行为上有强有力的理由支持时，才应该调查潜在的中介者，因此候选者的数量是明显受限的。此外，确认中介者涉及多次回归分析，这也降低了误报的风险。
- en: Given the benefits of accounting for mediators and the risks of not doing so,
    you should always include relevant mediators in your analysis, at least as a first
    step. Once you have identified which chains you’re going to analyze and which
    you’re going to disregard, you can safely collapse the latter ones (e.g., mediators
    between variables that play only a secondary role in your analysis).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于考虑到中介者的好处和不考虑中介者的风险，您应该始终在分析中至少作为第一步包括相关的中介者。一旦确定了要分析的链条和要忽略的链条，您就可以安全地折叠后者（例如，在分析中只起次要作用的变量之间的中介者）。
- en: As with moderators, the search process entails finding a potential candidate
    and then validating it through a Bootstrap confidence interval. In our example,
    *VisitDuration* is an obvious candidate, so let’s see how we can confirm and measure
    its mediation role.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 与调节变量类似，搜索过程包括找到一个潜在的候选项，然后通过Bootstrap置信区间来验证它。在我们的例子中，*VisitDuration*是一个明显的候选项，因此让我们看看我们如何确认和测量其中介作用。
- en: Measuring Mediation
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测量中介
- en: 'Measuring mediation is straightforward but a bit cumbersome. It boils down
    to running several regressions to estimate the following:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 测量中介是直接的但有点繁琐。它归结为运行多次回归分析来估计以下内容：
- en: The total effect of *PlayArea* on *GroceryPurchases*
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*PlayArea*对*GroceryPurchases*的总效应'
- en: The effect of *PlayArea* on *GroceryPurchases* that is mediated by *VisitDuration*,
    a.k.a. the indirect effect
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*PlayArea*对*GroceryPurchases*的效应，即通过*VisitDuration*介导的间接效应'
- en: The effect of *PlayArea* on *GroceryPurchases* that is not mediated by *VisitDuration*,
    a.k.a. the direct effect
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*PlayArea*对*GroceryPurchases*的效应，即不通过*VisitDuration*介导的直接效应'
- en: If we find no evidence for the indirect, mediated path, we should reject our
    tentative mediator. Conversely, if we find no evidence for the direct path, then
    the effect is fully mediated. The *percentage of total effect mediated* is a common
    and useful way to summarize that evidence. We’ll wrap up the section by considering
    the special case in which the mediator is a binary variable.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们找不到间接、介导的路径的证据，我们应该否定我们的暂定中介者。相反，如果我们找不到直接路径的证据，那么效应就是完全通过中介实现的。*百分之百的总效应通过中介实现*
    是总结这些证据的常见和有用方式。我们将通过考虑中介者是一个二元变量的特殊情况来结束这一部分。
- en: Total effect
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 总效应
- en: 'We first determine the total effect by running a regression of *GroceryPurchases*
    on *PlayArea* (without including *VisitDuration*):'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先通过在回归中不包括*VisitDuration*的情况下对*PlayArea*和*GroceryPurchases*进行回归来确定总效应：
- en: '[PRE0]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The total effect is approximately 27.6, meaning that adding a play area increases
    the amount spent on groceries by $27.6 on average, *not holding the visit duration
    constant*.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 总效应约为27.6，这意味着增加游乐区平均会使购物支出增加27.6美元，*不持续访问时长恒定*。
- en: Mediated effect
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 中介效应
- en: 'The effect of *PlayArea* on *GroceryPurchases* mediated by *VisitDuration*
    can be obtained by multiplying together the effect of *PlayArea* on *VisitDuration*
    and the effect of *VisitDuration* on *GroceryPurchases*. This makes intuitive
    sense: if a play area increases the average duration of a visit by X minutes and
    each additional minute of visit duration increases the amount spent on groceries
    by $Y, then adding a play area increases the amount spent on groceries by $X *
    Y.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '*PlayArea*对*GroceryPurchases*的影响，通过*VisitDuration*介导，可以通过将*PlayArea*对*VisitDuration*的影响和*VisitDuration*对*GroceryPurchases*的影响相乘得到。这是直观的：如果游乐区增加了平均访问时间X分钟，并且每增加一分钟的访问时间就会使购物支出增加Y美元，那么增加游乐区将使购物支出增加X
    * Y美元。'
- en: 'The first regression is for the arrow between *PlayArea* and *VisitDuration*.
    It yields a coefficient of about 12.6 (having a play area adds about 12.6 minutes
    to the average visit duration):'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个回归分析是关于*PlayArea*和*VisitDuration*之间的箭头。它产生的系数约为12.6（增加游乐区大约会使平均访问时长增加约12.6分钟）：
- en: '[PRE2]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The second regression is for the arrow between *VisitDuration* and *GroceryPurchases*.
    However, I will also include *PlayArea* in this regression. Looking back at [Figure 12-6](#partial_mediation)
    and remembering the definition of a confounder, we can see that if the mediation
    is only partial (i.e., there is a direct arrow from *PlayArea* to *GroceryPurchases*),
    *PlayArea* is a confounder of the relationship between *VisitDuration* and *GroceryPurchases*.
    Therefore it must be included in the regression by default. Running a regression
    with our primary cause and our mediator as explanatory variables yields coefficients
    of, respectively, 0.16 (adding a play area adds about $0.16 to the average grocery
    purchase per visit, holding the visit duration constant) and 2.2 (adding one minute
    to visit duration adds about $2.20 to the average grocery purchases per visit):'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个回归是针对 *VisitDuration* 和 *GroceryPurchases* 之间的箭头。然而，在这个回归中，我也会包括 *PlayArea*。回顾一下
    [图 12-6](#partial_mediation) 并记住混淆变量的定义，我们可以看到如果中介仅为部分中介（即，从 *PlayArea* 到 *GroceryPurchases*
    存在直接箭头），那么 *PlayArea* 是 *VisitDuration* 和 *GroceryPurchases* 之间关系的一个混淆变量。因此，它必须被默认包含在回归中。运行一个回归，将我们的主要原因和中介变量作为解释变量，分别得到系数为
    0.16（增加一个游戏区域会使每次访问的平均杂货购买额增加约 $0.16，保持访问持续时间恒定）和 2.2（将访问持续时间增加一分钟会使每次访问的平均杂货购买额增加约
    $2.20）：
- en: '[PRE4]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Note
  id: totrans-63
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: In this very simple example, these three are the only variables involved, but
    in real life you would have to also include any other variable with an arrow towards
    the dependent variable in each of your regressions.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个非常简单的例子中，这三个是唯一涉及的变量，但在现实生活中，你还必须在每个回归中包括任何向因变量的箭头的其他变量。
- en: I mentioned earlier that the primary cause should be included in the regression
    “by default.” Sometimes, however, the primary cause and the mediator may be so
    closely correlated that including both of them in a regression creates multicollinearity.
    This is generally caused by full mediation and is evidenced by suspiciously large
    coefficients in opposite directions (that is, the primary cause and the mediator
    mostly cancel each other out) with large p-values. In the worst cases, your analysis
    software may even give up and return an error message without finishing the regression.
    Whenever including the primary cause in the regression makes the coefficient for
    the mediator go haywire, do not include the primary cause.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 我之前提到，主要原因应该“默认情况下”包含在回归中。然而，有时主要原因和中介变量可能相关性非常密切，以至于在回归中同时包含它们会产生多重共线性。这通常是由于完全中介引起的，表现为系数方向相反（即，主要原因和中介大多相互抵消）且
    p 值很大的可疑大系数。在最糟糕的情况下，你的分析软件甚至可能放弃并返回一个错误消息，而不是完成回归。每当将主要原因包含在回归中会使中介变量的系数变得混乱时，请不要包含主要原因。
- en: 'Finally, you may also encounter more complex situations, such as two mediators
    with an extra arrow between them, that is, one of the mediators is also a cause
    of the other ([Figure 12-7](#one_of_the_mediators_affects_the_other)). This is
    not just a theoretical possibility; it actually happens from time to time, especially
    with behavioral data. Situations like that one defy shortcuts and you’ll need
    to remember what we learned in [Part II](part02.xhtml#causal_diagrams_and_deconfounding):
    the backdoor criterion for deconfounding and other rules of CDs still apply and
    will let you know which variables you should and should not include in your regression.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，你可能还会遇到更复杂的情况，比如两个中介之间有额外的箭头，即，其中一个中介也是另一个中介的原因（[图 12-7](#one_of_the_mediators_affects_the_other)）。这不仅仅是一个理论上的可能性；这实际上时有发生，特别是在行为数据中。像那样的情况无法使用捷径，你需要记住我们在
    [第二部分](part02.xhtml#causal_diagrams_and_deconfounding) 学到的内容：解决混淆的背门标准和其他因果图规则仍然适用，并会告诉你应该包括和不应该包括在回归中的变量。
- en: '![One of the mediators affects the other mediator](Images/BEDA_1207.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![其中一个中介影响另一个中介](Images/BEDA_1207.png)'
- en: Figure 12-7\. One of the mediators affects the other mediator
  id: totrans-68
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 12-7\. 其中一个中介影响另一个中介
- en: 'The mediated effect is equal to the product of the two coefficients along the
    mediation chain (i.e., the coefficient of the regression of *VisitDuration* on
    *PlayArea*, and the coefficient of the regression of *GroceryPurchases* on *VisitDuration*):'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 被中介的效应等于沿着中介链的两个系数的乘积（即，*VisitDuration* 对 *PlayArea* 回归的系数和 *GroceryPurchases*
    对 *VisitDuration* 回归的系数）：
- en: '*MediatedEffect* ≈ 12.6 * 2.2 ≈ 27.5'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '*MediatedEffect* ≈ 12.6 * 2.2 ≈ 27.5'
- en: 'From there, we can calculate the percentage of the total effect that is mediated:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 从那里，我们可以计算出被中介的总效应的百分比：
- en: '*PercentageMediated = MediatedEffect / TotalEffect ≈ 27.5 / 27.6 ≈ 99.5%*'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '*中介百分比 = 中介效应 / 总效应 ≈ 27.5 / 27.6 ≈ 99.5%*'
- en: The Bootstrap 90%-CI for this percentage is approximately [0.9933; 0.9975].
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这个百分比的自举90%置信区间大约是[0.9933; 0.9975]。
- en: Direct effect
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 直接效应
- en: 'The direct, unmediated effect is equal to the coefficient for *PlayArea* in
    the regression of *GroceryPurchases* on *PlayArea* and *VisitDuration*: *UnmediatedEffect*
    ≈ 0.16\. From there, we can calculate the percentage of the total effect that
    is unmediated:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 直接、未中介效应等于在*GroceryPurchases*回归中*PlayArea*和*VisitDuration*的系数：*未中介效应* ≈ 0.16。通过这种方法，我们可以计算未中介的总效应百分比：
- en: '*PercentageUnmediated* = *UnmediatedEffect / TotalEffect* ≈ 0.16 / 27.6 ≈ 0.5%'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '*未中介百分比* = *未中介效应 / 总效应* ≈ 0.16 / 27.6 ≈ 0.5%'
- en: In other words, the total effect is technically not fully mediated. For practical
    purposes, however, we can neglect the unmediated effect. Note that “unmediated
    effect” is always expressed in relation to a specific mediator. If you had two
    mediators that together completely mediated a total effect, the mediated effect
    of the first one would be equal to the unmediated effect of the second one and
    vice versa.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，从技术上讲，总效应并没有完全中介。然而，出于实际目的，我们可以忽略未中介的效应。请注意，“未中介效应”始终是与特定中介物相关联的。如果您有两个中介者共同完全中介了总效应，第一个的中介效应将等于第二个的未中介效应，反之亦然。
- en: 'In situations where you encounter multicollinearity and are unable to include
    the primary cause in the regression as described earlier, the effect is most likely
    fully mediated. You can and should check that this is the case by calculating
    the percentage of the total effect that is unmediated as the residual of the mediated
    effect:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在遇到多重共线性情况并且无法像前文描述那样将主要原因包含在回归中时，效应很可能是完全中介的。您可以通过计算未中介的总效应百分比来确认这一点：
- en: '*PercentageUnmediated* = (*TotalEffect - MediatedEffect*) / *TotalEffect*'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '*未中介百分比* = (*总效应 - 中介效应*) / *总效应*'
- en: If you obtain an unmediated effect that is economically significant through
    that approach, this means you most likely have a more complex causal structure
    on your hands than you thought. Then it’s time to revisit your CD with a critical
    eye. Maybe your primary cause and your mediator share a further joint cause? Or
    could there be several mediators with interrelations between them?
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您通过这种方法获得了经济上显著的未中介效应，这意味着您手头的因果结构比您想象的更加复杂。那么是时候以批判的眼光重新审视您的CD了。也许您的主要原因和中介者有进一步的共同原因？或者可能存在几个中介者之间的相互关系？
- en: Note
  id: totrans-81
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The mediator in this example was positively correlated with both its cause and
    its effect. Mediators can also have a negative effect if exactly one of the two
    coefficients along the chain is negative. If that happens, and there is another
    mediator or a direct effect between our cause and effect of interest, then the
    mediator will *reduce* the total effect. In that case, your first mediator could
    represent, say, −25% of the total effect while the direct effect (or another mediator)
    would represent 125% of the total effect, but the sum of the proportions of effects
    will still be 100%. This is perfectly normal and expected, so don’t let it trip
    you up.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，中介者与其原因和效应都呈正相关。如果沿链的两个系数中有一个是负的，中介者也可能产生负效应。如果发生这种情况，并且我们的原因和感兴趣的效应之间有另一个中介者或直接效应，那么中介者将*减少*总效应。在这种情况下，您的第一个中介者可能代表总效应的-25%，而直接效应（或另一个中介者）将代表总效应的125%，但效应比例的总和仍将是100%。这是完全正常和预期的，所以不要让它困扰你。
- en: If you find that confusing, you’re in good company. Social scientists debated
    for decades whether or not having a significant total effect should be a prerequisite
    to mediation analysis. But there are a variety of perfectly legitimate regulating
    or self-regulating phenomena where a mediator compensates for the direct effect.
    For example, C-Mart may find that its price changes do not affect its sales volume
    as expected because they cause corresponding price changes from its competitors.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你觉得这很令人困惑，那你不是一个人。社会科学家们几十年来一直在辩论是否将显著总效应作为中介分析的先决条件。但有许多完全合法的调节或自我调节现象，中介物可以补偿直接效应。例如，C-Mart可能发现其价格变动并未像预期那样影响其销量，因为这些变动引起了竞争对手的相应价格变动。
- en: When the mediator is a binary variable
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 当中介物是二元变量时
- en: The mediator in this example was a numeric variable, so we could easily obtain
    the mediated effect by multiplying the coefficients for the two arrows involved.
    When the mediator is a binary variable, it is still possible to quantify mediation
    analytically, i.e., by using equations, but the formulas get more convoluted.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，中介是一个数值变量，所以我们可以通过乘以涉及的两个箭头的系数来轻松获得中介效应。当中介是一个二元变量时，仍然可以通过分析量化中介效应，即通过使用方程，但公式变得更加复杂。
- en: 'If we call the cause of interest *X*, the mediator *M*, and the effect of interest
    *Y*, the regression equations for the mediator and the final effect become:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们称兴趣的原因为 *X*，中介为 *M*，感兴趣的效果为 *Y*，则中介和最终效果的回归方程变为：
- en: '*P(M* = 1) = logistic(*α[0]* + *α[X].X*)'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '*P(M* = 1) = logistic(*α[0]* + *α[X].X*)'
- en: '*Y* = *β*[0] + *β[X].X* + *β[M].M*'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y* = *β*[0] + *β[X].X* + *β[M].M*'
- en: 'Note that the first equation is now a logistic regression, as appropriate for
    a binary variable. Instead of predicting the value of M as with a linear regression,
    we now predict the probability that it will take the value 1, P(M = 1). We can
    substitute that probability in the second equation:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，第一个方程现在是一个逻辑回归，适用于二元变量。与线性回归预测 M 的值不同，我们现在预测它将取值 1 的概率，P(M = 1)。我们可以在第二个方程中替换该概率：
- en: '*Y* = *β*[0] + *β[X].X* + *β[M].P*(*M* = *1*)'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y* = *β*[0] + *β[X].X* + *β[M].P*(*M* = *1*)'
- en: 'The direct effect is still straightforward to calculate: if X increases by
    1, the direct effect increases Y by *β[X]*. But the indirect effect now presents
    an additional challenge because the impact of X on M is not linear. Therefore,
    the impact of X on M has to be determined *for a certain value of X*. This issue
    is similar to the one we encountered with moderation in [Chapter 11](ch11.xhtml#introduction_to_moderation),
    and the possible solutions are the same:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 直接影响仍然很容易计算：如果 X 增加 1，直接效应增加 *β[X]* 的 Y。但是间接效应现在面临额外挑战，因为 X 对 M 的影响不是线性的。因此，必须确定
    X 对 M 的影响*在某个 X 的值*上。这个问题类似于我们在[第 11 章](ch11.xhtml#introduction_to_moderation)中遇到的调节问题，可能的解决方案也是相同的：
- en: Define a global reference point, such as the average value of X in our data.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义一个全局参考点，例如我们数据中 X 的平均值。
- en: Or calculate the mediated effect and percentage mediated for each row in our
    data and then calculate their respective averages.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或者计算我们数据中每一行的中介效应和中介百分比，然后计算它们各自的平均值。
- en: As was the case in [Chapter 11](ch11.xhtml#introduction_to_moderation), I recommend
    the second approach, modified as needed to fit the business decision at hand.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如同在[第 11 章](ch11.xhtml#introduction_to_moderation)中的情况一样，我推荐第二种方法，根据需要修改以适应手头的业务决策。
- en: Instrumental Variables
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工具变量
- en: Mediation represents a great addition to the behavioral data analysis toolbox
    in itself, but it’s also a stepping stone to another powerful tool called instrumental
    variables (IVs). In a nutshell, IVs leverage a known mediation relationship to
    reduce confounding biases in our coefficients.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 中介本身代表了行为数据分析工具箱的重要补充，但它也是通向另一个强大工具称为工具变量（IVs）的基石。简而言之，IVs 利用已知的中介关系来减少我们系数中的混杂偏倚。
- en: One of the most powerful use cases is to use an experiment to answer a broader,
    and often harder, question. I’ll illustrate this application with an example involving
    customer satisfaction, one of the most watched business metrics, but also admittedly
    one of the hardest to measure.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 最强大的用例之一是使用实验来回答更广泛，通常更难的问题。我将通过一个涉及顾客满意度的例子来说明这个应用，这是最受关注的业务指标之一，但也公认是最难测量的。
- en: 'As first mentioned in [Chapter 2](ch02.xhtml#understanding_behavioral_data),
    AirCnC’s leadership wants to know the impact of customer satisfaction (*CSAT*)
    on one of their key performance indicators, the amount spent during the six months
    following a booking (*M6Spend*). We’ll reuse the data from the experiment in [Chapter 10](ch10.xhtml#cluster_randomization_and_hierarchical)
    in which we explored the impact on customer satisfaction of a change in call center
    procedures: namely, “Instead of apologizing repeatedly when something went wrong,
    the call center reps should apologize at the beginning of the interaction, then
    get into ‘problem-solving mode,’ then end up offering several options to the customer.”'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 正如在[第2章](ch02.xhtml#understanding_behavioral_data)中首次提到的，AirCnC的领导希望了解客户满意度（*CSAT*）对其关键绩效指标之一——预订后六个月内支出金额（*M6Spend*）的影响。我们将重复使用[第10章](ch10.xhtml#cluster_randomization_and_hierarchical)中的实验数据，该实验探讨了呼叫中心程序变更对客户满意度的影响：“与其在出现问题时反复道歉，呼叫中心代表应在互动开始时道歉，然后进入‘解决问题模式’，最后提供多个选择给客户。”
- en: Data
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据
- en: The [GitHub folder for this chapter](https://oreil.ly/BehavioralDataAnalysisCh12)
    contains a copy of the experimental data from [Chapter 10](ch10.xhtml#cluster_randomization_and_hierarchical).
    This time we’ll include the M6Spend variable in our analysis. [Table 12-1](#variables_in_our_data-id00085)
    outlines the variables in our data for this chapter.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的[GitHub文件夹](https://oreil.ly/BehavioralDataAnalysisCh12)包含了[第10章](ch10.xhtml#cluster_randomization_and_hierarchical)中实验数据的副本。这次我们将在分析中包含*M6Spend*变量。[表12-1](#variables_in_our_data-id00085)概述了本章数据中的变量。
- en: Table 12-1\. Variables in our data
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 表12-1\. 我们数据中的变量
- en: '|   | Variable description | chap10-experimental_data.csv |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '|   | 变量描述 | chap10-experimental_data.csv |'
- en: '| --- | --- | --- |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| *Center_ID* | Categorical variable for the 10 call centers | ✓ |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| *Center_ID* | 10个呼叫中心的分类变量 | ✓ |'
- en: '| *Rep_ID* | Categorical variable for the 193 call center reps | ✓ |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| *Rep_ID* | 193名呼叫中心代表的分类变量 | ✓ |'
- en: '| *Age* | Age of customer calling, 20-60 | ✓ |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| *Age* | 客户呼叫时的年龄，20-60 | ✓ |'
- en: '| *Reason* | Reason for call, “payment”/’property” | ✓ |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| *Reason* | 呼叫原因，“付款”/“物业” | ✓ |'
- en: '| *Call_CSAT* | Customer satisfaction with call, 0-10 | ✓ |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| *Call_CSAT* | 客户对通话的满意度，0-10 | ✓ |'
- en: '| *Group* | Experimental assignment, “ctrl”/”treat” | ✓ |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| *Group* | 实验分配，“ctrl”/“treat” | ✓ |'
- en: '| *M6Spend* | Amount spent on bookings within 6 months of a booking | ✓ |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| *M6Spend* | 预订后六个月内的支出金额 | ✓ |'
- en: Packages
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 软件包
- en: 'In this section, we’ll use the following specific packages for instrumental
    variables:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用以下特定软件包进行工具变量：
- en: '[PRE6]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Understanding and Applying IVs
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解和应用IV
- en: 'Once you’re familiar with CDs and mediation, the idea behind IVs becomes reasonably
    simple to express:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您熟悉了CD和中介，理解IV背后的思想就变得相对简单了：
- en: Let’s assume you have a fully mediated relationship between two variables, and
    the relationship between the mediator and the final variable is confounded. Then
    you can obtain an unbiased estimate for that relationship by dividing the coefficient
    for the total effect by the coefficient for the first arm of the mediation (i.e.,
    the relationship between the first variable and the mediator).
  id: totrans-117
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 假设两个变量之间存在完全中介关系，并且中介与最终变量之间的关系存在混杂因素。那么，您可以通过将总效应的系数除以第一个中介的系数（即第一个变量与中介之间的关系）来获得该关系的无偏估计。
- en: To see what this looks like in our example, let’s start by drawing the CD of
    our variables of interest. We want to measure the causal relationship between
    *CSAT* and *M6Spend*. It’s plausible that a high CSAT increases the amount spent
    on bookings in the following months, but the relationship is also subject to unmeasured
    confounders, including personality traits such as openness. Finally, we have data
    on our experimental treatment, which we know affects *CSAT* thanks to our experiment
    in [Chapter 10](ch10.xhtml#cluster_randomization_and_hierarchical) ([Figure 12-8](#the_cd_for_our_variables_of_interest)).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 看看我们的示例是什么样子，让我们首先绘制我们感兴趣的变量的CD。我们想要衡量*CSAT*与*M6Spend*之间的因果关系。高CSAT可能会增加接下来几个月内的预订金额，但这种关系也受到未测量的混杂因素的影响，包括个性特征如开放性。最后，我们有关于我们的实验处理的数据，我们知道这影响了*CSAT*，感谢我们在[第10章](ch10.xhtml#cluster_randomization_and_hierarchical)的实验（[图12-8](#the_cd_for_our_variables_of_interest)）。
- en: '![The CD for our variables of interest](Images/BEDA_1208.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![我们感兴趣的变量的CD](Images/BEDA_1208.png)'
- en: Figure 12-8\. The CD for our variables of interest
  id: totrans-120
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-8\. 我们感兴趣的变量的CD
- en: As you can see, in this CD, *CSAT* is a mediator between *Group* and *M6Spend*,
    but the relationship between *CSAT* and *M6Spend* is biased upward by the confounding
    effect of *Openness*.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，在这个 CD 中，*CSAT* 是 *Group* 和 *M6Spend* 之间的一个中介，但 *CSAT* 和 *M6Spend* 之间的关系被
    *Openness* 的混杂效应上升偏置。
- en: In an ideal world, we would have data about the *Openness* variable and we would
    be able to run the two true regressions ([Equation 12-1](#12eqtn1) and [Equation
    12-2](#12eqtn2)).
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在理想的情况下，我们会有关于 *开放性* 变量的数据，并且能够运行两个真实的回归（[方程12-1](#12eqtn1) 和 [方程12-2](#12eqtn2)）。
- en: Equation 12-1\.
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 12-1.
- en: '*CSAT* = *β[g]*[1].*Group* + *β*[o1].*Openness*'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '*CSAT* = *β[g]*[1].*Group* + *β*[o1].*Openness*'
- en: Equation 12-2\.
  id: totrans-125
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 12-2.
- en: '*M6Spend* = *β[c]*[2].*CSAT* + *β[o]*[2].*Openness*'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '*M6Spend* = *β[c]*[2].*CSAT* + *β[o]*[2].*Openness*'
- en: But even if we got data about Openness specifically (e.g., through a survey),
    how could we be sure that there isn’t another confounder lurking around the corner?
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，即使我们确实获得了有关开放性的数据（例如，通过调查），我们怎么能确定是否有另一个混杂因素潜伏在角落里呢？
- en: 'Taking a step back from the math for a second, this question takes us to the
    very heart of behavioral analytics: customer satisfaction is an essential criterion
    for success in business, but because it is so strongly influenced by a myriad
    of unobserved individual characteristics that impact individual behaviors, we
    can’t hope to identify and control for all of these characteristics. This issue
    can’t be resolved satisfactorily outside of a causal-behavioral framework, but
    it is straightforward to handle within it.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 从数学上稍微退后一步，这个问题将我们带到了行为分析的核心：客户满意度是业务成功的重要标准，但由于它受到影响个体行为的无数未观察到的个人特征的强烈影响，我们无法希望识别和控制所有这些特征。这个问题在因果行为框架之外无法令人满意地解决，但在其中处理起来很简单。
- en: 'Back to the math—let’s go through the intuition laid out earlier:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 回到数学上——让我们按照之前阐述的直觉进行思考：
- en: Calculate the coefficient for the leftmost relationship, between *Group* and
    *CSAT*.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算最左边关系的系数，即 *Group* 和 *CSAT* 之间的关系。
- en: Calculate the coefficient for the total effect of *Group* on *M6Spend.*
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算 *Group* 对 *M6Spend* 的总效应的系数。
- en: Calculate the coefficient for the effect of *CSAT* on *M6Spend* by dividing
    the total effect from step 2 by the coefficient for the leftmost relationship
    from step 1.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将步骤 2 的总效应除以步骤 1 的最左边关系的系数，计算 *CSAT* 对 *M6Spend* 的效应的系数。
- en: 'Step 1: Leftmost relationship'
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 1：最左边关系
- en: 'Because *Group* is a random assignment, uncorrelated with *Openness*, we can
    run the following regression instead of [Equation 12-1](#12eqtn1):'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 *Group* 是随机分配的，与 *Openness* 不相关，所以我们可以运行以下回归而不是 [方程12-1](#12eqtn1)：
- en: '*CSAT* = *β[g]*[1].*Group*'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '*CSAT* = *β[g]*[1].*Group*'
- en: Our estimate for *β[g]*[1] is unbiased and can be plugged as needed in [Equation
    12-1](#12eqtn1), because it is the true causal coefficient.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对 *β[g]*[1] 的估计是无偏的，并且可以根据需要插入到 [方程12-1](#12eqtn1) 中，因为它是真正的因果系数。
- en: 'Step 2: Total effect'
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 2：总效应
- en: The equation for the total effect ([Equation 12-3](#eqtnR)) is called the *reduced*
    regression (and we’ll index it by “r”) because it collapses the chain between
    the variables.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 总效应的方程（[方程12-3](#eqtnR)）被称为 *简化* 回归（我们将其索引为“r”），因为它折叠了变量之间的链条。
- en: Equation 12-3\. Equation R
  id: totrans-139
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 12-3. 方程 R
- en: '*M6Spend* = *β[gr].Group* (Eq. R)'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '*M6Spend* = *β[gr].Group* (Eq. R)'
- en: For the same reasons as for the first arm of the mediation, our estimate for
    *β[gr]* is unbiased.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 对于调解的第一个臂的同样原因，我们对 *β[gr]* 的估计是无偏的。
- en: 'Step 3: Relationship of interest'
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 3：感兴趣的关系
- en: 'This is where the magic happens: as discussed in the previous section about
    mediation, *β[gr]* = *β[c]*[2] * *β[g]*[1]. We can rewrite this equation as *β[c]*[2]
    = *β[gr]* / *β[g]*[1]. Because all variables right of the equal sign are unbiased,
    the one left of it is as well. This estimate for *β[c]*[2] is unbiased.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是魔术发生的地方：正如在关于调解的前一部分讨论的那样，*β[gr]* = *β[c]*[2] * *β[g]*[1]。我们可以将这个方程重写为 *β[c]*[2]
    = *β[gr]* / *β[g]*[1]。因为等号右边的所有变量都是无偏的，左边的一个也是无偏的。对于 *β[c]*[2] 的这个估计是无偏的。
- en: 'In other words, we can deconfound the relationship between two variables if
    we can find a variable (called the *instrument*) that is a cause of our cause
    of interest but is otherwise unrelated to both the confounder and the effect of
    interest:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，如果我们能找到一个（称为 *工具*）的变量，它是我们感兴趣的原因的原因，但与混杂因素和感兴趣的效应无关，我们可以消除两个变量之间的关系：
- en: The first condition (called the *independence assumption*) is necessary for
    the reduced regression to be unbiased, but fortunately it is always true with
    a random assignment.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一个条件（称为 *独立性假设*）是为了使简化后的回归不受偏斜，但幸运的是，对于随机分配，它总是成立的。
- en: The second condition (called the *exclusion restriction*) can be rephrased as
    saying that the relationship between the instrument and the effect of interest
    must be fully mediated by the cause of interest. It is necessary for the equation
    *β[gr]* = *β[c]*[2] * *β[g]*[1] to be true. Unfortunately, it can’t be proven
    mathematically (that would require knowing the coefficient for the second arm
    of the mediation, which is what we’re looking for!) and must be assumed based
    on qualitative causal considerations—in this case, for example, that the experimental
    group assignment is unlikely to affect *M6Spend* outside of the *CSAT* chain.
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二个条件（称为 *排除限制*）可以重新表述为说仪器与感兴趣的效果之间的关系必须完全由感兴趣的原因进行中介。它对于方程 *β[gr]* = *β[c]*[2]
    * *β[g]*[1] 必须成立。不幸的是，这不能在数学上证明（这将需要知道第二个中介系数，这就是我们要找的！）必须基于定性因果考虑进行假设——例如，在这种情况下，实验组分配不太可能影响
    *M6Spend* 除了 *CSAT* 链以外的任何因素。
- en: Measurement
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测量
- en: That was the intuition. We could certainly calculate all the corresponding regressions
    by hand, but as we spoiled twenty-first-century data analysts have come to expect,
    there is a package for that.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 那就是直觉。我们当然可以手工计算所有相应的回归，但正如我们这些被宠坏了的二十一世纪的数据分析师所期望的那样，有一个包可以做到这一点。
- en: 'First, we’ll do two sanity checks by running the linear regressions for the
    first arm of the mediation and for the total effect (i.e., the reduced equation).
    If either of these yields a coefficient very close to zero (as determined by the
    Bootstrap CI), that would jeopardize our IV regression. In most cases, you’ll
    want to include some other covariates that are causally related to your variables
    of interest. In our example from [Chapter 10](ch10.xhtml#cluster_randomization_and_hierarchical),
    *Age* (the age of the caller) and *Reason* (the reason for the call) were predictive
    of *CSAT* and included beside *Group*. We should include them here as well:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将通过运行第一中介的线性回归和总效应的线性回归来进行两项合理性检查（即，简化方程）。如果其中任何一个的系数非常接近零（由 Bootstrap
    CI 决定），那么这将危及我们的 IV 回归。在大多数情况下，您将希望包括一些其他与您感兴趣的变量有因果关系的协变量。在我们来自[第 10 章](ch10.xhtml#cluster_randomization_and_hierarchical)的例子中，*Age*（呼叫者的年龄）和
    *Reason*（呼叫原因）预测了 *CSAT* 并与 *Group* 一起包括。我们也应该在这里包括它们：
- en: '[PRE8]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Fortunately, both coefficients are safely distinct from zero, so we can move
    to our IV regression.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，两个系数都与零安全地不同，因此我们可以转向我们的 IV 回归。
- en: Python code
  id: totrans-153
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Python 代码
- en: 'In Python, we’ll use the package `linearmodels`:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Python 中，我们将使用 `linearmodels` 包：
- en: '[PRE10]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The syntax of the `IV2SLS.from_formula()` function is almost the same as for
    `ols()`. The predicted variable, our effect of interest, goes to the left of the
    tilde sign (“~”) and the predictors go to the right of it, with the first-stage
    regression written between brackets. Two things to note:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '`IV2SLS.from_formula()` 函数的语法与 `ols()` 几乎相同。预测变量，我们感兴趣的效果，位于波浪号（“~”）的左侧，预测变量位于右侧，第一阶段回归写在括号中。有两件事需要注意：'
- en: You need to explicitly include a constant (“1”) among the predictors.
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要明确地在预测变量中包括一个常数（“1”）。
- en: The other covariates related to your variables of interest (here, *Age* and
    *Reason*) should be included here as well, outside of the brackets. Note that
    they will automatically be included in the first-stage regression. Your formula
    for the first-stage regression only needs to include the mediator, a.k.a. our
    cause of interest, and the instrument.
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与您感兴趣的变量相关的其他协变量（在这里，*Age* 和 *Reason*）也应在此处包括在外，而不是在括号内。请注意，它们将自动包括在第一阶段回归中。您的第一阶段回归公式只需要包括介质，也就是我们感兴趣的原因，以及仪器。
- en: 'The output of the Python function is limited, but that’s all we need. The effect
    of *call_CSAT* on *M6Spend* is about $2.99 per unit, about $1 less than the naive,
    biased regression of *M6Spend* on *call_CSAT* would suggest:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: Python 函数的输出是有限的，但这就是我们所需要的。*call_CSAT* 对 *M6Spend* 的影响约为每单位 $2.99，比 *M6Spend*
    对 *call_CSAT* 的天真、有偏回归少约 $1：
- en: '[PRE11]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The Bootstrap 90%-CI for the unbiased effect is approximately [2.26; 3.89].
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 无偏效果的 Bootstrap 90% CI 约为 [2.26; 3.89]。
- en: R code
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: R 代码
- en: 'In R, we’ll use the package `ivreg`:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在 R 中，我们将使用 `ivreg` 包：
- en: '[PRE12]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Thankfully, the authors of the `ivreg` package have made a conscious effort
    to make the `ivreg()` function as similar as possible to `lm()`, in both its syntax
    and its output. The only difference in the formula is that there are now two lists
    of regressors, separated by a vertical bar “|”. Here’s where the variables need
    to go:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，`ivreg`软件包的作者们努力使`ivreg()`函数尽可能地与`lm()`相似，无论是在语法还是输出上。公式中唯一的区别在于现在有两个回归器的列表，用竖线“|”分隔。变量应放置在这里：
- en: The cause of interest, here *call_CSAT*, appears only on the left of the bar.
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 感兴趣的原因，这里的*call_CSAT*，只出现在条的左侧。
- en: The instrument(s), here *Group*, appear only on the right of the bar.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仪器（这里的*Group*）仅出现在条的右侧。
- en: The other explanatory variables that contribute to our cause or effect of interest,
    here *Age* and *Reason*, appear on both sides of the bar.
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他解释变量对我们感兴趣的因果关系的贡献，这里的*Age*和*Reason*，都出现在条中。
- en: The output of `ivreg()` is also very similar to the output of `lm()`. Our value
    of interest is the coefficient for *call_CSAT*. `ivreg()` also returns the results
    of several diagnostics for IV, which test the strength of various relationships
    in our model. Here again, the effect of *call_CSAT* on *M6Spend* is about $2.99
    per unit. The corresponding Bootstrap 90%-CI is approximately [2.26; 3.89].
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '`ivreg()`的输出也与`lm()`的输出非常相似。我们感兴趣的值是*call_CSAT*的系数。`ivreg()`还返回IV的几个诊断结果，这些诊断结果测试我们模型中各种关系的强度。在这里，*call_CSAT*对*M6Spend*的影响约为每单位2.99美元。相应的Bootstrap
    90%置信区间约为[2.26; 3.89]。'
- en: Note
  id: totrans-170
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: 'In our simple example, this difference between the two estimates comes from
    *Openness*. In real life, it’s unlikely that we would be able to confidently identify
    all the confounders at play, which we could instead, if you will, label “unknown
    psychological stuff.” However, even without measuring these confounders, we can
    measure their impact on *M6Spend* through *CSAT*: a change in these confounders
    that causes *CSAT* to increase by 1 point also causes *M6Spend* to increase by
    about $1\. Now we can go run surveys to measure openness or any other unknown
    psychological stuff with the knowledge that there is, so to speak, $1 worth of
    confounding on *M6Spend* per point of *CSAT* to account for. We know what we don’t
    know, which, if you ask me, is pretty cool.'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的简单例子中，这两个估计之间的差异来自*Openness*。在现实生活中，我们不太可能能够自信地识别所有起作用的混杂因素，我们可以将其标记为“未知的心理因素”。然而，即使没有测量这些混杂因素，我们也可以通过*CSAT*来测量它们对*M6Spend*的影响：这些混杂因素的变化导致*CSAT*增加1分，也会导致*M6Spend*增加约1美元。现在我们可以进行调查来衡量开放性或任何其他未知的心理因素，有了这个知识，我们可以说，每点*CSAT*对*M6Spend*的混杂效应大约值得1美元。我们知道我们不知道什么，如果你问我的话，这挺酷的。
- en: 'Applying IVs: Frequently Asked Questions'
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 应用IV：常见问题解答
- en: 'In the preceding example, we’ve leveraged IVs for the downstream analysis of
    experimental data: using experimental data to deconfound causal relationships.
    This is one of their most straightforward and potent uses, but it’s not the only
    one. Once you get familiar with IVs, you’ll start asking yourself “what about...?”
    Building complete examples for each potential use case would be redundant, but
    it’s worth calling out the most common ones:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的例子中，我们利用IV来分析实验数据：利用实验数据去除因果关系中的混杂因素。这是它们最直接和有效的用途之一，但不是唯一的用途。一旦你熟悉了IV，你会开始问自己：“还有什么其他的...？”为每种潜在用例构建完整的例子会显得多余，但指出最常见的用法是值得的：
- en: Can I use IVs with purely observational data?
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 我能在纯观察数据下使用IV吗？
- en: Yes, and the process is exactly the same as with experimental data, but because
    the independence assumption is not a given in that case, you’ll need to make sure
    that it holds. I have often come up with a potential instrument only to realize
    a bit later that there was another connection between the instrument and the final
    effect lurking in the background.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 是的，过程与实验数据完全相同，但因为独立性假设在这种情况下并不是确定的，所以你需要确保它成立。我经常想出一个潜在的仪器，稍后才意识到它与最终效应之间还有另一个潜在联系隐藏在背后。
- en: Can I use IVs with a binary final effect?
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 我能在具有二进制最终效应的情况下使用IV吗？
- en: In such a case, the relationships between coefficients are significantly more
    complicated than they are with linear regressions all along. The R package `ivprobit()`
    allows you to run a probit regression with an instrument, but as far as I know,
    there is no such solution for logistic regression.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，系数之间的关系比线性回归复杂得多。R包`ivprobit()`允许您使用工具变量进行概率回归，但据我所知，对于逻辑回归却没有这样的解决方案。
- en: Conclusion
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: 'Here we are. At the beginning of the book I promised that we would measure
    the causal impact of customer satisfaction on a business metric, and we did just
    that: “An increase of stated customer satisfaction by one unit increases spending
    in the following six months by $2.99.” No lengthy caveat and footnotes, no “correlation
    is not causation” hand-waving—this is as clear-cut a result as it gets. And hopefully,
    a whole world of opportunities is opening in your mind. Customer satisfaction,
    loyalty program memeberships, brand perception: measuring the business implications
    of all these nebulous and biased concepts is within your reach. And chances are,
    you already have the data you need. Did someone in marketing run an experiment
    two years ago offering a discount to customers if they signed up for your loyalty
    program? Then it’s simply a matter of pulling the corresponding data and applying
    the one-line formula for IV regression. Of course, that simplicity isn’t coming
    out of nowhere. It’s been a long time in the making, as it requires:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我们到此为止。在本书的开头，我承诺我们将衡量客户满意度对业务指标的因果影响，我们也确实做到了：“客户满意度的每增加一单位，接下来六个月的支出增加 $2.99。”没有冗长的警示和脚注，没有“相关性不等于因果关系”的波折——这是一个清晰明了的结果。希望在你的思想中打开了一个全新的机会世界。客户满意度、忠诚计划会员、品牌认知度：衡量所有这些模糊和偏见概念对业务的影响已经在您的掌握之中。而且很可能，您已经拥有所需的数据。两年前市场营销部门是否进行了一个试验，给客户提供折扣，如果他们加入您的忠诚计划？那么只需提取相应的数据并应用一行公式进行
    IV 回归。当然，这种简单性并非凭空而来。这是经过长时间的发展，因为它需要：
- en: Well-defined and understood variables for customer satisfaction and spending,
    as we saw in [Part I](part01.xhtml#understanding_behaviors)
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对客户满意度和支出的明确定义和理解的变量，正如我们在[第 I 部分](part01.xhtml#understanding_behaviors)中所见
- en: The right causal diagram, as we discovered in [Part II](part02.xhtml#causal_diagrams_and_deconfounding)
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确的因果图，正如我们在[第 II 部分](part02.xhtml#causal_diagrams_and_deconfounding)中发现的
- en: Tools that allow us to handle uncertainty without having to memorize a bunch
    of statistical tests, as we saw in [Part III](part03.xhtml#robust_data_analysis)
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工具让我们能够处理不确定性，而无需记住一堆统计测试，正如我们在[第 III 部分](part03.xhtml#robust_data_analysis)中所见
- en: Well-designed and well-analyzed experiments, as we explored in [Part IV](part04.xhtml#designing_and_analyzing_experiments)
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 精心设计和深入分析的实验，正如我们在[第 IV 部分](part04.xhtml#designing_and_analyzing_experiments)中所探讨的
- en: Finally, an understanding of moderation and mediation, as we learned in [Part V](part05.xhtml#advanced_tools_in_behavioral_data_analy)
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，对中介和调节的理解，正如我们在[第 V 部分](part05.xhtml#advanced_tools_in_behavioral_data_analy)中所学
- en: 'To end on a slightly less formal note: it is often noted that children appear
    to have an infinite curiosity for the world (“Why is the sky blue?”). Of course,
    that curiosity is not actually infinite, and at some point most children stop
    asking so many questions. It is my sincere hope that this book will have rekindled
    some of that childlike curiosity in you—that you’ll let yourself be intrigued
    by the world (especially the people) around you and you’ll wonder, “But why?”
    Of course, before claiming any credit for that, I’ll have to contemplate the very
    real possibility that I got the causality wrong and that you had it all in you
    from the start ([Figure 12-9](#did_i_mention_that_correlation_is_not_c)).'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 最后说一些稍微不那么正式的话：人们经常注意到，儿童对世界有着无穷的好奇心（“为什么天空是蓝色的？”）。当然，这种好奇心实际上并不是无限的，在某个时刻大多数孩子会停止问这么多问题。我真诚地希望这本书能在你心中重新点燃一些孩子般的好奇心——让你被世界（特别是人们）所迷惑，并且你会思考，“但为什么呢？”当然，在声称任何功劳之前，我必须认真考虑到我可能弄错了因果关系，而你可能从一开始就拥有这一切（[图
    12-9](#did_i_mention_that_correlation_is_not_c)）。
- en: '![Did I mention that correlation is not causation?](Images/BEDA_1209.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![我提到过相关性不等于因果关系吗？](Images/BEDA_1209.png)'
- en: Figure 12-9\. Did I mention that correlation is not causation?
  id: totrans-187
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 12-9\. 我提到过相关性不等于因果关系吗？
