- en: 8 Accounting for seasonality
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8 考虑季节性
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Examining the seasonal autoregressive integrated moving average model, SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查季节性自回归积分移动平均模型，SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*
- en: Analyzing seasonal patterns in a time series
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析时间序列中的季节性模式
- en: Forecasting using the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型进行预测
- en: In the previous chapter, we covered the autoregressive integrated moving average
    model, ARIMA(*p*,*d*,*q*), which allows us to model non-stationary time series.
    Now we’ll add another layer of complexity to the ARIMA model to include seasonal
    patterns in time series, leading us to the SARIMA model.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了自回归积分移动平均模型，ARIMA(*p*,*d*,*q*)，它允许我们对非平稳时间序列进行建模。现在，我们将向ARIMA模型添加另一层复杂性，以包括时间序列中的季节性模式，从而引出SARIMA模型。
- en: The *seasonal autoregressive integrated moving average* (SARIMA) model, or SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*,
    adds another set of parameters that allows us to take into account periodic patterns
    when forecasting a time series, which is not always possible with an ARIMA(*p*,*d*,*q*)
    model.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*季节性自回归积分移动平均*（SARIMA）模型，或SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*，增加了一组参数，使我们能够在预测时间序列时考虑周期性模式，这并不是ARIMA(*p*,*d*,*q*)模型总能做到的。'
- en: In this chapter, we’ll examine the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model
    and adapt our general modeling procedure to account for the new parameters. We’ll
    also determine how to identify seasonal patterns in a time series and apply the
    SARIMA model to forecast a seasonal time series. Specifically, we’ll apply the
    model to forecast the total number of monthly passengers for an airline. The data
    was recorded from January 1949 to December 1960\. The series is shown in figure
    8.1.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将检查SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型，并将我们的通用建模程序调整以考虑新参数。我们还将确定如何识别时间序列中的季节性模式，并将SARIMA模型应用于预测季节性时间序列。具体来说，我们将应用该模型来预测航空公司的月度总旅客数。数据是从1949年1月到1960年12月记录的。该系列显示在图8.1中。
- en: '![](../../OEBPS/Images/08-01.png)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/08-01.png)'
- en: Figure 8.1 Monthly total number of air passengers for an airline, from January
    1949 to December 1960\. You’ll notice a clear seasonal pattern in the series,
    with peak traffic occurring toward the middle of each year.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.1 从1949年1月到1960年12月航空公司的月度总旅客数。您会注意到该系列中存在明显的季节性模式，高峰交通出现在每年的中间。
- en: In figure 8.1 we can see a clear seasonal pattern in the series. The number
    of air passengers is lower at the beginning and end of the year, and it spikes
    up during the months of June, July, and August. Our objective is to forecast the
    number of monthly air passengers for the one year. It is important for an airline
    company to forecast the number of air passengers so they can better price their
    tickets and schedule flights to meet the demand for a given month.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在图8.1中，我们可以看到该系列中明显的季节性模式。航空旅客数量在每年的开始和结束时较低，而在六月、七月和八月期间急剧上升。我们的目标是预测一年内每月的航空旅客数量。对于航空公司来说，预测航空旅客数量非常重要，这样他们可以更好地定价机票并安排航班以满足特定月份的需求。
- en: 8.1 Examining the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.1 检查SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型
- en: 'The SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model expands on the ARIMA(*p*,*d*,*q*)
    model from the previous chapter by adding seasonal parameters. You’ll notice four
    new parameters in the model: *P*, *D*, *Q*, and *m*. The first three have the
    same meaning as in the ARIMA(*p*,*d*,*q*) model, but they are their seasonal counterparts.
    To understand the meaning of these parameters and how they affect the final model,
    we must first define *m*.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型在上一章的ARIMA(*p*,*d*,*q*)模型的基础上进行了扩展，增加了季节性参数。您会注意到模型中有四个新的参数：*P*，*D*，*Q*和*m*。前三个参数与ARIMA(*p*,*d*,*q*)模型中的含义相同，但它们是它们的季节性对应参数。为了理解这些参数的含义以及它们如何影响最终模型，我们必须首先定义*m*。
- en: The parameter *m* stands for the frequency. In the context of a time series,
    the frequency is defined as the number of observations per cycle. The length of
    the cycle will depend on the dataset. For data that was recorded every year, quarter,
    month, or week, the length of a cycle is considered to be 1 year. If the data
    was recorded annually, *m* = 1 since there is only one observation per year. If
    the data was recorded quarterly, *m* = 4 since there are four quarters in a year,
    and therefore four observations per year. Of course, if the data was recorded
    monthly, *m* = 12. Finally, for weekly data, *m* = 52. Table 8.1 indicates the
    appropriate value of *m* depending on the frequency at which the data was collected.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 参数 *m* 代表频率。在时间序列的上下文中，频率定义为每个周期内的观测次数。周期的长度将取决于数据集。对于每年、每季度、每月或每周记录的数据，周期的长度被认为是
    1 年。如果数据是按年记录的，*m* = 1，因为每年只有一个观测值。如果数据是按季度记录的，*m* = 4，因为一年中有四个季度，因此每年有四个观测值。当然，如果数据是按月记录的，*m*
    = 12。最后，对于每周数据，*m* = 52。表 8.1 指出了根据数据收集频率选择适当的 *m* 值。
- en: Table 8.1 Appropriate frequency *m* depending on the data
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8.1 根据数据选择适当的频率 *m*
- en: '| Data collection | Frequency *m* |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| 数据收集 | 频率 *m* |'
- en: '| Annual | 1 |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| 年度 | 1 |'
- en: '| Quarterly | 4 |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| 每季度 | 4 |'
- en: '| Monthly | 12 |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| 每月 | 12 |'
- en: '| Weekly | 52 |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| 周期 | 52 |'
- en: When data is collected on a daily or sub-daily basis, there are multiple ways
    of interpreting the frequency. For example, daily data can have a weekly seasonality.
    In that case, the frequency is *m* = 7 because there would be seven observations
    in a full cycle of 1 week. It could also have a yearly seasonality, meaning that
    *m* = 365. Thus, you can see that daily and sub-daily data can have a different
    cycle length, and therefore a different frequency *m*. Table 8.2 provides the
    appropriate value of *m* depending on the seasonal cycle for daily and sub-daily
    data.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 当数据按每日或亚日收集时，有多种解释频率的方法。例如，每日数据可以具有每周的季节性。在这种情况下，频率是 *m* = 7，因为在一个完整的 1 周周期中会有七个观测值。它也可能具有年度季节性，这意味着
    *m* = 365。因此，你可以看到每日和亚日数据可以有不同的周期长度，因此有不同的频率 *m*。表 8.2 提供了根据每日和亚日数据的季节周期选择适当的
    *m* 值。
- en: Table 8.2 Appropriate frequency *m* for daily and sub-daily data
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8.2 每日和亚日数据的适当频率 *m*
- en: '| Data collection | Frequency *m* |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| 数据收集 | 频率 *m* |'
- en: '| Minute | Hour | Day | Week | Year |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| 分钟 | 小时 | 天 | 周 | 年 |'
- en: '| Daily |  |  |  | 7 | 365 |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| 每日 |  |  |  | 7 | 365 |'
- en: '| Hourly |  |  | 24 | 168 | 8766 |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| 每小时 |  |  | 24 | 168 | 8766 |'
- en: '| Every minute |  | 60 | 1440 | 10080 | 525960 |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| 每分钟 |  | 60 | 1440 | 10080 | 525960 |'
- en: '| Every second | 60 | 3600 | 86400 | 604800 | 31557600 |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| 每秒 | 60 | 3600 | 86400 | 604800 | 31557600 |'
- en: Now that you understand the parameter *m*, the meanings of *P*, *D*, and *Q*
    become intuitive. As mentioned before, they are the seasonal counterparts of the
    *p*, *d*, and *q* parameters that you know from the ARIMA(*p*,*d*,*q*) model.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经理解了参数 *m*，那么 *P*、*D* 和 *Q* 的含义也就变得直观了。正如之前提到的，它们是来自 ARIMA(*p*,*d*,*q*)
    模型的 *p*、*d* 和 *q* 参数的季节性对应项。
- en: Seasonal autoregressive integrated moving average (SARIMA) model
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 季节性自回归积分移动平均（SARIMA）模型
- en: The *seasonal autoregressive integrated moving average* (SARIMA) model adds
    seasonal parameters to the ARIMA(*p*,*d*,*q*) model.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: SARIMA（季节性自回归积分移动平均）模型向 ARIMA(*p*,*d*,*q*) 模型添加了季节性参数。
- en: It is denoted as SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*, where *P* is the order
    of the seasonal AR(*P*) process, *D* is the seasonal order of integration, *Q*
    is the order of the seasonal MA(*Q*) process, and *m* is the frequency, or the
    number of observations per seasonal cycle.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 它表示为 SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*，其中 *P* 是季节性自回归过程（AR(*P*)）的阶数，*D*
    是季节性积分阶数，*Q* 是季节性移动平均过程（MA(*Q*)）的阶数，而 *m* 是频率，或每个季节周期内的观测次数。
- en: Note that a SARIMA(*p*,*d*,*q*)(0,0,0)*[m]* model is equivalent to an ARIMA(*p*,*d*,*q*)
    model.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，SARIMA(*p*,*d*,*q*)(0,0,0)*[m]* 模型等同于 ARIMA(*p*,*d*,*q*) 模型。
- en: Let’s consider an example where *m* = 12. If *P* = 2, this means that we are
    including two past values of the series at a lag that is a multiple of *m*. Therefore,
    we’ll include the values at *y*[*t*–12] and *y*[*t*–24].
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑一个 *m* = 12 的例子。如果 *P* = 2，这意味着我们包括两个过去值，这些值在 *m* 的倍数滞后中。因此，我们将包括 *y*[*t*–12]
    和 *y*[*t*–24] 的值。
- en: Similarly, if *D* = 1, this means that a seasonal difference makes the series
    stationary. In this case, a seasonal difference would be expressed as equation
    8.1.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，如果 *D* = 1，这意味着季节差分使序列平稳。在这种情况下，季节差分将表示为方程 8.1。
- en: '*y''[t]* = *y[t]*– *y*[*t*–12]'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '*y''[t]* = *y[t]*– *y*[*t*–12]'
- en: Equation 8.1
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 方程 8.1
- en: In a situation where *Q* = 2, we’ll include past error terms at lags that are
    a multiple of *m*. Therefore, we’ll include the errors ϵ[*t*–12] and ϵ[*t*–24].
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在*Q* = 2的情况下，我们将包括过去误差项在*m*的倍数滞后中。因此，我们将包括误差项ϵ[*t*–12]和ϵ[*t*–24]。
- en: Let’s put this into perspective using the airline’s total monthly air passengers
    dataset. We know that this is monthly data, which means that *m* = 12. Also, we
    can see that the months of July and August usually have the highest numbers of
    air passengers in the year, as shown by the round markers in figure 8.2\. Therefore,
    if we are to forecast the month of July in 1961, the information coming from the
    month of July in prior years is likely going to be useful, since we can intuitively
    expect the number of air passengers to be at its highest point in the month of
    July 1961\. The parameters *P*, *D*, *Q*, and *m* allow us to capture that information
    from the previous seasonal cycle to help us forecast our time series.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用航空公司的总月度航空乘客数据集来分析这个问题。我们知道这是月度数据，这意味着*m* = 12。此外，我们可以看到七月和八月通常是每年航空乘客数量最高的月份，如图8.2中的圆形标记所示。因此，如果我们预测1961年的七月，那么从前几年七月的信息可能会很有用，因为我们可以直观地预期1961年七月的航空乘客数量将达到最高点。参数*P*、*D*、*Q*和*m*使我们能够从先前的季节周期中捕捉到这些信息，以帮助我们预测时间序列。
- en: '![](../../OEBPS/Images/08-02.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-02.png)'
- en: Figure 8.2 Marking the month of July of each year. You can see how the month
    of July has the highest number of air passengers. Therefore, it would make sense
    if July of the following year also saw the highest number of air passengers in
    the year. That kind of information is captured by the seasonal parameters *P*,
    *D*, *Q*, and *m* of the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.2 标记了每年的七月。你可以看到七月有最多的航空乘客。因此，下一年七月也看到该年最高的航空乘客数量是有意义的。这种信息被SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型中的季节性参数*P*、*D*、*Q*和*m*所捕捉。
- en: Now that we have examined the SARIMA model and you understand how it expands
    on the ARIMA model, let’s move on to identifying the presence of seasonal patterns
    in a time series.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经研究了SARIMA模型，并且你了解了它是如何扩展ARIMA模型的，让我们继续识别时间序列中季节性模式的存在。
- en: 8.2 Identifying seasonal patterns in a time series
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.2 识别时间序列中的季节性模式
- en: Intuitively, we know that it makes sense to apply the SARIMA model on data that
    exhibits a seasonal pattern. Therefore, it is important to determine ways to identify
    seasonality in time series.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 直观上，我们知道在具有季节性模式的数据上应用SARIMA模型是有意义的。因此，确定识别时间序列中季节性的方法非常重要。
- en: Usually, plotting the time series data is enough to observe periodic patterns.
    For example, looking at the total monthly air passengers in figure 8.3, it is
    easy for us to identify a repeating pattern every year, with a high number of
    passengers being recorded during June, July, and August of each year, and fewer
    passengers in November, December, and January of each year.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，绘制时间序列数据就足以观察到周期性模式。例如，查看图8.3中的总月度航空乘客，我们很容易识别每年重复的模式，每年六月、七月和八月记录的乘客数量较多，而每年十一月、十二月和一月的乘客数量较少。
- en: '![](../../OEBPS/Images/08-03.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-03.png)'
- en: Figure 8.3 Highlighting the seasonal pattern in the monthly number of air passengers.
    The dashed vertical lines separate periods of twelve months. We can clearly see
    how a peak occurs in the middle of each year, and there is a very similar pattern
    for the beginning and end of each year. This observation is usually enough to
    determine that the dataset is seasonal.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.3 强调了月度航空乘客数量中的季节性模式。虚线垂直线将十二个月份的周期分开。我们可以清楚地看到每年中间都有一个峰值，并且每年开始和结束都有非常相似的图案。这种观察通常足以确定数据集是季节性的。
- en: 'Another way of identifying seasonal patterns in a time series is using time
    series decomposition, a method that we first used in chapter 1\. Time series decomposition
    is a statistical task that separates the time series into its three main components:
    a trend component, a seasonal component, and the residuals.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 识别时间序列中季节性模式的另一种方法是使用时间序列分解，这是我们首次在第一章中使用的。时间序列分解是一种统计任务，它将时间序列分解为其三个主要组成部分：趋势成分、季节成分和残差。
- en: The trend component represents the long-term change in the time series. This
    component is responsible for time series that increase or decrease over time.
    The seasonal component is, of course, the seasonal pattern in the time series.
    It represents repeated fluctuations that occur over a fixed period of time. Finally,
    the residuals, or the noise, express any irregularity that cannot be explained
    by the trend or the seasonal component.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 趋势成分代表时间序列中的长期变化。这个成分负责时间序列随时间的增加或减少。季节成分当然是时间序列中的季节性模式。它代表在固定时间段内发生的重复波动。最后，残差或噪声表示任何无法由趋势或季节成分解释的不规则性。
- en: Time series decomposition
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列分解
- en: '*Time series decomposition* is a statistical task that separates the time series
    into its three main components: a trend component, a seasonal component, and the
    residuals.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '*时间序列分解*是一种统计任务，它将时间序列分解为其三个主要成分：趋势成分、季节成分和残差。'
- en: The trend component represents the long-term change in the time series. This
    component is responsible for time series that increase or decrease over time.
    The seasonal component is the periodic pattern in the time series. It represents
    repeated fluctuations that occur over a fixed period of time. Finally, the residuals,
    or the noise, express any irregularity that cannot be explained by the trend or
    the seasonal component.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 趋势成分代表时间序列中的长期变化。这个成分负责时间序列随时间的增加或减少。季节成分是时间序列中的周期性模式。它代表在固定时间段内发生的重复波动。最后，残差或噪声表示任何无法由趋势或季节成分解释的不规则性。
- en: 'Note The source code for this chapter is available on GitHub: [https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08](https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08).'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：本章的源代码可在GitHub上找到：[https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08](https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08)。
- en: With time series decomposition, we can clearly identify and visualize the seasonal
    component of a time series. We can decompose the dataset for air passengers using
    the `STL` function from the `statsmodels` library to generate figure 8.4.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 通过时间序列分解，我们可以清楚地识别和可视化时间序列的季节成分。我们可以使用`statsmodels`库中的`STL`函数分解空乘数据集，以生成图8.4。
- en: '[PRE0]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: ❶ Decompose the series using the STL function. The period is equal to the frequency
    m. Since we have monthly data, the period is 12.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 使用STL函数分解序列。周期等于频率m。由于我们拥有月度数据，周期为12。
- en: ❷ Plot each component in a figure.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 在图中绘制每个成分。
- en: '![](../../OEBPS/Images/08-04.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-04.png)'
- en: Figure 8.4 Decomposing the dataset for air passengers. The first plot shows
    the observed data. The second plot shows the trend component, which tells us that
    the number of air passengers is increasing over time. The third plot displays
    the seasonal component, and we can clearly see a repeating pattern through time.
    Finally, the last plot shows the residuals, which are variations in the data that
    cannot be explained by the trend or the seasonal component.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.4 空乘数据集的分解。第一幅图显示了观测数据。第二幅图显示了趋势成分，它告诉我们空乘数量随时间增加。第三幅图显示了季节成分，我们可以清楚地看到随时间重复出现的模式。最后，最后一幅图显示了残差，这些是数据中的变化，无法由趋势或季节成分解释。
- en: In figure 8.4 you can see each component of our time series. You’ll notice that
    the *y*-axis for the plots of the trend, seasonal, and residuals components are
    all slightly different from the observed data. This is because each plot shows
    the magnitude of change that is attributed to that particular component. That
    way, the sum of the trend, seasonal, and residuals components results in the observed
    data shown in the top plot. This explains why the seasonal component is sometimes
    in the negative values and other times in the positive values, as it creates the
    peaks and troughs in the observed data.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在图8.4中，你可以看到我们时间序列的每个成分。你会注意到趋势、季节和残差成分的图表的*y*轴与观测数据略有不同。这是因为每个图表显示了归因于该特定成分的变化幅度。这样，趋势、季节和残差成分的总和就等于顶部图表中显示的观测数据。这解释了为什么季节成分有时为负值，有时为正值，因为它在观测数据中创造了峰值和谷值。
- en: In a situation where we have a time series with no seasonal pattern, the decomposition
    process will display a flat horizontal line at 0 for the seasonal component. To
    demonstrate that, I simulated a linear time series and decomposed it into its
    three components using the method you just saw. The result is shown in figure
    8.5.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在没有季节性模式的时间序列情况下，分解过程将在季节性成分上显示0处的平坦水平线。为了证明这一点，我模拟了一个线性时间序列，并使用你刚才看到的方法将其分解为其三个组成部分。结果如图8.5所示。
- en: '![](../../OEBPS/Images/08-05.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-05.png)'
- en: Figure 8.5 Time series decomposition of a simulated linear series. The top plot
    shows the observed data, and you’ll notice that I simulated a perfectly linear
    series. The second plot shows the trend component, which is expected to be the
    same as the observed data, since the series is linearly increasing over time.
    Since there is no seasonal pattern, the seasonal component is a flat horizontal
    line at 0\. Here the residuals are also 0, because I simulated a perfectly linear
    series.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.5为模拟线性序列的时间序列分解。顶部图显示了观测数据，你会注意到我模拟了一个完美的线性序列。第二幅图显示了趋势成分，它应该与观测数据相同，因为序列随时间线性增加。由于没有季节性模式，季节性成分在0处是一条平坦的水平线。在这里，残差也是0，因为我模拟了一个完美的线性序列。
- en: You can see how time series decomposition can help us determine if our data
    is seasonal or not. This is a graphical method and not a statistical test, but
    it is enough to determine whether a series is seasonal or not, so that we can
    apply the appropriate model for forecasting. In fact, there are no statistical
    tests to identify seasonality in time series.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到时间序列分解如何帮助我们确定我们的数据是否具有季节性。这是一个图形方法，而不是统计测试，但它足以确定一个序列是否具有季节性，这样我们就可以应用适当的模型进行预测。实际上，没有统计测试可以用来识别时间序列中的季节性。
- en: Now that you know how to identify seasonal patterns in a series, we can move
    on to adapting the general modeling procedure to include the new parameters of
    the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model and forecast the number of monthly
    air passengers.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经知道如何识别序列中的季节性模式，我们可以继续调整通用建模程序，以包括SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型的新参数，并预测每月航空乘客数量。
- en: 8.3 Forecasting the number of monthly air passengers
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.3 预测每月航空乘客数量
- en: In the previous chapter, we adapted our general modeling procedure to account
    for the new parameter *d* in the ARIMA model that allows us to forecast non-stationary
    time series. The steps are outlined in figure 8.6\. Now we must modify it again
    to account for the new parameters of the SARIMA model, which are *P*, *D*, *Q*,
    and *m*.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们将我们的通用建模程序调整为考虑ARIMA模型中的新参数 *d*，这使得我们能够预测非平稳时间序列。步骤已在图8.6中概述。现在我们必须再次修改它，以考虑SARIMA模型的新的参数
    *P*，*D*，*Q* 和 *m*。
- en: '![](../../OEBPS/Images/08-06.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-06.png)'
- en: Figure 8.6 General modeling procedure for an ARIMA model. We now need to adapt
    the steps to account for the parameters *P*, *D*, *Q*, and *m* of the SARIMA model.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.6为ARIMA模型的通用建模程序。我们现在需要调整步骤，以考虑SARIMA模型的参数 *P*，*D*，*Q* 和 *m*。
- en: The first step of gathering data remains untouched. Then we still check for
    stationarity and apply transformation in order to set the parameter *d*. However,
    we can also perform seasonal differencing to make the series stationary, and *D*
    will be equal to the minimum number of times we applied seasonal differencing.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 收集数据的第一步保持不变。然后我们仍然检查平稳性并应用转换以设置参数 *d*。然而，我们也可以进行季节性差分，使序列平稳，*D* 将等于我们应用季节性差分的最小次数。
- en: Then we set a range of possible values for *p*, *q*, *P*, and *Q*, as the SARIMA
    model can also incorporate the order of the seasonal autoregressive and seasonal
    moving average processes. Note that the addition of these two new parameters will
    increase the number of unique combinations of SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*
    models we can fit, so this step will take longer to complete. The rest of the
    procedure remains the same, as we still need to select the model with the lowest
    AIC and perform residual analysis before using the model for forecasting. The
    resulting modeling procedure is shown in figure 8.7.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们为 *p*，*q*，*P* 和 *Q* 设置了一系列可能的值，因为SARIMA模型还可以包含季节性自回归和季节性移动平均过程的阶数。请注意，这两个新参数的添加将增加我们可以拟合的SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型独特组合的数量，因此这一步将需要更长的时间来完成。其余的程序保持不变，因为我们仍然需要选择具有最低AIC的模型，并在使用模型进行预测之前进行残差分析。建模过程的结果如图8.7所示。
- en: '![](../../OEBPS/Images/08-07.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-07.png)'
- en: Figure 8.7 General modeling procedure for the SARIMA model. Note that we can
    set *P*, *D*, and *Q* to 0 to obtain an ARIMA(*p*,*d*,*q*) model.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.7 SARIMA模型的通用建模过程。注意，我们可以将*P*、*D*和*Q*设置为0以获得ARIMA(*p*,*d*,*q*)模型。
- en: With our new modeling procedure defined, we are now ready to forecast the total
    number of monthly air passengers. For this scenario, we wish to forecast 1 year
    of monthly air passengers, so we will use the data from 1960 as the test set,
    as shown in figure 8.8.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义了新的建模过程之后，我们现在可以预测每月航空旅客的总数。对于这个场景，我们希望预测1年的月航空旅客数，因此我们将1960年的数据作为测试集，如图8.8所示。
- en: '![](../../OEBPS/Images/08-08.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-08.png)'
- en: Figure 8.8 Train set and test set split for the air passengers dataset. The
    shaded area represents the testing period, which corresponds to the full year
    of 1960, as our goal is to forecast a year of monthly air passengers.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.8 航空旅客数据集的训练集和测试集划分。阴影区域表示测试期，对应于1960年的全年，因为我们的目标是预测一年的月航空旅客数。
- en: The baseline model will be the naive seasonal forecast, and we will use both
    the ARIMA(*p*,*d*,*q*) and SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* models to verify
    whether the addition of seasonal components will yield better forecasts.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 基线模型将是简单的季节性预测，我们将使用ARIMA(*p*,*d*,*q*)和SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型来验证添加季节性成分是否会提高预测效果。
- en: 8.3.1 Forecasting with an ARIMA(*p*,*d*,*q*) model
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.1 使用ARIMA(*p*,*d*,*q*)模型进行预测
- en: We’ll first model the dataset using an ARIMA(*p*,*d*,*q*) model. That way, we
    can compare its performance to the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先使用ARIMA(*p*,*d*,*q*)模型对数据集进行建模。这样，我们可以比较其性能与SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*模型。
- en: Following the general modeling procedure we outlined before, we’ll first test
    for stationarity. Again, we use the ADF test.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 按照我们之前概述的通用建模过程，我们首先将测试平稳性。再次，我们使用ADF测试。
- en: '[PRE1]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This prints out an ADF statistic of 0.82 and a p-value of 0.99. Therefore, we
    cannot reject the null hypothesis and the series is not stationary. We’ll difference
    the series and test for stationarity again.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 这打印出ADF统计量为0.82和p值为0.99。因此，我们不能拒绝零假设，并且序列不是平稳的。我们将对序列进行差分并再次测试平稳性。
- en: '[PRE2]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: ❶ First-order differencing
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 一阶差分
- en: This returns an ADF statistic of –2.83 and a p-value of 0.054. Again, we cannot
    reject the null hypothesis, and differencing the series once did not make it stationary.
    Therefore, we’ll difference it again and test for stationarity.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这返回了ADF统计量为-2.83和p值为0.054。再次，我们不能拒绝零假设，并且对序列进行一次差分并没有使其平稳。因此，我们将再次差分并测试平稳性。
- en: '[PRE3]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: ❶ Series is now differenced twice
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 序列现在被差分两次
- en: This returns an ADF statistic of –16.38 and a p-value of 2.73 × 10^(–29). Now
    we can reject the null hypothesis, and our series is considered to be stationary.
    Since the series was differenced twice to become stationary, *d* = 2.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这返回了ADF统计量为-16.38和p值为2.73 × 10^(–29)。现在我们可以拒绝零假设，并且我们的序列被认为是平稳的。由于序列被差分两次以变得平稳，*d*
    = 2。
- en: Now we can define a range of possible values for the parameters *p* and *q*
    and fit all unique ARIMA(*p*,*d*,*q*) models. We’ll specifically choose a range
    from 0 to 12 to allow the ARIMA model to go back 12 timesteps in time. Since the
    data is sampled monthly and we know it is seasonal, we can hypothesize that the
    number of air passengers in January of a given year is likely predictive of the
    number of air passengers in January of the following year. Since these two points
    are 12 timesteps apart, we’ll allow the values of *p* and *q* to vary from 0 to
    12 in order to potentially capture this seasonal information in the ARIMA(*p*,*d*,*q*)
    model. Finally, since we are working with an ARIMA model, we’ll set *P*, *D*,
    and *Q* to 0\. Note the use of the parameter `s` in the following code, which
    is equivalent to *m*. The implementation of SARIMA in `statsmodels` simply uses
    `s` instead of *m*—they both denote the frequency.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以定义参数*p*和*q*的可能值的范围，并拟合所有唯一的ARIMA(*p*,*d*,*q*)模型。我们将特别选择从0到12的范围，以便ARIMA模型可以回溯12个时间步。由于数据是按月采样的，并且我们知道它是季节性的，我们可以假设给定年份一月份的航空旅客数很可能预示着下一年一月份的航空旅客数。由于这两个点相隔12个时间步，我们将允许*p*和*q*的值从0到12变化，以在ARIMA(*p*,*d*,*q*)模型中捕捉这种季节性信息。最后，由于我们正在使用ARIMA模型，我们将*P*、*D*和*Q*设置为0。注意以下代码中参数`s`的使用，它与*m*等价。`statsmodels`中SARIMA的实现简单地使用`s`而不是*m*——它们都表示频率。
- en: '[PRE4]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: ❶ Allow p and q to vary from 0 to 12 in order to capture seasonal information.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 允许p和q从0到12变化，以捕捉季节性信息。
- en: ❷ Set P and Q to 0, since we are working with an ARIMA(p,d,q) model.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 将P和Q设置为0，因为我们正在使用ARIMA(p,d,q)模型。
- en: ❸ Set the parameter d to the number of times the series was differenced to become
    stationary.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 将参数d设置为序列被差分以成为平稳状态的次数。
- en: ❹ D is set to 0 because we are working with an ARIMA(p,d,q) model.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ D设置为0，因为我们正在使用ARIMA(p,d,q)模型。
- en: ❺ The parameter `s` is equivalent to m. They both denote the frequency. This
    is simply how the SARIMA model is implemented in the statsmodels library.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 参数`s`等同于m。它们都表示频率。这就是SARIMA模型在statsmodels库中的实现方式。
- en: ❻ Generate all possible combinations of (p,d,q)(0,0,0).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: ❻ 生成所有可能的(p,d,q)(0,0,0)组合。
- en: You’ll notice that we set the parameters *P*, *D*, *Q*, and *m*, even though
    we are working with an ARIMA model. This is because we are going to define an
    `optimize_SARIMA` function that will then be reused in the next section. We set
    *P*, *D*, and *Q* to 0 because a SARIMA(*p*,*d*,*q*)(0,0,0)*[m]* model is equivalent
    to an ARIMA(*p*,*d*,*q*) model.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 你会注意到我们设置了*p*、*D*、*Q*和*m*参数，尽管我们正在使用ARIMA模型。这是因为我们将定义一个`optimize_SARIMA`函数，然后将在下一节中重用它。我们将*p*、*D*和*q*设置为0，因为SARIMA(*p*,*d*,*q*)(0,0,0)*[m]*模型等同于ARIMA(*p*,*d*,*q*)模型。
- en: The `optimize_SARIMA` function builds on the `optimize_ARIMA` function that
    we defined in the previous chapter. This time, we’ll integrate the possible values
    of *P* and *Q*, as well as add the seasonal order of integration *D* and the frequency
    *m*. The function is shown in the following listing.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '`optimize_SARIMA`函数基于我们在上一章中定义的`optimize_ARIMA`函数。这次，我们将整合*p*和*q*的可能值，以及添加季节积分阶数*d*和频率*m*。函数如下所示。'
- en: Listing 8.1 Defining a function to select the best SARIMA model
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 列表8.1 定义一个函数以选择最佳SARIMA模型
- en: '[PRE5]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: ❶ The order_list parameter now includes p, q, P, and Q orders. We also add the
    seasonal order of differencing D and the frequency. Remember that the frequency
    m in the SARIMA model is denoted as s in the implementation in the statsmodels
    library.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ order_list参数现在包括p、q、P和Q阶数。我们还添加了季节差分阶数D和频率。记住，SARIMA模型中的频率m在statsmodels库的实现中用s表示。
- en: ❷ Loop over all unique SARIMA(p,d,q)(P,D,Q)[m] models, fit them, and store the
    AICs.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 遍历所有唯一的SARIMA(p,d,q)(P,D,Q)[m]模型，拟合它们并存储AIC值。
- en: ❸ Return the sorted DataFrame, starting with the lowest AIC.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 返回按最低AIC值排序的DataFrame。
- en: With the function ready, we can launch it using the train set and get the ARIMA
    model with the lowest AIC. Despite the fact that we are using the `optimize_SARIMA`
    function, we are still fitting an ARIMA model because we specifically set *P*,
    *D*, and *Q* to 0\. For the train set, we’ll take all data points but the last
    twelve, as they will be used for the test set.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 函数准备好后，我们可以使用训练集启动它，以获得具有最低AIC值的ARIMA模型。尽管我们正在使用`optimize_SARIMA`函数，但我们仍然拟合ARIMA模型，因为我们特别将*p*、*D*和*q*设置为0。对于训练集，我们将取所有数据点，但最后十二个，因为它们将被用于测试集。
- en: '[PRE6]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: ❶ The train set consists of all data points but the last 12, as the last year
    of data is used for the test set.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 训练集包括所有数据点，但最后12个，因为最后一年数据用于测试集。
- en: ❷ Run the optimize_SARIMA function.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 运行optimize_SARIMA函数。
- en: ❸ Display the sorted DataFrame in increasing order of AIC.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 按AIC值递增顺序显示排序后的DataFrame。
- en: This returns a `DataFrame` where the model with the lowest AIC is a SARIMA(11,2,3)(0,0,0)[12]
    model, which is equivalent to an ARIMA(11,2,3) model. As you can see, allowing
    the order *p* to vary from 0 to 12 was beneficial for the model, as the model
    with the lowest AIC takes into account the past 11 values of the series, since
    *p* = 11. We will see if this is enough to capture seasonal information from the
    series, and we will compare the performance of the ARIMA model to the SARIMA model
    in the next section.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 这将返回一个`DataFrame`，其中具有最低AIC值的模型是SARIMA(11,2,3)(0,0,0)[12]模型，它等同于ARIMA(11,2,3)模型。正如你所见，允许*p*的阶数从0到12变化对模型有益，因为具有最低AIC值的模型考虑了序列的过去11个值，因为*p*
    = 11。我们将看到这是否足以捕捉序列的季节性信息，我们将在下一节比较ARIMA模型和SARIMA模型的表现。
- en: For now, we’ll focus on performing residual analysis. We can fit the ARIMA(11,2,3)
    model obtained previously and plot the residuals’ diagnostics.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们将专注于执行残差分析。我们可以拟合之前获得的ARIMA(11,2,3)模型并绘制残差诊断图。
- en: '[PRE7]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The result is shown in figure 8.9\. Based on the qualitative analysis, the residuals
    are close to white noise, meaning that the errors are random.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如图 8.9 所示。基于定性分析，残差接近白噪声，这意味着误差是随机的。
- en: '![](../../OEBPS/Images/08-09.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-09.png)'
- en: Figure 8.9 Residuals’ diagnostics of the ARIMA(11,2,3) model. In the top-left
    plot, the residuals have no trend with a variance that seems fairly constant over
    time, which resembles the behavior of white noise. The top-right plot shows the
    distribution of the residuals, which approaches a normal distribution, despite
    the unusual peak. This is further confirmed by the Q-Q plot at the bottom left,
    which displays a fairly straight line that lies on *y* = *x*. Finally, the correlogram
    in the bottom-right plot shows no significant autocorrelation coefficients after
    lag 0, which is exactly like white noise. From this analysis, the residuals resemble
    white noise.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.9 ARIMA(11,2,3) 模型的残差诊断。在左上角的图中，残差没有趋势，其方差似乎随时间保持相对恒定，这与白噪声的行为相似。右上角的图显示了残差的分布，尽管有异常峰值，但接近正态分布。这一点进一步由左下角的
    Q-Q 图证实，该图显示一条相当直的线，位于 *y* = *x* 上。最后，右下角的 correlogram 图显示在滞后 0 之后没有显著的自相关系数，这与白噪声完全一样。从这个分析来看，残差类似于白噪声。
- en: The next step is to run the Ljung-Box test on the residuals to make sure that
    they are independent and uncorrelated.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是对残差进行 Ljung-Box 测试，以确保它们是独立且不相关的。
- en: '[PRE8]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The returned p-values are all greater than 0.05 except for the first two values.
    This means that, according to the Ljung-Box test, we reject the null hypothesis
    with a 5% chance of being wrong, since we set our significance boundary to 0.05\.
    However, the third value and onwards are all greater than 0.05, so we reject the
    null hypothesis, concluding that the residuals are uncorrelated starting at lag
    3.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 返回的 p 值都大于 0.05，除了前两个值。这意味着根据 Ljung-Box 测试，我们有 5% 的错误概率拒绝零假设，因为我们把显著性边界设定为 0.05。然而，第三个值及以后的值都大于
    0.05，所以我们拒绝零假设，得出结论，残差从滞后 3 开始是不相关的。
- en: This is an interesting situation to dissect, because the graphical analysis
    of the residuals leads us to conclude that they resemble white noise, but the
    Ljung-Box test points to some correlation at lags 1 and 2\. This means that our
    ARIMA model is not capturing all the information from the data.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个有趣的情况，因为残差的可视化分析使我们得出结论，它们类似于白噪声，但 Ljung-Box 测试指出在滞后 1 和 2 处存在一些相关性。这意味着我们的
    ARIMA 模型没有捕捉到数据中的所有信息。
- en: In this case, we’ll move forward with the model, because we know that we are
    modeling seasonal data with a non-seasonal model. Therefore, the Ljung-Box test
    is really telling us that our model is not perfect, but that’s okay, because part
    of this exercise is to compare the performance of ARIMA and SARIMA and demonstrate
    that SARIMA is the way to go when dealing with seasonal data.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们将继续使用模型，因为我们知道我们正在使用非季节性模型来模拟季节性数据。因此，Ljung-Box 测试实际上在告诉我们我们的模型并不完美，但这没关系，因为这项练习的一部分就是要比较
    ARIMA 和 SARIMA 的性能，并证明在处理季节性数据时 SARIMA 是最佳选择。
- en: As previously mentioned, we wish to predict a full year of monthly air passengers,
    using the last 12 months of data as our test set. The baseline model is the naive
    seasonal forecast, where we simply use the number of air passengers for each month
    of 1959 as a forecast for each month of 1960.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们希望预测一年的月度航空乘客量，使用最后 12 个月的数据作为我们的测试集。基线模型是简单的季节性预测，我们只是使用 1959 年每个月的航空乘客数作为
    1960 年每个月的预测。
- en: '[PRE9]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: ❶ Create the test set. It corresponds to the last 12 data points, which is the
    data for 1960.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 创建测试集。它对应于最后 12 个数据点，即 1960 年的数据。
- en: ❷ The naive seasonal forecast simply reuses the data from 1959 as a forecast
    for 1960.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 简单的季节性预测只是将 1959 年的数据作为 1960 年的预测。
- en: We can append the forecasts from our ARIMA(11,2,3) model to the `test DataFrame`.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将我们的 ARIMA(11,2,3) 模型的预测结果添加到 `test DataFrame` 中。
- en: '[PRE10]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: ❶ Get predictions for each month of 1960.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 获取 1960 年每个月的预测。
- en: ❷ Append predictions to test.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 将预测结果添加到测试集中。
- en: With forecasts from the ARIMA model stored in `test`, we will now use a SARIMA
    model and later compare the performance of both models to see if the SARIMA model
    actually performs better than the ARIMA model when applied on a seasonal time
    series.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 将 ARIMA 模型的预测存储在 `test` 中后，我们现在将使用 SARIMA 模型，并稍后比较两种模型的性能，以查看 SARIMA 模型在应用于季节性时间序列时是否确实比
    ARIMA 模型表现更好。
- en: 8.3.2 Forecasting with a SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.2 使用 SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* 模型进行预测
- en: In the previous section, we used an ARIMA(11,2,3) model to forecast the number
    of monthly air passengers. Now we’ll fit a SARIMA model and see if it performs
    better than the ARIMA model. Hopefully the SARIMA model will perform better, since
    it can capture seasonal information, and we know that our dataset exhibits clear
    seasonality, as shown in figure 8.10.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们使用 ARIMA(11,2,3) 模型来预测月度航空乘客数量。现在我们将拟合 SARIMA 模型，看看它是否比 ARIMA 模型表现更好。希望
    SARIMA 模型表现更好，因为它可以捕捉季节信息，我们知道我们的数据集表现出明显的季节性，如图 8.10 所示。
- en: '![](../../OEBPS/Images/08-10.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-10.png)'
- en: Figure 8.10 Monthly total number of air passengers for an airline, from January
    1949 to December 1960\. You can see a clear seasonal pattern in the series, with
    peak traffic occurring toward the middle of the year.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.10 从 1949 年 1 月到 1960 年 12 月的航空公司月度总乘客数。你可以看到序列中有一个明显的季节性模式，年中交通流量达到峰值。
- en: Following the steps in our general modeling procedure (figure 8.11), we’ll first
    check for stationarity and apply the required transformations.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 按照我们的一般建模过程（图 8.11）的步骤，我们首先检查平稳性并应用所需的转换。
- en: '[PRE11]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../../OEBPS/Images/08-11.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-11.png)'
- en: Figure 8.11 General modeling procedure for the SARIMA model
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.11 SARIMA 模型的一般建模过程
- en: The ADF test on the dataset returns an ADF statistic of 0.82 and a p-value of
    0.99. Therefore, we cannot reject the null hypothesis and the series is not stationary.
    We can apply a first-order differencing and test for stationarity.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 对数据集进行的 ADF 测试返回 ADF 统计量为 0.82 和 p 值为 0.99。因此，我们不能拒绝零假设，序列是非平稳的。我们可以应用一阶差分并测试平稳性。
- en: '[PRE12]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This returns an ADF statistic of –2.83 and a p-value of 0.054. Since the p-value
    is greater than 0.05, we cannot reject the null hypothesis, and the series is
    still non-stationary. Therefore, let’s apply a seasonal difference and test for
    stationarity.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 这返回 ADF 统计量为 –2.83 和 p 值为 0.054。由于 p 值大于 0.05，我们不能拒绝零假设，序列仍然是非平稳的。因此，让我们应用季节差分并测试平稳性。
- en: '[PRE13]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: ❶ Seasonal differencing. Since we have monthly data, m = 12, so the seasonal
    difference is the difference between two values that are 12 timesteps apart.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 季节差分。由于我们拥有月度数据，m = 12，因此季节差分是两个相隔 12 个时间步长的值的差。
- en: This returns an ADF statistic of –17.63 and a p-value of 3.82 × 10^(–30). With
    a large and negative ADF statistic and a p-value smaller than 0.05, we can reject
    the null hypothesis and consider the transformed series as stationary. Therefore,
    we performed one round of differencing, meaning that *d* = 1, and one round of
    seasonal differencing, meaning that *D* = 1.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这返回 ADF 统计量为 –17.63 和 p 值为 3.82 × 10^(–30)。由于 ADF 统计量大且为负，且 p 值小于 0.05，我们可以拒绝零假设，并将转换后的序列视为平稳的。因此，我们进行了一轮差分，意味着
    *d* = 1，以及一轮季节差分，意味着 *D* = 1。
- en: With this step done, we can now define the range of possible values for *p*,
    *q*, *P*, and *Q*, fit each unique SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model,
    and select the one with the lowest AIC.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成这一步后，我们现在可以定义 *p*、*q*、*P* 和 *Q* 的可能值范围，为每个独特的 SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*
    模型进行拟合，并选择具有最低 AIC 的模型。
- en: '[PRE14]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: ❶ We try values of [0,1,2,3] for p, q, P, and Q.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 我们尝试 p、q、P 和 Q 的值分别为 [0,1,2,3]。
- en: ❷ Generate the unique combinations of orders.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 生成唯一组合的阶数。
- en: ❸ The train set consists of all the data except the last 12 data points, which
    are used for the test set.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 训练集包括所有数据，除了最后 12 个数据点，这些数据点用于测试集。
- en: ❹ Fit all SARIMA models on the training set.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 在训练集上拟合所有 SARIMA 模型。
- en: ❺ Display the result.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 显示结果。
- en: Once the function is done running, we find that the SARIMA(2,1,1)(1,1,2)[12]
    model has the lowest AIC, which is a value of 892.24. We can fit this model again
    on the training set to perform residual analysis.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦函数运行完成，我们发现 SARIMA(2,1,1)(1,1,2)[12] 模型具有最低的 AIC，其值为 892.24。我们可以在训练集上再次拟合此模型以进行残差分析。
- en: We’ll start by plotting the residuals’ diagnostics in figure 8.12.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先将在图 8.12 中绘制残差的诊断图。
- en: '[PRE15]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![](../../OEBPS/Images/08-12.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/08-12.png)'
- en: Figure 8.12 Residuals’ diagnostics of the SARIMA(2,1,1)(1,1,2)[12] model. The
    top-left plot shows that the residuals do not exhibit a trend or a change in variance.
    The top-right plot shows that the residuals’ distribution is very close to a normal
    distribution. This is further supported by the Q-Q plot at the bottom left, which
    displays a fairly straight line that lies on *y* = *x*. Finally, the correlogram
    at the bottom right shows no significant coefficients after lag 0\. Therefore,
    everything leads to the conclusion that the residuals resemble white noise.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.12 SARIMA(2,1,1)(1,1,2)[12]模型的残差诊断。左上角的图显示残差没有表现出趋势或方差的变化。右上角的图显示残差的分布非常接近正态分布。这一点进一步由左下角的Q-Q图支持，该图显示了一条相当直的线，位于
    *y* = *x* 上。最后，右下角的 correlogram 在滞后0之后没有显示显著的系数。因此，所有这些都指向一个结论，即残差类似于白噪声。
- en: The results show that our residuals are completely random, which is exactly
    what we are looking for in a good model.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 结果显示，我们的残差完全随机，这正是我们在一个好的模型中寻找的。
- en: The final test to determine whether we can use this model for forecasting or
    not is the Ljung-Box test.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 确定我们是否可以使用此模型进行预测的最终测试是Ljung-Box测试。
- en: '[PRE16]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: The returned p-values are all greater than 0.05. Therefore, we do not reject
    the null hypothesis, and we conclude that the residuals are independent and uncorrelated,
    just like white noise.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 返回的p值都大于0.05。因此，我们不拒绝零假设，我们得出结论，残差是独立且不相关的，就像白噪声一样。
- en: Our model has passed all the tests from the residuals analysis, and we are ready
    to use it for forecasting. Again, we’ll forecast the number of monthly air passengers
    for the year of 1960 to compare the predicted values to the observed values in
    the test set.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 我们模型已经通过了残差分析的所有的测试，我们准备用它来进行预测。再次，我们将预测1960年的月度航空旅客数量，并将预测值与测试集中的观测值进行比较。
- en: '[PRE17]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: ❶ Forecast the number of monthly air passengers for the year 1960.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 预测1960年的月度航空旅客数量。
- en: Now that we have the results, we can compare the performance of each model and
    determine the best forecasting method for our problem.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了结果，我们可以比较每个模型的性能，并确定我们问题的最佳预测方法。
- en: 8.3.3 Comparing the performance of each forecasting method
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.3 比较每种预测方法的性能
- en: 'We can now compare the performance of each forecasting method: the naive seasonal
    forecasts, the ARIMA model, and the SARIMA model. We’ll use the mean absolute
    percentage error (MAPE) to evaluate each model.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以比较每种预测方法的性能：简单的季节性预测、ARIMA模型和SARIMA模型。我们将使用平均绝对百分比误差（MAPE）来评估每个模型。
- en: We can first visualize the forecasts against the observed values of the test
    set.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以先可视化预测值与测试集中观测值的对比。
- en: '[PRE18]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: ❶ Zoom in on the test set
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 放大测试集
- en: The plot is shown in figure 8.13\. The lines from the ARIMA and SARIMA models
    sit almost on top of the observed data, meaning that the predictions are very
    close to the observed data.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.13显示了该图。ARIMA和SARIMA模型的线条几乎与观测数据重合，这意味着预测值非常接近观测数据。
- en: '![](../../OEBPS/Images/08-13.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/08-13.png)'
- en: Figure 8.13 Forecasts of the number of monthly air passengers. The shaded area
    designates the test set. You can see that the curves coming from the ARIMA and
    SARIMA models almost obscure the observed data, which is indicative of good predictions.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.13 月度航空旅客数量的预测。阴影区域表示测试集。您可以看到，来自ARIMA和SARIMA模型的曲线几乎掩盖了观测数据，这是良好预测的标志。
- en: We can measure the MAPE of each model and display it in a bar plot, as shown
    in figure 8.14.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以测量每个模型的MAPE并显示在条形图中，如图8.14所示。
- en: '[PRE19]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: ❶ Define a function to compute the MAPE.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 定义一个计算MAPE的函数。
- en: ❷ Compute the MAPE for each forecasting method.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 计算每种预测方法的MAPE。
- en: ❸ Plot the MAPE on a bar plot.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 在条形图上绘制MAPE。
- en: ❹ Display the MAPE as text in the bar plot.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 在条形图中以文本形式显示MAPE。
- en: '![](../../OEBPS/Images/08-14.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/08-14.png)'
- en: Figure 8.14 The MAPE of all forecasting methods. You can see that the best-performing
    model is the SARIMA model, since it has the lowest MAPE of all methods.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.14 所有预测方法的MAPE。您可以看到，表现最好的模型是SARIMA模型，因为它的MAPE是所有方法中最低的。
- en: In figure 8.14 you can see that our baseline achieves a MAPE of 9.99%. The ARIMA
    model produced forecasts with a MAPE of 3.85%, and the SARIMA model scored a MAPE
    of 2.85%. A MAPE closer to 0 is indicative of better predictions, so the SARIMA
    model is the best-performing method for this situation. This makes sense, since
    our dataset had clear seasonality, and the SARIMA model is built to use the seasonal
    properties of time series to make forecasts.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在图 8.14 中，你可以看到我们的基线实现了 9.99% 的 MAPE。ARIMA 模型产生了 3.85% 的 MAPE 的预测，而 SARIMA 模型获得了
    2.85% 的 MAPE。MAPE 越接近 0，表明预测越好，因此 SARIMA 模型是这种情况下的最佳性能方法。这是有道理的，因为我们的数据集具有明显的季节性，而
    SARIMA 模型正是为了利用时间序列的季节性属性来进行预测。
- en: 8.4 Next steps
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.4 下一步
- en: In this chapter, we covered the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model,
    which allows us to model non-stationary seasonal time series.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了 SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* 模型，该模型允许我们模拟非平稳季节性时间序列。
- en: The addition of the parameters *P*, *D*, *Q*, and *m* allows us to include the
    seasonal properties of a time series in a model and use them to produce forecasts.
    Here, *P* is the order of the seasonal autoregressive process, *D* is the order
    of seasonal integration, *Q* is the order of the seasonal moving average process,
    and *m* is the frequency of the data.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 参数 *P*、*D*、*Q* 和 *m* 的添加使我们能够将时间序列的季节性属性包含在模型中，并使用它们来生成预测。在这里，*P* 是季节性自回归过程的阶数，*D*
    是季节性积分的阶数，*Q* 是季节性移动平均过程的阶数，而 *m* 是数据的频率。
- en: We looked at how to first detect seasonal patterns using time series decomposition,
    and we adapted our general modeling procedure to also test values for *P* and
    *Q*.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 我们探讨了如何首先使用时间序列分解来检测季节性模式，并且我们调整了我们的通用建模程序，以测试 *P* 和 *Q* 的值。
- en: In chapters 4 through 8, we have slowly built a more general and complex model,
    starting with the MA(*q*) and AR(*p*) models, combining them into the ARMA(*p*,*q*)
    model, which led us to the ARIMA(*p*,*d*,*q*) model, and finally to the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*
    model. These models only consider the values of the time series itself. However,
    it would make sense that external variables are also predictive of our time series.
    For example, if we wish to model a country’s total spending over time, looking
    at interest rates or the debt level could likely be predictive. How can we include
    those external variables in a model?
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在第 4 章到第 8 章中，我们逐渐构建了一个更通用和复杂的模型，从 MA(*q*) 和 AR(*p*) 模型开始，将它们结合成 ARMA(*p*,*q*)
    模型，这引导我们到 ARIMA(*p*,*d*,*q*) 模型，最终到 SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* 模型。这些模型只考虑时间序列本身的值。然而，外部变量也是我们时间序列的预测因素是有道理的。例如，如果我们希望模拟一个国家随时间推移的总支出，查看利率或债务水平可能是预测性的。我们如何在模型中包含这些外部变量？
- en: This leads us to the *SARIMAX* model. Notice the addition of *X*, which stands
    for *exogenous variables*. This model will combine everything that we have learned
    so far and further expand on it by adding the effect of external variables to
    predict our target. This will be the subject of the next chapter.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 这引导我们到 *SARIMAX* 模型。注意 *X* 的添加，它代表 *外生变量*。这个模型将结合我们迄今为止所学的一切，并通过添加外部变量的影响来进一步扩展它，以预测我们的目标。这将是下一章的主题。
- en: 8.5 Exercises
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.5 练习
- en: 'Take the time to experiment with the SARIMA model using this exercise. The
    full solution is on GitHub: [https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08](https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08).'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 利用这个练习，花时间实验 SARIMA 模型。完整的解决方案在 GitHub 上：[https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08](https://github.com/marcopeix/TimeSeriesForecastingInPython/tree/master/CH08)。
- en: 8.5.1 Apply the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* model on the Johnson &
    Johnson dataset
  id: totrans-187
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.5.1 在 Johnson & Johnson 数据集上应用 SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* 模型
- en: In chapter 7 we applied an ARIMA(*p*,*d*,*q*) model to the Johnson & Johnson
    dataset to forecast the quarterly EPS over a year. Now use the SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*
    model on the same dataset, and compare its performance to the ARIMA model.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在第 7 章中，我们将 ARIMA(*p*,*d*,*q*) 模型应用于 Johnson & Johnson 数据集，以预测一年内的季度 EPS。现在使用
    SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]* 模型对同一数据集进行操作，并将其性能与 ARIMA 模型进行比较。
- en: Use time series decomposition to identify the presence of a periodic pattern.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用时间序列分解来识别周期性模式的存在。
- en: Use the `optimize_SARIMA` function and select the model with the lowest AIC.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `optimize_SARIMA` 函数并选择具有最低 AIC 的模型。
- en: Perform residual analysis.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行残差分析。
- en: Forecast the EPS for the last year, and measure the performance against the
    ARIMA model. Use the MAPE. Is it better?
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 预测过去一年的 EPS，并使用 MAPE 来衡量其性能。它更好吗？
- en: Summary
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: The seasonal autoregressive integrated moving average model, denoted as SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*,
    adds seasonal properties to the ARIMA(*p*,*d*,*q*) model.
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 季节性自回归积分滑动平均模型，表示为SARIMA(*p*,*d*,*q*)(*P*,*D*,*Q*)*[m]*，为ARIMA(*p*,*d*,*q*)模型添加季节性属性。
- en: '*P* is the order of the seasonal autoregressive process, *D* is the order of
    seasonal integration, *Q* is the order of the seasonal moving average process,
    and *m* is the frequency of the data.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P*是季节性自回归过程的阶数，*D*是季节性积分的阶数，*Q*是季节性移动平均过程的阶数，而*m*是数据的频率。'
- en: The frequency *m* corresponds to the number of observations in a cycle. If the
    data is collected every month, then *m* = 12. If data is collected every quarter,
    then *m* = 4.
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 频率*m*对应于一个周期内的观测次数。如果数据每月收集一次，则*m* = 12。如果数据每季度收集一次，则*m* = 4。
- en: Time series decomposition can be used to identify seasonal patterns in a time
    series.
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间序列分解可以用来识别时间序列中的季节性模式。
