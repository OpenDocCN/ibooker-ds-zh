- en: Chapter 11\. Documentation and deployment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 11 章\. 文档和部署
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Producing effective milestone documentation
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成有效的里程碑文档
- en: Managing project history using source control
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用源控制管理项目历史
- en: Deploying results and making demonstrations
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署结果和进行演示
- en: 'In this chapter, we’ll survey techniques for documenting and deploying your
    work. We will work specific scenarios, and point to resources for further study
    if you want to master the techniques being discussed. The theme is this: now that
    you can build machine learning models, you should explore tools and procedures
    to become proficient at saving, sharing, and repeating successes. Our mental model
    ([figure 11.1](../Text/11.xhtml#ch11fig01)) for this chapter emphasizes that this
    chapter is all about sharing what you model. Let’s use [table 11.1](../Text/11.xhtml#ch11table01)
    to get some more-specific goals in this direction.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨记录和部署您工作的技术。我们将处理特定场景，并在您想掌握所讨论技术时提供进一步学习的资源。主题是这样的：既然您能够构建机器学习模型，您就应该探索工具和程序来熟练地保存、分享和重复成功。我们本章的心理模型（[图
    11.1](../Text/11.xhtml#ch11fig01)）强调本章全部关于分享您所构建的模型。让我们使用 [表 11.1](../Text/11.xhtml#ch11table01)
    来获取更多具体的目标。
- en: Figure 11.1\. Mental model
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.1\. 心理模型
- en: '![](Images/11fig01.jpg)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/11fig01.jpg)'
- en: Table 11.1\. Chapter goals
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11.1\. 章节目标
- en: '| Goal | Description |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| 目标 | 描述 |'
- en: '| --- | --- |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Produce effective milestone documentation | A readable summary of project
    goals, data provenance, steps taken, and technical results (numbers and graphs).
    Milestone documentation is usually read by collaborators and peers, so it can
    be concise and can often include actual code. We’ll demonstrate a great tool for
    producing excellent milestone documentation: the R *knitr* and *rmarkdown* packages,
    which we will refer to generically as *R markdown*. R markdown is a product of
    the “reproducible research” movement (see Christopher Gandrud’s *Reproducible
    Research with R and RStudio,* Second Edition, Chapman and Hall, 2015) and is an
    excellent way to produce a reliable snapshot that not only shows the state of
    a project, but allows others to confirm the project works. |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| 生成有效的里程碑文档 | 项目目标、数据来源、采取的步骤和技术结果（数字和图表）的可读性总结。里程碑文档通常由合作者和同行阅读，因此它可以简洁，并且经常包括实际代码。我们将展示一个用于生成优秀里程碑文档的出色工具：R
    *knitr* 和 *rmarkdown* 包，我们将泛指它们为 *R markdown*。R markdown 是“可重复研究”运动的产物（参见 Christopher
    Gandrud 的 *Reproducible Research with R and RStudio,* 第二版，Chapman and Hall，2015），是生成可靠快照的绝佳方式，不仅展示了项目的状态，还允许他人验证项目是否可行。|'
- en: '| Manage a complete project history | It makes little sense to have exquisite
    milestone or checkpoint documentation of how your project worked last February
    if you can’t get a copy of February’s code and data. This is why you need good
    version control discipline to protect code, and good data discipline to preserve
    data. |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| 管理完整项目历史 | 如果您无法获取二月份的代码和数据副本，那么对您项目上个月如何工作的精美里程碑或检查点文档几乎没有意义。这就是为什么您需要良好的版本控制纪律来保护代码，以及良好的数据纪律来保存数据。|'
- en: '| Deploy demonstrations | True production deployments are best done by experienced
    engineers. These engineers know the tools and environment they will be deploying
    to. A good way to jump-start production deployment is to have a reference application.
    This allows engineers to experiment with your work, test corner cases, and build
    acceptance tests. |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| 部署演示 | 真正的生产部署最好由经验丰富的工程师完成。这些工程师知道他们将要部署的工具和环境。快速启动生产部署的一个好方法是有一个参考应用程序。这允许工程师对您的工作进行实验，测试边缘情况，并构建验收测试。|'
- en: This chapter explains how to share your work—even sharing it with your future
    self. We’ll discuss how to use R markdown to create substantial project milestone
    documentation and automate reproduction of graphs and other results. You’ll learn
    about using effective comments in code, and using Git for version management and
    for collaboration. We’ll also discuss deploying models as HTTP services and applications.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章解释了如何分享您的工作——甚至与未来的自己分享。我们将讨论如何使用 R markdown 创建实质性的项目里程碑文档并自动化图形和其他结果的再现。您将了解如何在代码中使用有效的注释，以及如何使用
    Git 进行版本管理和协作。我们还将讨论将模型作为 HTTP 服务和应用程序进行部署。
- en: For some of the examples, we will use RStudio, which is an integrated development
    environment (IDE) that is a product of RStudio, Inc. (and not part of R/CRAN itself).
    Everything we show can be done without RStudio, but RStudio supplies a basic editor
    and some single-button-press alternatives to some scripting tasks.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一些示例，我们将使用 RStudio，这是一个由 RStudio, Inc.（而不是 R/CRAN 本身）生产的集成开发环境（IDE）。我们展示的所有内容都可以在不使用
    RStudio 的情况下完成，但 RStudio 提供了一个基本的编辑器以及一些一键式替代方案来处理一些脚本任务。
- en: 11.1\. Predicting buzz
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.1\. 预测 Buzz
- en: '* * *'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Example
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: '*For our example scenario, we want to use metrics collected about the first
    few days of article views to predict the long-term popularity of an article. This
    can be important for selling advertising and predicting and managing revenue.
    To be specific: we will use measurements taken during the first eight days of
    an article’s publication to predict if the article will remain popular in the
    long term.*'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '*在我们的示例场景中，我们希望使用关于文章前几天的浏览量收集的指标来预测文章的长期受欢迎程度。这对销售广告和预测和管理收入可能很重要。具体来说：我们将使用文章发布前八天进行的测量值来预测文章是否会在长期内保持受欢迎。*'
- en: '*Our tasks for this chapter are to save and share our Buzz model, document
    the model, test the model, and deploy the model into production.*'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章的任务是保存和分享我们的 Buzz 模型，记录模型，测试模型，并将模型部署到生产环境中。*'
- en: '* * *'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: To simulate our example scenario of predicting long term article popularity
    or buzz we will use the *Buzz dataset* from [http://ama.liglab.fr/datasets/buzz/](http://ama.liglab.fr/datasets/buzz/).
    We’ll work with the data found in the file TomsHardware-Relative-Sigma-500.data.txt.^([[1](../Text/11.xhtml#ch11fn1)])
    The original supplied documentation (TomsHardware-Relative-Sigma-500.names.txt
    and BuzzDataSetDoc.pdf) tells us the Buzz data is structured as shown in [table
    11.2](../Text/11.xhtml#ch11table02).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 为了模拟预测长期文章受欢迎程度或 Buzz 的示例场景，我们将使用来自 [http://ama.liglab.fr/datasets/buzz/](http://ama.liglab.fr/datasets/buzz/)
    的 *Buzz 数据集*。我们将处理文件 TomsHardware-Relative-Sigma-500.data.txt 中的数据.^([[1](../Text/11.xhtml#ch11fn1)])
    原始提供的文档（TomsHardware-Relative-Sigma-500.names.txt 和 BuzzDataSetDoc.pdf）告诉我们 Buzz
    数据的结构如图 11.2 所示。
- en: ¹
  id: totrans-23
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ¹
- en: ''
  id: totrans-24
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: All files mentioned in this chapter are available from [https://github.com/WinVector/PDSwR2/tree/master/Buzz](https://github.com/WinVector/PDSwR2/tree/master/Buzz).
  id: totrans-25
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 本章中提到的所有文件均可在 [https://github.com/WinVector/PDSwR2/tree/master/Buzz](https://github.com/WinVector/PDSwR2/tree/master/Buzz)
    获取。
- en: Table 11.2\. Buzz data description
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11.2\. Buzz 数据描述
- en: '| Attribute | Description |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| 属性 | 描述 |'
- en: '| --- | --- |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Rows | Each row represents many different measurements of the popularity
    of a technical personal computer discussion topic. |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| 行 | 每行代表一个技术个人电脑讨论主题的多种不同测量值。 |'
- en: '| Topics | Topics include technical issues about personal computers such as
    brand names, memory, overclocking, and so on. |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| 主题 | 主题包括关于个人电脑的技术问题，如品牌名称、内存、超频等。 |'
- en: '| Measurement types | For each topic, measurement types are quantities such
    as the number of discussions started, number of posts, number of authors, number
    of readers, and so on. Each measurement is taken at eight different times. |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| 测量类型 | 对于每个主题，测量类型包括发帖数、帖子数、作者数、读者数等数量。每种测量值在八个不同时间进行。 |'
- en: '| Times | The eight relative times are named 0 through 7 and are likely days
    (the original variable documentation is not completely clear and the matching
    paper has not yet been released). For each measurement type, all eight relative
    times are stored in different columns in the same data row. |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| 时间 | 八个相对时间命名为 0 到 7，可能是天数（原始变量文档并不完全清楚，匹配的论文尚未发布）。对于每种测量类型，所有八个相对时间都存储在同一数据行的不同列中。
    |'
- en: '| Buzz | The quantity to be predicted is called *buzz* and is defined as being
    true or 1 if the ongoing rate of additional discussion activity is at least 500
    events per day averaged over a number of days after the observed days. Likely
    buzz is a future average of the seven variables labeled *NAC* (the original documentation
    is unclear on this). |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| Buzz | 要预测的量称为 *Buzz*，如果观察日之后的几天内平均每天新增讨论活动的发生频率至少为 500 事件，则定义为真或 1。可能的 Buzz
    是七个标记为 *NAC* 的变量的未来平均值（原始文档对此并不明确）。|'
- en: In *our* initial Buzz documentation, we list what we know (and, importantly,
    admit what we’re not sure about). We don’t intend any disrespect in calling out
    issues in the supplied Buzz documentation. That documentation is about as good
    as you see at the beginning of a project. In an actual project, you’d clarify
    and improve unclear points through discussions and work cycles. This is one reason
    why having access to active project sponsors and partners is critical in real-world
    projects.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们最初的 Buzz 文档中，我们列出了我们所知的内容（并且，重要的是，承认了我们不确定的地方）。在指出提供的 Buzz 文档中的问题时，我们并没有任何不尊重的意思。这种文档在项目开始时所能看到的水平大致如此。在实际项目中，你会通过讨论和工作周期来澄清和改进不明确的地方。这是为什么在现实世界项目中能够接触到活跃的项目赞助者和合作伙伴是至关重要的一个原因。
- en: 'In this chapter, we’ll use the Buzz model and dataset as is and concentrate
    on demonstrating the tools and techniques used in producing documentation, deployments,
    and presentations. In actual projects, we advise you to start by producing notes
    like those in [table 11.2](../Text/11.xhtml#ch11table02). You’d also incorporate
    meeting notes to document your actual project goals. As this is only a demonstration,
    we’ll emphasize technical documentation: data provenance and an initial trivial
    analysis to demonstrate we have control of the data. Our example initial Buzz
    analysis is found here: [https://github.com/WinVector/PDSwR2/blob/master/Buzz/buzzm.md](https://github.com/WinVector/PDSwR2/blob/master/Buzz/buzzm.md).
    We suggest you skim it before we work through the tools and steps used to produce
    the documents in our next section.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用 Buzz 模型和数据集，并专注于展示用于生成文档、部署和演示的工具和技术。在实际项目中，我们建议你首先生成像 [表 11.2](../Text/11.xhtml#ch11table02)
    中的笔记。你还会结合会议笔记来记录你的实际项目目标。由于这只是一个演示，我们将强调技术文档：数据来源和初步的简单分析，以证明我们对数据有控制权。我们的示例初始
    Buzz 分析可以在以下位置找到：[https://github.com/WinVector/PDSwR2/blob/master/Buzz/buzzm.md](https://github.com/WinVector/PDSwR2/blob/master/Buzz/buzzm.md)。我们建议你在我们介绍下一节中使用的工具和步骤之前先浏览一下。
- en: 11.2\. Using R markdown to produce milestone documentation
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.2\. 使用 R markdown 生成里程碑文档
- en: 'The first audience you’ll have to prepare documentation for is yourself and
    your peers. You may need to return to previous work months later, and it may be
    in an urgent situation like an important bug fix, presentation, or feature improvement.
    For self/peer documentation, you want to concentrate on facts: what the stated
    goals were, where the data came from, and what techniques were tried. You assume
    that as long as you use standard terminology or references, the reader can figure
    out anything else they need to know. You want to emphasize any surprises or exceptional
    issues, as they’re exactly what’s expensive to relearn. You can’t expect to share
    this sort of documentation with clients, but you can later use it as a basis for
    building wider documentation and presentations.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要准备文档的第一个受众是你自己和你的同伴。你可能几个月后需要回到之前的工作，可能是在紧急情况下，比如重要的错误修复、演示或功能改进。对于自我/同伴文档，你想要专注于事实：所陈述的目标是什么，数据来自哪里，以及尝试了哪些技术。你假设只要使用标准术语或参考，读者就能弄清楚他们需要知道的其他任何内容。你想要强调任何惊喜或异常问题，因为它们正是重新学习时最昂贵的。你不能期望与客户分享这类文档，但你可以稍后用它作为构建更广泛文档和演示的基础。
- en: The first sort of documentation we recommend is project milestone or checkpoint
    documentation. At major steps of the project, you should take some time out to
    repeat your work in a clean environment (proving you know what’s in intermediate
    files and you can in fact recreate them). An important, and often neglected, milestone
    is the start of a project. In this section, we’ll use the knitr and rmarkdown
    R packages to document starting work with the Buzz data.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们推荐的第一种文档类型是项目里程碑或检查点文档。在项目的主要步骤中，你应该抽出一些时间在一个干净的环境中重复你的工作（证明你知道中间文件中的内容，并且实际上可以重新创建它们）。一个重要且常被忽视的里程碑是项目的开始。在本节中，我们将使用
    knitr 和 rmarkdown R 包来记录使用 Buzz 数据开始工作的过程。
- en: '* * *'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Documentation scenario: Share the ROC curve for the Buzz model'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 文档场景：分享 Buzz 模型的 ROC 曲线
- en: '*Our first task is to build a document that contains the ROC curve for the
    example model. We want to be able to rebuild this document automatically if we
    change model or evaluation data, so we will use R markdown to produce the document.*'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们的第一个任务是构建一个包含示例模型 ROC 曲线的文档。我们希望能够在更改模型或评估数据时自动重建此文档，因此我们将使用 R markdown
    来生成文档。*'
- en: '* * *'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 11.2.1\. What is R markdown?
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.1\. 什么是 R markdown？
- en: R markdown is a variation of the Markdown document specification^([[2](../Text/11.xhtml#ch11fn2)])
    that allows the inclusion of R code and results inside documents. The concept
    of processing a combination of code and text should be credited to the R Sweave
    package^([[3](../Text/11.xhtml#ch11fn3)]) and from Knuth’s formative ideas of
    literate programming.^([[4](../Text/11.xhtml#ch11fn4)]) In practice, you maintain
    a master file that contains both user-readable documentation and chunks of program
    source code. The document types supported by R markdown include Markdown, HTML,
    LaTeX, and Word. LaTeX format is a good choice for detailed, typeset, technical
    documents. Markdown format is a good choice for online documentation and wikis.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: R markdown 是 Markdown 文档规范的变体^([[2](../Text/11.xhtml#ch11fn2)]), 允许在文档中包含 R
    代码和结果。处理代码和文本组合的概念应归功于 R Sweave 软件包^([[3](../Text/11.xhtml#ch11fn3)]) 和 Knuth
    的文献编程的早期思想.^([[4](../Text/11.xhtml#ch11fn4)]) 实际上，你维护一个包含用户可读文档和程序源代码片段的主文件。R
    markdown 支持的文档类型包括 Markdown、HTML、LaTeX 和 Word。LaTeX 格式是详细、排版、技术文档的好选择。Markdown
    格式是在线文档和维基的好选择。
- en: ²
  id: totrans-45
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ²
- en: ''
  id: totrans-46
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Markdown itself is a popular document-formatting system based on the idea of
    imitating how people hand-annotate emails: [https://en.wikipedia.org/wiki/Markdown](https://en.wikipedia.org/wiki/Markdown).'
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Markdown 本身是一种流行的文档格式化系统，其灵感来源于模仿人们手动注释电子邮件的方式：[https://en.wikipedia.org/wiki/Markdown](https://en.wikipedia.org/wiki/Markdown).
- en: ³
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ³
- en: ''
  id: totrans-49
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: See [http://leisch.userweb.mwn.de/Sweave/](http://leisch.userweb.mwn.de/Sweave/).
  id: totrans-50
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 查看 [http://leisch.userweb.mwn.de/Sweave/](http://leisch.userweb.mwn.de/Sweave/).
- en: ⁴
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ⁴
- en: ''
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: See [http://www.literateprogramming.com/knuthweb.pdf](http://www.literateprogramming.com/knuthweb.pdf).
  id: totrans-53
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 查看 [http://www.literateprogramming.com/knuthweb.pdf](http://www.literateprogramming.com/knuthweb.pdf).
- en: 'The engine that performs the document creation task is called knitr. knitr’s
    main operation is called a *knit*: knitr extracts and executes all of the R code
    and then builds a new result document that assembles the contents of the original
    document plus pretty-printed code and results. [Figure 11.2](../Text/11.xhtml#ch11fig02)
    shows how knitr treats documents as pieces (called *chunks*) and transforms chunks
    into sharable results.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 执行文档创建任务的引擎被称为 knitr。knitr 的主要操作称为 *knit*：knitr 提取并执行所有 R 代码，然后构建一个新的结果文档，该文档将原始文档的内容与格式化后的代码和结果组合在一起。[图
    11.2](../Text/11.xhtml#ch11fig02) 展示了 knitr 如何将文档视为片段（称为 *chunks*）并将片段转换为可分享的结果。
- en: Figure 11.2\. R markdown process schematic
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.2\. R markdown 流程示意图
- en: '![](Images/11fig02_alt.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/11fig02_alt.jpg)'
- en: The process is best demonstrated by a few examples.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 通过几个示例可以最好地展示这个过程。
- en: A simple R markdown example
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 一个简单的 R markdown 示例
- en: Markdown ([http://daringfireball.net/projects/markdown/](http://daringfireball.net/projects/markdown/))
    is a simple web-ready format that’s used in many wikis. The following listing
    shows a simple Markdown document with R markdown annotation blocks denoted with
    [PRE0].
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Markdown ([http://daringfireball.net/projects/markdown/](http://daringfireball.net/projects/markdown/))
    是一种简单的、适用于网络的格式，在许多维基中都被使用。以下列表显示了一个简单的 Markdown 文档，其中 R markdown 注释块用 [PRE0]
    标记。
- en: Listing 11.1\. R-annotated Markdown
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 11.1\. R 注释的 Markdown
- en: '[PRE1]{r, include = FALSE}                                                        ❷'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE1]{r, include = FALSE}                                                        ❷'
- en: process document with knitr or rmarkdown.
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 knitr 或 rmarkdown 处理文档。
- en: 'knitr::knit("Buzz_score_example.Rmd") # creates Buzz_score_example.md'
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 'knitr::knit("Buzz_score_example.Rmd") # creates Buzz_score_example.md'
- en: rmarkdown::render("Buzz_score_example.Rmd",
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: rmarkdown::render("Buzz_score_example.Rmd",
- en: 'rmarkdown::html_document()) # creates Buzz_score_example.html'
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 'rmarkdown::html_document()) # creates Buzz_score_example.html'
- en: '[PRE2]{r}                                                                         ❺'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE2]{r}                                                                         ❺'
- en: suppressPackageStartupMessages(library("randomForest"))
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: suppressPackageStartupMessages(library("randomForest"))
- en: lst <- readRDS("thRS500.RDS")
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: lst <- readRDS("thRS500.RDS")
- en: varslist <- lst$varslist
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: varslist <- lst$varslist
- en: fmodel <- lst$fmodel
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: fmodel <- lst$fmodel
- en: buzztest <- lst$buzztest
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: buzztest <- lst$buzztest
- en: rm(list = "lst")
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: rm(list = "lst")
- en: '[PRE3]{r}                                                                        ❻'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE3]{r}                                                                        ❻'
- en: buzztest$prediction <-
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: buzztest$prediction <-
- en: predict(fmodel, newdata = buzztest, type = "prob")[, 2, drop = TRUE]
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: predict(fmodel, newdata = buzztest, type = "prob")[, 2, drop = TRUE]
- en: WVPlots::ROCPlot(buzztest, "prediction",
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: WVPlots::ROCPlot(buzztest, "prediction",
- en: '"buzz", 1,'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '"buzz", 1,'
- en: '"ROC curve estimating quality of model predictions on held-'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '"ROC 曲线估计模型预测在保留数据上的质量-'
- en: out data")
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: out data")
- en: '[PRE4]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '❶ YAML (yet another markup language ) header specifying some metadata: title
    and default output format'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ YAML（另一种标记语言）标题指定一些元数据：标题和默认输出格式
- en: ❷ An R markdown “start code chunk” annotation. The “include = FALSE” directive
    says the block is not shown in the rendering.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ R Markdown 的“起始代码块”注释。`include = FALSE` 指令表示该块在渲染中不显示。
- en: ❸ End of the R markdown block; all content between the start and end marks is
    treated as R code and executed.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ R Markdown 块的结束；起始和结束标记之间的所有内容都被视为 R 代码并执行。
- en: ❹ Free Markdown text
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 自由 Markdown 文本
- en: ❺ Another R code block. In this case, we are loading an already produced random
    Forest model and test data.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 另一个 R 代码块。在这种情况下，我们正在加载一个已经生成的随机森林模型和测试数据。
- en: ❻ More free test
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ❻ 更多自由测试
- en: ❻ Another R code chunk
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ❻ 另一个 R 代码块
- en: 'The contents of [listing 11.1](../Text/11.xhtml#ch11ex01) are available in
    the file [https://github.com/WinVector/PDSwR2/blob/master/Buzz/Buzz_score_example.Rmd](https://github.com/WinVector/PDSwR2/blob/master/Buzz/Buzz_score_example.Rmd).
    In R we’d process it like this:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '[列表 11.1](../Text/11.xhtml#ch11ex01) 的内容可在文件 [https://github.com/WinVector/PDSwR2/blob/master/Buzz/Buzz_score_example.Rmd](https://github.com/WinVector/PDSwR2/blob/master/Buzz/Buzz_score_example.Rmd)
    中找到。在 R 中，我们会这样处理它：'
- en: '[PRE5]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: This produces the new file Buzz_score_example.html, which is a finished report
    in HTML format. Adding this sort of ability to your workflow (either using Sweave
    or knitr/rmarkdown) is game changing.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了新的文件 Buzz_score_example.html，这是一个完成的 HTML 格式的报告。将这种能力添加到您的流程中（无论是使用 Sweave
    还是 knitr/rmarkdown）都是革命性的。
- en: The purpose of R markdown
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: R Markdown 的目的
- en: The purpose of R markdown is to produce reproducible work. The same data and
    techniques should be rerunnable to get equivalent results, without requiring error-prone
    direct human intervention such as selecting spreadsheet ranges or copying and
    pasting. When you distribute your work in R markdown format (as we do in [section
    11.2.3](../Text/11.xhtml#ch11lev2sec3)), anyone can download your work and, without
    great effort, rerun it to confirm they get the same results you did. This is the
    ideal standard of scientific research, but is rarely met, as scientists usually
    are deficient in sharing all of their code, data, and actual procedures. knitr
    collects and automates all the steps, so it becomes obvious if something is missing
    or doesn’t actually work as claimed. knitr automation may seem like a mere convenience,
    but it makes the essential work listed in [table 11.3](../Text/11.xhtml#ch11table03)
    much easier (and therefore more likely to actually be done).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: R Markdown 的目的是生成可重复的工作。相同的数据和技术应该可以重新运行以获得等效的结果，而不需要要求容易出错的人工干预，例如选择工作表范围或复制粘贴。当您以
    R Markdown 格式分发您的作品（如我们在[第 11.2.3 节](../Text/11.xhtml#ch11lev2sec3)中所做的那样）时，任何人都可以下载您的作品，并且无需很大努力就可以重新运行它以确认他们得到的结果与您相同。这是科学研究的理想标准，但很少达到，因为科学家通常在共享所有代码、数据和实际程序方面存在不足。knitr
    收集并自动化所有步骤，因此如果某些内容缺失或实际上没有按声称的方式工作，就会变得明显。knitr 自动化可能看起来只是方便，但它使得[表 11.3](../Text/11.xhtml#ch11table03)中列出的基本工作变得更加容易（因此更有可能真正完成）。
- en: Table 11.3\. Maintenance tasks made easier by R markdown
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11.3\. R Markdown 使维护任务变得更容易
- en: '| Task | Discussion |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| 任务 | 讨论 |'
- en: '| --- | --- |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Keeping code in sync with documentation | With only one copy of the code
    (already in the document), it’s not so easy to get out of sync. |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| 保持代码与文档同步 | 只有一份代码（已经在文档中）的情况下，要使其与文档不同步就不那么容易了。|'
- en: '| Keeping results in sync with data | Eliminating all by-hand steps (such as
    cutting and pasting results, picking filenames, and including figures) makes it
    much more likely you’ll correctly rerun and recheck your work. |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| 保持结果与数据同步 | 消除所有手动步骤（如剪切粘贴结果、选择文件名和包含图表）将大大增加您正确重新运行和重新检查工作的可能性。|'
- en: '| Handing off correct work to others | If the steps are sequenced so a machine
    can run them, then it’s much easier to rerun and confirm them. Also, having a
    container (the master document) to hold all your work makes managing dependencies
    much easier. |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| 将正确的工作转交给他人 | 如果步骤按顺序排列，以便机器可以运行它们，那么重新运行和确认它们就更容易了。此外，有一个容器（主文档）来保存所有工作，这使得管理依赖关系变得更加容易。|'
- en: 11.2.2\. knitr technical details
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.2\. knitr 技术细节
- en: To use knitr on a substantial project, you need to know more about how knitr
    code chunks work. In particular, you need to be clear how chunks are marked and
    what common chunk options you’ll need to manipulate. [Figure 11.3](../Text/11.xhtml#ch11fig03)
    shows the steps to prepare an R markdown document.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 要在大型项目中使用 knitr，您需要了解更多关于 knitr 代码块的工作方式。特别是，您需要清楚如何标记代码块以及您将需要操作哪些常见的代码块选项。[图
    11.3](../Text/11.xhtml#ch11fig03)显示了准备 R Markdown 文档的步骤。
- en: Figure 11.3\. The R markdown process
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.3\. R Markdown 流程
- en: '![](Images/11fig03_alt.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/11fig03_alt.jpg)'
- en: knitr block declaration format
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: knitr 块声明格式
- en: In general, a knitr code block starts with the block declaration ([PRE6] in
    Markdown and `<<` in LaTeX). The first string is the name of the block (must be
    unique across the entire project). After that, a number of comma-separated `option=value`
    chunk option assignments are allowed.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，一个 knitr 代码块以块声明开始（在 Markdown 中为 [PRE6]，在 LaTeX 中为 `<<`）。第一个字符串是块的名称（在整个项目中必须是唯一的）。之后，允许有多个以逗号分隔的
    `option=value` 块选项赋值。
- en: knitr chunk options
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: knitr 块选项
- en: A sampling of useful option assignments is given in [table 11.4](../Text/11.xhtml#ch11table04).
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [表 11.4](../Text/11.xhtml#ch11table04) 中给出了有用的选项赋值示例。
- en: Table 11.4\. Some useful knitr options
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11.4\. 一些有用的 knitr 选项
- en: '| Option name | Purpose |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 选项名称 | 目的 |'
- en: '| --- | --- |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| cache | Controls whether results are cached. With cache = FALSE (the default),
    the code chunk is always executed. With cache = TRUE, the code chunk isn’t executed
    if valid cached results are available from previous runs. Cached chunks are essential
    when you are revising knitr documents, but you should always delete the cache
    directory (found as a subdirectory of where you’re using knitr) and do a clean
    rerun to make sure your calculations are using current versions of the data and
    settings you’ve specified in your document. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| cache | 控制是否缓存结果。当 cache = FALSE（默认值）时，代码块总是执行。当 cache = TRUE 时，如果之前运行中有有效的缓存结果可用，则代码块不会执行。缓存块在修订
    knitr 文档时是必不可少的，但你应该始终删除缓存目录（位于你使用 knitr 的子目录中），并执行干净的重跑以确保你的计算正在使用你文档中指定的当前数据版本和设置。|'
- en: '| echo | Controls whether source code is copied into the document. With echo
    = TRUE (the default), pretty-formatted code is added to the document. With echo
    = FALSE, code isn’t echoed (useful when you only want to display results). |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| echo | 控制源代码是否被复制到文档中。当 echo = TRUE（默认值）时，格式化良好的代码会被添加到文档中。当 echo = FALSE
    时，代码不会被回显（当你只想显示结果时很有用）。|'
- en: '| eval | Controls whether code is evaluated. With eval = TRUE (the default),
    code is executed. With eval = FALSE, it’s not (useful for displaying instructions).
    |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| eval | 控制代码是否被评估。当 eval = TRUE（默认值）时，代码被执行。当 eval = FALSE 时，它不会被评估（用于显示指令）。|'
- en: '| message | Set message = FALSE to direct R message() commands to the console
    running R instead of to the document. This is useful for issuing progress messages
    to the user, that you don’t want in the final document. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| message | 将 message = FALSE 设置为将 R 的 message() 命令直接发送到运行 R 的控制台，而不是发送到文档。这对于向用户发布进度消息很有用，你不需要在最终文档中看到这些消息。|'
- en: '| results | Controls what’s to be done with R output. Usually you don’t set
    this option and output is intermingled (with ## comments) with the code. A useful
    option is results=''hide'', which suppresses output. |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| results | 控制对 R 输出的处理方式。通常你不需要设置此选项，输出会与代码混合（带有 ## 注释）。一个有用的选项是 results=''hide''，它可以抑制输出。|'
- en: '| tidy | Controls whether source code is reformatted before being printed.
    We used to set tidy = FALSE, as one version of knitr misformatted R comments when
    tidying. |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| tidy | 控制在打印之前是否重新格式化源代码。我们曾经将 tidy = FALSE，因为 knitr 的一个版本在整理时错误地格式化了 R 注释。|'
- en: Most of these options are demonstrated in our Buzz example, which we’ll work
    through in the next section.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数这些选项在我们的 Buzz 示例中都有演示，我们将在下一节中处理这个示例。
- en: 11.2.3\. Using knitr to document the Buzz data and produce the model
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.3\. 使用 knitr 记录 Buzz 数据并生成模型
- en: 'The model we were just evaluating itself was produced using an R markdown script:
    the file buzzm.Rmd found at [https://github.com/WinVector/PDSwR2/tree/master/Buzz](https://github.com/WinVector/PDSwR2/tree/master/Buzz).
    Knitting this file produced the Markdown result buzzm.md and the saved model file
    thRS500.RDS that drives our examples. All steps we’ll mention in this chapter
    are completely demonstrated in the Buzz example directory. We’ll show excerpts
    from buzzm.Rmd.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚评估的模型本身是使用 R markdown 脚本生成的：位于 [https://github.com/WinVector/PDSwR2/tree/master/Buzz](https://github.com/WinVector/PDSwR2/tree/master/Buzz)
    的 buzzm.Rmd 文件。编译此文件生成了 Markdown 结果 buzzm.md 和驱动我们示例的保存模型文件 thRS500.RDS。本章中提到的所有步骤都在
    Buzz 示例目录中完全演示。我们将展示 buzzm.Rmd 的摘录。
- en: '* * *'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Buzz data notes
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: Buzz 数据注释
- en: For the Buzz data, the preparation notes can be found in the files buzzm.md
    and buzzm.html. We suggest viewing one of these files and [table 11.2](../Text/11.xhtml#ch11table02).
    The original description files from the Buzz project (TomsHardware-Relative-Sigma-500.names.txt
    and BuzzDataSetDoc.pdf) are also available at [https://github.com/WinVector/PDSwR2/tree/master/Buzz](https://github.com/WinVector/PDSwR2/tree/master/Buzz).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Buzz 数据，准备说明可以在 buzzm.md 和 buzzm.html 文件中找到。我们建议查看这些文件之一和 [表 11.2](../Text/11.xhtml#ch11table02)。Buzz
    项目的原始描述文件（TomsHardware-Relative-Sigma-500.names.txt 和 BuzzDataSetDoc.pdf）也可在 [https://github.com/WinVector/PDSwR2/tree/master/Buzz](https://github.com/WinVector/PDSwR2/tree/master/Buzz)
    找到。
- en: '* * *'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Confirming data provenance
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 确认数据来源
- en: 'Because knitr is automating steps, you can afford to take a couple of extra
    steps to confirm the data you’re analyzing is in fact the data you thought you
    had. For example, we’ll start our Buzz data analysis by confirming that the SHA
    cryptographic hash of the data we’re starting from matches what we thought we
    had downloaded. This is done (assuming your system has the `sha` cryptographic
    hash installed) as shown in the following listing (note: always look to the first
    line of chunks for chunk options such as `cache = TRUE`).'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 knitr 正在自动化步骤，你可以多走几步来确认你正在分析的数据确实是你认为下载的数据。例如，我们将从确认我们从哪里开始的数据的 SHA 密码哈希与我们所认为下载的内容相匹配开始我们的
    Buzz 数据分析。这可以通过以下列表完成（注意：始终查看块的第一行以查找块选项，如 `cache = TRUE`）。
- en: Listing 11.2\. Using the `system()` command to compute a file hash
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 11.2\. 使用 `system()` 命令计算文件哈希
- en: '[PRE7]{r dataprep}'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE7]{r dataprep}'
- en: infile <- "TomsHardware-Relative-Sigma-500.data.txt"
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: infile <- "TomsHardware-Relative-Sigma-500.data.txt"
- en: paste('checked at', date())
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: paste('checked at', date())
- en: system(paste('shasum', infile), intern = TRUE)             ❶
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: system(paste('shasum', infile), intern = TRUE)             ❶
- en: buzzdata <- read.table(infile, header = FALSE, sep = ",")
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: buzzdata <- read.table(infile, header = FALSE, sep = ",")
- en: '...'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '...'
- en: '[PRE8]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[1] "precision= 0.832402234636871 ; recall= 0.84180790960452"'
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1] "精确度= 0.832402234636871 ; 召回率= 0.84180790960452"'
- en: pred
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: pred
- en: truth FALSE TRUE
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: 真实值 FALSE TRUE
- en: 0   584   30
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: 0   584   30
- en: 1    28  149
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1    28  149
- en: model  accuracy        f1 dev.norm       AUC
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型准确度        f1 dev.norm       AUC
- en: 1 model 0.9266751 0.8370787  0.42056 0.9702102
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1 模型 0.9266751 0.8370787  0.42056 0.9702102
- en: '[PRE10]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Save variable names, model, and test data.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 保存变量名、模型和测试数据。
- en: '[PRE11]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[1] "saved thRS500.RDS"'
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1] "saved thRS500.RDS"'
- en: '[PRE12]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[1] "finished at Thu Apr 18 09:33:05 2019"'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1] "finished at Thu Apr 18 09:33:05 2019"'
- en: '[PRE13]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[1] "f2b3b80bc6c5a72079b39308a5758a282bcdd5bf  thRS500.RDS"'
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1] "f2b3b80bc6c5a72079b39308a5758a282bcdd5bf  thRS500.RDS"'
- en: '[PRE14]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '#'' Return the pseudo logarithm, base 10.'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 返回 x 的伪对数，以 10 为底。'
- en: '#'''
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' Return the pseudo logarithm (base 10) of x, which is close to'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 返回 x 的伪对数（以 10 为底），接近'
- en: '#'' sign(x)*log10(abs(x)) for x such that abs(x) is large'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' sign(x)*log10(abs(x)) 对于 abs(x) 较大的 x'
- en: '#'' and doesn''t "blow up" near zero.  Useful'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 并且不会在零附近“爆炸”。有用'
- en: '#'' for transforming wide-range variables that may be negative'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 用于转换可能为负的宽范围变量'
- en: '#'' (like profit/loss).'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' （如利润/亏损）。'
- en: '#'''
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' See: \url{http://www.win-vector.com/blog/2012/03/modeling-trick-the-'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 参考：\url{http://www.win-vector.com/blog/2012/03/modeling-trick-the-'
- en: signed-pseudo-logarithm/}
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: signed-pseudo-logarithm/
- en: '#'''
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' NB: This transform has the undesirable property of making most'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 注意：此转换具有不希望的性质，使得大多数'
- en: '#'' signed distributions appear bi-modal around the origin, no matter'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 签名分布出现在原点周围的双峰分布，无论'
- en: '#'' what the underlying distribution really looks like.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 真正的分布看起来是什么样子。'
- en: '#'' The argument x is assumed be numeric and can be a vector.'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' 参数 x 假设为数值，可以是向量。'
- en: '#'''
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' @param x numeric vector'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' @param x 数值向量'
- en: '#'' @return pseudo logarithm, base 10 of x'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' @return x 的伪对数，以 10 为底'
- en: '#'''
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' @examples'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' @examples'
- en: '#'''
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' pseudoLog10(c(-5, 0, 5))'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' pseudoLog10(c(-5, 0, 5))'
- en: '#'' # should be: [1] -0.7153834  0.0000000  0.7153834'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' # 应该是：[1] -0.7153834  0.0000000  0.7153834'
- en: '#'''
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: '#'' @export'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '#'' @export'
- en: '#'''
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '#'''
- en: pseudoLog10 <- function(x) {
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: pseudoLog10 <- function(x) {
- en: asinh(x / 2) / log(10)
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: asinh(x / 2) / log(10)
- en: '}'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE15]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: git add -A       ❶
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: git add -A       ❶
- en: git commit       ❷
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: git commit       ❷
- en: '[PRE16]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: $ git status
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: $ git status
- en: On branch master
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在 master 分支上
- en: Your branch is up to date with 'origin/master'.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 你的分支与 'origin/master' 保持同步。
- en: nothing to commit, working tree clean
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 没有要提交的内容，工作树干净
- en: '[PRE17]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: $ git log
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: $ git log
- en: commit d22572281d40522bc6ab524bbdee497964ff4af0 (HEAD -
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 提交 d22572281d40522bc6ab524bbdee497964ff4af0 (HEAD -
- en: '> master, origin/master)'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '> master, origin/master)'
- en: 'Author: John Mount <jmount@win-vector.com>'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 作者：John Mount <jmount@win-vector.com>
- en: 'Date:   Tue Apr 16 16:24:23 2019 -0700'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：   周二 Apr 16 16:24:23 2019 -0700
- en: technical edits ch7
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 技术编辑 ch7
- en: '[PRE18]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: git blame Buzz/buzzapp/server.R
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: git blame Buzz/buzzapp/server.R
- en: '4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  1) #'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  1) #'
- en: 4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  2)
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  2)
- en: '# This is the server logic of a Shiny web application. You can run the'
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '# This is the server logic of a Shiny web application. You can run the'
- en: 4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  3)
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  3)
- en: '# application by clicking ''Run App'' above.'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '# application by clicking ''Run App'' above.'
- en: '4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  4) #'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '4efb2b78 (John Mount 2019-04-24 16:22:43 -0700  4) #'
- en: '[PRE19]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: diff --git a/CDC/NatalBirthData.rData b/CDC/NatalBirthData.rData
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: diff --git a/CDC/NatalBirthData.rData b/CDC/NatalBirthData.rData
- en: '...'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '...'
- en: +++ b/CDC/prepBirthWeightData.R
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: +++ b/CDC/prepBirthWeightData.R
- en: '@@ -0,0 +1,83 @@'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '@@ -0,0 +1,83 @@'
- en: +data <- read.table("natal2010Sample.tsv.gz",
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: +data <- read.table("natal2010Sample.tsv.gz",
- en: sep="\t", header = TRUE, stringsAsFactors = FALSE)
  id: totrans-208
  prefs:
  - PREF_UL
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: sep="\t", header = TRUE, stringsAsFactors = FALSE)
- en: +
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: +
- en: +# make a boolean from Y/N data
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: +# make a boolean from Y/N data
- en: +makevarYN = function(col) {
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: +makevarYN = function(col) {
- en: +  ifelse(col %in% c("", "U"), NA, col=="Y")
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: +  ifelse(col %in% c("", "U"), NA, col=="Y")
- en: +}
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: +}
- en: '...'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '...'
- en: '[PRE20]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: git log --name-status -- Buzz/buzz.pdf
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: git log --name-status -- Buzz/buzz.pdf
- en: commit 96503d8ca35a61ed9765edff9800fc9302554a3b
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: commit 96503d8ca35a61ed9765edff9800fc9302554a3b
- en: 'Author: John Mount <jmount@win-vector.com>'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 'Author: John Mount <jmount@win-vector.com>'
- en: 'Date:   Wed Apr 17 16:41:48 2019 -0700'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 'Date:   Wed Apr 17 16:41:48 2019 -0700'
- en: fix links and re-build Buzz example
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: fix links and re-build Buzz example
- en: D       Buzz/buzz.pdf
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: D       Buzz/buzz.pdf
- en: '[PRE21]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: $ git remote --verbose
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: $ git remote --verbose
- en: origin  git@github.com:WinVector/PDSwR2.git (fetch)
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: origin  git@github.com:WinVector/PDSwR2.git (fetch)
- en: origin  git@github.com:WinVector/PDSwR2.git (push)
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: origin  git@github.com:WinVector/PDSwR2.git (push)
- en: '[PRE22]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: library("randomForest")           ❶
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: library("randomForest")           ❶
- en: lst <- readRDS("thRS500.RDS")
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: lst <- readRDS("thRS500.RDS")
- en: varslist <- lst$varslist
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: varslist <- lst$varslist
- en: fmodel <- lst$fmodel
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: fmodel <- lst$fmodel
- en: buzztest <- lst$buzztest
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: buzztest <- lst$buzztest
- en: rm(list = "lst")
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: rm(list = "lst")
- en: '#* Score a data frame.'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '#* Score a data frame.'
- en: '#* @param d data frame to score'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: '#* @param d data frame to score'
- en: '#* @post /score_data'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '#* @post /score_data'
- en: function(d) {
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: function(d) {
- en: predict(fmodel, newdata = d, type = "prob")
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: predict(fmodel, newdata = d, type = "prob")
- en: '}'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: '[PRE23]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: library("plumber")
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: library("plumber")
- en: r <- plumb("plumber.R")
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: r <- plumb("plumber.R")
- en: r$run(port=8000)
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: r$run(port=8000)
- en: '[PRE24]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: library("RCurl")
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: library("RCurl")
- en: library("jsonlite")
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: library("jsonlite")
- en: post_query <- function(method, args) {                              ❶
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: post_query <- function(method, args) {                              ❶
- en: hdr <- c("Content-Type" = "application/x-www-form-urlencoded")
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: hdr <- c("Content-Type" = "application/x-www-form-urlencoded")
- en: resp <- postForm(
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: resp <- postForm(
- en: paste0("http://localhost:8000/", method),
  id: totrans-249
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: paste0("http://localhost:8000/", method),
- en: .opts=list(httpheader = hdr,
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: .opts=list(httpheader = hdr,
- en: postfields = toJSON(args)))
  id: totrans-251
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: postfields = toJSON(args)))
- en: fromJSON(resp)
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: fromJSON(resp)
- en: '}'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: data <- read.csv("buzz_sample.csv",
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: data <- read.csv("buzz_sample.csv",
- en: stringsAsFactors = FALSE,
  id: totrans-255
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: stringsAsFactors = FALSE,
- en: strip.white = TRUE)
  id: totrans-256
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: strip.white = TRUE)
- en: scores <- post_query("score_data",
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: scores <- post_query("score_data",
- en: list(d = data))
  id: totrans-258
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: list(d = data))
- en: knitr::kable(head(scores))
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: knitr::kable(head(scores))
- en: tab <- table(pred = scores[, 2]>0.5, truth = data$buzz)
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: tab <- table(pred = scores[, 2]>0.5, truth = data$buzz)
- en: knitr::kable(tab)
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: knitr::kable(tab)
- en: '[PRE25]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: CASE
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: CASE
- en: WHEN (`num.displays_06` >= 1517.5 AND
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: WHEN (`num.displays_06` >= 1517.5 AND
- en: '`avg.auths.per.disc_00` < 2.25 AND'
  id: totrans-265
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`avg.auths.per.disc_00` < 2.25 AND'
- en: '`num.displays_06` < 2075.0) THEN (''0'')'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`num.displays_06` < 2075.0) THEN (''0'')'
- en: WHEN (`num.displays_03` >= 1114.5 AND
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: WHEN (`num.displays_03` >= 1114.5 AND
- en: '`atomic.containers_01` < 9.5 AND'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`atomic.containers_01` < 9.5 AND'
- en: '`avg.auths.per.disc_00` >= 2.25 AND'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`avg.auths.per.disc_00` >= 2.25 AND'
- en: '`num.displays_06` < 2075.0) THEN (''0'')'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`num.displays_06` < 2075.0) THEN (''0'')'
- en: WHEN ...
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: WHEN ...
- en: '```'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: '```'
- en: The preceding code is enumerating each path from the root of the tree down.
    Remember that decision trees are just huge nested if/else blocks, and SQL writes
    `if`/`else` as `CASE`/`WHEN`. Each SQL `WHEN` clause is a path in the original
    decision tree. This is made clearer in [figure 11.16](../Text/11.xhtml#ch11fig16).
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: The preceding code is enumerating each path from the root of the tree down.
    Remember that decision trees are just huge nested if/else blocks, and SQL writes
    `if`/`else` as `CASE`/`WHEN`. Each SQL `WHEN` clause is a path in the original
    decision tree. This is made clearer in [figure 11.16](../Text/11.xhtml#ch11fig16).
- en: Figure 11.16\. Annotating `CASE`/`WHEN` paths
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 11.16\. Annotating `CASE`/`WHEN` paths
- en: '![](Images/11fig16_alt.jpg)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/11fig16_alt.jpg)'
- en: In the SQL export, each tree is written as a series of `WHEN` cases over all
    of its paths, allowing the tree calculation to be performed in SQL. As a user,
    we would evaluate a tree by tracing down from the root node and moving down nodes,
    and left/right depending on the node conditions. The SQL code instead evaluates
    all paths from the roots to the leaves and keeps the result from the unique path
    for which all the conditions are met. It is an odd way to evaluate a tree, but
    it converts everything into an all-at-once formula that can be exported to SQL.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 在 SQL 导出中，每棵树都被写为一系列覆盖其所有路径的 `WHEN` 情况，允许在 SQL 中执行树计算。作为用户，我们会从根节点开始追踪，向下移动节点，并根据节点条件向左或向右移动。相反，SQL
    代码会评估从根到叶子的所有路径，并保留满足所有条件的唯一路径的结果。这是一种评估树的特殊方式，但它将所有内容转换为一个一次性公式，可以导出到 SQL。
- en: 'The overall idea is this: we have exported the random forest model into a format
    something else can read, SQL. Somebody else can own the finished model from that
    point on.'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 整体思路是这样的：我们已经将随机森林模型导出为其他程序可以读取的格式，即 SQL。从那时起，其他人可以拥有这个完成的模型。
- en: An important export system to consider using is *Predictive Model Markup Language*
    (PMML) which is an XML standard for sharing models across different systems.^([[7](../Text/11.xhtml#ch11fn7)])
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 一个值得考虑的重要导出系统是 *预测模型标记语言* (PMML)，它是一个用于在不同系统间共享模型的 XML 标准.^([[7](../Text/11.xhtml#ch11fn7)])
- en: ⁷
  id: totrans-279
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ⁷
- en: ''
  id: totrans-280
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: See, for example, the PMML package [https://CRAN.R-project.org/package=pmml](https://CRAN.R-project.org/package=pmml).
  id: totrans-281
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 例如，查看 PMML 包 [https://CRAN.R-project.org/package=pmml](https://CRAN.R-project.org/package=pmml)。
- en: 11.4.4\. What to take away
  id: totrans-282
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.4.4\. 应该记住什么
- en: You should now be comfortable demonstrating R models to others. Deployment and
    demonstration techniques include
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你应该能够舒适地向他人展示 R 模型。部署和展示技术包括
- en: Setting up a model as an HTTP service that can be experimented with by others
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置一个模型作为其他人可以实验的 HTTP 服务
- en: Setting up micro applications using Shiny
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Shiny 设置微应用
- en: Exporting models so a model application can be reimplemented in a production
    environment
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导出模型以便在生产环境中重新实现模型应用
- en: Summary
  id: totrans-287
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we worked on managing and sharing your work. In addition, we
    showed some techniques to set up demonstration HTTP services and export models
    for use by other software (so you don’t add R as a dependency in production).
    At this point, you have been building machine learning models for some time, and
    you now have some techniques for working proficiently with models over time and
    with collaborators.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们致力于管理和分享你的工作。此外，我们还展示了设置演示 HTTP 服务和导出模型供其他软件使用的技巧（这样你就不需要在生产中添加 R 作为依赖）。到目前为止，你已经构建了一些时间机器学习模型，并且你现在有一些在一段时间内与合作伙伴高效工作使用模型的技巧。
- en: 'Here are some key takeaways:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些关键要点：
- en: Use knitr to produce significant reproducible milestone/checkpoint documentation.
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 knitr 生成重要的可重复里程碑/检查点文档。
- en: Write effective comments.
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 写出有效的注释。
- en: Use version control to save your work history.
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用版本控制保存你的工作历史。
- en: Use version control to collaborate with others.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用版本控制与他人协作。
- en: Make your models available to your partners for experimentation, testing, and
    production deployment.
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使你的模型可供合作伙伴进行实验、测试和生产部署。
- en: In our next chapter, we will explore how to formally present and explain your
    work.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨如何正式展示和解释你的工作。
