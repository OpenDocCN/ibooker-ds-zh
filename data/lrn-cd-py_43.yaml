- en: Lesson 35\. Useful libraries
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第35课：有用的库
- en: After reading [lesson 35](#ch35), you’ll be able to
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读完[第35课](#ch35)后，你将能够
- en: Bring libraries from outside the standard Python package into your code
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将外部标准Python包中的库引入到你的代码中
- en: Use the `math` library to do mathematical operations
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `math` 库来进行数学运算
- en: Use the `random` library to generate random numbers
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `random` 库来生成随机数
- en: Use the `time` library to time programs
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `time` 库来计时程序
- en: 'Programming is an activity that’s usually most efficient and enjoyable when
    you build upon work that others have done. Some problems have already been solved,
    and code has likely been written to solve similar tasks to the ones that you’re
    trying to solve. It’s highly unlikely that you’ll have to start a task by implementing
    code to do everything from scratch. In any language, libraries exist that you
    can use to help you code tasks in a modular way: by building upon code that’s
    already written, tested, and debugged for correctness and efficiency.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 编程是一种通常在基于他人已完成的工作时最有效率和最愉快的活动。一些问题已经被解决，并且可能已经编写了代码来解决与你试图解决的问题类似的任务。你几乎不可能需要从头开始实现代码来完成一个任务。在任何语言中，都存在你可以用来以模块化方式帮助编码任务的库：通过构建已经编写、测试和调试为正确性和效率的代码。
- en: To some extent, you’ve already been doing this! You’ve been using objects and
    operations built into the Python language. Imagine how tough learning to program
    would’ve been if you had to learn how to work with memory locations in the computer
    and to build up everything from scratch.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在某种程度上，你已经在做这件事了！你一直在使用Python语言内建的对象和操作。想象一下，如果你不得不学习如何在计算机中处理内存位置并从头开始构建一切，学习编程会有多困难。
- en: '|  |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Consider this**'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**考虑这一点**'
- en: Much of programming is building upon objects and ideas already there. Think
    about what you’ve learned so far. What are some examples of ways you’ve built
    upon things?
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 大部分编程都是基于已有的对象和思想来构建的。想想你到目前为止学到了什么。有哪些例子是你基于现有事物进行构建的？
- en: 'Answer:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 答案：
- en: You can use code that others have written (or even that you’ve written previously).
    You start with simple object types, and you make ones that are more complex. You
    build layers of abstractions by using functions and reuse functions with different
    inputs.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用其他人编写的代码（甚至是你之前编写的）。你从简单的对象类型开始，然后创建更复杂的类型。通过使用函数和重用具有不同输入的函数，你构建了抽象层。
- en: '|  |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 35.1\. Importing libraries
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 35.1. 导入库
- en: 'Arguably, you’ve learned two important things so far:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 争议性地，你到目前为止已经学到了两件重要的事情：
- en: How to create your own functions
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何创建自己的函数
- en: How to create your own object types, which package together a set of properties
    and behaviors for an object type
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何创建自己的对象类型，这些类型将一组属性和行为打包在一起
- en: More complex code requires incorporating many functions and object types whose
    definitions you have to include. One way to do this is to copy and paste the definitions
    into your code. But there’s another way, which is more common and less error-prone.
    When you have functions and classes defined in other files, you can use an `import`
    statement at the top of your code. The reason you might have different functions
    or classes defined in different files is to keep your code organized, keeping
    in line with the idea of abstraction.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 更复杂的代码需要包含许多函数和对象类型，你必须包括它们的定义。一种方法是将定义复制粘贴到你的代码中。但还有一种更常见且更不容易出错的方法。当你在其他文件中定义了函数和类时，你可以在代码的顶部使用一个
    `import` 语句。你可能在不同的文件中定义不同的函数或类的原因是为了保持代码的整洁，与抽象的概念保持一致。
- en: 'Suppose you have a file in which you define two classes you’ve already seen:
    `Circle` and `Rectangle`. In another file, you’d like to use these classes. You
    put one line in your file to bring in classes defined in another.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你有一个文件，其中定义了你已经见过的两个类：`Circle` 和 `Rectangle`。在另一个文件中，你想要使用这些类。你只需在文件中添加一行来引入在另一个文件中定义的类。
- en: 'In a file named shapes.py, you define the `Circle` and `Rectangle` classes.
    In another file, you can bring in the classes by using the following:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个名为 `shapes.py` 的文件中，你定义了 `Circle` 和 `Rectangle` 类。在另一个文件中，你可以使用以下方式引入这些类：
- en: '[PRE0]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This process is called *importing* and tells Python to bring in all the classes
    defined in the file with the name shapes.py. Notice that the `import` line uses
    the name of the file that contains the definitions you want to import, and it
    omits the .py after the name of the file. For this line to work, both of these
    files must be in the same folder on your computer. [Figure 35.1](#ch35fig01) shows
    the organization of code.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这个过程称为 *导入*，告诉 Python 将名为 shapes.py 的文件中定义的所有类引入。注意，`import` 行使用了包含你想要导入的定义的文件名，并且在文件名后省略了
    .py。为了使这一行工作，这两个文件必须位于你的电脑上的同一文件夹中。[图 35.1](#ch35fig01) 显示了代码的组织结构。
- en: 'Figure 35.1\. Two files: shapes.py and test.py in the same folder. One file
    defines classes for `Circle` and `Rectangle`. Another file imports the classes
    defined in shapes.py and uses them by creating different objects of those types
    and changing their data attributes.'
  id: totrans-23
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 35.1\. 同一文件夹中的两个文件：shapes.py 和 test.py。一个文件定义了 `Circle` 和 `Rectangle` 类。另一个文件导入了
    shapes.py 中定义的类，并通过创建这些类型的不同对象并更改它们的数据属性来使用它们。
- en: '![](images/35fig01.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](images/35fig01.jpg)'
- en: Importing is a common practice that promotes code organization and decluttering.
    Typically, you’ll want to import libraries into your code. Libraries are one or
    more modules, and a module is a file that contains definitions. Libraries often
    bundle modules of related uses together. Libraries can be built into the language
    (included with your installation of the language) or third-party (you download
    them from other online resources). In this unit, you’ll use only built-in libraries.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 导入是一个常见的实践，它促进了代码的组织和清理。通常，你会在代码中导入库。库是一个或多个模块，而模块是一个包含定义的文件。库通常将相关用途的模块捆绑在一起。库可以是语言内建的（包含在语言安装中）或第三方（从其他在线资源下载）。在本单元中，你将只使用内建库。
- en: Think of a Python library like a shop. Some shops are large, like department
    stores. These help you get all your items in one place, but they might not have
    some specialized merchandise. Other shops are small, like mall kiosks. These focus
    on one type of merchandise (for example, phones or perfume) and have a wider selection
    related to that one type of item.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 将 Python 库想象成一个商店。有些商店很大，比如百货商店，它们能帮你在一个地方找到所有物品，但可能没有一些专门的商品。其他商店较小，比如购物中心的小摊位，它们专注于一种商品（例如，手机或香水），并提供与该类型商品更广泛的选择。
- en: 'When using a library, your first action is to go to its documentation to see
    the classes and functions defined in the library. For libraries that are built-in
    (a part of the language), this documentation can be found at the Python website:
    [https://docs.python.org](https://docs.python.org). This site links to the documentation
    for the latest version of Python, but you can view the documentation for any of
    the previous versions. This book uses Python version 3.5\. If you don’t have an
    internet connection to see the documentation online, you can also view the documentation
    through the Python console. You’ll see how to do this in the next section.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用库时，你的第一个动作是查看库的文档，以了解库中定义的类和函数。对于内建的库（语言的一部分），这些文档可以在 Python 网站上找到：[https://docs.python.org](https://docs.python.org)。该网站链接到
    Python 最新版本的文档，但你也可以查看任何先前版本的文档。本书使用 Python 版本 3.5。如果你没有互联网连接来查看在线文档，你还可以通过 Python
    控制台查看文档。你将在下一节中看到如何这样做。
- en: '|  |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Quick check 35.1**'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 35.1**'
- en: '**[Q1:](kindle_split_056.html#app01qa136q0a1)**'
  id: totrans-30
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa136q0a1)**'
- en: ''
  id: totrans-31
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Assume you have three files:'
  id: totrans-32
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 假设你有三个文件：
- en: ''
  id: totrans-33
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: fruits.py contains the definitions for classes of fruits.
  id: totrans-34
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: fruits.py 包含了水果类的定义。
- en: activities.py contains functions for activities that you’d do throughout your
    day.
  id: totrans-35
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: activities.py 包含了你一天中会做的活动的函数。
- en: life.py contains the gameplay for a game of Life.
  id: totrans-36
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: life.py 包含了生命游戏的玩法。
- en: ''
  id: totrans-37
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: You want to use the classes and functions defined in fruits.py and activities.py
    in life.py. What lines do you need to write?
  id: totrans-38
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 你想在 life.py 中使用 fruits.py 和 activities.py 中定义的类和函数。你需要编写哪些行？
- en: '|  |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 35.2\. Doing mathematical operations with the math library
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 35.2\. 使用 math 库进行数学运算
- en: 'One of the most useful libraries is the math library. The math library for
    Python 3.5 is documented at [https://docs.python.org/3.5/library/math.html](https://docs.python.org/3.5/library/math.html).
    It deals with mathematical operations on numbers, where the operations aren’t
    built into the language. To view the math library documentation without going
    online, you can type the following into the IPython console:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 最有用的库之一是数学库。Python 3.5 的数学库文档在 [https://docs.python.org/3.5/library/math.html](https://docs.python.org/3.5/library/math.html)
    上。它处理数字上的数学运算，这些运算不是内置于语言中的。要在线下查看数学库文档，你可以在 IPython 控制台中输入以下内容：
- en: '[PRE1]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The console shows all the classes and functions defined in the math library,
    along with their docstrings. You can browse the docstrings and see whether any
    of them would be useful in your code.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 控制台显示了在数学库中定义的所有类和函数，以及它们的文档字符串。你可以浏览文档字符串，看看它们中的任何一个是否对你的代码有用。
- en: 'The math library consists of functions organized by type: number-theoretic
    and representation functions, power and logarithmic functions, trigonometric functions,
    angular conversion, and hyperbolic functions. It also contains two constants that
    you can work with: pi and e.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 数学库包含按类型组织的函数：数论和表示函数、幂和对数函数、三角函数、角度转换和双曲函数。它还包含两个你可以使用的常量：π和e。
- en: Suppose you’d like to simulate throwing a ball at your friend in a field. You
    want to see whether the throw reaches your friend, allowing for a bit of leniency
    because your friend can jump up to catch, if need be. Let’s see how to write a
    program that does this simulation for you. You’ll ask the user for the distance
    your friend is standing away from you, the speed at which you can throw the ball,
    and an angle at which to throw the ball. The program will tell you whether the
    ball will make it far enough to be caught. [Figure 35.2](#ch35fig02) shows the
    setup.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你想要模拟在田野中向你的朋友投掷球。你想要看看这个投掷是否能达到你的朋友那里，考虑到一点宽容度，因为你的朋友可以跳起来接球。让我们看看如何编写一个为你进行这种模拟的程序。你需要询问用户你的朋友离你有多远，你投掷球的速度以及投掷球的角度。程序将告诉你球是否能飞得足够远以至于可以被接住。[图
    35.2](#ch35fig02) 显示了设置。
- en: Figure 35.2\. Setup for throwing a ball at a certain speed and angle so that
    it goes a certain distance
  id: totrans-46
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 35.2\. 以一定速度和角度投掷球以使其飞到一定距离的设置
- en: '![](images/35fig02.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](images/35fig02.jpg)'
- en: 'The formula that you can use to calculate how far a ball goes when it’s thrown
    with a certain speed at a certain angle is as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用以下公式来计算当以一定速度和角度投掷球时球能飞多远：
- en: '[PRE2]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[Listing 35.1](#ch35ex01) shows the code for this simple program. It first
    asks the user for the distance to the user’s friend, the speed at which to throw
    the ball, and the angle at which to throw it. Then it uses the formula to calculate
    how far the ball will go. Allowing some tolerance (to account for the receiver
    being able to reach for it), it’ll display one of three messages: it was caught,
    it fell short, or it went too long. To calculate the sin and cos values, you’ll
    use functions in the math library, so you have to bring in the library using an
    `import` statement. Aside from implementing the formula, only one detail is left.
    An angle can be measured in degrees or radians. The functions in the math library
    assume that angles are given in radians, so you need to convert the angle from
    degrees to radians by using a function in the math library.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '[列表 35.1](#ch35ex01) 显示了这个简单程序的代码。它首先询问用户到朋友的距离、投掷球的速度以及投掷球的角度。然后它使用公式来计算球会飞多远。考虑到接收者能够伸手去接球的一定宽容度，它会显示以下三种信息之一：被接住、未达目标或飞得太远。为了计算正弦和余弦值，你将使用数学库中的函数，因此你必须使用
    `import` 语句引入库。除了实现公式外，只有一个细节需要处理。角度可以用度或弧度来衡量。数学库中的函数假设角度是以弧度给出的，因此你需要使用数学库中的函数将角度从度转换为弧度。'
- en: Listing 35.1\. Using the math library to throw a ball at an angle
  id: totrans-51
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 35.1\. 使用数学库以角度投掷球
- en: '[PRE3]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Imports the math library functions**'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 导入数学库函数**'
- en: '***2* Implements the formula, using the math library functions**'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 实现公式，使用数学库函数**'
- en: '***3* The library math.sin and math.cos take radians, not degrees, as the input,
    so convert the user input.**'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 库 math.sin 和 math.cos 以弧度为输入，而不是度，因此需要转换用户输入。**'
- en: '|  |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 35.2**'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 35.2**'
- en: '**[Q1:](kindle_split_056.html#app01qa137q0a1)**'
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa137q0a1)**'
- en: ''
  id: totrans-59
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Modify the program so that it asks the user only for how far away the friend
    is and how fast to throw the ball. Then, it loops through all the angles from
    0 to 90 and prints whether the ball made it.
  id: totrans-60
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 修改程序，使其只询问用户朋友有多远以及抛球的速度。然后，程序会遍历从0到90度的所有角度，并打印出球是否成功到达。
- en: '|  |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 35.3\. Random numbers with the random library
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 35.3\. 使用random库生成随机数
- en: The random library provides numerous operations you can do to add unpredictability
    to programs. This library is documented at [https://docs.python.org/3.5/library/random.html](https://docs.python.org/3.5/library/random.html).
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 随机库提供了许多操作，你可以使用这些操作为程序添加不可预测性。该库的文档位于[https://docs.python.org/3.5/library/random.html](https://docs.python.org/3.5/library/random.html)。
- en: 35.3.1\. Randomizing lists
  id: totrans-64
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 35.3.1\. 随机化列表
- en: Adding unpredictability and uncertainty to your programs can add more functionality
    and make them more interesting for your users. The unpredictability comes from
    a pseudo-number generator, which can help you do things like pick a random number
    within a certain range, pick an item at random in a list or a dictionary, or rearrange
    a list for you at random, among others.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的程序中添加不可预测性和不确定性可以增加更多功能，并使它们对用户更有趣。这种不可预测性来自伪随机数生成器，可以帮助你做一些事情，比如在某个范围内选择一个随机数，在列表或字典中随机选择一个项目，或者随机重新排列列表，等等。
- en: 'For example, say you have a list of people and want to pick one at random.
    Try typing this code in a file and running it:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设你有一个人员名单，并想随机选择一个人。尝试在文件中输入此代码并运行它：
- en: '[PRE4]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: It prints one of the elements, at random, in the list of named people. If you
    run the program more than once, you’ll notice that you’ll get a different output
    each time it’s run.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 它会随机打印出名单中的人的一个元素。如果你多次运行程序，你会注意到每次运行都会得到不同的输出。
- en: 'You can even pick a certain number of people from the list:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 你甚至可以从名单中选择一定数量的人：
- en: '[PRE5]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: This code ensures that the same person isn’t picked more than once, and prints
    a list of however many elements are specified (three, in this case).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码确保同一个人不会被重复选择，并打印出指定数量的元素列表（在这个例子中是三个）。
- en: 35.3.2\. Simulating games of chance
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 35.3.2\. 模拟随机游戏
- en: 'Another common use of the random library is to play games of chance. You can
    simulate probabilities of certain events happening by using the `random.random()`
    function: the first `random` is the library name, and the second `random` is the
    function name, which happens to be the same as the library name. This function
    returns a random floating-point number between 0 (inclusive) and 1 (not inclusive).'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 随机库的另一个常见用途是玩随机游戏。你可以通过使用`random.random()`函数来模拟某些事件发生的概率：第一个`random`是库名，第二个`random`是函数名，它恰好与库名相同。此函数返回一个介于0（包含）和1（不包含）之间的随机浮点数。
- en: '[Listing 35.2](#ch35ex02) shows a program that plays rock-paper-scissors with
    the user. The program first asks the user to make their choice. Then, it gets
    a random number by using `random.random()`. To simulate the 1/3 probability of
    the computer picking one of rock, paper, or scissors, you can check that the random
    number generated falls within one of three ranges: 0 to 1/3, 1/3 to 2/3, and 2/3
    to 1.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '[列表35.2](#ch35ex02) 展示了一个与用户玩剪刀石头布的程序。程序首先要求用户做出选择。然后，它通过使用`random.random()`获取一个随机数。为了模拟计算机选择石头、纸牌或剪刀的1/3概率，你可以检查生成的随机数是否落在三个范围之一：0到1/3、1/3到2/3和2/3到1。'
- en: Listing 35.2\. Using the random library to play rock-paper-scissors
  id: totrans-75
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表35.2\. 使用random库玩剪刀石头布
- en: '[PRE6]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '***1* Brings in functions defined in the random library**'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 引入random库中定义的函数**'
- en: '***2* Chooses a random float between 0 (inclusive) and 1 (not inclusive)**'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 选择介于0（包含）和1（不包含）之间的随机浮点数**'
- en: '***3* Case when computer chose rock, with 1/3 probability**'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 计算机选择石头的情况，概率为1/3**'
- en: '***4* Case when computer chose paper, with 1/3 probability**'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 计算机选择纸牌的情况，概率为1/3**'
- en: '***5* Case when computer chose scissors, with 1/3 probability**'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 计算机选择剪刀的情况，概率为1/3**'
- en: 35.3.3\. Replicating results by using a seed
  id: totrans-82
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 35.3.3\. 使用种子复制结果
- en: When you have programs that don’t produce the results you want, you need to
    test them to figure out where the problem is. Programs that deal with random numbers
    add a layer of complexity; a program involving a random number may work sometimes,
    but not others, leading to a frustrating debugging session.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的程序没有产生你想要的结果时，你需要测试它们以找出问题所在。处理随机数的程序增加了一层复杂性；涉及随机数的程序有时可能工作，有时则不行，导致令人沮丧的调试会话。
- en: 'Random numbers generated by the random library aren’t truly random. They’re
    pseudo-random. They appear random, but are determined by the result of applying
    a function on something that changes frequently or is unpredictable, such as the
    time in milliseconds since a specific date. The date generates the first number
    in the pseudo-random sequence, and each number in that sequence is generated from
    the previous number. The random library allows you to *seed* the random numbers
    generated by using `random.seed(N)`, where `N` is any integer. Setting the seed
    allows you to start with a known number. The sequence of random numbers generated
    within your program will be the same every time you run the program, as long as
    the seed is set to the same value. The following lines generate a random integer
    between 2 and 17 and then between 30 and 88:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 随机库生成的随机数并不是真正的随机数。它们是伪随机数。它们看起来是随机的，但是由对频繁变化或不可预测的事物（如自特定日期以来的毫秒数）应用函数的结果决定的。日期生成伪随机序列的第一个数字，该序列中的每个数字都是根据前一个数字生成的。随机库允许你使用`random.seed(N)`来*设置*随机数，其中`N`是任何整数。设置种子允许你从一个已知的数字开始。只要种子设置为相同的值，你程序中生成的随机数序列在每次运行程序时都将相同。以下行生成一个介于2和17之间的随机整数，然后是介于30和88之间的随机整数：
- en: '[PRE7]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If you run this program many times, the numbers printed will likely change.
    But you can seed the results so that the two numbers are going to be the same
    every time the program is run, by setting the seed:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你多次运行这个程序，打印出的数字很可能会改变。但你可以通过设置种子来确保每次运行程序时这两个数字都相同，方法如下：
- en: '[PRE8]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The program now prints 14 and 78 every time it’s run. By changing the integer
    inside the seed function, you can generate a different sequence. For example,
    if you change `random.seed(0)` to `random.seed(5)`, this program will now print
    10 and 77 every time it’s run. Note that these numbers may change if you’re using
    a Python version other than 3.5.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 每次运行程序时，该程序都会打印出14和78。通过更改种子函数内的整数，你可以生成不同的序列。例如，如果你将`random.seed(0)`更改为`random.seed(5)`，那么每次运行此程序时，它现在都会打印出10和77。请注意，如果你使用的是3.5以外的Python版本，这些数字可能会改变。
- en: '|  |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 35.3**'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查35.3**'
- en: '**[Q1:](kindle_split_056.html#app01qa138q0a1)**'
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa138q0a1)**'
- en: ''
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that simulates flipping a coin 100 times. Then it prints how
    many heads and how many tails came up.
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个模拟抛掷硬币100次的程序。然后打印出有多少次出现正面和多少次出现反面。
- en: '|  |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 35.4\. Timing programs with the time library
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 35.4\. 使用时间库计时程序
- en: When you start dealing with programs that might take a long time to run, it’d
    be nice to know how long they’ve been running. The time library has functions
    that can help you do this, and its documentation is available at [https://docs.python.org/3.5/library/time.html](https://docs.python.org/3.5/library/time.html).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始处理可能需要很长时间才能运行的程序时，了解它们已经运行了多长时间会很好。时间库中有可以帮助你做到这一点的函数，并且其文档可在[https://docs.python.org/3.5/library/time.html](https://docs.python.org/3.5/library/time.html)找到。
- en: 35.4.1\. Using the clock
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 35.4.1\. 使用时钟
- en: Computers are pretty fast, but how quickly can they do simple calculations?
    You can answer this question by timing a program that gets the computer to count
    up to one million. [Listing 35.3](#ch35ex03) shows code that does this. Just before
    a loop that increments a counter, you save the current time on the computer clock.
    Then you run the loop. After the loop, you get the current time on the computer
    again. The difference between the start and end times tells you how long the program
    took to run.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 计算机运行速度很快，但它们能多快地完成简单的计算呢？你可以通过计时让计算机计数到一百万来回答这个问题。[列表35.3](#ch35ex03)展示了完成此操作的代码。在增加计数器的循环之前，你保存了计算机时钟上的当前时间。然后运行循环。循环结束后，再次获取计算机上的当前时间。开始和结束时间之间的差异告诉你程序运行了多长时间。
- en: Listing 35.3\. Using the time library to show how long a program takes to run
  id: totrans-99
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表35.3\. 使用时间库来显示程序运行所需的时间
- en: '[PRE9]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '***1* Brings in functions defined in the time library**'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 引入在时间库中定义的函数**'
- en: '***2* Gets the current time on the clock, in ms**'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 获取时钟上的当前时间，单位为毫秒**'
- en: '***3* Code that has the computer count to one million**'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 让计算机计数到一百万的代码**'
- en: '***4* Gets the current time on the clock, in ms**'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 获取时钟上的当前时间，单位为毫秒**'
- en: '***5* Prints the difference in start and end times**'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 打印开始和结束时间之间的差异**'
- en: This program took about 0.2 seconds to run on my computer. This time will vary,
    depending on how new and fast your computer is and how many other applications
    are running. If you have video streaming in the background, the computer may dedicate
    resources to doing that rather than running your program, so you may see a longer
    time printed.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这个程序在我的电脑上运行大约需要 0.2 秒。这个时间会根据您的电脑的新旧和速度以及运行的其他应用程序的数量而变化。如果您在后台有视频流，电脑可能会将资源分配给执行该操作，而不是运行您的程序，因此您可能会看到更长的时间打印出来。
- en: 35.4.2\. Pausing your program
  id: totrans-107
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 35.4.2\. 暂停程序
- en: 'The time library also allows you to pause your program by using a sleep function.
    This stops it from executing the next line until that amount of time has passed.
    One use for this is to show the user a loading screen. [Listing 35.4](#ch35ex04)
    shows how to print a progress bar that shows 10% increments every half- second.
    The code prints the following, with a half-second pause between each line. Can
    you tell why the code prints multiple stars by looking at the code? You’ll have
    to think back to the lesson on strings and string manipulations:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 时间库还允许您使用睡眠函数暂停您的程序。这会阻止它执行下一行，直到经过指定的时间。这种用法之一是向用户显示加载屏幕。[列表 35.4](#ch35ex04)
    展示了如何打印每半秒显示 10% 增量的进度条。代码打印以下内容，每行之间有半秒的暂停。你能通过查看代码来解释为什么代码会打印多个星号吗？你需要回顾一下关于字符串和字符串操作的课程：
- en: '[PRE10]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Listing 35.4\. Using the time library to show a progress bar
  id: totrans-110
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 35.4\. 使用时间库显示进度条
- en: '[PRE11]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '***1* Brings in functions defined in the time library**'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 引入时间库中定义的函数**'
- en: '***2* A loop representing 10% increments**'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 代表 10% 增量的循环**'
- en: '***3* Prints progress represented by multiple * characters**'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 使用多个 * 字符打印进度**'
- en: '***4* Pauses the program for half a second**'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 程序暂停半秒**'
- en: '|  |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Quick check 35.4**'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 35.4**'
- en: '**[Q1:](kindle_split_056.html#app01qa139q0a1)**'
  id: totrans-118
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa139q0a1)**'
- en: ''
  id: totrans-119
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that generates 10 million random numbers and then prints how
    long it takes to do this.
  id: totrans-120
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个程序，生成 1000 万个随机数，然后打印出完成此操作所需的时间。
- en: '|  |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Summary
  id: totrans-122
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 概述
- en: 'In this lesson, my goal was to teach you how to use libraries that other programmers
    have created to enhance your own programs. The libraries shown here are simple,
    but using them can lead to a more interesting user experience. Here are the major
    takeaways:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在本课中，我的目标是教会您如何使用其他程序员创建的库来增强您自己的程序。这里展示的库很简单，但使用它们可以带来更有趣的用户体验。以下是主要收获：
- en: Organizing code that deals with similar functionality in a separate file leads
    to code that’s easier to read.
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将处理类似功能的代码组织在单独的文件中，可以使代码更容易阅读。
- en: Libraries store functions and classes related to one group of actions in one
    place.
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 库将一组动作相关的函数和类存储在一个地方。
- en: Let’s see if you got this...
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看你是否掌握了这个...
- en: '**[Q35.1](kindle_split_056.html#app01qa140q0a1)**'
  id: totrans-127
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q35.1](kindle_split_056.html#app01qa140q0a1)**'
- en: ''
  id: totrans-128
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that gets the user to roll a die against the computer. First,
    simulate the user rolling a six-sided die and show the result to the user. Then,
    simulate the computer rolling a six-sided die, add a 2-second delay, and show
    the result. After each roll, ask the user whether they want to roll again. When
    the user is done playing, show them how long they’ve been playing the game in
    seconds.
  id: totrans-129
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个程序，让用户与计算机掷骰子。首先，模拟用户掷一个六面的骰子，并向用户展示结果。然后，模拟计算机掷一个六面的骰子，添加 2 秒的延迟，并展示结果。每次掷骰子后，询问用户是否想要再次掷骰子。当用户完成游戏后，向他们展示他们玩游戏的时间（以秒为单位）。
