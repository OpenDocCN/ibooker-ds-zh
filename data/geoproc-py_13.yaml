- en: Appendix A. Installation
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录A. 安装
- en: You’ll need to install several components in order to work through this book.
    The most obvious is Python itself, but the basic Python distribution doesn’t come
    with the geoprocessing modules bundled with it. Some third-party Python distributions
    do include these libraries, or at least some of them, and you’re welcome to use
    them if you’d like. Although I haven’t tested the examples in this book with it,
    I’ve had success teaching classes using Anaconda Python, which is available for
    Windows, OS X, and Linux ([https://www.continuum.io/downloads](https://www.continuum.io/downloads)).
    Three other examples that I’m aware of, but haven’t tested things with, are OSGeo4W,
    Enthought Canopy, and Python(x,y). If you want to use one of these distributions,
    make sure that you check the package list first to make sure it includes the Python
    modules that you’re interested in. The instructions provided here will show you
    how to obtain Python and the required modules without using one of these distributions,
    as well as how to get them using Anaconda. Unfortunately, everybody’s system is
    different, even if they’re using the same operating system, so these instructions
    can in no way cover all cases.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成本书的学习，你需要安装几个组件。最明显的是Python本身，但基本的Python发行版并没有包含捆绑的地理处理模块。一些第三方Python发行版确实包括这些库，或者至少包括其中的一些，如果你愿意，可以使用它们。尽管我没有使用它测试本书中的示例，但我使用Anaconda
    Python（可在Windows、OS X和Linux上使用）成功教授了课程。[https://www.continuum.io/downloads](https://www.continuum.io/downloads)。我还知道另外三个例子，但尚未测试，它们是OSGeo4W、Enthought
    Canopy和Python(x,y)。如果你想使用这些发行版之一，请确保首先检查包列表，以确保它包含你感兴趣的Python模块。这里提供的说明将指导你如何在不使用这些发行版的情况下获取Python和所需的模块，以及如何使用Anaconda获取它们。不幸的是，每个人的系统都是不同的，即使他们使用的是相同的操作系统，因此这些说明无法涵盖所有情况。
- en: 'Here’s the list of modules that we’ll work with in this book:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书我们将使用的模块列表如下：
- en: 'Python itself: [www.python.org](http://www.python.org)'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python本身：[www.python.org](http://www.python.org)
- en: 'GDAL/OGR, for reading and writing geospatial data: [www.gdal.org](http://www.gdal.org)'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GDAL/OGR，用于读取和写入地理空间数据：[www.gdal.org](http://www.gdal.org)
- en: 'NumPy, the basic Python array-processing module: [www.numpy.org](http://www.numpy.org)'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NumPy，基本的Python数组处理模块：[www.numpy.org](http://www.numpy.org)
- en: 'Matplotlib, for plotting data graphically: [www.matplotlib.org](http://www.matplotlib.org)'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Matplotlib，用于图形化绘图：[www.matplotlib.org](http://www.matplotlib.org)
- en: 'SciPy, a scientific computing module: [www.scipy.org](http://www.scipy.org)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SciPy，科学计算模块：[www.scipy.org](http://www.scipy.org)
- en: 'Pyproj, a Python wrapper for the PROJ.4 Cartographic Projections library: [https://code.google.com/p/pyproj/](https://code.google.com/p/pyproj/)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pyproj，PROJ.4地图投影库的Python包装器：[https://code.google.com/p/pyproj/](https://code.google.com/p/pyproj/)
- en: 'Folium, for making Leaflet.js maps using Python: [https://github.com/python-visualization/folium](https://github.com/python-visualization/folium)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Folium，使用Python制作Leaflet.js地图：[https://github.com/python-visualization/folium](https://github.com/python-visualization/folium)
- en: 'Spectral Python, for processing hyperspectral image data: [http://www.spectralpython.net/](http://www.spectralpython.net/)'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Spectral Python，用于处理高光谱图像数据：[http://www.spectralpython.net/](http://www.spectralpython.net/)
- en: 'scikit-learn, for data analysis: [http://scikit-learn.org/stable/](http://scikit-learn.org/stable/)'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: scikit-learn，用于数据分析：[http://scikit-learn.org/stable/](http://scikit-learn.org/stable/)
- en: 'Mapnik, for making beautiful maps: [http://mapnik.org/](http://mapnik.org/)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mapnik，用于制作美观的地图：[http://mapnik.org/](http://mapnik.org/)
- en: There are two main versions of Python, 2.x and 3.x, and there are a few significant
    differences between them, so they aren’t completely interchangeable. A lot of
    code will run in both, however, and I’ve tried to write the examples in this book
    so that they’ll work with either one. The latest version of the 2.x branch is
    2.7, and there will be no more major releases in this branch. The 3.x branch is
    being actively developed, and if you have no specific version requirements, I
    would suggest going with this because as the Python website says, it’s “the present
    and the future of the language.” However, you may be forced to use an older version
    of Python if you need to use a third party module that has not been updated to
    work with Python 3.x.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Python 有两个主要版本，2.x 和 3.x，它们之间有一些显著的区别，所以它们并不完全可互换。然而，许多代码可以在两者上运行，我已经尽力编写本书中的示例，以便它们可以与任一版本一起使用。2.x
    分支的最新版本是 2.7，这个分支将不再有重大发布。3.x 分支正在积极开发中，如果你没有特定的版本要求，我建议选择这个版本，因为正如 Python 网站所说，它是“语言的现实和未来。”然而，如果你需要使用尚未更新以与
    Python 3.x 一起工作的第三方模块，你可能被迫使用较旧的 Python 版本。
- en: For example, I use both Python 2.7 and 3.3, but at work it’s usually 2.7 because
    ArcGIS software is used extensively at the university, and it requires Python
    2.7\. Because my coworkers and students almost always have ArcGIS installed, they
    already have Python 2.7 even if they don’t realize it. It makes sense to help
    them install open source tools to work with the Python version they already have,
    and this way I can take advantage of both GDAL and ArcGIS in the same script if
    I want, and teach them to do the same.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我同时使用 Python 2.7 和 3.3，但在工作中通常使用 2.7，因为大学广泛使用 ArcGIS 软件，它需要 Python 2.7。由于我的同事和学生几乎总是安装了
    ArcGIS，即使他们没有意识到这一点，他们也已经安装了 Python 2.7。帮助他们安装与现有 Python 版本兼容的开源工具是有意义的，这样我就可以在同一个脚本中利用
    GDAL 和 ArcGIS，如果我想的话，并且教他们这样做。
- en: It’s possible to have multiple versions of Python installed on one computer,
    so you can always pick and choose which version to use for which project. It’s
    also possible to have different environments for one version of Python, meaning
    that you can have different workspaces, each with different modules installed.
    This allows you to have different configurations for different applications built
    with Python. Although that won’t be covered in this book, please see [www.virtualenv.org](http://www.virtualenv.org)
    if you’re interested in how to do it.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在一台计算机上安装多个 Python 版本是可能的，这样你就可以始终为不同的项目选择不同的版本。这也意味着你可以为 Python 的一个版本拥有不同的环境，这意味着你可以拥有不同的工作空间，每个工作空间都安装了不同的模块。这允许你为使用
    Python 构建的不同应用程序有不同的配置。尽管本书不会涉及这一点，但如果你对此感兴趣，请参阅 [www.virtualenv.org](http://www.virtualenv.org)。
- en: 'Python comes with a command-line utility called pip, which you’ll become familiar
    with if you install many extra modules for Python because it’s usually the easiest
    way to do it. The pip utility lives in the scripts folder inside your Python installation
    directory. Because this is a command-line tool, you need to use it from a terminal
    window or command prompt. To install a module using pip, you do something like
    this:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Python 附带了一个名为 pip 的命令行实用工具，如果你为 Python 安装了许多额外的模块，你会熟悉它，因为通常这是最简单的方法。pip 实用工具位于你的
    Python 安装目录内的 scripts 文件夹中。由于这是一个命令行工具，你需要从终端窗口或命令提示符中使用它。要使用 pip 安装模块，你可以这样做：
- en: '[PRE0]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: To see a list of modules in the default pip repository, see [https://pypi.python.org/pypi](https://pypi.python.org/pypi).
    You can install modules from other locations, but if you’re using a new version
    of pip, you might get an error about the repository not being trusted. The error
    message will tell you what to add to the command to override this, but you should
    only do it if you trust the location you’re trying to download the module from.
    (But you don’t ever download something from a source you don’t trust, right?)
    For more information on using pip, see [https://pypi.python.org/pypi/pip](https://pypi.python.org/pypi/pip).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看默认 pip 存储库中的模块列表，请参阅 [https://pypi.python.org/pypi](https://pypi.python.org/pypi)。你可以从其他位置安装模块，但如果你使用的是
    pip 的新版本，你可能会收到关于存储库不受信任的错误。错误信息将告诉你如何添加到命令中以覆盖此错误，但你应该只在信任你尝试下载模块的位置时这样做。（但你不应该从你不信任的来源下载任何东西，对吧？）有关使用
    pip 的更多信息，请参阅 [https://pypi.python.org/pypi/pip](https://pypi.python.org/pypi/pip)。
- en: There’s more information about installing GDAL available online at [http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries](http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries),
    but I’m providing some information for you here.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在线有更多关于安装 GDAL 的信息，请参阅 [http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries](http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries)，但我在这里提供了一些信息。
- en: A.1\. Anaconda
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1. Anaconda
- en: 'Anaconda ([https://www.continuum.io/downloads](https://www.continuum.io/downloads))
    includes Python and a large number of modules designed for scientific computing.
    Some are installed by default, and many more can be installed with a command-line
    tool that comes with Anaconda. Unfortunately, Anaconda quit supporting GDAL with
    version 2.5, but you can still download older versions that have GDAL. This is
    definitely the easiest way to get set up, although not all of the modules used
    in this book are included, and it doesn’t have all possible capabilities compiled
    into GDAL. When you download and install an older version of Anaconda Python from
    [https://repo.continuum.io/archive/index.html](https://repo.continuum.io/archive/index.html),
    you’ll automatically have Python, NumPy, SciPy, matplotlib, and scikit-learn.
    GDAL/OGR and pyproj are optional installs, and you can get them by opening up
    the Anaconda command prompt and typing the following command:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: Anaconda ([https://www.continuum.io/downloads](https://www.continuum.io/downloads))
    包含 Python 和大量为科学计算设计的模块。其中一些是默认安装的，而许多其他模块可以使用 Anaconda 附带命令行工具进行安装。不幸的是，Anaconda
    从版本 2.5 开始不再支持 GDAL，但您仍然可以下载包含 GDAL 的旧版本。这绝对是最简单的方法来设置环境，尽管本书中使用的并非所有模块都包含在内，并且并非
    GDAL 中编译了所有可能的特性。当您从 [https://repo.continuum.io/archive/index.html](https://repo.continuum.io/archive/index.html)
    下载并安装较旧的 Anaconda Python 版本时，您将自动拥有 Python、NumPy、SciPy、matplotlib 和 scikit-learn。GDAL/OGR
    和 pyproj 是可选安装，您可以通过打开 Anaconda 命令提示符并输入以下命令来获取它们：
- en: '[PRE1]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'More information about using the `conda` utility to install and manage packages
    can be found at [http://conda.pydata.org/docs/using/pkgs.html](http://conda.pydata.org/docs/using/pkgs.html).
    You can use `conda` to install packages that aren’t part of Anaconda, too. To
    find out how to do it, go to [http://pypi.anaconda.org/](http://pypi.anaconda.org/)
    and search for the package you’re interested in. Or you can use pip, and that’s
    what we’ll do here to install folium and spectral:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 关于使用 `conda` 工具安装和管理包的更多信息，请参阅 [http://conda.pydata.org/docs/using/pkgs.html](http://conda.pydata.org/docs/using/pkgs.html)。您也可以使用
    `conda` 安装不属于 Anaconda 的包。要了解如何操作，请访问 [http://pypi.anaconda.org/](http://pypi.anaconda.org/)
    并搜索您感兴趣的包。或者，您可以使用 pip，这正是我们将在这里安装 folium 和 spectral 的方法：
- en: '[PRE2]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: See the information for your operating system to get hints for how to get Mapnik
    and set it up to work with Python. As of this writing, version 2.2 is the latest
    with downloadable binaries from the Mapnik website, but that’s fine and is what
    I used for the examples.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 查看您操作系统的信息，以获取如何获取 Mapnik 并将其设置为与 Python 一起工作的提示。截至本文撰写时，版本 2.2 是最新的，可以从 Mapnik
    网站下载二进制文件，但这没关系，我正是使用这个版本进行示例的。
- en: A.2\. Nonbundled installations
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2. 非捆绑安装
- en: If you don’t want to use a set of prebundled modules such as Anaconda, you can
    install everything individually. Every system is different and has its own little
    idiosyncrasies, however, so these are just general guidelines.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不想使用 Anaconda 这样的预捆绑模块集，您可以单独安装所有内容。然而，每个系统都是不同的，都有自己的小特性，因此这些只是一般指南。
- en: A.2.1\. Linux
  id: totrans-28
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: A.2.1. Linux
- en: I can’t provide information for all flavors of Linux here, but these Ubuntu
    directions might be enough to get you started. This example uses the standard
    Ubuntu repository, but more recent builds for these packages may be available
    from [www.launchpad.net/~ubuntugis](http://www.launchpad.net/~ubuntugis).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我无法提供有关所有 Linux 版本的信息，但以下 Ubuntu 指南可能足以让您开始。此示例使用标准的 Ubuntu 仓库，但这些软件包的最新构建可能可以从
    [www.launchpad.net/~ubuntugis](http://www.launchpad.net/~ubuntugis) 获取。
- en: 'You can use apt-get to install GDAL and its dependencies:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 apt-get 安装 GDAL 及其依赖项：
- en: '[PRE3]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The easiest way to install most of the other needed packages is also to use
    apt-get. I think this should do it:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 安装大多数其他所需软件包的最简单方法也是使用 apt-get。我认为这应该就可以了：
- en: '[PRE4]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'You can install spectral python using pip. If you don’t already have the pip
    tool for installing Python modules, you should install that now:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 pip 安装 spectral python。如果您还没有用于安装 Python 模块的 pip 工具，您应该现在安装它：
- en: '[PRE5]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'And then to install Spectral Python:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 然后安装 Spectral Python：
- en: '[PRE6]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: A.2.2\. Mac OS X
  id: totrans-38
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: A.2.2. Mac OS X
- en: Although I haven’t used a Mac in several years, back when I had one, the easiest
    way I found to install GDAL and several other geospatial packages was to take
    advantage of the great KyngChaos Wiki resource maintained by William Kyngesburye
    at [www.kyngchaos.com/software:frameworks](http://www.kyngchaos.com/software:frameworks).
    This site contains prebuilt frameworks that are designed to work with the system
    version of Python on newer versions of OS X (Lion, Mountain Lion, and Mavericks,
    as of this writing). They don’t support other versions of Python, including ones
    you download and install from [www.python.org](http://www.python.org).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我已经好几年没有使用Mac了，但在我拥有它的时候，我发现安装GDAL和其他几个地理空间包最简单的方法是利用William Kyngesburye维护的KyngChaos
    Wiki资源。这个网站包含预先构建的框架，旨在与OS X（截至本文撰写时的Lion、Mountain Lion和Mavericks）的新版本系统Python一起工作。它们不支持其他版本的Python，包括你从[www.python.org](http://www.python.org)下载和安装的版本。
- en: You can get everything GDAL, including some of the Python modules, by installing
    the GDAL Complete framework from the KyngChaos Wiki. This includes everything
    required by GDAL/OGR, but it doesn’t include the optional plugins such as drivers
    for the Esri FileGDB and MrSID file formats. If you want them, they’re available
    for download in the GDAL section farther down on the same download page.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过从KyngChaos Wiki安装GDAL完整框架来获取GDAL的所有内容，包括一些Python模块。这包括GDAL/OGR所需的所有内容，但它不包括Esri
    FileGDB和MrSID文件格式的驱动程序等可选插件。如果你需要它们，它们可以在同一下载页面下方的GDAL部分下载。
- en: The GDAL Complete framework also includes the NumPy module, but it doesn’t include
    many of the other modules discussed in this book. If you follow the link to the
    Python Modules section of the wiki ([www.kyngchaos.com/software/python](http://www.kyngchaos.com/software/python)),
    you’ll see downloads for SciPy and matplotlib, among other useful modules not
    discussed here. While at this website, you might as well follow the link for QGIS
    ([www.kyngchaos.com/software/qgis](http://www.kyngchaos.com/software/qgis)) and
    install that as well.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: GDAL完整框架还包括NumPy模块，但它不包括本书中讨论的许多其他模块。如果你点击到wiki的Python模块部分([www.kyngchaos.com/software/python](http://www.kyngchaos.com/software/python))，你会看到SciPy和matplotlib等未在此处讨论的有用模块的下载。在此网站停留时，你还可以点击QGIS的链接([www.kyngchaos.com/software/qgis](http://www.kyngchaos.com/software/qgis))并安装它。
- en: 'You should now be able to use pip from your terminal window to install the
    remaining Python packages:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在应该能够从终端窗口使用pip安装剩余的Python包：
- en: '[PRE7]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The remaining package is Mapnik. See [http://mapnik.org/pages/downloads.html](http://mapnik.org/pages/downloads.html)
    to get a precompiled binary (although not for the latest version as of this writing),
    and then see [https://pypi.python.org/pypi/mapnik2](https://pypi.python.org/pypi/mapnik2)
    to see how to get the correct set of Python bindings. If I were to install this
    today, the version of Mapnik would be 2.2 and I would install the Python bindings
    like this:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 剩下的包是Mapnik。请参阅[http://mapnik.org/pages/downloads.html](http://mapnik.org/pages/downloads.html)获取预编译的二进制文件（尽管截至本文撰写时不是最新版本），然后参阅[https://pypi.python.org/pypi/mapnik2](https://pypi.python.org/pypi/mapnik2)了解如何获取正确的Python绑定集。如果我现在安装，Mapnik的版本将是2.2，我会这样安装Python绑定：
- en: '[PRE8]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: A.2.3\. Windows
  id: totrans-46
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: A.2.3. Windows
- en: If you’re using Windows, the first thing you need is a copy of Python, because
    unlike many other operating systems, Windows doesn’t come with Python already
    installed. The easiest way to get everything working on Windows is to download
    an official copy of Python from [www.python.org](http://www.python.org). Several
    versions are available there, but as I said earlier, I’d suggest the latest one
    unless you have other requirements. If you have a 64-bit operating system, which
    is likely these days, you’ll probably want to get one of the 64-bit versions of
    Python (please note, however, that I am not aware of a 64-bit version of Mapnik
    for Windows, so you’ll need a 32-bit version if you want to use that in the last
    chapter). A 32-bit version will run on a 64-bit operating system, but the performance
    won’t be as good. A 64-bit version of Python will definitely not run on a 32-bit
    operating system, however.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 Windows，您首先需要一份 Python 的副本，因为与许多其他操作系统不同，Windows 并未预装 Python。在 Windows
    上使一切正常工作的最简单方法是下载来自 [www.python.org](http://www.python.org) 的官方 Python 版本。那里有多个版本可供选择，但如我之前所说，除非您有其他要求，否则我建议使用最新版本。如果您现在很可能有一个
    64 位操作系统，您可能希望获取 Python 的 64 位版本（请注意，然而，我不了解 Windows 上有 64 位版本的 Mapnik，所以如果您想在最后一章中使用它，您将需要一个
    32 位版本）。32 位版本可以在 64 位操作系统上运行，但性能不会很好。64 位版本的 Python 一定不能在 32 位操作系统上运行。
- en: Assuming you’re using an official Python distribution from [www.python.org](http://www.python.org),
    you can get all of the other modules used in this book, except for folium and
    mapnik, from Christoph Gohlke’s excellent resource at [www.lfd.uci.edu/~gohlke/pythonlibs](http://www.lfd.uci.edu/~gohlke/pythonlibs),
    and that’s how I’d suggest doing it. The Spectral Python module is listed in the
    Misc section at the bottom of the page, as “spectral.” When downloading packages
    from his site, be sure to download the ones corresponding to whatever version
    of Python you installed. If you installed a 64-bit version of Python, make sure
    you download the 64-bit versions of all packages. The same goes for 32-bit.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您使用的是来自 [www.python.org](http://www.python.org) 的官方 Python 发行版，您可以从 Christoph
    Gohlke 的优秀资源 [www.lfd.uci.edu/~gohlke/pythonlibs](http://www.lfd.uci.edu/~gohlke/pythonlibs)
    获取本书中使用的所有其他模块，除了 folium 和 mapnik，我建议这样做。Spectral Python 模块列在页面底部的“Misc”部分，称为“spectral”。当从他的网站下载包时，请确保下载与您安装的
    Python 版本相对应的包。如果您安装了 64 位版本的 Python，请确保下载所有包的 64 位版本。对于 32 位版本也是如此。
- en: 'You can install folium using pip:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 pip 安装 folium：
- en: '[PRE9]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'To install Mapnik, download and extract the Mapnik zip file from [http://mapnik.org/pages/downloads.html](http://mapnik.org/pages/downloads.html).
    As of this writing, the latest version with a Windows binary provided is 2.2,
    and then only for 32-bit (it won’t work with a 64-bit version of Python). After
    extracting the archive, set the following environment variables, assuming you
    extracted the files to C:\mapnik-v2.2.0:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装 Mapnik，从 [http://mapnik.org/pages/downloads.html](http://mapnik.org/pages/downloads.html)
    下载并解压 Mapnik 的 zip 文件。截至本文撰写时，提供 Windows 二进制文件的最新版本是 2.2，但仅适用于 32 位（它不能与 64 位版本的
    Python 一起使用）。解压存档后，假设您将文件提取到 C:\mapnik-v2.2.0，设置以下环境变量：
- en: Add C:\mapnik-v2.2.0\bin and C:\mapnik-v2.2.0\lib to `PATH`
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 C:\mapnik-v2.2.0\bin 和 C:\mapnik-v2.2.0\lib 添加到 `PATH`
- en: Add C:\mapnik-v2.2.0\python\2.7\site-packages to `PYTHONPATH` (you’ll need to
    create this environment variable if it doesn’t already exist)
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 C:\mapnik-v2.2.0\python\2.7\site-packages 添加到 `PYTHONPATH`（如果尚未存在，则需要创建此环境变量）
- en: 'Another option for installing GDAL is to download the latest version from [http://www.gisinternals.com/](http://www.gisinternals.com/).
    If you do this, you need to set the following environment variables, assuming
    the installation folder is C:\Program Files\GDAL (the default location for 64-bit):'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 GDAL 的另一种选项是从 [http://www.gisinternals.com/](http://www.gisinternals.com/)
    下载最新版本。如果您这样做，需要设置以下环境变量，假设安装文件夹是 C:\Program Files\GDAL（64 位版本的默认位置）：
- en: Add C:\Program Files\GDAL to `PATH`
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 C:\Program Files\GDAL 添加到 `PATH`
- en: '`GDAL_DATA` = C:\Program Files\GDAL\gdal-data'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GDAL_DATA` = C:\Program Files\GDAL\gdal-data'
- en: '`GDAL_DRIVER_PATH` = C:\Program Files\GDAL\gdalplugins'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GDAL_DRIVER_PATH` = C:\Program Files\GDAL\gdalplugins'
- en: '`PROJ_LIB` = C:\Program Files\GDAL\projlib'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PROJ_LIB` = C:\Program Files\GDAL\projlib'
- en: I’ve used this method to tell Anaconda where to find GDAL instead of using the
    version of GDAL provided by Anaconda because this one has more options precompiled.
    I’ve also used it with the new Anaconda Python suite that doesn’t include GDAL.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经使用这种方法告诉 Anaconda 在哪里可以找到 GDAL，而不是使用 Anaconda 提供的 GDAL 版本，因为这个版本有更多预编译的选项。我也用它与不包含
    GDAL 的新 Anaconda Python 套件一起使用。
- en: A.3\. Environment variables
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.3\. 环境变量
- en: Because several of these Python modules need external libraries to work, you
    need to make sure that Python can find them. This is where environment variables
    come in. For example, GDAL isn’t really a Python program, and you need the GDAL
    program itself before the GDAL Python bindings will work. The Python GDAL module
    just allows you to use the real GDAL program through Python, but you can’t do
    this if the real GDAL libraries can’t be found.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 因为这些 Python 模块需要外部库才能工作，你需要确保 Python 可以找到它们。这就是环境变量的作用所在。例如，GDAL 并非真正的 Python
    程序，在 GDAL Python 绑定工作之前，你需要 GDAL 程序本身。Python GDAL 模块只是允许你通过 Python 使用真正的 GDAL
    程序，但如果真正的 GDAL 库找不到，你将无法这样做。
- en: I’m guessing that those of you on Linux who used apt-get will have everything
    in the correct place, so you won’t have issues. I’m not sure about OS X, although
    I wouldn’t be surprised if there were problems with Mapnik, if nothing else. The
    Windows packages from Gohlke’s website tend to put the required binaries in the
    same folder as the Python bindings, so you probably won’t have problems there.
    But again, Mapnik will be an issue.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我猜那些使用 apt-get 的 Linux 用户，所有东西都会放在正确的位置，所以你们不会有问题。我不太确定 OS X，尽管如果 Mapnik 出了问题，我也不会感到惊讶。Gohlke
    网站的 Windows 软件包通常将所需的二进制文件放在与 Python 绑定相同的文件夹中，所以你可能不会有问题。但再次强调，Mapnik 仍然可能是个问题。
- en: 'If you do have problems, here are some environment variables that might help
    (if you don’t know how to set environment variables, a quick web search will tell
    you how for your operating system):'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你确实遇到问题，以下是一些可能有助于解决问题的环境变量（如果你不知道如何设置环境变量，快速的网络搜索会告诉你如何为你的操作系统设置环境变量）：
- en: '**`PATH:`** Should include the install folders for GDAL and Mapnik; for example:'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`PATH:`** 应包含 GDAL 和 Mapnik 的安装文件夹；例如：'
- en: '[PRE10]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '**`GDAL_DATA:`** Set this to the folder in the GDAL installation directory
    that contains a bunch of .csv and .wkt files. It’s usually called data or gdal-data;
    for example:'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`GDAL_DATA:`** 将此设置为 GDAL 安装目录中包含大量 .csv 和 .wkt 文件的文件夹。它通常被称为 data 或 gdal-data；例如：'
- en: '[PRE11]'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '**`GDAL_DRIVER_PATH:`** Set this to the folder containing optional GDAL drivers,
    if you installed some; for example:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`GDAL_DRIVER_PATH:`** 如果你安装了一些可选的 GDAL 驱动程序，请将此设置为包含这些驱动程序的文件夹；例如：'
- en: '[PRE12]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '**`PROJ_LIB:`** This should be set to the folder in the pyproj installation
    that contains a large collection of files, most of them without extensions (one
    will be “epsg”); for example:'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`PROJ_LIB:`** 这应该设置为 pyproj 安装目录中包含大量文件（大多数没有扩展名，其中一个将是“epsg”）的文件夹；例如：'
- en: '[PRE13]'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '**`PYTHONPATH:`** This includes folders that Python will search in when looking
    for modules. If you’ve put modules in nonstandard locations, those need to be
    specified in this variable. If you install Mapnik on Windows, for example, the
    Python module isn’t moved into a standard Python location, so you need to point
    Python to the Mapnik site-packages subfolder; for example:'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`PYTHONPATH:`** 这包括 Python 在查找模块时会搜索的文件夹。如果你将模块放在非标准位置，那么这些位置需要在这个变量中指定。例如，如果你在
    Windows 上安装了 Mapnik，Python 模块不会移动到标准的 Python 位置，所以你需要将 Python 指向 Mapnik site-packages
    子文件夹；例如：'
- en: '[PRE14]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: A.4\. Source code and data
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4\. 源代码和数据
- en: 'The source code for the examples in the book is available from the Manning
    website at [https://www.manning.com/books/geoprocessing-with-python](https://www.manning.com/books/geoprocessing-with-python)
    and from GitHub at [https://github.com/cgarrard/osgeopy-code](https://github.com/cgarrard/osgeopy-code).
    There’s also a custom Python module for the book that contains some convenience
    functions and some crude tools for viewing data. This is contained in a file called
    ospybook-latest.zip in the code download. You can use pip to install it like this
    (assuming it’s in my C:/temp folder):'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 书中示例的源代码可以从 Manning 网站 [https://www.manning.com/books/geoprocessing-with-python](https://www.manning.com/books/geoprocessing-with-python)
    和 GitHub [https://github.com/cgarrard/osgeopy-code](https://github.com/cgarrard/osgeopy-code)
    获取。还有一个用于本书的定制 Python 模块，其中包含一些便利函数和一些用于查看数据的简单工具。这些包含在代码下载中的 ospybook-latest.zip
    文件中。你可以使用 pip 如下安装它（假设它在我的 C:/temp 文件夹中）：
- en: '[PRE15]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: If you download the book’s source code, you’ll have all of the code for this
    module. Using pip puts it in a standard location so that Python can find it. You
    can download the data used in the examples from [www.manning.com/books/geoprocessing-with-python](http://www.manning.com/books/geoprocessing-with-python),
    and from [https://app.box.com/osgeopy](https://app.box.com/osgeopy).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您下载了本书的源代码，您将拥有本模块的所有代码。使用pip将其放置在标准位置，以便Python可以找到它。您可以从[www.manning.com/books/geoprocessing-with-python](http://www.manning.com/books/geoprocessing-with-python)和[https://app.box.com/osgeopy](https://app.box.com/osgeopy)下载示例中使用的数据。
- en: A.5\. Development environments
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.5. 开发环境
- en: Python comes with an interactive environment that you can use from a terminal
    window or command prompt, but most people aren’t huge fans of this (I use it a
    lot for playing with short snippets of code). Python also comes with a graphical
    interface called IDLE. This includes an interactive environment, similar to the
    command line, but with syntax highlighting and code completion, meaning you can
    start typing and then press TAB to see a list of options for completing your code,
    such as function or variable names. It also has a text editor in which you can
    edit files containing Python code and run them from inside IDLE.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: Python自带了一个交互式环境，您可以从终端窗口或命令提示符中使用它，但大多数人并不是特别喜爱这种方式（我经常用它来玩一些简短的代码片段）。Python还自带了一个名为IDLE的图形界面。这包括一个交互式环境，类似于命令行，但具有语法高亮和代码补全功能，这意味着您可以开始输入，然后按TAB键来查看完成代码的选项列表，例如函数或变量名称。它还包含一个文本编辑器，您可以在其中编辑包含Python代码的文件，并在IDLE内部运行它们。
- en: If you want something nicer, however, you have a lot of options. Two examples,
    both of which happen to come with Anaconda Python, are IPython and Spyder. IPython
    is an interactive shell, but is more functional than the default Python interactive
    environment. It has syntax highlighting, tab completion, system shell access,
    aliases in the form of “magic commands,” macros, and much more. You can learn
    about IPython at [http://ipython.org/](http://ipython.org/). Another nice feature
    of IPython is its notebook support. You can embed text along with Python code
    and output into a notebook that you can share with others or convert to another
    format such as HTML. More information about Jupyter notebooks is available at
    [http://jupyter.org/](http://jupyter.org/). Anaconda also installs Spyder, which
    is an interactive development environment (IDE) for Python. It uses IPython and
    puts a code editor, interactive shell, output windows, variable lists, and other
    information all in one package. See [https://pythonhosted.org/spyder/](https://pythonhosted.org/spyder/)
    for more information.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果您想要更好的体验，您有很多选择。以下两个例子，都恰好与Anaconda Python一起提供，分别是IPython和Spyder。IPython是一个交互式外壳，但比默认的Python交互式环境功能更强大。它具有语法高亮、Tab补全、系统外壳访问、以“魔法命令”形式存在的别名、宏等功能。您可以在[http://ipython.org/](http://ipython.org/)了解IPython的相关信息。IPython的另一个优点是其对笔记本的支持。您可以在笔记本中嵌入文本以及Python代码和输出，与他人共享或将其转换为HTML等其他格式。有关Jupyter笔记本的更多信息，请访问[http://jupyter.org/](http://jupyter.org/)。Anaconda还安装了Spyder，这是一个Python的交互式开发环境（IDE）。它使用IPython，并将代码编辑器、交互式外壳、输出窗口、变量列表和其他信息集成在一个包中。更多信息请访问[https://pythonhosted.org/spyder/](https://pythonhosted.org/spyder/)。
- en: I have to admit that I use a text editor instead of an IDE much of the time.
    This has its downsides, such as the fact that I don’t have a code editor and interactive
    shell that are linked together. With Spyder, for example, you can run a script
    from a file, and the variables set in the script are then available from the interactive
    shell. This makes it really easy to play with and explore your data. The lack
    of integration can also be a good thing, however, because my scripts always start
    with a blank slate when I run them from a text editor. More than once I’ve seen
    students get tripped up when they accidentally broke their code by deleting a
    line that set a variable, but the IDE remembered the variable and their code still
    ran. Well, it ran until they restarted the IDE, and then things no longer worked.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我必须承认，我大多数时候使用的是文本编辑器而不是IDE。这有其缺点，比如我没有一个链接在一起的代码编辑器和交互式外壳。例如，使用Spyder，您可以从文件中运行脚本，脚本中设置的变量随后在交互式外壳中可用。这使得玩数据和探索数据变得非常容易。然而，缺乏集成也可能是一件好事，因为当我从文本编辑器运行脚本时，我的脚本总是从一个空白状态开始。不止一次，我看到学生因为不小心删除了设置变量的行而弄乱代码，但IDE记得变量，他们的代码仍然可以运行。嗯，直到他们重启IDE，然后一切不再工作。
- en: Another advantage to IDEs is that they make it easier to walk through and debug
    your code. Python has a debugger called pdb built in, but you might find using
    an IDE to be easier. A debugger allows you to set breakpoints on lines of your
    code, and then if you run your script it will run until it hits the breakpoint.
    You can inspect the current values of your variables at that point, and you can
    also step through your code line by line and watch how your variables change or
    see if the code is executing the way you intended it to (in other words, you can
    check your logic). So if you do use an IDE, you’d be wise to read the help documentation
    about its debugger, or else just write some code, hit the debug button, and see
    what happens. Playing is the best way to learn, after all.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: IDE的另一个优点是它们使遍历和调试代码变得更加容易。Python内置了一个名为pdb的调试器，但您可能会发现使用IDE更简单。调试器允许您在代码的行上设置断点，然后如果您运行脚本，它将一直运行直到遇到断点。您可以在那个点检查变量的当前值，也可以逐行执行代码并观察变量如何变化，或者查看代码是否按您预期的执行方式执行（换句话说，您可以检查您的逻辑）。所以如果您确实使用IDE，明智的做法是阅读其调试器的帮助文档，或者只是编写一些代码，点击调试按钮，看看会发生什么。毕竟，玩耍是最好的学习方式。
- en: There’s a long list of Python IDEs available online at [https://wiki.python.org/moin/IntegratedDevelopmentEnvironments](https://wiki.python.org/moin/IntegratedDevelopmentEnvironments).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在线有长长的Python IDE列表，可以在[https://wiki.python.org/moin/IntegratedDevelopmentEnvironments](https://wiki.python.org/moin/IntegratedDevelopmentEnvironments)找到。
