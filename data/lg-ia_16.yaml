- en: Appendix A. Installation of additional tools and services
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录A. 安装额外的工具和服务
- en: A.1 Tool installation overview
  id: totrans-1
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 工具安装概述
- en: This book uses components and tools in addition to those necessary to run Fluentd.
    These help illustrate how Fluentd can work and integrate with other capabilities,
    such as MongoDB and Elasticsearch. Chapter 2 looks at the installation and configuration
    of Fluentd and Fluent Bit, as they are central to this book, including Fluentd’s
    dependency on Ruby and the use of the LogGenerator. If you wish to try the scenarios
    described in the book, you will have to download and install the tools described
    in this appendix.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书除了运行Fluentd所需的组件和工具外，还使用了其他组件和工具。这些有助于说明Fluentd如何工作以及如何与其他功能集成，例如MongoDB和Elasticsearch。第二章探讨了Fluentd和Fluent
    Bit的安装和配置，因为它们是本书的核心，包括Fluentd对Ruby的依赖以及LogGenerator的使用。如果您想尝试书中描述的场景，您将不得不下载并安装附录中描述的工具。
- en: The following sections provide enough details to install the tools to support
    the examples in this book. If an installation value is not stated, then the default
    value should be assumed. To get the installations to production class deployments,
    you will need to look to additional resources, many of which are in appendix E.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 以下章节提供了足够的细节，以安装支持本书中示例的工具。如果没有指定安装值，则应假定默认值。要将安装转换为生产级部署，您需要查阅额外的资源，其中许多资源可在附录E中找到。
- en: Although we have worked to ensure that we cover both Windows and Linux installations,
    there are many Linux flavors and package managers (yum, apt, etc.) associated
    with them, complicating things. To test the Linux instructions, we used Ubuntu
    18 LTE. This does mean you may need to tweak the steps for your specific Linux
    flavor. Please feel free to share those tweaks through social media or online
    Manning forums if you have access.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们已经努力确保涵盖Windows和Linux的安装，但与它们相关的Linux版本和包管理器（yum、apt等）很多，这使得事情变得复杂。为了测试Linux说明，我们使用了Ubuntu
    18 LTE。这意味着您可能需要调整特定Linux版本的操作步骤。如果您可以访问社交媒体或在线Manning论坛，请随时分享这些调整。
- en: NOTE As you probably know, Linux and Windows directory and file paths differ
    in using forward and backslashes. A number of the tools used in the book work
    with the same commands regardless of the OS. As a result, we have not provided
    the same command for both types of OS. It has been assumed that you will recognize
    when to reverse the slashes as appropriate for your platform.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：正如您可能知道的，Linux和Windows的目录和文件路径在使用正斜杠和反斜杠时有所不同。本书中使用的许多工具无论在哪个操作系统上都可以使用相同的命令。因此，我们没有为这两种类型的操作系统提供相同的命令。我们假设您将能够识别何时根据您的平台反转反斜杠。
- en: A.2 Creating environment variables and amending PATH
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.2 创建环境变量和修改PATH
- en: Setting up environmental variables and extending the `PATH` environment variable
    is a common requirement. Let’s summarize how this can be done using the setting
    of JAVA as an example. Subsequent installations will reference this section. To
    check whether the `PATH` might need amending, we can see its values with `echo
    %PATH%` on Windows and `echo $PATH` on Linux.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 设置环境变量和扩展`PATH`环境变量是一个常见的需求。让我们以设置JAVA为例来总结如何完成这项工作。后续安装将参考本节。要检查`PATH`是否可能需要修改，我们可以在Windows上使用`echo
    %PATH%`和在Linux上使用`echo $PATH`来查看其值。
- en: A.2.1 Windows
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.1 Windows
- en: 'The following needs to be done with care, as it represents a system-wide change.
    Within the following command, replace `<path addition>` with the new path—for
    example, `c:\java\bin`:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 以下操作需要谨慎进行，因为它代表系统级更改。在以下命令中，将`<path addition>`替换为新路径——例如，`c:\java\bin`：
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: For more documentation on `setx`, see [http://mng.bz/jyAP](http://mng.bz/jyAP).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 关于`setx`的更多文档，请参阅[http://mng.bz/jyAP](http://mng.bz/jyAP)。
- en: Within Windows, you can make the change through the settings UI and search for
    environment variables. This will locate the UI element used to manipulate the
    `PATH` and other environment variables. The precise steps will vary slightly between
    Windows versions. If you use this approach, any shell windows will need to be
    restarted to see the changes.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows中，您可以通过设置UI和搜索环境变量来进行更改。这将定位用于操作`PATH`和其他环境变量的UI元素。具体步骤在不同版本的Windows之间略有不同。如果您使用这种方法，任何shell窗口都需要重新启动才能看到更改。
- en: A.2.2 Linux
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.2 Linux
- en: Depending on your version of Linux, if you have a desktop UI installed, it is
    more than likely to offer a UI-based solution to updating the `PATH`. However,
    given the diversity of UIs available, there isn’t a standard answer, but it is
    a common need, so a web search should yield the answer.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的Linux版本，如果你安装了桌面UI，它很可能提供基于UI的更新`PATH`的解决方案。然而，鉴于可用的UI多样性，没有标准答案，但这是一个常见需求，因此网络搜索应该会给出答案。
- en: 'In the following command, replace `<path addition>` with the relevant path
    (e.g., `/etc/java/bin`). This will add the directory into the path for the shell
    that executed the command:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下命令中，将 `<path addition>` 替换为相关路径（例如，`/etc/java/bin`）。这将把该目录添加到执行命令的shell的路径中：
- en: '[PRE1]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: To make the change work system-wide, add the previous command into a shell script
    (e.g., `setup-for-fluentd.sh`), and save the shell script in the folder `/etc/profile.d`.
    Make sure the shell script is executable (if necessary, run `chmod a+x setup-for-fluentd.sh`).
    More information on manipulating `PATH` in Linux can be found at [https://bit.ly/SetLinuxPath](https://bit.ly/SetLinuxPath).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 要使更改在系统范围内生效，将之前的命令添加到shell脚本中（例如，`setup-for-fluentd.sh`），并将shell脚本保存在`/etc/profile.d`文件夹中。确保shell脚本可执行（如果需要，运行`chmod
    a+x setup-for-fluentd.sh`）。有关在Linux中操作`PATH`的更多信息，请参阅[https://bit.ly/SetLinuxPath](https://bit.ly/SetLinuxPath)。
- en: A.3 Java and Groovy
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.3 Java和Groovy
- en: 'The core details for these two elements are covered in chapter 2, as they are
    essentials for using the LogSimulator. If you wish to work outside of a package
    manager, retrieve the appropriate installer resources here:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这些两个元素的核心细节在第2章中有所介绍，因为它们是使用LogSimulator的基本要素。如果你希望在包管理器之外工作，可以在此处检索适当的安装资源：
- en: 'Java: [www.java.com/en/download/manual.jsp](https://www.java.com/en/download/manual.jsp)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Java: [www.java.com/en/download/manual.jsp](https://www.java.com/en/download/manual.jsp)'
- en: 'Groovy: [https://groovy-lang.org/install.html](https://groovy-lang.org/install.html)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Groovy: [https://groovy-lang.org/install.html](https://groovy-lang.org/install.html)'
- en: If you wish to use the LogSimulator as a Groovy utility, then it is recommended
    that you observe the compatibility details with Java, particularly as the Java
    release cycle is faster. Not all releases are long-term editions and therefore
    tested for compatibility.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你希望将LogSimulator用作Groovy实用工具，那么建议你注意与Java的兼容性细节，尤其是考虑到Java发布周期更快。并非所有版本都是长期版本，因此需要测试兼容性。
- en: A.4 Postman
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.4 Postman
- en: In chapter 2, we used Postman to send basic HTTP log events. Postman can be
    used in a simplified browser manner by accessing [https://identity.getpostman.com/login](https://identity.getpostman.com/login);
    it does require a free account to be set up. Alternatively, a desktop solution
    can be installed from [www.postman.com/downloads](https://www.postman.com/downloads).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在第2章中，我们使用了Postman来发送基本的HTTP日志事件。可以通过访问[https://identity.getpostman.com/login](https://identity.getpostman.com/login)以简化浏览器的方式使用Postman；它确实需要一个免费账户来设置。或者，可以从[www.postman.com/downloads](https://www.postman.com/downloads)安装桌面解决方案。
- en: A.5 Elasticsearch
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.5 Elasticsearch
- en: This section looks at a basic setup of Elasticsearch. Elasticsearch is a commonly
    used repository for performing log analytics activities, and therefore an important
    target for Fluentd. We only cover enough to allow us to work with Fluentd, so
    for a more comprehensive look at Elasticsearch, check out Elasticsearch In Action
    by Radu Gheorghe, et al. (Manning, 2015) at [https://www.manning.com/books/elasticsearch-in-action](https://www.manning.com/books/elasticsearch-in-action).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 本节探讨了Elasticsearch的基本设置。Elasticsearch是一个常用的日志分析活动存储库，因此是Fluentd的重要目标。我们只涵盖足够的内容，以便我们能够使用Fluentd，因此，要更全面地了解Elasticsearch，请参阅Radu
    Gheorghe等人撰写的《Elasticsearch In Action》（Manning，2015）一书，可在[https://www.manning.com/books/elasticsearch-in-action](https://www.manning.com/books/elasticsearch-in-action)找到。
- en: A.5.1 Core Elasticsearch installation
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.5.1 核心Elasticsearch安装
- en: The binaries can be downloaded for Elasticsearch, which can be retrieved from
    [https://www.elastic.co/downloads/elasticsearch](https://www.elastic.co/downloads/elasticsearch).
    This includes both package manager versions for the different Linux versions in
    addition to the zip and tar formats. For this, we’ll use the zip or gzip/tar,
    depending on the platform. Once downloaded, unpack the compressed file. For Windows,
    we’ll assume `c:\dev\elasticsearch` as the target and a similar path such as `/usr/bin/elasticsearch`.
    The Windows installation has a prerequisite of installing Microsoft Universal
    C Runtime Library (downloadable from [http://mng.bz/W7M1](http://mng.bz/W7M1)).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 可以下载 Elasticsearch 的二进制文件，这些文件可以从 [https://www.elastic.co/downloads/elasticsearch](https://www.elastic.co/downloads/elasticsearch)
    获取。这包括针对不同 Linux 版本的包管理器版本，以及 zip 和 tar 格式。为此，我们将使用 zip 或 gzip/tar，具体取决于平台。下载后，解压缩压缩文件。对于
    Windows，我们将假设 `c:\dev\elasticsearch` 为目标，以及类似 `/usr/bin/elasticsearch` 的路径。Windows
    安装需要安装 Microsoft Universal C Runtime Library（可从 [http://mng.bz/W7M1](http://mng.bz/W7M1)
    下载）。
- en: To make things easy, add the Elasticsearch bin folder (e.g., `C:\dev\elasticsearch-x.y.z\bin`),
    where `x.y.z` is the release number in the `PATH`, as explained in section A.2\.
    Elasticsearch provides a comprehensive set of instructions at [http://mng.bz/8l2w](http://mng.bz/8l2w)
    if you run into any issues.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 为了方便起见，将 Elasticsearch 的 bin 文件夹（例如，`C:\dev\elasticsearch-x.y.z\bin`，其中 `x.y.z`
    是版本号）添加到 `PATH` 中，如 A.2 节中所述。如果您遇到任何问题，Elasticsearch 提供了一套全面的说明，可在 [http://mng.bz/8l2w](http://mng.bz/8l2w)
    找到。
- en: 'To start Elasticsearch, we can run the shell script `elasticsearch` bat or
    bash script. Alternatively, it can be added, removed, and controlled as a service
    using the `elasticsearch-service` script with the following parameters:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动 Elasticsearch，我们可以运行 shell 脚本 `elasticsearch` bat 或 bash 脚本。或者，可以使用 `elasticsearch-service`
    脚本将其添加、移除和控制为服务，以下是一些参数：
- en: Install
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装
- en: Remove
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除
- en: Start
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动
- en: Stop
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 停止
- en: The Linux equivalent of a daemon service is `elasticsearch -d -p pid` with the
    `pid` representing a file to hold the service details. The Elasticsearch installation
    and startup can be verified using `Postman` executing a GET call on `localhost:9200`.
    A successful result will return a JSON payload reflecting the status of the Elasticsearch
    server. This is illustrated in figure A.1.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: Linux中守护进程服务的等价物是 `elasticsearch -d -p pid`，其中 `pid` 代表一个用于存储服务详细信息的文件。可以使用
    `Postman` 在 `localhost:9200` 上执行 GET 请求来验证 Elasticsearch 的安装和启动。成功的结果将返回一个 JSON
    有效负载，反映 Elasticsearch 服务器的状态。这如图 A.1 所示。
- en: '![](../Images/APPA_F01_Wilkins.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/APPA_F01_Wilkins.png)'
- en: Figure A.1 Postman verifying Elasticsearch installation
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.1 使用 Postman 验证 Elasticsearch 安装
- en: A.5.2 Elasticsearch UI installation
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.5.2 Elasticsearch UI 安装
- en: To review the contents of Elasticsearch, rather than formulating expressions
    using Postman, we can utilize one of the available UIs. For the purposes of this
    book, we found Elasticvue to be both easy to use and incredibly simple to install.
    Elasticvue can be obtained from [https://elasticvue.com](https://elasticvue.com)
    and provides installation as a browser extension for Chrome, Firefox, Microsoft
    Edge, or as a web app or Docker image. We’ve adopted the Chrome extension, as
    it requires no configuration and runs locally to accommodate localhost addressing.
    This installation requires you to follow the link from the Elasticvue website
    into the Chrome store and then click the Add to Chrome button.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看 Elasticsearch 的内容，而不是使用 Postman 构建表达式，我们可以利用可用的 UI 之一。为了本书的目的，我们发现 Elasticvue
    既有易用性，又非常简单易安装。Elasticvue 可以从 [https://elasticvue.com](https://elasticvue.com)
    获取，并提供作为 Chrome、Firefox、Microsoft Edge 的浏览器扩展、Web 应用或 Docker 镜像的安装。我们采用了 Chrome
    扩展，因为它无需配置，并且本地运行以适应 localhost 地址。此安装需要您从 Elasticvue 网站链接到 Chrome 商店，然后点击“添加到
    Chrome”按钮。
- en: Once you’ve started Elasticsearch and opened the extension, you simply need
    to confirm the server you wish to connect to (http:/./localhost:9200). Once connected,
    Elasticvue provides stats about the server, and selecting the Indices menu will
    show the indexes. This will include those we use once the examples are run.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦启动了 Elasticsearch 并打开了扩展，您只需确认要连接的服务器（http:/./localhost:9200）。一旦连接，Elasticvue
    将提供有关服务器的统计信息，选择索引菜单将显示索引。这包括在运行示例后我们将使用的那些索引。
- en: A.5.3 Fluentd plugin for Elasticsearch
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.5.3 Fluentd 插件用于 Elasticsearch
- en: The `td_agent` version of Fluentd includes the elastic search plugin `out_elasticsearch`.
    However, the unmodified version of Fluentd does not. Therefore, it is necessary
    to install the plugin manually with the command `fluent-gem install fluent -plugin-``elasticsearch.`
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: Fluentd的`td_agent`版本包含Elasticsearch插件`out_elasticsearch`。然而，未经修改的Fluentd版本并不包含它。因此，有必要使用命令`fluent-gem
    install fluent-plugin-elasticsearch`手动安装插件。
- en: A.6 Mongo database
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.6 Mongo数据库
- en: We first used MongoDB in chapter 4 as an alternative output destination. MongoDB
    is available with Enterprise and Community Editions. We will stick with a Community
    Edition, as this provides the features we need and is not subject to commercial
    licensing. In addition to the core MongoDB, we want to have the MongoDB GUI (graphical
    user interface) *Compass*, which also has variants. We will be using the free
    edition.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先在第4章中使用了MongoDB作为备选输出目标。MongoDB在企业和社区版中都可用。我们将坚持使用社区版，因为它提供了我们需要的功能，并且不受商业许可的约束。除了核心MongoDB，我们还想拥有MongoDB图形用户界面（GUI）*Compass*，它也有不同的版本。我们将使用免费版。
- en: A.6.1 Mongo DB installation
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.6.1 Mongo DB安装
- en: MongoDB provides an MSI installer for Windows and other package management tools
    for Linux and macOS (RPM, DMG), and so on. You can download the current version
    by going to [www.mongodb.com/download-center/community](http://www.mongodb.com/download-center/community).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: MongoDB为Windows提供MSI安装程序，并为Linux和macOS（RPM、DMG）等提供其他包管理工具。您可以通过访问[www.mongodb.com/download-center/community](http://www.mongodb.com/download-center/community)下载当前版本。
- en: NOTE RPM stands for *Red Hat Package Manager* and DMG stands for *disk image*.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：RPM代表*Red Hat Package Manager*，DMG代表*磁盘镜像*。
- en: We will assume the latest stable release using the MSI installer, ideal for
    setting up in development environments because of the simplicity and speed. While
    in production, you are more likely to adopt different installation strategies
    depending on your infrastructure and use case—for example, Docker in a microservices
    context or retrieving native binaries and manually crafted configuration files
    to exploit networked storage solutions such as SANs (storage area networks).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将假设使用MSI安装的最新稳定版本，因为它简单快捷，非常适合在开发环境中设置。在生产环境中，您更有可能根据您的基础设施和用例采用不同的安装策略——例如，在微服务环境中使用Docker或检索本地二进制文件和手动编写的配置文件以利用网络存储解决方案，如SANs（存储区域网络）。
- en: Depending on your OS privileges, you will likely need to run MongoDB as a local
    administrator in Windows or with root-based privileges (using `sudo`) for Linux.
    In standard OS configurations, this will undoubtedly be the case.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您的操作系统权限，您可能需要在Windows中以本地管理员身份运行MongoDB或在Linux中使用基于root的权限（使用`sudo`）。在标准的操作系统配置中，这无疑是必要的。
- en: With the MSI downloaded, start the installation. The installer is self-explanatory;
    make sure you choose the recommended *Complete* setup. A couple of further steps,
    and the installer provides the option of installing Compass; make sure this option
    is ticked.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 下载MSI后，开始安装。安装程序是自我解释的；请确保您选择推荐的*完整*设置。几个进一步的步骤后，安装程序将提供安装Compass的选项；请确保此选项被勾选。
- en: A.6.2 MongoDB configuration
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.6.2 MongoDB配置
- en: Compass should be started once the installation is complete, and it will provide
    a button to connect (if your package manager installation doesn’t begin Compass,
    please do so). Compass will display a screen with the basic setup. Click the Connect
    button, as shown in figure A.2.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，应启动Compass，它将提供一个连接按钮（如果您的包管理器安装没有启动Compass，请手动启动）。Compass将显示一个带有基本设置的屏幕。点击图A.2所示的连接按钮。
- en: '![](../Images/APPA_F02_Wilkins.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/APPA_F02_Wilkins.png)'
- en: Figure A.2 MongoDB database viewed through Compass UI tool
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.2 通过Compass UI工具查看的MongoDB数据库
- en: The final step is to establish a database to be used to store the log events.
    Click the CREATE DATABASE button, as shown in figure A.2\. This action takes us
    to a pop-up screen that will ask for a database and collection name. For our purposes,
    we will call them both `Fluentd`, as figure A.3 shows.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是建立一个用于存储日志事件的数据库。点击图A.2所示的创建数据库按钮。此操作将带我们到一个弹出窗口，该窗口将要求输入数据库和集合名称。为了我们的目的，我们将它们都称为`Fluentd`，如图A.3所示。
- en: '![](../Images/APPA_F03_Wilkins.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/APPA_F03_Wilkins.png)'
- en: Figure A.3 MongoDB Compass Create Database pop-up—the simplest way to define
    a DB for our examples
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.3 MongoDB Compass创建数据库弹出窗口——为我们的示例定义数据库的最简单方法
- en: We do not want to specify any MongoDB restrictions (Capped Collection) or customization
    for the Collection. This means ensuring the tick boxes are not set. With this,
    we have the setup for MongoDB and you can click CREATE DATABASE.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不想指定任何 MongoDB 限制（固定集合）或对集合的定制。这意味着确保复选框没有被勾选。有了这个，我们就完成了 MongoDB 的设置，你可以点击创建数据库。
- en: Once complete, you will see the addition of a Fluentd database in the list and
    the default databases provided as part of the installation (admin, config, and
    local) which can be seen if figure A1\. If you click on the Fluentd database,
    you will get a view of the database collection.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，你将在列表中看到 Fluentd 数据库的添加，以及作为安装部分提供的默认数据库（admin、config 和 local），如图 A1 所示。如果你点击
    Fluentd 数据库，你将看到数据库集合的视图。
- en: 'The last step is to add the MongoDB binary to the `PATH` variable to run some
    simple commands to quickly refresh the environment. The precise path will depend
    on the version installed and any installation configuration values changed from
    the installation defaults you may have provided. A typical location would be `C:\Program
    Files\MongoDB\Server\4.2\bin,` where `4.2` is the MongoDB version number. The
    steps to apply this change are detailed in section A.2\. Setting up the `PATH`
    on Linux will need a path to the installation location of the MongoDB binaries,
    which will be in a folder using the following form: `mongodb-linux-x86_64-4.2.0/bin`.
    The location of this folder will be more dependent on the package manager, but
    `/usr/bin` would be the convention.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是将 MongoDB 二进制文件添加到 `PATH` 变量中，以便运行一些简单的命令来快速刷新环境。确切的路径将取决于安装的版本以及任何从安装默认值中更改的安装配置值。一个典型的位置是
    `C:\Program Files\MongoDB\Server\4.2\bin,` 其中 `4.2` 是 MongoDB 的版本号。应用此更改的步骤在 A.2
    节中有详细说明。在 Linux 上设置 `PATH` 需要指向 MongoDB 二进制文件安装位置的路径，该路径将位于以下形式的文件夹中：`mongodb-linux-x86_64-4.2.0/bin`。这个文件夹的位置将更依赖于包管理器，但
    `/usr/bin` 将是常规做法。
- en: A.7 Slack
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.7 Slack
- en: Slack ([https://slack.com](https://slack.com)) cloud service has a free use
    tier, which can be used as your private Slack workspace. We would recommend you
    set up your own space for the work with Fluentd to keep things simple. It also
    means that you will not have any issues if there are restrictions in the privileges
    when setting up application tokens if you’re trying to use a work-related Slack
    workspace.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Slack ([https://slack.com](https://slack.com)) 云服务有一个免费使用层，可以用作你的私有 Slack 工作空间。我们建议你为使用
    Fluentd 的工作设置自己的空间，以保持事情简单。这也意味着，如果你尝试使用与工作相关的 Slack 工作空间，在设置应用程序令牌时遇到权限限制的问题，你将不会有任何问题。
- en: If you are new to Slack, you will find that the web UI is sufficient, but having
    the app installed on a device (phone, tablet, or desktop) gives a better experience
    ([https://slack.com/downloads](https://slack.com/downloads)), particularly for
    putting the app into the background instead of keeping another browser tab open.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你刚开始使用 Slack，你会发现网页界面已经足够，但将应用安装到设备（手机、平板或桌面）上会提供更好的体验（[https://slack.com/downloads](https://slack.com/downloads)），尤其是当需要将应用置于后台而不是保持另一个浏览器标签页打开时。
- en: The next step will be to set up your token needed by Fluentd. Using the Fluentd
    web UI option, Add Features and Functionality, select Incoming Webhooks > Bots
    > Permissions, and click Save Changes.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步将是设置 Fluentd 所需的令牌。使用 Fluentd 网页界面选项“添加功能”，选择“入站 Web 钩子”>“机器人”>“权限”，然后点击保存更改。
- en: With a personal Slack workspace, we need to use the Slack administration UI
    to configure an application to get an application token. The easiest way to do
    this is to jump directly to [https://api.slack.com/apps](https://api.slack.com/apps)
    once signed into Slack in the browser. Click the button Create New App, as shown
    in figure A.4\. We need to provide an App Name (which we recommend you also use
    for the `username` attribute in the plugin configuration) and ensure that your
    workspace is selected for the Development Slack Workspace option; then click Create
    App. The UI will prompt you to enable the webhooks. Once done using the left-hand
    menu, we need to select OAuth and Permissions. In the lower part of the screen
    is the configuration for Scopes. We specifically want to modify the Scopes for
    Bot Tokens. The list of available API scopes adds `chat:write` and `chat:write:public`
    and ensures that the `incoming-webhook` is already included. Once this is complete,
    you will be shown two tokens at the top of the page. We need to copy the Bot User
    OAuth Access Token, as it is required when working with Fluentd. Then click the
    Reinstall App button. The configuration of Slack for our output is now complete.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在个人 Slack 工作空间中，我们需要使用 Slack 管理界面来配置一个应用以获取应用令牌。最简单的方法是在浏览器中登录 Slack 后直接跳转到
    [https://api.slack.com/apps](https://api.slack.com/apps)。点击创建新应用的按钮，如图 A.4 所示。我们需要提供一个应用名称（我们建议您也将其用于插件配置中的
    `username` 属性）并确保您的工作空间已选择为“开发 Slack 工作空间”选项；然后点击创建应用。UI 将提示您启用 webhooks。一旦完成，使用左侧菜单，我们需要选择
    OAuth 和权限。屏幕底部是作用域的配置。我们特别想要修改 Bot Tokens 的作用域。可用的 API 作用域列表添加了 `chat:write` 和
    `chat:write:public`，并确保 `incoming-webhook` 已经包含在内。完成这些后，您将在页面顶部看到两个令牌。我们需要复制 Bot
    User OAuth Access Token，因为当与 Fluentd 一起工作时需要它。然后点击重新安装应用按钮。现在 Slack 的配置已经完成。
- en: '![](../Images/APPA_F04_Wilkins.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![APPA_F04_Wilkins.png](../Images/APPA_F04_Wilkins.png)'
- en: Figure A.4 Slack UI to create an “app,” and the corresponding form with required
    values highlighted
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.4 Slack UI 创建“应用”界面，以及相应的表单，其中所需值已突出显示
- en: A.8 Setting up Docker and Kubernetes
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.8 设置 Docker 和 Kubernetes
- en: This section covers the installation of Docker and Kubernetes to support chapter
    8\. This section is a little tricky because Linux OSes differ in package management
    and what is already installed. For the purposes of this section, when it comes
    to Linux, we’re going to assume Ubuntu 18.04 or later. This does mean some prerequisite
    steps are needed for Windows users.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 本节涵盖了 Docker 和 Kubernetes 的安装，以支持第 8 章。本节有点棘手，因为 Linux 操作系统在软件包管理和已安装的软件方面有所不同。为了本节的目的，当涉及到
    Linux 时，我们将假设使用 Ubuntu 18.04 或更高版本。这意味着 Windows 用户需要一些先决步骤。
- en: 'If your Linux version isn’t Ubuntu (e.g., Fedora, Debian), the steps may differ
    slightly because of the package manager, and so on. In this situation, there are
    a couple of options:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的 Linux 版本不是 Ubuntu（例如，Fedora、Debian），由于软件包管理器等原因，步骤可能会有所不同。在这种情况下，有几个选项：
- en: Set up a containerized instance of Ubuntu using tools such as Docker and connecting
    to the container, which, in many ways, will probably be like Ubuntu anyway.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Docker 等工具设置 Ubuntu 容器实例，并连接到容器，这在很多方面可能和 Ubuntu 一样。
- en: Adapt the commands yourself to work on your Linux flavor.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据您的 Linux 发行版自行调整命令。
- en: Follow the Linux version of the VirtualBox setup, which will be explained.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照虚拟机的 Linux 版本设置，这将在后面进行解释。
- en: Chapter 8 used a virtual machine for working with just Docker and also used
    minikube*,* a CNCF-supported small footprint deployment of Kubernetes for running
    the Kubernetes aspects of the chapter. By actioning the Docker-related activities
    within a virtualized environment, we don’t accidentally pollute the Kubernetes
    setup or any existing work you might have with Docker already.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 第 8 章使用了虚拟机来仅与 Docker 一起工作，并使用了 minikube*，*这是一个 CNCF 支持的小型 Kubernetes 部署，用于运行本章的
    Kubernetes 相关内容。通过在虚拟化环境中执行 Docker 相关活动，我们不会意外地污染 Kubernetes 设置或您可能已经使用 Docker
    进行的工作。
- en: Adopting minikube also means we have the same approach for local deployments
    as the book *Kubernetes in Action* by Marko Lukša (Manning Publications, 2017).
    Depending on your environment and deployment approach, minikube will use VirtualBox
    or Hyper-V if you’re operating on a Windows platform and Docker if operating on
    a native Linux environment.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 采用 minikube 也意味着我们有了与 Marko Lukša（Manning Publications，2017 年）的书籍《Kubernetes
    in Action》中相同的本地部署方法。根据您的环境和部署方法，如果您的平台是 Windows，minikube 将使用 VirtualBox 或 Hyper-V；如果是在原生
    Linux 环境中运行，则使用 Docker。
- en: A.8.1 Windows Prerequisites
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.8.1 Windows 环境准备
- en: 'The prerequisites will depend on the Windows version being run. Your choices
    are limited for Windows 10 and 11 Home or older Windows versions, and will mean
    installing and using VirtualBox as described in the next section. Windows 10 Pro
    or better offer a couple of options:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 预先条件将取决于正在运行的 Windows 版本。对于 Windows 10 和 11 家庭版或更旧的 Windows 版本，你的选择有限，这意味着需要按照下一节所述安装和使用
    VirtualBox。Windows 10 专业版或更高版本提供了一些选项：
- en: Use the Windows Hyper-V Manager and create a Ubuntu VM; Microsoft’s documentation
    to do this is available at [https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/quick-create-virtual-machine](https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/quick-create-virtual-machine).
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Windows Hyper-V 管理器创建一个 Ubuntu 虚拟机；有关如何进行此操作的 Microsoft 文档可在 [https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/quick-create-virtual-machine](https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/quick-create-virtual-machine)
    找到。
- en: If this approach is adopted, you may also need to take additional steps to ensure
    that you can copy and paste between the Windows Host and the Ubuntu VM. The solution
    to this is detailed at [https://docs.microsoft.com/en-us/troubleshoot/windows-server/virtualization/copy-paste-not-work-hyper-v-vm-vmconnect-enhanced-session-mode](https://docs.microsoft.com/en-us/troubleshoot/windows-server/virtualization/copy-paste-not-work-hyper-v-vm-vmconnect-enhanced-session-mode).
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果采用这种方法，你可能还需要采取额外的步骤以确保可以在 Windows 主机和 Ubuntu 虚拟机之间复制和粘贴。这个解决方案的详细信息可以在 [https://docs.microsoft.com/en-us/troubleshoot/windows-server/virtualization/copy-paste-not-work-hyper-v-vm-vmconnect-enhanced-session-mode](https://docs.microsoft.com/en-us/troubleshoot/windows-server/virtualization/copy-paste-not-work-hyper-v-vm-vmconnect-enhanced-session-mode)
    找到。
- en: The alternative (and my preference) is to leverage the Windows Subsystem for
    Linux (WSL) 2\. This provides a far easier way to switch between Windows native
    and Linux. The steps to set this are more complex, as you will need to install
    Docker Desktop ([www.docker.com/products/docker-desktop](http://www.docker.com/products/docker-desktop))
    and download and install several additional components from Microsoft. The steps
    for this are detailed at [https://docs.microsoft.com/en-gb/windows/wsl/install-win10](https://docs.microsoft.com/en-gb/windows/wsl/install-win10).
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 替代方案（也是我的首选）是利用 Windows Subsystem for Linux (WSL) 2。这提供了一个在 Windows 原生和 Linux
    之间切换的更简单的方法。设置这些步骤更为复杂，因为你需要安装 Docker Desktop ([www.docker.com/products/docker-desktop](http://www.docker.com/products/docker-desktop))
    并从 Microsoft 下载和安装几个额外的组件。这些步骤的详细信息可以在 [https://docs.microsoft.com/en-gb/windows/wsl/install-win10](https://docs.microsoft.com/en-gb/windows/wsl/install-win10)
    找到。
- en: When setting up WSL and the Ubuntu distribution (our recommendation), we have
    observed that when it comes to running the Docker commands, like the `docker -–version`
    to validate installation, not everything reports correctly. It has been reported
    that the configuration with Docker Desktop can be incorrect, but in the UI, it
    looks correct. In this situation, we’ve disabled the WSL2 option within the Docker
    Desktop, saved the change, and then, without Ubuntu running, gone back into the
    Docker Desktop settings and re-enabled WSL2\. Next, we started our Ubuntu instance;
    once running, things have resolved themselves.
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当设置 WSL 和 Ubuntu 发行版（我们的推荐）时，我们观察到在运行 Docker 命令，如 `docker -–version` 以验证安装时，并非所有内容都报告正确。据报道，使用
    Docker Desktop 的配置可能不正确，但在 UI 中看起来是正确的。在这种情况下，我们在 Docker Desktop 中禁用了 WSL2 选项，保存了更改，然后在没有
    Ubuntu 运行的情况下，返回 Docker Desktop 设置并重新启用了 WSL2。接下来，我们启动了我们的 Ubuntu 实例；一旦运行，问题就自行解决了。
- en: A.8.2 VirtualBox approach
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.8.2 VirtualBox 方法
- en: VirtualBox ([www.virtualbox.org](http://www.virtualbox.org)) is an Oracle-supported
    open source project to provide virtualization on desktops covering Windows, macOS,
    and Linux. It does require the host to have an AMD or Intel chipset. VirtualBox
    won’t work on Windows if you’re using Hyper-V virtualization, and it can be sensitive
    to BIOS/UEFI settings. More information on this subject can be found at [www.howtogeek.com/213795/how-to-enable-intel-vt-x-in-your-computers-bios-or-uefi-firmware](http://www.howtogeek.com/213795/how-to-enable-intel-vt-x-in-your-computers-bios-or-uefi-firmware).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: VirtualBox ([www.virtualbox.org](http://www.virtualbox.org)) 是一个 Oracle 支持的开源项目，旨在为桌面提供虚拟化，覆盖
    Windows、macOS 和 Linux。它确实需要主机具有 AMD 或 Intel 芯片组。如果你使用 Hyper-V 虚拟化，VirtualBox 在
    Windows 上将无法工作，并且它可能对 BIOS/UEFI 设置敏感。关于这个主题的更多信息可以在 [www.howtogeek.com/213795/how-to-enable-intel-vt-x-in-your-computers-bios-or-uefi-firmware](http://www.howtogeek.com/213795/how-to-enable-intel-vt-x-in-your-computers-bios-or-uefi-firmware)
    找到。
- en: The first step is to download VirtualBox from the downloads page ([www.virtualbox.org/wiki/Downloads](http://www.virtualbox.org/wiki/Downloads)),
    providing access to a Windows executable as an installer or the relevant package
    for your Linux flavor. Once downloaded, run the installation process to get set
    up. With the core of VirtualBox installed, installing the Extension Pack is recommended
    and available on the download page.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是从下载页面（[www.virtualbox.org/wiki/Downloads](http://www.virtualbox.org/wiki/Downloads)）下载VirtualBox，提供Windows可执行文件作为安装程序或适用于您Linux版本的相关软件包。下载完成后，运行安装过程以设置好。一旦安装了VirtualBox的核心，建议您安装扩展包，该扩展包可在下载页面上找到。
- en: The next step is to get the Ubuntu guest OS built. This can be done by either
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是获取Ubuntu虚拟操作系统的构建。这可以通过以下任一方式完成：
- en: Downloading a prebuilt virtual image from the VirtualBox website, although the
    image provided for Ubuntu is old. Alternatively, use a site such as OSBoxes ([www.osboxes.org/ubuntu-server/](https://www.osboxes.org/ubuntu-server/)),
    which offers prebuilt images that can then be imported into VirtualBox. Using
    this route means you need to ensure you have the credentials for a user with root
    privileges.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从VirtualBox网站下载预构建的虚拟镜像，尽管提供的Ubuntu镜像已经过时。或者，使用像OSBoxes（[www.osboxes.org/ubuntu-server/](https://www.osboxes.org/ubuntu-server/)）这样的网站，它提供可以导入到VirtualBox中的预构建镜像。使用此方法意味着您需要确保有root权限用户的凭据。
- en: Creating a guest image using VirtualBox is detailed at [http://mng.bz/Ex0O](http://mng.bz/Ex0O).
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用VirtualBox创建虚拟镜像的详细信息请参阅[http://mng.bz/Ex0O](http://mng.bz/Ex0O)。
- en: A.8.3 Ubuntu image preparation for working with Docker
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.8.3 为与Docker一起使用准备Ubuntu镜像
- en: 'With the image organized, it is recommended that you log into your Ubuntu image
    and run the following commands to ensure that the package manager is up to date:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 镜像组织好后，建议您登录到Ubuntu镜像并运行以下命令，以确保包管理器是最新的：
- en: '[PRE2]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Next, let’s verify whether or not the `curl` utility is available using the
    command
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们使用以下命令验证`curl`实用程序是否可用：
- en: '[PRE3]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'If the response comes back positively with version information, then we’re
    all done. If not, then the following command is needed to get `curl` installed:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 如果响应返回正面并带有版本信息，那么我们就完成了。如果没有，则需要以下命令来安装`curl`：
- en: '[PRE4]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Next up in our installation needs is Docker. This can be done with the shell
    command:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的安装需求中，下一个是Docker。这可以通过shell命令完成：
- en: '[PRE5]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: If you have any preferred utilities, Linux shortcuts, and so on, this is the
    best time to configure them.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有任何首选的实用程序、Linux快捷键等，现在是配置它们的最佳时机。
- en: At this stage, we recommend that you stop the VirtualBox guest VM and Export
    the VM to have a ready start state available if going back to a clean state is
    required. This means if you wish to abandon the current VM and start afresh, it
    is simply a case of stopping the VM you’re currently using, deleting it, and importing
    the exported image.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，我们建议您停止VirtualBox虚拟机并导出VM，以便在需要回到干净状态时有一个可用的起始状态。这意味着如果您想放弃当前VM并重新开始，只需停止您正在使用的VM，删除它，并导入导出的镜像即可。
- en: A.8.4 Kubernetes installation
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.8.4 Kubernetes安装
- en: This installation process isn’t needed until you start working with Kubernetes
    but will need the Docker steps to be executed in advance, as they establish some
    of the prerequisites. In terms of computing power, you’re going to need at least
    2 CPUs, 2 GB of RAM, and 20 GB of storage. The more resources you can give over
    to minikube, the better the experience.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 此安装过程在您开始使用Kubernetes之前并不需要，但需要提前执行Docker步骤，因为它们建立了一些先决条件。在计算能力方面，您至少需要2个CPU、2GB的RAM和20GB的存储空间。您能提供给minikube的资源越多，体验就越好。
- en: We had looked into the possibility of running minikube within the virtual machine,
    so the steps would be the same regardless of the host being Windows or Linux.
    But it makes for a more complicated setup for most users who are not likely to
    need it.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们曾考虑在虚拟机内部运行minikube的可能性，因此步骤将与主机是Windows还是Linux无关。但对于大多数不太可能需要它的用户来说，这会是一个更复杂的设置。
- en: Minikube on Windows
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: Windows上的Minikube
- en: If you’re going to deploy minikube onto a Windows platform, we’d recommend using
    the *Chocolatey package manager,* and this is how we’re going to deploy minikube.
    Other approaches are detailed on the minikube site at [https://minikube.sigs.k8s.io/docs/start/](https://minikube.sigs.k8s.io/docs/start/).
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您打算在Windows平台上部署minikube，我们建议使用*Chocolatey包管理器*，这就是我们将部署minikube的方式。其他方法在minikube网站上详细说明，请参阅[https://minikube.sigs.k8s.io/docs/start/](https://minikube.sigs.k8s.io/docs/start/)。
- en: NOTE Chocolatey ([https://chocolatey.org/](https://chocolatey.org/)) provides
    a Linux package manager-like experience for Windows. For applications that aren’t
    bound to a formal Microsoft installation experience (such as MSIs), it is worth
    using it to take care of things like setting environment variables, dealing with
    dependencies, and cleaning up, which is far better with Chocolatey than trying
    to remember the manual install steps to reverse. The process of installing Chocolatey
    is clearly explained at [https://chocolatey.org/install](https://chocolatey.org/install).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：Chocolatey ([https://chocolatey.org/](https://chocolatey.org/)) 为 Windows
    提供了类似 Linux 软件包管理器的体验。对于不绑定到正式 Microsoft 安装体验的应用程序（如 MSIs），使用它来处理设置环境变量、处理依赖关系和清理等工作是值得的，这比尝试记住手动安装步骤来反转要好得多。安装
    Chocolatey 的过程在 [https://chocolatey.org/install](https://chocolatey.org/install)
    上有明确的说明。
- en: The steps need to be performed using a `cmd` shell running as an administrator
    (right-clicking on the `cmd` option in the start menu to get the Administrator
    option). In the `cmd` shell, we need to install the core of minikube using the
    command
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 需要使用以管理员身份运行的 `cmd` 命令行（在开始菜单中的 `cmd` 选项上右键单击以获取管理员选项）来执行这些步骤。在 `cmd` 命令行中，我们需要使用以下命令安装
    minikube 的核心：
- en: '[PRE6]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Next, we’ll need the Kubernetes command-line interface (CLI) known as *kubectl,*
    which can be installed using the command
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要 Kubernetes 命令行界面（CLI），称为 *kubectl*，可以使用以下命令进行安装：
- en: '[PRE7]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: These two steps have established minikube into the environment. As minikube
    uses Hyper-V when used on a Windows host, you may wish to set up an additional
    virtual network within Hyper-V to avoid any network conflicts with any other virtualization
    setups that presently exist. To implement this, the Hyper-V Manager can be started
    from the Start menu or with the command line using the command
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个步骤已经将 minikube 建立到环境中。由于 minikube 在 Windows 主机上使用 Hyper-V，您可能希望在 Hyper-V
    中设置一个额外的虚拟网络，以避免与现有任何其他虚拟化设置发生网络冲突。为此，可以从开始菜单或使用命令行通过以下命令启动 Hyper-V 管理器：
- en: '[PRE8]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: We need to click the Virtual Switch Manager option on the right of the Hyper-V
    Manager UI, as shown in figure A.5.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在 Hyper-V 管理器 UI 的右侧单击虚拟交换机管理器选项，如图 A.5 所示。
- en: '![](../Images/APPA_F05_Wilkins.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![APPA_F05_Wilkins](../Images/APPA_F05_Wilkins.png)'
- en: Figure A.5 Hyper-V management UI with Virtual Switch Manager option
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.5 带有虚拟交换机管理器选项的 Hyper-V 管理UI
- en: When the Virtual Switch Manager UI is displayed, we use the New virtual network
    switch option at the top of the list of switches to create a new switch. The new
    switch settings are displayed on the right. The switch needs to be set to the
    Internal option. Once the switch is created with the name Primary Virtual Switch
    (the name is essential, as when you create the minikube cluster, we will reference
    this), the configuration should look like the details shown in figure A.6.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 当虚拟交换机管理器 UI 显示时，我们使用列表顶部的“新建虚拟网络交换机”选项来创建一个新的交换机。新的交换机设置显示在右侧。交换机需要设置为“内部”选项。一旦创建名为“主虚拟交换机”的交换机（名称至关重要，因为当您创建
    minikube 集群时，我们将引用此名称），配置应类似于图 A.6 中显示的详细信息。
- en: '![](../Images/APPA_F06_Wilkins.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![APPA_F06_Wilkins](../Images/APPA_F06_Wilkins.png)'
- en: Figure A.6 Configuration of the virtual switch
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.6 虚拟交换机配置
- en: Minikube for Linux
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 版本的 Minikube
- en: For Linux, the OS will need the appropriate Hypervisor installed, such as KVM
    (kernel-based virtual machine). As this process can change for different flavors
    of OS, we would recommend checking details with your OS documentation. The following
    describes the steps for Ubuntu, which are common to many Linux flavors.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Linux，操作系统需要安装适当的虚拟机管理程序，例如 KVM（基于内核的虚拟机）。由于这个过程可能因操作系统版本的不同而有所变化，我们建议您查阅您的操作系统文档以获取详细信息。以下描述了
    Ubuntu 的步骤，这些步骤适用于许多 Linux 版本。
- en: First, we need to check that the hardware can support virtualization; this can
    be done with the command
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要检查硬件是否支持虚拟化；这可以通过以下命令完成：
- en: '[PRE9]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: A result of 1 or greater means that the computer hardware can support virtualization.
    You may wish to perform some checks to determine whether or not the host will
    perform well by examining whether the OS is 32-bit or 64-bit and how many resources
    are available. We’re going to assume that this is not an issue. The next step
    is to install the virtualization features. These can differ slightly over Linux
    versions, but for Ubuntu 18.10 or later, the command is
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 结果为1或更大表示计算机硬件可以支持虚拟化。你可能希望通过检查操作系统是32位还是64位以及有多少资源可用来确定主机是否能够良好运行。我们将假设这不是问题。下一步是安装虚拟化功能。这些功能在Linux版本之间可能略有不同，但对于Ubuntu
    18.10或更高版本，命令是
- en: '[PRE10]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The next step is to ensure you have the privileges to use the virtualization;
    this is done with the following commands:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是确保你有使用虚拟化的权限；这是通过以下命令完成的：
- en: '[PRE11]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Each of these commands will confirm the addition of your user. The next step
    is to log in again for the changes to take effect. The installation and configuration
    can be checked with the following commands, which will indicate the ability to
    connect to the Hypervisor and access the `libvirt-sock`:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 每个这些命令都将确认你的用户添加。下一步是再次登录以使更改生效。可以使用以下命令检查安装和配置，这些命令将指示能够连接到虚拟机管理程序并访问`libvirt-sock`：
- en: '[PRE12]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: We need to ensure that the ownership and permissions for the folder `/dev/kvm`
    are correct. This is done with the command
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要确保文件夹`/dev/kvm`的所有权和权限正确。这是通过以下命令完成的
- en: '[PRE13]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Again, a login cycle is needed for the changes to take effect. The final step
    comes down to whether you want to use the Virtualization GUI; this can be installed
    with the command
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，需要登录循环才能使更改生效。最后一步取决于你是否想使用虚拟化GUI；这可以通过以下命令安装
- en: '[PRE14]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: With the virtualization successfully set up, this process is a little simpler,
    as it only uses Docker and doesn’t create an additional virtualization layer.
    The first steps are to use `curl` to retrieve the Debian package and then install
    the downloaded package with the commands
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在虚拟化成功设置之后，这个过程变得稍微简单一些，因为它只使用Docker，并且不会创建额外的虚拟化层。第一步是使用`curl`获取Debian软件包，然后使用以下命令安装下载的软件包
- en: '[PRE15]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: We need to install the `conntrack` service and ensure that `apt-transport-housings`
    packages that support connection management within the Linux OS are installed.
    This can be done with
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要安装`conntrack`服务并确保安装了支持Linux OS内部连接管理的`apt-transport-housings`软件包。这可以通过以下命令完成
- en: '[PRE16]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'It is helpful to have the Kubernetes key command-line tools in the form of
    `kubectl`. We can get this installed with the following commands:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 将Kubernetes键命令行工具以`kubectl`的形式拥有是有帮助的。我们可以使用以下命令安装它：
- en: '[PRE17]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The final step is to install minikube. This can be done with the following
    commands:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是安装minikube。这可以通过以下命令完成：
- en: '[PRE18]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'We should be able to verify the minikube installation with the following command:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该可以使用以下命令验证minikube的安装：
- en: '[PRE19]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: A.9 Support Ruby development libraries and tools
  id: totrans-141
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.9 支持Ruby开发库和工具
- en: For chapter 8, where we implement a custom plugin, we recommend installing additional
    RubyGems to help with the development. RubyGems can be added using the command
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第8章，其中我们实现自定义插件，我们建议安装额外的RubyGems以帮助开发。可以使用以下命令添加RubyGems
- en: '[PRE20]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'You just need to replace `<name of ruby gem>` with the following recommended
    additions:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 你只需要将`<name of ruby gem>`替换为以下推荐添加的内容：
- en: '`test-unit`'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`test-unit`'
- en: '`ruby-lint`'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ruby-lint`'
- en: If you want to know more about these tools, the links are provided in appendix
    E, along with all the other helpful resource information.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于这些工具的信息，链接在附录E中提供，以及所有其他有用的资源信息。
- en: A.10 Redis
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.10 Redis
- en: 'Chapter 8 used Redis to demonstrate the development of a custom plugin. It
    is one of the leading in-memory cache solutions. The installation for our requirements
    is minimal. Redis can be installed in a couple of different ways on a Linux platform:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 第8章使用了Redis来演示自定义插件的开发。它是领先的内存缓存解决方案之一。根据我们的需求，安装是最小的。Redis可以在Linux平台上以几种不同的方式安装：
- en: Follow the Redis Quick Start guide ([https://redis.io/topics/quickstart](https://redis.io/topics/quickstart)),
    which will take you through the process of downloading the source code and run
    the make tool to generate a suitable executable.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照Redis快速入门指南（[https://redis.io/topics/quickstart](https://redis.io/topics/quickstart)），它将带你通过下载源代码并运行make工具生成合适的可执行文件的过程。
- en: Or follow the steps at [https://redis.io/download](https://redis.io/download)
    to retrieve a package manager solution. In either case, you want to be using the
    latest stable release. Alternatively, Redis can be installed using the apt-get
    package manager (e.g., Ubuntu) or Snapcraft ([https://snapcraft.io/](https://snapcraft.io/)).
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或者按照 [https://redis.io/download](https://redis.io/download) 中的步骤获取包管理器解决方案。在两种情况下，您都希望使用最新的稳定版本。作为替代，Redis
    可以使用 apt-get 包管理器（例如 Ubuntu）或 Snapcraft ([https://snapcraft.io/](https://snapcraft.io/))
    安装。
- en: For Windows to adopt this approach, you’ll need to be using Windows 10 Pro with
    the WSL. There is a pure Windows port that can be retrieved via [https://github.com/ServiceStack/redis-windows](https://github.com/ServiceStack/redis-windows).
    There is also a popular community port available at [https://github.com/dmajkic/redis/downloads](https://github.com/dmajkic/redis/downloads);
    this is very dated, but it has the features for our needs. The alternative is
    to run the Docker prepackaged solution, which will make some of the steps needed
    more complex as we need to use the Redis CLI.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让 Windows 采用这种方法，您需要使用带有 WSL 的 Windows 10 Pro。可以通过 [https://github.com/ServiceStack/redis-windows](https://github.com/ServiceStack/redis-windows)
    获取一个纯 Windows 版本。还有一个流行的社区版本可在 [https://github.com/dmajkic/redis/downloads](https://github.com/dmajkic/redis/downloads)
    获取；虽然这个版本非常陈旧，但它具有满足我们需求的特性。另一种选择是运行预打包的 Docker 解决方案，这将使一些必要的步骤变得更加复杂，因为我们需要使用
    Redis CLI。
- en: Once this is downloaded and built/installed, you will need to add the location
    of the binaries to your path, as described in section A.2\. This should pick up
    both the server and the CLI.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦下载并构建/安装，您需要将二进制文件的路径添加到您的路径中，如 A.2 节中所述。这应该会同时获取服务器和 CLI。
- en: A.10.1 Redis gem
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.10.1 Redis gem
- en: In addition to the core Redis server, we need a Ruby library that can talk to
    Redis. This can be retrieved and installed very quickly using the command
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 除了核心 Redis 服务器外，我们还需要一个可以与 Redis 通信的 Ruby 库。这可以通过以下命令快速获取和安装：
- en: '[PRE21]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: This will download and install the latest stable gem into your gem library,
    ready for use. If you want to know more about this, the documentation of this
    gem can be found at [https://github.com/redis/redis-rb](https://github.com/redis/redis-rb).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这将下载并安装最新的稳定 gem 到您的 gem 库中，以便使用。如果您想了解更多信息，这个 gem 的文档可以在 [https://github.com/redis/redis-rb](https://github.com/redis/redis-rb)
    找到。
- en: A.11 Python
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.11 Python
- en: In chapter 11, to illustrate how default adaptors can be used, we used Python.
    Installation of Python depends on your OS. For Windows, the most straightforward
    approach is to download the MSI from [Python.org](https://www.python.org/). For
    Linux, the OS package manager will be the best approach for installation.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在第 11 章，为了说明如何使用默认适配器，我们使用了 Python。Python 的安装取决于您的操作系统。对于 Windows，最直接的方法是从 [Python.org](https://www.python.org/)
    下载 MSI 文件。对于 Linux，使用操作系统包管理器将是安装的最佳方法。
- en: When it comes to using Python 2.x or 3.x, many people are still using Python
    2.x, even though it has reached its end of life. We would advocate for the adoption
    of Python 3; we have checked the small apps with both versions. For Windows, we
    would recommend using the Python Switcher utility (more details at [http://mng.bz/Nx51](http://mng.bz/Nx51))
    to allow the switching between different Python versions. For Linux, the best
    option, if required, is to utilize the Alternatives facility (a Linux generic
    description can be found at [www.lifewire.com/alternatives-linux-command-4091710](http://www.lifewire.com/alternatives-linux-command-4091710),
    and an Ubuntu detailed explanation can be found at [http://mng.bz/DxDw](http://mng.bz/DxDw)).
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到使用 Python 2.x 或 3.x 时，许多人仍在使用 Python 2.x，尽管它已经达到了其生命周期的终点。我们提倡采用 Python
    3；我们已经检查了使用这两个版本的小型应用程序。对于 Windows，我们建议使用 Python Switcher 工具（更多详情请见 [http://mng.bz/Nx51](http://mng.bz/Nx51)）来允许在不同
    Python 版本之间切换。对于 Linux，如果需要，最佳选择是利用 Alternatives 功能（Linux 通用描述可以在 [www.lifewire.com/alternatives-linux-command-4091710](http://www.lifewire.com/alternatives-linux-command-4091710)
    找到，Ubuntu 的详细说明可以在 [http://mng.bz/DxDw](http://mng.bz/DxDw) 找到）。
- en: With Python installed, two additional libraries will be needed, which can be
    installed using the *Package Installer for Python* (PIP), using the commands
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装了 Python 之后，还需要两个额外的库，可以使用 *Python 的包安装器*（PIP）来安装，使用以下命令：
- en: '[PRE22]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Depending on your preferred way of viewing files, you may wish to install or
    add a plugin to your preferred IDE to make it easier to work with Python and YAML
    files.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您查看文件的首选方式，您可能希望为您的首选 IDE 安装或添加一个插件，以便更容易地处理 Python 和 YAML 文件。
- en: A.12 Vault
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.12 密钥库
- en: 'Within the book, we refer to the use of HashiCorp’s Vault. While it is not
    necessary, you might consider trying it out with Fluentd. HashiCorp has produced
    an excellent installation guide that breaks the process down to a few pretty straightforward
    steps. The details can be found at [http://mng.bz/laJ8](http://mng.bz/laJ8). As
    the steps are relatively simple, we will summarize them here, and if you need
    more information, refer back to the Vault tutorial for the dev mode setup:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们提到了 HashiCorp 的 Vault 的使用。虽然这不是必需的，但您可以考虑尝试使用 Fluentd 来使用它。HashiCorp
    制作了一份出色的安装指南，将整个过程分解为几个相当简单的步骤。详细信息可以在 [http://mng.bz/laJ8](http://mng.bz/laJ8)
    找到。由于步骤相对简单，我们将在这里总结它们，如果您需要更多信息，请参考 Vault 教程中的开发模式设置部分：
- en: Download the correct binary for your OS from [www.vaultproject.io/downloads](http://www.vaultproject.io/downloads).
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 [www.vaultproject.io/downloads](http://www.vaultproject.io/downloads) 下载适用于您的操作系统的正确二进制文件。
- en: Unpack the zip file into a suitable location (e.g., `c:\vault` or `/usr/bin/vault`).
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 zip 文件解压到合适的位置（例如，`c:\vault` 或 `/usr/bin/vault`）。
- en: Add the installation location to the `PATH` environment variable (see section
    A.2).
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将安装位置添加到 `PATH` 环境变量中（参见章节 A.2）。
- en: Run the command `vault -install-autocomplete;` this will add any command-line
    utilities it can to your environment.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行命令 `vault -install-autocomplete;` 这将添加它能够添加到您环境中的任何命令行实用程序。
- en: Start Vault server in development mode using the command `vault server-dev`.
    Note that the output near the start of the command execution will display a key
    and token on the console. You’ll need to note these, as the root token will be
    required in a minute.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用命令 `vault server-dev` 以开发模式启动 Vault 服务器。请注意，命令执行开始附近输出的内容将在控制台上显示一个密钥和令牌。您需要记住这些信息，因为根令牌将在一分钟内需要。
- en: 'Set up two environment variables using Windows set command or Linux’s export:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Windows 的 set 命令或 Linux 的 export 命令设置两个环境变量：
- en: '`VAULT_ADDR=http://127.0.0.1:8200`'
  id: totrans-172
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VAULT_ADDR=http://127.0.0.1:8200`'
- en: '`VAULT_TOKEN=<Root Token>`'
  id: totrans-173
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VAULT_TOKEN=<Root Token>`'
- en: With these steps complete, you can verify the status of the setup with the command
    vault status. Note that every time Vault is restarted, the token will change,
    and the secrets held will be empty. This behavior is occurring because Vault is
    running in development mode, where development mode is nonpersistent.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些步骤后，您可以使用命令 vault status 验证设置的状态。请注意，每次 Vault 重新启动时，令牌都会更改，并且所持有的秘密将为空。这种行为发生是因为
    Vault 正在以开发模式运行，其中开发模式是非持久的。
