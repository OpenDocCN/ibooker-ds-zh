- en: 6 Categorical data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 6 分类数据
- en: This chapter covers
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Determining the best approach to handle categorical data
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定处理分类数据的最佳方法
- en: How to avoid common mistakes when working with categorical data
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在处理分类数据时如何避免常见错误
- en: Analyzing categorical data with the right methods to investigate patterns and
    associations
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用正确的方法分析分类数据以调查模式和关联
- en: Sometimes, you may encounter data that is not numeric, and your typical analysis
    methods won’t apply. Instead, this data represents groups or categories with values
    limited to a set number of options. Customer locations, departments, and demographics
    are typical sources of such discrete values. We call this *categorical* data,
    and it is common in most datasets.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，你可能会遇到非数值型数据，你的典型分析方法不适用。相反，这种数据代表具有有限选项集合的组或类别。客户位置、部门和人口统计信息是此类离散值的典型来源。我们称这种数据为*分类*数据，它在大多数数据集中很常见。
- en: Methods suitable for numeric or continuous data are not appropriate for categorical
    data. Knowing the correct way to handle categorical data will broaden your toolbox
    and ensure you use the right tool for the job when your data is mostly categorical.
    In this chapter, we will review common tools for handling categorical data before
    diving into the project.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 适用于数值或连续数据的方 法不适用于分类数据。了解正确处理分类数据的方法将扩展你的工具箱，并确保当你的数据主要是分类数据时，你使用正确的工具来完成工作。在本章中，我们将在深入研究项目之前，回顾处理分类数据的常用工具。
- en: 6.1 Working with categorical data
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.1 处理分类数据
- en: 'One of the first tasks in any analysis is understanding your data. In a tabular
    dataset, every column of data will be one of two types: continuous or categorical.
    This distinction doesn’t apply to unstructured data, such as audio or video files,
    but most analysts work mostly with tabular data. Regardless of what the values
    in these columns represent, they will either be on a continuous scale or part
    of a discrete set. Sometimes, it is not even obvious whether a column is categorical
    if the entries are numeric. Let’s look at an example dataset.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 任何分析中的第一个任务之一是理解你的数据。在表格数据集中，每一列的数据将属于两种类型之一：连续或分类。这种区分不适用于非结构化数据，如音频或视频文件，但大多数分析师主要处理表格数据。无论这些列中的值代表什么，它们要么是连续尺度上的，要么是离散集合的一部分。有时，如果条目是数值型的，甚至可能不明显是否某一列是分类的。让我们看看一个示例数据集。
- en: Figure 6.1 shows a snapshot of a dataset used widely in the machine learning
    community for teaching purposes. The original data was created by Jánosi et al.
    (1988) and is available at [https://mng.bz/vKo7](https://mng.bz/vKo7). It is a
    medical dataset of different patient measurements, also showing whether the patients
    had coronary heart disease. The associated data problem is to use the measurements
    to predict whether a patient has coronary heart disease.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.1显示了机器学习社区用于教学目的的广泛使用数据集的快照。原始数据由Jánosi等人（1988年）创建，可在[https://mng.bz/vKo7](https://mng.bz/vKo7)找到。这是一个不同患者测量值的医学数据集，也显示了患者是否患有冠心病。相关数据问题是用测量值来预测患者是否患有冠心病。
- en: '![figure](../Images/6-1.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-1.png)'
- en: Figure 6.1 A preview of the UCI heart disease dataset
  id: totrans-11
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.1 UCI心脏病数据集的预览
- en: The first two columns, `age` and `sex`, are easier to identify as continuous
    and categorical, respectively. Even though `sex` is numeric, we treat it the same
    as if the values were text (e.g., “male” or “female”). For example, taking a numeric
    average of this column is not the same as calculating the average age of our patients
    would be. We call this type of categorical column *nominal* because there is no
    natural ordering among the categories. Other examples include color or political
    parties.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 前两列，`年龄`和`性别`，分别容易识别为连续和分类。尽管`性别`是数值型，但我们将其视为与文本值（例如，“男性”或“女性”）相同。例如，计算此列的数值平均值与计算我们患者的平均年龄并不相同。我们称这种类型的分类列为*名义*，因为类别之间没有自然的顺序。其他例子包括颜色或政党。
- en: Categorical data can also be *ordinal*, where categories do have a natural order
    but are not on a numerical scale. Examples include sizes (e.g., small, medium,
    and large) or survey responses (e.g., values between “strongly disagree” and “strongly
    agree”). For completeness, table 6.1 shows the breakdown of the different types
    of data we can encounter.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 分类数据也可以是*有序*的，其中类别确实有自然顺序，但不是数值尺度。例子包括尺寸（例如，小、中、大）或调查响应（例如，在“强烈不同意”和“强烈同意”之间的值）。为了完整性，表6.1显示了我们可以遇到的不同类型数据的分解。
- en: Table 6.1 An overview of the different types of data
  id: totrans-14
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表6.1 不同数据类型的概述
- en: '| Name | Categorical or continuous? | Properties | Example |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| 姓名 | 分类或连续？ | 属性 | 示例 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Nominal  | Categorical  | Data has discrete values, and categories are not
    ordered.  | Colors, political parties  |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| 名义 | 分类 | 数据具有离散值，类别没有顺序。 | 颜色、政党 |'
- en: '| Ordinal  | Categorical  | Data has discrete values, and categories have a
    natural order, but spacing is uneven between categories.  | T-shirt sizes (S/M/L),
    survey responses (good versus bad)  |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| 序数 | 分类 | 数据具有离散值，类别之间有自然顺序，但类别之间的间隔不均匀。 | T恤尺码（S/M/L）、调查响应（好/坏） |'
- en: '| Interval  | Continuous  | Values are spaced evenly, but zero is not an absence
    of the measurement.  | Temperature  |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| 间隔 | 连续 | 值间隔均匀，但零不是测量值的缺失。 | 温度 |'
- en: '| Ratio  | Continuous  | Values are spaced evenly, and zero means an absence
    of the measurement.  | Height, weight  |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| 比率 | 连续 | 值间隔均匀，零表示测量值的缺失。 | 身高、体重 |'
- en: Note  The word “ratio” in these definitions is not to be confused with the meaning
    where two measurements are compared to each other, like the ratio of new versus
    returning customers. In this case, “ratio” is the technical term for a continuous
    variable that starts at zero, where zero indicates an absence of that quantity.
    You can have a negative temperature but not a negative height, which is the distinction
    between “interval” and “ratio” quantities.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：在这些定义中，“比率”一词不应与两个测量值相互比较的意义混淆，比如新客户与回头客的比率。在这种情况下，“比率”是连续变量的技术术语，它从零开始，其中零表示该数量的缺失。你可以有负温度，但不能有负身高，这是“间隔”和“比率”量之间的区别。
- en: Back to the heart disease example. What about the other columns beyond `age`
    and `sex`? If we just inspect the data types when importing it, we observe that
    all columns are numeric. Figure 6.2 shows sample Python output to verify this.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 回到心脏病例子的讨论。关于`年龄`和`性别`之外的列，又是怎样的情况呢？如果我们只检查导入数据时的数据类型，我们会观察到所有列都是数值型的。图6.2展示了验证这一点的Python输出示例。
- en: '![figure](../Images/6-2.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-2.png)'
- en: Figure 6.2 The data types in the heart disease data
  id: totrans-24
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.2 心脏病数据中的数据类型
- en: From this information so far, we might conclude that because our columns are
    numeric, all of our data must be continuous. However, upon closer inspection,
    we find that a few of our columns only take a small number of discrete values.
    For example, figure 6.3 shows the breakdown of values in the `slope` column.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 根据目前的信息，我们可能会得出结论，因为我们的列是数值型的，所以所有数据都必须是连续的。然而，经过更仔细的检查，我们发现我们的一些列只取了少数几个离散值。例如，图6.3展示了`slope`列值的分布情况。
- en: '![figure](../Images/6-3.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-3.png)'
- en: Figure 6.3 Breakdown of values of the `slope` column in the heart disease dataset
  id: totrans-27
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.3 心脏病数据集中`slope`列值的分布
- en: Although this is an integer column, there are only three discrete values. These
    values correspond to whether a patient’s exercise-related tests were done on an
    upward or downward slope or none at all. This column is, therefore, categorical,
    specifically, nominal.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这是一个整数列，但只有三个离散值。这些值对应于患者的与运动相关的测试是在上升坡度、下降坡度还是完全没有进行。因此，这个列是分类的，具体来说是名义的。
- en: This might seem like a trivial finding, but if we were to treat this column
    as continuous, we might perform erroneous calculations with it, such as taking
    an average. We might get an average slope value of 0.6, but it would be meaningless.
    It does not represent a value halfway between 0, upsloping, and 1, flat, because
    the numbering is arbitrary. Changing the numbers we assign to each category would
    change this result and its interpretation.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能看起来像是一个微不足道的发现，但如果我们将这个列当作连续的来处理，我们可能会用它进行错误的计算，比如取平均值。我们可能会得到平均坡度值为0.6，但这没有意义。它并不代表介于0（上升）、1（平坦）之间的中间值，因为编号是任意的。我们分配给每个类别的数字的改变会改变这个结果及其解释。
- en: 'Real business case: Enhancing analyses with categorical data'
  id: totrans-30
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 真实业务案例：通过分类数据增强分析
- en: Used cars that go through auctions have all sorts of data entered about them,
    and a lot of them are categorical. Transmission type, fuel type, make, and model
    are all categorical values and are fundamental to understanding the used car market.
    The models I built for predicting the price of a used car or the likelihood that
    it will sell all heavily relied on these categorical values.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 参加拍卖的二手车会有各种各样的数据被输入，其中很多是分类数据。变速器类型、燃料类型、制造商和型号都是分类值，对于理解二手车市场至关重要。我建立的用于预测二手车价格或其销售可能性的模型都极大地依赖于这些分类值。
- en: Our team was also periodically asked to look at whether the color of a car had
    any effect on its value. This not only involved manipulating a categorical `color`
    column but also extracting those categories from a free text field where people
    could enter anything for the color of the car!
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的团队也定期被要求查看汽车的颜色是否对其价值有任何影响。这不仅涉及到操作一个分类的`color`列，还涉及到从人们可以输入任何颜色的自由文本字段中提取这些类别！
- en: How do we then treat categorical data? Let’s review some differences between
    methods for continuous versus categorical data.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们如何处理分类数据呢？让我们回顾一下连续数据与分类数据方法之间的一些差异。
- en: 6.1.1 Methods for handling categorical data
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.1.1 处理分类数据的方法
- en: Let’s look at some key methods for analyzing continuous and categorical data.
    When we are working with continuous data, we are specifically interested in
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看分析连续和分类数据的一些关键方法。当我们处理连续数据时，我们特别感兴趣的是
- en: The range of our values
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们值的范围
- en: The distribution of our values
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们值的分布
- en: The presence of outliers
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常值的存在
- en: Associations between continuous values
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连续值之间的关联
- en: To explore these properties, the tools we have at our disposal are
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 为了探索这些特性，我们可用的工具是
- en: Summary statistics (minimum, maximum, mean, median, etc.)
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概率统计（最小值、最大值、平均值、中位数等）
- en: Histograms and box plots to investigate range and distribution
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直方图和箱线图来调查范围和分布
- en: Scatter plots and correlation measures to investigate relationships between
    continuous variables
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 散点图和相关度量来调查连续变量之间的关系
- en: When it comes to categorical data, not all of these methods apply. Let’s revisit
    the heart disease dataset for an example where treating categorical values as
    continuous leads us astray.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到分类数据时，并不是所有这些方法都适用。让我们回顾一下心脏病数据集，以一个例子来说明将分类值视为连续值会导致我们误入歧途。
- en: One mistake we might make is to use the categorical `slope` variable in a regression
    model as if it were continuous, that is, in a scenario where we try to predict
    someone’s risk of heart disease based on the slope of the apparatus while testing
    them. We might end up with a result that would be interpreted as “for every unit
    increase in slope, the likelihood of our patient having heart disease goes up
    by 7%.” This is a valid interpretation for continuous measures like age, where
    every additional year of someone’s age increases the risk of heart disease. However,
    what does a “unit increase” in the slope value mean? Since the numbering is arbitrary,
    it doesn’t actually mean anything, and the whole problem is formulated incorrectly.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能会犯的一个错误是将分类的`slope`变量在回归模型中当作连续变量来使用，也就是说，在一个我们试图根据测试时的设备斜率来预测某人患心脏病风险的场景中。我们可能会得到一个结果，其解释为“斜率每增加一个单位，我们患者患心脏病的可能性增加7%。”这种解释对于年龄这样的连续度量是有效的，因为某人年龄每增加一年，患心脏病的风险就会增加。然而，“单位增加”的斜率值意味着什么呢？由于编号是任意的，这实际上并不代表任何意义，整个问题被错误地表述了。
- en: The correct treatment of the `slope` column for regression would be to convert
    it to binary indicator variables, each column representing one of the possible
    discrete values in a categorical column. In our slope example, we would create
    columns that represent whether each patient had a 0, 1, or 2 for their slope value,
    so we would create three columns, one for each possible slope value. The value
    of these columns would be 0 or 1, depending on whether the slope value was 0,
    1, or 2\. These binary columns would, therefore, be mutually exclusive since the
    `slope` column could only ever be one value. This is also referred to as *one-hot
    encoding*, and the results of this in our scenario are shown in figure 6.4 alongside
    the original `slope` column.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 对于回归的`slope`列的正确处理方法是将它转换为二元指示变量，每一列代表分类列中可能的离散值之一。在我们的斜率示例中，我们会创建代表每个患者的斜率值是0、1还是2的列，因此我们会创建三个列，每个可能的斜率值一个列。这些列的值将是0或1，具体取决于斜率值是0、1还是2。因此，这些二元列将是互斥的，因为`slope`列只能有一个值。这也被称为*独热编码*，在我们的场景中，这种编码的结果如图6.4所示，与原始的`slope`列并排展示。
- en: Note  You might have also seen the term “dummy variables” to describe this format.
    Technically, dummy variables are one-hot encodings with one of the columns dropped,
    but the idea is the same.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：你可能也见过“虚拟变量”这个术语来描述这种格式。技术上，虚拟变量是省略了一列的独热编码，但概念是相同的。
- en: '![figure](../Images/6-4.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-4.png)'
- en: Figure 6.4 The original slope column and three new columns created by applying
    one-hot encoding
  id: totrans-49
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.4 原始的`slope`列和通过应用独热编码创建的三个新列
- en: From this format, we can still infer the value of the `slope` column for each
    patient, but now, these columns are also valid as inputs to a regression model.
    This is just one example where there is a method specifically suited for categorical
    data. In general, for categorical data, we are interested in
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个格式中，我们仍然可以推断出每个患者的`slope`列的值，但现在，这些列也可以作为回归模型的输入。这只是有专门针对分类数据的方法的一个例子。一般来说，对于分类数据，我们感兴趣的是
- en: The frequency distribution of our values
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们值的频率分布
- en: Associations between our categorical values and other values, both continuous
    and categorical
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们分类值与其他值之间的关联，包括连续和分类值
- en: Some methods that specifically tackle these attributes for categorical data
    are
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 一些专门针对这些属性处理分类数据的方法是
- en: Grouping and aggregation
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分组和聚合
- en: Bar charts to visualize the frequency distribution
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条形图来可视化值的频率分布
- en: Pivot tables and crosstabs to compare cooccurrences of two categorical columns
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交叉表和交叉表来比较两个分类列的共现情况
- en: Histograms and box plots colored by a categorical column to show the distribution
    of a continuous variable across different categories
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过分类列着色来显示连续变量在不同类别中的分布的直方图和箱线图
- en: There are many other methods to investigate continuous and categorical data,
    some of which we will explore in more detail in the chapter. One common source
    of categorical values, which we will work with, is survey response data.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多其他方法可以研究连续和分类数据，其中一些我们将在本章中更详细地探讨。我们将要处理的一个常见的分类值来源是调查响应数据。
- en: 6.1.2 Working with survey data
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.1.2 处理调查数据
- en: 'Survey data has its own specific considerations beyond the fact that it is
    a common source of categorical columns. As we’re doing our analysis, we will need
    to consider the following:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 问卷调查数据有其特定的考虑因素，而不仅仅是它是分类列的常见来源。在我们进行分析时，我们需要考虑以下因素：
- en: Survey data is self-reported, meaning it will have special kinds of biases.
    People might choose to omit answers for personal reasons or answer untruthfully.
    Participants who answer the survey are likely the kinds of people who willingly
    answer surveys, which again means a biased sample.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 问卷调查数据是自我报告的，这意味着它会有特殊的偏见。人们可能会选择出于个人原因省略答案或提供不真实的答案。回答调查的参与者可能是那些愿意回答调查的人，这再次意味着样本是有偏见的。
- en: Data might be missing for different reasons than in other datasets. Missing
    data could indicate an unwillingness to answer specific questions, users exiting
    the survey halfway through, or questions that are unavailable to the user based
    on answers to other questions (e.g. follow-ups to elaborate if they answered yes
    to something).
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据可能因为不同于其他数据集的原因而缺失。缺失数据可能表明不愿意回答特定问题，用户在调查中途退出，或者基于其他问题的答案对用户不可用的问题（例如，如果他们回答了是，则需要进一步阐述）。
- en: Many answers will be on a Likert scale, where participants choose one of typically
    five answers ranging from “strongly disagree” to “strongly agree.” This means
    we will be working with ordinal values—categories that have a natural order but
    not a consistent numeric scale.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 许多答案将采用李克特量表，参与者从“强烈不同意”到“强烈同意”中选择五个答案中的一个。这意味着我们将处理有序值——具有自然顺序但不是一致数值尺度的类别。
- en: The takeaway is that we should not underestimate the importance of knowing our
    data, and a key aspect of that is knowing the correct type of each of our columns
    and the source of the data itself. Let’s now put this to the test in this chapter’s
    project.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到的启示是，我们不应低估了解我们数据的重要性，而了解我们每一列的正确类型以及数据本身的来源是其中的关键方面。现在让我们在本章的项目中检验这一点。
- en: '6.2 Project 5: Analyzing a survey to understand developer attitudes toward
    AI tools'
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.2 项目 5：分析调查以了解开发者对 AI 工具的态度
- en: Let’s now look at our project, in which we will analyze survey responses to
    understand how software developers are using AI tools. Most of the data is categorical
    because the source is a survey that contained lots of multiple-choice questions
    resulting in categorical values. We will look at the problem statement, the data
    dictionary, the outputs we should aim for, and what capabilities our tools need
    to tackle this problem. We will then go through a detailed plan using our results-oriented
    framework before diving into an example solution.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看我们的项目，我们将分析调查结果以了解软件开发者如何使用 AI 工具。大部分数据是分类的，因为数据来源是一个包含大量多项选择题的调查，这些题目的结果产生了分类值。我们将查看问题陈述、数据字典、我们应追求的输出以及我们的工具需要解决此问题的能力。然后我们将使用以结果为导向的框架进行详细规划，然后再深入研究一个示例解决方案。
- en: The data is available for you to attempt it yourself at [https://davidasboth.com/book-code](https://davidasboth.com/book-code).
    You will find the files with which you can attempt the project, as well as the
    example solution in the form of a Jupyter notebook.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 数据可在[https://davidasboth.com/book-code](https://davidasboth.com/book-code)处获取，你可以找到尝试项目所需的文件，以及以
    Jupyter 笔记本形式的示例解决方案。
- en: 6.2.1 Problem statement
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.2.1 问题陈述
- en: In this scenario, you are working as an analyst for AI Dev Elite, an AI startup
    focused on creating generative AI tools for people who write code, such as software
    developers. They are struggling to focus their product idea, so they have asked
    you to research how coders are currently using generative AI tools. They want
    to identify people’s pain points and find a market gap to exploit.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个场景中，你作为 AI Dev Elite 的分析师，一个专注于为编写代码的人创建生成式 AI 工具的 AI 创业公司。他们正努力聚焦产品理念，因此他们要求你研究编码者目前如何使用生成式
    AI 工具。他们希望识别人们的痛点并找到可以利用的市场空白。
- en: 'They have two hypotheses they would like you to test:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 他们有两个假设希望你来测试：
- en: New versus experienced coders are using these tools differently.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新手和经验丰富的编码者使用这些工具的方式不同。
- en: People’s opinions on the usefulness and trustworthiness of current AI tools
    depend on their experience, job role, and what specifically they use the tools
    for.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人们对于当前 AI 工具的有用性和可信度的看法取决于他们的经验、工作角色以及他们具体使用工具的目的。
- en: As much as they would love to access the queries people are typing into these
    tools directly, they have identified the Stack Overflow Developer Survey as a
    good source of information for the first iteration of this project. In this survey,
    developers disclosed details about their jobs, current tools, and usage of and
    attitudes toward generative AI tools. It is from these survey results that they
    want us to test their hypotheses.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管他们很想直接访问人们输入到这些工具中的查询，但他们已确定 Stack Overflow 开发者调查是本项目的第一轮迭代中一个很好的信息来源。在这项调查中，开发者透露了关于他们的工作、当前工具以及他们对生成式
    AI 工具的使用和态度的详细信息。他们希望我们从这些调查结果中测试他们的假设。
- en: 'NOTE  Thank you to Stack Overflow for making their Developer Survey results
    available here: [https://insights.stackoverflow.com/survey](https://insights.stackoverflow.com/survey),
    under the Open Database License (ODbL).'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：感谢 Stack Overflow 在此处提供他们的开发者调查结果：[https://insights.stackoverflow.com/survey](https://insights.stackoverflow.com/survey)，根据开放数据库许可（ODbL）。
- en: 6.2.2 Data dictionary
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.2.2 数据字典
- en: 'The data dictionary for this dataset comes in two parts, both included in the
    supplementary materials:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 该数据集的数据字典分为两部分，均包含在补充材料中：
- en: There is a question-by-question breakdown, `survey_results_schema.csv`, documenting
    which question a column contains answers for. Some questions’ answers are spread
    across multiple columns.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有一个按问题分解的列表，`survey_results_schema.csv`记录了哪些列包含答案。一些问题的答案分布在多个列中。
- en: There is also a PDF copy of the survey itself. With this, you can directly observe
    the data-generating process, which is rare.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，还有调查本身的PDF副本。有了这个，您可以直接观察数据生成过程，这是很少见的。
- en: I recommend looking at the survey to start with because that will put the columns
    in both the data dictionary and the data itself into context. Seeing the survey
    questions directly will help identify the questions of interest for the analysis.
    Then, you can use the `survey_results_schema.csv` file to find the associated
    column name(s) in the answer data. Figure 6.5 shows an excerpt of this lookup
    file.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议首先查看调查，因为这会将数据字典和数据本身中的列置于上下文中。直接查看调查问题将有助于确定分析中感兴趣的问题。然后，您可以使用`survey_results_schema.csv`文件在答案数据中找到相关的列名。图6.5显示了此查找文件的摘录。
- en: '![figure](../Images/6-5.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-5.png)'
- en: Figure 6.5 An excerpt of the mapping document used as a data dictionary
  id: totrans-81
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.5 使用作数据字典的映射文档摘录
- en: As figure 6.5 shows, the question about how many years someone has coded professionally
    is referenced in the answer data as `YearsCodePro`. This is how we identify all
    the relevant columns for analysis in the example solution.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 如图6.5所示，关于某人专业编码多少年的问题在答案数据中引用为`YearsCodePro`。这就是我们在示例解决方案中识别所有相关分析列的方法。
- en: 6.2.3 Desired outcomes
  id: totrans-83
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.2.3 预期结果
- en: Since our stakeholders have specific hypotheses, our analysis should focus on
    these. We need to do some general exploration of the data to identify missing
    values and so on, but our focus is on the specifics of the request. Our minimum
    viable answer should be evidence to support or refute these hypotheses. Therefore,
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们的利益相关者有特定的假设，我们的分析应专注于这些假设。我们需要对数据进行一些一般性的探索，以识别缺失值等，但我们的重点是请求的具体内容。我们最小可行的答案应该是支持或反驳这些假设的证据。因此，
- en: Our conclusions should include whether there is a difference in the use of AI
    across different levels of experience.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的结论应包括是否在不同经验水平上使用AI存在差异。
- en: We should communicate the factors that affect a person’s opinion of, and trust
    in, AI tools, as supported by the survey data.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该传达影响人们对AI工具看法和信任度的因素，这些因素得到了调查数据的支持。
- en: 6.2.4 Required tools
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.2.4 必需工具
- en: As with most chapters, as long as your toolkit can read, explore, and visualize
    data, it will be suitable to complete this project. In the example solution, I
    use Python, the `pandas` library for data exploration, and `matplotlib` and `seaborn`
    for visualization. I also introduce some statistical functions from the `scipy`
    library when investigating associations within the data. The checklist for this
    project is, therefore, that your tool can
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 与大多数章节一样，只要您的工具可以读取、探索和可视化数据，就可以完成这个项目。在示例解决方案中，我使用Python、`pandas`库进行数据探索，以及`matplotlib`和`seaborn`进行可视化。在调查数据中的关联性时，我还介绍了一些来自`scipy`库的统计函数。因此，这个项目的清单是，您的工具可以
- en: Load multiple datasets from CSV or Excel files
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从CSV或Excel文件中加载多个数据集
- en: Combine two or more datasets
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合并两个或多个数据集
- en: Perform basic data manipulation tasks, such as sorting, grouping, and reshaping
    data
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行基本的数据操作任务，例如排序、分组和重塑数据
- en: Create data visualizations
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建数据可视化
- en: Produce statistical analysis, specifically of categorical data, but this is
    optional
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成统计分析，特别是分类数据的统计分析，但这不是必需的
- en: 6.3 Applying the results-driven method to analyzing the developer survey
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.3 将结果驱动方法应用于分析开发者调查
- en: Let’s now see how we keep our result in focus and formulate a results-oriented
    action plan. We can follow the steps of the results-driven process to explore
    the data with our stakeholders’ requests and hypotheses in mind.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看看我们如何保持我们的结果在焦点上，并制定一个以结果为导向的行动计划。我们可以遵循以结果为导向的过程的步骤，在考虑利益相关者的请求和假设的同时探索数据。
- en: '![figure](../Images/6-unnumb-1.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-1.png)'
- en: First, we need to understand what our stakeholders want from this analysis.
    Their initial aim is to find evidence to support or contradict their initial theories,
    but their ultimate goal is to find a market gap to exploit with an AI product.
    We can keep these two aims in mind when analyzing the data to ensure our results
    are valuable.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要了解我们的利益相关者希望从这个分析中得到什么。他们的初步目标是找到证据来支持或反驳他们的初始理论，但他们的最终目标是找到一个可以利用AI产品的市场空白。在分析数据时，我们可以牢记这两个目标，以确保我们的结果有价值。
- en: '![figure](../Images/6-unnumb-2.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-2.png)'
- en: 'From our stakeholders’ request, we know there are two kinds of output to create:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 从我们的利益相关者的请求中，我们知道需要创建两种类型的输出：
- en: Evidence for whether there is a difference in the use of AI tools between developers
    of different experience levels
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同经验水平开发者之间使用AI工具差异的证据
- en: Analysis of the factors that determine someone’s score when assessing the usefulness
    and trust of AI tools
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析决定某人评估AI工具有用性和可信度时得分的因素
- en: As always, having a results-oriented focus means we can ignore certain paths
    our analysis could take if those paths do not serve us in finding an answer to
    our specific questions. In practice, this means ignoring questions in the survey
    that are not related to experience, usefulness, or trust in AI tools or a factor
    that could likely be linked to these.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 像往常一样，以结果为导向的焦点意味着我们可以忽略分析可能采取的某些路径，如果这些路径不能帮助我们找到对特定问题的答案。在实践中，这意味着忽略调查中与经验、AI工具的有用性或可信度或可能与之相关联的因素无关的问题。
- en: '![figure](../Images/6-unnumb-3.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-3.png)'
- en: In this project, the identification of the data source has been done for us.
    This is not an uncommon scenario, and as ever, we are working within the limitations
    of the available data.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个项目中，数据源的选择已经为我们完成。这种情况并不少见，而且一如既往，我们正在在可用数据的限制内工作。
- en: '![figure](../Images/6-unnumb-4.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-4.png)'
- en: There is one question to resolve at this stage, which is whether we want to
    look at surveys that happened before 2023 (currently the latest version). We have
    more than a single survey available to us, so we could choose to include past
    years as well. However, there are two arguments against doing this. First, we
    want a minimum viable answer, which means erring on the side of using less data
    to start with. Second, the use of AI tools has only really taken off in 2023,
    so earlier data may not give us more information to help our specific analysis.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，有一个问题需要解决，那就是我们是否想查看2023年之前（目前最新版本）的调查。我们有多个调查可供选择，因此我们可以选择包括过去几年的数据。然而，反对这样做有两个论点。首先，我们希望有一个最小可行答案，这意味着一开始就使用较少的数据。其次，AI工具的真正兴起是在2023年，所以早期的数据可能不会给我们提供更多有助于我们特定分析的信息。
- en: '![figure](../Images/6-unnumb-5.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-5.png)'
- en: 'Having thought about the problem before diving in, this is the part where we
    formulate the action plan for the analysis. We broadly want to take the following
    steps:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入分析问题之前思考过，这是我们制定分析行动计划的部分。我们大致想要采取以下步骤：
- en: Read the survey to ascertain the exact questions that were asked.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读调查以确定确切的问题。
- en: Examine the data dictionary and our data to see how questions relate to columns
    in the data.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查数据字典和我们的数据，看看问题如何与数据中的列相关。
- en: Explore the data by looking at the usual properties, such as missing data, outliers,
    and similar.
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过查看通常的属性，如缺失数据、异常值和类似情况来探索数据。
- en: Identify the questions and columns that relate to our research questions.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定与我们的研究问题相关的问卷问题和列。
- en: Analyze the relationship between our variables and the AI-related outcomes we
    are interested in.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析我们的变量与我们所感兴趣的AI相关结果之间的关系。
- en: Summarize our findings in light of our stakeholders’ hypotheses.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据我们的利益相关者的假设总结我们的发现。
- en: Tip  This is a project where statistical tests might be useful since we have
    specific hypotheses to investigate. Rightly or not, stakeholders like asking whether
    something is statistically significant, and this is a chance to provide them with
    an actual answer.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 提示：这是一个可能有用统计测试的项目，因为我们有特定的假设要调查。无论正确与否，利益相关者喜欢询问某事是否具有统计学意义，这是为他们提供实际答案的机会。
- en: '![figure](../Images/6-unnumb-6.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-6.png)'
- en: 'In this step, we want to present the evidence to support or refute our stakeholders’
    hypotheses, which were the following:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，我们希望展示证据来支持或反驳我们的利益相关者的假设，这些假设如下：
- en: There is a difference in the use of AI across different levels of experience.
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不同经验水平上使用AI存在差异。
- en: The factors that affect a person’s opinion of and trust in AI tools are their
    level of experience, job role, and what specifically they use the tools for.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 影响一个人对AI工具的看法和信任度的因素包括他们的经验水平、工作角色以及他们具体使用工具的目的。
- en: We specifically want to provide the most complete answer that can still be supported
    by our data. We do not want our stakeholders to take action on recommendations
    that are not based on robust findings, so unless we are confident in an association
    that we found, we should use appropriate language. Phrases such as “the data suggests”
    are generally preferred over words like “prove” or “shows.”
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们特别希望提供最完整的答案，同时仍然能够得到我们数据的支持。我们不希望我们的利益相关者根据不是基于稳健发现的建议采取行动，所以除非我们对发现的关联有信心，否则我们应该使用适当的语言。像“数据表明”这样的短语通常比“证明”或“显示”这样的词更受欢迎。
- en: '![figure](../Images/6-unnumb-7.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-unnumb-7.png)'
- en: Once we have presented our findings, a discussion with our stakeholders will
    likely lead to further questions to explore in the data, as well as additional
    data sources that would help our analysis. Our goal is to get to this point sooner
    rather than later, so we should only include the minimum amount of complexity
    in our first iteration.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们提出了我们的发现，与我们的利益相关者的讨论很可能会导致进一步探索数据的问题，以及有助于我们分析的其他数据来源。我们的目标是尽快达到这一点，而不是更晚，因此我们应该在我们的第一次迭代中只包含最小限度的复杂性。
- en: '6.4 An example solution: How do developers use AI?'
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.4 示例解决方案：开发者如何使用AI？
- en: Let’s now step through an example solution for this problem. As always, if you
    attempt the project yourself before reading this section, you will find it more
    valuable since you can compare the two solutions, with the usual caveat that our
    solutions may differ simply due to the choices we made.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来逐步分析这个问题的解决方案。一如既往，如果你在阅读这一节之前尝试了项目，你会发现它更有价值，因为你可以将两种解决方案进行比较，当然，通常的警告是，我们的解决方案可能仅仅是因为我们做出的选择而有所不同。
- en: The first order of business is to decide which columns represent the questions
    we’re interested in and, therefore, which we will focus on. Next, we will look
    at a high-level, general exploration of the data before looking at what affects
    developers’ attitudes toward AI.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 当务之急是决定哪些列代表我们感兴趣的提问，因此，我们将关注哪些。接下来，我们将在查看影响开发者对AI态度的因素之前，对数据进行一个高层次、一般性的探索。
- en: 6.4.1 Exploring categorical data
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.4.1 探索分类数据
- en: 'Usually, in an analytical project, the first step is to look at the available
    data. However, we have a rare opportunity to see the data-generating process itself
    by looking at the survey that generated our dataset. Upon scrolling through it,
    here are some initial observations:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，在一个分析项目中，第一步是查看可用的数据。然而，我们有一个难得的机会通过查看生成我们数据集的调查本身来观察数据生成过程。在滚动浏览它时，以下是初步观察：
- en: Most questions are not mandatory, which means we can expect lots of missing
    data.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数问题不是强制性的，这意味着我们可以预期会有大量缺失数据。
- en: There are questions about age, number of years of experience coding, and job
    title, which look immediately relevant.
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于年龄、编码年数和职位的问题看起来立即相关。
- en: Every question relating to a specific tool or technology includes options to
    mark them as “currently using” and “hoping to use next year,” and AI-related questions
    also include “interested in using” and “not interested in using,” as well as just
    “currently using.” Having all these options means we can cross-reference answers
    to find deeper relationships.
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个与特定工具或技术相关的问题都包括标记它们为“目前正在使用”和“希望明年使用”的选项，AI相关的问题还包括“感兴趣使用”和“不感兴趣使用”，以及仅仅是“目前正在使用”。拥有所有这些选项意味着我们可以交叉引用答案以找到更深层次的关系。
- en: The way that participants can mark how favorable and trustworthy they deem AI
    tools to be is to use a Likert scale, which is the technical name for survey questions
    that allow positive, neutral, and negative answers and that represent ordinal
    data.
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参与者可以通过使用李克特量表来标记他们认为AI工具有多有利和值得信赖，这是允许给出积极、中立和负面答案的调查问题的技术名称，并且代表有序数据。
- en: The README file states that “Free response submissions have been removed,” which
    is unfortunate as we will be missing answers to the survey question “Please describe
    how you would expect your workflow to be different, if at all, in one year as
    a result of AI advancements.” Also, we will not see answers to questions that
    have an “other” option where participants can elaborate.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: README文件中提到“自由回答提交已被移除”，这很遗憾，因为我们将会缺少对调查问题“请描述一下，如果一年后由于人工智能的进步，你的工作流程会有何不同（如果有不同的话）”的答案。此外，我们也不会看到有“其他”选项的问题的答案，参与者可以在其中进行详细说明。
- en: 'We will no doubt revisit the survey itself when we have questions about the
    data, but for now, we have enough of a sense of it to start our exploration. Let’s
    see a snapshot of how the survey questions relate to rows in our dataset:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们对数据有疑问时，我们无疑会重新审视调查本身，但就目前而言，我们对数据的了解已经足够开始我们的探索。让我们看看调查问题与我们的数据集中的行是如何关联的：
- en: '[PRE0]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The output of this code tells us that we are working with 89,000 survey responses,
    a sample of which is shown in figure 6.6.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码的输出告诉我们，我们正在处理89,000份调查回答，其中一部分在图6.6中展示。
- en: '![figure](../Images/6-6.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/6-6.png)'
- en: Figure 6.6 A snapshot of the raw survey data
  id: totrans-137
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.6 原始调查数据的快照
- en: From this snapshot, we can already see that
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个快照中，我们已能看出
- en: There will be missing values, as predicted.
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如预期的那样，会有缺失值。
- en: Most answers, even age, are categorical data represented as text.
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数答案，甚至年龄，都是以文本形式表示的分类数据。
- en: Answers to multiple-choice questions are stored as semicolon-separated strings.
    There are multiple ways this kind of data could have been stored, so it’s good
    to establish which representation we’re facing.
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多选题的答案存储为分号分隔的字符串。这种类型的数据可能有多种存储方式，因此确定我们面对的是哪种表示形式是很好的。
- en: Let’s dig into the missing data a bit more.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更深入地挖掘缺失数据。
- en: Investigating missing data
  id: totrans-143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 调查缺失数据
- en: 'Ideally, we should find that only nonmandatory questions will have missing
    answers. Is this the case? Figure 6.7 shows a snapshot of the table showing the
    number of missing values for each column:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，我们应该发现只有非必填问题会有缺失答案。这是否是情况？图6.7显示了显示每一列缺失值数量的表格快照：
- en: '[PRE1]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![figure](../Images/6-7.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/6-7.png)'
- en: Figure 6.7 Missing values for each column
  id: totrans-147
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.7 每一列的缺失值
- en: 'This shows us that, for example, the participant unique identifier and the
    age columns both have no missing data. The `MainBranch` column represents the
    answer to the survey question, “Which of the following options best describes
    you today? For the purpose of this survey, a developer is ‘someone who writes
    code.’” Age was one of the questions we were interested in and was mandatory in
    the survey. So far, so good. As it happens, we have the data dictionary in a machine-readable
    format, so we can cross-reference it with the data to see which mandatory questions
    actually have missing data. Figure 6.8 is a snapshot of the data dictionary dataset:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这表明，例如，参与者的唯一标识符和年龄列都没有缺失数据。《MainBranch》列代表调查问题的答案，“以下哪个选项最能描述你现在的状态？在本调查中，开发者是指‘编写代码的人’。”年龄是我们感兴趣的问题之一，并且在调查中是必填的。到目前为止，一切顺利。碰巧的是，我们有一个机器可读格式的数据字典，因此我们可以将其与数据交叉引用，以查看哪些必填问题实际上有缺失数据。图6.8是数据字典数据集的快照：
- en: '[PRE2]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![figure](../Images/6-8.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/6-8.png)'
- en: Figure 6.8 A snapshot of the data dictionary dataset
  id: totrans-151
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.8 数据字典数据集的快照
- en: We have a `qname` column, which should match the column names in our answer
    data. We also have the question itself, seemingly in either text or HTML form,
    and whether the question was mandatory, represented in the `force_resp` column.
    Looks like we have enough to cross-reference these files, but it’s worth checking
    our assumption about the `qname` column. A neat trick in Python is to compare
    the column names using sets.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一个`qname`列，它应该与我们的答案数据中的列名相匹配。我们还有问题本身，似乎以文本或HTML形式呈现，以及问题是否为必填项，在`force_resp`列中表示。看起来我们已经有足够的信息来交叉引用这些文件，但检查我们对`qname`列的假设是值得的。Python中的一个巧妙技巧是使用集合比较列名。
- en: Set theory does not often appear in a data science curriculum, but knowing a
    couple of tricks with sets, which are collections that only contain unique values,
    can help in specific cases like this one. We will create a set of both the column
    names in our answer data and the values in the `qname` column of the data dictionary
    dataset and see where they overlap.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 集合论在数据科学课程中并不常见，但了解一些关于集合的技巧，这些集合只包含唯一值，可以在这种特定情况下有所帮助。我们将创建一个包含我们答案数据中的列名和数据字典数据集中`qname`列的值的集合，并查看它们在哪里重叠。
- en: '[PRE3]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The output is 50, meaning there are 50 columns that appear in both sets. That’s
    promising, but we also want to know which columns don’t overlap. Subtracting one
    set from another in Python actually gives us this difference. The output of this
    code is a collection of 34 columns in our answer data that are unaccounted for
    in the data dictionary, a sample of which is shown in figure 6.9:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果是50，这意味着有50个列同时出现在两个集合中。这很有希望，但我们还想知道哪些列没有重叠。在Python中从另一个集合中减去一个集合实际上给出了这个差异。此代码的输出是我们答案数据中34个未在数据字典中考虑的列的集合，其中图6.9显示了这些列的样本。
- en: '[PRE4]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![figure](../Images/6-9.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-9.png)'
- en: Figure 6.9 A sample of columns unaccounted for in the data dictionary
  id: totrans-158
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.9 数据字典中未考虑的列样本
- en: On inspection, a lot of these look like multiple-choice options for the same
    questions. For example, the survey question, “Which parts of your development
    workflow are you currently using AI tools for, and which are you interested in
    using AI tools for over the next year? Please select all that apply,” has checkbox
    options for “Currently using,” “Interested in using,” and “Not interested in using,”
    the answers to which are recorded across the three columns. Figures 6.10 and 6.11
    show the format of the question as it appears in the survey and how the answers
    are represented in the data, respectively.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 检查时，许多这些看起来像是相同问题的多项选择题选项。例如，调查问题，“你目前正在使用AI工具开发工作流程的哪些部分，以及你接下来一年内感兴趣使用AI工具的部分有哪些？请选择所有适用的选项，”有“目前正在使用”、“感兴趣使用”和“不感兴趣使用”的复选框选项，这些答案记录在三个列中。图6.10和6.11分别显示了问题在调查中的格式以及答案在数据中的表示。
- en: '![figure](../Images/6-10.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-10.png)'
- en: Figure 6.10 The question about AI tools as it appears in the survey
  id: totrans-161
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.10 调查中出现的关于AI工具的问题
- en: For each column of checkboxes in the survey, there is a corresponding column
    in the data, the value of which is all the AI use cases that were ticked for that
    column. That is, the participant represented in the second row in figure 6.11
    said they are currently using AI tools for writing code and committing and reviewing
    code.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 调查中每个复选框列的对应数据中都有一个列，其值是该列中勾选的所有AI用例。也就是说，图6.11中第二行表示的参与者表示他们目前正在使用AI工具编写代码、提交和审查代码。
- en: '![figure](../Images/6-11.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-11.png)'
- en: Figure 6.11 The same question represented in the survey answer data
  id: totrans-164
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.11 调查答案数据中相同问题的表示
- en: 'It looks like we cannot easily match all our columns to the data dictionary,
    so another option is to look at what is mandatory according to the data dictionary
    and check whether all the related columns have any missing answer data. Figure
    6.12 shows the mandatory columns according to the data dictionary:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来我们无法轻松地将所有列与数据字典匹配，因此另一个选项是查看数据字典中强制性的内容，并检查所有相关列是否有任何缺失答案数据。图6.12显示了根据数据字典的强制性列：
- en: '[PRE5]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![figure](../Images/6-12.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-12.png)'
- en: Figure 6.12 The mandatory columns according to the data dictionary
  id: totrans-168
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.12 根据数据字典的强制性列
- en: 'At a minimum, each row in our answer data should have a value for age, highest
    education level, country, currency, and whether the participant currently uses
    AI tools in their workflow. Therefore, we should have no missing data in the `EdLevel`
    column. Is this the case? Figure 6.13 shows the output of the following code:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 至少，我们答案数据中的每一行都应该有年龄、最高教育水平、国家、货币以及参与者当前是否在其工作流程中使用AI工具的值。因此，我们不应该在`EdLevel`列中有缺失数据。是这样吗？图6.13显示了以下代码的输出：
- en: '[PRE6]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![figure](../Images/6-13.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-13.png)'
- en: Figure 6.13 Rows where the education level is missing, which should never be
    the case
  id: totrans-172
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.13 教育水平缺失的行，这种情况绝不应该发生
- en: 'Clearly, there are missing answers to mandatory questions. One suspicious element
    here is that where `EdLevel` is missing, every answer seems to be missing. Perhaps
    these are completely erroneous examples. Let’s identify how many missing columns
    there are for each participant that has a missing value for the `EdLevel` column.
    Figure 6.14 shows the output:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，强制性问题存在缺失答案。这里的一个可疑元素是，当`EdLevel`缺失时，每个答案似乎都缺失。也许这些是完全错误的例子。让我们确定对于每个在`EdLevel`列缺失的参与者，缺失的列数有多少。图6.14显示了输出：
- en: '[PRE7]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![figure](../Images/6-14.png)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-14.png)'
- en: Figure 6.14 The number of missing values per row where EdLevel is missing
  id: totrans-176
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.14 EdLevel缺失时每行的缺失值数量
- en: 'This tells us that wherever `EdLevel` is missing, there are precisely 80 missing
    values, which implies that these are survey responses with all answers missing
    and can be safely removed. Specifically, anywhere with all survey answer columns
    missing can be dropped:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 这告诉我们，无论`EdLevel`缺失在哪里，都有精确的80个缺失值，这意味着这些是所有答案都缺失的调查响应，可以安全地删除。具体来说，任何所有调查答案列都缺失的地方都可以删除：
- en: '[PRE8]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Let’s revisit our cross-referencing and look at all columns in our answer data
    that have no missing values. We can manually cross-check this against the mandatory
    questions, using figure 6.12, and see whether there are any questions whose corresponding
    columns have missing data. The following code produces the output shown in figure
    6.15:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们重新审视我们的交叉引用，并查看我们答案数据中所有没有缺失值的列。我们可以手动与强制性问题进行交叉检查，使用图6.12，并查看是否有任何问题的对应列有缺失数据。以下代码生成了图6.15所示的输出：
- en: '[PRE9]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![figure](../Images/6-15.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-15.png)'
- en: Figure 6.15 The list of columns with no missing data
  id: totrans-182
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.15 无缺失数据的列列表
- en: 'If we cross-reference this with the table in figure 6.12, it appears that the
    `Currency` column is the only mandatory question left that has missing data. Let’s
    again see if there is a pattern in the missingness. Are there the same number
    of missing values when `Currency` is missing? Figure 6.16 shows the output of
    the following code:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们将此与图6.12中的表格进行交叉引用，似乎`Currency`列是唯一剩下的强制性问题，且存在缺失数据。让我们再次看看缺失数据中是否存在某种模式。当`Currency`缺失时，是否有相同数量的缺失值？图6.16显示了以下代码的输出：
- en: '[PRE10]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![figure](../Images/6-16.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-16.png)'
- en: Figure 6.16 The number of missing values for each row where `Currency` is missing
  id: totrans-186
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.16 当`Currency`缺失时每行的缺失值数量
- en: There does not appear to be a pattern here. It suggests that although there
    are over 20,000 missing answers for the mandatory `Currency` question, this might
    be a technical error of some sort. Perhaps there could be other factors influencing
    this, such as certain countries where the currency data is missing more often.
    Either way, our initial research questions do not rely on this column, so this
    is a good place to decide not to pursue this line of inquiry further for now.
    Let’s summarize our process so far. Our first decision point was to investigate
    and drop missing values, as illustrated by figure 6.17.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 这里似乎没有明显的模式。它表明，尽管强制性`Currency`问题有超过20,000个缺失答案，这可能是某种技术错误。也许可能存在其他因素影响这一点，例如某些国家货币数据缺失更频繁。无论如何，我们的初步研究问题不依赖于这个列，所以这是一个好的地方来决定现在不再进一步追究这一线索。让我们总结到目前为止的过程。我们的第一个决策点是调查并删除缺失值，如图6.17所示。
- en: '![figure](../Images/6-17.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-17.png)'
- en: Figure 6.17 The first step of our analysis, visualized
  id: totrans-189
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.17 我们分析的第一步，可视化展示
- en: Let’s now explore our AI-related columns in a bit more detail.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们更详细地探索我们的AI相关列。
- en: 6.4.2 Analyzing categorical survey data
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.4.2 分析分类调查数据
- en: 'First, we should understand what proportion of people are even using AI tools.
    A quick chart reveals the answer to this, shown in figure 6.18:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们应该了解有多少比例的人甚至在使用AI工具。一张快速图表揭示了这一答案，如图6.18所示：
- en: '[PRE11]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![figure](../Images/6-18.png)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-18.png)'
- en: Figure 6.18 The distribution of answers to whether participants use AI tools
  id: totrans-195
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.18 参与者是否使用AI工具的回答分布
- en: There are many directions we could continue from here. We could, for example,
    find out what demographics or job roles AI tool users have versus those who don’t
    use them. However, since we are focused on our end result, we can realize that
    this is not the question we are trying to answer. We are only interested in the
    subpopulations that already use AI tools, and we are more focused on how they
    use them. Having said that, an angle we are interested in is how people view the
    trustworthiness of AI tools, so it might be interesting to see if there is a difference
    in attitudes between participants who use AI and those who don’t.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里我们可以继续探索很多方向。例如，我们可以找出AI工具用户和那些不使用它们的人的群体或工作角色。然而，由于我们专注于最终结果，我们可以意识到这并不是我们试图回答的问题。我们只对已经使用AI工具的子群体感兴趣，我们更关注他们是如何使用它们的。话虽如此，我们感兴趣的角度是人们如何看待AI工具的可信度，因此看看使用AI和不使用AI的参与者之间是否存在态度差异可能很有趣。
- en: Investigating Likert data in survey answers
  id: totrans-197
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 调查调查答案中的Likert数据
- en: For the question of how AI users feel about the tools, we first want to use
    the `AISent` column, which reveals the answer to the question shown in figure
    6.19.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 对于AI用户对工具的感受问题，我们首先想使用`AISent`列，它揭示了图6.19中显示的问题的答案。
- en: '![figure](../Images/6-19.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-19.png)'
- en: Figure 6.19 The question about AI sentiment
  id: totrans-200
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.19 关于AI情感的问题
- en: 'Now, we can look at the distribution of the `AISent` column to identify how
    people answered. Since this question is not mandatory, we expect to find some
    missing data. The following code produces the output shown in figure 6.20:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以查看`AISent`列的分布，以确定人们是如何回答的。由于这个问题不是强制的，我们预计会找到一些缺失数据。以下代码生成了图6.20所示的输出：
- en: '[PRE12]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![figure](../Images/6-20.png)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-20.png)'
- en: Figure 6.20 Breakdown of answers to the AI sentiment question
  id: totrans-204
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.20 AI情感问题的答案分解
- en: 'As expected, there are lots of missing answers. These are not bad data; by
    and large, they represent a participant who chose not to answer this question,
    so we can fill this value in with a placeholder, such as “no answer given.” Another,
    more Python-specific, step we can take is to make the data type of this column
    explicitly categorical. This will allow us to set the ordering of the values so
    that whenever they appear in a data table or a chart, they are not ordered alphabetically.
    We do all this using the `pandas` `Categorical` data type. The output of the following
    code is shown in figure 6.21:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 如预期的那样，有很多缺失答案。这些并不是坏数据；总的来说，它们代表的是选择不回答此问题的参与者，因此我们可以用占位符，如“未给出答案”来填充这个值。另一个，更具体的Python步骤是我们可以将此列的数据类型明确设置为分类类型。这将允许我们设置值的顺序，这样无论它们出现在数据表或图表中，都不会按字母顺序排序。我们使用`pandas`的`Categorical`数据类型来完成所有这些。以下代码的输出显示在图6.21中：
- en: '[PRE13]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![figure](../Images/6-21.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-21.png)'
- en: Figure 6.21 Breakdown of AI sentiment answers after converting to a `Categorical`
    data type
  id: totrans-208
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.21 将数据类型转换为`Categorical`后的AI情感答案分解
- en: One choice I had to make was what order the values appear in. It is mostly my
    personal preference that I chose to put the “no answer given” option first and
    start the remaining answers from negative to positive sentiment. However, it is
    still a choice we have to make at this point. Now, we can compare the distribution
    of these answers across the groups of AI tool users, nonusers, and aspiring users.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 我必须做出的一个选择是值的顺序。这主要是我的个人偏好，我选择将“未给出答案”选项放在第一位，并从负面到正面情感开始剩余的答案。然而，我们在这个阶段仍然必须做出这个选择。现在，我们可以比较这些答案在AI工具用户、非用户和潜在用户群体中的分布。
- en: Using pivot tables to cross-reference categorical values
  id: totrans-210
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用交叉表来交叉引用分类值
- en: 'Comparing answers about favorability across different groups of AI tool users
    involves cross-referencing two categorical variables. In `pandas`, one appropriate
    method is `crosstab`, and the following code produces the output in figure 6.22:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 比较不同群体AI工具用户对喜好程度的答案，需要交叉引用两个分类变量。在`pandas`中，一个合适的方法是`crosstab`，以下代码生成了图6.22所示的输出：
- en: '[PRE14]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '#1 Rows represent whether the participant is an AI tool user.'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 行表示参与者是否是AI工具用户。'
- en: '#2 Columns represent answers to the AI sentiment question.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 列表示对AI情感问题的答案。'
- en: '![figure](../Images/6-22.png)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-22.png)'
- en: Figure 6.22 Comparing whether AI users or non-users view AI tools favorably
  id: totrans-216
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.22 比较AI用户和非用户是否对AI工具持好感
- en: We can immediately notice that whoever said they don’t use AI did not give a
    follow-up answer either because the follow-up didn’t make sense, or the survey
    actively hid the option. We could stop here and try to make further sense of this
    table, as it’s not too large. However, I would err on the side of not staring
    at tables of numbers for very long and creating visualizations instead.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以立即注意到，那些声称不使用AI的人也没有给出后续回答，要么是因为后续回答没有意义，要么是因为调查主动隐藏了该选项。我们可以在这里停下来，并尝试进一步理解这个表格，因为它并不太大。然而，我倾向于不要长时间盯着数字表格，而是创建可视化图表。
- en: Visualizing pivot tables with heatmaps
  id: totrans-218
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用热图可视化交叉表
- en: Visualizing a table of numbers is usually a good opportunity for a heatmap,
    which the `seaborn` library can provide. I have chosen a grayscale option that
    translates to print, but any sequential colormap would do.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 使用热图可视化数字表通常是好机会，`seaborn`库可以提供这种功能。我选择了灰度选项，这对应于打印，但任何顺序色图都可以。
- en: A note on color scale terminology
  id: totrans-220
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 关于颜色尺度术语的说明
- en: When deciding on colors for a visualization and multiple colors are involved,
    we need to make a choice of colormap, that is, the range of colors present in
    the visualization. Our choices are sequential, diverging, or categorical (also
    called nominal or qualitative).
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 当决定可视化的颜色，并且涉及多种颜色时，我们需要选择一个色图，即可视化中出现的颜色范围。我们的选择有顺序、分散或分类（也称为名义或定性）。
- en: Sequential colormaps gradually change in lightness to represent a continuous
    scale. The lightness is proportional to the size of the measurement; an example
    is the greyscale colormap, such as the one used in figure 6.23\. The darker colors
    indicate more people falling into a category.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 顺序色图在亮度上逐渐变化，以表示连续的尺度。亮度与测量的大小成比例；一个例子是灰度色图，如图6.23中使用的色图。较深的颜色表示更多的人落入某个类别。
- en: Diverging colormaps include multiple colors, which gradually change in lightness
    depending on the direction. Lightness is still used to indicate strength, but
    the hue also indicates direction. An example is negative values being red and
    positives being blue, with larger values being darker red or blue, respectively.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 分散色图包括多种颜色，这些颜色根据方向逐渐改变亮度。亮度仍然用来表示强度，但色调也指示方向。一个例子是负值用红色表示，正值用蓝色表示，较大的值分别用较深的红色或蓝色表示。
- en: Categorical colormaps are used when different parts of a visualization need
    to be distinct colors. They are usually used in pie or bar charts where each slice
    or bar is a completely different color. The colors are purely for visual separation
    and are not to be interpreted numerically.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 分类色图用于需要不同部分的可视化具有不同颜色的情况。它们通常用于饼图或柱状图中，其中每个切片或柱子都是完全不同的颜色。颜色纯粹是为了视觉分离，不应进行数值解释。
- en: 'I have also anchored the minimum and maximum points at 0 and 1, respectively,
    because that is the scale we are working with. Figure 6.23 shows the generated
    heatmap:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 我还把最小和最大点分别锚定在0和1，因为我们正在使用的尺度就是这样。图6.23显示了生成的热图：
- en: '[PRE15]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![figure](../Images/6-23.png)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-23.png)'
- en: Figure 6.23 Heatmap showing the favorability of AI tools among users and aspiring
    users
  id: totrans-228
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.23 展示了用户和潜在用户对AI工具的喜好热图
- en: Note  This is a good opportunity to incorporate some programming best practices
    into our analysis. We will undoubtedly create more heatmaps like this, and the
    difference between them will be the data and the axis labels. The other options
    will remain the same, so we should create a reusable function that can generate
    a heatmap without duplicating our code. Problems of code quality are generally
    beyond the scope of these projects.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：这是一个将一些编程最佳实践纳入我们分析的好机会。我们无疑会创建更多像这样的热图，它们之间的区别将是数据和轴标签。其他选项将保持不变，因此我们应该创建一个可重用的函数，可以生成热图而无需重复代码。代码质量问题通常不在此类项目的范围内。
- en: 'The modified code to produce the heatmap from figure 6.23 looks like the following.
    We will reuse this `create_heatmap` method throughout the solution:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 生成图6.23所示热图的修改后的代码如下。我们将在整个解决方案中重用这个`create_heatmap`方法：
- en: '[PRE16]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '#1 The function only needs the data table and an optional way to make the heatmap
    square or not.'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 该函数只需要数据表，以及一个可选的方式来使热图成为正方形或不是。'
- en: '#2 We return the Figure and Axis objects to allow custom axis labels and titles.'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 我们返回Figure和Axis对象，以便自定义轴标签和标题。'
- en: Now, back to interpreting the heatmap. There seem to be a couple of noticeable
    differences between current and aspiring AI users. First, those who use AI tools
    view them more favorably than aspiring users, and those who do not yet use AI
    tools are more likely to be indifferent about them. This is perhaps not surprising.
    The lack of cynicism about the tools is interesting; it seems very few developers
    view the tools unfavorably. This might be selection bias; developers filling in
    this survey might already be more likely to have good use cases for AI tools and,
    therefore, higher opinions. Let us see how these groups fare with the question
    about the trustworthiness of the tools’ outputs.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，回到解释热图。似乎当前和潜在AI用户之间存在一些明显的差异。首先，使用AI工具的人对它们的看法比潜在用户更积极，而尚未使用AI工具的人更有可能对它们持中立态度。这可能并不令人惊讶。对工具缺乏怀疑态度是有趣的；似乎很少有开发者对工具持负面看法。这可能是一种选择偏差；填写此调查的开发者可能已经更有可能拥有良好的AI工具用例，因此有更高的评价。让我们看看这些群体在关于工具输出可信度的问题上的表现如何。
- en: 'The `AIBen` column also has missing data, so we choose to fill these in and
    create an ordered `Categorical` column again. The following code then produces
    the output in figure 6.24:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '`AIBen`列也存在缺失数据，因此我们选择填充这些数据并再次创建一个有序的`Categorical`列。然后，以下代码生成了图6.24中的输出：'
- en: '[PRE17]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![figure](../Images/6-24.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/6-24.png)'
- en: Figure 6.24 The distribution of trust in AI tools
  id: totrans-238
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.24 AI工具的可信度分布
- en: 'Although most participants viewed AI tools favorably, there is more of a spread
    when it comes to trusting their outputs. The crosstab comparing these answers
    across AI users and aspiring users is achieved with the following code and shown
    in figure 6.25:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管大多数参与者对AI工具持积极看法，但在信任它们的输出方面，分布更为广泛。通过以下代码比较AI用户和潜在用户这些答案的交叉表，如图6.25所示：
- en: '[PRE18]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '![figure](../Images/6-25.png)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/6-25.png)'
- en: Figure 6.25 Comparing AI trustworthiness across different users
  id: totrans-242
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.25比较不同用户对AI可信度的看法
- en: 'Again, we can exclude nonusers and generate a heatmap of the crosstab, as shown
    in figure 6.26:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，我们可以排除非用户，并生成交叉表的热图，如图6.26所示：
- en: '[PRE19]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '![figure](../Images/6-26.png)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/6-26.png)'
- en: Figure 6.26 Heatmap comparing AI trustworthiness across AI tool users and aspiring
    users
  id: totrans-246
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.26 比较AI工具用户和潜在用户对AI可信度的热图
- en: Active users of AI tools trust their outputs more and distrust them less, although
    very few people are comfortable saying they *highly* trust them. Aspiring users
    are more on the fence and have answered “neither trust nor distrust” more often.
    Again, it is not surprising, but it validates some basic assumptions.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: AI工具的活跃用户对其输出的信任度更高，不信任度更低，尽管很少有人愿意说他们**高度**信任它们。潜在用户则更犹豫不决，更频繁地回答“既不信任也不怀疑”。这并不令人惊讶，但验证了一些基本假设。
- en: Before moving on to investigate different aspects of the data, let’s review
    our process so far. Figure 6.27 shows the steps taken so far.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续调查数据的各个方面之前，让我们回顾一下到目前为止的过程。图6.27显示了迄今为止采取的步骤。
- en: '![figure](../Images/6-27.png)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/6-27.png)'
- en: Figure 6.27 Visualizing our analysis so far
  id: totrans-250
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.27可视化到目前为止的分析
- en: Now, it’s time to dive deeper into what people are using AI tools for.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，是时候深入探讨人们使用AI工具的目的了。
- en: Transforming categorical data into indicator variables
  id: totrans-252
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 将分类数据转换为指示变量
- en: For this portion, we will focus only on those who answered yes to the question
    about whether they use the tools. Let’s remind ourselves about the format of the
    answers to the question about which parts of the development workflow they are
    using AI tools for. Figure 6.28 shows part of the related survey question.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这部分内容，我们将只关注那些回答了他们是否使用这些工具的问题的人。让我们回顾一下关于他们使用AI工具的开发工作流程哪些部分的答案格式。图6.28显示了相关调查问题的部分内容。
- en: '![figure](../Images/6-28.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/6-28.png)'
- en: Figure 6.28 A snapshot of the survey question about what participants are using
    AI tools for
  id: totrans-255
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.28 关于参与者使用AI工具的调查问题的快照
- en: 'Figure 6.29 shows a snapshot of the column that represents the answers in semicolon-delimited
    string form. The data was selected with the following code:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.29展示了以分号分隔的字符串形式表示的答案列的快照。数据是通过以下代码选择的：
- en: '[PRE20]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '![figure](../Images/6-29.png)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/6-29.png)'
- en: Figure 6.29 A snapshot of the data used to store answers to how people use AI
    tools
  id: totrans-259
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.29存储人们如何使用AI工具的答案的数据快照
- en: This is not a format we can work with directly. Typically, we would spread the
    available answers out as indicator variables, binary columns to represent whether
    each possible answer was checked. This next step, one-hot encoding, where we convert
    this string column into indicator variables, is a purely technical one, which
    makes it a perfect place to turn to AI tools if you don’t already know how to
    do the transformation with your existing tools. Let’s see this in action.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 这不是我们可以直接处理的格式。通常，我们会将可用的答案分散为指示变量，即二元列，以表示每个可能的答案是否被选中。接下来的这一步，即独热编码，其中我们将这个字符串列转换为指示变量，是一个纯粹的技术步骤，如果你不知道如何使用现有工具进行转换，那么转向AI工具是一个完美的选择。让我们看看它是如何运作的。
- en: 'I asked ChatGPT the following:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 我向ChatGPT提出了以下问题：
- en: '*I have a pandas DataFrame that contains a column of values corresponding to
    multiple choice options from a survey question. The values are not exclusive,
    so they can contain multiple answers delimited by a semicolon. A sample value
    would be “option 1; option 2; option 3.” I want to turn this into multiple indicator
    columns, one for each value, so I should have columns called “option 1,” “option
    2,” etc., each being a binary indicator of whether that value was present in the
    original column. What is the pandas code for this?*'
  id: totrans-262
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*我有一个包含调查问题中多选题选项值的pandas DataFrame列。这些值不是互斥的，因此它们可以包含由分号分隔的多个答案。一个示例值将是“选项1;
    选项2; 选项3。”我想将这些值转换为多个指示列，每个值一个，所以我应该有名为“选项1”、“选项2”等列，每个列都是一个表示该值是否存在于原始列中的二元指示器。pandas的代码是什么？*'
- en: Its answer started with, “You can achieve this by using the `str.get_dummies`
    method in pandas to create indicator columns for each option in the multiple-choice
    column,” which turned out to be exactly the method I was after. It also suggested
    some code snippets, as shown in figure 6.30.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 它的答案以，“你可以通过使用pandas中的`str.get_dummies`方法来创建多选题列中的每个选项的指示列”开始，这正好是我要找的方法。它还提供了一些代码片段，如图6.30所示。
- en: '![figure](../Images/6-30.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-30.png)'
- en: Figure 6.30 Code snippets suggested by ChatGPT
  id: totrans-265
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.30 ChatGPT建议的代码片段
- en: 'One tweak I had to make was changing the separator from “; ” to “;” because
    our data doesn’t have the trailing space between the semicolon-delimited values.
    Other than that, the `str.get_dummies` function is exactly what we are after.
    The following code generates the indicator columns shown in figure 6.31:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 我必须进行的一个调整是将分隔符从“; ”改为“;”，因为我们的数据中分号分隔的值之间没有尾随空格。除此之外，`str.get_dummies`函数正是我们所需要的。以下代码生成了图6.31中显示的指示列：
- en: '[PRE21]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![figure](../Images/6-31.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-31.png)'
- en: Figure 6.31 A snapshot of the newly created indicator columns
  id: totrans-269
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.31 新创建的指示列快照
- en: To reiterate, each column represents one of the checkbox rows from figure 6.28,
    and a value of 1 means that the checkbox was ticked under the “Currently using”
    column. If we were to repeat this for “Interested in using” and “Not interested
    in using,” we would end up with three times as many indicator variables, essentially
    one column per checkbox under that question.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，每一列代表图6.28中的其中一个复选框行，而值为1表示在“目前正在使用”列下勾选了复选框。如果我们对“感兴趣使用”和“不感兴趣使用”也进行重复操作，我们将得到三倍的指示变量，实际上每个问题下每个复选框对应一个列。
- en: 'Experience might tell us that when separating delimited strings, we could end
    up with trailing spaces in column names, so let’s check and fix that:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 经验可能会告诉我们，在分隔定界字符串时，我们可能会在列名中出现尾随空格，所以让我们检查并修复这个问题：
- en: '[PRE22]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'One benefit of indicator variables is that the sum of each column represents
    the number of people who ticked a particular checkbox, and the mean of each column
    represents the percentage. Let’s look at the percentage of participants who checked
    each option. Remember, this is now only AI users telling us what they currently
    use AI tools for. The following code produces the chart in figure 6.32:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 指示变量的一个好处是，每一列的总和代表勾选特定复选框的人数，每一列的平均值代表百分比。让我们看看检查了每个选项的参与者的百分比。记住，现在这仅仅是告诉我们他们目前使用AI工具做什么的AI用户。以下代码生成了图6.32中的图表：
- en: '[PRE23]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![figure](../Images/6-32.png)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-32.png)'
- en: Figure 6.32 Bar chart showing what percentage of AI users ticked each “Currently
    using” option
  id: totrans-276
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.32 显示了使用AI工具的百分比的用户勾选了每个“目前正在使用”选项的条形图
- en: 'Most developers are using AI tools to write and debug code, but there are other
    tangential use cases that are popular, such as testing code, project planning,
    and even documenting code. We can add the indicator columns to our original data
    and keep a filtered dataset of only AI users for use in the remaining investigations.
    Figure 6.33 shows a snapshot of the data after the following manipulations:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数开发者都在使用AI工具编写和调试代码，但还有其他相关的用例也很受欢迎，例如测试代码、项目规划和甚至编写代码文档。我们可以将指标列添加到我们的原始数据中，并保留一个仅包含AI用户的过滤数据集，用于剩余的调查。图6.33显示了以下操作后的数据快照：
- en: '[PRE24]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '#1 concat will, by default, match on indices.'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 `concat`默认会根据索引进行匹配。'
- en: '![figure](../Images/6-33.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-33.png)'
- en: Figure 6.33 A snapshot of the combined data of AI users
  id: totrans-281
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.33 AI用户合并数据的快照
- en: Let’s see how favorable and trustworthy participants judge AI to be depending
    on what they use the tools for. Our “start at the end” philosophy is helpful here.
    We want a table where each row is one of the AI tool use cases (e.g., “Writing
    code”), and each column is one of the favorability options. Each cell then represents
    the count, or better, the percentage, of those who said they use AI tools for
    a particular purpose and answered a particular way for favorability. This should
    show us whether there is a difference in opinion across different users’ profiles.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看参与者根据他们使用工具的目的来判断AI的喜好和可信度。我们的“从结果开始”的哲学在这里很有帮助。我们想要一个表格，其中每一行是AI工具的一个用例（例如，“编写代码”），每一列是喜好选项之一。每个单元格代表那些声称他们使用AI工具进行特定目的并针对喜好给出特定回答的人的数量，或者更好的是，百分比。这应该会显示不同用户之间是否存在意见差异。
- en: Converting data to a long format for easier analysis
  id: totrans-283
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 将数据转换为长格式以便于分析
- en: 'Cross-referencing the different use cases with favorability opinions requires
    some reshaping of our data. This is another use case for an AI tool to tell us
    how to do this, but this time, let’s attempt it ourselves and compare notes with
    our AI tool afterward. What we want is data in a long format, which will make
    it easier to generate the right crosstab. See chapter 3 for more details on wide
    versus long data in the context of data modeling. The following code creates a
    long-form version of one of the multiple-choice options cross-referenced against
    favorability, and the output is shown in figure 6.34:'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 将不同的使用案例与喜好意见进行交叉引用需要对我们的数据进行一些调整。这又是一个AI工具告诉我们如何做到这一点的用例，但这次，让我们自己尝试一下，并在之后与我们的AI工具比较笔记。我们想要的是长格式的数据，这将使生成正确的交叉表变得更容易。有关数据建模中宽数据与长数据的更多详细信息，请参阅第3章。以下代码创建了一个与喜好交叉引用的多个选择题之一的长格式版本，输出显示在图6.34中：
- en: '[PRE25]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![figure](../Images/6-34.png)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-34.png)'
- en: Figure 6.34 AI tools favorability across people who use them for collaboration
  id: totrans-287
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.34 使用AI工具进行协作的人的喜好
- en: 'If we had this dataset for every option combined into one long table, we could
    reshape it into the crosstab we need. Let’s loop through the options and build
    up this long table:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们为每个选项都有一个组合成一个长表的数据库，我们就可以将其重塑为我们需要的交叉表。让我们遍历选项并构建这个长表：
- en: '[PRE26]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '#1 Loops through all indicators'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 遍历所有指标'
- en: '#2 Generates the aggregation similar to figure 6.32 and tracks in a list'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 生成类似于图6.32的聚合，并在列表中跟踪'
- en: '#3 Combines the list into one DataFrame'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: '#3 将列表合并到一个DataFrame中'
- en: 'The output is `(70,` `3)`, meaning we have 70 rows now, corresponding to the
    10 indicator columns with seven possible favorability answers each. We can now
    use this data to create a crosstab of percentages, as planned. The following code
    does this and produces the crosstab in figure 6.35:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 输出是`(70,` `3)`，这意味着我们现在有70行，对应于10个指标列，每个列有7个可能的喜好答案。现在我们可以使用这些数据创建一个百分比交叉表，正如计划的那样。以下代码执行此操作，并在图6.35中生成交叉表：
- en: '[PRE27]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '![figure](../Images/6-35.png)'
  id: totrans-295
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-35.png)'
- en: Figure 6.35 Crosstab of favorability vs. different AI tool use cases
  id: totrans-296
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.35 喜好与不同AI工具用例的交叉表
- en: 'This is now a table that is hard to interpret in its current form, so let’s
    generate a heatmap of this, too. The final heatmap is shown in figure 6.36:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是一个难以理解的表格，所以让我们也生成一个热图。最终的热图显示在图6.36中：
- en: '[PRE28]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '![figure](../Images/6-36.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-36.png)'
- en: Figure 6.36 Heatmap comparing favorability across different AI tool use cases
  id: totrans-300
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.36 比较不同AI工具用例的喜好热图
- en: 'This is much easier to interpret than the raw data table. There does not seem
    to be a big difference across use cases, but there are some observations we can
    make:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 这比直接的数据表更容易解释。在使用案例之间似乎没有太大的差异，但我们还是可以得出一些观察结果：
- en: Even when we break the data out into use cases, AI users generally view their
    tools favorably.
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 即使我们将数据分解到使用案例中，AI用户通常也会对他们的工具持积极态度。
- en: Those who use the tools for project planning, collaborating, committing and
    reviewing code, and deployment and monitoring grade the AI tools as “very favorable”
    the most.
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 那些使用这些工具进行项目规划、协作、提交和审查代码以及部署和监控的人，将AI工具评为“非常有利”的最多。
- en: The biggest “indifferent” category is “Other,” but we do not have the underlying
    data, so we cannot investigate this further.
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最大的“中立”类别是“其他”，但我们没有底层数据，因此无法进一步调查这一点。
- en: Before moving on, let’s briefly look at how ChatGPT suggested we solve this
    particular technical challenge.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，让我们简要地看看ChatGPT是如何建议我们解决这个特定的技术挑战的。
- en: Using AI tools to improve our analysis
  id: totrans-306
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用AI工具改进我们的分析
- en: Whenever something takes two or three discrete steps, I get the feeling that
    there is an easier way to do it, which is where AI tools can help improve our
    technical knowledge.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 每当某件事需要两到三个离散步骤时，我都会觉得有更简单的方法来做，这正是AI工具可以帮助我们提高技术知识的地方。
- en: Note  It is important to remember that AI tools like ChatGPT are just that—tools.
    This makes them interchangeable over time. You might not use this specific AI
    tool, and there will undoubtedly be more advanced ones created in the future.
    Feel free to substitute all references to ChatGPT with whichever AI tool you prefer.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：重要的是要记住，像ChatGPT这样的AI工具只是工具。这使得它们随着时间的推移可以互换。你可能不会使用这个特定的AI工具，而且无疑未来还会创造出更先进的工具。你可以自由地将所有关于ChatGPT的引用替换为你偏好的任何AI工具。
- en: In this case, ChatGPT’s answer was very similar; it suggested building up a
    DataFrame by looping through the options. Figure 6.37 shows ChatGPT’s answer.
    I did not integrate its suggestion or dig into the specific differences between
    it and my code; all I was looking for was whether there was a single `pandas`
    method I overlooked for doing this transformation. As it turns out, AI tools can
    do no better than looping through the different options.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，ChatGPT的回答非常相似；它建议通过遍历选项来构建DataFrame。图6.37显示了ChatGPT的回答。我没有整合它的建议或深入挖掘它与我的代码之间的具体差异；我所寻找的只是是否有一个我忽视的单一`pandas`方法来完成这种转换。结果证明，AI工具在遍历不同选项方面做得并不比这更好。
- en: '![figure](../Images/6-37.png)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-37.png)'
- en: Figure 6.37 ChatGPT’s approach to creating the options vs. favorability crosstab
  id: totrans-311
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.37 ChatGPT创建选项与喜好交叉表的方法
- en: 'Previously, the question about the trustworthiness of the output generated
    more interesting findings, so let us repeat this latest crosstab and heatmap process
    for the `AIBen` column as well. The following code generates the long-format data,
    a snapshot of which is shown in figure 6.38:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 之前，关于输出可信度的问题产生了更有趣的发现，因此让我们也为`AIBen`列重复最新的交叉表和热力图过程。以下代码生成长格式数据，其快照显示在图6.38中：
- en: '[PRE29]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '![figure](../Images/6-38.png)'
  id: totrans-314
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-38.png)'
- en: Figure 6.38 A snapshot of long-format data comparing AI tool use case options
    with trustworthiness
  id: totrans-315
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.38 比较AI工具使用案例选项与可信度的长格式数据快照
- en: 'This generates 60 rows of data, 10 use cases with six trustworthiness options
    each. Now, we can create the crosstab and heatmap generated by the following code.
    The final heatmap is shown in figure 6.39:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了60行数据，10个使用案例，每个案例有六个可信度选项。现在，我们可以创建以下代码生成的交叉表和热力图。最终的热力图显示在图6.39中：
- en: '[PRE30]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '![figure](../Images/6-39.png)'
  id: totrans-318
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-39.png)'
- en: Figure 6.39 Heatmap of different AI tool use cases vs. view on trustworthiness
  id: totrans-319
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.39 不同AI工具使用案例与可信度视图的热力图
- en: From this heatmap, it appears that most users “somewhat trust” the AI tools’
    outputs, with not much difference across use cases. Having the data about the
    “Other” category would be interesting, as that is where the trustworthiness varies
    the most.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个热力图中可以看出，大多数用户“有些信任”AI工具的输出，在使用案例之间没有太大的差异。关于“其他”类别的数据将会很有趣，因为那里的可信度变化最大。
- en: Note  One limitation of using this multiple-choice data is we are double-counting
    anyone who said they use AI for more than one purpose. It’s not a deal breaker
    for our analysis, but it’s good to be aware that our categories are not mutually
    exclusive.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：使用这种多选题数据的一个局限性是我们对那些表示他们使用AI超过一个目的的人进行了双重计数。这对我们的分析来说不是决定性的，但了解我们的类别不是互斥的总是好的。
- en: Before continuing our analysis, let’s recap the steps so far, including the
    latest one, where we investigated opinions of AI across different use cases. Our
    latest steps are shown in figure 6.40.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续我们的分析之前，让我们回顾一下到目前为止的步骤，包括最新的一个，我们调查了不同用例中关于AI的意见。我们最新的步骤如图6.40所示。
- en: '![figure](../Images/6-40.png)'
  id: totrans-323
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-40.png)'
- en: Figure 6.40 Steps taken in the analysis up to investigating AI tool usage
  id: totrans-324
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.40 分析过程中至调查AI工具使用所采取的步骤
- en: Next, we are interested in the profiles of AI tool users (e.g., what job titles
    they have).
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们对AI工具用户的个人资料（例如，他们有什么工作头衔）感兴趣。
- en: Recategorizing data for clarity
  id: totrans-326
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 为了清晰起见，重新分类数据
- en: 'There are further nuances we can explore in this data. People who said they
    use AI to write code may use it for very different purposes. Despite the name,
    the survey was not just completed by developers. Other job roles are also included,
    so it’s worth exploring whether attitudes toward AI vary along those roles. First,
    let’s look at the distribution of values in the `DevType` column, but only for
    people who are using AI tools. The results produced by the following code are
    shown in figure 6.41:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些数据中，我们可以进一步探索更多的细微差别。声称使用AI编写代码的人可能出于非常不同的目的使用它。尽管名称如此，这份调查并不仅仅由开发者完成。还包括其他工作角色，因此值得探讨这些角色对AI的态度是否有所不同。首先，让我们看看使用AI工具的人`DevType`列中的值分布，但仅限于这些人。以下代码产生的结果如图6.41所示：
- en: '[PRE31]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '![figure](../Images/6-41.png)'
  id: totrans-329
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-41.png)'
- en: Figure 6.41 Distribution of job roles among participants who use AI tools
  id: totrans-330
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.41 使用AI工具的参与者中工作角色的分布
- en: 'As we’d expect, most participants are developers with a long tail of other
    jobs ranging from data roles to research, marketing, and even management. For
    our purposes, we can probably combine a few of these categories, at least for
    our first iteration. To identify if different job roles use AI differently, we
    can get away with grouping all developers into a single group to start with. Let’s
    see which of these groups could go into our larger “developer” group. The result
    of the following code is shown in figure 6.42:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所预期，大多数参与者是开发者，其他工作从数据角色到研究、营销，甚至管理，形成了一个长长的尾巴。为了我们的目的，我们可能可以将这些类别中的几个合并在一起，至少在第一次迭代中是这样。为了确定不同的工作角色是否以不同的方式使用AI，我们可以一开始就将所有开发者归入一个单独的组。让我们看看哪些组可以归入我们更大的“开发者”组。以下代码的结果如图6.42所示：
- en: '[PRE32]'
  id: totrans-332
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '![figure](../Images/6-42.png)'
  id: totrans-333
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-42.png)'
- en: Figure 6.42 Distribution of different developer roles among AI tool users
  id: totrans-334
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.42 AI工具用户中不同开发者角色的分布
- en: 'Most of these roles can go in a single “Developer” category, except the last
    two: “Developer experience” and “Developer advocate.” These are developer-adjacent
    roles with more of a people focus with responsibilities such as creating and engaging
    with communities and not necessarily writing a lot of code. Let’s group the rest
    of the developer roles into a single category. Specifically, in Python, we can
    create a dictionary that matches each of these roles with the “new” category they
    should belong to:'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数这些角色可以归入一个单独的“开发者”类别，除了最后两个：“开发者经验”和“开发者倡导者”。这些是与开发者相邻的角色，更侧重于人际交往，例如创建和参与社区，而不一定需要编写大量代码。让我们将其他开发者角色归入一个单独的类别。具体来说，在Python中，我们可以创建一个字典，将每个角色与它们应属于的“新”类别匹配：
- en: '[PRE33]'
  id: totrans-336
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Looking at our list in figure 6.42 again, we see a few engineering roles that
    could be grouped together, so let’s also do that. The following code produces
    the output in figure 6.43:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 再次查看图6.42中的列表，我们看到一些可以归为一组的工程角色，因此我们也这样做。以下代码产生的输出如图6.43所示：
- en: '[PRE34]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '![figure](../Images/6-43.png)'
  id: totrans-339
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-43.png)'
- en: Figure 6.43 Distribution of engineering roles among AI tool users
  id: totrans-340
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.43 AI工具用户中工程角色的分布
- en: 'All of these roles can go under one “Engineer” category for now, except the
    management one. Let’s make that change and then look at the distribution of our
    new, more compact job category column. The following code produces the result
    in figure 6.44:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，所有这些角色都可以归入一个“工程师”类别，除了管理类。让我们进行这个更改，然后查看我们新的、更紧凑的工作类别列的分布。以下代码产生的结果如图6.44所示：
- en: '[PRE35]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '![figure](../Images/6-44.png)'
  id: totrans-343
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-44.png)'
- en: Figure 6.44 Distribution of a new `job_category` column
  id: totrans-344
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.44 新的`job_category`列的分布
- en: 'Now, we can create a crosstab similar to those we created previously, this
    time, to cross-reference job roles with AI use cases. First, we transform the
    data to a long format and then create our crosstab. Finally, we create a heatmap
    to make the results easier to investigate. The following code goes through these
    steps and produces the heatmap in figure 6.45:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以创建一个类似于我们之前创建的交叉表，这次是为了将职位角色与AI用例进行交叉引用。首先，我们将数据转换为长格式，然后创建我们的交叉表。最后，我们创建一个热图，以便更容易地调查结果。以下代码执行这些步骤，并在图6.45中生成热图：
- en: '[PRE36]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '#1 Cross-reference job categories with AI use cases.'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '#1 将职位类别与AI用例进行交叉引用。'
- en: '#2 Reshapes into a crosstab'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '#2 转换为交叉表'
- en: '#3 Finally, plots the heatmap'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '#3 最后，绘制热图'
- en: '![figure](../Images/6-45.png)'
  id: totrans-350
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-45.png)'
- en: Figure 6.45 Heatmap showing AI use cases across different job roles
  id: totrans-351
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.45显示不同职位角色间AI用例的热图
- en: 'The heatmap gives us some insights into usage patterns:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 热图让我们对使用模式有一些了解：
- en: About 30% of people use AI tools for writing code, with database administrators,
    marketing and sales professionals, and designers being exceptions.
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大约30%的人使用AI工具编写代码，数据库管理员、市场营销和销售专业人士以及设计师是例外。
- en: Database administrators use AI for learning about a codebase more than others.
    Apart from them, other job roles that use AI for this the most are the ones that
    generally write less code, such as marketing or product functions.
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库管理员比其他人更常使用AI来了解代码库。除了他们之外，其他最常使用AI的职位通常是编写代码较少的，如市场营销或产品职能。
- en: While developer advocates also use AI for writing code, they also score the
    highest in using it for documentation, which can be an important aspect of the
    role.
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虽然开发者倡导者也使用AI来编写代码，但他们也在使用AI进行文档方面得分最高，这可能是角色的重要方面。
- en: These few observations aside, participants seem to use AI tools more or less
    in the same way. Let’s recap our steps again, including this latest step for investigating
    job roles. Figure 6.46 shows the latest step diagram.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些观察结果之外，参与者似乎在使用AI工具的方式上或多或少是相同的。让我们再次回顾我们的步骤，包括这个最新的调查职位角色的步骤。图6.46显示了最新的步骤图。
- en: '![figure](../Images/6-46.png)'
  id: totrans-357
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/6-46.png)'
- en: Figure 6.46 The latest diagram of the steps taken in our analysis
  id: totrans-358
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图6.46显示我们分析中采取的最新步骤图
- en: Note that once we clean up the AI sentiment and trust-related columns, certain
    parts of our analysis can be done in parallel. Figure 6.46 illustrates this since
    it is not necessary to compare AI tool usage and trust and favorability before
    investigating AI users’ job roles. This highlights the fact that sometimes an
    analysis is not completely linear.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，一旦我们清理了AI情感和信任相关的列，我们的分析可以并行进行。图6.46说明了这一点，因为在调查AI用户的职位角色之前，没有必要比较AI工具的使用和信任以及好感度。这突出了分析有时不是完全线性的事实。
- en: 'Let’s export the data we will need to explore the questions further in the
    next chapter:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们导出我们将在下一章进一步探索问题的数据：
- en: '[PRE37]'
  id: totrans-361
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Let’s now review everything that we have accomplished so far and identify what
    else we need to do to finish getting to a minimum viable answer in the next chapter.
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们回顾到目前为止我们所完成的一切，并确定在下一章中为了达到最小可行答案我们还需要做什么。
- en: 6.4.3 Project progress so far
  id: totrans-363
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.4.3 到目前为止的项目进度
- en: So far, we have answered one of the two main stakeholder questions, namely,
    whether developers’ opinions on the usefulness and trustworthiness of current
    AI tools depend on their experience, job role, and what specifically they use
    the tools for. We have analyzed the survey to conclude that
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经回答了两个主要利益相关者问题中的一个，即开发者的意见是否取决于他们的经验、职位角色以及他们具体使用工具的目的。我们分析了调查结果，得出结论：
- en: Users of AI tools generally view them more favorably than nonusers.
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AI工具的用户通常比非用户对其评价更高。
- en: Users of AI tools also trust the tools’ outputs more than nonusers say they
    would.
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AI工具的用户也比非用户表示的更信任工具的输出。
- en: Help with writing and debugging code is the most popular use case for AI tools.
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 帮助编写和调试代码是AI工具最受欢迎的用例。
- en: People in different job roles report using AI tools for different purposes.
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同职位的人报告说他们使用AI工具的目的不同。
- en: In the following chapter, we will continue the project by addressing the second
    stakeholder hypothesis, which is that new and experienced coders use these tools
    differently. For this, we will need methods that combine continuous and categorical
    data and perform appropriate statistical tests.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将通过解决第二个利益相关者假设来继续项目，该假设是新旧程序员使用这些工具的方式不同。为此，我们需要结合连续数据和分类数据的方法，并执行适当的统计测试。
- en: Summary
  id: totrans-370
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Categorical data is prevalent in the real world.
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分类数据在现实世界中很普遍。
- en: Methods for continuous data are often not appropriate for categorical data;
    therefore, knowing methods to handle categorical data is important for analysts.
  id: totrans-372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连续数据的方法通常不适用于分类数据；因此，了解处理分类数据的方法对于分析师来说很重要。
- en: Methods like one-hot encoding transform categorical data into a format better
    suited for analysis.
  id: totrans-373
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 像单热编码这样的方法将分类数据转换成更适合分析的形式。
