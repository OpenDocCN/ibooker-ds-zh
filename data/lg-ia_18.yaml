- en: Appendix C. Plugins summary
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录 C. 插件总结
- en: We have looked at several types of plugins within the book but have not addressed
    all the available plugins available out of the box. This appendix addresses that.
    We have provided a summary of all the core plugins and some open source ones that
    warrant attention.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在书中探讨了多种插件类型，但并未涵盖所有开箱即用的插件。本附录将对此进行说明。我们提供了一份所有核心插件和一些值得关注的开源插件的总结。
- en: C.1 Formatter plugins
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.1 格式化器插件
- en: '| Plugin name | Summary | Fluentd core |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '| 插件名称 | 概述 | Fluentd 核心 |'
- en: '| `csv` | Covered in chapter 4\. Basic comma-separated values, although the
    separator can be changed through the configuration attributes. | Y |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '| `csv` | 在第 4 章中有介绍。基本的逗号分隔值，尽管可以通过配置属性更改分隔符。 | 是 |'
- en: '| `hash` | This translates the log event record to a representation that Ruby
    can handle in a hash format. It is possible to embed Ruby code fragments into
    some plugin configurations, hence its inclusion. | Y |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '| `hash` | 这将日志事件记录转换为 Ruby 可以处理的哈希格式表示。可以在某些插件配置中嵌入 Ruby 代码片段，因此它被包含在内。 |
    是 |'
- en: '| `json` | Covered in chapter 4\. Allows us to output the log event contents
    in a JSON format.For more information on JSON format, see [www.json.org](https://www.json.org).
    | Y |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '| `json` | 在第 4 章中有介绍。允许我们将日志事件内容以 JSON 格式输出。有关 JSON 格式的更多信息，请参阅 [www.json.org](https://www.json.org)。
    | 是 |'
- en: '| `ltsv` | Covered in chapter 4\. Label tab (character) separated values—rather
    than depending on positioning in the list to get the correct value meaning, we
    can include a label.See [http://ltsv.org/](http://ltsv.org/) for more resources
    and information. | Y |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '| `ltsv` | 在第 4 章中有介绍。标签制表符（字符）分隔值——而不是依赖于列表中的位置来获取正确的值含义，我们可以包含一个标签。更多信息请参阅
    [http://ltsv.org/](http://ltsv.org/)。 | 是 |'
- en: '| `msgpack` | Covered in chapter 4\. A formatter ideal for compressing log
    events to communicate between Fluentd and Fluent Bit.For more information on msgpack,
    see [https://msgpack.org/](https://msgpack.org/). | Y |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '| `msgpack` | 在第 4 章中有介绍。一个理想的格式化器，用于压缩日志事件以在 Fluentd 和 Fluent Bit 之间通信。有关
    msgpack 的更多信息，请参阅 [https://msgpack.org/](https://msgpack.org/)。 | 是 |'
- en: '| `out_file` | Covered in chapter 4\. This formatter prints out the named log
    event attributes, which can be listed using a delimiter. | Y |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| `out_file` | 在第 4 章中有介绍。这个格式化器会打印出命名的日志事件属性，可以使用分隔符进行列表。 | 是 |'
- en: '| `single_value` | The `single_value` formatter is a little like the CSV formatter
    in that it is possible to select from the log event record and output that content.
    However, it is only possible to identify one part of the log event record, using
    the `message_key` attribute in this case. | Y |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| `single_value` | `single_value` 格式化器有点类似于 CSV 格式化器，因为它可以从日志事件记录中选择内容并输出。然而，在这种情况下，只能通过使用
    `message_key` 属性来识别日志事件记录的一部分。 | 是 |'
- en: C.2 Extract and inject plugin support
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.2 提取和注入插件支持
- en: 'The out-of-the-box source and match plugins support for extract and inject
    are as follows:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 开箱即用的来源和匹配插件支持提取和注入如下：
- en: '| Source | Inject | Extract |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| 来源 | 注入 | 提取 |'
- en: '| `dummy` | No | No |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| `dummy` | 否 | 否 |'
- en: '| `exec` | No | Yes |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| `exec` | 否 | 是 |'
- en: '| `forward` | No | No |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| `forward` | 否 | 否 |'
- en: '| `http` | No | No |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| `http` | 否 | 否 |'
- en: '| `monitor_agent` | No | No |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| `monitor_agent` | 否 | 否 |'
- en: '| `syslog` | No | No |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| `syslog` | 否 | 否 |'
- en: '| `tail` | No | No |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| `tail` | 否 | 否 |'
- en: '| `tcp` | No | Yes |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| `tcp` | 否 | 是 |'
- en: '| `udp` | No | Yes |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| `udp` | 否 | 是 |'
- en: '| `unix` | No | No |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| `unix` | 否 | 否 |'
- en: '| `windows_eventlog` | No | No |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| `windows_eventlog` | 否 | 否 |'
- en: '| Match | Inject | Extract |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| 匹配 | 注入 | 提取 |'
- en: '| `copy` | Yes | No |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| `copy` | 是 | 否 |'
- en: '| `exec` | No | No |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| `exec` | 否 | 否 |'
- en: '| `exec_filter` | Yes | Yes |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| `exec_filter` | 是 | 是 |'
- en: '| `file` | Yes | No |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| `file` | 是 | 否 |'
- en: '| `forward` | No | No |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| `forward` | 否 | 否 |'
- en: '| `http` | No | No |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| `http` | 否 | 否 |'
- en: '| `null` | No | No |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| `null` | 否 | 否 |'
- en: '| `relabel` | No | No |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| `relabel` | 否 | 否 |'
- en: '| `round_robin` | No | No |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| `round_robin` | 否 | 否 |'
- en: '| `secondary_file` | No | No |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| `secondary_file` | 否 | 否 |'
- en: '| `stdout` | Yes | No |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| `stdout` | 是 | 否 |'
- en: C.3 Filter plugins
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.3 过滤器插件
- en: '| Plugin name | Summary | Fluentd core |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| 插件名称 | 概述 | Fluentd 核心 |'
- en: '| `add` | Interesting as it provides an effortless way to add a UUID (universally
    unique identifier) and other additional name-value pairs. Unique IDs are helpful
    when log events pass through multiple Fluentd nodes. More information can be found
    at [https://github.com/yu-yamada/fluent-plugin-add](https://github.com/yu-yamada/fluent-plugin-add).
    | N |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| `add` | 很有趣，因为它提供了一种无需努力即可添加 UUID（通用唯一标识符）和其他附加名称值对的方法。唯一标识符在日志事件通过多个 Fluentd
    节点时非常有用。更多信息可以在 [https://github.com/yu-yamada/fluent-plugin-add](https://github.com/yu-yamada/fluent-plugin-add)
    找到。 | 否 |'
- en: '| `anonymizer` | Anonymizer can be configured to perform a one-way hash of
    the contents of an element in a log event using the selected algorithm. This is
    ideal for masking sensitive data. More can be found at [https://github.com/y-ken/fluent-plugin-anonymizer](https://github.com/y-ken/fluent-plugin-anonymizer).
    | N |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| `anonymizer` | 匿名化器可以配置为使用所选算法对日志事件中元素的 内容进行单向哈希。这对于屏蔽敏感数据非常理想。更多信息可以在 [https://github.com/y-ken/fluent-plugin-anonymizer](https://github.com/y-ken/fluent-plugin-anonymizer)
    找到。 | N |'
- en: '| `autotype` | Applies typing to the log event attributes based on analyzing
    the payload. Ideal for handling numeric values, as it removes the need to effect
    a manual typecast. | N |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| `autotype` | 根据分析有效载荷对日志事件属性应用类型。对于处理数值，因为它消除了手动类型转换的需要，所以非常适合。 | N |'
- en: '| `filter_parser` | Combines the capability of parser plugins with the filter.
    | Y |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| `filter_parser` | 结合了解析插件的功能和过滤器。 | Y |'
- en: '| `fluent-plugin-fields-autotype` | This plugin is ideal for parsing the log
    event structure and selecting the correct data type to evaluate the attributes.
    This is also a variant of `fluent-plugin-auto-typ`. More information can be found
    at [http://mng.bz/AxlK.](http://mng.bz/AxlK) | N |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| `fluent-plugin-fields-autotype` | 此插件非常适合解析日志事件结构并选择正确的数据类型来评估属性。这也是 `fluent-plugin-auto-typ`
    的一个变体。更多信息可以在 [http://mng.bz/AxlK.](http://mng.bz/AxlK) 找到。 | N |'
- en: '| `geoip` | This plugin exploits the fact that internet providers publish the
    internet protocol (IP) addresses they have been allocated along with the physical
    location at which these IPs connect to the “internet.” This information is then
    aggregated together by several organizations. By knowing the IP of the request,
    it is possible to look up a location. This is beneficial, as it allows data to
    be more effectively routed and filtered. For example, you could have a global
    network of Fluentd servers. Using GeoIP will enable us to direct the logs to the
    nearest Fluentd server to aggregate the log events. This can be very helpful when
    working with high volumes of logs in distributed use cases such as'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '| `geoip` | 此插件利用了互联网服务提供商发布它们分配的互联网协议（IP）地址以及这些IP连接到的物理位置的事实。这些信息随后由几个组织汇总。通过知道请求的IP，可以查找位置。这很有用，因为它允许数据更有效地路由和过滤。例如，您可能有一个全球的Fluentd服务器网络。使用GeoIP将使我们能够将日志定向到最近的Fluentd服务器以聚合日志事件。这在处理分布式用例中的大量日志时非常有帮助，例如'
- en: Internet of Things (IoT) deployments
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 物联网（IoT）部署
- en: Global multi-region and multi-cloud solutions
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全球多区域和多云解决方案
- en: More information can be found at [https://github.com/y-ken/fluent-plugin-geoip](https://github.com/y-ken/fluent-plugin-geoip).
    | N |
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息可以在 [https://github.com/y-ken/fluent-plugin-geoip](https://github.com/y-ken/fluent-plugin-geoip)
    找到。 | N |
- en: '| `grep` | Provides the means to define rules about log event attributes to
    filter them out of the stream of events. Multiple expressions can be specified
    to create cumulative rules. | Y |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| `grep` | 提供了定义关于日志事件属性规则的手段，以将它们从事件流中过滤出来。可以指定多个表达式以创建累积规则。 | Y |'
- en: '| `record_modifier` | A variant of `record_transformer` has been changed to
    make the plugin more efficient: [http://mng.bz/ZzoO](http://mng.bz/ZzoO). | N
    |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| `record_modifier` | `record_transformer` 的一个变体已被修改以提高插件效率：[http://mng.bz/ZzoO](http://mng.bz/ZzoO)。
    | N |'
- en: '| `record_transformer` | The most sophisticated built-in filter and provides
    a diverse set of options for manipulating the log event. | Y |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| `record_transformer` | 最复杂的内置过滤器，提供了一组用于操作日志事件的选项。 | Y |'
- en: '| `stdout` | Sends all events to `stdout`, without removing the event from
    the flow. | Y |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| `stdout` | 将所有事件发送到 `stdout`，而不从流中删除事件。 | Y |'
- en: C.4 Tag manipulation plugins
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.4 标签操作插件
- en: '| Plugin name | Summary | Fluentd core |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| 插件名称 | 概述 | Fluentd 核心库 |'
- en: '| `rewrite`[http://mng.bz/2jad](http://mng.bz/2jad) | This enables tags to
    be modified using one or more rules, such as if an attribute of the log event
    record matches a regular expression. As a result, performing specific tasks based
    on the log event becomes very easy. | N |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| `rewrite`[http://mng.bz/2jad](http://mng.bz/2jad) | 这使得可以使用一个或多个规则修改标签，例如如果日志事件记录的属性与正则表达式匹配。因此，根据日志事件执行特定任务变得非常容易。
    | N |'
- en: '| `rewrite-tag-filter`[http://mng.bz/1jMV](http://mng.bz/1jMV) | With one or
    more rules in the match directive, the log event has a regular expression applied
    to it. Then, depending on the result, the tag is changed to a specified value.
    The rule can be set such that you can choose whether the rewrite is applied to
    a true or false outcome from the regex. The log event is re-emitted to continue
    beyond the match event using the new tag if a successful outcome is achieved.
    | N |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| `rewrite-tag-filter`[http://mng.bz/1jMV](http://mng.bz/1jMV) | 匹配指令中有一个或多个规则时，将对日志事件应用正则表达式。然后，根据结果，将标签更改为指定的值。规则可以设置为选择是否将重写应用于正则表达式的真或假结果。如果成功，则使用新标签重新发出日志事件以继续匹配事件之后。
    | N |'
- en: '| `route`[http://mng.bz/PWx9](http://mng.bz/PWx9) | The routing plugin allows
    tags to direct the log events to one or more operations, such as manipulating
    the log event and copying it to intercept it by another directive. | N |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| `route`[http://mng.bz/PWx9](http://mng.bz/PWx9) | 路由插件允许标签将日志事件定向到一个或多个操作，例如操作日志事件并复制它以通过另一个指令拦截。
    | N |'
- en: C.5 Preventing alert storms
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.5 防止警报风暴
- en: Some resources can help control or prevent possible alert storms if a continuous
    stream of errors is generated.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如果生成连续的错误流，一些资源可以帮助控制或防止可能的警报风暴。
- en: '| Plugin name | Summary |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 插件名称 | 摘要 |'
- en: '| *Log suppression filter*[http://mng.bz/J1l0](http://mng.bz/J1l0) | The Fluentd
    plugin keeps a list of previous log entries based on named log event attributes
    if they reoccur more than a defined number of times within a certain period. |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| *日志抑制过滤器*[http://mng.bz/J1l0](http://mng.bz/J1l0) | 如果在特定时间段内重复出现超过定义次数，Fluentd
    插件将基于命名的日志事件属性保留之前日志条目的列表。|'
- en: '| *Log4J2 plugin*[http://mng.bz/wnPq](http://mng.bz/wnPq) | Suppresses log
    events within the Log4J2 framework to prevent too many log events from being emitted
    that match a set of rules. |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| *Log4J2 插件*[http://mng.bz/wnPq](http://mng.bz/wnPq) | 在 Log4J2 框架内抑制日志事件，以防止发出过多匹配一组规则的日志事件。|'
- en: '| *Log4Net*[http://mng.bz/7W19](http://mng.bz/7W19) | A .Net variant of the
    Log4J2 solution. |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| *Log4Net*[http://mng.bz/7W19](http://mng.bz/7W19) | Log4J2 解决方案的 .Net 变体。|'
- en: C.6 Analytical and metrics plugins
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.6 分析和指标插件
- en: Some plugins can help create analytics or metrics values within Fluentd or use
    tools to help generate metrics.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 一些插件可以帮助在 Fluentd 中创建分析或指标值，或使用工具帮助生成指标。
- en: '| Plugin name | Summary |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| 插件名称 | 摘要 |'
- en: '| *Fluent-plugin-prometheus*[http://mng.bz/mxJr](http://mng.bz/mxJr) | This
    bundles six plugins together, covering the following:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '| *Fluent-plugin-prometheus*[http://mng.bz/mxJr](http://mng.bz/mxJr) | 将六个插件捆绑在一起，包括以下内容：'
- en: '`prometheus` input plugin provides a metrics HTTP endpoint to be scraped by
    a Prometheus server on 24231/tcp(default).'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prometheus` 输入插件提供了一个指标 HTTP 端点，由 Prometheus 服务器在 24231/tcp（默认）上抓取。'
- en: '`prometheus_input` plugin collects internal metrics in Fluentd, a bit like
    the monitor agent.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prometheus_input` 插件收集 Fluentd 中的内部指标，有点像监控代理。'
- en: '`prometheus_output_monitor` plugin collects internal metrics for output plugin
    in Fluentd.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prometheus_output_monitor` 插件收集 Fluentd 中输出插件的内部指标。'
- en: '`prometheus_tail_monitor` plugin collects internal metrics for the tail plugin
    in Fluentd. This allows us to provide assurance that the tail plugin is running
    as intended.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prometheus_tail_monitor` 插件收集 Fluentd 中尾插件的内部指标。这使我们能够确保尾插件按预期运行。'
- en: The output and filter plugins instrument the log event with additional metrics,
    such as the number of occurrences of a value based on the configuration attributes.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 输出和过滤器插件使用额外的指标来装备日志事件，例如基于配置属性的值出现的次数。
- en: '|'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| *Fluentd Elasticsearch plugin*[http://mng.bz/5K1B](http://mng.bz/5K1B) |
    Plugin to send log events to Elasticsearch. The plugin provides a very rich set
    of configuration attributes. |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| *Fluentd Elasticsearch 插件*[http://mng.bz/5K1B](http://mng.bz/5K1B) | 将日志事件发送到
    Elasticsearch 的插件。该插件提供了一套非常丰富的配置属性。|'
- en: '| *Fluentd data counter*[http://mng.bz/6Z1o](http://mng.bz/6Z1o) | Count log
    events that match any of the specified regexp patterns in the specified attribute:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '| *Fluentd 数据计数器*[http://mng.bz/6Z1o](http://mng.bz/6Z1o) | 计算在指定属性中匹配任何指定正则表达式模式的日志事件：'
- en: Counts per min/hour/day
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每分钟/每小时/每天的计数
- en: Counts per second (average every min/hour/day)
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每秒计数（平均每分钟/每小时/每天）
- en: Percentage of each pattern in total counts of messages
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每种模式在消息总数中的百分比
- en: The `DataCounterOutput` emits messages containing results data, so you can output
    these messages (with the `datacount` tag by default) to any outputs you want.
    |
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '`DataCounterOutput` 发出包含结果数据的消息，因此您可以将这些消息（默认情况下带有 `datacount` 标签）输出到您想要的任何输出。|'
- en: '| *Fluentd numeric counter*[http://mng.bz/oaJd](http://mng.bz/oaJd) | Plugin
    to count log events that match numeric range patterns and emits its result (like
    `fluent-plugin-datacounter`):'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '| *Fluentd 数字计数器*[http://mng.bz/oaJd](http://mng.bz/oaJd) | 插件用于计算匹配数字范围模式的日志事件，并输出其结果（类似于`fluent-plugin-datacounter`）：'
- en: Counts per min/hour/day
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每分钟/每小时/每天的计数
- en: Counts per second (average every min/hour/day)
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每秒计数（平均每分钟/每小时/每天）
- en: Percentage of each numeric pattern in total counts of log events
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个数字模式在日志事件总数中的百分比
- en: '|'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: C.7 Plugin Interfaces
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: C.7 插件接口
- en: The following tables summarize the functions that can or should be implemented
    when developing your own plugins. You can see the details by reviewing the Fluentd
    code as well at https://github.com/fluent/fluentd/blob/master/lib/fluent/plugin,
    but we hope these tables will make life easier.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 以下表格总结了在开发自己的插件时可以或应该实现的功能。您可以通过查看Fluentd代码以及https://github.com/fluent/fluentd/blob/master/lib/fluent/plugin来查看详细信息，但我们希望这些表格将使生活更加容易。
- en: Input
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 输入
- en: '| Function prototype | Description |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| 函数原型 | 描述 |'
- en: '| `def emit` | This overloads the Fluent::Input class methods for our requirements.
    |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| `def emit` | 这为我们的需求重载了Fluent::Input类的方法。'
- en: '| `def run` | Set up the loop thread, and if there’s nothing to emit, then
    go to sleep. |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| `def run` | 设置循环线程，如果没有要输出的内容，则进入睡眠状态。'
- en: '| `def configure(conf)` | This method is for processing the configuration values
    so that they can be validated, particularly if values can conflict. |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| `def configure(conf)` | 此方法用于处理配置值，以便它们可以被验证，特别是如果值可能冲突。'
- en: '| `def start` | A life cycle event to start the creation of connectivity. Start
    the timer to nudge the logic to see if any I/O is needed. |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| `def start` | 一个生命周期事件，用于开始创建连接。启动计时器以推动逻辑查看是否需要任何I/O。'
- en: '| `def shutdown` | Start the process of releasing assets such as connections
    to resources. |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| `def shutdown` | 开始释放资产的过程，例如释放到资源的连接。'
- en: Output
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 输出
- en: '| Function Prototype | Description |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| 函数原型 | 描述 |'
- en: '| `commit_write(chunk_id)` | Once a chunk can be written, this method tells
    our implementation which chunk ID to write. On return to Fluentd, the chunk is
    purged. |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| `commit_write(chunk_id)` | 一旦一个块可以写入，此方法告诉我们的实现哪个块ID要写入。返回到Fluentd后，该块将被清除。'
- en: '| `def configure(conf)` | This method is for processing the configuration values
    so that they can be validated, particularly if values can conflict. |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| `def configure(conf)` | 此方法用于处理配置值，以便它们可以被验证，特别是如果值可能冲突。'
- en: '| `def format(tag, time, record)` | This serializes the code for holding in
    a chunk. The `tag`, `time`, and `record` represent the three parts of a log event,
    with the time in seconds from the epoch. The record at this stage is a hash to
    allow JSON manipulation. Will throw a `NotImplemented` error if this isn’t overloaded.
    |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| `def format(tag, time, record)` | 将代码序列化以存储在块中。`tag`、`time`和`record`代表日志事件的三个部分，时间是从纪元以来的秒数。此阶段的记录是一个哈希表，允许JSON操作。如果没有重载，将抛出`NotImplemented`错误。'
- en: '| `def formatted_to_msgpack_binary?` | To indicate custom format method (#format),
    returns msgpack to binary or not. If #format returns msgpack binary, override
    this method to return `true`. By default, it returns `false`. |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| `def formatted_to_msgpack_binary?` | 用于指示自定义格式方法（#format），返回msgpack到二进制或否。如果#format返回msgpack二进制，则覆盖此方法以返回`true`。默认情况下，它返回`false`。'
- en: '| `def multi_workers_ready?` | False |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| `def multi_workers_ready?` | False'
- en: '| `def prefer_buffered_processing` | Override this method to return false only
    when all of these are true:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '| `def prefer_buffered_processing` | 仅当以下所有条件都为真时，覆盖此方法以返回`false`：'
- en: The plugin has both implementations for buffered and non-buffered methods.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该插件提供了缓冲和非缓冲方法的实现。
- en: The plugin is expected to work as a nonbuffered plugin if no `<buffer>` sections
    specified `true`.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果没有指定`<buffer>`部分为`true`，则插件预期作为非缓冲插件工作。
- en: '|'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `def prefer_delayed_commit` | Override this method to decide which is used,
    `write` or `try_write`, if both are implemented. |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| `def prefer_delayed_commit` | 覆盖此方法以决定使用`write`还是`try_write`，如果两者都实现了。'
- en: '| `def shutdown` | The shutdown is the opposite of the Start event. At this
    stage, we should be releasing resources such as network connections. |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| `def shutdown` | 关闭操作是启动事件的相反。在这个阶段，我们应该释放资源，例如网络连接。'
- en: '| `def start` | This is one of the important life cycle events; we should start
    consuming or allowing events to be sent on receipt of this. |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| `def start` | 这是重要的生命周期事件之一；我们应该在收到此事件时开始消费或允许发送事件。'
- en: '| `def try_write(chunk)` | This method is for implementing the asynchronous
    I/O. The base class will throw a `NotImplemented` error if this isn’t overloaded
    but is expected to be implemented. |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| `def try_write(chunk)` | 此方法用于实现异步 I/O。如果未重载，基类将抛出 `NotImplemented` 错误，但预期需要实现。
    |'
- en: '| `def write(chunk)` | This takes a chunk and writes it out synchronously.
    The base class will throw a `NotImplemented` error if this isn’t overloaded but
    is expected to work. |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| `def write(chunk)` | 此方法接收一个块并将其同步写入。如果未重载，基类将抛出 `NotImplemented` 错误，但预期可以工作。
    |'
- en: '| `extract_placeholders(str, chunk)` | Used to extract a string value from
    `str` using the chunk information. A string is returned. |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| `extract_placeholders(str, chunk)` | 用于使用块信息从 `str` 中提取一个字符串值。返回一个字符串。 |'
- en: '| `process(tag, es)` | This method is used for synchronous output.Will throw
    a `NotImplemented` error if this isn’t overloaded.The `tag` is the tag that applies
    to all the events in the `es` structure.The `es` parameter represents one or more
    log events to be written. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| `process(tag, es)` | 此方法用于同步输出。如果没有重载，将抛出 `NotImplemented` 错误。`tag` 是应用于
    `es` 结构中所有事件的标签。`es` 参数表示一个或多个要写入的日志事件。 |'
- en: '| `rollback_write(chunk_id)` | The plugin can control rollback and retries
    for the writing of chunks using this method. |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| `rollback_write(chunk_id)` | 插件可以使用此方法控制块写入的回滚和重试。 |'
