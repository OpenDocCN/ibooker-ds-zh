- en: front matter
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前置内容
- en: preface
  id: totrans-1
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 前言
- en: APIs and microservices have taken the software industry by storm. Under the
    pressure of increasing software complexity and the need to scale, more and more
    organizations are migrating from monolithic to microservices architecture. O’Reilly’s
    “Microservices Adoption in 2020” report found that 77% of respondents had adopted
    microservices, a trend that is expected to continue growing in the coming years.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: API和微服务已经席卷了软件行业。在软件复杂性不断增加和需要扩展的压力下，越来越多的组织正在从单体架构迁移到微服务架构。O'Reilly的“2020年微服务采用”报告发现，77%的受访者已经采用了微服务，预计这一趋势在未来几年将继续增长。
- en: Using microservices poses the challenge of driving service integrations through
    APIs. According to Nordic APIs, 90% of developers work with APIs and they spend
    30% of their time building APIs.[¹](#pgfId-1109647) The growth of the API economy
    has transformed the way we build applications. Today, it’s more and more common
    to build products and services that are delivered entirely over APIs, such as
    Twilio and Stripe. Even traditional sectors like banking and insurance are finding
    new lines of business by opening their APIs and integrating within the Open Banking
    ecosystem. The wide availability of API-first products means that we can focus
    on our core business capabilities when building our own applications, while using
    external APIs to handle common tasks such as authenticating users and sending
    emails.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 使用微服务带来了通过API驱动服务集成的挑战。根据Nordic APIs的数据，90%的开发者使用API，他们花费30%的时间在构建API上。[¹](#pgfId-1109647)
    API经济的增长已经改变了我们构建应用程序的方式。如今，越来越多地构建完全通过API交付的产品和服务，例如Twilio和Stripe。即使是传统行业如银行和保险业，也在通过开放API和集成到Open
    Banking生态系统中找到新的业务线。API-first产品的广泛可用性意味着我们可以在构建自己的应用程序时专注于核心业务能力，同时使用外部API来处理诸如用户认证和发送电子邮件等常见任务。
- en: It’s exciting to be part of this growing ecosystem. However, before we embrace
    microservices and APIs, we need to know how to architect microservices, how to
    design APIs, how to define an API strategy, how to make sure we deliver reliable
    integrations, how to choose a deployment model, and how to protect our systems.
    In my experience, most organizations struggle with one or more of these questions,
    and a recent report by IBM found that 31% of businesses haven’t adopted microservices
    due to lack of internal expertise.[²](#pgfId-1109651) Equally, Postman’s 2022
    State of the API Report found that 14% of respondents experience API integration
    failures 11%–25% of the time ([http://mng.bz/Xa9v](http://mng.bz/Xa9v)), and according
    to Salt Security, 94% of organizations experienced API security incidents in 2022.[³](#pgfId-1111334)
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 成为这个不断发展的生态系统的成员令人兴奋。然而，在我们拥抱微服务和API之前，我们需要知道如何架构微服务，如何设计API，如何制定API策略，如何确保我们提供可靠的集成，如何选择部署模式，以及如何保护我们的系统。根据我的经验，大多数组织在这些问题上都会遇到一个或多个挑战，而IBM最近的一份报告发现，31%的企业没有采用微服务，原因是缺乏内部专业知识。[²](#pgfId-1109651)
    同样，Postman的2022年API状态报告发现，14%的受访者有11%–25%的时间遇到API集成失败，根据Salt Security的数据，2022年94%的组织经历了API安全事件。[³](#pgfId-1111334)
- en: 'Many books address the problems mentioned in the previous paragraph, but they
    typically do it from a highly specific point of view: some focus on architecture,
    others on APIs, and yet others on security. I felt there’s a gap for a book that
    brings all these questions together and addresses them with a practical approach:
    essentially, a book that can get an average developer up and running quickly with
    the best practices, principles, and patterns for designing and building microservice
    APIs. I wrote this book with that goal in mind.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 许多书籍都讨论了上一段提到的那些问题，但它们通常从非常具体的视角来处理：有些专注于架构，有些关注API，还有些关注安全。我感觉缺少一本能够将这些疑问汇集在一起，并以实用方法来解答的书：本质上，一本能让普通开发者快速上手，掌握设计构建微服务API的最佳实践、原则和模式的书。我正是带着这个目标来写这本书的。
- en: Over the past years, I’ve had the opportunity to work with different clients
    helping them to architect microservices and deliver API integrations. Working
    on those projects gave me a vantage view into the major hurdles that development
    teams face when working with microservices and APIs. As it turns out, both technologies
    are deceivingly simple. A well-designed API is easy to navigate and consume, while
    well-architected microservices boost developer productivity and are easily scalable.
    On the other side of the spectrum, badly designed APIs are error prone and difficult
    to use, and badly architected microservices result in so-called distributed monoliths.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的几年里，我有机会与不同的客户合作，帮助他们设计微服务并交付API集成。在这些项目中工作让我对开发团队在处理微服务和API时面临的主要挑战有了更深入的了解。事实证明，这两种技术都看似简单。一个设计良好的API易于导航和消费，而良好的微服务架构可以提升开发者的生产力，并且易于扩展。另一方面，设计不良的API容易出错且难以使用，而设计不良的微服务会导致所谓的分布式单体。
- en: 'The obvious questions arise: How do you design good APIs? And how do you architect
    loosely coupled microservices? This book will help you answer these questions
    and more. You’ll also get your hands dirty building APIs and services, and you’ll
    learn how to secure them, test them, and deploy them. The methods, patterns, and
    principles that I teach in this book are the outcome of many years of trials and
    experimentation, and I’m very excited about sharing them with you. I hope you
    find this book a valuable resource in your journey towards becoming a better software
    developer and architect.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 显而易见的问题随之而来：你如何设计好的API？你如何设计松散耦合的微服务？这本书将帮助你回答这些问题以及更多。你还将有机会亲手构建API和服务，并学习如何确保它们的安全、测试和部署。我在这本书中教授的方法、模式和原则是多年试验和实验的结果，我非常期待与你们分享它们。我希望你们能在这本书中找到成为更好的软件开发者和架构师旅程中的宝贵资源。
- en: acknowledgments
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 致谢
- en: Writing this book has been one of the most fascinating journeys in my career,
    and I couldn’t have done it without the help and support of my family and an amazing
    team of colleagues. The book is dedicated to my wonderful wife, Jiwon, without
    whose constant encouragement and understanding I wouldn’t have been able to complete
    this book, and to our daughter, Ivy, who made sure I never had a dull moment in
    my schedule.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 写这本书是我职业生涯中最迷人的旅程之一，没有家人和一支了不起的同事团队的帮助和支持，我无法完成它。这本书献给我的妻子Jiwon，没有她不断的鼓励和理解，我无法完成这本书；也献给我们的小女儿Ivy，她确保我在日程中从未有过无聊的时刻。
- en: I have benefited enormously from the people who contributed ideas for the book,
    helped me better understand the tools and protocols I use in it, and provided
    feedback on various chapters and drafts. Special thanks go to Dmitry Dygalo, Kelvin
    Meeks, Sebastián Ramírez Montaño, Chris Richardson, Jean Yang, Gajendra Deshpande,
    Oscar Islas, Mehdi Medjaoui, Ben Hutton, Andrej Baranovskij, Alex Mystridis, Roope
    Hakulinen, Steve Ardagh-Walter, Kathrin Björkelund, Thomas Dean, Marco Antonio
    Sanz, Vincent Vandenborne, and the amazing maintainers of Ariadne at Mirumee.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我从为这本书贡献想法的人中受益匪浅，他们帮助我更好地理解了我在其中使用的工具和协议，并对各个章节和草稿提供了反馈。特别感谢Dmitry Dygalo、Kelvin
    Meeks、Sebastián Ramírez Montaño、Chris Richardson、Jean Yang、Gajendra Deshpande、Oscar
    Islas、Mehdi Medjaoui、Ben Hutton、Andrej Baranovskij、Alex Mystridis、Roope Hakulinen、Steve
    Ardagh-Walter、Kathrin Björkelund、Thomas Dean、Marco Antonio Sanz、Vincent Vandenborne以及Mirumee的Ariadne项目的出色维护者。
- en: Since 2020, I’ve presented drafts and ideas from the book at various conferences,
    including EuroPython, PyCon India, API World, API Specifications Conference, and
    various podcasts and meetups. I want to thank everyone who attended my presentations
    and gave me valuable feedback. I also want to thank the attendants to my workshops
    at microapis.io for their thoughtful comments on the book.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 自2020年以来，我在各种会议上展示了这本书的草稿和想法，包括EuroPython、PyCon India、API World、API规格会议以及各种播客和聚会。我想感谢所有参加我的演讲并给予宝贵反馈的人。我还想感谢参加microapis.io上我研讨会的人，他们对这本书的深思熟虑的评论。
- en: I want to thank my acquisitions editor, Andy Waldron. Andy did a brilliant job
    helping me get my book proposal in good shape and keeping the book focused on
    relevant topics. He also supported me tirelessly to promote the book and helped
    me to reach a wider audience.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我想感谢我的收购编辑Andy Waldron。Andy在帮助我把我的书稿提案整理得很好，并确保这本书聚焦于相关主题方面做得非常出色。他还不知疲倦地支持我推广这本书，并帮助我触及更广泛的受众。
- en: The book you now have in your hands is readable and understandable thanks to
    the invaluable work of my editor, Marina Michaels, who went far and beyond to
    help me write a better book. She did an outstanding job helping me improve my
    writing style, and keeping me on track and motivated.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在手中的这本书之所以易于阅读和理解，多亏了我的编辑Marina Michaels的无价工作。她不遗余力地帮助我写出更好的书籍。她出色地帮助我改进写作风格，并保持我保持方向和动力。
- en: I want to thank my technical editor, Nick Watts, who rightly pointed out many
    inaccuracies and always challenged me to provide better explanations and illustrations,
    and my technical proofreader, Al Krinker, who diligently checked all the code
    listings and the GitHub repository for this book, making sure the code is correct
    and executes without issues.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我要感谢我的技术编辑Nick Watts，他正确地指出了许多不准确之处，并总是挑战我提供更好的解释和插图，以及我的技术校对员Al Krinker，他勤奋地检查了所有代码列表和这本书的GitHub仓库，确保代码正确无误且无执行问题。
- en: I also want to thank the rest of the Manning team who was involved in the production
    of this book, including Candace Gillhoolley, Gloria Lukos, Stjepan Jureković,
    Christopher Kaufmann, Radmila Ercegovac, Mihaela Batinić, Ana Romac, Aira Dučić,
    Melissa Ice, Eleonor Gardner, Breckyn Ely, Paul Wells, Andy Marinkovich, Katie
    Tennant, Michele Mitchell, Sam Wood, Paul Spratley, Nick Nason, and Rebecca Rinehart.
    Thanks also go to Marjan Bace for betting on me and giving this book a chance.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我还要感谢参与这本书生产的Manning团队的其他成员，包括Candace Gillhoolley、Gloria Lukos、Stjepan Jureković、Christopher
    Kaufmann、Radmila Ercegovac、Mihaela Batinić、Ana Romac、Aira Dučić、Melissa Ice、Eleonor
    Gardner、Breckyn Ely、Paul Wells、Andy Marinkovich、Katie Tennant、Michele Mitchell、Sam
    Wood、Paul Spratley、Nick Nason和Rebecca Rinehart。也要感谢Marjan Bace，他对我下注，给了这本书一个机会。
- en: While working on this book, I had the opportunity to receive detailed and outstanding
    feedback from the most amazing group of reviewers, including Alain Lompo, Björn
    Neuhaus, Bryan Miller, Clifford Thurber, David Paccoud, Debmalya Jash, Gaurav
    Sood, George Haines, Glenn Leo Swonk, Hartmut Palm, Ikechukwu Okonkwo, Jan Pieter
    Herweijer, Joey Smith, Juan Jimenez, Justin Baur, Krzysztof Kamyczek, Manish Jain,
    Marcus Young, Mathijs Affourtit, Matthieu Evrin, Michael Bright, Michael Rybintsev,
    Michal Rutka, Miguel Montalvo, Ninoslav Cerkez, Pierre-Michel Ansel, Rafael Aiquel,
    Robert Kulagowski, Rodney Weis, Sambasiva Andaluri, Satej Kumar Sahu, Simeon Leyzerzon,
    Steven K Makunzva, Stuart Woodward, Stuti Verma, and William Jamir Silva. I credit
    them all with much of the good content that made its way into the book.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写这本书的过程中，我有机会从最令人惊叹的审稿人团队那里获得详细而出色的反馈，包括Alain Lompo、Björn Neuhaus、Bryan Miller、Clifford
    Thurber、David Paccoud、Debmalya Jash、Gaurav Sood、George Haines、Glenn Leo Swonk、Hartmut
    Palm、Ikechukwu Okonkwo、Jan Pieter Herweijer、Joey Smith、Juan Jimenez、Justin Baur、Krzysztof
    Kamyczek、Manish Jain、Marcus Young、Mathijs Affourtit、Matthieu Evrin、Michael Bright、Michael
    Rybintsev、Michal Rutka、Miguel Montalvo、Ninoslav Cerkez、Pierre-Michel Ansel、Rafael
    Aiquel、Robert Kulagowski、Rodney Weis、Sambasiva Andaluri、Satej Kumar Sahu、Simeon
    Leyzerzon、Steven K Makunzva、Stuart Woodward、Stuti Verma和William Jamir Silva。我感谢他们为书中内容的质量做出了巨大贡献。
- en: Since the book went into MEAP, I’ve been blessed by the words of encouragement
    and feedback that many of my readers sent me through various channels, such as
    LinkedIn and Twitter. I was also lucky to converse with a brilliant community
    of readers who actively participated in the book’s forum in Manning’s liveBook
    platform. I’m heartily grateful to all of you.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 自从这本书进入MEAP以来，我收到了许多读者通过各种渠道（如LinkedIn和Twitter）发送的鼓励和反馈，这让我感到非常幸运。我还很幸运能与一群才华横溢的读者进行交流，他们积极参与了Manning的liveBook平台上的书籍论坛。我对你们所有人都心怀感激。
- en: This book wouldn’t have been possible without the tireless work of thousands
    of open source contributors who created and maintain the amazing libraries that
    I use in this book. I’m very thankful to all of you, and I hope my book helps
    to make your amazing work more visible.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 没有数千名开源贡献者的不懈努力，这本书是不可能完成的。他们创建了并维护了我在这本书中使用的令人惊叹的库。我对你们所有人都非常感激，并希望我的书能帮助使你们的工作更加突出。
- en: Finally, thank you, the reader, for acquiring a copy of my book. I can only
    hope that you find this book useful and informative and that you enjoy reading
    it as much as I enjoyed writing it. I love to hear from my readers, and I’d be
    delighted if you share your thoughts on the book with me.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，感谢您，读者，购买了这本书的一本。我只希望您觉得这本书有用且信息丰富，并且您阅读这本书的乐趣能和我写作这本书的乐趣一样。我喜欢收到读者的来信，如果您愿意与我分享对这本书的看法，我将非常高兴。
- en: about this book
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于这本书
- en: The goal of this book is to teach you how to build microservices and drive their
    integrations using APIs. You’ll learn to design a microservices platform and to
    build REST and GraphQL APIs to enable communication between microservices. You’ll
    also learn to test and validate your microservice APIs, to secure them, and to
    deploy and operate them in the cloud.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的目标是教你如何使用API构建微服务并推动它们的集成。你将学习如何设计微服务平台，构建REST和GraphQL API以实现微服务之间的通信。你还将学习测试和验证你的微服务API，确保它们的安全，并在云中部署和运行它们。
- en: Who should read this book?
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 适合阅读本书的人群？
- en: This book is helpful for software developers who work with microservices and
    APIs. The book uses a very practical approach, and nearly every chapter illustrates
    the explanations with full coding examples. Therefore, hands-on developers who
    work directly with microservice APIs will find the book’s contents valuable.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本书对使用微服务和API的软件开发者很有帮助。本书采用了一种非常实用的方法，几乎每一章都通过完整的编码示例来阐述解释。因此，直接与微服务API工作的实践开发者会发现本书的内容很有价值。
- en: The coding examples are in Python; however, knowledge of the language isn’t
    necessary to be able to follow along with them. Before introducing new code, every
    concept is explained thoroughly.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 编码示例使用Python编写；然而，了解该语言并不是能够跟随示例的必要条件。在引入新代码之前，每个概念都得到了彻底的解释。
- en: The book contains a lot of emphasis on design strategies, best practices, and
    development workflows, and therefore it’s also useful for CTOs, architects, and
    VPs of engineering who need to decide whether microservices are the right architectural
    solution for them, or who need to choose between different API strategies and
    how to make the integrations work.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本书对设计策略、最佳实践和开发工作流程给予了大量关注，因此它对需要决定微服务是否是合适的架构解决方案的CTO、架构师和工程副总裁也很有用，或者需要在不同API策略之间进行选择以及如何使集成工作。
- en: 'How this book is organized: A roadmap'
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本书是如何组织的：一个路线图
- en: The book is divided into four sections with a total of 14 chapters.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 本书分为四个部分，共14章。
- en: 'Part 1 introduces the concepts of microservices and APIs, shows how to build
    a simple API, and explains how to design a microservices platform:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 第一部分介绍了微服务和API的概念，展示了如何构建一个简单的API，并解释了如何设计微服务平台：
- en: 'Chapter 1 introduces the main concepts of the book: microservices and APIs.
    It explains how microservices differ from monolithic architecture, and when it
    makes sense to use monoliths versus microservices. It also explains what APIs
    are and how they help us drive integrations between microservices.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一章介绍了本书的主要概念：微服务和API。它解释了微服务与单体架构的区别，以及何时使用单体与微服务更合适。它还解释了API是什么以及它们如何帮助我们推动微服务之间的集成。
- en: Chapter 2 offers a step-by-step guide for implementing APIs using Python’s popular
    FastAPI framework. You’ll learn to read an API specification and understand its
    requirements. You’ll also learn to build APIs in gradual steps, and how to test
    your data validation models.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二章提供了使用Python流行的FastAPI框架实现API的逐步指南。你将学习如何阅读API规范并理解其要求。你还将学习逐步构建API，以及如何测试你的数据验证模型。
- en: Chapter 3 explains how to design a microservices platform. It introduces three
    fundamental microservice design principles, and it explains how to decompose a
    system into microservices, using decomposition by business capability and decomposition
    by subdomains.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三章解释了如何设计微服务平台。它介绍了三个基本的微服务设计原则，并解释了如何通过业务能力和子域分解来将系统分解为微服务。
- en: 'Part 2 explains how to design, document, and build REST APIs, and how to build
    a microservice:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 第二部分解释了如何设计、记录和构建REST API，以及如何构建微服务：
- en: Chapter 4 explains the design principles of REST APIs. It introduces the six
    constraints of REST architecture and the Richardson Maturity Model, and then moves
    on to explain how we leverage the HTTP protocol to design well-structured and
    highly expressive REST APIs.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第四章解释了REST API的设计原则。它介绍了REST架构的六个约束和Richardson成熟度模型，然后继续解释我们如何利用HTTP协议来设计结构良好且高度表达的REST
    API。
- en: Chapter 5 explains how to document a REST API using the OpenAPI specification
    standard. You’ll learn the basics of JSON Schema syntax, how to define endpoints,
    how to model your data, and how to refactor your documentation with reusable schemas.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第五章解释了如何使用OpenAPI规范标准来记录REST API。你将学习JSON Schema语法的基础知识，如何定义端点，如何建模你的数据，以及如何使用可重用模式重构你的文档。
- en: 'Chapter 6 explains how to build REST APIs using two popular Python frameworks:
    FastAPI and Flask. You’ll learn about the differences between the two frameworks,
    but you’ll also learn how the principles and patterns for building APIs remain
    the same and transcend the implementation details of any technical stack.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第6章解释了如何使用两个流行的Python框架：FastAPI和Flask来构建REST API。您将了解这两个框架之间的区别，但您也将了解构建API的原则和模式保持相同，并且超越了任何技术栈的实现细节。
- en: Chapter 7 explains fundamental principles and patterns for building microservices.
    It introduces the concept of hexagonal architecture, and it explains how to enforce
    loose coupling between the layers of an application. It also explains how to implement
    database models using SQLAlchemy and how to manage database migrations using Alembic.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7章解释了构建微服务的基本原则和模式。它介绍了六边形架构的概念，并解释了如何强制执行应用程序层之间的松耦合。它还解释了如何使用SQLAlchemy实现数据库模型以及如何使用Alembic管理数据库迁移。
- en: 'Part 3 explains how to design, consume, and build GraphQL APIs:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 第3部分解释了如何设计、消费和构建GraphQL API：
- en: Chapter 8 explains how to design GraphQL APIs and how the Schema Definition
    Language works. It introduces GraphQL’s built-in types, and it explains how to
    define custom types. You’ll learn how to create relationships between types, and
    how to define queries and mutations.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第8章解释了如何设计GraphQL API以及Schema定义语言的工作原理。它介绍了GraphQL的内置类型，并解释了如何定义自定义类型。您将学习如何创建类型之间的关系，以及如何定义查询和突变。
- en: Chapter 9 explains how to consume GraphQL APIs. You’ll learn to run a mock server
    and how to explore GraphQL documentation using GraphiQL. You’ll learn to run queries
    and mutations against a GraphQL server and how to parametrize your operations.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第9章解释了如何消费GraphQL API。您将学习如何运行模拟服务器以及如何使用GraphiQL探索GraphQL文档。您将学习如何对GraphQL服务器运行查询和突变以及如何参数化您的操作。
- en: Chapter 10 explains how to build GraphQL APIs using Python’s Ariadne framework.
    You’ll learn to leverage the API documentation to automatically load data validation
    models, and also to implement resolvers for custom types, queries, and mutations.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第10章解释了如何使用Python的Ariadne框架构建GraphQL API。您将学习如何利用API文档自动加载数据验证模型，以及如何实现自定义类型、查询和突变的解析器。
- en: 'Part 4 explains how to test, secure, and deploy your microservice APIs:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 第4部分解释了如何测试、安全和部署您的微服务API：
- en: Chapter 11 explains how to add authentication and authorization to your APIs
    using standard protocols such as OpenID Connect (OIDC) and Open Authorization
    (OAuth) 2.1\. You’ll learn how to produce and validate JSON Web Tokens (JWTs)
    and how to create an authorization middleware for your APIs.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第11章解释了如何使用标准协议，如OpenID Connect (OIDC)和Open Authorization (OAuth) 2.1，向您的API添加身份验证和授权。您将学习如何生成和验证JSON
    Web Tokens (JWTs)以及如何为您的API创建授权中间件。
- en: Chapter 12 explains how to test and validate your APIs. You’ll learn what property-based
    testing is and how to use it to test your APIs, and you’ll also learn to use API
    testing automation frameworks like Dredd and schemathesis.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第12章解释了如何测试和验证您的API。您将了解基于属性的测试是什么以及如何使用它来测试您的API，您还将学习如何使用Dredd和schemathesis等API测试自动化框架。
- en: Chapter 13 explains how to Dockerize your microservice APIs, how to run them
    locally using Docker Compose, and how to publish your Docker builds to AWS Elastic
    Container Registry (ECR).
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第13章解释了如何将您的微服务API Docker化，如何使用Docker Compose在本地运行它们，以及如何将您的Docker构建发布到AWS弹性容器注册库（ECR）。
- en: Chapter 14 explains how to deploy your microservice APIs to AWS using Kubernetes.
    You’ll learn to create and operate a Kubernetes cluster using AWS EKS, how to
    launch an Aurora serverless database into a secure network, how to inject application
    configuration securely using envelope encryption, and how to set up your services
    to operate at scale.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第14章解释了如何使用Kubernetes将您的微服务API部署到AWS。您将学习如何使用AWS EKS创建和操作Kubernetes集群，如何将Aurora无服务器数据库启动到安全网络中，如何使用信封加密安全地注入应用程序配置，以及如何设置您的服务以进行大规模操作。
- en: 'All chapters have a common theme: building components of a fictitious, on-demand
    coffee delivery platform called CoffeeMesh. We introduce CoffeeMesh in chapter
    1, and in chapter 3, we break the platform down into microservices. Therefore,
    I recommend reading chapters 1 and 3 to get a better understanding of the examples
    introduced in later chapters. Otherwise, every part of the book is fairly independent,
    and each chapter is pretty self-contained. For example, if you want to learn how
    to design and build REST APIs, you can jump straight to part 2, and if your interest
    lies with GraphQL APIs, you can focus on part 3\. Equally, if you want to learn
    to add authentication and authorization to your APIs, you can jump straight into
    chapter 11, or if you want to learn how to test APIs, you can go directly to chapter
    12.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 所有章节都有一个共同的主题：构建一个虚构的、按需咖啡配送平台CoffeeMesh的组件。我们在第1章介绍了CoffeeMesh，在第3章，我们将平台分解为微服务。因此，我建议阅读第1章和第3章，以便更好地理解后续章节中介绍的示例。否则，本书的每一部分都是相当独立的，每个章节都相当自包含。例如，如果你想学习如何设计和构建REST
    API，可以直接跳转到第2部分，如果你想关注GraphQL API，可以专注于第3部分。同样，如果你想学习如何给你的API添加身份验证和授权，可以直接跳转到第11章，或者如果你想学习如何测试API，可以直接跳转到第12章。
- en: 'There’re some cross-references between chapters: for example, chapter 12 references
    the API implementations from parts 2 and 3, but if you’re comfortable building
    APIs, you should be able to skip directly to chapter 12\. The same is true for
    the other chapters in part 4.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 之间有一些章节之间的交叉引用：例如，第12章引用了第2部分和第3部分的API实现，但如果你熟悉构建API，你应该可以直接跳转到第12章。第4部分的其他章节也是如此。
- en: About the code
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关于代码
- en: This book contains many examples of source code both in numbered listings and
    in line with normal text. In both cases, source code is formatted in a `fixed-width
    font like this` to separate it from ordinary text. Sometimes code is also **`in
    bold`** to highlight code that has changed from previous steps in the chapter,
    such as when a new feature adds to an existing line of code.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书包含了大量的源代码示例，既有编号列表中的，也有与普通文本混排的。在两种情况下，源代码都以`固定宽度字体`的形式呈现，以便与普通文本区分开来。有时代码也会被**`加粗`**，以突出显示章节中从先前步骤中更改的代码，例如当新功能添加到现有代码行时。
- en: In many cases, the original source code has been reformatted; we’ve added line
    breaks and reworked indentation to accommodate the available page space in the
    book. In some cases, even this was not enough, and listings include line-continuation
    markers (➥). Additionally, comments in the source code have often been removed
    from the listings when the code is described in the text. Code annotations accompany
    many of the listings, highlighting important concepts.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，原始源代码已经被重新格式化；我们添加了换行并重新调整了缩进，以适应书籍中的可用页面空间。在某些情况下，即使这样也不够，列表中还包括了行续接标记（➥）。此外，当代码在文本中描述时，源代码中的注释通常也会从列表中移除。许多列表旁边都有代码注释，突出显示重要概念。
- en: Except for chapters 1, 3, and 4, every chapter of the book is full of coding
    examples that illustrate every new concept and pattern introduced to the reader.
    Most of the coding examples are in Python, except in chapters 5, 8, and 9, which
    focus on API design, and therefore contain examples in OpenAPI/JSON Schema (chapter
    5) and the Schema Definition Language (chapters 8 and 9). All the code is thoroughly
    explained, and therefore it should be accessible to all readers, including those
    who don’t know Python.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 除了第1章、第3章和第4章外，本书的每一章都充满了代码示例，这些示例展示了向读者介绍的所有新概念和模式。大多数代码示例都是用Python编写的，但在第5章、第8章和第9章中，重点在于API设计，因此包含OpenAPI/JSON
    Schema（第5章）和Schema定义语言（第8章和第9章）的示例。所有代码都进行了彻底的解释，因此应该对所有读者都易于理解，包括那些不了解Python的读者。
- en: 'You can get executable snippets of code from the liveBook (online) version
    of this book at [https://livebook.manning.com/book/microservice-apis](https://livebook.manning.com/book/microservice-apis).
    The complete code for the examples in the book is available for download from
    the Manning website at [www.manning.com](https://manning.com/books/microservice-apis),
    and from a GitHub repository dedicated to this book at: [https://github.com/abunuwas/microservice-apis](https://github.com/abunuwas/microservice-apis).
    Every chapter has a corresponding folder in the GitHub repo, such as ch02 for
    chapter 2\. Unless otherwise specified, all file references in each chapter are
    relative to their corresponding folder in GitHub. For example, in chapter 2, orders/app.py
    refers to the ch02/orders/app.py file in GitHub.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从本书的liveBook（在线）版本中获取可执行的代码片段，请访问[https://livebook.manning.com/book/microservice-apis](https://livebook.manning.com/book/microservice-apis)。本书中示例的完整代码可以从Manning网站[www.manning.com](https://manning.com/books/microservice-apis)下载，也可以从专门为此书建立的GitHub仓库中下载：[https://github.com/abunuwas/microservice-apis](https://github.com/abunuwas/microservice-apis)。GitHub仓库中的每个章节都有一个对应的文件夹，例如ch02对应第2章。除非另有说明，每个章节中所有文件引用都是相对于GitHub中相应文件夹的。例如，在第2章中，orders/app.py指的是GitHub中的ch02/orders/app.py文件。
- en: The GitHub repository for this book shows the final state of the code in every
    chapter. Some chapters show how to build features progressively, in iterative
    steps. In those cases, the version of the code you’ll find on GitHub matches the
    final version of the code in the chapter.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 本书GitHub仓库显示了每个章节代码的最终状态。有些章节展示了如何逐步构建功能，以迭代步骤进行。在这些情况下，您在GitHub上找到的代码版本与章节中的最终代码版本相匹配。
- en: The Python code examples in the book have been tested with Python 3.10, although
    any version of Python upwards of 3.7 should work just the same. The code and the
    commands that I use throughout the book have been tested on a Mac machine, but
    they should work without problems on Windows and Linux as well. If you work on
    Windows, I recommend you use a POSIX-compatible terminal, such as Cygwin.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的Python代码示例已在Python 3.10上进行了测试，尽管任何高于3.7版本的Python都应该可以正常工作。我在整个书中使用的代码和命令已在Mac机器上进行了测试，但它们也应该在Windows和Linux上没有问题。如果您在Windows上工作，我建议您使用POSIX兼容的终端，例如Cygwin。
- en: I’ve used Pipenv to manage dependencies in every chapter. In each chapter’s
    folder, you’ll find Pipfile and Pipfile.lock files that describe the exact dependencies
    that I used to run the code examples. To avoid problems running the code, I recommend
    you download those files at the start of every chapter, and install the dependencies
    from them.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 我在每个章节中使用了Pipenv来管理依赖项。在每个章节的文件夹中，您将找到描述我用来运行代码示例的精确依赖项的Pipfile和Pipfile.lock文件。为了避免运行代码时出现问题，我建议您在每个章节的开始时下载这些文件，并从它们中安装依赖项。
- en: liveBook discussion forum
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: liveBook讨论论坛
- en: Purchase of *Microservice APIs* includes free access to liveBook, Manning’s
    online reading platform. Using liveBook’s exclusive discussion features, you can
    attach comments to the book globally or to specific sections or paragraphs. It’s
    a snap to make notes for yourself, ask and answer technical questions, and receive
    help from the author and other users. To access the forum, go to [https://livebook.manning.com/book/microservice-apis/discussion](https://livebook.manning.com/book/microservice-apis/discussion).
    You can also learn more about Manning’s forums and the rules of conduct at [https://livebook.manning.com/discussion](https://livebook.manning.com/discussion).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 购买 *微服务API* 包含对Manning在线阅读平台liveBook的免费访问。使用liveBook的独家讨论功能，您可以在全球范围内或特定章节或段落中添加评论。为自己做笔记、提问和回答技术问题以及从作者和其他用户那里获得帮助都非常简单。要访问论坛，请访问[https://livebook.manning.com/book/microservice-apis/discussion](https://livebook.manning.com/book/microservice-apis/discussion)。您还可以在[https://livebook.manning.com/discussion](https://livebook.manning.com/discussion)了解更多关于Manning论坛和行为准则的信息。
- en: Manning’s commitment to our readers is to provide a venue where a meaningful
    dialogue between individual readers and between readers and the author can take
    place. It is not a commitment to any specific amount of participation on the part
    of the author, whose contribution to the forum remains voluntary (and unpaid).
    We suggest you try asking him some challenging questions lest his interest stray!
    The forum and the archives of previous discussions will be accessible from the
    publisher’s website for as long as the book is in print.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 曼宁对读者的承诺是提供一个场所，在那里个人读者之间以及读者与作者之间可以进行有意义的对话。这不是对作者参与特定数量活动的承诺，作者对论坛的贡献仍然是自愿的（且未付费）。我们建议你尝试向他提出一些挑战性的问题，以免他的兴趣转移！只要本书有售，论坛和先前讨论的存档将可通过出版社的网站访问。
- en: Other online resources
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他在线资源
- en: If you want to learn more about microservice APIs, you can check out my blog,
    [https://microapis.io/blog](https://microapis.io/blog), which contains additional
    resources that complement the lessons of this book. On the same website, I also
    keep an up-to-date list of workshops and seminars that I organize frequently,
    which also complement this book.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于微服务API的信息，你可以查看我的博客，[https://microapis.io/blog](https://microapis.io/blog)，其中包含补充本书课程内容的额外资源。在同一网站上，我还保持着一个经常更新的、我组织的研讨会和研讨会的最新列表，这些活动也补充了本书的内容。
- en: about the author
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于作者
- en: '![](../Images/fm_Peralta.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fm_Peralta.png)'
- en: José Haro Peralta is a software and architecture consultant. With over 10 years
    of experience, José has helped organizations big and small to build complex systems,
    architect microservice platforms, and deliver API integrations. He’s also the
    founder of microapis.io, a company that provides software consulting and training
    services. Recognized as a thought leader in the fields of cloud computing, DevOps,
    and software automation, José speaks regularly at international conferences and
    frequently organizes public workshops and seminars.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 何塞·哈罗·佩拉尔塔（José Haro Peralta）是一位软件和架构顾问。拥有超过10年的经验，何塞帮助大小组织构建复杂系统，设计微服务平台，并交付API集成。他也是microapis.io公司的创始人，该公司提供软件咨询和培训服务。何塞在云计算、DevOps和软件自动化领域被认为是思想领袖，他经常在国际会议上发表演讲，并经常组织公开研讨会和研讨会。
- en: about the cover illustration
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于封面插图
- en: The figure on the cover of *Microservice APIs* is captioned “L’invalide,” or
    “The Disabled,” and depicts a wounded French soldier who was a resident at the
    Hôtel national des Invalides, or National House of the Disabled. This image is
    taken from a collection by Jacques Grasset de Saint-Sauveur, published in 1797\.
    Each illustration is finely drawn and colored by hand.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 《微服务API》封面上的插图标题为“L’invalide”，或“残疾人”，描绘了一位受伤的法国士兵，他曾是国家残疾人之家（Hôtel national
    des Invalides）的居民。这幅图像取自雅克·格拉塞·德·圣索沃尔（Jacques Grasset de Saint-Sauveur）的收藏，该收藏于1797年出版。每一幅插图都是手工精心绘制和着色的。
- en: In those days, it was easy to identify where people lived and what their trade
    or station in life was just by their dress. Manning celebrates the inventiveness
    and initiative of the computer business with book covers based on the rich diversity
    of regional culture centuries ago, brought back to life by pictures from collections
    such as this one.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在那些日子里，人们的生活地点和他们的职业或社会地位很容易通过他们的着装来识别。曼宁通过基于几个世纪前丰富多样的地区文化的封面，以及此类收藏中的图片，来庆祝计算机行业的创新精神和主动性。
- en: '* * *'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: ¹ J. Simpson, “20 Impressive API Economy Statistics” ([https://nordicapis.com/20-impressive-api-economy-statistics/](https://nordicapis.com/20-impressive-api-economy-statistics/)
    [accessed May 26, 2022]).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ¹ J. Simpson，"20个令人印象深刻的API经济统计数据" ([https://nordicapis.com/20-impressive-api-economy-statistics/](https://nordicapis.com/20-impressive-api-economy-statistics/)
    [访问日期：2022年5月26日])。
- en: '² “Microservices in the enterprise, 2021: Real benefits, worth the challenges,”
    ([https://www.ibm.com/downloads/cas/OQG4AJAM](https://www.ibm.com/downloads/cas/OQG4AJAM)
    [accessed 26th May 2022]).'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: ² "企业中的微服务，2021年：实际效益，值得挑战"，([https://www.ibm.com/downloads/cas/OQG4AJAM](https://www.ibm.com/downloads/cas/OQG4AJAM)
    [访问日期：2022年5月26日])。
- en: ³ Salt Security, “State of API Security Q3 2022”, p. 4 ([https://content.salt.security/state-api-report.html](https://content.salt.security/state-api-report.html)).
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ³ Salt Security，"API安全状态 Q3 2022"，第4页 ([https://content.salt.security/state-api-report.html](https://content.salt.security/state-api-report.html))。
