- en: appendix Installation instructions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录 安装说明
- en: NOTE This book assumes that you’ll be using Python 3 unless otherwise stated,
    as in chapter 7, where the associated dependency, BregmanToolkit, requires Python
    2.7\. Similarly, in chapter 19, the VGG16.py library requires Python 2.7\. Code
    listings for Python 3 abide by TensorFlow v1.15, and the examples in chapter 7
    and 19 use TensorFlow 1.14.0 because it’s compatible with Python 2.7\. The accompanying
    source code on GitHub will always be up to date with the latest version ([http://mng.bz/GdKO](http://mng.bz/GdKO)).
    Additionally, **there is currently a major effort to port the examples in the
    book to TensorFlow 2.x, and that work is present in the tensorflow2 branch in
    the GitHub repo**. You can find updated listings there, so check back often.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：除非另有说明，否则本书假定您将使用Python 3，例如在第7章中，相关的依赖项BregmanToolkit需要Python 2.7。同样，在第19章中，VGG16.py库需要Python
    2.7。Python 3的代码列表遵循TensorFlow v1.15，第7章和第19章的示例使用TensorFlow 1.14.0，因为它与Python
    2.7兼容。GitHub上的配套源代码将始终与最新版本保持一致（[http://mng.bz/GdKO](http://mng.bz/GdKO)）。此外，**目前正在进行将本书中的示例迁移到TensorFlow
    2.x的重大努力，这项工作在GitHub仓库的tensorflow2分支中可见**。您可以在那里找到更新的列表，请经常查看。
- en: You can install TensorFlow in a couple of ways. This appendix covers one installation
    method that works on all platforms, including Windows. If you’re familiar with
    UNIX-based systems (such as Linux and macOS), feel free to use one of the installation
    approaches in the official documentation at [http://mng.bz/zrAQ](http://mng.bz/zrAQ)
    or, if you are experimenting with the TensorFlow2 code branch, at [https://www.tensorflow
    .org/install](https://www.tensorflow.org/install). As Scott Penberthy, head of
    applied AI and TensorFlow at Google, states in the foreword for this book, the
    fields of AI and ML are evolving so fast that in the time it took to write this
    edition of the book, several versions of TensorFlow were released, including some
    in the 2.x series and a few in the 1.x series. The techniques for model building
    in all chapters will persist independently of any changes in the TensorFlow API
    or improvements in any individual model.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过几种方式安装TensorFlow。本附录介绍了一种适用于所有平台（包括Windows）的安装方法。如果您熟悉基于UNIX的系统（如Linux和macOS），请随意使用官方文档中提供的安装方法之一，网址为[http://mng.bz/zrAQ](http://mng.bz/zrAQ)，或者如果您正在尝试TensorFlow2代码分支，请访问[https://www.tensorflow.org/install](https://www.tensorflow.org/install)。正如本书前言中Google应用AI和TensorFlow负责人Scott
    Penberthy所说，AI和ML领域发展如此迅速，以至于在撰写本书的这一版时，TensorFlow已经发布了几个版本，包括2.x系列的一些版本和1.x系列的一些版本。所有章节中模型构建的技术将独立于TensorFlow
    API的任何变化或任何单个模型的改进而持续存在。
- en: I also make note of required datasets in this appendix, as well as the libraries
    that are needed to run the code examples in the book. I’ve collected the datasets
    for you in a Dropbox location, so pay attention to where to place the input data,
    and the code examples will take care of the rest.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我还在本附录中记录了所需的数据库集，以及运行本书中代码示例所需的库。我已经为您收集了数据库集，请注意放置输入数据的位置，代码示例将处理其余部分。
- en: Finally, to give you a feel for some of the minor differences in TensorFlow
    2 and TensorFlow 1, I’ll walk you through a few changes you’ll need to make to
    get the customer-call-center prediction example working with TensorFlow 2.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，为了让您了解TensorFlow 2和TensorFlow 1之间的一些细微差异，我将向您介绍一些更改，以便使用TensorFlow 2使客户呼叫中心预测示例正常工作。
- en: Without further ado, let’s install TensorFlow by using a Docker container.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 不再拖延，让我们通过使用Docker容器来安装TensorFlow。
- en: A.1 Installing the book’s code with Docker
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 使用Docker安装本书的代码
- en: '*Docker* is a system for packaging software dependencies to keep everyone’s
    installa-tion environment identical. This standardization helps limit inconsistencies
    among computers.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '*Docker*是一种打包软件依赖项的系统，以确保每个人的安装环境相同。这种标准化有助于限制计算机之间的不一致性。'
- en: 'TIP You can install TensorFlow in many ways other than using a Docker container.
    Visit the official documentation for more details on installing TensorFlow: [https://www.tensorflow.org/install](https://www.tensorflow.org/install).
    Also check out the official Dockerfile for the book, which describes what software
    and libraries and data you will need to run through the book with ease ([http://mng.bz/0ZA6](http://mng.bz/0ZA6)).'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 提示：您可以使用除了使用Docker容器之外的其他多种方式安装TensorFlow。访问官方文档以获取有关安装TensorFlow的更多详细信息：[https://www.tensorflow.org/install](https://www.tensorflow.org/install)。同时，查看本书的官方Dockerfile，它描述了您需要运行本书所需的软件、库和数据（[http://mng.bz/0ZA6](http://mng.bz/0ZA6)）。
- en: A.1.1 Installing Docker in Windows
  id: totrans-9
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1.1 在Windows中安装Docker
- en: Docker works only on 64-bit Windows (7 or later) with virtualization enabled.
    Fortunately, most consumer laptops and desktops satisfy this requirement. To check
    whether your computer supports Docker, open Control Panel, click System and Security,
    and then click System. You see the details about your Windows machine, including
    processor and system type. If the system is 64-bit, you’re almost good to go.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Docker只能在启用虚拟化的64位Windows（7或更高版本）上运行。幸运的是，大多数消费级笔记本电脑和台式机都满足这一要求。要检查你的电脑是否支持Docker，请打开控制面板，点击“系统和安全”，然后点击“系统”。你将看到有关你的Windows机器的详细信息，包括处理器和系统类型。如果系统是64位，你几乎就可以开始了。
- en: The next step is checking whether your processor can support virtualization.
    In Windows 8 or later, open the Task Manager (press Ctrl-Shift-Esc), and click
    the Performance tab. If Virtualization shows up as Enabled (figure A.1), you’re
    all set. For Windows 7, you should use the Microsoft Hardware-Assisted Virtualization
    Detection Tool ([http://mng.bz/cBlu](http://mng.bz/cBlu)).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是检查你的处理器是否支持虚拟化。在Windows 8或更高版本中，打开任务管理器（按Ctrl-Shift-Esc），然后点击性能选项卡。如果虚拟化显示为启用（图A.1），则一切准备就绪。对于Windows
    7，你应该使用Microsoft硬件辅助虚拟化检测工具([http://mng.bz/cBlu](http://mng.bz/cBlu))。
- en: A.1.2 Installing Docker in Linux
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1.2 在Linux中安装Docker
- en: Now that you know whether your computer can support Docker, install Docker Toolbox,
    located at [http://mng.bz/K580](https://shortener.manning.com/K580). Run the downloaded
    setup executable, and accept all the defaults by clicking Next in the dialog boxes.
    When the toolbox is installed, run the Docker Quickstart Terminal.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经知道你的电脑是否支持Docker，请安装Docker Toolbox，位于[http://mng.bz/K580](https://shortener.manning.com/K580)。运行下载的安装可执行文件，并在对话框中点击“下一步”以接受所有默认设置。当工具箱安装完成后，运行Docker
    Quickstart Terminal。
- en: A.1.3 Installing Docker in macOS
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1.3 在macOS中安装Docker
- en: Docker works in macOS 10.8 Mountain Lion or later. Install the Docker Toolbox
    from [http://mng.bz/K580](http://mng.bz/K580). After installation, open the Docker
    Quickstart Terminal from the Applications folder or Launchpad.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Docker在macOS 10.8 Mountain Lion或更高版本上运行。从[http://mng.bz/K580](http://mng.bz/K580)安装Docker
    Toolbox。安装后，从应用程序文件夹或启动盘打开Docker Quickstart Terminal。
- en: A.1.4 Using Docker
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1.4 使用Docker
- en: I’ve created a Dockerfile that builds an image containing Python 3.7 and 2.7,
    installs Jupyter and the required libraries with Python’s `pip` installer, and
    then creates the necessary dependency libraries and folder structure to run the
    code examples from the book. You can use the `build_environment.sh` and `run_environment.sh`
    scripts, respectively, to build and run the Docker image if you want to build
    it from scratch. The Docker build also includes all necessary third-party libraries
    to run the notebooks and the input data needed to train models.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我创建了一个Dockerfile，它构建了一个包含Python 3.7和2.7的镜像，使用Python的`pip`安装程序安装Jupyter和所需的库，然后创建必要的依赖库和文件夹结构以运行书中的代码示例。如果你想从头开始构建，可以使用`build_environment.sh`和`run_environment.sh`脚本分别构建和运行Docker镜像。Docker构建还包括运行笔记本和训练模型所需的所有必要第三方库和输入数据。
- en: '![APPA_F01_Mattmann2](../Images/APPA_F01_Mattmann2.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![APPA_F01_Mattmann2](../Images/APPA_F01_Mattmann2.png)'
- en: Figure A.1 Ensure that your 64-bit computer has virtualization enabled.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.1 确保你的64位电脑已启用虚拟化。
- en: WARNING Be careful—the container is ~40 GB when it’s built, because machine
    learning is data- and compute-intensive. Prepare yourself for the space on your
    laptop and/or the time to build the Docker container.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 警告：请注意——当构建时，容器大约有40 GB，因为机器学习是数据密集型和计算密集型的。请准备好你的笔记本电脑和/或构建Docker容器所需的时间。
- en: 'Alternatively, you can run the following commands to execute the image I’ve
    created and pushed up to DockerHub for you:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，你可以运行以下命令来执行我为你创建并推送到DockerHub的镜像：
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Think of DockerHub as being a home for prebuilt environment images. You can
    explore various containers that the community has published at [https://hub.docker
    .com](https://hub.docker.com/). The environment contains a Jupyter Notebooks hub
    that you can visit by entering **http://127.0.0.1:8888** in your browser. Remember
    to select the right kernel (Python3 or Python2), depending on the specific chapter
    examples.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 将DockerHub想象成一个预构建环境镜像的家园。你可以在[https://hub.docker.com](https://hub.docker.com/)上探索社区发布的各种容器。该环境包含一个Jupyter
    Notebooks中心，你可以在浏览器中输入**http://127.0.0.1:8888**来访问。请记住，根据特定章节的示例，选择正确的内核（Python3或Python2）。
- en: A.2 Getting the data and storing models
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.2 获取数据和存储模型
- en: You will generate lots of data when running the notebooks, particularly during
    the steps of the machine-learning process that involve building models. But to
    train and build those models, you also need data. I have created an Dropbox folder
    where you can download input data for use in training models from the book. Access
    the folder at [http://mng.bz/9A41](http://mng.bz/9A41).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行笔记本时，你会生成大量数据，尤其是在涉及构建模型的机器学习过程步骤中。但为了训练和构建这些模型，你也需要数据。我已经创建了一个Dropbox文件夹，你可以从中下载用于训练模型的数据。通过[http://mng.bz/9A41](http://mng.bz/9A41)访问该文件夹。
- en: The following pointers tell you what data you need for which chapters and where
    to put it. Unless otherwise specified, data should be placed in the data/ folder.
    Note that as you are running the notebooks, the notebooks will generate TensorFlow
    models, writing them and checkpoint files to the models/ folder. A `download-data.sh`
    script is provided in the GitHub repo to automate downloading the data for each
    chapter and placing that data in the folder that the notebooks expect. Additionally,
    if you are using the Docker build, the container will automatically run the script
    and download the data for you.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 以下指针告诉你在哪些章节需要哪些数据以及放置的位置。除非另有说明，否则数据应放置在data/文件夹中。请注意，当你运行笔记本时，笔记本将生成TensorFlow模型，并将它们和检查点文件写入models/文件夹。GitHub仓库提供了一个`download-data.sh`脚本，用于自动下载每章的数据并将数据放置在笔记本期望的文件夹中。此外，如果你使用Docker构建，容器将自动运行脚本并为你下载数据。
- en: Chapter 4
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第4章
- en: data/311.csv
  id: totrans-28
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/311.csv
- en: Chapter 6
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第6章
- en: data/word2vec-nlp-tutorial/labeledTrainData.tsv
  id: totrans-30
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/word2vec-nlp-tutorial/labeledTrainData.tsv
- en: data/word2vec-nlp-tutorial/testData.tsv
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/word2vec-nlp-tutorial/testData.tsv
- en: data/aclImdb/test/neg
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/aclImdb/test/neg
- en: data/aclImdb/test/pos
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/aclImdb/test/pos
- en: Chapter 7
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7章
- en: data/audio_dataset
  id: totrans-35
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/audio_dataset
- en: data/TalkingMachinesPodcast.wav
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/TalkingMachinesPodcast.wav
- en: Chapter 8
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第8章
- en: data/User Identification From Walking Activity
  id: totrans-38
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/User Identification From Walking Activity
- en: Chapter 10
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第10章
- en: data/mobypos.txt
  id: totrans-40
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/mobypos.txt
- en: Chapter 12
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第12章
- en: data/cifar-10-batches-py
  id: totrans-42
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/cifar-10-batches-py
- en: data/MNIST_data (if you try the MNIST extra example)
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/MNIST_data（如果你尝试MNIST附加示例）
- en: Chapter 14
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第14章
- en: data/cifar-10-batches-py
  id: totrans-45
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/cifar-10-batches-py
- en: Chapter 15
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第15章
- en: data/cifar-10-batches-py
  id: totrans-47
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/cifar-10-batches-py
- en: data/vgg_face_dataset—The VGG -Face metadata, including celebrity names
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/vgg_face_dataset—VGG -Face的元数据，包括名人姓名
- en: data/vgg-face—The actual VGG -Face data
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/vgg-face—实际的VGG -Face数据
- en: data/vgg_face_full_urls.csv—Metadata information about VGG -Face URLs
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/vgg_face_full_urls.csv—VGG -Face URL的元数据信息
- en: data/vgg_face_full.csv—Metadata information about all VGG -Face data
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/vgg_face_full.csv—所有VGG -Face数据的元数据信息
- en: data/vgg-models/checkpoints-1e3x4-2e4-09202019—To run the VGG -Face Estimator
    additional example
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/vgg-models/checkpoints-1e3x4-2e4-09202019—运行VGG -Face估算器附加示例
- en: Chapter 16
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第16章
- en: data/international-airline-passengers.csv
  id: totrans-54
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/international-airline-passengers.csv
- en: Chapter 17
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第17章
- en: data/LibriSpeech
  id: totrans-56
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/LibriSpeech
- en: libs/basic_units
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: libs/basic_units
- en: libs/RNN-Tutorial
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: libs/RNN-Tutorial
- en: Chapter 18
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第18章
- en: data/seq2seq
  id: totrans-60
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/seq2seq
- en: Chapter 19
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第19章
- en: libs/vgg16/laska.png
  id: totrans-62
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: libs/vgg16/laska.png
- en: data/cloth_folding_rgb_vids
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: data/cloth_folding_rgb_vids
- en: A.3 Necessary libraries
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.3 必要的库
- en: Though the book has TensorFlow in its name, the book is as much about generalized
    machine learning and its theory, as well as the suites of frameworks that come
    in handy for dealing with machine learning. The requirements for running the notebooks
    are outlined in the following list; they can also be installed by hand or automatically
    installed by the requirements.txt and requirements-py2.txt files in Docker. Also,
    the GitHub repo has a `download-libs.sh` script that you can run by hand or let
    Docker run for you. This script grabs specialized libraries required by the notebooks
    that can’t be installed via `pip`. You should `pip`-install the rest of them,
    using your favorite Python version. The examples in this book have been shown
    to work in Python 2.7 and Python 3.7\. I didn’t have time to test all of them,
    but I am happy to receive pull requests and code contributions for things I’ve
    missed.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这本书的名字中有TensorFlow，但这本书同样涉及广义机器学习和其理论，以及处理机器学习时非常有用的框架套件。运行笔记本的要求在以下列表中概述；它们也可以通过手动安装或通过Docker中的requirements.txt和requirements-py2.txt文件自动安装。此外，GitHub仓库中有一个`download-libs.sh`脚本，你可以手动运行或让Docker为你运行。此脚本抓取笔记本所需的专用库，这些库不能通过`pip`安装。你应该使用你喜欢的Python版本安装其余的库。本书中的示例已在Python
    2.7和Python 3.7中验证过。我没有时间测试所有这些，但我很高兴收到我遗漏的pull请求和代码贡献。
- en: TensorFlow (book works in 1.13.1, 1.14.0, 1.15.0, and active development in
    tensorflow2 branch on version 2.2 and later)
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TensorFlow（本书适用于1.13.1、1.14.0、1.15.0，并在书的存储库的tensorflow2分支上进行2.2及以后的版本的开发）
- en: Jupyter
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jupyter
- en: Pandas (for dataframes and easy tabular data manipulation)
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pandas（用于数据框和易于表格数据处理）
- en: NumPy and SciPy
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NumPy和SciPy
- en: Matplotlib
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Matplotlib
- en: NLTK (for anything text or natural language processing such as sentiment analysis
    from chapter 6)
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NLTK（用于任何文本或自然语言处理，如第6章中的情感分析）
- en: TQDM (for progress bars)
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TQDM（用于进度条）
- en: SK-learn (for various helper functions)
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SK-learn（用于各种辅助函数）
- en: BregmanToolkit (for audio examples in chapter 7)
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BregmanToolkit（用于第7章中的音频示例）
- en: Tika
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tika
- en: Ystockquote
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ystockquote
- en: Requests
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Requests
- en: OpenCV
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenCV
- en: Horovod (use 0.18.2 or 0.18.1 with the Maverick2 VGG -Face model)
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Horovod（使用0.18.2或0.18.1与Maverick2 VGG -Face模型）
- en: 'VGG16: vgg16.py, vgg16_weights.npz, imagenet_classes.py, and laska.png (works
    only with Python 2.7; place the software in libs/vgg16)'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VGG16：vgg16.py、vgg16_weights.npz、imagenet_classes.py和laska.png（仅与Python 2.7兼容；将软件放在libs/vgg16中）
- en: PyDub (used in chapter 17 with LSTMs)
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PyDub（在第17章与LSTMs一起使用）
- en: Basic Units (chapter 17; place in libs/basic_units/ folder)
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本单位（第17章；放置在libs/basic_units/文件夹中）
- en: RNN-Tutorial (used in chapter 17 to help implement and train the deep speech
    model)
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RNN-Tutorial（在第17章中使用，以帮助实现和训练深度语音模型）
- en: A.4 Converting the call-center example to TensorFlow2
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.4 将呼叫中心示例转换为TensorFlow2
- en: 'TensorFlow v2 (TFv2) has introduced a variety of breaking changes. Some of
    these changes affect workflow; others require adopting new paradigms. Eager execution,
    for example, requires a change from declarative to imperative programming. You
    no longer use TensorFlow’s `Placeholder`s; instead, you rely on different libraries
    to accomplish tasks that have been deprecated in v2\. The examples, exercises,
    and listings in the text and on the GitHub repository page are actively being
    translated from TensorFlow to TensorFlow2 in the `tensorflow2` branch of the book’s
    repository ([http://mng.bz/Qmq1](http://mng.bz/Qmq1)). I am using the following
    methodologies:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: TensorFlow v2（TFv2）引入了许多破坏性变更。其中一些变更影响了工作流程；其他则需要采用新的范式。例如，急切执行需要从声明式编程转换为命令式编程。您不再使用TensorFlow的`Placeholder`；相反，您依赖于不同的库来完成在v2中已弃用的任务。文本和GitHub存储库页面上的示例、练习和列表正在积极地从TensorFlow转换为TensorFlow2，在书的存储库的`tensorflow2`分支中（[http://mng.bz/Qmq1](http://mng.bz/Qmq1)）。我正在使用以下方法：
- en: I use the official TFv1-to-TFv2 migration guide wherever possible.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我尽可能使用官方的TFv1到TFv2迁移指南。
- en: When the migration guide does not suffice, I attempt to replicate results attained
    in the text and in the master branch of the repository.
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当迁移指南不足以解决问题时，我会尝试复制文本和存储库主分支中获得的成果。
- en: 'If you’re interested in how a more-elaborate project in TensorFlow would be
    migrated from v1 to v2, I encourage you to check out the migration guide linked
    at [https://www.tensorflow.org/guide/migrate](https://www.tensorflow.org/guide/migrate).
    Also, you can see whether the official upgrade script would work in your situation.
    The upgrade script is located at [https://www .tensorflow.org/guide/upgrade](https://www.tensorflow.org/guide/upgrade).
    Note that I am not attempting to use the automatic upgrade script in this repository
    for two reasons:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对如何将更复杂的项目从v1迁移到v2感兴趣，我鼓励您查看链接在[https://www.tensorflow.org/guide/migrate](https://www.tensorflow.org/guide/migrate)的迁移指南。您还可以查看官方升级脚本是否适用于您的情况。升级脚本位于[https://www
    .tensorflow.org/guide/upgrade](https://www.tensorflow.org/guide/upgrade)。请注意，我在这存储库中不尝试使用自动升级脚本，原因如下：
- en: The conversion script automates as much as possible, but some syntactical and
    stylistic changes cannot be performed by the script.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转换脚本尽可能地自动化，但某些语法和风格上的更改无法由脚本执行。
- en: There is value in fully examining the changes from TF v1 to TF v2\. Going through
    the process itself is a learning experience, and even I have (plenty of) things
    to learn!
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完全检查从TF v1到TF v2的变化是有价值的。经历这个过程本身就是一种学习经历，即使是我也（有很多）东西要学习！
- en: 'Finally, there is a one-liner of code that allows full backward compatibility
    with TensorFlow 1 even while using the new TensorFlow v2 library. You place this
    line at the top of your code for it to behave like TFv1\. Per the TensorFlow v1-to-v2
    migration guide, insert the following at the beginning of the listings in the
    book to run unmodified TFv1 code in TFv2:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，有一行代码允许在使用新的TensorFlow v2库的同时，与TensorFlow 1完全向后兼容。您将此行代码放置在代码顶部，以便它表现得像TFv1。根据TensorFlow
    v1到v2迁移指南，在书中的列表开头插入以下内容，以便在TFv2中运行未经修改的TFv1代码：
- en: '[PRE1]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: That’s it! Simple, right? You would also remove the `import tensorflow` declaration
    present in the listing and replace it with the preceding one, of course. In section
    A.4.1, I quickly revisit the call-center prediction example from chapter 4 to
    show you the crux of converting from TFv1 to TFv2.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 就这些！简单，对吧？你也会移除列表中现有的`import tensorflow`声明，并用前面提到的声明替换它，当然。在A.4.1节中，我快速回顾了第4章中的呼叫中心预测示例，以向你展示从TFv1到TFv2转换的核心。
- en: A.4.1 The call-center example with TF2
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4.1 使用TF2的呼叫中心示例
- en: Chapter 4 applies the machine-learning concept of regression by using real call-center
    data from New York City’s 311 service to make a TensorFlow graph that learns the
    week 1-52 call-volume values and tries to predict them accurately. Because the
    data is continuous and not discrete, in machine learning, this problem is called
    regression, not classification. Figure A.2 shows the 311 call-center data.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 第4章通过使用纽约市311服务提供的真实呼叫中心数据，应用机器学习的回归概念，创建一个TensorFlow图来学习第1-52周的电话量值，并尝试准确预测它们。因为数据是连续的而不是离散的，在机器学习中，这个问题被称为回归而不是分类。图A.2显示了311呼叫中心数据。
- en: '![APPA_F02_Mattmann2](../Images/APPA_F02_Mattmann2.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![APPA_F02_Mattmann2](../Images/APPA_F02_Mattmann2.png)'
- en: Figure A.2 A plot of call-frequency counts on the y-axis compared with weeks
    of the year (0-51) on the x-axis. Activity swells in the May 2014 time-frame and
    tapers in late August 2014.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.2 y轴上电话频率计数与x轴上的一年中的周数（0-51）的对比图。活动在2014年5月时间段内增加，并在2014年8月底减少。
- en: In the original TFv1 portion of the code, I discussed in the chapter how to
    read the CSV New York City 311 data and parse it into a Python dictionary. Then
    I showed you how to convert that dictionary into `X_train` and `Y_train` variables
    representing the input week and call-volume data. The data is normalized by highest
    call volume in a 52-week span to achieve a `0`-to-`1` y-axis scale for `Y_train`.
    To construct the TensorFlow model graph, I use the nonlinear Gaussian model (bell-curve
    shape) to represent the volume. You built a TensorFlow graph training for 1,000
    epochs to learn the variables mu and sigma that are input into the Gaussian model.
    After the model learns the parameters, I show you how to input them into a NumPy
    version of the model, print the learned curve, and visualize and plot error and
    accuracy. The original listing is shown in listing A.1 for your reference.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在原始TFv1代码部分，我在本章中讨论了如何读取纽约市311的CSV数据并将其解析为Python字典。然后我向你展示了如何将这个字典转换为代表输入周和电话量数据的`X_train`和`Y_train`变量。数据通过52周内的最高电话量进行归一化，以实现`Y_train`的`0`到`1`的y轴刻度。为了构建TensorFlow模型图，我使用非线性高斯模型（钟形曲线形状）来表示量。你构建了一个训练1,000个epoch的TensorFlow图来学习输入高斯模型中的变量mu和sigma。在模型学习参数后，我向你展示了如何将它们输入到NumPy版本的模型中，打印学习到的曲线，并可视化和绘制误差和准确度。原始列表显示在列表A.1中供你参考。
- en: Listing A.1 Setting up and training the TensorFlow model for your Gaussian curve
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 列表A.1 设置和训练TensorFlow模型以拟合高斯曲线
- en: '[PRE2]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: ❶ Sets the learning rate for each epoch
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 设置每个epoch的学习率
- en: ❷ Trains for 5,000 epochs
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 训练5,000个epoch
- en: ❸ Sets up the input (X) and the values to predict (Y)
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 设置输入（X）和预测的值（Y）
- en: ❹ Defines the learned parameters mu and sig for our model
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 定义模型学习的参数mu和sig
- en: ❺ Creates the model based on the TensorFlow graph
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 基于TensorFlow图创建模型
- en: ❻ Defines the cost function as the L2 norm and sets up the training operation
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ❻ 定义成本函数为L2范数并设置训练操作
- en: ❼ Initializes the TensorFlow session
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: ❼ 初始化TensorFlow会话
- en: ❽ Performs the training and learns the values for mu and sig
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: ❽ 执行训练并学习mu和sig的值
- en: ❾ Prints the learned values for mu and sig
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: ❾ 打印mu和sig的学习值
- en: ❿ Closes the session
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: ❿ 关闭会话
- en: What if I told you that the TensorFlow 2 version of chapter 4 reuses all the
    same data preparation, evaluation and plotting code, with only a slight change
    to listing A.1 (the model)? I hope you’d say that’s believable because as I’ve
    shown you, much of the work in machine learning involves TensorFlow and friends
    —helper libraries to do data preparation such as Pandas or Tika, or data evaluation
    and exploratory analysis using Jupyter and Matplotlib. All that code stays the
    same and is independent of TensorFlow.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我告诉你，第4章的TensorFlow 2版本重用了所有相同的数据准备、评估和绘图代码，只有对列表A.1（模型）进行了一点点修改，我希望你会说这是可信的，因为正如我向你展示的那样，机器学习的大部分工作都涉及TensorFlow及其辅助库——如Pandas或Tika这样的数据准备辅助库，或使用Jupyter和Matplotlib进行数据评估和探索性分析。所有这些代码都保持不变，并且与TensorFlow独立。
- en: 'The TensorFlow code follows this pattern throughout the book:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: TensorFlow代码在整本书中遵循以下模式：
- en: Sets up the model hyperparameters. Sometimes, I show you how to derive hyperparameters
    by using the data you’re using in the book. At other times, I point out that other
    people have spent lots of time and resources deriving them, so you should reuse
    them.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置模型超参数。有时，我会向你展示如何使用书中使用的数据推导超参数。在其他时候，我会指出其他人已经花费了大量时间和资源来推导它们，所以你应该重用它们。
- en: Trains the model on data that you (or someone else) gathered and that you’ve
    cleaned and prepared.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你（或其他人）收集并清洗准备好的数据上训练模型。
- en: Evaluates the learned model and how well you did and it did,
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 评估学习模型以及你的表现和它的表现，
- en: Steps 1 and 2 are slight changes in the call-center prediction model. First,
    TensorFlow2 natively incorporates the Keras library for machine learning. This
    incorporation was done for reasons beyond the scope of this book, but one benefit
    is the use of Keras’s optimizers. Instead of using optimizers from `tf.train`
    such as `tf.train .GradientDescentOptimizer`, you use `tf.keras.optimizers` such
    as `tf.keras .optimizers.SGD` instead.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 第1步和第2步是对呼叫中心预测模型的轻微修改。首先，TensorFlow2原生地集成了Keras机器学习库。这种集成超出了本书的范围，但一个好处是使用了Keras的优化器。你不再使用`tf.train`中的优化器，如`tf.train.GradientDescentOptimizer`，而是使用`tf.keras.optimizers`，例如`tf.keras.optimizers.SGD`。
- en: Another change is that instead of running through each week in a `for` loop
    per epoch and injecting the week’s individual call-volume value via `placeholders`
    in TFv1, in TFv2 the desire is to do away with them, so you use declarative programming.
    In other words, the `train` function should take the data stepwise or whole-cloth
    and train on it without per-step injection in the `feed_dict` parameter. There
    is no need to use data injection. You can use `tf.constant` instead, seed the
    constant with the 52 weeks of data per epoch, and eliminate a `for` loop in the
    process. Because TFv2 encourages declarative programming without injection, you
    can use Python’s lambda inline functions to define your model, and use `cost`
    and `loss` as inline functions to construct the model declaratively.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个变化是，在TFv1中，不是在每个epoch中通过`for`循环运行每个星期，并通过`placeholders`注入该周的个别呼叫量值，在TFv2中，我们希望去掉这些，所以你使用声明式编程。换句话说，`train`函数应该逐步或整体地获取数据并在其上训练，而不需要在`feed_dict`参数中进行每步注入。不需要使用数据注入。你可以使用`tf.constant`，用每个epoch的52周数据初始化常数，并在过程中消除`for`循环。由于TFv2鼓励无注入的声明式编程，你可以使用Python的lambda内联函数来定义你的模型，并使用`cost`和`loss`作为内联函数来声明式地构建模型。
- en: That’s all that changes, as you can see in listing A.2.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如列表A.2所示，这就是所有的变化。
- en: Listing A.2 TensorFlow 2 version of the call-center prediction model
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 列表A.2 TensorFlow 2版本的呼叫中心预测模型
- en: '[PRE3]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: ❶ Defines the hyperparameters (unchanged from TFv1 listing)
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 定义超参数（与TFv1列表中的不变）
- en: ❷ New hyperparameter for Keras optimizer accelerates gradients in the right
    direction.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 为Keras优化器定义的新超参数加速了正确方向的梯度。
- en: ❸ Placeholders are gone, replaced by the constant whole-cloth week/call-volume
    data.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 占位符已消失，被常数整个布的周/呼叫量数据所取代
- en: ❹ Learned parameters
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 学习到的参数
- en: ❺ Defines the declarative Gaussian model using lambda functions and uses real
    X values, not placeholders
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 使用lambda函数定义声明式高斯模型，并使用真实的X值而不是占位符
- en: ❻ Defines the cost by using real Y values
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: ❻ 使用真实的Y值定义成本
- en: ❼ Uses Keras optimizers
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: ❼ 使用Keras优化器
- en: ❽ Trains in a declarative way and removes the for loop with injection present
    in listing A.1
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: ❽ 以声明式方式训练并移除了列表A.1中存在的带有注入的for循环
- en: ❾ Obtains the learned parameters and prints the result
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: ❾ 获取学习到的参数并打印结果
- en: You can examine the working TensorFlow v2 call-center listing at [http://mng.bz/WqR1](http://mng.bz/WqR1).
    The remainder of the notebook is the same as the TensorFlow v1 version, including
    steps that handle data reading and cleaning, preparation, and exploratory analysis.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以检查TensorFlow v2版本的呼叫中心列表[http://mng.bz/WqR1](http://mng.bz/WqR1)。笔记本的其余部分与TensorFlow
    v1版本相同，包括处理数据读取和清洗、准备和探索性分析的步骤。
- en: Check back in the tensorflow2 branch of the code repository and follow along
    as I and others (possibly you!) convert the notebooks to TensorFlow v2\. I’ll
    be using the best practices defined in the migration guide and in this appendix.
    It’s important to point out that most of the code and techniques will remain the
    same independent of the publication of this book and the future versions of TensorFlow
    that are released. Stick to the data preparation, cleaning, and hyperparameter
    selection and model-building techniques I’ve taught you. Regardless of the TensorFlow
    version, they’ll last a lifetime!
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 请回到代码仓库的 tensorflow2 分支，并跟随我以及其他人（可能包括你！）将笔记本转换为 TensorFlow v2。我将使用迁移指南和附录中定义的最佳实践。重要的是要指出，无论这本书的发布还是未来发布的
    TensorFlow 的版本，大部分代码和技术都将保持不变。坚持使用我教给你的数据准备、清洗、超参数选择和模型构建技术。无论 TensorFlow 的版本如何，它们都将伴随你一生！
