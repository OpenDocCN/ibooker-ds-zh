- en: 6 Deployment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 6 部署
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Options for hosting your Jamstack site
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 托管您的 Jamstack 网站的选项
- en: Using basic web servers
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用基本的 Web 服务器
- en: Considering cloud file storage providers
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑云文件存储提供商
- en: Choosing options tailored for the Jamstack
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择适合 Jamstack 的选项
- en: Congratulations! You’ve adopted the Jamstack way and have discovered the joy
    of using a local static site generator to turn dynamic content into simple files.
    The next step is to get those files on the internet so that they can be an actual
    website as opposed to a set of bits on your device.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！您已经采用了 Jamstack 的方式，并发现了使用本地静态网站生成器将动态内容转换为简单文件的乐趣。下一步是将这些文件上传到互联网，使它们成为真正的网站，而不是您设备上的一组数据。
- en: In this chapter, we’re going to cover multiple different options for getting
    those files online and available to the world at large. We’ll cover the pros and
    cons of each, so you can determine which option makes sense for you and your project.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍多种将文件上传到互联网并使其对公众可用的不同选项。我们将讨论每个选项的优缺点，以便您可以确定哪个选项适合您和您的项目。
- en: 6.1 Web servers—The tried-and-true way
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.1 Web 服务器——经过考验和验证的方法
- en: 'The first and simplest solution for hosting your Jamstack content is the solution
    we’ve used since the beginning of the web: a simple web server. Web servers like
    Apache ([http://httpd.apache.org/](http://httpd.apache.org/)) and IIS ([https://www.iis.net/](https://www.iis.net/))
    have been around for decades and have powered everything from the smallest fan
    site to the largest e-commerce sites on the internet.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 托管您的 Jamstack 内容的第一个和最简单的解决方案是自互联网开始以来我们就一直在使用的解决方案：一个简单的 Web 服务器。像 Apache ([http://httpd.apache.org/](http://httpd.apache.org/))
    和 IIS ([https://www.iis.net/](https://www.iis.net/)) 这样的 Web 服务器已经存在了几十年，为从最小的粉丝网站到互联网上最大的电子商务网站提供了动力。
- en: Using these options means simply taking the result of your static site generator
    (HTML, CSS, and other related files) and copying them somewhere under the “web
    root” of your existing web server.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些选项意味着只需将您的静态网站生成器（HTML、CSS 和其他相关文件）的结果复制到现有 Web 服务器的“Web 根”下。
- en: That’s it. Nothing more. You could create pipelines to automate this and handle
    the copying for you, or you could do everything by hand and use an FTP client
    to upload your files to your production server. At the end of the day this is
    the simplest option and would work best if you have an existing website and server
    already set up and simply want to use your Jamstack site as part of an existing
    solution.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 就这些。没有更多了。您可以创建管道来自动执行此操作并为您处理复制，或者您可以手动完成所有操作并使用 FTP 客户端将您的文件上传到您的生产服务器。最终，这是最简单的选项，如果您已经有一个现有的网站和服务器并只想将您的
    Jamstack 网站作为现有解决方案的一部分，那么这将是最合适的选择。
- en: As a concrete example of this, you can imagine an existing web server that uses
    PHP to serve dynamic web pages to users for an e-commerce site selling products.
    PHP would handle the shopping aspect, checkout, and so forth. You could then use
    the Jamstack to handle the documentation for products sold on the site. These
    wouldn’t need PHP and can be simple static files. Obviously the entire site could
    be Jamstack (and in fact, the previous chapter discussed doing e-commerce with
    the Jamstack), but it’s also possible to have sites where multiple solutions are
    in use!
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 作为这个问题的具体例子，你可以想象一个现有的使用 PHP 为电子商务网站的用户提供动态网页的 Web 服务器。PHP 将处理购物、结账等方面。然后你可以使用
    Jamstack 来处理网站上销售产品的文档。这些不需要 PHP，可以是简单的静态文件。显然，整个网站可以是 Jamstack（实际上，上一章讨论了使用 Jamstack
    进行电子商务），但也可以有使用多个解决方案的网站！
- en: 6.2 Cloud file storage providers
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.2 云文件存储提供商
- en: Another option for hosting Jamstack sites is to make use of a cloud file storage
    provider. This is a service that simply lets you store files on the cloud and
    makes them accessible via HTTP. Cloud file storage providers are an attractive
    solution for developers who need a place to store files without the worry of managing
    a disk drive. By providing (near) infinite space, a developer can simply push
    files up and not worry about a full drive. (As long as they can handle the price,
    of course.)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种托管 Jamstack 网站的选择是利用云文件存储提供商。这是一种简单的服务，只需让您在云端存储文件，并通过 HTTP 使其可访问。对于需要存储文件而无需担心管理磁盘驱动器的开发者来说，云文件存储提供商是一个有吸引力的解决方案。通过提供（几乎）无限的空间，开发者可以简单地上传文件，无需担心驱动器满载。（当然，只要他们能承受价格，当然。）
- en: Many of these providers now support an option to host a set of files as a website.
    Let’s take a look at some of these options.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 许多这些提供商现在支持将一组文件作为网站托管的选择。让我们来看看这些选项。
- en: 6.2.1 Amazon S3
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.2.1 Amazon S3
- en: As one of the oldest and most mature services, Amazon S3 is probably the first
    thing developers think of when considering cloud-based file storage. Amazon S3
    ([https://aws.amazon.com/s3/](https://aws.amazon.com/s3/)) is a very flexible,
    very robust file storage solution with great pricing ([https://aws.amazon.com/s3/pricing)](https://aws.amazon.com/s3/pricing).
    Amazon also provides a pricing calculator ([https://calculator.aws](https://calculator.aws))
    that lets you estimate your costs.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 作为最古老和最成熟的服务之一，Amazon S3可能是开发者在考虑基于云的文件存储时首先想到的东西。Amazon S3([https://aws.amazon.com/s3/](https://aws.amazon.com/s3/))是一个非常灵活、非常健壮的文件存储解决方案，具有很好的定价([https://aws.amazon.com/s3/pricing](https://aws.amazon.com/s3/pricing))。Amazon还提供了一个定价计算器([https://calculator.aws](https://calculator.aws))，让您可以估算您的成本。
- en: While every site is different, I can provide an example from my own usage. I
    have slightly less than a gig of files on S3 with about 70,000 requests over a
    month’s period. My bill for that comes to about 3 cents. Yes, 3 cents. In order
    to enable HTTPS for those requests, my price skyrockets to 73 cents. Again, you
    need to look at your site, traffic, size, and so forth before committing, but
    most likely your costs will be minimal. Also note that Amazon offers various different
    “free tier” ([https://aws.amazon.com/free/](https://aws.amazon.com/free/)) choices.
    At the time this book was written, Amazon was offering 5 gigs of storage for free
    for 12 months.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然每个网站都不同，但我可以提供我自己的使用示例。我在S3上有略少于1GB的文件，一个月内有大约70,000次请求。那笔账单大约是3美分。是的，3美分。为了为这些请求启用HTTPS，我的价格飙升到73美分。再次强调，您在做出承诺之前需要查看您的网站、流量、大小等因素，但您的成本很可能是最低的。此外，请注意，Amazon提供了各种不同的“免费层”([https://aws.amazon.com/free/](https://aws.amazon.com/free/))选项。在本书撰写时，Amazon提供12个月的免费5GB存储空间。
- en: To begin, you need to create an Amazon AWS account. Once you have, you can sign
    in to the AWS Management Console (figure 6.1).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要创建一个Amazon AWS账户。一旦创建，您就可以登录到AWS管理控制台（图6.1）。
- en: '![CH06_F01_Camden2](Images/CH06_F01_Camden2.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F01_Camden2](Images/CH06_F01_Camden2.png)'
- en: Figure 6.1 AWS dashboard
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.1 AWS仪表板
- en: The console can be somewhat overwhelming, but you can use the Find Services
    search box to look for S3\. Do that, and you’ll end up on the S3 dashboard itself.
    Your dashboard may look a bit different based on whether you’ve used S3 before
    and whether Amazon has updated their UI (figure 6.2).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 控制台可能会有些令人不知所措，但您可以使用查找服务搜索框来查找S3。这样做，您最终会进入S3仪表板本身。根据您是否之前使用过S3以及Amazon是否更新了他们的UI（图6.2），您的仪表板可能看起来略有不同。
- en: '![CH06_F02_Camden2](Images/CH06_F02_Camden2.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F02_Camden2](Images/CH06_F02_Camden2.png)'
- en: Figure 6.2 The S3 dashboard console. This will change after you’ve created your
    first bucket.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.2 S3仪表板控制台。在您创建第一个存储桶之后，这将会发生变化。
- en: Amazon’s S3 services lets you store files in *buckets*. You can think of a bucket
    as disk drives or folders for your project. While you can name your buckets anything
    you want, to host a website you need to name your bucket the same as your domain
    name. For example, if I were hosting my blog on S3, I’d have to name my bucket
    raymondcamden.com.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon的S3服务允许您在*存储桶*中存储文件。您可以将存储桶想象成您项目的磁盘驱动器或文件夹。虽然您可以给存储桶命名任何您想要的名称，但要托管网站，您需要将存储桶的名称与您的域名相同。例如，如果我在S3上托管我的博客，我必须将我的存储桶命名为raymondcamden.com。
- en: Note In order to support both [raymondcamden.com](http://www.raymondcamden.com)
    and [www.raymondcamden.com](http://www.raymondcamden.com), you need to create
    *two* buckets. The bucket for [www.raymondcamden.com](http://www.raymondcamden.com)
    would redirect to the first bucket. As we are going to be testing with a subdomain
    only, we’ll only create the one bucket, but we will also show where that setting
    is so you can see how to do it yourself!
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：为了支持[raymondcamden.com](http://www.raymondcamden.com)和[www.raymondcamden.com]，您需要创建*两个*存储桶。[www.raymondcamden.com](http://www.raymondcamden.com)的存储桶将重定向到第一个存储桶。由于我们将只使用子域名进行测试，我们只会创建一个存储桶，但我们会展示如何设置该设置，以便您可以了解如何自己操作！
- en: To begin, hit the Create bucket button. The name of the bucket should match
    the domain name of your site. In figure 6.3, I used a subdomain named jamstack.raymondcamden.com.
    You can leave the rest of the settings as they are.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，点击创建存储桶按钮。存储桶的名称应与您网站的域名匹配。在图6.3中，我使用了名为jamstack.raymondcamden.com的子域名。您可以将其他设置保持不变。
- en: '![CH06_F03_Camden2](Images/CH06_F03_Camden2.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F03_Camden2](Images/CH06_F03_Camden2.png)'
- en: Figure 6.3 Defining the name of your new S3 bucket
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.3 定义您的新S3存储桶的名称
- en: Click Next through the next two steps and hit Create bucket when done. You’ll
    then see your bucket listed (figure 6.4).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 点击下一步，完成接下来的两个步骤，完成后点击创建存储桶。然后你会看到你的存储桶被列出（图6.4）。
- en: '![CH06_F04_Camden2](Images/CH06_F04_Camden2.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F04_Camden2](Images/CH06_F04_Camden2.png)'
- en: Figure 6.4 Your newly created S3 bucket
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.4 你新创建的S3存储桶
- en: Select the checkbox by the bucket, and in the fly-out menu that appears, select
    Properties. This brings you to a set of options, including Static website hosting
    (figure 6.5).
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 选择存储桶旁边的复选框，并在出现的弹出菜单中，选择属性。这会带你到一个选项集，包括静态网站托管（图6.5）。
- en: '![CH06_F05_Camden2](Images/CH06_F05_Camden2.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F05_Camden2](Images/CH06_F05_Camden2.png)'
- en: Figure 6.5 Various options for your S3 bucket
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.5 你的S3存储桶的各种选项
- en: If you click that box, you get a new option for enabling website hosting, as
    shown in figure 6.6.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击那个框，你会得到一个新的选项来启用网站托管，如图6.6所示。
- en: '![CH06_F06_Camden2](Images/CH06_F06_Camden2.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F06_Camden2](Images/CH06_F06_Camden2.png)'
- en: Figure 6.6 Dialog window to enable website hosting for a bucket
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.6 为存储桶启用网站托管的对话框
- en: If you enable website hosting, you then need to specify what the index document
    is. This is the page loaded when a website is loaded and no specific file is requested.
    Almost always this should be index.html. Enter that value and you can then hit
    Save (figure 6.7).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你启用了网站托管，那么你需要指定索引文档是什么。这是在加载网站且没有请求特定文件时加载的页面。几乎总是应该是index.html。输入这个值，然后你可以点击保存（图6.7）。
- en: '![CH06_F07_Camden2](Images/CH06_F07_Camden2.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F07_Camden2](Images/CH06_F07_Camden2.png)'
- en: Figure 6.7 Completing the options to enable website hosting
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.7 完成选项以启用网站托管
- en: Note This is also where you would handle redirecting a www subdomain to your
    main bucket. We aren’t covering that in this example, but now that you’ve seen
    where it’s set, you can do this yourself if you need to.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：这也是你处理将www子域名重定向到主存储桶的地方。在这个例子中我们不涉及这一点，但现在你已经看到了设置在哪里，如果你需要，你可以自己这样做。
- en: After you have saved your changes, you can immediately hit your site using the
    URL shown in the dialog. If you didn’t copy it, just click to open the Static
    website hosting option again. You should see something like figure 6.8.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 保存你的更改后，你可以立即使用对话框中显示的URL访问你的网站。如果你没有复制它，只需再次点击打开静态网站托管选项即可。你应该会看到类似于图6.8的内容。
- en: '![CH06_F08_Camden2](Images/CH06_F08_Camden2.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F08_Camden2](Images/CH06_F08_Camden2.png)'
- en: Figure 6.8 403 error loading the new website
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.8 加载新网站时出现403错误
- en: The reason you get this error is because you haven’t actually uploaded a website
    yet! We’re going to cover that in a moment, but before we do, we need to make
    another change.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 你得到这个错误的原因是因为你实际上还没有上传网站！我们将在稍后介绍这一点，但在我们这样做之前，我们需要进行另一个更改。
- en: By default, your bucket was created with all public access denied. This is a
    good and safe thing. However, before we start working with files, we need to edit
    the bucket so that the public has read access to it. This will then allow us to
    make our files public as well.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，你的存储桶创建时所有公共访问都被拒绝。这是一件好事，也是安全的。然而，在我们开始处理文件之前，我们需要编辑存储桶，以便公众可以读取它。这样我们就可以使我们的文件公开了。
- en: Select the Permissions tab in your bucket, and in the Block public access section,
    click the Edit button to turn off this setting (figure 6.9). This will give you
    a scary warning, but since we know what we are doing (allowing public access to
    static assets), it is safe to continue.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的存储桶中选择权限选项卡，并在“阻止公共访问”部分中，点击编辑按钮来关闭此设置（图6.9）。这将给你一个令人恐惧的警告，但由于我们知道我们在做什么（允许对静态资源进行公共访问），所以可以安全地继续。
- en: '![CH06_F09_Camden2](Images/CH06_F09_Camden2.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F09_Camden2](Images/CH06_F09_Camden2.png)'
- en: Figure 6.9 Disabling “Block all public access”
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.9 禁用“阻止所有公共访问”
- en: With that done, it’s time to put things in the bucket. There are multiple ways
    you can put files into a S3 bucket; the simplest is to use the Upload option and
    simply drag your files and folders onto the browser. For smaller websites, this
    should be sufficient (figure 6.10). Remember, the UI may be different. Amazon
    constantly updates their UI and even shows different screens for different users.
    If what you see doesn’t match exactly, do your best to find similarly named options.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些后，是时候将东西放入存储桶了。你可以将文件放入S3存储桶的多种方式；最简单的是使用上传选项，只需将你的文件和文件夹拖放到浏览器中。对于较小的网站，这应该足够了（图6.10）。记住，UI可能不同。亚马逊不断更新他们的UI，甚至为不同的用户显示不同的屏幕。如果你看到的内容与预期不符，请尽力找到类似命名的选项。
- en: '![CH06_F10_Camden2](Images/CH06_F10_Camden2.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F10_Camden2](Images/CH06_F10_Camden2.png)'
- en: Figure 6.10 The Upload dialog for your S3 bucket
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.10 您的 S3 存储桶的上传对话框
- en: You can choose any of the previous examples in the book or any other website.
    For this demonstration, we will use the output from the Camden Grounds example
    in chapter 2\. Remember that the Eleventy store’s output is in the _site folder.
    You can select all the files and folders and drag them into the dialog. Before
    clicking Upload, click Next so that you can set permissions. At the bottom by
    “Manage public permissions,” change the default to “Grant public read access to
    this object(s).” You can then click the Upload button (figure 6.11).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以选择书中的任何前一个例子或任何其他网站。对于这次演示，我们将使用第 2 章中 Camden Grounds 示例的输出。记住，Eleventy 存储库的输出在
    _site 文件夹中。你可以选择所有文件和文件夹，并将它们拖入对话框。在点击上传之前，点击下一步，这样你就可以设置权限。在底部“管理公共权限”处，将默认值更改为“授予此对象（s）公共读取访问权限。”然后你可以点击上传按钮（图
    6.11）。
- en: '![CH06_F11_Camden2](Images/CH06_F11_Camden2.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F11_Camden2](Images/CH06_F11_Camden2.png)'
- en: Figure 6.11 With permissions set, it’s time to upload the files.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.11 设置权限后，是时候上传文件了。
- en: Depending on your bandwidth, and what you selected to upload, once you get confirmation
    that the upload is done, you can reload the earlier request and should now see
    your site (figure 6.12).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的带宽和你选择上传的内容，一旦你收到上传完成的确认，你可以重新加载之前的请求，现在你应该能看到你的网站（图 6.12）。
- en: '![CH06_F12_Camden2](Images/CH06_F12_Camden2.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F12_Camden2](Images/CH06_F12_Camden2.png)'
- en: Figure 6.12 The S3-deployed website is live!
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.12 S3 部署的网站已上线！
- en: That’s basically the process, but there’s more you can do. For example, Amazon
    has a CDN service (CloudFront) that also enables you to use https. You can add
    redirects to your site as well. Now that we’ve looked at Amazon, let’s look at
    some of your other options.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这基本上就是流程，但你还可以做更多。例如，亚马逊有一个 CDN 服务（CloudFront），它也允许你使用 https。你还可以将重定向添加到你的网站上。既然我们已经看了亚马逊，让我们看看你的一些其他选项。
- en: 6.2.2 Other cloud file storage hosting options
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6.2.2 其他云文件存储托管选项
- en: While Amazon S3 is the best-known option for cloud-based file storage, it isn’t
    the only option available. Another option to consider is Google Cloud Storage
    ([https://cloud.google.com/storage](https://cloud.google.com/storage)). Like Amazon
    S3, Google Cloud Storage lets you store files of unlimited size with worldwide
    access. And, like S3 is a small part of AWS, Google Cloud Storage is but one aspect
    of the whole Google Cloud platform.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Amazon S3 是最知名的基于云的文件存储选项，但它并不是唯一的选择。另一个可以考虑的选项是 Google Cloud Storage ([https://cloud.google.com/storage](https://cloud.google.com/storage))。像
    Amazon S3 一样，Google Cloud Storage 允许你存储任意大小的文件，并具有全球访问权限。而且，就像 S3 是 AWS 的一部分一样，Google
    Cloud Storage 只是整个 Google Cloud 平台的一个方面。
- en: There is pricing information ([https://cloud.google.com/storage#section-10](https://cloud.google.com/storage#section-10))
    available, and like S3, you pay both for how much you store as well as how often
    the files are accessed. There is a free tier ([http://mng.bz/Ex7j](http://mng.bz/Ex7j)),
    which honestly was a bit hard to find at first, but would certainly let you test
    projects to see if you like the platform.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 有价格信息([https://cloud.google.com/storage#section-10](https://cloud.google.com/storage#section-10))可用，并且像
    S3 一样，你支付的费用包括存储量和文件访问的频率。有一个免费层([http://mng.bz/Ex7j](http://mng.bz/Ex7j))，老实说，一开始找起来有点困难，但确实可以让你测试项目，看看你是否喜欢这个平台。
- en: Google provides documentation ([http://mng.bz/Nx77](https://cloud.google.com/storage/docs/hosting-static-website))
    for hosting a website, and it follows a similar pattern to Amazon’s platform.
    Create a bucket, upload your files, and then share them publicly (figure 6.13).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: Google 提供了托管网站的文档([http://mng.bz/Nx77](https://cloud.google.com/storage/docs/hosting-static-website))，其模式与亚马逊平台类似。创建一个存储桶，上传你的文件，然后公开分享它们（图
    6.13）。
- en: '![CH06_F13_Camden2](Images/CH06_F13_Camden2.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F13_Camden2](Images/CH06_F13_Camden2.png)'
- en: Figure 6.13 Google Cloud instructions for sharing files
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.13 Google Cloud 分享文件的说明
- en: 'Another cloud-based file service option is Azure Blob Storage ([https://azure.microsoft.com/en-us/services/storage/blobs/](https://azure.microsoft.com/en-us/services/storage/blobs/)).
    Its documentation for using it to host websites can be found here: [http://mng.bz/Dx7a](http://mng.bz/Dx7a).
    Or, as an alternative, you might want to consider using a newer option from Microsoft,
    the Azure Static Web apps service ([https://azure.microsoft.com/en-us/services/app-service/static/](https://azure.microsoft.com/en-us/services/app-service/static/)),
    which is specifically oriented toward Jamstack-style solutions.'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个基于云的文件服务选项是Azure Blob Storage（[https://azure.microsoft.com/en-us/services/storage/blobs/](https://azure.microsoft.com/en-us/services/storage/blobs/））。关于如何使用它来托管网站的文档可以在这里找到：[http://mng.bz/Dx7a](http://mng.bz/Dx7a)。或者，作为一个替代方案，你可能想考虑使用微软的一个新选项，即Azure
    Static Web apps服务（[https://azure.microsoft.com/en-us/services/app-service/static/](https://azure.microsoft.com/en-us/services/app-service/static/）），它专门针对Jamstack风格的解决方案。
- en: 'You’ve now seen how a cloud-based file service can be an acceptable solution
    for hosting static websites. But, for the most part, that’s all they do: show
    files. Let’s look at services that are more tailored for the Jamstack.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经看到了基于云的文件服务如何成为托管静态网站的可行解决方案。但，从本质上讲，它们主要做的就是显示文件。让我们看看更针对Jamstack的服务。
- en: 6.3 Azure Static Web Apps
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.3 Azure Static Web Apps
- en: Azure Static Web Apps ([https://docs.microsoft.com/en-us/azure/static-web-apps/](https://docs.microsoft.com/en-us/azure/static-web-apps/))
    is a new service by Microsoft on the Azure platform. It connects with GitHub repositories
    and uses GitHub Actions to automatically perform site updates on commits. It supports
    simple static files (e.g., the output of any of the generators previously covered
    in the book), as well as static site generators themselves.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Static Web Apps（[https://docs.microsoft.com/en-us/azure/static-web-apps/](https://docs.microsoft.com/en-us/azure/static-web-apps/））是微软在Azure平台上推出的一项新服务。它与GitHub仓库连接，并使用GitHub
    Actions在提交时自动执行网站更新。它支持简单的静态文件（例如，本书中之前提到的任何生成器的输出），以及静态站点生成器本身。
- en: For example, you can publish a Jekyll site and Azure Static Web Apps can be
    configured to perform Jekyll’s build action to generate the final, static HTML.
    This (and the services that follow in this chapter) makes it more appropriate
    for the Jamstack. Finally, it also ties in well with Azure Functions, Microsoft’s
    serverless platform.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可以发布一个Jekyll站点，Azure Static Web Apps可以被配置为执行Jekyll的构建操作以生成最终的静态HTML。这一点（以及本章后续提到的服务）使其更适合Jamstack。最后，它也与微软的无服务器平台Azure
    Functions很好地结合在一起。
- en: Before looking at Azure Static Web Apps (or Azure in general), you will need
    a free Azure account. You can sign up ([https://azure.microsoft.com/free/](https://azure.microsoft.com/free/)),
    and then go into your dashboard ([https://portal.azure.com](https://portal.azure.com))
    and ensure you have at least one subscription. Think of a subscription as a high-level
    collection for things you use in Azure. After you’ve signed up, you can create
    a free tier subscription (figure 6.14).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在查看Azure Static Web Apps（或Azure本身）之前，你需要一个免费的Azure账户。你可以注册（[https://azure.microsoft.com/free/](https://azure.microsoft.com/free/）），然后进入你的仪表板（[https://portal.azure.com](https://portal.azure.com)），并确保你至少有一个订阅。将订阅视为在Azure中使用事物的高级集合。注册后，你可以创建一个免费层订阅（图6.14）。
- en: '![CH06_F14_Camden2](Images/CH06_F14_Camden2.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F14_Camden2](Images/CH06_F14_Camden2.png)'
- en: Figure 6.14 Azure interface to add a free subscription
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.14 添加免费订阅的Azure界面
- en: 'Azure, like AWS, is both incredibly powerful but also complex. Luckily you
    can avoid the complexity by making use of the Visual Studio Code extension of
    the same name: Azure Static Web Apps. Visual Studio Code ([https://code.visualstudio.com/](https://code.visualstudio.com/))
    is a free, open source code editor from Microsoft. It’s become incredibly popular
    recently with web developers. You can add this to your Visual Studio Code install
    by simply going to the Extensions panel and searching for it (figure 6.15).'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: Azure，就像AWS一样，功能强大但同时也非常复杂。幸运的是，你可以通过使用同名的Visual Studio Code扩展来避免这种复杂性：Azure
    Static Web Apps。Visual Studio Code（[https://code.visualstudio.com/](https://code.visualstudio.com/））是微软的一个免费、开源的代码编辑器。最近它已经成为网页开发者中的热门选择。你只需在扩展面板中搜索即可将其添加到你的Visual
    Studio Code安装中（图6.15）。
- en: '![CH06_F15_Camden2](Images/CH06_F15_Camden2.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F15_Camden2](Images/CH06_F15_Camden2.png)'
- en: Figure 6.15 Discovering the extension via Visual Studio Code itself
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.15 通过Visual Studio Code本身发现扩展
- en: After installing it, you’ll see an A-shaped icon (the Azure logo, visible at
    the bottom in figure 6.15) that, once clicked, will open a new panel. The extension
    will walk you through the authentication process and have you select the subscription
    you created earlier.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 安装后，您将看到一个A形图标（Azure标志，如图6.15底部所示），点击它将打开一个新面板。扩展程序将引导您完成身份验证过程，并让您选择您之前创建的订阅。
- en: To test this service, let’s once again use the Eleventy site used for the Amazon
    S3 example. However, this time it’s going to be a much more powerful integration.
    Instead of pushing the output of Eleventy to the S3 bucket, we’ll use Azure Static
    Web App’s GitHub integration to create a process where commits to the repository
    automatically fire off code to build the site and deploy to Azure.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试这个服务，让我们再次使用用于Amazon S3示例的Eleventy网站。然而，这次它将是一个更强大的集成。我们不会将Eleventy的输出推送到S3存储桶，而是将使用Azure静态Web应用的GitHub集成来创建一个过程，其中对仓库的提交将自动触发代码构建站点并部署到Azure。
- en: To make things a bit simpler, the Camden Grounds site from chapter 2 has been
    copied to new GitHub repository at [https://github.com/cfjedimaster/eleventy-for-azure](https://github.com/cfjedimaster/eleventy-for-azure).
    We cloned that to the local file system and made two changes.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使事情变得简单一些，第2章中的Camden Grounds网站已被复制到新的GitHub仓库[https://github.com/cfjedimaster/eleventy-for-azure](https://github.com/cfjedimaster/eleventy-for-azure)。我们将其克隆到本地文件系统，并做了两个更改。
- en: 'First, we install Eleventy local to the project itself by running npm install
    --save-dev @11ty/eleventy. This updates the project’s package.json file to list
    Eleventy as a development dependency. Next, we need to edit the scripts block
    to add a new script command that specifies how the site is built:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们通过运行npm install --save-dev @11ty/eleventy在项目本身本地安装Eleventy。这会将Eleventy列为项目package.json文件中的开发依赖项。接下来，我们需要编辑scripts块以添加一个新的脚本命令，指定如何构建站点：
- en: '[PRE0]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The start script was already there from the theme we used to build Camden Groups.
    The addition is the second line, starting with build. Azure is going to pick up
    on this when working with the repository and use it to build out the site. So
    how do we add this project to Azure?
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 启动脚本已经存在于我们构建Camden Groups所使用的主题中。新增的是以build开头的第二行。Azure将在与仓库一起工作时注意到这一点，并使用它来构建站点。那么我们如何将此项目添加到Azure中呢？
- en: In Visual Studio Code, open the folder containing the repository. Click on the
    Azure icon and in the Azure Static Web Apps panel, click the + symbol to create
    a new web app. You will first be prompted for a name. Enter CamdenGroundsAzure
    (figure 6.16). If asked to fork and clone the repo, do so.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在Visual Studio Code中，打开包含仓库的文件夹。点击Azure图标，在Azure静态Web应用面板中，点击加号符号以创建一个新的Web应用。您首先会被提示输入名称。输入CamdenGroundsAzure（图6.16）。如果被要求分叉和克隆仓库，请这样做。
- en: '![CH06_F16_Camden2](Images/CH06_F16_Camden2.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F16_Camden2](Images/CH06_F16_Camden2.png)'
- en: Figure 6.16 Naming the new application
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.16 命名新应用
- en: The next prompt will be for the branch to use. GitHub is using main for the
    branch, but if you have an older project, your default branch may be master. It
    will show the branch in the dialog, so you can simply click on it.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个提示将询问您要使用的分支。GitHub正在使用main作为分支，但如果您的项目较旧，默认分支可能是master。它将在对话框中显示分支，您可以简单地点击它。
- en: 'Next, it will prompt you for the application code directory. Since the entire
    repository is the application, you will want to select the first option: / (figure
    6.17).'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，它将提示您输入应用程序代码目录。由于整个仓库都是应用程序，您将想要选择第一个选项：/（图6.17）。
- en: '![CH06_F17_Camden2](Images/CH06_F17_Camden2.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F17_Camden2](Images/CH06_F17_Camden2.png)'
- en: Figure 6.17 Selecting the application directory
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.17 选择应用程序目录
- en: The next prompt will ask you for the location of your Azure Functions code.
    We aren’t using that, so select “Skip for Now.”
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个提示将询问您Azure Functions代码的位置。我们目前不使用它，所以选择“暂时跳过”。
- en: 'The final prompt will be for the output path of your site: where your static
    site generator outputs the final HTML. For Eleventy, that’s _site, so enter that
    in the dialog shown in figure 6.18.'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 最终提示将用于您网站的输出路径：这是您的静态站点生成器输出最终HTML的地方。对于Eleventy，这是_site，所以在图6.18所示的对话框中输入它。
- en: '![CH06_F18_Camden2](Images/CH06_F18_Camden2.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F18_Camden2](Images/CH06_F18_Camden2.png)'
- en: Figure 6.18 Entering the location where generated files can be found after the
    site is built
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.18 输入在构建站点后可以找到生成文件的路径
- en: The final prompt refers to where Azure will deploy your site in its worldwide
    infrastructure. Take the default here, which will probably be central US.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的提示指的是Azure将在其全球基础设施中部署您的网站的位置。在这里保留默认设置，这可能会是中部美国。
- en: At this point, the extension and Azure start doing a bit of work. They begin
    by adding the appropriate GitHub actions to your project (which you can see if
    you open the repository) that handle doing the push to Azure when files are committed.
    To see your project on Azure, click to open the free trial node in the Azure panel
    and you’ll see your new project. Right-click on that, and select “Open in Portal”
    (figure 6.19).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，扩展和Azure开始做一些工作。他们首先将适当的GitHub操作添加到您的项目中（如果您打开仓库可以看到），这些操作处理在文件提交时推送到Azure。要查看Azure上的您的项目，点击打开Azure面板中的免费试用节点，您将看到您的新项目。右键单击它，并选择“在门户中打开”（图6.19）。
- en: '![CH06_F19_Camden2](Images/CH06_F19_Camden2.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F19_Camden2](Images/CH06_F19_Camden2.png)'
- en: Figure 6.19 Right-click on your new project to see various options, including
    one to open the portal.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.19 右键单击您的新的项目以查看各种选项，包括一个打开门户的选项。
- en: The portal contains a large amount of information, but what you want to focus
    on is the URL on the right-hand side, which you can use to test your site (figure
    6.20).
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 该门户包含大量信息，但您需要关注的是右侧的URL，您可以使用它来测试您的网站（图6.20）。
- en: '![CH06_F20_Camden2](Images/CH06_F20_Camden2.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F20_Camden2](Images/CH06_F20_Camden2.png)'
- en: Figure 6.20 Azure portal for the site
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.20 网站Azure门户
- en: 'If you open that link, you should see Camden Grounds again. Here’s the kicker
    though: if you edit your Eleventy site and commit the change to GitHub, Azure’s
    integrations will kick in, get the latest code, run the build command, and deploy
    again—all without you lifting a finger!'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您打开该链接，应该会再次看到Camden Grounds。但是，这里有一个转折点：如果您编辑您的Eleventy网站并将更改提交到GitHub，Azure的集成将启动，获取最新代码，运行构建命令，并再次部署——这一切都不需要您动手！
- en: 6.4 Deploying with Vercel
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.4 使用Vercel部署
- en: 'Vercel is the first of two companies we will look at that are focused specifically
    on serving the Jamstack and web development community in general. Vercel ([https://vercel.com/](https://vercel.com/)),
    formerly known as Zeit, offers a variety of services useful for Jamstack developers
    needing a place to host their sites. A brief list of these services includes the
    following:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Vercel是我们将要关注的两个公司中的第一家，它们专注于专门为Jamstack和一般Web开发社区提供服务。Vercel（[https://vercel.com/](https://vercel.com/）），以前称为Zeit，为需要托管其网站的Jamstack开发者提供了一系列有用的服务。以下是一些这些服务的简要列表：
- en: Deployment from source control providers (GitHub, GitLab, Bitbucket). Like the
    Azure Static Web App service, this means you can commit code to your repository
    and Vercel can then automatically update your production site.
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从源代码管理提供商（GitHub、GitLab、Bitbucket）部署。就像Azure静态Web应用服务一样，这意味着您可以将代码提交到您的仓库，然后Vercel可以自动更新您的生产网站。
- en: Automatic preview builds for pull releases and branching, making it easy to
    share and test changes to your site.
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动预览构建用于拉取发布和分支，使共享和测试网站更改变得容易。
- en: Automatic CDN usage makes your site available globally.
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动使用CDN可以使您的网站在全球范围内可用。
- en: Serverless function support (you will see an example of this in chapter 8) to
    add additional functionality to your site.
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无服务器函数支持（您将在第8章中看到这个示例）以向您的网站添加额外的功能。
- en: A really generous free tier ([https://vercel.com/pricing](https://vercel.com/pricing))
    that makes it easy to see if Vercel is a fit for you.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非常慷慨的免费层（[https://vercel.com/pricing](https://vercel.com/pricing)），这使得您可以轻松地看到Vercel是否适合您。
- en: There are certainly a lot more. But I want to call out a feature of Vercel that
    I think really sets it apart from others. Vercel has built-in support for over
    30 different Jamstack platforms. That support consists of recognizing the framework
    in use and doing the right thing to build and serve the site. From a practical
    sense, this means you can go into your project directory, deploy, and Vercel knows
    what to do. That is *i*ncredibly powerful when you need to quickly share a site
    online for others to look at and test. Vercel still lets you configure your projects
    manually, which means it will support custom implementations, but the fact that
    you can go into a Jamstack project, deploy a site, and have it online in a minute
    or two is awesome.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 当然还有很多。但我想强调 Vercel 的一个特性，我认为这真正让它与其他产品区分开来。Vercel 内置了对超过 30 个不同的 Jamstack 平台的支持。这种支持包括识别正在使用的框架，并执行正确的操作来构建和托管网站。从实际的角度来看，这意味着你可以进入你的项目目录，部署，而
    Vercel 会知道该做什么。当你需要快速将网站在线分享给他人查看和测试时，这非常强大。Vercel 仍然允许你手动配置项目，这意味着它将支持自定义实现，但你可以进入一个
    Jamstack 项目，部署一个网站，并在一分钟左右将其上线，这真是太棒了。
- en: Let’s give this a quick test. Head to the Vercel home page, and click to sign
    up (figure 6.21). Note that you will be required to use a login on one of the
    three source control providers Vercel uses.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速测试一下。前往 Vercel 的主页，点击注册（图 6.21）。请注意，你将需要使用 Vercel 使用的三个源代码管理提供商之一进行登录。
- en: '![CH06_F21_Camden2](Images/CH06_F21_Camden2.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F21_Camden2](Images/CH06_F21_Camden2.png)'
- en: Figure 6.21 Signup options for Vercel require a GitHub, GitLab, or Bitbucket
    account.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.21 Vercel 的注册选项需要 GitHub、GitLab 或 Bitbucket 账户。
- en: 'After you’ve signed up for Vercel, you can use their web-based dashboard to
    import projects from source-control providers, but what we want to test is the
    quick deployment option available via the CLI. The CLI instructions ([https://vercel.com/docs/cli](https://vercel.com/docs/cli))
    explain in detail all the various options available from the tool, but for now,
    start off by installing it by using the command:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在你注册了 Vercel 之后，你可以使用他们的基于 Web 的仪表板从源代码管理提供商导入项目，但我们想测试的是通过 CLI 可用的快速部署选项。CLI
    指令（[https://vercel.com/docs/cli](https://vercel.com/docs/cli)）详细说明了工具提供的所有各种选项，但就现在而言，首先通过以下命令安装它：
- en: '[PRE1]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Next, you need to configure the CLI for your account. Do that by running the
    command:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你需要为你的账户配置 CLI。通过运行以下命令来完成：
- en: '[PRE2]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You’ll be asked for the email account associated with your Vercel account. Enter
    that, and the CLI will fire off a process to send you an email (figure 6.22).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 你将被要求输入与你的 Vercel 账户关联的电子邮件账户。输入它，CLI 将启动一个进程来发送你一封电子邮件（图 6.22）。
- en: '![CH06_F22_Camden2](Images/CH06_F22_Camden2.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F22_Camden2](Images/CH06_F22_Camden2.png)'
- en: Figure 6.22 The Vercel login process via the CLI sends you an email to handle
    confirmation.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.22 通过 CLI 的 Vercel 登录过程会发送一封电子邮件来处理确认。
- en: As soon as you confirm via the link sent to you in email, the CLI lets you know
    it’s ready to go (figure 6.23).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你通过电子邮件中发送给你的链接确认，CLI 会告诉你它已经准备好（图 6.23）。
- en: '![CH06_F23_Camden2](Images/CH06_F23_Camden2.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F23_Camden2](Images/CH06_F23_Camden2.png)'
- en: Figure 6.23 The configured and ready-to-go Vercel CLI
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.23 配置好的、准备就绪的 Vercel CLI
- en: Log in, and then give Vercel a quick test by using it to deploy the Jekyll site
    we built in chapter 3\. In your terminal, change directories to where you built
    (or downloaded from the book’s GitHub repository) the final demo. For me, this
    is ~/projects/the -jamstack-book/chapter3/startbootstrap-clean-blog-jekyll-master.
    Once in that directory, deploy the site with vercel deploy. While there are multiple
    options you can use with the CLI, we really want to point out how powerful the
    defaults are.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 登录后，通过使用它来部署我们在第 3 章中构建的 Jekyll 网站来快速测试 Vercel。在你的终端中，切换到你在书中构建（或从 GitHub 仓库下载）的最终演示所在的目录。对我来说，这是
    ~/projects/the-jamstack-book/chapter3/startbootstrap-clean-blog-jekyll-master。一旦进入该目录，使用
    vercel deploy 部署网站。虽然你可以使用 CLI 的多个选项，但我们真正想指出的是默认选项的强大功能。
- en: You will first be prompted if you wish to set up and deploy the current directory
    (figure 6.24). Just click Enter.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 你首先会被提示是否要设置和部署当前目录（图 6.24）。只需点击 Enter。
- en: '![CH06_F24_Camden2](Images/CH06_F24_Camden2.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F24_Camden2](Images/CH06_F24_Camden2.png)'
- en: Figure 6.24 The deploy process begins by double-checking with you to confirm
    the current directory is something you want to deploy.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.24 部署过程首先会与你确认，以确保当前目录是你想要部署的。
- en: Next it will ask you what scope you are deploying. This is related to your current
    logged-in account and will differ based on your information. Just click Enter
    to accept the default.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，它将询问你部署的范围。这与你当前登录的账户相关，并将根据你的信息而有所不同。只需点击 Enter 以接受默认设置。
- en: The next prompt asks if you wish to connect to an existing project. As we are
    building something new, once again take the default (N) and click Enter (figure
    6.25). If you run the deployment again, Vercel will properly recognize it as an
    existing project.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个提示会询问你是否希望连接到现有的项目。由于我们正在构建新的内容，再次选择默认（N）并点击 Enter（图 6.25）。如果你再次运行部署，Vercel
    将正确地将其识别为现有项目。
- en: '![CH06_F25_Camden2](Images/CH06_F25_Camden2.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F25_Camden2](Images/CH06_F25_Camden2.png)'
- en: Figure 6.25 Continuing the deployment process and specifying that this is a
    new project
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.25 继续部署流程并指定这是一个新项目
- en: You will then be asked to name this project. The name will default to the directory
    name, which in our case is a bit long. The name will be used both as a project
    name and as a default URL. Later you could assign a “real” domain name to your
    Vercel site. Let’s give it a slightly shorter name of verceltest and click Enter.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，你将被要求为这个项目命名。名称将默认为目录名称，在我们的例子中有点长。这个名称将用作项目名称和默认 URL。稍后，你可以为你的 Vercel 网站分配一个“真实”的域名。让我们给它一个稍微短一点的名称
    verceltest 并点击 Enter。
- en: Now you will be asked in what directory your code can be found. We started the
    CLI in the right directory, so you can again click Enter to take the default.
    The CLI will do a bit of inspection on the code base, figure out it’s Jekyll,
    and then ask you if you want to override any settings before it deploys. Once
    again, click Enter to accept the defaults (figure 6.26).
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将被询问代码所在的目录。我们是在正确的目录中启动 CLI 的，因此你可以再次点击 Enter 以接受默认设置。CLI 将对代码库进行一些检查，确定它是
    Jekyll，然后询问你是否想在部署之前覆盖任何设置。再次点击 Enter 以接受默认设置（图 6.26）。
- en: '![CH06_F26_Camden2](Images/CH06_F26_Camden2.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F26_Camden2](Images/CH06_F26_Camden2.png)'
- en: Figure 6.26 You’re given one last chance to modify settings before Vercel deploys.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.26 在 Vercel 部署之前，你有一次最后的机会修改设置。
- en: Now the Vercel CLI will get to work. It pushes up the code from the local directory.
    It recognizes that you’re running Jekyll and does what it needs to support Jekyll
    on your site. It builds your site, and at the end you’re given a report on where
    your site was deployed (figure 6.27).
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，Vercel CLI 将开始工作。它会将本地目录中的代码推送到服务器。它识别出你正在运行 Jekyll，并执行所需操作以支持你网站上的 Jekyll。它会构建你的网站，最后你将得到一份关于你的网站部署位置的报告（图
    6.27）。
- en: '![CH06_F27_Camden2](Images/CH06_F27_Camden2.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F27_Camden2](Images/CH06_F27_Camden2.png)'
- en: Figure 6.27 The final output of the deployment to Vercel
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.27 将部署到 Vercel 的最终输出
- en: The CLI provides a great report of what it did and how long it took. You also
    get a URL that you can open immediately and see your site. In the test, the URL
    was [https://verceltest-gules.vercel.app](https://verceltest-gules.vercel.app)
    but will most likely be different for you.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: CLI 提供了一份关于它所执行的操作及其所需时间的详细报告。你还会得到一个可以立即打开并查看你网站的 URL。在测试中，URL 是 [https://verceltest-gules.vercel.app](https://verceltest-gules.vercel.app)，但对你来说可能有所不同。
- en: 'At this point, you can add a new post, modify an existing post, or make any
    change you wish. For example, we can modify the title and text of the blog post
    (_posts/2020-08-24-welcome.html, but your date will differ) to simply add the
    word *Vercel* :'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，你可以添加一篇新文章，修改现有文章，或进行任何你希望的改变。例如，我们可以修改博客文章的标题和文本（_posts/2020-08-24-welcome.html，但你的日期会有所不同）以简单地添加单词
    *Vercel*：
- en: '[PRE3]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Once saved, you can run vercel deploy again. This time you won’t be prompted
    for anything, but the result is a *preview* build, as you can see in the output
    in figure 6.28.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 保存后，你可以再次运行 vercel deploy。这次你将不会被提示任何内容，但结果是一个 *预览* 构建，正如你在图 6.28 的输出中可以看到的那样。
- en: '![CH06_F28_Camden2](Images/CH06_F28_Camden2.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F28_Camden2](Images/CH06_F28_Camden2.png)'
- en: Figure 6.28 The result of a preview build
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.28 预览构建的结果
- en: What’s really cool about this is that you can now have both URLs open in separate
    tabs so that you can compare the differences. The CLI also very plainly tells
    you what to do to have your changes visible in the production build, vercel --prod.
    Running that will be much quicker, as it’s moving the preview over to production,
    and, once done, you can reload the original URL to see your changes (figure 6.29).
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 真正酷的是，你现在可以在不同的标签页中打开两个 URL，以便比较差异。CLI 还非常明确地告诉你如何使你的更改在生产构建中可见，即运行 vercel --prod。运行这个命令将会更快，因为它将预览移动到生产环境，完成后，你可以重新加载原始
    URL 来查看你的更改（图 6.29）。
- en: '![CH06_F29_Camden2](Images/CH06_F29_Camden2.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F29_Camden2](Images/CH06_F29_Camden2.png)'
- en: Figure 6.29 Our updated blog post live on Vercel
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.29 我们更新的博客文章在 Vercel 上的实时状态
- en: Before moving on, I want to be clear that this type of updating (changing files,
    rerunning the CLI) is not something you would use for a production website involving
    lots of users. In that case you would be using source control. Vercel can listen
    for changes to your repository and update your sites automatically. But the CLI
    approach shown here is really useful for testing, sharing sites with others, and
    so forth. As I said in the beginning, Vercel has a strong set of features, so
    be sure to peruse its documentation ([https://vercel.com/docs](https://vercel.com/docs))
    for more information.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，我想明确指出，这种更新方式（更改文件，重新运行 CLI）并不是用于涉及大量用户的实际生产网站。在这种情况下，你会使用源代码控制。Vercel
    可以监听仓库的更改并自动更新你的网站。但这里展示的 CLI 方法对于测试、与他人共享网站等非常有用。正如我一开始所说的，Vercel 拥有一套强大的功能，所以请务必查阅其文档（[https://vercel.com/docs](https://vercel.com/docs)）以获取更多信息。
- en: 6.5 Deploying with Netlify
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.5 使用 Netlify 部署
- en: 'Let me begin with a bold, if strongly personal, statement. Netlify ([https://www.netlify.com/](https://www.netlify.com/))
    is the gold standard for hosting Jamstack sites. This is not to say it’s perfect
    or will meet every need. But, for me, it provides the best set of features for
    the best price and is the standard by which I judge every other service. Let’s
    look at its list of services; as with Vercel, I’m only calling out some of what’s
    available:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 让我从一句大胆且极具个人色彩的陈述开始。Netlify ([https://www.netlify.com/](https://www.netlify.com/))
    是托管 Jamstack 网站的黄金标准。这并不是说它完美无缺或能满足所有需求。但对我来说，它提供了性价比最高的功能集合，并且是我评价其他服务的标准。让我们看看它的服务列表；就像
    Vercel 一样，我只会指出一些可用的功能：
- en: The ability to connect sites to Git repositories and automatically build after
    a check-in.
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够将网站连接到 Git 仓库，并在提交后自动构建。
- en: The ability to connect sites to Git repositories and create preview builds based
    on branches.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够将网站连接到 Git 仓库，并基于分支创建预览构建。
- en: The ability to create complex redirect files. (This is especially useful for
    people who may move from a traditional application server to the Jamstack and
    need to ensure older URLs still work correctly.)
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建复杂重定向文件的能力。（这对于可能从传统应用服务器迁移到 Jamstack 并确保旧 URL 仍然正确工作的人来说特别有用。）
- en: Serverless functions written in JavaScript and Go. You will see more about this
    in chapter 8.
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 JavaScript 和 Go 编写的无服务器函数。你将在第 8 章中了解更多关于这方面的内容。
- en: Website analytics.
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站分析。
- en: A custom user identity service that provides user management and security.
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供用户管理和安全性的自定义用户身份服务。
- en: The ability to handle form submissions.
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理表单提交的能力。
- en: Special support for large binary files.
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对大型二进制文件提供特殊支持。
- en: Automatic use of CDNs as well as JavaScript and CSS minification. This also
    includes the ability to compress images.
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动使用 CDN 以及 JavaScript 和 CSS 的压缩。这还包括压缩图片的能力。
- en: Great support for sites run by multiple people on a team.
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对团队多人运行的网站提供出色的支持。
- en: A great CLI for local development.
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适用于本地开发的优秀 CLI。
- en: To be clear, there’s more to Netlify than I’ll cover here, but you can look
    at a more comprehensive list on their pricing page ([https://www.netlify.com/pricing/](https://www.netlify.com/pricing/)).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 为了明确起见，Netlify 的内容远不止于此，但你可以查看他们定价页面上的更全面列表（[https://www.netlify.com/pricing/](https://www.netlify.com/pricing/))。
- en: To test out Netlify, we will once again use the Eleventy demo from chapter 2
    and deploy Camden Grounds. If you remember from earlier in this chapter, when
    we deployed Camden Grounds to Amazon S3, we deployed the output of the Eleventy
    CLI. If we made a change to the site, we would need to rerun the CLI and copy
    the files up to S3\. While not an onerous task, it’s still manual and prone to
    mistakes. Let’s walk through the process of creating a site on Netlify, which
    will build automatically from a GitHub repository.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试 Netlify，我们再次使用第 2 章中的 Eleventy 示例，并部署 Camden Grounds。如果你还记得本章前面的内容，当我们把
    Camden Grounds 部署到 Amazon S3 时，我们部署了 Eleventy CLI 的输出。如果我们对网站进行了更改，我们需要重新运行 CLI
    并将文件复制到 S3。虽然这不是一项繁重的任务，但它仍然是手动操作且容易出错。让我们来了解一下在 Netlify 上创建网站的流程，它将自动从 GitHub
    仓库构建。
- en: If you have not already done so, begin by signing up for Netlify ([https://app.netlify.com/signup](https://app.netlify.com/signup)).
    They have a free tier that will be more than adequate for your needs. Figure 6.30
    shows the multiple ways you can sign up.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还没有这样做，首先注册Netlify（[https://app.netlify.com/signup](https://app.netlify.com/signup)）。他们有一个免费层，这将完全满足你的需求。图6.30显示了你可以注册的多种方式。
- en: '![CH06_F30_Camden2](Images/CH06_F30_Camden2.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F30_Camden2](Images/CH06_F30_Camden2.png)'
- en: Figure 6.30 Signing up for Netlify supports multiple login options.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.30 在Netlify上注册支持多种登录选项。
- en: After you sign up (and confirm your email), you can then log in. The main interface
    for Netlify is a dashboard listing all your sites and their current status. As
    a new user, your dashboard will look pretty empty (figure 6.31).
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在注册（并确认你的电子邮件）之后，你就可以登录了。Netlify的主要界面是一个列出所有网站及其当前状态的仪表板。作为一个新用户，你的仪表板看起来可能相当空（图6.31）。
- en: '![CH06_F31_Camden2](Images/CH06_F31_Camden2.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F31_Camden2](Images/CH06_F31_Camden2.png)'
- en: Figure 6.31 The Netlify dashboard for a new user
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.31 新用户的Netlify仪表板
- en: For comparison’s sake, here’s my personal dashboard (figure 6.32).
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行比较，这里是我的个人仪表板（图6.32）。
- en: '![CH06_F32_Camden2](Images/CH06_F32_Camden2.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F32_Camden2](Images/CH06_F32_Camden2.png)'
- en: Figure 6.32 A more fully used Netlify dashboard
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.32 更充分使用的Netlify仪表板
- en: Notice each site listed contains a screenshot of the current look and feel.
    On the right is a list of the most recent builds across my entire account. Looking
    back at figure 6.31, notice the prominent New site from Git button. Let’s use
    this as a way to test Netlify’s continuous deployment feature.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 注意列出的每个网站都包含当前外观和感觉的截图。在右侧是整个账户中最新的构建列表。回顾图6.31，注意Git按钮中的突出显示的新网站。让我们利用这个方法来测试Netlify的持续部署功能。
- en: While this book has a GitHub repository, in order to test this feature you will
    need to create your own repository. Most readers are probably familiar with GitHub,
    but if not, you can read an excellent guide on the GitHub site at [https://guides.github.com/activities/hello-world/](https://guides.github.com/activities/hello-world/).
    Also note that, like Vercel, Netlify has a CLI that supports deploying from your
    terminal.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这本书有一个GitHub仓库，但为了测试这个功能，你需要创建自己的仓库。大多数读者可能熟悉GitHub，但如果不知道，你可以在GitHub网站上阅读一篇优秀的指南，网址为[https://guides.github.com/activities/hello-world/](https://guides.github.com/activities/hello-world/)。此外，请注意，像Vercel一样，Netlify有一个支持从终端部署的CLI。
- en: As previously mentioned, we’re going to use Camden Grounds from chapter 2 as
    our test. The files for this site are found in the book’s repository at chapter2/
    camdengrounds. In your own GitHub account, create a new repository for Camden
    Grounds. Once created, simply copy over the files from the previous directory
    into the new repository. Before you commit these new files, there’s one small
    addition you should make. Git repositories support a way to ignore local directories
    and files to ensure they don’t get pushed to the repository. This is done via
    a file named .gitignore. When Eleventy outputs a build, it uses a folder named
    _site by default. Since this is generated output, we do not need it in the GitHub
    repository. The contents of the file I created before committing Camden Grounds
    to the repository are provided. Notice we also added node_modules to the .gitignore
    file, shown in listing 6.1\. This is required so that Eleventy doesn’t try to
    parse any Node-related files generated during its build.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们将使用第2章中的Camden Grounds作为我们的测试。这个网站的文件可以在本书的仓库中找到，位于chapter2/camdengrounds。在你的GitHub账户中，为Camden
    Grounds创建一个新的仓库。一旦创建，只需将之前目录中的文件复制到新仓库中。在你提交这些新文件之前，你应该添加一个小小的修改。Git仓库支持忽略本地目录和文件，以确保它们不会被推送到仓库。这是通过一个名为.gitignore的文件来完成的。当Eleventy输出构建时，它默认使用名为_site的文件夹。由于这是生成的输出，我们不需要它在GitHub仓库中。在将Camden
    Grounds提交到仓库之前创建的文件内容如下。注意我们还在.gitignore文件中添加了node_modules，如列表6.1所示。这是必需的，这样Eleventy就不会尝试解析其构建过程中生成的任何Node相关文件。
- en: Listing 6.1 .gitignore file for Camden Grounds
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 列表6.1 Camden Grounds的.gitignore文件
- en: '[PRE4]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: With this in play, commit those files to your new repository. The final result
    should look like figure 6.33 (although with a different username, of course).
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在此操作完成后，将这些文件提交到你的新仓库中。最终结果应该看起来像图6.33（当然，用户名会有所不同）。
- en: '![CH06_F33_Camden2](Images/CH06_F33_Camden2.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F33_Camden2](Images/CH06_F33_Camden2.png)'
- en: Figure 6.33 The new Camden Grounds repository
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.33 新的Camden Grounds仓库
- en: If you want to simply copy the repository I used for this test, you can find
    it at [https://github.com/cfjedimaster/Camden-Ground-Test](https://github.com/cfjedimaster/Camden-Ground-Test).
    Now let’s hook this up to Netlify!
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您只想复制我用于此测试的仓库，您可以在[https://github.com/cfjedimaster/Camden-Ground-Test](https://github.com/cfjedimaster/Camden-Ground-Test)找到它。现在让我们将其连接到Netlify！
- en: As mentioned, Netlify prompts you to build a new site from Git, so click that
    button to begin the process. In figure 6.34, you’ll see three different options
    to begin the process; select GitHub as the provider.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，Netlify会提示您从Git构建新站点，因此点击该按钮以开始过程。在图6.34中，您将看到三个不同的选项以开始过程；选择GitHub作为提供商。
- en: '![CH06_F34_Camden2](Images/CH06_F34_Camden2.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F34_Camden2](Images/CH06_F34_Camden2.png)'
- en: Figure 6.34 The beginning of the process to create a new site from a repository
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.34 从存储库创建新站点的过程开始
- en: 'After you’ve authenticated with GitHub, you will see a list of all your repositories.
    Find the one you created and click it. The next screen will prompt you for a branch
    to deploy (defaulting to master or main) and then ask for basic build settings.
    These build settings are for the command to build your site as well as where the
    results can be found. To tell Netlify how to build the site, we can use npx, an
    alternative way of using npm. This is covered in the Eleventy docs ([https://www.11ty.dev/docs/usage/](https://www.11ty.dev/docs/usage/))
    and looks like so: npx @11ty/eleventy. By default, Eleventy will output to _site,
    so we will use that for the publish directory setting. You can see both in figure
    6.35.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在您通过GitHub进行身份验证后，您将看到所有仓库的列表。找到您创建的仓库并点击它。下一屏幕将提示您选择要部署的分支（默认为master或main），然后请求基本的构建设置。这些构建设置用于构建您的站点的命令以及结果可以找到的位置。为了告诉Netlify如何构建站点，我们可以使用npx，这是使用npm的另一种方式。这在Eleventy文档([https://www.11ty.dev/docs/usage/](https://www.11ty.dev/docs/usage/))中有介绍，看起来是这样的：npx
    @11ty/eleventy。默认情况下，Eleventy将输出到_site，因此我们将使用它作为发布目录设置。您可以在图6.35中看到这两个设置。
- en: '![CH06_F35_Camden2](Images/CH06_F35_Camden2.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F35_Camden2](Images/CH06_F35_Camden2.png)'
- en: Figure 6.35 Configuration settings for the Netlify site
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.35 Netlify站点的配置设置
- en: Click Deploy site to begin the process. You can then sit back and watch. The
    Netlify dashboard will update you about the process of getting your files from
    GitHub and running your build command. When it’s done, you’ll see a URL and preview
    for your site on top of the dashboard (figure 6.36).
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“部署站点”以开始过程。然后您可以坐下来观看。Netlify仪表板将更新您有关从GitHub获取文件和运行构建命令的过程。完成后，您将在仪表板顶部看到站点的URL和预览（图6.36）。
- en: '![CH06_F36_Camden2](Images/CH06_F36_Camden2.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F36_Camden2](Images/CH06_F36_Camden2.png)'
- en: Figure 6.36 The site’s updated URL and screenshot
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.36 站点更新后的URL和截图
- en: 'If you click that link, you can browse the site and see Camden Grounds. To
    truly see the power of the GitHub integration, let’s perform a quick test. Open
    _data/products .json and modify the first product. It doesn’t really matter what
    you change; just make a modification:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您点击该链接，您可以浏览站点并查看Camden Grounds。为了真正看到GitHub集成的力量，让我们进行一个快速测试。打开_data/products.json并修改第一个产品。您更改的内容并不重要；只需进行修改即可：
- en: '[PRE5]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Save the file, check it into your GitHub repository, and then watch the Netlify
    dashboard (figure 6.37).
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 保存文件，将其检入您的GitHub仓库，然后观察Netlify仪表板（图6.37）。
- en: '![CH06_F37_Camden2](Images/CH06_F37_Camden2.png)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F37_Camden2](Images/CH06_F37_Camden2.png)'
- en: Figure 6.37 The Netlify dashboard showing you information on your build
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.37 Netlify仪表板显示您的构建信息
- en: There are two additional things I want to point out about figure 6.37\. Notice
    the earliest report shows an error. While the nature of the error isn’t important,
    Netlify will handle the error and let you click on the build for details. Also—and
    this is important—it will *not* break an existing site if something goes wrong
    in the build. In this particular case it was the first build, so there wasn’t
    a site, but you can rest assured that if you do screw up something, your existing
    site will continue to work just fine. Netlify only updates the when it’s completely,
    and successfully, built. That means no downtime. Secondly, the message you see
    under the latest build (“modify product”) came right from my GitHub commit. Normally
    you’re supposed to write nice, specific GitHub commit messages, and these will
    be shown in the Netlify UI.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 关于图6.37，我想指出两点额外的事情。注意最早的报告显示了一个错误。虽然错误的性质并不重要，Netlify会处理这个错误，并允许您点击构建以获取详细信息。而且——这很重要——如果在构建过程中出现问题，它不会破坏现有的网站。在这个特定的情况下，这是第一次构建，所以没有网站，但您可以放心，如果您真的搞砸了什么，您的现有网站将继续正常工作。Netlify只有在完全且成功构建后才会更新。这意味着没有停机时间。其次，您在最新构建下看到的消息（“修改产品”）直接来自我的GitHub提交。通常，您应该编写好的、具体的GitHub提交信息，这些信息将在Netlify
    UI中显示。
- en: Once the build is done, you can open the site again and see your new product
    (figure 6.38).
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 构建完成后，您可以再次打开网站并查看您的新产品（图6.38）。
- en: '![CH06_F38_Camden2](Images/CH06_F38_Camden2.png)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F38_Camden2](Images/CH06_F38_Camden2.png)'
- en: Figure 6.38 The updated site based on the last GitHub commit
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.38 基于最后GitHub提交的更新网站
- en: 'Let’s take a look at one of Netlify’s cooler features: form processing. In
    chapter 7, we’ll talk more about handling dynamic aspects of statically generated
    websites, but since Netlify makes this particular feature so simple to use, we
    want to cover it here. If you remember, the Contact Us page for Camden Grounds
    didn’t have any real information on it. Let’s change that by adding in a form,
    shown in listing 6.2.'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看Netlify的一个更酷的功能：表单处理。在第7章中，我们将更多地讨论处理静态生成网站的动态方面，但由于Netlify使这个特定功能的使用变得非常简单，我们想在这里介绍它。如果您还记得，Camden
    Grounds的“联系我们”页面没有任何实际信息。让我们通过添加一个表单来改变这一点，如表6.2所示。
- en: Listing 6.2 The Contact Us form (/contact.html)
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 列表6.2 联系我们表单 (/contact.html)
- en: '[PRE6]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Commit this change to your repository and wait for Netlify to finish building.
    Once done, you’ll see your new form online (figure 6.39). Of course, you can also
    test how the form looks locally. Typically, you would want to do that so you can
    quickly see your changes. Since we’re building a simple form, we don’t need to
    worry about that right now.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 将此更改提交到您的仓库，并等待Netlify完成构建。一旦完成，您将看到您的新表单在线上（图6.39）。当然，您也可以测试表单在本地看起来如何。通常，您会这样做，以便快速查看您的更改。由于我们正在构建一个简单的表单，我们目前不需要担心这一点。
- en: '![CH06_F39_Camden2](Images/CH06_F39_Camden2.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F39_Camden2](Images/CH06_F39_Camden2.png)'
- en: Figure 6.39 A simple contact form
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.39 简单的联系方式表单
- en: 'We’ve got the UI done, but if you actually try to submit the page, nothing
    happens. Luckily, Netlify makes it pretty simple to handle the form submission.
    By adding data-netlify="true" to your form tag, Netlify will recognize the form
    submission and automatically save the results. That’s all you have to do, but
    you can configure more as well. Netlify also supports adding captcha and honeypot
    spam traps to your form. Let’s quickly modify contact.html to show this in action.
    The only change you need to make is to the form tag:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经完成了UI，但如果您实际尝试提交页面，则没有任何反应。幸运的是，Netlify使处理表单提交变得非常简单。通过在表单标签中添加data-netlify="true"，Netlify将识别表单提交并自动保存结果。您只需这样做，但您也可以进行更多配置。Netlify还支持向您的表单添加captcha和honeypot垃圾邮件陷阱。让我们快速修改contact.html以展示这一功能。您需要做的唯一更改是表单标签：
- en: '[PRE7]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'There are three differences here:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有三点不同：
- en: First, we specify an action for the form. After Netlify processes and saves
    the form input, it will then redirect the user to this page. (This page is in
    the GitHub repository and has a quick thank-you message.)
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们为表单指定一个动作。在Netlify处理并保存表单输入后，它将用户重定向到这个页面。（这个页面位于GitHub仓库中，并包含一条简短的感谢信息。）
- en: Next, we add the data-netlify attribute to tell Netlify to handle the submission.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们添加data-netlify属性来告诉Netlify处理提交。
- en: Finally, we provide a name for the form. This will help Netlify recognize different
    forms if your site has more than one.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们为表单提供一个名称。这有助于Netlify在您的网站有多个表单时识别不同的表单。
- en: Again, commit this change, wait for the build to deploy, and now when you submit
    the form, you’ll end up on the action page. So where did your form data go?
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 再次提交此更改，等待构建部署，现在当您提交表单时，您将结束在操作页面上。那么您的表单数据去哪里了？
- en: Back in the Netlify dashboard, click the Forms link on top. You’ll initially
    see a list of active forms on the site, which for now is just one (figure 6.40).
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Netlify 控制台中，点击顶部的“表单”链接。您最初会看到网站上活跃的表单列表，目前只有一个（图 6.40）。
- en: '![CH06_F40_Camden2](Images/CH06_F40_Camden2.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F40_Camden2](Images/CH06_F40_Camden2.png)'
- en: Figure 6.40 List of forms that Netlify is handling
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.40 Netlify 处理的表单列表
- en: Click on the Contact form link to get a list of form submissions. If you click
    on a submission, you can see the details (figure 6.41).
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“联系表单”链接以获取表单提交的列表。如果您点击一个提交项，您可以看到详细信息（图 6.41）。
- en: '![CH06_F41_Camden2](Images/CH06_F41_Camden2.png)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![CH06_F41_Camden2](Images/CH06_F41_Camden2.png)'
- en: Figure 6.41 Details of the form submission
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.41 表单提交的详细信息
- en: Netlify offers even more features with forms, including sending a copy of the
    sub- mission to an email address and passing the data to a serverless function.
    See the documentation ([https://docs.netlify.com/forms/setup/#html-forms](https://docs.netlify.com/forms/setup/#html-forms))
    for more information about what’s possible. In the next chapter, we’ll discuss
    additional ways of handling dynamic aspects of Jamstack sites, including form
    processing, search, and more.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: Netlify 提供了更多功能，包括表单，例如将提交的副本发送到电子邮件地址并将数据传递到无服务器函数。有关更多信息，请参阅文档（[https://docs.netlify.com/forms/setup/#html-forms](https://docs.netlify.com/forms/setup/#html-forms)）。在下一章中，我们将讨论处理
    Jamstack 网站动态方面的其他方法，包括表单处理、搜索等。
- en: Summary
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Developers have many options for deploying their Jamstack sites, each with different
    strengths and weaknesses. Those options include old but still functional vanilla
    web server installations, cloud-based file hosting providers, and services specifically
    designed for the Jamstack.
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开发者有许多部署他们的 Jamstack 网站的选择，每种选择都有不同的优缺点。这些选项包括老式但仍然功能齐全的纯网页服务器安装、基于云的文件托管提供商以及专门为
    Jamstack 设计的服务。
- en: File-based providers can be simple solutions but do not offer much beyond basic
    file storage. For basic websites that don’t need redirects or other advanced features,
    a file-based provider may be an adequate solution.
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于文件的提供商可能是简单的解决方案，但提供的功能远不止基本的文件存储。对于不需要重定向或其他高级功能的简单网站，基于文件的提供商可能是一个足够好的解决方案。
- en: Microsoft offers a nice option that integrates well with Visual Studio Code.
    Developers can connect and deploy sites straight from the editor they are (most
    likely) already using to develop their site.
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微软提供了一个与 Visual Studio Code 集成良好的不错选项。开发者可以直接从他们（很可能）已经使用的编辑器中连接和部署网站。
- en: Both Vercel and Netlify tailor specifically to Jamstack and frontend developers,
    providing numerous features that make hosting attractive. Form processing, redirect
    rules, and serverless functions are just a few examples.
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vercel 和 Netlify 都专门针对 Jamstack 和前端开发者，提供众多使托管变得有吸引力的功能。表单处理、重定向规则和无服务器函数只是其中的一些例子。
