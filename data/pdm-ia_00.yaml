- en: front matter
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前置材料
- en: preface
  id: totrans-1
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 前言
- en: I have been working on computer security for close to 40 years, and for the
    past 20 years, I’ve focused on container technologies. When Docker showed up about
    10 years ago, it triggered a revolution in the way the people distributed and
    ran applications on the internet. As I worked on Docker, I felt it could have
    been designed better. Working with a root-running daemon and then adding more
    and more daemons felt like the wrong approach. Instead, I felt we could use low-level
    operating systems concepts to create a tool that ran the same containerized applications
    in the same manner but with more security and requiring fewer privileges. With
    this in mind, my team at Red Hat set out to build a series of tools to help developers
    and administrators run containers in the most secure way possible. Out of this
    effort came Podman.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我从事计算机安全工作近40年，过去20年专注于容器技术。大约10年前，当Docker出现时，它引发了人们在网上分发和运行应用程序方式的革命。在我为Docker工作时，我觉得它本可以设计得更好。与运行在root权限下的守护进程一起工作，然后添加越来越多的守护进程，感觉这是一种错误的方法。相反，我觉得我们可以使用低级操作系统概念来创建一个工具，以相同的方式运行相同的容器化应用程序，但具有更高的安全性和更少的权限。带着这个想法，我在红帽公司的团队着手构建一系列工具，以帮助开发人员和管理员以最安全的方式运行容器。Podman就是从这个努力中诞生的。
- en: I started blogging on subjects like SELinux in the early 2000s and have been
    writing articles ever since. I have written hundreds of articles on containers
    and security over the years, but I wanted to consolidate the ideas and describe
    the technology of Podman in a single book I could point users and customers to.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我在2000年代初开始写关于SELinux等主题的博客，并且从那时起一直在写文章。多年来，我写了数百篇关于容器和安全的文章，但我希望将想法整合并描述Podman技术，以便我可以向用户和客户推荐一本书。
- en: This book introduces Podman and how to use it. It also dives deep into the technology
    and the different parts of the Linux operating system that we take advantage of.
    Since I am a security engineer, I also spend a couple of chapters describing how
    the security of containers works. Reading this book should give you a better understanding
    of what containers are, how they work, and how to work with different features
    of Podman. You will even learn a lot more about Docker. As Podman grows in popularity
    and infiltrates your infrastructure, this book will be a handy reference to guide
    your way.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本书介绍了Podman及其使用方法。它还深入探讨了我们所利用的Linux操作系统的技术和不同部分。由于我是一个安全工程师，我还用几章的篇幅描述了容器安全的工作原理。阅读这本书应该能让你更好地理解容器是什么，它们是如何工作的，以及如何使用Podman的不同功能。你甚至还会学到更多关于Docker的知识。随着Podman越来越受欢迎并渗透到你的基础设施中，这本书将成为一个实用的参考，引导你的道路。
- en: acknowledgments
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 致谢
- en: I extend thanks to all the people who helped me write this book. This includes
    members of the Podman team, who have written articles that helped me understand
    some of the technology I did not fully comprehend and have helped build a great
    product. Thank you, Brent Baude, Matt Heon, Valentin Rothberg, Giuseppe Scrivano,
    Urvashi Mohnani, Nalin Dahyabhai, Lokesh Mandvekar, Miloslav Trmac, Jason Greene,
    Jhon Honce, Scott McCarty, Tom Sweeney, Ashley Cui, Ed Santiago, Chris Evich,
    Aditya Rajan, Paul Holzinger, Preethi Thomas, and Charlie Doern. I also want to
    thank the countless open source contributors who have made Linux containers and
    Podman possible.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我感谢所有帮助我写这本书的人。这包括Podman团队成员，他们写的文章帮助我理解了一些我不完全理解的技术，并帮助构建了一个伟大的产品。感谢Brent Baude、Matt
    Heon、Valentin Rothberg、Giuseppe Scrivano、Urvashi Mohnani、Nalin Dahyabhai、Lokesh
    Mandvekar、Miloslav Trmac、Jason Greene、Jhon Honce、Scott McCarty、Tom Sweeney、Ashley
    Cui、Ed Santiago、Chris Evich、Aditya Rajan、Paul Holzinger、Preethi Thomas和Charlie
    Doern。我还想感谢那些使Linux容器和Podman成为可能的无数开源贡献者。
- en: I thank the entire team at Manning, but especially Toni Arritola. Toni taught
    me how to better focus my ideas and has been a great partner on this journey.
    She’s had to deal with me, an old mathematics major who was never great at writing,
    and she helped make this book possible.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我感谢Manning出版社的整个团队，但特别感谢Toni Arritola。Toni教会了我如何更好地集中思想，并在这次旅程中成为了一位伟大的合作伙伴。她不得不应对我这样一个老数学专业毕业生，我从未擅长写作，但她帮助使这本书成为可能。
- en: To all the reviewers—Alain Lompo, Alessandro Campeis, Allan Makura, Amanda Debler,
    Anders Björklund, Andrea Monacchi, Camal Cakar, Clifford Thurber, Conor Redmond,
    David Paccoud, Deepak Sharma, Federico Kircheis, Frans Oilinki, Gowtham Sadasivam,
    Ibrahim Akkulak, James Liu, James Nyika, Jeremy Chen, Kent Spillner, Kevin Etienne,
    Kirill Shirinkin, Kosmas Chatzimichalis, Krzysztof Kamyczek, Larry Cai, Michael
    Bright, Mladen Knežić, Oliver Korten, Richard Meinsen, Roman Zhuzha, Rui Liu,
    Satadru Roy, Seung-jin Kim, Simeon Leyzerzon, Simone Sguazza, Syed Ahmed, Thomas
    Peklak, and Vivek Veerappan—thank you, your suggestions helped make this a better
    book.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 向所有审稿人——Alain Lompo、Alessandro Campeis、Allan Makura、Amanda Debler、Anders Björklund、Andrea
    Monacchi、Camal Cakar、Clifford Thurber、Conor Redmond、David Paccoud、Deepak Sharma、Federico
    Kircheis、Frans Oilinki、Gowtham Sadasivam、Ibrahim Akkulak、James Liu、James Nyika、Jeremy
    Chen、Kent Spillner、Kevin Etienne、Kirill Shirinkin、Kosmas Chatzimichalis、Krzysztof
    Kamyczek、Larry Cai、Michael Bright、Mladen Knežić、Oliver Korten、Richard Meinsen、Roman
    Zhuzha、Rui Liu、Satadru Roy、Seung-jin Kim、Simeon Leyzerzon、Simone Sguazza、Syed
    Ahmed、Thomas Peklak和Vivek Veerappan——表示感谢，你们的建议帮助使这本书变得更好。
- en: about this book
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于本书
- en: '*Podman in Action* describes how users can build, manage, and run containers.
    My goal in writing it was to explain how easy it is to transfer skills you might
    have learned in Docker to Podman as well as how easy it is to use Podman if you
    have never used a container engine before. *Podman in Action* also teaches you
    how to use advanced features like pods and guides you on your journey toward building
    applications ready to run on the edge of or inside Kubernetes. Finally, *Podman
    in Action* explains all of the security features of the Linux kernel used to isolate
    containers from the system as well as from other containers.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 《Podman实战》描述了用户如何构建、管理和运行容器。我写这本书的目标是解释如何轻松地将你在Docker中学到的技能转移到Podman上，以及如果你之前从未使用过容器引擎，使用Podman是多么容易。此外，《Podman实战》还教你如何使用高级功能，如pods，并指导你走向构建可在Kubernetes边缘或内部运行的应用程序的道路。最后，《Podman实战》解释了Linux内核中用于隔离容器与系统以及与其他容器之间的所有安全功能。
- en: Who should read this book?
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 谁应该阅读这本书？
- en: '*Podman in Action* is written for software developers who are looking to understand,
    develop, and work with containers, as well as system administrators who need to
    run containers in production. Reading this book will give you a deeper understanding
    of what containers are. Having knowledge of Linux processes and familiarity working
    with the Linux shells is necessary to get the full benefit of the book.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 《Podman实战》是为那些希望理解、开发和与容器一起工作的软件开发者以及需要在生产环境中运行容器的系统管理员所写的。阅读这本书将使你对容器是什么有更深入的了解。了解Linux进程以及熟悉使用Linux
    shell是充分利用本书的必要条件。
- en: The book should have something for everyone on their quest to use containers.
    Users with a deep understanding of Docker will learn about advanced features of
    Podman not available from Docker and will get an even deeper understanding of
    how Docker works. Novice users will learn the basics of containers and pods.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本书应该为每个人在他们的容器使用之旅中提供一些内容。对Docker有深入了解的用户将了解Podman的Docker中不可用的高级功能，并将对Docker的工作原理有更深入的理解。新手用户将学习容器和pods的基础知识。
- en: 'How this book is organized: A roadmap'
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本书如何组织：路线图
- en: '*Podman in Action* is split into four parts and six appendixes:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 《Podman实战》分为四部分和六个附录：
- en: Part 1, “Foundations,” comprises four chapters and provides readers an introduction
    to Podman. Chapter 1 explains what Podman does, why it was created, and why it
    is important. The next two chapters introduce the command-line interface and how
    to use volumes within containers. Finally, chapter 4 introduces the concept of
    pods and how Podman works with them. There should be something for everyone in
    these chapters, but if you have great experience with Docker, you should be able
    to skim over much of the content in chapter 2.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一部分，“基础”，包含四章，为读者提供了Podman的介绍。第一章解释了Podman的功能、为什么它被创建以及为什么它很重要。接下来的两章介绍了命令行界面以及如何在容器中使用卷。最后，第四章介绍了pods的概念以及Podman如何与它们一起工作。这些章节中应该有适合每个人的内容，但如果你有丰富的Docker经验，你应该能够快速浏览第二章的大部分内容。
- en: Part 2, “Design,” comprises two chapters in which I dig deep into Podman’s design.
    You will learn about rootless containers and how they work and will come out of
    these chapters with a better understanding of user namespaces and the security
    of rootless containers. You will also learn how to customize the configuration
    of your Podman environment.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二部分，“设计”，包含两个章节，其中我深入探讨了 Podman 的设计。您将了解无根容器及其工作原理，并在这些章节结束时对用户命名空间和无根容器的安全性有更深入的理解。您还将学习如何自定义
    Podman 环境的配置。
- en: Part 3, “Advanced topics,” comprises three chapters and moves beyond the basics
    of Podman. In chapter 7 you will see how Podman can work in production through
    its integration with systemd. It covers running systemd inside a container and
    how you can use it as a container manager. You will learn how to set up edge servers
    with Podman containers, where systemd manages the life cycle of the container.
    Podman makes it easy to generate systemd unit files to help you put your containerized
    applications into production. In chapter 8 you will learn how Podman can be used
    to help you move containers into Kubernetes. Podman supports launching containers
    with the same YAML files that Kubernetes uses as well as the ability to generate
    Kubernetes YAML from your current containers. In chapter 9 you will see Podman
    running as a service, allowing remote access to Podman containers. Using Podman
    as a service allows you to use other programming languages and tools to manage
    Podman containers. You will see how `docker-compose` can work with Podman containers.
    You will also learn how to use the Python libraries like podman-py and docker-py
    to communicate with the Podman service for managing containers.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三部分，“高级主题”，包含三个章节，并超越了 Podman 的基础知识。在第 7 章中，您将了解 Podman 如何通过与其与 systemd 的集成在生产环境中工作。它涵盖了在容器内运行
    systemd 以及如何将其用作容器管理器。您将学习如何使用 Podman 容器设置边缘服务器，其中 systemd 管理容器的生命周期。Podman 使您能够轻松生成
    systemd 单元文件，以帮助您将容器化应用程序投入生产。在第 8 章中，您将了解如何使用 Podman 将容器移动到 Kubernetes。Podman
    支持使用与 Kubernetes 相同的 YAML 文件启动容器，以及从当前容器生成 Kubernetes YAML 的能力。在第 9 章中，您将看到 Podman
    作为服务运行，允许远程访问 Podman 容器。将 Podman 作为服务使用允许您使用其他编程语言和工具来管理 Podman 容器。您将了解 `docker-compose`
    如何与 Podman 容器协同工作。您还将学习如何使用 Python 库（如 podman-py 和 docker-py）与 Podman 服务通信以管理容器。
- en: Part 4, “Container security,” comprises two chapters, in which I discuss important
    security considerations. Chapter 10 covers features used to ensure container isolation.
    This chapter covers security subsystems of Linux, like SELinux, seccomp, Linux
    capabilities, kernel file systems, and namespaces. Chapter 11 then examines the
    security considerations I consider best practices for running your containers
    in as secure a manner as possible.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第四部分，“容器安全”，包含两个章节，其中我讨论了重要的安全考虑因素。第 10 章涵盖了用于确保容器隔离的功能。本章涵盖了 Linux 的安全子系统，如
    SELinux、seccomp、Linux 能力、内核文件系统和命名空间。第 11 章随后检查了我在尽可能安全地运行容器时认为的最佳实践。
- en: 'Additionally, there are six appendixes covering Podman-related subjects:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有六个附录涵盖了与 Podman 相关的主题：
- en: Appendix A covers all of the Podman-related tools, including Buildah, Skopeo,
    and CRI-O.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附录 A 涵盖了所有与 Podman 相关的工具，包括 Buildah、Skopeo 和 CRI-O。
- en: Appendix B dives into the different OCI runtimes available to Podman as well
    as Docker. It covers `runc`, `crun`, Kata, and gVisor.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附录 B 深入探讨了 Podman 以及 Docker 可用的不同 OCI 运行时，包括 `runc`、`crun`、Kata 和 gVisor。
- en: Appendix C describes how you can get Podman onto your local system, whether
    that system is a Linux, Mac, or Windows box.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附录 C 描述了如何将 Podman 安装到您的本地系统，无论该系统是 Linux、Mac 还是 Windows。
- en: Appendix D describes the Podman open source community and how you can join.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附录 D 描述了 Podman 开源社区以及如何加入。
- en: Appendixes E and F dive into running Podman on Mac and Windows boxes.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附录 E 和 F 深入探讨了在 Mac 和 Windows 系统上运行 Podman。
- en: liveBook discussion forum
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: liveBook 讨论论坛
- en: Each purchase of *Podman in Action* includes free access to liveBook, Manning’s
    online reading platform. Using liveBook’s exclusive discussion features, you can
    attach comments to the book globally or to specific sections or paragraphs. It’s
    a snap to make notes for yourself, ask and answer technical questions, and receive
    help from the author and other users. To access the forum, go to [https://livebook.manning.com/book/podman-in-action/discussion](https://livebook.manning.com/book/podman-in-action/discussion).
    You can also learn more about Manning's forums and the rules of conduct at [https://livebook.manning.com/discussion](https://livebook.manning.com/discussion).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 每购买一本《Podman in Action》都包括免费访问liveBook，曼宁的在线阅读平台。使用liveBook的独特讨论功能，您可以在全球范围内或特定章节或段落中附加评论。为自己做笔记、提问和回答技术问题，以及从作者和其他用户那里获得帮助都非常简单。要访问论坛，请访问[https://livebook.manning.com/book/podman-in-action/discussion](https://livebook.manning.com/book/podman-in-action/discussion)。您还可以在[https://livebook.manning.com/discussion](https://livebook.manning.com/discussion)了解更多关于曼宁论坛和行为准则的信息。
- en: Manning’s commitment to our readers is to provide a venue where a meaningful
    dialogue between individual readers and between readers and the author can take
    place. It is not a commitment to any specific amount of participation on the part
    of the author, whose contribution to the forum remains voluntary (and unpaid).
    We suggest you try asking him some challenging questions lest his interest stray!
    The forum and the archives of previous discussions will be accessible from the
    publisher’s website as long as the book is in print.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 曼宁对我们读者的承诺是提供一个平台，在这里个人读者之间以及读者与作者之间可以进行有意义的对话。这并不是对作者参与特定数量活动的承诺，作者对论坛的贡献仍然是自愿的（且未付费）。我们建议您尝试向他提出一些挑战性的问题，以免他的兴趣转移！只要这本书还在印刷中，论坛和先前讨论的存档将可通过出版社的网站访问。
- en: Author online
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 作者在线
- en: You can follow Dan Walsh on Twitter and GitHub @rhatdan. He regularly blogs
    at [https://www.redhat.com/sysadmin/users/dwalsh](https://www.redhat.com/sysadmin/users/dwalsh)
    as well as on several other sites. There are many videos of talks Dan has presented
    available on YouTube as well.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在Twitter和GitHub上关注丹尼尔·沃尔什 @rhatdan。他经常在[https://www.redhat.com/sysadmin/users/dwalsh](https://www.redhat.com/sysadmin/users/dwalsh)以及几个其他网站上写博客。YouTube上有许多丹尼尔·沃尔什发表的演讲视频。
- en: about the author
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于作者
- en: '![](../../OEBPS/Images/FM-Daniel_Walsh.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![丹尼尔·沃尔什](../../OEBPS/Images/FM-Daniel_Walsh.png)'
- en: Daniel Walsh leads the team that created Podman, Buildah, Skopeo, CRI-O, and
    their related tools. Dan is a senior distinguished engineer at Red Hat, having
    joined in August 2001\. He has worked in the computer security field for over
    40 years. Dan is sometimes referred to as Mr. SELinux after leading the development
    of SELinux at Red Hat prior to leading the container team. Dan has a BA in mathematics
    from the College of the Holy Cross and an MS in computer science from Worcester
    Polytechnic Institute. On Twitter and GitHub you can find him @rhatdan. You can
    email him at dwalsh@redhat.com.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 丹尼尔·沃尔什领导了创建Podman、Buildah、Skopeo、CRI-O及其相关工具的团队。丹自2001年8月加入红帽公司以来，担任高级杰出工程师。他在计算机安全领域工作了40多年。丹在红帽公司领导容器团队之前，曾领导开发SELinux，因此有时被称为SELinux先生。丹在圣十字学院获得数学学士学位，在伍斯特理工学院获得计算机科学硕士学位。您可以在Twitter和GitHub上找到他
    @rhatdan。您可以通过dwalsh@redhat.com给他发邮件。
- en: about the cover illustration
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于封面插图
- en: The figure on the cover of *Podman in Action* is captioned “La vandale,” or
    “The vandal,” and is taken from a collection by Jacques Grasset de Saint-Sauveur,
    published in 1797\. Each illustration is finely drawn and colored by hand.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 《Podman in Action》封面上的插图标题为“La vandale”，或“破坏者”，取自雅克·格拉塞·德·圣索沃尔于1797年出版的作品集。每一幅插图都是手工精心绘制和着色的。
- en: In those days, it was easy to identify where people lived and what their trade
    or station in life was just by their dress. Manning celebrates the inventiveness
    and initiative of the computer business with book covers based on the rich diversity
    of regional culture centuries ago, brought back to life by pictures from collections
    such as this one.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在那个时代，人们通过他们的服饰就能轻易地识别出他们的居住地以及他们的职业或社会地位。曼宁通过基于几个世纪前丰富多样的地域文化的书封面来庆祝计算机行业的创新精神和主动性，这些文化通过如这一系列图片般的作品得以重现。
