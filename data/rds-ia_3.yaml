- en: Appendix A. Quick and dirty setup
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 A. 快速设置
- en: Depending on your platform, setting up Redis can range from easy to difficult.
    I’ve broken down installation instructions into sections for the three major platforms.
    Feel free to skip ahead to your platform, which will also include instructions
    for installing and configuring Python and the Redis client libraries for Python
    on your system.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的平台，设置 Redis 可以从简单到困难不等。我已经将安装说明分解为三个主要平台的章节。你可以自由地跳到你的平台，这也会包括在你的系统上安装和配置
    Python 以及 Redis 客户端库的说明。
- en: A.1\. Installation on Debian or Ubuntu Linux
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1\. 在 Debian 或 Ubuntu Linux 上的安装
- en: If you’re using a Debian-derived Linux, your first instinct will be to `apt-get
    install redis-server`, but this is probably the wrong thing to do. Depending on
    your version of Debian or Ubuntu, you could be installing an old version of Redis.
    As an example, if you’re using Ubuntu 10.4, you’d be downloading Redis 1.2.6,
    which was released in March 2010 and doesn’t support many of the commands that
    we use.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是基于 Debian 的 Linux，你的第一反应可能是 `apt-get install redis-server`，但这可能不是正确的事情。根据你的
    Debian 或 Ubuntu 版本，你可能会安装 Redis 的旧版本。例如，如果你使用 Ubuntu 10.4，你会下载 Redis 1.2.6，这是
    2010 年 3 月发布的，不支持我们使用的许多命令。
- en: In this section, you’ll first install the build tools because you’ll compile
    Redis from scratch. Then you’ll download, compile, and install Redis. After Redis
    is running, you’ll download the Redis client libraries for Python.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将首先安装构建工具，因为你将从头开始编译 Redis。然后，你将下载、编译和安装 Redis。Redis 运行后，你将下载 Redis 客户端库。
- en: To get started, make sure that you have all of the standard required build tools
    installed by fetching and downloading `make`, as can be seen in the following
    listing.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请确保你已经通过获取和下载 `make` 安装了所有标准所需的构建工具，如下面的列表所示。
- en: Listing A.1\. Installing build tools on Debian Linux
  id: totrans-6
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.1\. 在 Debian Linux 上安装构建工具
- en: '[PRE0]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When your build tools are installed (they were probably installed before; this
    was a verification step), you’ll take these steps:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的构建工具安装好（它们可能之前已经安装好了；这是一个验证步骤），你会采取以下步骤：
- en: '**1**.  Download the most recent stable Redis source code from [http://redis.io/download](http://redis.io/download).'
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**1**.  从 [http://redis.io/download](http://redis.io/download) 下载最新的稳定版 Redis
    源代码。'
- en: '**2**.  Extract, compile, install, and start Redis.'
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**2**.  提取、编译、安装和启动 Redis。'
- en: '**3**.  Download and install the necessary Redis client libraries for Python.'
  id: totrans-11
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**3**.  下载并安装必要的 Redis 客户端库。'
- en: The first two steps in this process are shown next.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 此过程中的前两个步骤将在下面展示。
- en: Listing A.2\. Installing Redis on Linux
  id: totrans-13
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.2\. 在 Linux 上安装 Redis
- en: '![](274fig01_alt.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](274fig01_alt.jpg)'
- en: After you have Redis installed and running, you need to install the Redis client
    libraries for Python. You won’t bother to install Python, because Python 2.6 or
    2.7 should already be installed by default on Ubuntu or Debian releases in the
    last few years. But you’ll download and install a simple helper package called
    `setuptools`, which will help you download and install the Redis client libraries.^([[1](#app01fn01)])
    This last step of installing the Redis client libraries for Python is shown next.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Redis 安装并运行后，你需要安装 Redis 客户端库。你不会费心安装 Python，因为 Python 2.6 或 2.7 应该已经默认安装在过去的几年中的
    Ubuntu 或 Debian 版本中。但你会下载并安装一个简单的辅助包，称为 `setuptools`，它将帮助你下载和安装 Redis 客户端库。[^([1](#app01fn01))]
    安装 Redis 客户端库的最后一个步骤将在下面展示。
- en: ¹ Experienced Python users will ask “Why not `pip`?” which is another package
    for installing Python libraries. This is because `virtualenv`, which is necessary
    for the easy download of `pip`, is out of the scope of these instructions.
  id: totrans-16
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ¹ 经验丰富的 Python 用户会问“为什么不使用 `pip`？”这是一个用于安装 Python 库的另一个包。这是因为 `virtualenv`，它是轻松下载
    `pip` 所必需的，但超出了这些说明的范围。
- en: Listing A.3\. Installing the Redis client libraries for Python on Linux
  id: totrans-17
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.3\. 在 Linux 上安装 Redis 客户端库
- en: '![](274fig02_alt.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](274fig02_alt.jpg)'
- en: Now that you have the Python libraries installed, you can skip ahead to [section
    A.4](#app01lev1sec4) to test Redis from Python, which should prepare you for all
    of the other chapters.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经安装了 Python 库，你可以跳到[章节 A.4](#app01lev1sec4)来测试从 Python 运行 Redis，这应该会为你准备其他所有章节。
- en: A.2\. Installing on OS X
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2\. 在 OS X 上安装
- en: 'As is the case with other platforms, there are a few ways to download and install
    Redis and the Python Redis client library. In this section, we’ll discuss the
    following:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 与其他平台一样，有几种方式可以下载和安装 Redis 以及 Python Redis 客户端库。在本节中，我们将讨论以下内容：
- en: '**1**.  Downloading, installing, and running Redis on OS X.'
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**1**. 在 OS X 上下载、安装和运行 Redis。'
- en: '**2**.  Installing the Redis client library for Python.'
  id: totrans-23
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**2**. 安装 Python Redis 客户端库。'
- en: If you read the Linux section, you’ll know that we made sure that the necessary
    tools for building Redis from scratch were available, because it was easy to do
    so. Though the installation of Xcode for OS X is a bit more difficult, the fact
    that the build tools download is 10 times larger makes following along without
    a long break much more difficult. As such, you’ll use a method to install Redis
    that doesn’t require a compiler.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你阅读了 Linux 部分，你会知道我们确保了从头开始构建 Redis 所需的工具都是可用的，因为这样做很容易。尽管 OS X 的 Xcode 安装有点困难，但构建工具下载文件大小是
    10 倍之多，这使得在不长时间休息的情况下继续操作变得更加困难。因此，你将使用一种不需要编译器的 Redis 安装方法。
- en: To install Redis in OS X without using a compiler, you’ll use a Python utility
    called *Rudix*, which installs precompiled binaries for a variety of software.
    Conveniently, as of this writing it includes an installer for the most recent
    version of Redis.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 OS X 上不使用编译器安装 Redis，你将使用一个名为 *Rudix* 的 Python 工具，它为各种软件安装预编译的二进制文件。方便的是，截至本文撰写时，它包括最新版本
    Redis 的安装程序。
- en: To download and install Rudix and Redis, you should open a Terminal. The Terminal
    application can be found in the Utilities group inside of Applications. After
    you’ve started the terminal, please follow along with the next listing to install
    Redis using Rudix.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要下载和安装 Rudix 和 Redis，你应该打开一个终端。终端应用程序位于应用程序中的实用工具组内。启动终端后，请按照下一个列表使用 Rudix 安装
    Redis。
- en: Listing A.4\. Installing Redis on OS X
  id: totrans-27
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.4\. 在 OS X 上安装 Redis
- en: '![](275fig01_alt.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![图片描述](275fig01_alt.jpg)'
- en: Now that you’ve installed Redis, it’s time to install the Redis client library
    for Python. You don’t need to install Python, because OS X versions 10.6 and 10.7
    come with either Python 2.6 or 2.7 preinstalled and available via `python` by
    default. While Redis is running in one terminal, open up a new tab (command +
    T), and follow along with the next listing to install the Python Redis library.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经安装了 Redis，是时候安装 Redis 的 Python 客户端库了。你不需要安装 Python，因为 OS X 10.6 和 10.7
    版本预装了 Python 2.6 或 2.7，并且可以通过默认的 `python` 命令使用。当 Redis 在一个终端中运行时，打开一个新的标签页（command
    + T），然后按照下一个列表安装 Python Redis 库。
- en: Listing A.5\. Installing the Redis client library for Python on OS X
  id: totrans-30
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.5\. 在 OS X 上安装 Redis 客户端库
- en: '![](276fig01_alt.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图片描述](276fig01_alt.jpg)'
- en: If you read either of the Linux or Windows install instructions, you may have
    noticed that we used `setuptools`’s `easy_install` method to install the Redis
    client library, but here you use `pip`. This is because Rudix offers a `pip` package,
    but doesn’t have a `setuptools` package, so it was easier to install `pip`, and
    then use `pip` to install the Redis client library for Python instead of manually
    downloading and installing `setuptools`.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你阅读了 Linux 或 Windows 的安装说明，你可能已经注意到我们使用了 `setuptools` 的 `easy_install` 方法来安装
    Redis 客户端库，但在这里你使用 `pip`。这是因为 Rudix 提供了一个 `pip` 软件包，但没有 `setuptools` 软件包，所以安装
    `pip` 更容易，然后使用 `pip` 安装 Python Redis 客户端库，而不是手动下载和安装 `setuptools`。
- en: Also, if you read the installation instructions for Linux, you may have noticed
    that we installed the `hiredis` helper library there, but you don’t install it
    on OS X. This is because, like before, you can’t guarantee that users will have
    Xcode installed, so you’ll use what you have available.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果你阅读了 Linux 的安装说明，你可能已经注意到我们在那里安装了 `hiredis` 辅助库，但在 OS X 上你不需要安装它。这是因为，就像之前一样，你不能保证用户已经安装了
    Xcode，所以你会使用你拥有的可用工具。
- en: Now that you have the Redis Python library installed, you should skip ahead
    to [section A.4](#app01lev1sec4) and follow along to use Redis from Python for
    the first time.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经安装了 Redis Python 库，你应该跳到 [章节 A.4](#app01lev1sec4) 并按照说明使用 Python 首次运行 Redis。
- en: A.3\. Installing on Windows
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.3\. 在 Windows 上安装
- en: 'Before we get into how to install Redis on Windows, I’d like to point out that
    running Redis on Windows isn’t recommended, for a variety of reasons. In this
    section we’ll cover these points:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们深入介绍如何在 Windows 上安装 Redis 之前，我想指出，由于各种原因，不建议在 Windows 上运行 Redis。在本节中，我们将讨论这些要点：
- en: Reasons why you shouldn’t be running Redis on Windows.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你不应该在 Windows 上运行 Redis 的原因。
- en: How to download, install, and run a precompiled Windows binary.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何下载、安装和运行预编译的 Windows 二进制文件。
- en: How to download and install Python for Windows.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何在 Windows 上下载和安装 Python。
- en: How to install the Redis client library.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何安装 Redis 客户端库。
- en: Our first step is to discuss why you shouldn’t be running Redis on Windows.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第一步是讨论为什么你不应该在 Windows 上运行 Redis。
- en: A.3.1\. Drawbacks of Redis on Windows
  id: totrans-42
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: A.3.1. Redis在Windows上的缺点
- en: Windows doesn’t support the `fork` system call, which Redis uses in a variety
    of situations to dump its database to disk. Without the ability to fork, Redis
    is unable to perform some of its necessary database-saving methods without blocking
    clients until the dump has completed.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Windows不支持Redis在多种情况下使用的`fork`系统调用，该调用用于将数据库转储到磁盘。由于无法进行`fork`操作，Redis在转储完成前无法执行一些必要的数据库保存方法，从而会阻塞客户端。
- en: Recently, Microsoft has contributed engineering time helping to address background
    saving issues, using threads to write to disk instead of a forked child process.
    As of this writing, Microsoft does have an alpha-stage branch of Redis 2.6, but
    it’s only available as source, and Microsoft makes no guarantees as to its worthiness
    in production scenarios.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，微软贡献了工程时间帮助解决后台保存问题，使用线程写入磁盘而不是使用分叉的子进程。截至本文撰写时，微软确实有一个Redis 2.6的alpha阶段分支，但它仅提供源代码，并且微软不对其在生产场景中的适用性做出任何保证。
- en: At least for the short term, there’s an unofficial port of Redis by Dusan Majkic
    that offers precompiled binaries for Redis 2.4.5, but it has the previously mentioned
    issue that Redis blocks when dumping the database to disk.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 至少在短期内，Dusan Majkic提供了一个非官方的Redis端口，为Redis 2.4.5提供了预编译的二进制文件，但它存在之前提到的问题，即当Redis将数据库转储到磁盘时会出现阻塞。
- en: '|  |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Compiling Redis in Windows yourself
  id: totrans-47
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 在Windows中自行编译Redis
- en: If you find yourself in the position of needing the most up-to-date version
    of Redis on Windows as possible, you’ll need to compile Redis yourself. Your best
    option is to use Microsoft’s official port ([https://github.com/MSOpenTech/redis/](https://github.com/MSOpenTech/redis/)),
    which requires Microsoft Visual Studio, though the free Express 2010 works just
    fine. If you choose to go this route, be warned that Microsoft makes no guarantees
    as to the fitness of their ports to Windows for anything except development and
    testing.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你发现自己需要尽可能最新的 Windows 版本 Redis，那么你需要自己编译 Redis。你的最佳选择是使用微软的官方端口（[https://github.com/MSOpenTech/redis/](https://github.com/MSOpenTech/redis/))，这需要微软的
    Visual Studio，尽管免费的 Express 2010 也能正常工作。如果你选择走这条路，请注意，微软对其端口对 Windows 的适用性（除了开发和测试之外）不做任何保证。
- en: '|  |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
- en: Now that you know the state of Redis on Windows, if you still want to run Redis
    on Windows, let’s install it.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了 Windows 上 Redis 的状态，如果你仍然想在 Windows 上运行 Redis，那么让我们来安装它。
- en: A.3.2\. Installing Redis on Windows
  id: totrans-51
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: A.3.2. 在 Windows 上安装 Redis
- en: 'You can download a moderately out-of-date precompiled version of Redis for
    32-bit and 64-bit Windows thanks to Dusan Majkic from his GitHub page: [https://github.com/dmajkic/redis/downloads](https://github.com/dmajkic/redis/downloads).
    Go ahead and do that now.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过Dusan Majkic从他的GitHub页面下载一个适度的过时版本的Redis预编译版本，适用于32位和64位Windows：[https://github.com/dmajkic/redis/downloads](https://github.com/dmajkic/redis/downloads)。现在就去做吧。
- en: After you download Redis, you’ll need to extract the executables from the zip
    file. As long as you’re using a version of Windows more recent than Windows XP,
    you should be able to extract Redis without any additional software. Do that now.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 下载 Redis 后，您需要从 zip 文件中提取可执行文件。只要您使用的是比 Windows XP 更新的 Windows 版本，您应该能够无需任何额外软件即可提取
    Redis。现在就做吧。
- en: After you’ve extracted either the 32- or 64-bit version of Redis to a location
    of your choice (depending on your platform and preferences; remember that 64-bit
    Windows can run 32- or 64-bit Redis, but 32-bit Windows can only run 32-bit Redis),
    you can start Redis by double-clicking on the `redis-server` executable. After
    Redis has started, you should see a window similar to [figure A.1](#app01fig01).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在您将 Redis 的 32 位或 64 位版本提取到您选择的任何位置（根据您的平台和偏好；请记住，64 位 Windows 可以运行 32 位或 64
    位 Redis，但 32 位 Windows 只能运行 32 位 Redis）之后，您可以通过双击 `redis-server` 可执行文件来启动 Redis。Redis
    启动后，您应该看到一个类似于 [图 A.1](#app01fig01) 的窗口。
- en: Figure A.1\. Redis running in Windows
  id: totrans-55
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图A.1\. Windows下运行的Redis
- en: '![](afig01_alt.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图片描述](afig01_alt.jpg)'
- en: Now that Redis is up and running, it’s time to download and install Python.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 现在Redis已经启动并运行，是时候下载并安装Python了。
- en: A.3.3\. Installing Python on Windows
  id: totrans-58
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: A.3.3. 在 Windows 上安装 Python
- en: If you already have Python 2.6 or 2.7 installed, you’re fine. If not, you’ll
    want to download the latest version of Python 2.7, because that’s the most recent
    version of Python that has support for the Redis library. Go to [http://www.python.org/download/](http://www.python.org/download/)
    and select the most recent version of the 2.7 series that’s available for Windows
    in either the 32- or 64-bit version (again, depending on your platform). When
    Python is done downloading, you can install it by double-clicking on the downloaded
    .msi file.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经安装了 Python 2.6 或 2.7，那么您就没事了。如果没有，您将需要下载 Python 2.7 的最新版本，因为这是支持 Redis
    库的最新 Python 版本。请访问 [http://www.python.org/download/](http://www.python.org/download/)
    并选择适用于 Windows 的 32 位或 64 位的 2.7 系列的最新版本（同样，取决于您的平台）。当 Python 下载完成后，您可以通过双击下载的
    .msi 文件来安装它。
- en: Assuming that you accepted all of the default options for installing Python
    2.7, Python should be installed in C:\Python27\. From here, you only need to install
    the Python Redis library to be ready to use Redis with Python. If you’re using
    Python 2.6, any time the book refers to *Python27*, you can instead use *Python26*.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您为安装 Python 2.7 接受了所有默认选项，Python 应该安装在 C:\Python27\。从这里，您只需要安装 Python Redis
    库，就可以准备好使用 Python 来使用 Redis。如果您使用的是 Python 2.6，那么每当本书提到 *Python27* 时，您可以使用 *Python26*
    代替。
- en: To help you to install the Redis client library, you’ll use the `easy_install`
    utility from the `setuptools` package. This is because you can easily download
    `setuptools` from the command line. To get started, open a command prompt by going
    into the Accessories program group in the Start menu and clicking on Command Prompt.
    After you have a command prompt open, follow along with the next listing; it shows
    how to download and install `setuptools` and the Redis client library.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助您安装 Redis 客户端库，您将使用 `setuptools` 包中的 `easy_install` 工具。这是因为您可以从命令行轻松下载 `setuptools`。要开始，请通过开始菜单中的“附件”程序组进入，然后点击“命令提示符”。在打开命令提示符后，按照下一个列表操作；它显示了如何下载和安装
    `setuptools` 和 Redis 客户端库。
- en: Listing A.6\. Installing the Redis client library for Python on Windows
  id: totrans-62
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.6\. 在 Windows 上为 Python 安装 Redis 客户端库
- en: '![](278fig01_alt.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](278fig01_alt.jpg)'
- en: Now that you have Python and the Redis client library installed, you should
    continue with [section A.4](#app01lev1sec4) to use Redis from Python for the first
    time.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经安装了 Python 和 Redis 客户端库，您应该继续阅读 [A.4 节](#app01lev1sec4)，以使用 Python 首次从
    Python 使用 Redis。
- en: A.4\. Hello Redis
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4\. Hello Redis
- en: After Redis itself is installed, you need to ensure that Python has the proper
    libraries for accessing Redis. If you followed the earlier instructions, you may
    still have a command prompt open. In this command prompt (you can open a new one
    if you closed the old one), you’ll run Python. (Windows users can refer to how
    you ran Python during the setup procedure.) Inside of the Python console, you’ll
    try connecting to Redis and issue a couple commands, as shown in the next listing.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Redis 本身安装完成后，您需要确保 Python 有适当的库来访问 Redis。如果您遵循了前面的说明，您可能仍然有一个命令提示符是打开的。在这个命令提示符中（如果您关闭了旧的，您可以打开一个新的），您将运行
    Python。（Windows 用户可以参考设置过程中的 Python 运行方式。）在 Python 控制台中，您将尝试连接到 Redis 并执行一些命令，如下一个列表所示。
- en: Listing A.7\. Testing Redis from Python
  id: totrans-67
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 A.7\. 从 Python 测试 Redis
- en: '![](279fig01_alt.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](279fig01_alt.jpg)'
- en: '|  |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Running Python in other ways
  id: totrans-70
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 以其他方式运行 Python
- en: Though you can run Python in a standard terminal, there are a variety of other
    more “fully featured” ways to have a Python console available. A basic editor
    and console called Idle ships with Python on Windows and OS X; you can also install
    it on Linux (install the `idle-python2.6` or `idle-python2.7` package, as relevant).
    In a console, you can run `python -m idlelib.idle` from the command line, and
    Idle should load. Idle is a fairly basic editor and Python console itself, so
    if you’re new to programming, it should be a gentle introduction. Many other people
    have found IPython to be the Python console of choice, offering a list of amazing
    features too long to mention here. Whether you go basic or fully featured, you
    can’t go wrong.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然您可以在标准终端中运行 Python，但还有许多其他更“功能齐全”的方式来拥有一个 Python 控制台。Idle 是一个基本的编辑器和控制台，与
    Python 一起在 Windows 和 OS X 上提供；您也可以在 Linux 上安装它（安装 `idle-python2.6` 或 `idle-python2.7`
    包，根据相关情况）。在控制台中，您可以从命令行运行 `python -m idlelib.idle`，Idle 应该会加载。Idle 是一个相当基本的编辑器和
    Python 控制台本身，因此如果您是编程新手，它应该是一个温和的介绍。许多人发现 IPython 是首选的 Python 控制台，它提供了太多功能，无法在此处一一列举。无论您选择基本还是功能齐全，您都不会出错。
- en: '|  |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '|  |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Redis on OS X and Windows
  id: totrans-74
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: Redis 在 OS X 和 Windows 上
- en: Right now, precompiled versions of Redis for Windows and OS X are from the 2.4
    series. In some chapters, we use features that are only available in the Redis
    2.6 and later series. If you find that something we do doesn’t work, and you’re
    using Redis 2.4, it’s probably because the feature or usage was added in Redis
    2.6\. See the notes in [chapter 3](kindle_split_014.html#ch03) for specific examples.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，Windows 和 OS X 的 Redis 预编译版本来自 2.4 系列。在某些章节中，我们使用了仅在 Redis 2.6 及以后系列中可用的功能。如果你发现我们做的一些事情不起作用，而你使用的是
    Redis 2.4，那可能是因为该功能或用法是在 Redis 2.6 中添加的。有关具体示例，请参阅 [第 3 章](kindle_split_014.html#ch03)
    的注释。
- en: '|  |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '|  |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Configuring Redis
  id: totrans-78
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 配置 Redis
- en: By default, Redis should be configured to keep your data using either snapshots
    or append-only files, and as long as you execute `shutdown` on a client, Redis
    should keep your data around. Depending on how you started it, Redis may be keeping
    the on-disk version of data in the same path as the path you’re running it from.
    To update that, you’ll want to edit redis.conf and use system startup scripts
    appropriate for your platform (remember to move your data to the newly configured
    path). More information about configuring Redis is available in [chapter 4](kindle_split_015.html#ch04).
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Redis 应该配置为使用快照或只追加文件来保存你的数据，并且只要你在客户端上执行 `shutdown`，Redis 就应该保留你的数据。根据你如何启动它，Redis
    可能会将数据文件的磁盘版本保存在与运行路径相同的路径上。要更新它，你需要编辑 redis.conf 并使用适合你平台的系统启动脚本（记得将你的数据移动到新配置的路径）。有关配置
    Redis 的更多信息，请参阅 [第 4 章](kindle_split_015.html#ch04)。
- en: '|  |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '|  |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Is hiredis available on non-Linux platforms?
  id: totrans-82
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 在非 Linux 平台上是否可以使用 hiredis？
- en: For those who are using Windows or OS X and peeked at the Debian/Ubuntu install
    instructions, you’ll have noticed that we installed a library called `hiredis`
    to be used with Python. This library is an accelerator that passes protocol processing
    to a C library. Though this library can be compiled for OS X and Windows, binaries
    for them aren’t readily downloadable on the internet. Also, because I didn’t have
    you install a compiler, if you’re interested in compiling and using `hiredis`
    on your platform, you’re on your own.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 对于使用 Windows 或 OS X 并查看 Debian/Ubuntu 安装说明的人来说，你会注意到我们安装了一个名为 `hiredis` 的库来与
    Python 一起使用。这个库是一个加速器，它将协议处理传递给一个 C 库。尽管这个库可以编译为 OS X 和 Windows，但它们的二进制文件在互联网上并不容易下载。此外，因为我没有让你安装编译器，如果你对你的平台有兴趣编译和使用
    `hiredis`，那么你就得自己动手了。
- en: '|  |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Periodically in other chapters, we’ll use the Python console to show interactions
    with Redis. In other cases, we’ll show function definitions and executable statements
    outside of a console. In those cases where we’re not using the console, it’s assumed
    that those functions are defined in a Python module. If you haven’t used Python
    before, you should read Python’s tutorial on modules and running modules as programs
    in the first part of [http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html),
    up to and including the section “Executing modules as scripts.”
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他章节中，我们会定期使用 Python 控制台来展示与 Redis 的交互。在其他情况下，我们将在控制台之外展示函数定义和可执行语句。在这些不使用控制台的情况下，我们假设这些函数是在一个
    Python 模块中定义的。如果你之前没有使用过 Python，你应该阅读 [http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)
    中的 Python 模块教程，直到包括“将模块作为脚本执行”这一节。
- en: If you’re the kind of person who can read through language documentation and
    tutorials and just “get it,” and you haven’t spent a lot of time with Python in
    the past, you may want to consider going through the Python language tutorial
    at [http://docs.python.org/tutorial/](http://docs.python.org/tutorial/). If you’re
    only interested in the important stuff where you’ll learn the most about Python’s
    syntax and semantics, read sections 3-7, and then 9.10 and 9.11 (which are about
    generators, which we use a couple of times).
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你属于那种能够阅读语言文档和教程并“理解”它们的人，而且你之前没有花很多时间使用 Python，你可能想考虑通过 [http://docs.python.org/tutorial/](http://docs.python.org/tutorial/)
    上的 Python 语言教程。如果你只对那些能让你更多地了解 Python 语法和语义的重要部分感兴趣，请阅读第 3-7 节，然后是 9.10 和 9.11
    节（这些章节是关于生成器的，我们在其中使用了几次）。
- en: By now you’ll have Redis and a Python interpreter running. If you got here via
    a reference from [chapter 1](kindle_split_011.html#ch01), go back to really start
    using Redis from Python.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 到现在为止，你应该已经运行了 Redis 和 Python 解释器。如果你是通过 [第 1 章](kindle_split_011.html#ch01)
    的引用来到这里的，请返回去真正开始使用 Python 来使用 Redis。
- en: 'If you’re having difficulty installing Redis or Python, please post your questions
    or read others’ answers on the *Redis in Action* Manning forum: [http://mng.bz/vB6c](http://mng.bz/vB6c).'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在安装 Redis 或 Python 时遇到困难，请发布你的问题或阅读他人的答案，在 *Redis in Action* Manning 论坛上：[http://mng.bz/vB6c](http://mng.bz/vB6c).
