- en: 'appendix c: Getting started with Vagrant'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录C：Vagrant入门
- en: Vagrant is an open source software product for building and running virtual
    machines. You can use it to simulate a production environment or test your code
    on various operating systems. It’s also a great way to try out new software in
    an environment that’s isolated from your development workstation.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Vagrant是一个用于构建和运行虚拟机的开源软件产品。您可以使用它来模拟生产环境或在各种操作系统上测试您的代码。它也是在一个与您的开发工作站隔离的环境中尝试新软件的好方法。
- en: Updates
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更新
- en: You can find an updated and evolving version of this getting started guide online
    at [http://vagrant-getting-started.the-data-wrangler.com](http://vagrant-getting-started.the-data-wrangler.com).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在网上找到这个入门指南的更新和演变版本，网址为[http://vagrant-getting-started.the-data-wrangler.com](http://vagrant-getting-started.the-data-wrangler.com)。
- en: Installing VirtualBox
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装VirtualBox
- en: First, you must install VirtualBox. This is the software that runs the virtual
    machine within your regular computer (the host). You can download it from the
    VirtualBox download page at [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads).
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您必须安装VirtualBox。这是在您的普通计算机（主机）内运行虚拟机的软件。您可以从VirtualBox下载页面下载它，网址为[https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)。
- en: Download and install the package that fits your host operating system. Please
    follow the instructions on the VirtualBox web page.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装适合您主机操作系统的软件包。请遵循VirtualBox网页上的说明。
- en: Installing Vagrant
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Vagrant
- en: Now you should install Vagrant. This is a scripting layer on top of VirtualBox
    that allows you to manage the setup of your virtual machine through code (Ruby
    code). You can download it from the Vagrant downloads page at [https://www.vagrantup.com/downloads.html](https://www.vagrantup.com/downloads.html).
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您应该安装Vagrant。这是VirtualBox之上的一个脚本层，允许您通过代码（Ruby代码）管理虚拟机的设置。您可以从Vagrant下载页面下载它，网址为[https://www.vagrantup.com/downloads.html](https://www.vagrantup.com/downloads.html)。
- en: Download and install the package that fits your host operating system. Please
    follow the instructions on the Vagrant web page.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装适合您主机操作系统的软件包。请遵循Vagrant网页上的说明。
- en: Creating a virtual machine
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建虚拟机
- en: With VirtualBox and Vagrant installed, you’re now ready to create a virtual
    machine. First, you must decide which operating system to use. If you already
    have a production system in place, choose that same operating system. If not,
    choose a *long-term support* (LTS) version that will be supported for a long time.
    You can search for operating systems on this web page at [https://app.vagrantup.com/boxes/search](https://app.vagrantup.com/boxes/search).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装了VirtualBox和Vagrant之后，您现在可以创建虚拟机了。首先，您必须决定要使用哪个操作系统。如果您已经有一个生产系统，请选择相同的操作系统。如果没有，请选择一个*长期支持*（LTS）版本，该版本将长期得到支持。您可以在网页上搜索操作系统，网址为[https://app.vagrantup.com/boxes/search](https://app.vagrantup.com/boxes/search)。
- en: I’m a fan of Ubuntu Linux, so for this example, we’ll use Ubuntu 18.04 LTS (Bionic
    Beaver). The Vagrant name for the *box* that*we’ll install*is *ubuntu/bionic64*.**
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我喜欢Ubuntu Linux，所以在这个例子中，我们将使用Ubuntu 18.04 LTS（Bionic Beaver）。我们将安装的*box*的名称是*ubuntu/bionic64*。**
- en: '**Before creating the Vagrant box, open a command line and create a directory
    in which to store it. Change to that directory; then run the `vagrant init` command
    as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**在创建Vagrant虚拟机之前，打开命令行并创建一个用于存储它的目录。切换到该目录；然后按照以下方式运行`vagrant init`命令：**'
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This creates a barebones *Vagrantfile* in the current directory. Edit this file
    to change the configuration and setup for your virtual machine.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在当前目录中创建一个基本的*Vagrantfile*。编辑此文件以更改虚拟机的配置和设置。
- en: 'Now launch your virtual machine:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 现在启动您的虚拟机：
- en: '[PRE1]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Make sure you run this command in the same directory that contains the Vagrantfile.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您在包含Vagrantfile的同一目录中运行此命令。
- en: This can take time, especially if you don’t already have the image for the operating
    system locally cached. Please give it plenty of time to complete. Once it has
    finished, you’ll have a fresh Ubuntu virtual machine to work with.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能需要一些时间，尤其是如果您还没有在本地缓存操作系统的镜像。请给它足够的时间完成。一旦完成，您将有一个全新的Ubuntu虚拟机可供使用。
- en: Installing software on your virtual machine
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在虚拟机上安装软件
- en: 'With your virtual machine running, you’ll need to install software on it. You
    can *shell into* the machine with the following command:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的虚拟机运行时，您需要在上面安装软件。您可以使用以下命令*shell into*机器：
- en: '[PRE2]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: To update your operating system and install software on the virtual machine,
    you’ll use commands that are specific to that particular operating system. We’re
    using Ubuntu in this example, so the next three commands are for Ubuntu. If you’ve
    chosen a different operating system, you’ll need to use commands appropriate for
    it.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新虚拟机上的操作系统并安装软件，你将使用特定于该操作系统的命令。在这个例子中，我们使用 Ubuntu，所以接下来的三个命令是针对 Ubuntu 的。如果你选择了不同的操作系统，你需要使用适合它的命令。
- en: 'The first thing to do with your new virtual machine is to update the operating
    system. You can do this in Ubuntu with this command:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 使用你的新虚拟机时，首先要做的是更新操作系统。你可以在 Ubuntu 上使用以下命令来完成此操作：
- en: '[PRE3]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You can now install whatever software you need. For example, let’s install
    Git so we can clone our code:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以安装你需要的任何软件。例如，让我们安装 Git，这样我们就可以克隆我们的代码：
- en: '[PRE4]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Much software can be installed on Ubuntu following the same pattern. Unfortunately,
    it’s slightly more complicated to get the latest version of Node.js that isn’t
    yet supported by the package-manager. For that, it’s best to follow the instructions
    in the Node.js documentation at [https://nodejs.org/en/download/package-manager/](https://nodejs.org/en/download/package-manager/).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Ubuntu 上安装大多数软件都遵循相同的模式。不幸的是，获取尚未由包管理器支持的最新版本的 Node.js 会稍微复杂一些。为此，最好遵循 Node.js
    文档中的说明，网址为 [https://nodejs.org/en/download/package-manager/](https://nodejs.org/en/download/package-manager/)。
- en: 'For Ubuntu, it says we install Node.js version 8 using the following commands:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Ubuntu，它说我们可以使用以下命令安装 Node.js 版本 8：
- en: '[PRE5]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: That’s more complicated than the previous example, but now we have a recent
    version of Node.js installed. You can also install Node.js manually (for example,
    not using package-manager) by following the instructions for your operating system
    on the Node.js downloads page at [https://nodejs.org/en/download/](https://nodejs.org/en/download/).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这比之前的例子复杂一些，但现在我们已经安装了 Node.js 的最新版本。你还可以通过遵循 Node.js 下载页面 [https://nodejs.org/en/download/](https://nodejs.org/en/download/)
    上针对你的操作系统的说明来手动安装 Node.js（例如，不使用包管理器）。
- en: Running code on your virtual machine
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在虚拟机上运行代码
- en: 'With Node.js installed on your virtual machine, you’re now ready to run code.
    This is easily achieved by, on your development workstation, copying your code
    to the same directory as your Vagrantfile. Files placed in this directory are
    automatically made available within the virtual machine under this directory:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的虚拟机上安装了 Node.js 后，你现在可以运行代码。这可以通过在你的开发工作站上，将你的代码复制到与你的 Vagrantfile 相同的目录中轻松实现。放置在这个目录中的文件将自动在虚拟机中的此目录下可用：
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'If you have index.js next to your Vagrantfile, when you’re shelled into the
    virtual machine, you can run it like this:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个 index.js 文件位于你的 Vagrantfile 旁边，当你进入虚拟机时，你可以这样运行它：
- en: '[PRE7]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: It’s common practice for developers to commit their Vagrantfile to version control.
    That way, new developers (or you on a different workstation) only have to clone
    the repository and then run `vagrant up` to build the development environment.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 开发者将 Vagrantfile 提交到版本控制是一种常见的做法。这样，新开发者（或你在不同的工作站上）只需要克隆仓库，然后运行 `vagrant up`
    来构建开发环境。
- en: You might even go as far as putting custom setup and code in the Vagrantfile
    to install dependencies and launch your application or server within the virtual
    machine. You might recall that in several chapters in the book I provided Vagrantfiles
    that boot a virtual machine, install a database, and then populate it with data,
    creating a kind of *instant database*. By the time the virtual machine has finished
    booting, you have a system that’s ready to work with.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 你甚至可以将自定义设置和代码放入 Vagrantfile 中，以便在虚拟机中安装依赖项并启动应用程序或服务器。你可能记得，在本书的几个章节中，我提供了启动虚拟机、安装数据库并填充数据的
    Vagrantfile，创建了一种*即时数据库*。当虚拟机完成启动时，你就有了一个可以工作的系统。
- en: Turning off your virtual machine
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关闭虚拟机
- en: 'After you’ve completely finished with your virtual machine, you can destroy
    it with the following command:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 完全完成你的虚拟机后，你可以使用以下命令将其销毁：
- en: '[PRE8]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you’re only temporarily finished with the machine and want to reuse it again
    later, suspend it with the following command:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你只是暂时完成机器并希望以后再次使用它，可以使用以下命令将其挂起：
- en: '[PRE9]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: A suspended machine can be resumed at any time by running `vagrant resume`.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过运行 `vagrant resume` 命令在任何时间恢复挂起的机器。
- en: Please remember to destroy or suspend your virtual machines when you aren’t
    using them; otherwise, they’ll unnecessarily consume your valuable system resources.**
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，当您不使用虚拟机时，请销毁或暂停它们；否则，它们将无端消耗您宝贵的系统资源。**
