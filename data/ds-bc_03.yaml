- en: 2 Plotting probabilities using Matplotlib
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2 使用Matplotlib绘制概率
- en: This section covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本节涵盖
- en: Creating simple plots using Matplotlib
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Matplotlib创建简单图表
- en: Labeling plotted data
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标记绘制的数据
- en: What is a probability distribution?
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是概率分布？
- en: Plotting and comparing multiple probability distributions
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制和比较多个概率分布
- en: Data plots are among the most valuable tools in any data scientist’s arsenal.
    Without good visualizations, we are effectively crippled in our ability to glean
    insights from our data. Fortunately, we have at our disposal the external Python
    Matplotlib library, which is fully optimized for outputting high-caliber plots
    and data visualizations. In this section, we use Matplotlib to better comprehend
    the coin-flip probabilities that we computed in section 1.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 数据图是任何数据科学家工具箱中最有价值的工具之一。没有良好的可视化，我们实际上无法从数据中提取洞察力。幸运的是，我们拥有外部Python Matplotlib库，该库完全优化用于输出高质量的图表和数据可视化。在本节中，我们使用Matplotlib更好地理解我们在第1节中计算的抛硬币概率。
- en: 2.1 Basic Matplotlib plots
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1 基本Matplotlib图表
- en: Let’s begin by installing the Matplotlib library.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从安装Matplotlib库开始。
- en: Note Call `pip install matplotlib` from the command line terminal to install
    the Matplotlib library.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：从命令行终端调用`pip install matplotlib`以安装Matplotlib库。
- en: Once installation is complete, import `matplotlib.pyplot`, which is the library’s
    main plot-generation module. According to convention, the module is commonly imported
    using the shortened alias `plt`.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，导入`matplotlib.pyplot`，这是库的主要绘图模块。根据惯例，该模块通常使用简短的别名`plt`导入。
- en: Listing 2.1 Importing Matplotlib
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.1 导入Matplotlib
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'We will now plot some data using `plt.plot`. That method takes as input two
    iterables: `x` and `y`. Calling `plt.plot(x, y)` prepares a 2D plot of `x` versus
    `y`; displaying the plot requires a subsequent call to `plt.show()`. Let’s assign
    our `x` to equal integers 0 through 10 and our `y` values to equal double the
    values of `x`. The following code visualizes that linear relationship (figure
    2.1).'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将使用`plt.plot`绘制一些数据。该方法接受两个可迭代对象：`x`和`y`。调用`plt.plot(x, y)`准备一个`x`与`y`的二维图；显示图表需要后续调用`plt.show()`。让我们将`x`赋值为从0到10的整数，将`y`值赋值为`x`值的两倍。以下代码可视化了这个线性关系（图2.1）。
- en: Listing 2.2 Plotting a linear relationship
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.2 绘制线性关系图
- en: '[PRE1]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/02-01.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/02-01.png)'
- en: Figure 2.1 A Matplotlib plot of `x` versus `2x`. The x variable represents integers
    0 through 10.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.1 `x`与`2x`的Matplotlib图。`x`变量代表从0到10的整数。
- en: Warning The axes in the linear plot are not evenly spaced, so the slope of the
    plotted line appears less steep than it actually is. We can equalize both axes
    by calling `plt.axis('equal')`. However, this will lead to an awkward visualization
    containing too much empty space. Throughout this book, we rely on Matplotlib’s
    automated axes adjustments while also carefully observing the adjusted lengths.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 警告：线性图中的坐标轴不是均匀分布的，因此绘制的线条看起来比实际要平缓。我们可以通过调用`plt.axis('equal')`来使两个坐标轴均匀分布。然而，这将导致包含过多空白的尴尬可视化。在本书中，我们依靠Matplotlib的自动坐标轴调整，同时仔细观察调整后的长度。
- en: The visualization is complete. Within it, our 10 y-axis points have been connected
    using smooth line segments. If we prefer to visualize the 10 points individually,
    we can do so using the `plt.scatter` method (figure 2.2).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化已完成。在其内部，我们使用平滑的线段连接了10个y轴点。如果我们希望单独可视化这10个点，可以使用`plt.scatter`方法（图2.2）。
- en: Listing 2.3 Plotting individual data points
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.3 绘制单个数据点
- en: '[PRE2]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/02-02.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/02-02.png)'
- en: Figure 2.2 A Matplotlib scatter plot of `x` versus `2 * x`. The `x` variable
    represents integers 0 through 10\. The individual integers are visible as scattered
    points in the plot.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.2 `x`与`2 * x`的Matplotlib散点图。`x`变量代表从0到10的整数。单独的整数在图中以散点形式可见。
- en: Suppose we want to emphasize the interval where `x` begins at 2 and ends at
    6\. We do this by shading the area under the plotted curve over the specified
    interval, using the `plt.fill_between` method. The method takes as input both
    `x` and `y` and also a `where` parameter, which defines the interval coverage.
    The input of the `where` parameter is a list of Boolean values in which an element
    is `True` if the `x` value at the corresponding index falls within the interval
    we specified. In the following code, we set the `where` parameter to equal `[is_in_interval(value,
    2, 6) for value in x]`. We also execute `plt.plot(x,y)` to juxtapose the shaded
    interval with the smoothly connected line (figure 2.3).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们想强调 `x` 从 2 开始到 6 结束的区间。我们通过使用 `plt.fill_between` 方法在指定区间内绘制曲线下的区域来实现这一点。该方法接受
    `x` 和 `y` 作为输入，还有一个 `where` 参数，它定义了区间覆盖范围。`where` 参数的输入是一个布尔值列表，其中元素为 `True` 如果对应的
    `x` 值在指定的区间内。在下面的代码中，我们将 `where` 参数设置为 `[is_in_interval(value, 2, 6) for value
    in x]`。我们还执行了 `plt.plot(x,y)` 来将阴影区间与平滑连接的线并置（图 2.3）。
- en: Listing 2.4 Shading an interval beneath a connected plot
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.4 在连接图下方着色区间
- en: '[PRE3]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../Images/02-03.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-03.png)'
- en: Figure 2.3 A connected plot with a shaded interval. The interval covers all
    values between 2 and 6.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.3 一个带有阴影区间的连接图。该区间覆盖了 2 和 6 之间的所有值。
- en: 'So far, we have reviewed three visualization methods: `plt.plot`, `plt.scatter`,
    and `plt.fill_between`. Let’s execute all three methods in a single plot (figure
    2.4). Doing so highlights an interval beneath a continuous line while also exposing
    individual coordinates.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经回顾了三种可视化方法：`plt.plot`、`plt.scatter` 和 `plt.fill_between`。让我们在一个单独的图中执行所有三种方法（图
    2.4）。这样做可以突出显示连续线下方的区间，同时暴露单个坐标。
- en: Listing 2.5 Exposing individual coordinates within a continuous plot
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.5 在连续图中暴露单个坐标
- en: '[PRE4]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/02-04.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-04.png)'
- en: Figure 2.4 A connected plot and a scatter plot combined with a shaded interval.
    The individual integers in the plot appear as points marking a smooth, indivisible
    line.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.4 一个连接图和一个带有阴影区间的散点图。图中的单个整数以点标记，形成一个平滑、不可分割的线。
- en: No data plot is ever truly complete without descriptive x-axis and y-axis labels.
    Such labels can be set using the `plt.xlabel` and `plt.ylabel` methods (figure
    2.5).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 没有描述性的 x 轴和 y 轴标签，数据图永远不会真正完整。这些标签可以使用 `plt.xlabel` 和 `plt.ylabel` 方法设置（图 2.5）。
- en: Listing 2.6 Adding axis labels
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.6 添加轴标签
- en: '[PRE5]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/02-05.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-05.png)'
- en: Figure 2.5 A Matplotlib plot with x-axis and y-axis labels
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.5 带有 x 轴和 y 轴标签的 Matplotlib 图
- en: Common Matplotlib methods
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 常见 Matplotlib 方法
- en: '`plt.plot(x, y)`—Plots the elements of `x` versus the elements of `y`. The
    plotted points are connected using smooth line segments.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plt.plot(x, y)`—绘制 `x` 的元素与 `y` 的元素的关系图。绘制点使用平滑线段连接。'
- en: '`plt.scatter(x, y)`—Plots the elements of `x` versus the elements of `y`. The
    plotted points are visualized individually and are not connected by any lines.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plt.scatter(x, y)`—绘制 `x` 的元素与 `y` 的元素的关系图。绘制点单独可视化，并且没有任何线条连接。'
- en: '`plt.fill_between(x, y, where=booleans)`—Highlights a subset of the area beneath
    a plotted curve. The curve is obtained by plotting `x` versus `y`. The `where`
    parameter defines all highlighted intervals; it takes a list of Booleans that
    correspond to elements of `x`. Each Boolean is `True` if its corresponding `x`
    value is located within a highlighted interval.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plt.fill_between(x, y, where=booleans)`—突出显示绘制曲线下方的区域子集。曲线是通过绘制 `x` 与 `y`
    的关系获得的。`where` 参数定义了所有突出显示的区间；它接受一个布尔值列表，对应于 `x` 的元素。每个布尔值如果其对应的 `x` 值位于突出显示的区间内则为
    `True`。'
- en: '`plt.xlabel(label)`—Sets the x label of the plotted curve to equal `label`.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plt.xlabel(label)`—将绘制曲线的 x 标签设置为 `label`。'
- en: '`plt.ylabel(label)`—Sets the y label of the plotted curve to equal `label`.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plt.ylabel(label)`—将绘制曲线的 y 标签设置为 `label`。'
- en: 2.2 Plotting coin-flip probabilities
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2 绘制抛硬币概率图
- en: We now have tools to visualize the relationship between a coin-flip count and
    the probability of heads. In section 1, we examined the probability of seeing
    80% or more heads across a series of coin flips. That probability decreased as
    the coin-flip count went up, and we wanted to know why. We’ll soon find out by
    plotting head counts versus their associated coin-flip combination counts. These
    values were already computed in our section 1 analysis. The keys in the `weighted_sample_space`
    dictionary contain all possible head counts across 10 flipped coins. These head
    counts map to combination counts. Meanwhile, the `weighted_sample_space_20_flips`
    dictionary contains the head-count mappings for 20 flipped coins.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在有了可视化抛硬币次数与正面概率之间关系的工具。在第 1 节中，我们考察了在一系列抛硬币中看到 80% 或更多正面的概率。随着抛硬币次数的增加，这个概率降低了，我们想知道原因。我们将通过绘制头数与它们相关的抛硬币组合次数来找出答案。这些值已经在我们的第
    1 节分析中计算过了。`weighted_sample_space` 字典中的键包含了 10 次抛硬币中所有可能出现的头数。这些头数映射到组合次数。同时，`weighted_sample_space_20_flips`
    字典包含了 20 次抛硬币的头数映射。
- en: 'Our aim is to compare the plotted data from both these dictionaries. We begin
    by plotting the elements of `weighted_sample_space`: we plot its keys on the x-axis
    versus the associated values on the y-axis. The x-axis corresponds to `''Head-count''`,
    and the y-axis corresponds to `''Number of coin-flip combinations with x heads''`.
    We use a scatter plot to visualize key-to-value relationships directly without
    connecting any plotted points (figure 2.6).'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目的是比较这两个字典中绘制的数据。我们首先绘制 `weighted_sample_space` 的元素：我们在 x 轴上绘制其键，在 y 轴上绘制相关的值。x
    轴对应于 `'Head-count'`，y 轴对应于 `'具有 x 个头的硬币抛掷组合数'`。我们使用散点图直接可视化键到值的映射，而不连接任何绘制的点（图
    2.6）。
- en: Listing 2.7 Plotting the coin-flip weighted sample space
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.7 绘制抛硬币加权样本空间
- en: '[PRE6]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/02-06.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-06.png)'
- en: Figure 2.6 A scatter plot representation of the sample space for 10 flipped
    coins. The symmetric plot is centered around a peak at 5 of 10 counted heads.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.6 10 次抛硬币样本空间的散点图表示。对称图以 10 次计数中 5 次为峰值中心。
- en: The visualized sample space takes on a symmetric shape. The symmetry is set
    around a peak head count of 5\. Therefore, head-count combinations closer to 5
    occur more frequently than those that are further from 5\. As we learned in the
    previous section, such frequencies correspond to probabilities. Thus, a head count
    is more probable if its value is closer to 5\. Let’s emphasize this by plotting
    the probabilities directly on the y-axis (figure 2.7). The probability plot will
    allow us to replace our lengthy y-axis label with a more concisely stated `'Probability'`.
    We can compute the y-axis probabilities by taking our existing combination counts
    and dividing them by the total sample space size.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化的样本空间呈现出对称形状。对称性围绕一个峰值头数 5 设置。因此，接近 5 的头数组合出现的频率高于远离 5 的头数组合。正如我们在前一节中学到的，这样的频率对应于概率。因此，如果头数的值接近
    5，那么出现头数的概率就更高。让我们通过直接在 y 轴上绘制概率来强调这一点（图 2.7）。概率图将允许我们用更简洁的 `'Probability'` 替换我们冗长的
    y 轴标签。我们可以通过将现有的组合次数除以总样本空间大小来计算 y 轴的概率。
- en: Listing 2.8 Plotting the coin-flip probabilities
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.8 绘制抛硬币概率图
- en: '[PRE7]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/02-07.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-07.png)'
- en: Figure 2.7 A scatter plot mapping head counts to their probability of occurrence.
    Probabilities can be inferred by looking directly at the plot.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.7 将头数映射到其发生概率的散点图。通过直接查看图表可以推断出概率。
- en: 'Our plot permits us to visually estimate the probability of any head count.
    Thus, just by glancing at the plot, we can determine that the probability of observing
    five heads is approximately 0.25\. This mapping between x-values and probabilities
    is referred to as a *probability distribution*. Probability distributions exhibit
    certain mathematically consistent properties that make them useful for likelihood
    analysis. For instance, consider the x-values of any probability distribution:
    they correspond to all the possible values of a random variable `r`. The probability
    that `r` falls within some interval is equal to the area beneath the probability
    curve over the span of that interval. Therefore, the total area beneath a probability
    distribution always equals 1.0\. This holds for any distribution, including our
    head-count plot. Listing 2.9 confirms this by executing `sum(prob_ x_10_flips)`.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的图表使我们能够直观地估计任何头数出现的概率。因此，只需扫一眼图表，我们就能确定观察到五个头的概率大约为 0.25。这种 x 值与概率之间的映射被称为
    *概率分布*。概率分布表现出某些数学上的一致特性，这使得它们对似然分析很有用。例如，考虑任何概率分布的 x 值：它们对应于随机变量 `r` 的所有可能值。`r`
    落在某个区间内的概率等于该区间内概率曲线下方的面积。因此，概率分布下方的总面积总是等于 1.0。这对于任何分布都成立，包括我们的头数图表。列表 2.9 通过执行
    `sum(prob_x_10_flips)` 来确认这一点。
- en: Note We can compute the area beneath each head-count probability `p` by using
    a vertical rectangle. The height of the rectangle is `p`. The width of the rectangle
    is 1.0, since all consecutive head counts on the x-axis are spaced one unit apart.
    Hence, the area of the rectangle is `p * 1.0`, which equals `p`. Consequently,
    the total area beneath the distribution equals `sum([p for p in prob_x_10_flips])`.
    In section 3, we’ll do a deeper dive into how rectangles can be used to determine
    the area.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：我们可以通过使用垂直矩形来计算每个头数概率 `p` 下的面积。矩形的高度是 `p`。由于 x 轴上所有连续的头数间隔都是一单位，所以矩形的宽度是
    1.0。因此，矩形的面积是 `p * 1.0`，等于 `p`。因此，分布下方的总面积等于 `sum([p for p in prob_x_10_flips])`。在第
    3 节中，我们将更深入地探讨如何使用矩形来确定面积。
- en: Listing 2.9 Confirming that all probabilities sum to 1.0
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.9 确认所有概率之和为 1.0
- en: '[PRE8]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The area beneath the head-count interval of 8 through 10 is equal to the probability
    of observing eight heads or more. Let’s visualize that area using the `plt.fill_
    between` method. We also utilize `plt.plot` and `plt.scatter` to display individual
    head counts encompassing the shaded interval (figure 2.8).
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 头数区间 8 到 10 下的面积等于观察八个或更多头的概率。让我们使用 `plt.fill_between` 方法来可视化这个面积。我们还利用 `plt.plot`
    和 `plt.scatter` 来显示包含阴影区间的单个头数（图 2.8）。
- en: Listing 2.10 Shading the interval under a probability curve
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.10 阴影表示概率曲线下的区间
- en: '[PRE9]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/02-08.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-08.png)'
- en: Figure 2.8 Overlaid smooth plot and scatter plot representations of the coin-flip
    probability distribution. A shaded interval covers head counts 8 through 10\.
    The shaded area equals the probability of observing eight or more heads.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.8 硬币翻转概率分布的平滑图表和散点图表示。阴影区间覆盖头数 8 到 10。阴影面积等于观察八个或更多头的概率。
- en: 'Note We’ve purposefully smoothed the shaded interval to make a visually appealing
    plot. However, the true interval area is not smooth: it is composed of discrete,
    rectangular blocks, which resemble steps. The steps are discrete because the head
    counts are indivisible integers. If we wish to visualize the actual step-shaped
    area, we can pass a `ds="steps-mid"` parameter into `plt.plot` and a `step="mid"`
    parameter into `plt.fill_between`.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：我们故意平滑了阴影区间，以制作一个视觉上吸引人的图表。然而，真正的区间面积并不平滑：它由离散的矩形块组成，类似于阶梯。这些阶梯是离散的，因为头数是不可分割的整数。如果我们想可视化实际的阶梯形面积，我们可以将
    `ds="steps-mid"` 参数传递给 `plt.plot`，并将 `step="mid"` 参数传递给 `plt.fill_between`。
- en: Now, let’s also shade the interval demarcating the probability of observing
    eight tails or more. The following code highlights the extremes along both tail
    ends of our probability distribution (figure 2.9).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们也阴影表示观察八个尾巴或更多尾巴的概率区间。以下代码突出了概率分布两端尾部的极端值（图 2.9）。
- en: Listing 2.11 Shading the interval under the extremes of a probability curve
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 2.11 阴影表示概率曲线极端值下的区间
- en: '[PRE10]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/02-09.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02-09.png)'
- en: Figure 2.9 Overlaid smooth plot and scatter plot representations of the coin-flip
    probability distribution. Two shaded intervals span an extreme number of heads
    and tails. The intervals are symmetric, visually implying that their probabilities
    are equal.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.9 抛硬币概率分布的叠加平滑图和散点图表示。两个着色区间跨越了极端数量的正面和反面。这些区间是对称的，从视觉上暗示它们的概率是相等的。
- en: The two symmetrically shaded intervals cover the right and left tail ends of
    the coin-flip curve. Based on our previous analysis, we know that the probability
    of observing more than seven heads or tails is approximately 10%. Therefore, each
    of the symmetrically shaded tail segments should cover approximately 5% of the
    total area under the curve.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 两个对称着色的区间覆盖了抛硬币曲线的左右尾部。根据我们之前的分析，我们知道观察到超过七个正面或反面的概率大约是10%。因此，每个对称着色的尾段应该覆盖曲线下总面积的大约5%。
- en: 2.2.1 Comparing multiple coin-flip probability distributions
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.1 比较多个抛硬币概率分布
- en: Plotting the 10-coin-flip distribution makes it easier to visually comprehend
    the associated interval probabilities. Let’s extend our plot to also encompass
    the distribution for 20 flipped coins. We’ll plot both distributions on a single
    figure, although first we must compute the x-axis head counts and y-axis probabilities
    for the 20-coin-flip distribution.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制10次抛硬币分布有助于更直观地理解相关的区间概率。让我们扩展我们的图表，包括20次抛硬币的分布。我们将在这张图上绘制两个分布，但首先我们必须计算20次抛硬币分布的x轴头数和y轴概率。
- en: Listing 2.12 Computing probabilities for a 20-coin-flip distribution
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.12 计算20次抛硬币分布的概率
- en: '[PRE11]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Now we are ready to visualize the two distributions simultaneously (figure
    2.10). We do this by executing `plt.plot` and `plt.scatter` on both probability
    distributions. We also pass a few style-related parameters into these method calls.
    One of the parameters is `color`: to distinguish the second distribution, we set
    its color to `black` by passing `color=''black''`. Alternatively, we can avoid
    typing out the entire color name by passing `''k''`, Matplotlib’s single-character
    code for black. We can make the second distribution stand out in other ways: passing
    `linestyle==''--''` into `plt.plot` ensures that the distribution points are connected
    using dashed lines instead of regular lines. We can also distinguish the individual
    points using x-shaped markers rather than filled circles by passing `marker=''x''`
    into `plt.scatter`. Finally, we add a legend to our figure by passing a `label`
    parameter into each of our two `plt.plot` calls and executing the `plt.legend()`
    method to display the legend. Within the legend, the 10-coin-flip distribution
    and the 20-coin-flip distribution are labeled A and B, respectively.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经准备好同时可视化两个分布（图2.10）。我们通过在两个概率分布上执行`plt.plot`和`plt.scatter`来实现这一点。我们还向这些方法调用传递了一些与样式相关的参数。其中一个参数是`color`：为了区分第二个分布，我们将它的颜色设置为`black`，通过传递`color='black'`。或者，我们可以通过传递`'k'`来避免输入整个颜色名称，这是Matplotlib表示黑色的单字符代码。我们还可以通过其他方式使第二个分布突出：将`linestyle='--'`传递给`plt.plot`确保使用虚线而不是实线连接分布点。我们还可以通过将`marker='x'`传递给`plt.scatter`来使用x形标记而不是实心圆来区分各个点。最后，我们通过将`label`参数传递给我们的两个`plt.plot`调用并执行`plt.legend()`方法来添加图例。在图例中，10次抛硬币分布和20次抛硬币分布分别标记为A和B。
- en: Listing 2.13 Plotting two simultaneous distributions
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.13 绘制两个同时分布
- en: '[PRE12]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](../Images/02-10.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![图2.10](../Images/02-10.png)'
- en: Figure 2.10 The probability distributions for 10 coin flips (A) and 20 coin
    flips (B). The 20-coin-flip distribution is marked by dashed lines and x-shaped
    scattered points.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.10 10次抛硬币的概率分布（A）和20次抛硬币的概率分布（B）。20次抛硬币的分布用虚线和x形散点标记。
- en: Common Matplotlib style parameters
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 常见的Matplotlib样式参数
- en: '`color`—Determines the color of the plotted output. This setting can be a color
    name or a single-character code. Both `color=''black''` and `color=''k''` generate
    a black plot, and both `color=''red''` and `color=''r''` generate a red plot.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`color`—确定绘制输出的颜色。此设置可以是颜色名称或单字符代码。`color=''black''`和`color=''k''`都生成黑色图表，而`color=''red''`和`color=''r''`都生成红色图表。'
- en: '`linestyle`—Determines the style of the plotted line that connects the data
    points. Its default value equals `''-''.` Inputting `linestyle=''-''` generates
    a connected line, `linestyle=''--''` generates a dashed line, `linestyle='':''`
    generates a dotted line, and `linestyle=''.''` generates a line composed of alternating
    dots and dashes.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`linestyle`—确定连接数据点的绘图线的样式。其默认值等于`''-''.` 输入`linestyle=''-''`生成一条连接线，`linestyle=''--''`生成一条虚线，`linestyle='':''`生成一条点线，而`linestyle=''.''`生成由交替的点划线组成的线。'
- en: '`marker`—Determines the style of markers assigned to individually plotted points.
    Its default value equals `''o''`. Inputting `marker=''o''` generates a circular
    marker, `marker=''x''` generates an x-shaped marker, `marker=''s''` generates
    a square-shaped marker, and `marker=''p''` generates a pentagon-shaped marker.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`marker`—确定分配给单独绘制的点的样式。其默认值等于`''o''`。输入`marker=''o''`生成圆形标记，`marker=''x''`生成X形标记，`marker=''s''`生成方形标记，而`marker=''p''`生成五边形标记。'
- en: '`label`—Maps a label to the specified color and style. This mapping appears
    in the legend of the plot. A subsequent call to `plt.legend()` is required to
    make the legend visible.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`label`—将标签映射到指定的颜色和样式。这种映射出现在图表的图例中。需要后续调用`plt.legend()`来使图例可见。'
- en: We’ve visualized our two distributions. Next, we highlight our interval of interest
    (80% heads or tails) across each of the two curves (figure 2.11). Note that the
    area beneath the tail ends of distribution B is very small; we remove the scatter
    points to highlight the tail-end intervals more clearly. We also replace the line
    style of distribution B with the more transparent `linestyle=':'`.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经可视化了我们的两个分布。接下来，我们在每个曲线（图2.11）上突出显示我们感兴趣的区间（80%正面或反面）。请注意，分布B尾部末端的面积非常小；我们移除了散点，以更清晰地突出尾部区间。我们还用更透明的`linestyle=':'`替换了分布B的线型。
- en: Listing 2.14 Highlighting intervals beneath two plotted distributions
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.14 突出显示两个绘图分布下的区间
- en: '[PRE13]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![](../Images/02-11.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/02-11.png)'
- en: Figure 2.11 The probability distributions for 10 coin flips (A) and 20 coin
    flips (B). Shaded intervals beneath both distributions represent an extreme number
    of heads and tails. The shaded interval beneath B occupies one-tenth the area
    of the shaded interval beneath A.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.11 10次抛硬币（A）和20次抛硬币（B）的概率分布。两个分布下的阴影区间代表极端的正面和反面数量。分布B下的阴影区间占分布A下阴影区间的十分之一。
- en: The shaded area beneath the tail ends of distribution B is much lower than the
    shaded interval beneath distribution A. This is because distribution A has fatter,
    more elevated tail ends that cover a thicker area quantity. Thickness in the tails
    accounts for differences in interval probabilities.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 分布B尾部末端的阴影区域远低于分布A下的阴影区间。这是因为分布A的尾部更厚、更高，覆盖了更大的面积。尾部的厚度解释了区间概率的差异。
- en: 'The visualization is informative, but only if we highlight the interval areas
    beneath both curves. Without the calls to `plt.fill_between`, we cannot answer
    the question we posed earlier: why does the probability of observing 80% or more
    heads decrease as the fair coin is flipped more times? The answer is hard to extrapolate
    because the two distributions show little overlap, making it difficult to do a
    direct visual comparison. Perhaps we can improve the plot by aligning the distribution
    peaks. Distribution A is centered at 5 head counts (out of 10 coin flips), and
    distribution B is centered at 10 head counts (out of 20 coin flips). If we convert
    the head counts into frequencies (by dividing by the total coin flips), then both
    distribution peaks should align at a frequency of 0.5\. The conversion should
    also align our head-count intervals of 8-to-10 and 16-to-20 so that they both
    lie on the interval 0.8-to-1.0\. Let’s execute this conversion and regenerate
    the plot (figure 2.12).'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化是有信息的，但只有当我们突出显示两条曲线下的区间区域时。如果没有调用`plt.fill_between`，我们就无法回答我们之前提出的问题：为什么随着公平硬币被抛掷的次数增加，观察到80%或更多正面朝上的概率会降低？答案难以外推，因为这两个分布重叠很少，直接进行视觉比较很困难。也许我们可以通过调整分布峰值来改进图表。分布A以5次正面朝上（10次抛硬币中的）为中心，而分布B以10次正面朝上（20次抛硬币中的）为中心。如果我们把正面朝上的次数转换为频率（通过除以总抛硬币次数），那么两个分布峰值应该都调整到0.5的频率。这种转换也应该使我们的8到10和16到20的正面朝上次数区间对齐，以便它们都位于0.8到1.0的区间内。让我们执行这种转换并重新生成图表（图2.12）。
- en: Listing 2.15 Converting head counts into frequencies
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.15 将正面朝上次数转换为频率
- en: '[PRE14]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![](../Images/02-12.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/02-12.png)'
- en: Figure 2.12 The head-count frequencies for 10 coin flips (A) and 20 coin flips
    (B) plotted against their probabilities. Both y-axis peaks align at a frequency
    of 0.5\. The area of A fully covers the area of B because the total area of each
    plot no longer sums to 1.0.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.12展示了10次抛硬币（A）和20次抛硬币（B）的次数频率与概率的对比图。两个y轴峰值都对应于0.5的频率。A的面积完全覆盖了B的面积，因为每个图表的总面积不再相加等于1.0。
- en: 'As expected, the two peaks now both align at the head frequency of 0.5\. However,
    our division by the head counts has reduced the areas beneath the two curves by
    tenfold and twentyfold, respectively. The total area beneath each curve no longer
    equals 1.0\. This is a problem: as we’ve discussed, the total area under a curve
    must sum to 1.0 if we wish to infer an interval probability. However, we can fix
    the area sums if we multiply the y-axis values of curves A and B by 10 and 20\.
    The adjusted y-values will no longer refer to probabilities, so we’ll have to
    name them something else. The appropriate term to use is *relative likelihood*,
    which mathematically refers to a y-axis value within a curve whose total area
    is 1.0\. We therefore name our new y-axis variables `relative_ likelihood_10`
    and `relative_likelihood_20`.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 如预期的那样，两个峰值现在都对应于0.5的次数频率。然而，我们的次数除法将两个曲线下的面积分别减少了十倍和二十倍。每个曲线下的总面积不再等于1.0。这是一个问题：正如我们讨论的那样，如果我们希望推断区间概率，曲线下的总面积必须等于1.0。但是，如果我们将曲线A和B的y轴值分别乘以10和20，我们可以修正面积总和。调整后的y值将不再表示概率，因此我们需要给它们取另一个名字。合适的术语是*相对似然性*，它在数学上指的是曲线内y轴的值，其总面积为1.0。因此，我们将新的y轴变量命名为`relative_likeliness_10`和`relative_likeliness_20`。
- en: Listing 2.16 Computing relative likelihoods of frequencies
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.16 计算频率的相对似然性
- en: '[PRE15]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The conversion is complete. It’s time to plot our two new curves while also
    highlighting the intervals associated with our `where_10` and `where_20` Boolean
    arrays (figure 2.13).
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 转换已完成。现在是时候绘制我们的两个新曲线，同时突出显示与我们的`where_10`和`where_20`布尔数组相关的区间（图2.13）。
- en: Listing 2.17 Plotting aligned relative likelihood curves
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 列表2.17 绘制对齐的相对似然曲线
- en: '[PRE16]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '![](../Images/02-13.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/02-13.png)'
- en: Figure 2.13 The head-count frequencies for 10 coin flips (A) and 20 coin flips
    (B) plotted against their relative likelihoods. Shaded intervals beneath both
    plots represent an extreme number of heads and tails. The areas of these intervals
    correspond to probabilities because the total area of each plot sums to 1.0.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.13展示了10次抛硬币（A）和20次抛硬币（B）的次数频率与它们的相对似然性的对比图。两个图表下的阴影区间代表极端的正面和反面次数。这些区间的面积对应于概率，因为每个图表的总面积相加等于1.0。
- en: Within the plot, curve A resembles a short yet wide-shouldered bodybuilder,
    while curve B could be compared to a taller and thinner individual. Since curve
    A is wider, its area over more extreme head-frequency intervals is larger. Hence,
    observed recordings of such frequencies are more likely to occur when the coin-flip
    count is 10 and not 20\. Meanwhile, the thinner, more vertical curve B covers
    more area around the central frequency of 0.5.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在图表中，曲线A看起来像一位身材短小但肩宽的健美运动员，而曲线B则可以与一个更高更瘦的人相比较。由于曲线A更宽，它在更极端的次数频率区间上的面积更大。因此，当抛硬币次数为10次而不是20次时，观察到这种频率的记录更有可能发生。同时，更细、更垂直的曲线B在0.5的中央频率周围覆盖了更多的面积。
- en: 'If we flip more than 20 coins, how will this influence our frequency distribution?
    According to probability theory, each additional coin flip will cause the frequency
    curve to grow even taller and thinner (figure 2.14). The curve will transform
    like a stretched rubber band that’s being pulled vertically upward: it will lose
    thickness in exchange for vertical length. As the total number of coin flips extends
    into the millions and billions, the curve will completely lose its girth, becoming
    a single very long vertical peak whose center lies at a frequency of 0.5\. Beyond
    that frequency, the non-existent area beneath the vertical line will approach
    zero. It follows that the area beneath the peak will approach 1.0 because our
    total area must always equal 1.0\. The area of 1.0 corresponds to a probability
    of 1.0\. Thus, as the number of coin flips approaches infinity, the frequency
    of heads will come to equal the actual probability of heads with absolute certainty.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们抛超过20枚硬币，这会如何影响我们的频率分布？根据概率论，每次额外的抛硬币都会使频率曲线变得更高、更细（图2.14）。曲线将像被垂直向上拉的橡皮筋一样变形：它会以垂直长度为代价失去厚度。当总抛硬币次数扩展到数百万和数十亿时，曲线将完全失去其宽度，变成一个中心位于0.5频率的单个非常长的垂直峰值。超过这个频率，垂直线下方的非存在区域将趋近于零。因此，峰值下方的面积将趋近于1.0，因为我们的总面积必须始终等于1.0。1.0的面积对应于1.0的概率。因此，随着抛硬币次数趋近于无穷大，正面的频率将绝对确定地等于实际的正面概率。
- en: '![](../Images/02-14.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![图2.14](../Images/02-14.png)'
- en: Figure 2.14 Hypothetical head-count frequencies plotted over an increasing number
    of coin flips. All y-axis peaks align at a frequency of 0.5\. The peaks grow higher
    and more narrow as the coin-flip count goes up. At 2,000 coin flips, the constricted
    area of the peak is centered almost entirely at 0.5\. With infinite coin flips,
    the resulting peak should stretch into a single, vertical line that’s perfectly
    positioned at 0.5.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.14 假设的计数频率随抛硬币次数增加而绘制的图表。所有y轴峰值都位于0.5的频率上。随着抛硬币次数的增加，峰值越来越高，越来越窄。在2,000次抛硬币时，峰值的狭窄区域几乎完全集中在0.5上。随着抛硬币次数无限增加，结果峰值应该延伸成一条垂直线，完美地定位在0.5上。
- en: 'The relationship between infinite coin flips and absolute certainty is guaranteed
    by a fundamental theorem in probability theory: *the law of large numbers*. According
    to that law, the frequency of an observation becomes virtually indistinguishable
    from the probability of that observation when the number of observations grows
    high. Therefore, with enough coin flips, our frequency of heads will equal the
    actual probability of heads, which is 0.5\. Beyond mere coin flips, we can apply
    the law to more complex phenomena, such as card games. If we run enough card game
    simulations, then our frequency of a win will equal the actual probability of
    a win.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 无限次抛硬币与绝对确定性之间的关系由概率论中的一个基本定理保证：*大数定律*。根据该定律，当观察次数增加时，观察频率几乎无法与观察概率区分开来。因此，随着抛硬币次数的增加，我们的正面频率将等于实际的正面概率，即0.5。除了简单的抛硬币之外，我们还可以将大数定律应用于更复杂的现象，例如牌局。如果我们进行足够的牌局模拟，那么我们的获胜频率将等于实际的获胜概率。
- en: In the subsequent section, we will show how the law of large numbers can be
    combined with random simulations to approximate complex probabilities. Eventually,
    we will execute simulations to find the probabilities of randomly drawn cards.
    However, as the law of large numbers indicates, these simulations must be run
    on a large, computationally expensive scale. Therefore, efficient simulation implementation
    requires us to familiarize ourselves with the NumPy numeric computation library.
    That library is discussed in section 3\.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将展示如何将大数定律与随机模拟相结合，以近似复杂的概率。最终，我们将执行模拟来找到随机抽取的牌的概率。然而，正如大数定律所表明的，这些模拟必须在规模大、计算成本高的范围内运行。因此，高效的模拟实现需要我们熟悉NumPy数值计算库。该库在第3节中进行了讨论。
- en: Summary
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: By plotting every possible numeric observation versus its probability, we generate
    a probability distribution. The total area beneath a probability distribution
    sums to 1.0\. The area beneath a specific interval of the distribution equals
    the probability of observing some value within that interval.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过将每个可能的数值观察与其概率进行对比，我们生成一个概率分布。概率分布下方的总面积等于1.0。分布特定区间的下方面积等于在该区间内观察到某个值的概率。
- en: The y-axis values of a probability distribution do not necessarily need to equal
    probabilities, as long as the plotted area sums to 1.0.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概率分布的y轴值不一定需要等于概率，只要绘制的面积总和为1.0即可。
- en: The probability distribution of a fair coin-flip sequence resembles a symmetric
    curve. Its x-axis head counts can be converted into frequencies. During that conversion,
    we can maintain an area of 1.0 by converting y-axis probabilities into relative
    likelihoods. The peak of the converted curve is centered at a frequency of 0.5\.
    If the coin-flip count is increased, then the peak will also rise as the curve
    becomes more narrow on its sides.
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公平硬币抛掷序列的概率分布类似于一个对称曲线。其x轴的正面次数可以转换为频率。在转换过程中，我们可以通过将y轴的概率转换为相对可能性来保持面积为1.0。转换后的曲线峰值位于0.5的频率处。如果抛硬币的次数增加，那么峰值也会上升，同时曲线的两侧也会变得更加狭窄。
- en: According to the *law of large numbers*, the frequency of any observation will
    approach the probability of that observation as the observation count grows large.
    Thus, a fair-coin distribution becomes dominated by its central frequency of 0.5
    as the coin-flip count goes up.
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据大数定律，任何观察的频率将随着观察次数的增加而趋近于该观察的概率。因此，当抛硬币的次数增加时，公平硬币分布将主要由其中心频率0.5所主导。
