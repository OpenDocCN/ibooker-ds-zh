- en: 1 Configuration and setup
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1 配置和设置
- en: This first chapter is purely optional. If you already know how to build C code,
    especially if you’re familiar with working at the command prompt, stop wasting
    time and merrily skip up to chapter 2\. Otherwise, slug it out and
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这第一章完全是可选的。如果你已经知道如何构建C代码，特别是如果你熟悉在命令提示符下工作，那么就别浪费时间，愉快地跳到第2章。否则，就坚持下去。
- en: Review the C language development cycle
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复习C语言开发周期
- en: Use an integrated development environment (IDE) to build code
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用集成开发环境（IDE）构建代码
- en: Explore the excitement of command-line programming in a terminal window, just
    like Grandpa did
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在终端窗口中探索命令行编程的激动人心之处，就像爷爷那样
- en: Review options for linking in libraries and supplying command-line arguments
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看链接库和提供命令行参数的选项
- en: 'The purpose of this material is for review, though if you’ve never used a command
    line to program, you’re in for a treat: I find command-line programming to be
    fast and easy, specifically for the tiny programs created in this book. This code
    is well suited for the command-line environment.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 这份材料的目的是为了复习，尽管如果你从未使用过命令行编程，那么你将会有一个惊喜：我发现命令行编程既快又简单，特别是对于这本书中创建的小程序来说。这段代码非常适合命令行环境。
- en: Still reading? Good. This chapter serves as a review when your C programming
    skills are rusty or if you just want to confirm that what you know is up to par
    for successfully navigating the rest of the book. I appreciate that you’re still
    here. Otherwise, these pages would be blank.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 你还在阅读吗？很好。当你的C编程技能生锈或只是想确认你所知道的是否足以成功导航本书的其余部分时，这一章就起到了复习的作用。我很感激你还在这里。否则，这些页面将是空白的。
- en: And why do skills get rusty? Is it the iron and oxygen? The field of computer
    jargon needs to plant new terms for poor skills, something highly offensive and
    obnoxious to the point of being widely accepted. I’ll ruminate on the topic, and
    maybe add a quiz question along these lines at the end of the chapter.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 那么为什么技能会生锈呢？是铁和氧气吗？计算机术语领域需要为糟糕的技能创造新术语，这些术语应该非常令人反感，以至于被广泛接受。我会对这个话题进行沉思，也许在章节末尾添加一个类似的问题。
- en: 1.1 The C development cycle
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1 C语言开发周期
- en: According to ancient Mesopotamian tablets currently on display in the British
    Museum, four steps are taken to develop a C language program. These are illustrated
    in figure 1.1, where you can plainly see the C development cycle written in cuneiform.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 根据目前在大英博物馆展出的古代美索不达米亚泥板，开发C语言程序需要四个步骤。这些步骤在图1.1中得到了说明，你可以清楚地看到用楔形文字书写的C语言开发周期。
- en: '![01-01](Images/01-01.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![01-01](Images/01-01.png)'
- en: Figure 1.1 The C development cycle, courtesy of the British Museum
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1 C语言开发周期，由大英博物馆提供
- en: 'As a review, and because neither of us knows Babylonian, here is the translation:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 作为复习，并且因为我们都不懂巴比伦语，以下是翻译：
- en: Start by creating the source code file.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先创建源代码文件。
- en: Compile the source code into object code.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将源代码编译成目标代码。
- en: Link in a library to create a program file.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 链接库以创建程序文件。
- en: Finally, run the program for testing, disappointment, or delight.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，运行程序进行测试，失望或高兴。
- en: Step 4 is a rather liberal translation on my part. The original reads, “Run
    the program and rejoice by consuming a cow.” I have also omitted references to
    pagan deities.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 第4步是我相当自由的翻译。原文是：“运行程序并通过吃一头牛而欢欣鼓舞。”我还省略了对异教神祇的提及。
- en: These steps present a simple overview of the process. The steps are more numerous
    due to inevitable errors, bugs, booboos, and lack of cows. The following sections
    describe the details.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这些步骤提供了一个简单的过程概述。由于不可避免的错误、错误、糟糕的失误和缺乏牛，步骤更多。以下各节将描述细节。
- en: 1.1.1 Editing source code
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.1 编辑源代码
- en: C language source code is plain text. What makes the file a C source code file
    and not a boring ol’ text file is the .c filename extension; all C source code
    files use this filename extension. Eyeball code uses the .see extension. Naval
    code uses .sea. Know the difference.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: C语言源代码是纯文本。使文件成为C源代码文件而不是无聊的普通文本文件的是.c文件扩展名；所有C源代码文件都使用这个文件扩展名。眼码使用.see扩展名。海军码使用.sea。了解它们之间的区别。
- en: Use a text editor to craft your source code. Do not use a word processor, which
    is like using a helicopter to prune a tree. Don’t let the exciting visual image
    dissuade you; your goal is to use the best tool for the job. Any plain-text editor
    works, though the good ones offer features like color-coding, pattern matching,
    and other swanky features that make the process easier. I prefer the VIM text
    editor, which is available at [vim.org](https://www.vim.org/). VIM is available
    as a both a text mode (terminal window) program and a GUI or windowed version.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 使用文本编辑器来编写源代码。不要使用文字处理器，这就像用直升机修剪树木一样。不要让令人兴奋的视觉图像让你分心；你的目标是使用最适合这项工作的工具。任何纯文本编辑器都可以工作，尽管好的编辑器提供了诸如颜色编码、模式匹配和其他使过程更简单的特性。我更喜欢VIM文本编辑器，它可以在[vim.org](https://www.vim.org/)找到。VIM可以作为文本模式（终端窗口）程序和GUI或窗口版本提供。
- en: 'IDEs feature a built-in text editor, which is the point of the I in IDE: integrated.
    This editor is what you’re stuck with unless an option is available to change
    it. For example, in Visual Studio Code, you can obtain an extension to bring your
    favorite editor commands into the IDE.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 集成开发环境（IDEs）内置了文本编辑器，这就是IDE中的I所代表的意义：集成。除非有选项可以更改它，否则你将一直使用这个编辑器。例如，在Visual
    Studio Code中，你可以获取一个扩展来将你喜欢的编辑器命令带到IDE中。
- en: As a tip, the .c file extension defines a C language source code filetype, which
    is often associated by the operating system with your IDE. On my system, I associate
    .c files with my favorite VIM text editor. This trick allows me to double-click
    a C source code file icon and have it open in my text editor as opposed to having
    the IDE load.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个小贴士，.c文件扩展名定义了C语言源代码文件类型，操作系统通常将其与你的IDE关联。在我的系统中，我将.c文件与我最喜欢的VIM文本编辑器关联。这个技巧允许我双击一个C源代码文件图标，然后它就会在我的文本编辑器中打开，而不是让IDE加载。
- en: 1.1.2 Compiling, linking, building
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.2 编译、链接、构建
- en: 'After writing the source code, you build the program. This process combines
    two original steps that only a handful of programmers at the Old Coder’s Home
    remember: compiling and linking. Most code babies today just think of compiling,
    but linking is still in there somewhere.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 编写源代码后，你构建程序。这个过程结合了两个原始步骤，只有老程序员之家的一小部分程序员还记得：编译和链接。今天的许多代码婴儿只想到编译，但链接仍然存在。
- en: 'After the source code file is as perfect as you can imagine, you compile it
    into object code: the compiler consumes the text in the source code file, churns
    through it, and spews forth an object code file. Object code files traditionally
    have a .o (“dot-oh”) filename extension unless your compiler or IDE opts for the
    heretical .obj extension.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在源代码文件尽可能完美之后，你将其编译成目标代码：编译器消耗源代码文件中的文本，对其进行处理，然后输出一个目标代码文件。目标代码文件传统上具有 .o（“点-零”）文件扩展名，除非你的编译器或IDE选择异端的
    .obj 扩展名。
- en: Items in your source code that offend the compiler are flagged as warnings or
    errors. An error terminates the process with an appropriately rude but helpful
    message. A warning may also thwart the creation of object code, but often the
    compiler shrugs its shoulders and creates an object code file anyway, figuring
    you’re smart enough to go back and fix the problem. You probably aren’t, which
    is why I admonish you to always take compiler warnings seriously.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 源代码中冒犯编译器的项会被标记为警告或错误。错误会以一个既粗鲁又有帮助的消息终止进程。警告也可能阻止目标代码的创建，但通常编译器会耸耸肩，仍然创建一个目标代码文件，认为你足够聪明，可以回头解决问题。你可能并不这么认为，这就是为什么我告诫你一定要认真对待编译器警告。
- en: Object code is linked or combined with the C library file to build a program.
    Any errors halt the process, which must be addressed by re-editing the source
    code, compiling, and linking again.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 目标代码与C库文件链接或组合以构建程序。任何错误都会停止进程，这需要通过重新编辑源代码、编译和链接来解决。
- en: These days, the original separate steps of compiling and linking are combined
    into a single step called building. Compiling and linking still take place. No
    matter how many steps it takes, the result is the creation of a program.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，编译和链接的原始单独步骤被合并成一个称为构建的单一步骤。编译和链接仍然会发生。无论需要多少步骤，结果都是创建一个程序。
- en: Run the program.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 运行程序。
- en: I’m quite nervous when my efforts survive the building process with no warnings
    or errors. I’m even more suspicious when I run the program and it works properly
    the first time. Still, it happens. Prepare to be delighted or have your suspicions
    confirmed. When things go awry, which is most of the time, you re-edit the source
    code file, compile, link, and run again. In fact, the actual C program development
    cycle looks more like figure 1.2.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 当我的努力在构建过程中没有警告或错误地成功时，我非常紧张。当我运行程序并且它第一次运行正常时，我更加怀疑。尽管如此，这种情况确实发生了。准备好感到高兴或者证实你的怀疑。当事情出错时，这通常是大多数情况，你会重新编辑源代码文件，编译，链接，然后再次运行。实际上，实际的C程序开发周期看起来更像图1.2。
- en: '![01-02](Images/01-02.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![01-02](Images/01-02.png)'
- en: Figure 1.2 The true nature of the program development cycle. (Image courtesy
    of the California Department of Highway Safety.)
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2 程序开发周期的真正本质。（图片由加利福尼亚州公路安全部提供。）
- en: For trivia’s sake, the original C compiler in Unix was called cc. Guess what
    it stands for?
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 为了消遣一下，Unix中的原始C编译器被称为cc。猜猜它代表什么？
- en: The original Unix linker was named *ld*. It probably stands for “link dis.”
    The *ld* program still exists on today’s Linux and other Unix-like systems. It’s
    called internally by the compiler—unless the code is riddled with errors, in which
    case the compiler calls its friend Betsy to giggle about how horrible your C code
    reads.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 原始Unix链接器被称为*ld*。它可能代表“link dis。”*ld*程序仍然存在于今天的Linux和其他类Unix系统中。它由编译器内部调用——除非代码充满了错误，在这种情况下，编译器会叫它的朋友Betsy嘲笑你的C代码多么糟糕。
- en: Okay. The *ld* program most likely is short for Link eDitor. Please stop composing
    that email now.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧。*ld*程序很可能是Link eDitor的缩写。请立即停止撰写那封电子邮件。
- en: 1.2 The integrated development environment (IDE)
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2 集成开发环境（IDE）
- en: Most coders prefer to work in an *integrated development environment*, or *IDE*—this
    program is software used to create software, like a toaster that makes toasters
    but also makes toast and bread.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数程序员更喜欢在一个*集成开发环境*，或*IDE*中工作——这个程序是用于创建软件的软件，就像一个制作烤面包机的烤面包机，它不仅制作烤面包机，还制作面包。
- en: The IDE combines an editor, a compiler, and a running environment in a single
    program. Using an IDE is a must for creating GUI programs where you can build
    graphical elements like windows and dialog boxes and then add them to your code
    without the toil of coding everything by hand. Programmers love IDEs.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: IDE将编辑器、编译器和运行环境结合在一个程序中。使用IDE对于创建GUI程序是必须的，在这些程序中，你可以构建图形元素，如窗口和对话框，然后将其添加到你的代码中，而无需手动编写所有代码。程序员们喜欢IDE。
- en: 1.2.1 Choosing an IDE
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.1 选择一个IDE
- en: You don’t need an IDE to craft the programs presented in this course. I suggest
    that you use the command prompt, but you’re stubborn and love your IDE—and you’re
    still reading—so I’m compelled to write about it.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 你不需要IDE来制作本课程中展示的程序。我建议你使用命令提示符，但你固执己见，喜欢你的IDE——而且你还在阅读——所以我不得不写关于它。
- en: The IDE I recommend for C programming is Visual Studio Code, available at [code.visualstudio.com](https://code.visualstudio.com).
    It comes in Windows, macOS, and Linux flavors.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我推荐的C编程IDE是Visual Studio Code，可在[code.visualstudio.com](https://code.visualstudio.com)找到。它适用于Windows、macOS和Linux。
- en: 'Visual Studio Code can be overwhelming, so I also recommend Code::Blocks, available
    at [codeblocks.org](https://codeblocks.org/). Its best version is available only
    for Windows. Ensure that you obtain a version of Code::Blocks that comes with
    a compiler. The default is MinGW, which is nice. Better, get *clang* for Windows,
    which can be obtained at the LLVM website: [llvm.org](https://llvm.org/). You
    must manually cajole Code::Blocks into accepting *clang* as its compiler; details
    are offered in the next section.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: Visual Studio Code可能会让人感到不知所措，所以我还推荐Code::Blocks，可在[codeblocks.org](https://codeblocks.org/)找到。它的最佳版本仅适用于Windows。确保你获得了一个包含编译器的Code::Blocks版本。默认的是MinGW，这很好。更好的是，为Windows获取*clang*，它可以在LLVM网站上找到：[llvm.org](https://llvm.org/)。你必须手动说服Code::Blocks接受*clang*作为其编译器；详细信息将在下一节中提供。
- en: If you’re using Linux, you already have a compiler, *gcc*, which is the default.
    Even so, I recommend obtaining the LLVM clang compiler. It’s incredibly sophisticated.
    It features detailed error messages plus suggestions for fixing your code. If
    I were a robot, I would insist that clang be used to compile my brain’s software.
    Use your distro’s package manager to obtain this superb compiler at once!
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用Linux，你已经有了一个编译器，*gcc*，这是默认的。即便如此，我仍然建议获取LLVM clang编译器。它非常复杂。它具有详细的错误消息以及修复代码的建议。如果我是机器人，我会坚持使用clang来编译我大脑的软件。使用你发行版的包管理器立即获取这个出色的编译器！
- en: 1.2.2 Using Code::Blocks
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.2 使用Code::Blocks
- en: 'Though I prefer Visual Studio Code, I recommend Code::Blocks if you’re just
    starting out. Before you build your first program in the Code::Blocks IDE, confirm
    that the path to the compiler is correct. For a standard installation, the path
    is:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我更喜欢Visual Studio Code，但如果你是初学者，我推荐使用Code::Blocks。在Code::Blocks IDE中构建你的第一个程序之前，请确认编译器的路径是否正确。对于标准安装，路径是：
- en: '[PRE0]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Ensure that this address is specified for Code::Blocks to locate the default
    compiler, MinGW, which I just mentioned. Or, if you’ve disobeyed the setup program’s
    suggestions, set the proper path to your compiler. For example, be spicy and use
    LLVM clang as your compiler. If so, set the proper path to that compiler so that
    Code::Blocks doesn’t barf every time you click the Build button.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 确保为Code::Blocks指定此地址以便找到默认的编译器MinGW，就是我刚才提到的。或者，如果你没有遵循设置程序的推荐，请设置正确的编译器路径。例如，可以大胆使用LLVM
    clang作为编译器。如果是这样，请设置正确的编译器路径，这样每次点击构建按钮时Code::Blocks都不会崩溃。
- en: 'To set the path, heed these directions in Code::Blocks. Don’t be lazy! The
    missing compiler error message is one of the most common email complaint messages
    I receive from readers who can’t get Code::Blocks to work. Follow these steps
    in Code::Blocks:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置路径，请遵循Code::Blocks中的这些指示。不要偷懒！缺少编译器错误信息是我从无法使用Code::Blocks的读者那里收到的最常见的电子邮件投诉信息之一。请在Code::Blocks中按照以下步骤操作：
- en: Choose Settings > Compiler.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择设置 > 编译器。
- en: In the Compiler Settings dialog box, click the Toolchain Executables tab.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在编译器设置对话框中，点击工具链可执行文件选项卡。
- en: Write (or paste) the compiler’s address into the Compiler’s Installation Directory
    text box.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将编译器的地址写入编译器安装目录的文本框中。
- en: Click OK.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击确定。
- en: The IDE should be happy with the compiler after you work through these steps.
    If not—yep, you guessed it—get some cows.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成这些步骤后，IDE应该对编译器感到满意。如果不满意——是的，你猜对了——找一些牛来。
- en: Once the compiler is set, you use Code::Block’s built-in editor to create your
    code. The editor uses color-coding, matches parentheses and other pairs, and features
    inline context assistance for C library functions. All good.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦设置了编译器，你就可以使用Code::Block的内置编辑器来创建你的代码。编辑器使用彩色编码，匹配括号和其他成对元素，并为C库函数提供内联上下文辅助。一切都很不错。
- en: After creating—and saving—your source code, Code::Blocks uses a Build command
    to compile and link the source code. Messages are output in another part of the
    window where you read whether the operation succeeded or failed.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 创建并保存源代码后，Code::Blocks使用构建命令来编译和链接源代码。消息将在窗口的另一部分输出，你可以在这里阅读操作是否成功或失败。
- en: Figure 1.3 shows the Code::Blocks workspace. Its presentation can be customized,
    though in the figure look for the callout items of the buttons used to build or
    run or do a combined build-and-run.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3显示了Code::Blocks的工作空间。其展示可以自定义，尽管在图中要寻找用于构建、运行或组合构建和运行的按钮的标注项。
- en: '![01-03](Images/01-03.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![01-03](Images/01-03.png)'
- en: Figure 1.3 Important stuff in the Code::Blocks IDE window
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3 Code::Blocks IDE窗口中的重要内容
- en: 'Like all IDEs, Code::Blocks prefers that you create a new project when you
    start to code. The process works like this:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 与所有IDE一样，Code::Blocks更喜欢你在开始编码时创建一个新的项目。过程如下：
- en: Click File > New > Project.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击文件 > 新建 > 项目。
- en: From the New From Template window, select the Console Application icon, and
    then click the Go button.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“从模板新建”窗口中，选择控制台应用程序图标，然后点击“Go”按钮。
- en: Select C as the programming language, and then click Next.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择C作为编程语言，然后点击下一步。
- en: Type a title for the project, which is also the name of the project folder tree.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为项目输入一个标题，这个标题也是项目文件夹树的名称。
- en: Choose the folder in which to create the project.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择创建项目的文件夹。
- en: Click Next.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击下一步。
- en: Select to create a Release configuration. You don’t need the Debug configuration
    unless you plan on using the Code::Blocks debugger (which is really quite cool,
    but no).
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择创建发布配置。除非你打算使用Code::Blocks调试器（它真的很酷，但不是必需的），否则不需要调试配置。
- en: Click Finish to create the project skeleton.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击完成以创建项目框架。
- en: Code::Blocks spawns all kinds of folders and creates a prewritten source code
    file, main.c. You can replace the contents of this file with your own stuff. I
    find this entire process tedious, but it’s how an IDE prefers to work.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Code::Blocks会创建各种文件夹并创建一个预写的源代码文件main.c。你可以用你自己的内容替换这个文件的内容。我发现整个过程很繁琐，但这是IDE喜欢的工作方式。
- en: As an alternative, you can use the File > New > Empty File command to open a
    new source code file in the editor. Immediately save the file with a .c filename
    extension to activate the editor’s nifty features. You can then proceed with creating
    an individual program without enduring the bulk and heft of a full-on project.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 作为替代，你可以使用文件 > 新建 > 空文件命令在编辑器中打开一个新的源代码文件。立即将文件保存为 .c 文件扩展名以激活编辑器的巧妙功能。然后你可以继续创建单个程序，而无需忍受完整项目的庞大和沉重。
- en: Existing files—such as those you steal from GitHub for this book or for other,
    nefarious purposes—can be opened directly. The point of opening any file directly
    is that you don’t need the bulk and overhead of creating a project to create such
    small programs.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 现有的文件——比如那些你为本书或其他邪恶目的从 GitHub 盗取的文件——可以直接打开。直接打开任何文件的目的在于，你不需要创建项目的大量工作和开销来创建这样的小型程序。
- en: To perform a quick compile and link in Code::Blocks, click the Build button.
    This step checks for warnings and errors but doesn’t run the created program.
    If things go well, click the Run button to view the output in a command prompt
    window, such as the one shown in figure 1.4.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Code::Blocks 中执行快速编译和链接，请点击构建按钮。此步骤会检查警告和错误，但不会运行创建的程序。如果一切顺利，点击运行按钮以在命令提示符窗口中查看输出，如图
    1.4 所示。
- en: '![01-04](Images/01-04.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![01-04](Images/01-04.png)'
- en: Figure 1.4 The command prompt window
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 命令提示符窗口
- en: Close the command prompt window when you’re done. Remember to do this! A common
    problem some people have with Code::Blocks is that they can’t see the output window.
    This dilemma most likely occurs because an output window is already open. Ensure
    that after test-running your programs, you close the wee li’l terminal window.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 完成操作后，请关闭命令提示符窗口。记得要这么做！有些人使用 Code::Blocks 时会遇到的一个常见问题是他们看不到输出窗口。这种困境很可能是由于已经打开了一个输出窗口。确保在测试运行你的程序后，关闭那个小小的终端窗口。
- en: If you’re feeling cocky, you can use the combo Build-and-Run button (refer to
    figure 1.3) instead of working through the separate Build and Run commands. When
    you click Build and Run, the code builds and immediately runs, unless you riddled
    the thing with errors, in which case you get to fix them.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你感到自信，可以使用组合构建和运行按钮（参见图 1.3）而不是通过单独的构建和运行命令来工作。当你点击构建和运行时，代码会构建并立即运行，除非你满是错误，在这种情况下，你需要修复它们。
- en: 1.2.3 Using XCode
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.3 使用 XCode
- en: The XCode IDE on the Macintosh is a top-flight application used to build everything
    from macOS programs to those teensy apps that run on cell phones and wristwatches
    for the terminally hip. You can use this sophisticated tool to write the simple
    command-line, text mode utilities offered in this book. It’s kind of impractical,
    given the power of XCode, but this hindrance doesn’t prevent millions of Apple
    fans from doing so.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: Macintosh 上的 XCode IDE 是一款顶级应用程序，用于构建从 macOS 程序到那些运行在手机和手表上的微型应用程序的一切。你可以使用这个复杂的工具来编写本书中提供的简单命令行、文本模式实用程序。考虑到
    XCode 的强大功能，这有点不切实际，但这种障碍并没有阻止数百万的苹果粉丝这么做。
- en: If your Macintosh lacks XCode, you can obtain a copy for free from the App Store.
    If prompted, ensure that you choose to add the command-line tools.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的 Macintosh 没有XCode，你可以从 App Store 中免费获取一个副本。如果提示，请确保选择添加命令行工具。
- en: 'To create a text mode C language project in XCode, heed these directions:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 XCode 中创建文本模式的 C 语言项目，请遵循以下指示：
- en: Choose File > New > Project.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择文件 > 新建 > 项目。
- en: Select the Command Line Tool template for the project.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为项目选择命令行工具模板。
- en: Click Next.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击下一步。
- en: Type a name for the project.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为项目输入一个名称。
- en: Ensure that C is chosen as the language.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择 C 作为语言。
- en: Click the Next button.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击下一步按钮。
- en: Confirm the folder location.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认文件夹位置。
- en: Click the Create button.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击创建按钮。
- en: XCode builds a project skeleton, providing the main.c file, complete with source
    code you can gleefully replace with your own.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: XCode 会构建一个项目骨架，提供包含源代码的 main.c 文件，你可以愉快地将其替换为自己的代码。
- en: Alas, unlike with other IDEs, you cannot open an individual C source code file
    and then build and run it within XCode. This reason is why I recommend using command-line
    programming on the Mac, especially for the small, text mode utilities presented
    in this book. Refer to the next section.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 唉，与其他 IDE 不同，你无法在 XCode 中打开单个 C 源代码文件，然后构建并运行它。这就是我建议在 Mac 上使用命令行编程的原因，特别是对于本书中介绍的这些小型文本模式实用程序。参考下一节。
- en: To build and run in XCode, click the Run icon, shown in figure 1.5\. Output
    appears in the bottom part of the project window, as illustrated in the figure.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 要在XCode中构建和运行，请点击图1.5所示的运行图标。输出显示在项目窗口的底部，如图所示。
- en: '![01-05](Images/01-05.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![01-05](Images/01-05.png)'
- en: Figure 1.5 XCode’s window. (Squint to view clearly.)
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5 XCode的窗口。（眯眼才能看清楚。）
- en: While the project files may dwell in the folder you chose earlier in step 7,
    the resulting program is created and buried deep within XCode’s folder system.
    This attempt at concealment makes it inconvenient for running and testing command-line
    programs demonstrated in this book. Specifically, to set command-line options
    or perform I/O redirection at the prompt requires jumping through too many hoops.
    To me, this awkwardness makes using XCode as your IDE an option limited to masochists
    and the fanatical Apple type.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然项目文件可能位于您在步骤7中选择的文件夹中，但生成的程序是在XCode的文件夹系统中创建并隐藏起来的。这种隐藏尝试使得运行和测试本书中展示的命令行程序变得不方便。具体来说，在提示符下设置命令行选项或执行I/O重定向需要跳过太多的障碍。对我来说，这种尴尬使得使用XCode作为IDE的选择仅限于受虐狂和狂热的苹果用户。
- en: 1.3 Command-line compiling
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.3 命令行编译
- en: Welcome to the early years of computing. It’s nostalgic to edit, build, and
    run C programs in text mode, but it works well and is quite efficient. You must
    understand how the command line works, which is something I believe all C programmers
    should know innately. Truly, it’s rare to find a C coder worthy of the title who
    lacks a knowledge of text mode programming in Unix or Linux.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎来到计算机的早期年代。在文本模式下编辑、构建和运行C程序很怀旧，但效果很好，效率很高。您必须了解命令行的工作原理，这是我相信所有C程序员都应该天生就知道的。确实，很难找到一个值得这个称号的C程序员，他们缺乏Unix或Linux文本模式编程的知识。
- en: 1.3.1 Accessing the terminal window
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.1 访问终端窗口
- en: Every Linux distro comes with a terminal window. MacOS features a terminal program.
    Even Windows 10 comes with a command shell, though it’s better to install the
    Windows Subsystem for Linux (WSL) and use an Ubuntu bash shell for consistency
    with the other platforms. Never have the times been so good for text mode programming.
    Crack open a Tab and kick off your sandals!
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 每个Linux发行版都自带一个终端窗口。MacOS有一个终端程序。即使是Windows 10也自带命令行外壳，但最好安装Windows Subsystem
    for Linux (WSL)并使用Ubuntu bash外壳以与其他平台保持一致。从未有过如此好的文本模式编程时代。打开一个Tab，脱掉你的凉鞋吧！
- en: To start a terminal window in Linux, look for the Terminal program on the GUI’s
    program menu. It may be called Terminal, Term, Xterm, or something similar.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要在Linux中启动终端窗口，请在GUI的程序菜单中查找终端程序。它可能被称为终端、Term、Xterm或类似名称。
- en: On the Mac, start the Terminal application, which is found in the Utilities
    folder. Access this folder from the Finder by clicking Go > Utilities from the
    menu or by pressing the Shift+Command+U keyboard shortcut.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Mac上，启动终端应用程序，该程序位于实用工具文件夹中。您可以通过点击菜单中的“前往”>“实用工具”或按Shift+Command+U快捷键从Finder访问此文件夹。
- en: In Windows 10, open the Microsoft Store and search for the Ubuntu app. It’s
    free to download, but to make it work you must also install the WSL. Directions
    for installing the subsystem are splattered all over the Internet.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Windows 10中，打开Microsoft Store并搜索Ubuntu应用程序。下载是免费的，但要使其工作，您还必须安装WSL。安装子系统的说明散布在互联网的各个角落。
- en: 'The Windows 10 Ubuntu app is shown in figure 1.6\. Like all other terminal
    windows, it can be customized: you can reset the font size, the number of rows
    and columns, screen colors, and so on. Be aware that the traditional text mode
    screen supported 80 columns by 24 rows of text.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 10的Ubuntu应用程序如图1.6所示。与所有其他终端窗口一样，它可以进行自定义：您可以重置字体大小、行数和列数、屏幕颜色等。请注意，传统的文本模式屏幕支持80列和24行的文本。
- en: '![01-06](Images/01-06.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![01-06](Images/01-06.png)'
- en: Figure 1.6 Linux in Windows—such sacrilege
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 Windows中的Linux——这样的亵渎
- en: If you plan on using the terminal window for your program production, I recommend
    keeping a shortcut to the Terminal program available for quick access. For example,
    in Windows, I pin a shortcut to the Ubuntu shell on the taskbar. On the Mac, I
    have my Terminal window automatically start each time I sign into OS X. Directions
    for accomplishing such tasks are concealed on the internet.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您计划使用终端窗口进行程序生产，我建议保留终端程序的快捷方式以便快速访问。例如，在Windows中，我将Ubuntu壳的快捷方式固定在任务栏上。在Mac上，每次我登录OS
    X时，我的终端窗口都会自动启动。完成此类任务的说明隐藏在互联网上。
- en: 1.3.2 Reviewing basic shell commands
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.2 检查基本shell命令
- en: I bet you know a few shell commands. Good. In case doubt lingers, table 1.1
    lists some commands you should be familiar with to make it easy to work at the
    command prompt. These are presented without context or further information, which
    helps maintain the command prompt’s mysterious and powerful aura.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我敢打赌你了解一些shell命令。很好。以防还有疑问，表1.1列出了你应该熟悉的命令，以便在命令提示符下轻松工作。这些命令没有上下文或进一步的信息，这有助于保持命令提示符神秘而强大的氛围。
- en: Table 1.1 Shell commands worthy of attention
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 表1.1 值得关注的shell命令
- en: '| Command | What it does |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 命令 | 它的作用 |'
- en: '| *cd* | Change to the named directory. When typed without an argument, the
    command changes to your home directory. |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| *cd* | 切换到指定的目录。如果没有参数，命令会切换到你的家目录。 |'
- en: '| *cp* | Copy a file. |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| *cp* | 复制一个文件。 |'
- en: '| *exit* | Log out of the terminal window, which may close the window. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| *exit* | 从终端窗口注销，可能会关闭窗口。 |'
- en: '| *ls* | List files in the current directory. |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| *ls* | 列出当前目录中的文件。 |'
- en: '| *man* | Summon the manual page (online documentation) for the named shell
    command or C language function. This is the most useful command to know. |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| *man* | 调用名为shell命令或C语言函数的手册页面（在线文档）。这是需要了解的最有用的命令。 |'
- en: '| *mkdir* | Make a new directory. |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| *mkdir* | 创建一个新的目录。 |'
- en: '| *mv* | Move a file from one directory to another. Also used to rename a file.
    |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| *mv* | 将文件从一个目录移动到另一个目录。也可以用来重命名文件。 |'
- en: '| *pwd* | Print the current working directory. |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| *pwd* | 打印当前工作目录。 |'
- en: '| *unlink* | Delete the named file. |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| *unlink* | 删除指定的文件。 |'
- en: Each of the commands listed in table 1.1 has options and arguments, such as
    filenames and pathnames. Most everything is typed in lowercase and spelling errors
    unforgivable. (Some shells offer spell-check and command completion.)
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 表1.1中列出的每个命令都有选项和参数，例如文件名和路径名。大多数内容都是小写输入，拼写错误是不可原谅的。（一些shell提供拼写检查和命令补全。）
- en: Another command to know is make, which helps build larger projects. This command
    is covered later in this book. I’d list a chapter reference, but I haven’t written
    the chapter yet.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个需要了解的命令是make，它有助于构建更大的项目。这个命令在本书的后续部分会有介绍。我本想列出章节参考，但我还没有写完这一章。
- en: Also important is to know how the package manager works, though with many Linux
    distros you can obtain command-line packages from the GUI package manager. If
    not, familiarize yourself with how the command-line package manager works.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个重要的事情是了解包管理器的工作方式，尽管在许多Linux发行版中，你可以从GUI包管理器中获取命令行包。如果不是这样，熟悉命令行包管理器的工作方式。
- en: For example, in Ubuntu Linux, use the *apt* command to search for, install,
    update, and remove command-line software. Various magical options make these things
    happen. Oh, and the *apt* command must be run from the superuser account; onscreen
    directions explain the details.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在Ubuntu Linux中，使用*apt*命令来搜索、安装、更新和删除命令行软件。各种神奇选项使得这些操作得以实现。哦，并且*apt*命令必须从超级用户账户运行；屏幕上的说明会解释细节。
- en: 'My final recommendation is to understand the file-naming conventions. Spaces
    and other oddball characters are easy to type in a GUI, but at the command prompt,
    they can be nettlesome. For the most part, prefix spaces with the backslash character,
    \ , which acts as an escape. You can also take advantage of filename completion:
    in *bash*, *zsh*, and other shells, type the first part of a filename, and then
    press the Tab key to spew out the rest of the name automatically.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我的最终建议是理解文件命名约定。在GUI中输入空格和其他奇怪字符很容易，但在命令提示符下，它们可能会很麻烦。大部分情况下，使用反斜杠字符\作为转义符来前缀空格。你也可以利用文件名补全：在*bash*、*zsh*和其他shell中，输入文件名的一部分，然后按Tab键自动输出剩余的名称。
- en: File-naming conventions also cover pathnames. Understand the difference between
    relative and absolute paths, which helps when running programs and managing your
    files.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 文件命名约定也涵盖了路径名。了解相对路径和绝对路径之间的区别，这在运行程序和管理文件时很有帮助。
- en: 'I’m sure you can find a good book somewhere to help you brush up on your Linux
    knowledge. Here is an obligatory plug for a tome from Manning Publications: *Learn
    Linux in a Month of Lunches*, by Steven Ovadia (2016). Remember, it’s free at
    the library.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我相信你可以在某处找到一本好书来帮助你提高Linux知识。这里是对来自Manning Publications的书籍的义务推荐：《一个月午餐学Linux》，作者史蒂文·奥瓦迪亚（2016年）。记住，在图书馆是免费的。
- en: 1.3.3 Exploring text screen editors
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.3 探索文本屏幕编辑器
- en: To properly woo the command prompt, you must know how to use a text mode editor.
    Many are installed by default with Linux. Those that aren’t can be obtained from
    your distro’s package manager. On the Mac, you can use the Homebrew system to
    add text mode programs that Apple deems unworthy to ship with its operating system;
    learn more about Homebrew at [brew.sh](http://brew.sh).
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 要正确地吸引命令提示符，您必须知道如何使用文本模式编辑器。许多Linux系统默认安装了文本模式编辑器。那些没有安装的可以从您发行版的包管理器中获取。在Mac上，您可以使用Homebrew系统添加苹果认为不值得随操作系统一起发货的文本模式程序；更多关于Homebrew的信息请访问[brew.sh](http://brew.sh)。
- en: My favorite text mode editor is *VIM*, the improved version of the classic vi
    editor. It has a terminal window version that runs in text mode as well as a full
    GUI version. The program is available for all operating systems.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我最喜欢的文本模式编辑器是*VIM*，它是经典vi编辑器的改进版本。它有一个在文本模式下运行的终端窗口版本，以及一个完整的GUI版本。该程序适用于所有操作系统。
- en: The thing that ticks off most coders about *VIM* is that it’s a modal editor,
    which means you must switch between text editing and input modes. This duality
    drives some programmers crazy, which is fine by me.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数程序员对*VIM*不满的是，它是一个模式编辑器，这意味着您必须在文本编辑和输入模式之间切换。这种双重性让一些程序员疯狂，但对我来说这没关系。
- en: Another popular text mode editor is *Emacs*. Like *VIM*, it’s also available
    as a text mode editor as well as a GUI editor. I don’t use *Emacs*, so I am unable
    to wax eloquent upon its virtues.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个流行的文本模式编辑器是*Emacs*。像*VIM*一样，它也作为文本模式编辑器和GUI编辑器提供。我不使用*Emacs*，因此无法详细阐述其优点。
- en: 'Whatever text editor you obtain, ensure that it offers C language color-coding
    as well as other helpful features like matching pairs: parentheses, brackets,
    and braces. With many editors, it’s possible to customize features, such as writing
    a startup script that properly contorts the editor to your liking. For example,
    I prefer a four-space tab stop in my code, which I can set by configuring the
    .vimrc file in my home directory.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您获得哪种文本编辑器，请确保它提供C语言颜色编码以及其他有用的功能，如匹配对：括号、方括号和大括号。在许多编辑器中，可以自定义功能，例如编写一个启动脚本，将编辑器调整到您喜欢的样子。例如，我更喜欢在代码中使用四个空格的制表符，我可以通过配置主目录中的.vimrc文件来设置它。
- en: 1.3.4 Using a GUI editor
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.4 使用GUI编辑器
- en: 'It may be scandalous, but it’s convenient to use a GUI editor while you work
    at the command prompt. This arrangement is my preferred programming mode: I write
    code in my editor’s glorious graphical window and then build and run in the dreary
    text mode terminal window. This arrangement gives me the power of a GUI editor
    and the ability to examine text mode output at the same time, as illustrated in
    figure 1.7.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这可能有些令人震惊，但在命令提示符下工作时使用GUI编辑器却很方便。这种安排是我的首选编程模式：我在编辑器的辉煌图形窗口中编写代码，然后在阴暗的文本模式终端窗口中构建和运行。这种安排给了我GUI编辑器的力量，同时还能检查文本模式输出，如图1.7所示。
- en: '![01-07](Images/01-07.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![01-07](Images/01-07.png)'
- en: Figure 1.7 A desktop with an editor and a terminal window arranged just so
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7 一个桌面，其中有一个编辑器和终端窗口按照这种方式排列
- en: The only limitation to using a GUI editor is that you must remember to save
    the source code in one window before you build in the other. This reminder isn’t
    as much of an issue when you use a text mode editor running in the terminal, because
    you save when you quit. But when bouncing between two different windows on a desktop,
    it’s easy to forget to save.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 使用GUI编辑器的唯一限制是，在您在另一个窗口构建之前，必须记得在一个窗口中保存源代码。当您在终端中运行文本模式编辑器时，这个提醒并不是一个大问题，因为您在退出时保存。但是，在桌面上的两个不同窗口之间切换时，很容易忘记保存。
- en: 1.3.5 Compiling and running
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.5 编译和运行
- en: The command-line compiler in Linux is gcc, which is the GNU version of the original
    cc compiler from the caveman days of Unix. As I wrote earlier, I recommend using
    the clang compiler instead of gcc. It offers better error reporting and suggestions.
    Use your distro’s package manager to obtain clang or visit [llvm.org](https://llvm.org).
    For the remainder of this chapter, as well as the rest of this book, my assumption
    is that you use clang as your compiler.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: Linux中的命令行编译器是gcc，它是Unix石器时代原始cc编译器的GNU版本。正如我之前所写的，我推荐使用clang编译器而不是gcc。它提供了更好的错误报告和建议。使用您发行版的包管理器获取clang或访问[llvm.org](https://llvm.org)。在本章的剩余部分以及本书的其余部分，我的假设是您使用clang作为您的编译器。
- en: 'To build code, which includes both the compiling and linking steps, use the
    following command:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建代码，包括编译和链接步骤，请使用以下命令：
- en: '[PRE1]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The compiler is named clang. The -Wall switch activates all warnings—always
    a good idea. And source.c represents the source code filename. The command I just
    listed generates a program file, a.out, upon success. Warnings may also yield
    a program file; run it at your own peril. Error messages indicate a serious problem
    you must address; no program file is generated.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 编译器名为clang。-Wall开关激活所有警告——总是一个好主意。source.c代表源代码文件名。我刚才列出的命令在成功时生成一个名为a.out的程序文件。警告也可能产生程序文件；自行运行风险自负。错误消息表明你必须解决的问题的严重问题；不会生成程序文件。
- en: 'If you desire to set an output filename, use the -o switch followed by the
    output filename:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想设置输出文件名，请使用-o选项后跟输出文件名：
- en: '[PRE2]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Upon success, the previous command generates a program file named program.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在成功的情况下，之前的命令生成一个名为program的程序文件。
- en: The compiler sets the program’s executable bit as well as file permissions that
    match those for your account. Once your program is created, it’s ready to run.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 编译器将程序的执行位以及与你的账户匹配的文件权限设置为可执行。一旦你的程序创建完成，就可以运行了。
- en: 'To run the program, you must specify its full pathname. Remember that in Linux,
    unless the program exists in a directory on the search path, a full pathname must
    be specified. For programs in the current directory, use the ./ prefix, like so:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行程序，你必须指定其完整路径名。记住，在Linux中，除非程序存在于搜索路径上的目录中，否则必须指定完整路径名。对于当前目录中的程序，使用./前缀，如下所示：
- en: '[PRE3]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'This command runs the program file a.out, located in the current directory,
    as shown here:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令运行当前目录下名为a.out的程序文件，如下所示：
- en: '[PRE4]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This command runs the program name cypher, again located in the current directory.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令运行当前目录下名为cypher的程序。
- en: The single dot is an abbreviation for the current directory. The slash separates
    the pathname from the filename. Together, the ./ forces the shell to locate and
    run the named program in the current directory. Because the program’s executable
    bit is set, its binary data is loaded into memory and executed.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 单点号是当前目录的缩写。斜杠将路径名与文件名分开。一起，./强制shell在当前目录中查找并运行指定的程序。因为程序的执行位已设置，其二进制数据被加载到内存中并执行。
- en: 1.4 Libraries and compiler options
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.4 库和编译器选项
- en: As someone who aspires to improve the craft, you must be aware of the assortment
    of compiler options—specifically, those that link in libraries. These libraries
    expand a mere mortal C program into realms of greater capabilities.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一位渴望提高技艺的人，你必须意识到各种编译器选项——特别是那些链接库的选项。这些库将一个普通的C程序扩展到具有更大能力的领域。
- en: All C programs link in the standard C library. This library contains the horsepower
    behind such functions as *printf()*. Yet, it’s a common misconception among beginning
    C programmers that it’s the header file that contains the oomph. Nope. The linker
    builds the program by combining object code (created by the compiler) with a C
    language library.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 所有C程序都会链接到标准C库。这个库包含了诸如*printf()*等函数背后的动力。然而，对于初学者C程序员来说，一个常见的误解是包含动力的实际上是头文件。不，链接器通过将编译器创建的目标代码与C语言库相结合来构建程序。
- en: Other libraries are also available, which are linked in addition to the standard
    C library to build complex and interesting programs. These libraries add more
    capabilities to your program, providing access to the internet, graphics, specific
    hardware, and a host of other useful features. Hundreds of libraries are available,
    each of which helps extend your program’s potential. The key to using these libraries
    is to understand how they’re linked in, which also raises the issue of compiler
    options or command-line switches.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些其他库可供使用，除了标准C库外，还可以链接以构建复杂和有趣的程序。这些库为你的程序增加了更多功能，提供访问互联网、图形、特定硬件以及其他许多有用功能。有成百上千的库可供使用，每个库都能帮助扩展你程序的可能性。使用这些库的关键是理解它们是如何链接的，这也引发了编译器选项或命令行开关的问题。
- en: As you may expect, methods of adding options and linking libraries differ between
    the IDE and command prompt approaches to creating programs.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所料，添加选项和链接库的方法在IDE和命令提示符创建程序的方法之间有所不同。
- en: 1.4.1 Linking libraries and setting other options in an IDE
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.1 在IDE中链接库和设置其他选项
- en: One area where using an IDE becomes inconvenient is the task of setting compiler
    options or specifying command-line arguments. Setting the options includes linking
    in a library. You must not only discover where the linking option is hidden but
    also confirm the location of the library on the filesystem and ensure that it’s
    compatible with the compiler.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 IDE 不方便的一个领域是设置编译器选项或指定命令行参数的任务。设置选项包括链接库。你必须不仅发现链接选项隐藏在哪里，还要确认库在文件系统中的位置，并确保它与编译器兼容。
- en: I don’t have the time, and it’s really not this book’s subject, to get into
    specifics for each IDE and how they set command-line arguments for the programs
    you build or how specific options are set, such as linking in an extra compiler.
    After all, I push command-line programming enough—get the hint! But if you insist,
    or you just enjoy seeing how difficult things can be, read on. For brevity’s sake,
    I’ll stick with Code::Blocks because I know it best. Other IDEs have similar options
    and settings. I hope.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 我没有时间，而且这真的不是这本书的主题，去具体说明每个 IDE 以及它们如何为构建的程序设置命令行参数，或者如何设置特定选项，例如链接额外的编译器。毕竟，我已经足够推崇命令行编程了——得到提示了吗！但如果你们坚持，或者只是喜欢看到事情可以有多难，请继续阅读。为了简洁起见，我将坚持使用
    Code::Blocks，因为我对它最熟悉。其他 IDE 也有类似选项和设置。我希望如此。
- en: 'Compiler options in Code::Blocks are found in the Settings dialog box: click
    Settings > Compiler to view the dialog box, shown in figure 1.8\. This is the
    same location where you specify another library to link.'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: Code::Blocks 中的编译器选项可以在设置对话框中找到：点击“设置”>“编译器”来查看对话框，如图 1.8 所示。这是你指定另一个要链接的库的同一位置。
- en: '![01-08](Images/01-08.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![01-08](Images/01-08.png)'
- en: Figure 1.8 Finding useful stuff in the Code::Blocks’ Settings dialog box
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.8 在 Code::Blocks 的设置对话框中查找有用内容
- en: Preset options are listed on the Compiler Flags tab, illustrated in figure 1.8\.
    This tab is a subtab of the Compiler Settings tab, also called out in the figure.
    The command-line switches for each option are shown at the end of the descriptive
    text.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 预设选项列在编译器标志选项卡上，如图 1.8 所示。这个选项卡是编译器设置选项卡的一个子选项卡，如图中也已指出。每个选项的命令行开关显示在描述性文本的末尾。
- en: Use the Other Compiler Options tab to specify any options not found on the Compiler
    Flags tab. I can’t think of any specific options you might consider adding, but
    this tab is where they go.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 使用“其他编译器选项”选项卡来指定在编译器标志选项卡上找不到的任何选项。我想不出任何具体的选项你可能想添加，但这个选项卡就是它们所在的地方。
- en: Click the Linker Settings tab (refer to figure 1.8) to add libraries. Click
    the Add button to browse for a library to link in. You must know the folder in
    which the library file dwells. Unlike command-line compiling, default directories
    for library files aren’t searched automatically. Ditto for header files, which
    are often included in the same directory tree as the libraries.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“链接器设置”选项卡（参见图 1.8）来添加库。点击“添加”按钮来浏览要链接的库。你必须知道库文件所在的文件夹。与命令行编译不同，库文件的默认目录不会自动搜索。同样，头文件文件通常与库文件位于同一目录树中。
- en: To specify command-line arguments for your programs in Code::Blocks, use the
    Project > Set Programs’ Arguments command. The problem here is that the apostrophe
    is misplaced on the menu; it should read Program’s. I mention this because my
    editor will query me otherwise.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Code::Blocks 中指定程序的命令行参数，请使用“项目”>“设置程序参数”命令。这里的问题是菜单中的撇号位置不正确；它应该读作“程序的”。我之所以提到这一点，是因为我的编辑器否则会询问我。
- en: After choosing the grammatically incorrect Set Programs’ Arguments command,
    you see the Select Target dialog box. Use the Program Arguments text field to
    specify required arguments for the programs you run in the IDE. The limitation
    here is that your command-line program must be built as a project in Code::Blocks.
    Otherwise, the option to set command-line arguments is unavailable.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择了语法错误的“设置程序参数”命令后，你会看到“选择目标”对话框。使用“程序参数”文本字段来指定在 IDE 中运行的程序所需的参数。这里的限制是，你的命令行程序必须在
    Code::Blocks 中作为项目构建。否则，设置命令行参数的选项不可用。
- en: Please be aware that the tiny programs presented in this book are designed to
    run at the command prompt, which makes it weird to set arguments in an IDE. Because
    the IDE creates a program, you can always navigate to the program folder to run
    the program directly at a command prompt. If possible, discover whether your IDE
    allows you quick access to the folder containing the program executable. Or just
    surrender to the inevitable ease and self-fulfilling joy of programming in a terminal
    window.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，本书中展示的小程序是为在命令提示符下运行而设计的，这在 IDE 中设置参数时显得有些奇怪。因为 IDE 创建了一个程序，你可以直接导航到程序文件夹，在命令提示符下直接运行程序。如果可能的话，发现你的
    IDE 是否允许你快速访问包含程序可执行文件的文件夹。或者，就屈服于在终端窗口中编程的不可避免地简单和自我实现的快乐吧。
- en: 1.4.2 Using command-line compiler options
  id: totrans-170
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.2 使用命令行编译器选项
- en: 'It’s easy and obvious to type compiler options and program arguments at a command
    prompt in a terminal window: no extra settings, menus, mouse clicks, or other
    options to hunt for. Again, these are many of the reasons programming at the command
    prompt makes sense for the programs presented in this book, as well as for lots
    of tiny C projects.'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在终端窗口的命令提示符下键入编译器选项和程序参数既简单又明显：没有额外的设置、菜单、鼠标点击或其他选项需要寻找。再次强调，这些是本书中展示的程序以及许多小型
    C 项目在命令提示符下编程的理由之一。
- en: 'Of the slate of command-line options, one worthy of note is -l (little L).
    This switch is used to link in a library. The -l is followed immediately by the
    library name, as in:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在一系列命令行选项中，值得注意的一个是 -l（小写的 L）。此开关用于链接库。-l 后面直接跟库的名称，例如：
- en: '[PRE5]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Here, the libcurl library, named curl, is linked along with the standard C library
    to build a program based on the weather.c source code file. (You don’t need to
    specify the standard C library, because it’s linked in by default.)
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，名为 curl 的 libcurl 库与标准 C 库一起链接，基于 weather.c 源代码文件构建程序。（你不需要指定标准 C 库，因为它默认已经链接。）
- en: 'To specify an output filename, use the -o switch as covered earlier in this
    chapter:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 要指定输出文件名，使用前面在本章中提到的 -o 开关：
- en: '[PRE6]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'With some compilers, option order is relevant. If you see a slew of linker
    errors when using the -l switch, change the argument order to specify -l last:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些编译器中，选项顺序很重要。如果你在使用 -l 开关时看到一连串的链接错误，请改变参数顺序，将 -l 放在最后指定：
- en: '[PRE7]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'At the command line, the compiler searches default directories for locations
    of library files as well as header files. In Unix and Linux—but not OS/X—these
    locations follow:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在命令行中，编译器会搜索默认目录以查找库文件和头文件的位置。在 Unix 和 Linux 中（但不是 OS/X），这些位置如下：
- en: 'Header files: /usr/include'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 头文件：/usr/include
- en: 'Library files: /usr/lib'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图书馆文件：/usr/lib
- en: 'Custom library and header files you install can be found at these locations:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 你安装的自定义库和头文件可以在这这些位置找到：
- en: 'Header files: /usr/local/include'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 头文件：/usr/local/include
- en: 'Library files: /usr/local/lib'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图书馆文件：/usr/local/lib
- en: The compiler automatically searches these directories for header files and libraries.
    If the library file exists elsewhere, you specify its pathname after the -l switch.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 编译器会自动搜索这些目录以查找头文件和库。如果库文件存在于其他位置，你可以在 -l 开关之后指定其路径名。
- en: 'No toil is involved in specifying command-line arguments for your programs.
    Unlike an IDE, the arguments are typed directly after the program name:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 为你的程序指定命令行参数并不涉及任何麻烦。与 IDE 不同，参数直接在程序名称后键入：
- en: '[PRE8]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Here, the weather program runs in the current directory with a single argument,
    KSEA. Simple. Easy. I shan’t use further superlatives.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，天气程序在当前目录下以单个参数 KSEA 运行。简单。容易。我不会再使用更高级的形容词。
- en: 1.5 Quiz
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.5 测验
- en: I decided against adding a quiz.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 我决定不添加测验。
