- en: 7 Segmenting customers with advanced metrics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7 使用高级度量标准细分客户
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Metrics made from ratios of other metrics
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由其他度量标准的比率构成的度量标准
- en: Metrics that measure behavior as a percentage of a total
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将行为作为总量的百分比来衡量的度量标准
- en: Metrics that show how behavior changes over time
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示行为随时间变化的度量标准
- en: Metric conversions from long periods to short periods, and vice versa
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从长周期到短周期的公制转换，反之亦然
- en: Metrics for multiuser accounts
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多用户账户的度量标准
- en: Choice of ratios to use
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择要使用的比率
- en: You’ve learned a lot about understanding churn with metrics derived from events
    and subscriptions. You’ve seen that simple behavioral measurements can be powerful
    for segmenting customers who may be at risk for churn and who have different levels
    of engagement. But you’ve also seen some of the limitations of simple behavioral
    metrics.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经通过事件和订阅衍生出的度量标准了解了大量关于理解流失的知识。你已经看到，简单的行为测量对于细分可能面临流失风险且参与度水平不同的客户非常有用。但你同时也看到了简单行为度量标准的一些局限性。
- en: Many simple metrics are correlated, and correlations arise because customers
    who have a lot of product-related events tend to have a lot of other events as
    well. Correlations make it harder to tell which types of behaviors are most important.
    The problem is deeper than a lack of refinement. In this chapter, you’ll learn
    that correlation between metrics can make you misread the influence of a behavior.
    A behavior that’s negative (in the sense that it takes utility and enjoyment away
    from customers) can appear to enhance engagement when it’s correlated with other
    behaviors that provide utility and enjoyment.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 许多简单的度量标准是相关的，相关性产生的原因是拥有大量产品相关事件的客户往往也有许多其他事件。相关性使得难以判断哪些类型的行为最重要。这个问题比缺乏细化更深。在本章中，你将了解到度量标准之间的相关性可能会让你误解行为的影响。一个具有负面性质（在从客户那里夺走效用和乐趣的意义上）的行为，当它与提供效用和乐趣的其他行为相关联时，可能会看起来增强了参与度。
- en: Also, you may have been wondering about relationships among behaviors. Many
    common hypotheses about churn ask whether combinations of behaviors have an effect
    that is greater than the sum of their parts. You may wonder, for example, whether
    it’s better for users of a document-editing and file-sharing app to create a lot
    of documents even if they don’t share, or whether it’s better for users to share
    everything they create, even if they don’t create a lot. Another question not
    yet addressed is whether changes in behavior over time tell you anything. Is a
    surge in use a sign that a customer is getting more engaged, for example, or having
    one last binge before they churn? If you think that the simple behavioral metrics
    you learned in chapter 3 cannot answer these questions, you’re right.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你可能对行为之间的关系有所好奇。许多关于流失的常见假设都询问行为组合是否具有大于其部分之和的效果。例如，你可能想知道，对于文档编辑和文件共享应用程序的用户来说，即使他们不分享，创建大量文档是否更好，或者是否更好的做法是用户分享他们所创建的一切，即使他们没有创建很多。另一个尚未解决的问题是在时间上行为的变化是否告诉你任何信息。例如，使用激增是否表明客户正在变得更加投入，或者在他们流失之前进行最后一次狂欢的迹象？如果你认为你在第3章中学到的简单行为度量标准无法回答这些问题，你是正确的。
- en: In terms of the themes outlined at the start of the book, this chapter relates
    to all the areas shown in figure 7.1\. Behavioral metrics and churn analysis are
    presented together, which can generate ideas about segmenting your customers for
    churn-reduction strategies.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 从本书开头概述的主题来看，本章与图7.1中显示的所有领域相关。行为度量标准和流失分析一起呈现，这可以产生关于为减少流失策略对客户进行细分的思想。
- en: In this chapter, you are going to create a type of metric that allows you to
    understand complex combinations of behaviors and see what they tell you about
    churn and retention of your customers. I call this metric a ratio metric.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将创建一种度量标准，它允许你理解复杂的行为组合，并了解它们对你客户流失和保留情况所传达的信息。我称这种度量标准为比率度量标准。
- en: DEFINITION A ratio metric is any customer metric calculated by taking the ratio
    of one metric to another; equivalently, one metric is divided by the other.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 定义 比率度量标准是指通过将一个度量标准与另一个度量标准的比率计算出的任何客户度量标准；等价地，一个度量标准被另一个度量标准除。
- en: 'Here’s how this chapter is organized:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的组织结构如下：
- en: Section 7.1 teaches you the main ratio metric technique and includes several
    case studies to motivate their use and illustrate typical results.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 7.1节教你主要的比率度量标准技术，并包括几个案例研究来激发其使用并展示典型结果。
- en: Section 7.2 teaches you how to make metrics that are ratios from a part to a
    whole, which makes the ratio a percentage of a total.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7.2节教您如何制作从部分到整体的比率指标，这使得比率成为总体的百分比。
- en: Section 7.3 covers ratios between one metric at two different points in time,
    which measures change in behavior, typically as a percentage. This section also
    covers a metric for the amount of time a customer has been inactive.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7.3节涵盖了两个不同时间点的单一指标的比率，这衡量了行为的变化，通常以百分比表示。本节还涵盖了一个衡量客户不活跃时间量的指标。
- en: 'Section 7.4 changes gears to non-ratio advanced metrics: this section covers
    scaling the metric-measurement time period just like a churn rate. That allows
    you to estimate metrics quickly, using a shorter measurement window for new customers
    but still makes better estimates for seasoned users.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7.4节转向非比率高级指标：本节涵盖了像流失率一样扩展指标测量时间周期。这允许您快速估计指标，使用较短的测量窗口为新客户进行估计，但仍为经验丰富的用户提供更好的估计。
- en: Section 7.5 teaches you how to make measurements for multiuser systems (when
    multiple individuals share one subscription or account with a product).
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7.5节教您如何对多用户系统进行测量（当多个个人共享一个产品的一个订阅或账户时）。
- en: '![](../Images/7-01.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-01.png)'
- en: Figure 7.1 Themes in chapter 7 include behavioral metrics, churn analysis, and
    subscriber segments.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.1 第7章的主题包括行为指标、流失分析以及订阅者细分。
- en: 7.1 Ratio metrics
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.1 比率指标
- en: 'You’re about to learn the single most important technique in the book (if I
    had to pick only one): using metrics that are ratios of other behavioral measurements.
    These metrics provide powerful, easy-to-understand explanations of customer behavior.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 您即将学习本书中最重要的单一技术（如果我只选一个的话）：使用其他行为测量的比率指标。这些指标提供了强大且易于理解的客户行为解释。
- en: 7.1.1 When to use ratio metrics and why
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.1 何时使用比率指标及其原因
- en: Figure 7.2 provides a case study illustrating when you need to look more closely
    at the relationship between two metrics. The figure reproduces some cohort analyses
    from chapter 5 for Versature, a provider of integrated cloud communication services.
    In the figure, churn is somewhat lower for customers who pay higher monthly fees
    for their service. This figure probably defies your intuition that paying more
    is a bad thing for customer engagement. At the same time, figure 7.2 shows that
    paying more is highly correlated with making more calls—something you learned
    to analyze in chapter 6\. And, of course, customers who make a lot of calls churn
    less than customers who don’t, which is a stronger relationship with churn than
    monthly recurring revenue (MRR).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.2提供了一个案例研究，说明了何时需要更仔细地观察两个指标之间的关系。该图重现了第5章中Versature（一家提供集成云通信服务的提供商）的一些群体分析。在图中，支付更高月费的客户流失率相对较低。这个图可能违背了您认为支付更多对客户参与度是坏事的感觉。同时，图7.2显示，支付更多与通话次数的增加高度相关——这是您在第6章中学到的分析方法。当然，通话次数多的客户流失率低于通话次数少的客户，这与月度经常性收入（MRR）相比，与流失率的关系更紧密。
- en: '![](../Images/7-02.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-02.png)'
- en: Figure 7.2 Case study that motivates a ratio metric
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.2 比率指标的案例研究
- en: 'The reason paying more (higher MRR) looks like it reduces churn is that, typically,
    customers who pay more also make more calls—enough to justify paying the higher
    MRR. But what about a customer who pays more but doesn’t make enough calls to
    justify the higher MRR? Those customers probably are most at risk for churn, but
    they don’t show up in your metrics that look at MRR and calls separately. To find
    the customers who pay more but don’t make a lot of calls (and see whether they
    churn at a higher rate), you need to create a third metric that captures the relationship
    between the first two: the ratio of the first two metrics.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 支付更多（更高的MRR）看起来像是在减少流失，原因是，通常情况下，支付更多的客户也会进行更多的通话——足以证明支付更高MRR的合理性。但是，对于支付更多但通话不足以证明更高MRR合理性的客户怎么办？这些客户可能面临的最大流失风险，但在单独查看MRR和通话的指标中并未显现。为了找到支付更多但通话不多（并查看他们是否以更高的比率流失）的客户，您需要创建一个第三项指标，以捕捉前两个指标之间的关系：前两个指标的比率。
- en: DEFINITION A ratio metric is a metric that is made by taking the ratio of the
    values of two other metrics. Each value of the new metric is a value of one metric
    divided by the value of another metric.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 定义：比率指标是通过取两个其他指标值的比率而制作的指标。新指标中的每个值都是一项指标的值除以另一项指标的值。
- en: In the following sections, I’ll explain the details of how you calculate such
    a metric and why, and try to persuade you that this way is the best way. For now,
    let’s start with the results.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我将解释如何计算此类度量以及为什么，并试图说服你这是最好的方法。现在，让我们从结果开始。
- en: If you take a metric that is the amount a customer pays (MRR) and divide it
    by the amount of calls they make, the result is the average cost per call —a measure
    of the unit cost the customers pay, similar to price per gallon of gasoline or
    liter of milk. The difference is that the ratio of MRR to calls is an effective
    recurring unit cost, not a contractual one, because the product is not priced
    and packaged for customers to pay by the call.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你取一个客户支付的金额（MRR）并将其除以他们打的电话数量，结果是平均通话成本——这是衡量客户支付的单位成本的一种度量，类似于汽油或牛奶的每加仑或每升价格。不同之处在于，MRR与通话的比率是一个有效的重复单元成本，而不是合同成本，因为产品不是按通话计费和包装给客户的。
- en: '![](../Images/7-03.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-03.png)'
- en: Figure 7.3 Case study churn cohort analysis of cost per call for Versature
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.3 Versature的按通话成本流失群体分析案例研究
- en: Figure 7.3 shows the churn cohort analysis performed for Versature’s customers,
    using MRR per call as the metric. This metric shows a strong relationship with
    increasing churn following increasing values of the metric. It’s true that customers
    who pay more churn more, but you have to measure the effective unit cost with
    a ratio metric to see that result. Figure 7.3 also shows the correlations of the
    MRR per call metric with the MRR and call metrics that were used to create it.
    MRR per call is correlated weakly (negatively) with calls and is practically uncorrelated
    with MRR. All these facts make MRR per call a great metric for understanding customer
    engagement and churn. In section 7.1.2, you’ll learn how to calculate a ratio
    metric like this one and practice doing so with the churn simulation data you’ve
    used throughout the book.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.3显示了为Versature客户执行的按通话成本流失群体分析，使用MRR每通话作为度量。这个度量显示了随着度量值的增加，流失率与度量值之间有很强的关系。确实，支付更多的客户流失得更多，但你需要用比率度量来衡量这个结果。图7.3还显示了MRR每通话度量与创建它的MRR和通话度量之间的相关性。MRR每通话与通话的相关性较弱（负相关），与MRR实际上没有相关性。所有这些事实使MRR每通话成为理解客户参与和流失的一个很好的度量。在第7.1.2节中，你将学习如何计算这样的比率度量，并使用你在整本书中使用的流失模拟数据来练习这样做。
- en: TAKEAWAY An effective recurring unit cost metric is created from the ratio of
    MRR to some outcome achieved by the customers. A recurring unit cost metric usually
    shows increasing churn with increasing unit cost. By contrast, a simple recurring
    cost metric (MRR) usually shows decreasing churn with increasing cost due to correlation
    with the utility or enjoyment derived from using the product.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '**要点**：从MRR与客户实现的一些成果的比率中创建了一个有效的重复单元成本度量。重复单元成本度量通常显示随着单元成本的提高而增加的流失率。相比之下，简单的重复成本度量（MRR）通常显示随着成本的提高而减少的流失率，这是由于与使用产品获得的效用或享受的相关性。'
- en: Figure 7.4 shows a situation in the social network simulation case study similar
    to the ones in figures 7.2 and 7.3\. You expect one metric—ads viewed per month—to
    be bad because most people don’t like viewing ads. But when you run a churn cohort
    analysis, you find that the more ads people watch, the less they churn. At the
    same time, you find that viewing ads is correlated with making posts, and customers
    who make a lot of posts churn at a low rate.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.4显示了社交网络模拟案例研究中的一个情况，类似于图7.2和图7.3中的情况。你预计一个度量——每月查看的广告数量——是糟糕的，因为大多数人不喜欢看广告。但是当你运行流失群体分析时，你会发现人们看的广告越多，流失得越少。同时，你会发现查看广告与发帖相关，发帖多的客户流失率低。
- en: '![](../Images/7-04.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-04.png)'
- en: Figure 7.4 Simulation case study scenario motivating a ratio metric
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.4 模拟案例研究场景激励比率度量
- en: Before going on to the next section, you should reproduce the results in figure
    7.4, using the simulated churn data and the code in this book’s GitHub repository
    ([https:// GitHub.com/carl24k/fight-churn](https://GitHub.com/carl24k/fight-churn)).
    This task is the first step in the code exercises for this chapter. By reproducing
    the plots in figure 7.4, you will confirm that your data and metrics are ready
    for what comes next.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在进入下一节之前，你应该使用模拟的流失数据以及本书GitHub仓库中的代码（[https://GitHub.com/carl24k/fight-churn](https://GitHub.com/carl24k/fight-churn)）重现图7.4中的结果。这项任务是本章代码练习的第一步。通过重现图7.4中的图表，你可以确认你的数据和度量已经准备好迎接接下来的内容。
- en: 'You should have calculated the metrics for ads viewed per month and posts per
    month back in chapter 3\. If you did not calculate the metrics then, after setting
    up your environment as explained in the repository’s README file, you can calculate
    all the metrics with the Python wrapper program by using the following command:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该在第3章中计算出每月查看的广告和每月发布的帖子度量。如果你当时没有计算这些度量，在按照存储库的README文件中解释的设置好环境之后，你可以使用以下命令通过Python包装程序计算所有度量：
- en: '[PRE0]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If you ran the listing code in chapter 5, you should already have created a
    cohort analysis of posts per month like the one shown in figure 7.4\. If you did
    not, you can do it now by running the Python wrapper program with the parameters
    `—chapter` `5` `—listing` `1`. To create a new cohort analysis for ads viewed
    per month, you can run another version of listing 5.1 by adding the argument `—version`
    `3`. All together, the parameters to add are `—chapter` `5` `—listing` `1` `—version`
    `3`.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你运行了第5章中的列表代码，你应该已经创建了一个类似于图7.4所示的每月帖子群体分析。如果没有，你现在可以通过使用参数`—chapter` `5`
    `—listing` `1`运行Python包装程序来完成。要创建一个针对每月查看的广告的新群体分析，你可以通过添加参数`—version` `3`运行列表5.1的另一个版本。总的来说，需要添加的参数是`—chapter`
    `5` `—listing` `1` `—version` `3`。
- en: The same goes for recreating the metric pair scatterplot in chapter 6 (listing
    6.1). You can rerun the Python wrapper program with the parameters `—chapter`
    `6` `—listing` `1` `—version` `2` to recreate a scatterplot like the one in figure
    7.4.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 与第6章（列表6.1）中重新创建度量对散点图相同。你可以使用参数`—chapter` `6` `—listing` `1` `—version` `2`重新运行Python包装程序，以重新创建类似于图7.4中的散点图。
- en: 7.1.2 How to calculate ratio metrics
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.2 如何计算比率度量
- en: 'Now that you know what a ratio metric is, it’s time to get into the details
    of how to calculate it. The calculation of a ratio metric is illustrated with
    a little sample data (figure 7.5). When I said that you divide one metric by the
    other, I meant it literally. You start with two metrics that were already saved
    in the database. To calculate the ratio metric, you match the two metrics, account
    by account and date by date; it is assumed that you calculated and saved the other
    two metrics at all the same dates, as demonstrated in chapter 3\. For every account
    and date, the ratio is the value of one metric for that date and account divided
    by the other metric for the same date and account. There’s not much to the process,
    although you need to watch out for the following two “gotchas”:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经知道了比率度量的定义，是时候深入了解如何计算它了。比率度量的计算通过一小部分示例数据（图7.5）进行说明。当我提到你将一个度量除以另一个度量时，我是字面意思。你从已经保存在数据库中的两个度量开始。为了计算比率度量，你需要匹配这两个度量，按账户和日期进行匹配；假设你已经在所有相同的日期计算并保存了其他两个度量，如第3章所示。对于每个账户和日期，比率是那个日期和账户的度量值除以相同日期和账户的另一个度量值。这个过程并不复杂，尽管你需要注意以下两个“陷阱”：
- en: The denominator metric (the metric you are dividing by) must be greater than
    zero.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分母度量（你正在除以的度量）必须大于零。
- en: The numerator metric can be zero but should not be negative. We have not looked
    at metrics that can be negative so far, but you’ll see some in section 7.3\. You
    might already have metrics that can be negative if you make metrics from event
    properties in your own data, like sums of currency amounts that can be both positive
    or negative.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分子度量可以是零，但不应该是负数。到目前为止，我们还没有查看可以取负值的度量，但在第7.3节中你会看到一些。如果你从自己的数据中创建度量，比如可以同时为正或负的货币金额之和，你可能已经有一些可以取负值的度量。
- en: '![](../Images/7-05.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-05.png)'
- en: Figure 7.5 Mechanics of calculating a ratio metric
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.5 比率度量计算机制
- en: 'If the metric in the denominator of the ratio is zero for an account, the ratio
    is undefined. You’ll get an error if you try to divide by zero in any program
    language. And if either metric can be negative sometimes, the ratio is mathematically
    okay, but it lacks the usual meaning of a ratio of two other measurements: a unit
    cost or a rate of an event relative to another event. Otherwise, calculating ratios
    is pretty straightforward.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果比率分母中的度量对一个账户为零，则比率未定义。如果你在任何程序语言中尝试除以零，将会得到错误。而且如果任一度量有时可能是负数，比率在数学上是可行的，但它缺乏两个其他测量值比率的通常意义：一个单位成本或一个事件相对于另一个事件的比率。否则，计算比率相当直接。
- en: 'Listing 7.1 provides a short SQL program that calculates a ratio metric, and
    figure 7.6 illustrates a few lines of the output. The short SQL program shown
    in listing 7.1 also returns the numerator and denominator of the metric for illustrative
    purposes. Otherwise, the calculation strategy in listing 7.1 closely mirrors figure
    7.5: two common table expressions (CTEs) select the results for the two metrics
    that are going to form the ratio. The final `SELECT` statement is a `LEFT` `OUTER`
    `JOIN` with the denominator in the left position. As a result, the ratio metric
    will be calculated for any account on a date when the denominator is available.
    Let’s look at the figure first.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.1 提供了一个简短的 SQL 程序，用于计算比率指标，图 7.6 展示了输出的一小部分。列表 7.1 中显示的简短 SQL 程序还返回了指标的分子和分母，以供说明。否则，列表
    7.1 中的计算策略与图 7.5 非常相似：两个常见的表表达式（CTEs）选择将要形成比率的两个指标的值。最后的 `SELECT` 语句是一个左外连接（LEFT
    OUTER JOIN），其中分母位于左侧。因此，当分母可用时，将计算任何账户的比率指标。让我们先看看图。
- en: '![](../Images/7-06.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-06.png)'
- en: Figure 7.6 Output of running listing 7.1
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.6 运行列表 7.1 的输出
- en: The SQL uses a `CASE` statement as part of the calculation to guard against
    a zero metric in the denominator. If you use count metrics as in chapter 3, you
    don’t store zeros, but it’s a best practice to guard against dividing by zero
    in case you work with metrics imported from other systems. When you use a `CASE`
    statement, a zero denominator metric produces a zero ratio. That result would
    be the same as the result of a zero numerator, which is mathematically fine and
    produces zero. That said, if you didn’t store the zeros for the numerator metric,
    you won’t produce the ratio, but you’ll still fill the result with zero in your
    churn analysis dataset for any account that doesn’t get the ratio (as described
    in chapter 4).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: SQL 使用 `CASE` 语句作为计算的一部分，以防止分母中的零指标。如果您使用第 3 章中提到的计数指标，您不会存储零，但防止除以零是最佳实践，以防您处理从其他系统导入的指标。当您使用
    `CASE` 语句时，零分母指标会产生零比率。该结果将与零分子产生的结果相同，这在数学上是正确的，并产生零。话虽如此，如果您没有存储分子指标的零，您将不会产生比率，但您仍然会在您的流失分析数据集中为任何未获得比率的账户填充零（如第
    4 章所述）。
- en: NOTE Accounts that are missing the values or have zeros for either metric in
    a ratio get zeros for the metric in the churn analysis dataset.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：缺失值或比率的任一指标为零的账户在流失分析数据集中将获得零指标。
- en: 'You should run listing 7.1 and confirm that your result is similar to figure
    7.6\. If you are using the wrapper program to run the listings, use the parameters
    `—chapter` `7` `—listing` `1` like so:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该运行列表 7.1 并确认您的结果与图 7.6 类似。如果您使用包装程序运行列表，请使用参数 `—chapter` `7` `—listing` `1`
    如此操作：
- en: '[PRE1]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Listing 7.1 SQL ratio metric calculation
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.1 SQL 比率指标计算
- en: '[PRE2]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: ① Picks the metric for the numerator
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: ① 选择分子的指标
- en: ② Picks the metric for the denominator
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ② 选择分母的指标
- en: ③ Matches the date range for the numerator and denominator
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 匹配分子和分母的日期范围
- en: ④ Selects the numerator and denominator value for illustration
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 选择用于说明的分子和分母值
- en: ⑤ The ratio is undefined when the denominator is not positive.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ⑤ 当分母不为正数时，比率是未定义的。
- en: ⑥ Calculates the ratio; coalesces for zero null numerator
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ⑥ 计算比率；对于零分子进行合并
- en: ⑦ Fills with zeros when the denominator is missing
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ⑦ 当分母缺失时填充零
- en: ⑧ LEFT OUTER JOIN makes a result whenever the denominator is available.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ⑧ 左外连接（LEFT OUTER JOIN）在分母可用时总是产生结果。
- en: 'You also need to save the result to the database to continue with the examples,
    but because listing 7.1 selects the numerator and denominator of the metric for
    illustrative purposes, it’s not suitable for inserting a metric into the database.
    A prewritten SQL statement in the listing framework does this: insert_7_1_ratio_metric.sql
    (which is the same as listing_7_1_ratio_metric.sql except for insert rather than
    listing in the SQL filename). To run the version of listing 7.1 designed for inserting
    the result, add the `—insert` flag to the arguments for the script that runs the
    listing. If you are using the Python wrapper program to run the listings, the
    command follows:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 您还需要将结果保存到数据库中以便继续示例，但由于列表 7.1 选择指标的分母和分子以供说明，因此它不适合将指标插入到数据库中。列表框架中的预写 SQL
    语句执行此操作：insert_7_1_ratio_metric.sql（与 listing_7_1_ratio_metric.sql 相同，只是在 SQL
    文件名中使用 insert 而不是 listing）。要运行为插入结果设计的列表 7.1 版本，请向运行列表的脚本的参数中添加 `—insert` 标志。如果您使用
    Python 包装程序运行列表，则命令如下：
- en: '[PRE3]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'That insert shows you the SQL it uses, but it won’t print any result. You should
    make your own `SELECT` statement to verify the result or, better, run the metric
    quality assurance query from chapter 3 (listing 3.6) to look at a summary of the
    result over time. This pattern of learning and then inserting metrics into your
    database will repeat throughout the chapter:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 该插入显示了它使用的 SQL，但它不会打印任何结果。您应该创建自己的 `SELECT` 语句来验证结果，或者更好的是，运行第 3 章中的度量标准质量保证查询（列表
    3.6）以查看结果的时间总结。这种学习和然后将度量标准插入数据库的模式将在本章中重复：
- en: The listings shown in the book include extra columns for illustrative purposes.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 书中展示的列表包括额外的列以供说明之用。
- en: If the metric needs to be saved in your database to follow the examples, a second
    version of the listing in the repository performs the insert. You run it by adding
    the `—insert` flag to the wrapper script command.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果需要将度量标准保存到数据库中以遵循示例，则存储库中的列表的第二个版本执行插入操作。您可以通过在包装脚本命令中添加 `—insert` 标志来运行它。
- en: The illustrative version of the listing has a path like listings/chap7/listing_7_,
    and the version of the listing written to insert into the database has a path
    like listings/chap7/insert_7_.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列表的示例版本路径类似于 listings/chap7/listing_7_，而写入数据库的列表版本路径类似于 listings/chap7/insert_7_。
- en: After saving the new ads per post metric to the database, you should analyze
    it for correlations and the relationship to churn. Remember that to run the cohort
    analysis, you first need to reexport your churn dataset with SQL. The code that
    exports the dataset with your new metric (and all the other metrics you create
    in this chapter) is shown in listing 7.2, which is an update of listing 4.5.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 将新的每篇帖子广告度量标准保存到数据库后，您应该分析其相关性及其与流失率的关系。记住，要运行队列分析，您首先需要使用 SQL 重新导出您的流失率数据集。导出包含您新度量标准（以及您在本章中创建的所有其他度量标准）的数据集的代码显示在列表
    7.2 中，这是列表 4.5 的更新版本。
- en: You should run listing 7.2 to save a new dataset that allows you to run the
    cohort analysis on the new metric ads per post. Review chapter 4, and specifically
    listing 4.5, if you don’t remember how listing 7.2 works; it is exactly the same.
    Don’t worry that you haven’t yet created all the metrics in listing 7.2; you will
    create them throughout the chapter. For now, any metric you didn’t create will
    be filled with zeros in the dataset.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该运行列表 7.2 以保存一个新的数据集，该数据集允许您在新指标每篇帖子广告上运行队列分析。如果您不记得列表 7.2 的工作方式，请回顾第 4 章，特别是列表
    4.5；它们是完全相同的。不用担心您还没有创建列表 7.2 中的所有度量标准；您将在本章中创建它们。目前，您未创建的任何度量标准将在数据集中用零填充。
- en: Listing 7.2 Exporting the dataset with chapter 7 metrics
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.2 导出包含第 7 章度量的数据集
- en: '[PRE4]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: ① This listing starts the same as listing 4.5.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: ① 此列表与列表 4.5 的起始相同。
- en: ② New metrics begin here.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ② 新度量标准从这里开始。
- en: After creating the new version of the dataset, you can run a cohort analysis
    to see how it relates to churn. The listing version is `—chapter` `5` `—listing`
    `1` `—version` `5`. Run the Python wrapper program with those arguments to create
    the cohort plot.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新版本的数据集后，您可以运行队列分析以查看其与流失率的关系。列表版本是 `—chapter` `5` `—listing` `1` `—version`
    `5`。使用这些参数运行 Python 包装程序以创建队列图。
- en: 'Figure 7.7 shows the typical result of these analyses: a higher ratio of ads
    per post is associated with higher churn, not higher retention. That result confirms
    the intuition that seeing more ads exacts a price in terms of customer satisfaction
    (or, rather, confirms that the simulation was crafted so that more ad viewing
    reduces satisfaction). But to see the negative effect of seeing more ads, you
    have to disentangle the metric from the correlation with other behaviors that
    lead to customer satisfaction. Figure 7.7 also shows the correlations between
    the new adview_per_post metric and the original ads per month and post per month.
    Ads per post has a weak positive correlation with viewing ads and a moderate negative
    correlation with viewing posts. (You can check by rerunning listing 6.2 on your
    new dataset.)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.7 显示了这些分析典型的结果：每篇帖子广告的比例越高，与流失率相关，而不是与保留率相关。这一结果证实了直觉，即看到更多的广告在客户满意度方面付出代价（或者更确切地说，证实了模拟被设计得更多广告观看会降低满意度）。但要看到看到更多广告的负面影响，您必须将度量标准从与其他导致客户满意度的行为的相关性中分离出来。图
    7.7 还显示了新的 adview_per_post 度量标准与原始的每月广告数和每月帖子数之间的相关性。每篇帖子的广告数与观看广告有弱正相关，与观看帖子有中度的负相关。（您可以通过在您的新数据集上重新运行列表
    6.2 来检查。）
- en: '![](../Images/7-07.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图 7.7](../Images/7-07.png)'
- en: Figure 7.7 Simulation case study of the metric adview_per_post, churn, and correlation
    analysis
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.7关于指标adview_per_post、流失和相关性分析的模拟案例研究
- en: The correlations in figure 7.7 are typical for many ratio metrics. It is natural
    for the ratio to have positive correlation with the numerator metric because the
    ratio tends to be larger when the numerator is larger. It is also normal for the
    ratio to have negative correlation with the denominator metric because all else
    being equal, a larger denominator leads to a lower ratio. The precise results
    depend on the nature of the relationship between the two metrics themselves, however.
    If you look at real case studies, you’ll find results that vary widely from the
    typical scenarios shown in figure 7.3 and figure 7.7.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.7中的相关性对于许多比率指标来说是典型的。比率与分子指标呈正相关是自然的，因为当分子较大时，比率往往较大。比率与分母指标呈负相关也是正常的，因为所有其他条件相同，较大的分母会导致较低的比率。然而，精确的结果取决于两个指标之间关系的本质。如果您查看真实的案例研究，您会发现结果与图7.3和图7.7中显示的典型场景有很大的不同。
- en: 7.1.3 Ratio metric case study examples
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.3 比率指标案例研究示例
- en: Ratio metrics are useful not only when you have a metric that you think causes
    disengagement but also when you have two behaviors whose interaction is relevant
    to customer engagement and churn. By interaction, I mean a situation in which
    the relationship between the two metrics matters—not whether the two metrics are
    big or small, but which one is bigger or smaller than the other. This section
    contains a few more examples from case studies to show this interaction.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 比率指标不仅在您认为会导致脱节的指标存在时有用，而且在您有两个行为交互与客户参与和流失相关时也很有用。通过交互，我指的是两个指标之间的关系很重要的情况——不是两个指标的大小，而是哪一个比另一个大或小。本节包含一些来自案例研究的更多示例，以展示这种交互。
- en: One scenario in which the ratio of two metrics matters deals with efficiency.
    Many behaviors have a relationship in which one event leads to the other in a
    process, and the more events that occur at the end of the process, the better.
    Figure 7.8 shows an example for the SaaS service Broadly, which helps businesses
    manage their online presence. Broadly keeps track of both customers and transactions,
    and transactions always follow a customer signup, so it’s natural that numbers
    of customers and numbers of transactions are correlated (at 0.93). A high ratio
    of transactions per customer is usually good for a business; it can also be relevant
    for engagement and success on the Broadly platform. Figure 7.8 shows that businesses
    on Broadly with above-average transactions per customer (score greater than 0.0)
    churn at a significantly lower rate than businesses with below-average transactions
    per customer. Such businesses are probably more successful, so they are less likely
    to be more engaged with Broadly, leading to higher customer engagement and lower
    churn.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 两个指标之比在某个场景中很重要，这个场景涉及效率。许多行为之间存在一种关系，其中一个事件在过程中导致另一个事件，并且过程结束时发生的事件越多，效果越好。图7.8展示了SaaS服务Broadly的一个例子，该服务帮助企业管理其在线存在。Broadly跟踪客户和交易，交易总是跟随客户注册，因此客户数量和交易数量之间的相关性（0.93）是自然的。每个客户的交易比率高通常对业务有利；它也可能与Broadly平台上的参与和成功相关。图7.8显示，在Broadly上，每个客户的交易比率高于平均水平的业务（得分大于0.0）的流失率显著低于交易比率低于平均水平的业务。这样的业务可能更成功，因此它们不太可能与Broadly有更多的互动，导致更高的客户参与和更低的流失率。
- en: '![](../Images/7-08.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-08.png)'
- en: Figure 7.8 Case study showing a cohort analysis of the ratio metric transactions
    per customer for Broadly
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.8 案例研究：展示Broadly的每个客户的交易比率分析
- en: TAKEAWAY If one event is downstream from another in a process, the ratio of
    a metric on the downstream event to a metric on the precursor event can be viewed
    as an efficiency measurement for the process.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**要点**：如果一个事件在过程中的另一个事件之后，那么下游事件上的指标与先导事件上的指标之比可以被视为该过程的效率度量。'
- en: 'Figure 7.9 shows a case study of churn with another ratio from Broadly: the
    review-ask acceptance rate. Asking for reviews from customers is one of the most
    important uses of Broadly, and the rate at which customers accept such requests
    is a measure of efficiency in using the product. This rate can also be seen as
    a success rate, because each attempt at the activity either succeeds or fails.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.9 展示了 Broadly 使用另一个比率进行的流失率案例研究：评论请求接受率。向客户请求评论是 Broadly 最重要用途之一，客户接受此类请求的比率是使用产品的效率度量。这个比率也可以被视为成功率，因为每次尝试该活动要么成功要么失败。
- en: '![](../Images/7-09.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-09.png)'
- en: Figure 7.9 Case study showing a cohort analysis of the review-ask acceptance
    rate for Broadly
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.9 展示了 Broadly 评论请求接受率群体分析的案例研究
- en: Figure 7.9 might surprise you because it shows that other than the bottom cohort,
    which has the highest churn, increasing success rate shows a modest relationship
    with increasing churn. This pattern is typical for a disengaging behavior (introduced
    in chapter 3). The bottom cohorts are those with zero metrics because they don’t
    have one behavior or both. But for customers who use the product, a higher review-ask
    acceptance rate is associated with increased churn probability, which can be surprising,
    because you would expect that more successful customers would churn less. But
    this result can happen with products that have a specific purpose. If a customer
    is more successful faster, it could hasten their churn. In this case, most businesses
    using Broadly need a certain number of reviews to make themselves look good. When
    it has enough reviews, a business may be at heightened risk of churn because it
    achieved its goal and no longer sees Broadly as being useful. The highest risk
    of churn for Broadly’s customers comes when customers don’t use the product much
    (the bottom cohorts).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.9 可能会让你感到惊讶，因为它显示，除了拥有最高流失率的底层群体外，成功率增加与流失率增加之间显示出适度相关。这种模式对于一种不参与的行为（在第
    3 章中介绍）是典型的。底层群体是那些没有一种或两种行为的群体，因为他们没有指标。但对于使用产品的客户来说，更高的评论请求接受率与更高的流失概率相关联，这可能令人惊讶，因为你可能会预期更成功的客户流失更少。但这种情况可能发生在具有特定目的的产品上。如果客户更快地取得成功，这可能会加速他们的流失。在这种情况下，大多数使用
    Broadly 的企业需要一定数量的评论来让自己看起来更好。当它有足够的评论时，企业可能面临更高的流失风险，因为它们已经实现了目标，不再认为 Broadly
    有用。对于 Broadly 的客户来说，流失风险最高的情况是客户很少使用产品（底层群体）。
- en: TAKEAWAY The ratio of two event metrics, in which one event represents a successful
    result of the first event, defines a success rate metric.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 吸收要点：两个事件指标的比率，其中一个事件代表第一个事件的成功结果，定义了一个成功率指标。
- en: 'Klipfolio is an SaaS company that allows businesses to create online dashboards
    of their key metrics. Figure 7.10 shows a case study of another kind of efficiency
    rate from Klipfolio: the number of dashboard edits per month divided by the number
    of saves. In this case, the rate is probably better described as an inefficiency
    rate, because a lot of editing without a lot of saving probably indicates that
    it takes the user more effort to achieve acceptable results that they want to
    save. Figure 7.10 shows that customers with this kind of inefficiency (a high
    score on the ratio) are, in fact, at higher risk of churn than Klipfolio users
    who are more efficient in this regard.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Klipfolio 是一家 SaaS 公司，它允许企业创建其关键指标的在线仪表板。图 7.10 展示了 Klipfolio 另一种效率率的案例研究：每月仪表板编辑次数除以保存次数。在这种情况下，这个比率可能更准确地描述为不效率率，因为大量编辑而没有大量保存可能表明用户需要付出更多努力才能达到他们想要保存的可以接受的结果。图
    7.10 显示，这类不效率（比率分数高）的客户实际上比在这方面更有效率（更低的比率分数）的 Klipfolio 用户面临更高的流失风险。
- en: '![](../Images/7-10.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-10.png)'
- en: Figure 7.10 Case study showing a cohort analysis of edits_per_save ratio for
    Klipfolio
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.10 展示了 Klipfolio 编辑/保存比率群体分析的案例研究
- en: I hope that these examples have given you some idea of the wide range of situations
    in which you can use ratio metrics. They are powerful tools! The next sections
    teach you some different, more specialized ratios. Near the end of the chapter,
    I return to the question of when all these types of ratios are appropriate and
    how to find ratio metrics that are useful for your particular situation.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望这些例子能给你一些关于你可以使用比率指标的广泛情况的启示。它们是强大的工具！接下来的几节将教你一些不同、更专业的比率。在本章末尾，我将回到这样一个问题：何时所有这些类型的比率都是合适的，以及如何找到对你特定情况有用的比率指标。
- en: 7.1.4 Additional ratio metrics for the simulated social network
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.4 模拟社交网络的其他比率指标
- en: 'Before you move on, try a few more ratio metrics on the simulated social network.
    I’ll say more about how to choose ratios when you have a lot of metrics in section
    7.6\. For now, I’ll say only that the following group of metrics tests some interesting
    relationships:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，尝试在模拟社交网络上使用更多比率指标。关于当你有很多指标时如何选择比率，我将在第7.6节中详细说明。现在，我只想说，以下这一组指标测试了一些有趣的关系：
- en: Replies per message
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每条消息的回复数
- en: Likes per post
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每篇帖子的点赞数
- en: Posts per message
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每条消息的帖子数
- en: Unfriends per new friend
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个新好友的取消好友数
- en: 'All these metrics have prepared versions of listing 7.1 that you can run with
    the following command in the Python wrapper program:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些指标都有7.1列表的准备版本，您可以在Python包装程序中使用以下命令运行：
- en: '[PRE5]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: IMPORTANT You must have already calculated the underlying metrics for the ratios,
    as explained in section 7.1.2.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示：您必须已经根据第7.1.2节中的说明计算了比率的基础指标。
- en: 'Then, as an exercise, check how these new ratio metrics relate to churn with
    additional versions of the metric cohort plots with the following command in the
    Python wrapper program:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，作为一个练习，检查这些新的比率指标与额外的指标群体图如何与以下Python包装程序中的命令相关联：
- en: '[PRE6]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: You see more about how these additional metrics help you analyze and predict
    churn in chapter 8.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在第8章中了解更多关于这些额外指标如何帮助你分析和预测流失率的信息。
- en: 7.2 Percentage of total metrics
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.2 总指标百分比
- en: 'A percentage is a specialized case of a ratio: a measurement of a part of something
    for the numerator divided by the whole amount of that something in the denominator.
    Percentage metrics can be used to make a more interpretable version of a ratio
    when only two outcomes are possible. A set of percentage metrics can be used to
    analyze the relationship between a group of correlated metrics in which each metric
    measures one specific type of a general behavior.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 百分比是比率的特殊案例：分子是某一部分的测量，分母是分母中该事物的整体数量。当只有两种可能的结果时，百分比指标可以用来制作一个更可解释的比率版本。一组百分比指标可以用来分析一组相关指标之间的关系，其中每个指标测量一种特定类型的一般行为。
- en: 7.2.1 Calculating percentage of total metrics
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.1 计算总指标百分比
- en: 'Figure 7.11 illustrates a fictional streaming service and a typical situation
    in which you would want to make metrics that measure percentage of a total. The
    service has four types of content: Action, Comedy, Drama, and Romance. For any
    product with one main activity and subcategories, a count per period metric on
    each activity area is generally highly correlated with the other activity areas;
    customers who use the service a lot tend to use it more in all areas. The way
    to understand whether the relative amount of the activities is relevant to customer
    engagement and churn is to calculate an additional ratio metric for each category:
    activity in that category divided by total activity in all categories. As shown
    in figure 7.11, the total in all categories is exactly the number of events in
    all the categories, and the percentages are the relative proportions of activities
    in each category.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.11说明了虚构的流媒体服务和您可能想要制作测量总指标百分比的典型情况。该服务有四种内容类型：动作、喜剧、戏剧和浪漫。对于具有一个主要活动和子类别的任何产品，每个活动区域的周期性计数指标通常与其他活动区域高度相关；使用服务较多的客户倾向于在所有区域都使用得更多。理解活动的相对数量是否与客户参与度和流失率相关的方法是为每个类别计算一个额外的比率指标：该类别中的活动除以所有类别中的总活动。如图7.11所示，所有类别的总数正好是所有类别的所有事件数，百分比是每个类别中活动的相对比例。
- en: '![](../Images/7-11.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-11.png)'
- en: Figure 7.11 The percentage of total metrics for a fictional content-streaming
    service
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.11 一个虚构的内容流服务的总指标百分比
- en: Percentage of total is a special kind of ratio metric, in that it is calculated
    like any other kind of ratio metric (refer to listing 7.1). What makes a percentage
    metric different is that the denominator in the ratio is a total of the other
    metrics that represent the categories. To make these ratios, the only thing you
    need (in addition to listing 7.1) is a suitable total to use as the denominator.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 总指标百分比是一种特殊的比率指标，因为它像其他任何类型的比率指标一样计算（参见表7.1）。使百分比指标与众不同的地方在于，比率中的分母是代表类别的其他指标的总量。为了制作这些比率，您需要的只是（除了列表7.1之外）一个合适的总量作为分母。
- en: TAKEAWAY Percentage of total metrics reveals the relative balance between a
    set of closely related, highly correlated activities.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: TAKEAWAY 总指标百分比揭示了与一组密切相关、高度相关的活动的相对平衡。
- en: You’ve been introduced to the idea of calculating a metric from other metrics
    in a ratio calculation, and here is another area in which this trick comes in
    handy. If you need to calculate a metric that is the total of different categories
    to use as the denominator in a ratio, you can sum the values of all the metrics
    you are going to use in the numerator. This calculation strategy, summarized in
    figure 7.12, is similar to the calculation of a ratio metric in that the accounts
    and dates of calculation for the other metrics must be matched. One important
    difference is that the sum of other metrics can operate on multiple other metrics.
    Figure 7.11 shows four metrics for four content areas, and there could be more
    in a real streaming service. Other examples could be total purchases in different
    categories and calls in different regions; see the example in section 7.2.2.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经接触到了从其他度量中计算比率的度量值的概念，这里还有一个领域，这个技巧非常有用。如果您需要计算一个作为比率分母的不同类别的总和的度量值，您可以求和您打算在分子中使用的所有度量值的值。这种计算策略，总结在图7.12中，与比率度量值的计算相似，因为其他度量值的账户和计算日期必须匹配。一个重要的区别是，其他度量值的总和可以作用于多个其他度量值。图7.11显示了四个内容区域的四个度量值，在真实的流媒体服务中可能有更多。其他例子可以是不同类别的总购买量和不同地区的呼叫量；参见7.2.2节中的示例。
- en: '![](../Images/7-12.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-12.png)'
- en: Figure 7.12 Percentage of total metrics calculation
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.12 总度量值计算百分比
- en: 'The SQL statement to calculate a total of other metrics is shown in listing
    7.3, which shows the total likes and dislikes for accounts in the churn simulation
    from the GitHub repository. Figure 7.13 shows typical output. Note that listing
    7.3 selects a string aggregation of the metrics being summed for illustrative
    purposes. The SQL statement for the total metric is simpler than the calculation
    in figure 7.12: the SQL statement uses a `SUM` aggregation grouped by date and
    account when the metrics are provided in a list. This approach is easier than
    using CTEs for the ratio metric (implied by figure 7.12). The simpler approach
    is possible because the metric order does not matter, and SQL provides a standard
    `SUM` aggregation.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 列出7.3的计算其他度量值总和的SQL语句，它显示了GitHub仓库中 churn 模拟的账户的总点赞和不喜欢。图7.13显示了典型的输出。请注意，列出7.3为了说明目的选择了度量值的字符串聚合。总度量值的SQL语句比图7.12中的计算简单：当度量值以列表形式提供时，SQL语句使用按日期和账户分组的`SUM`聚合。这种方法比使用CTEs进行比率度量值（由图7.12暗示）更容易。更简单的方法是可能的，因为度量值的顺序并不重要，SQL提供了标准的`SUM`聚合。
- en: '![](../Images/7-13.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-13.png)'
- en: Figure 7.13 Output of running listing 7.3 on the default simulated dataset from
    the GitHub repository
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.13 在GitHub仓库的默认模拟数据集上运行列表7.3的输出
- en: You may be wondering whether you can calculate the total of other metrics directly
    by making a total of the events that go into the other metrics—making a `SELECT`
    to count multiple event types rather than adding separate counts of the different
    event types. The answer is that you can do that and get the same result. The advantage
    of adding precalculated category metrics is that it can be much faster than recounting
    the total underlying events if your dataset is big. That said, adding precalculated
    metrics introduces a dependency into the order of your metric calculation. You’ll
    have to decide what makes the most sense in your particular case.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能会想知道是否可以直接通过将进入其他度量值的事件总和起来来计算其他度量值的总和——通过`SELECT`来计数多个事件类型而不是分别计数不同的事件类型。答案是您可以这样做并得到相同的结果。添加预先计算的类别度量值的优势在于，如果您的数据集很大，它可能比重新计数基础事件的总数要快得多。但话虽如此，添加预先计算的度量值会在您度量值计算顺序中引入一个依赖。您将不得不决定在您的特定情况下什么最有意义。
- en: Listing 7.3 Total of metrics
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.3 度量值总和
- en: '[PRE7]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: ① STRING shows metrics being summed for illustration.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: ① STRING用于说明正在求和的度量值。
- en: ② Calculates the total with a GROUP BY aggregation
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: ② 使用GROUP BY聚合计算总和
- en: ③ Uses an INNER JOIN; available metrics will be part of the sum.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 使用INNER JOIN；可用的度量值将包含在总和内。
- en: ④ Lists the metrics that contribute to the total
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 列出对总和有贡献的度量值
- en: ⑤ Aggregates the results by date and account
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: ⑤ 按日期和账户汇总结果
- en: 'You should run listing 7.3 on the simulated dataset created with the code in
    this book’s GitHub repository. If you are using the Python wrapper program, run
    it with the following parameters:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该在本书GitHub仓库中提供的代码创建的模拟数据集上运行列表7.3。如果您正在使用Python包装程序，请使用以下参数运行它：
- en: '[PRE8]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Your output won’t be exactly the same, because the simulated data is randomly
    generated. Note that listing 7.3 selects a string aggregation of the metrics being
    summed for illustrative purposes. To calculate such a metric and save it in a
    database, you would have to remove that part of the `SELECT` and select the metric’s
    ID in an `insert` statement.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 您的输出不会完全相同，因为模拟数据是随机生成的。请注意，列表7.3为了说明目的选择了被求和的指标的字符串聚合。为了计算此类指标并将其保存到数据库中，您必须删除`SELECT`中的该部分，并在`insert`语句中选择指标的ID。
- en: A prewritten SQL version of listing 7.3 in the listing code folder performs
    the insert. (The insert version has the same path but a filename beginning with
    insert_7_3 instead of listing_7_3.) Run the insert SQL statement by adding the
    `—insert` flag to arguments for the script that runs the listing; you’ll need
    the saved result to continue with the examples. That listing shows you the SQL
    it uses but won’t print a result. You should make your own `SELECT` statement
    to verify the result or run the `metric_qa` code from chapter 3 (listing 3.6).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 列表代码文件夹中的预写SQL版本列表7.3执行插入操作。（插入版本的路径相同，但文件名以`insert_7_3`开头而不是`listing_7_3`。）通过在运行列表的参数中添加`—insert`标志来运行插入SQL语句；您需要保存的结果来继续示例。该列表显示了它使用的SQL，但不会打印结果。您应该创建自己的`SELECT`语句来验证结果或运行第3章中的`metric_qa`代码（列表3.6）。
- en: 'After saving the total metric, you still need to create the ratio metric that
    will be a percentage of the total. To do so, use listing 7.1 (the ratio metric)
    again. An additional version of listing 7.1 with the parameters is already prepared:
    the numerator metric is the metric named dislikes_per_month, and the denominator
    is the new metric created with the insert version of listing 7.3 (named total_opinions).
    Run that insert statement by adding the arguments `—version` `2` `—insert` when
    you run listing 7.1\. All together, the arguments are as follows:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在保存总体指标后，您仍然需要创建将作为总体百分比的比率指标。为此，再次使用列表7.1（比率指标）。已经准备了一个带有参数的列表7.1的额外版本：分子指标是名为`dislikes_per_month`的指标，分母是使用列表7.3的插入版本创建的新指标（命名为`total_opinions`）。在运行列表7.1时，通过添加参数`—version`
    `2` `—insert`来运行该插入语句。所有参数如下：
- en: '[PRE9]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 7.2.2 Percentage of total metric case study with two metrics
  id: totrans-140
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.2 具有两个指标的总体指标案例研究百分比
- en: 'After creating the total metric for total likes and dislikes in the simulation
    and a new metric for the simulation customer percentage of dislikes, you should
    complete a new churn cohort analysis for the metric. To perform the cohort analysis
    for the dislike percentage, follow these steps:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在模拟中创建完总点赞和点踩的指标以及模拟客户点踩百分比的新的指标后，你应该为该指标完成一个新的客户流失群体分析。为了进行点踩百分比的群体分析，请按照以下步骤操作：
- en: Rerun listing 7.2 to export a version of the dataset to a .csv file with your
    new metric using the arguments `—chapter` `7` `—listing` `2`.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表7.2以导出包含您新指标的版本的数据集到.csv文件，使用参数`—chapter` `7` `—listing` `2`。
- en: 'Rerun listing 5.1 to create the new cohort analyses using the version arguments
    6, 7, and 8: `—chapter` `5` `listing` `1` `—version` `6` `7` `8`. That code will
    run the cohort analyses for three metrics: likes per month, dislikes per month,
    and dislike percent. All together, the arguments are'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表5.1以使用版本参数6、7和8创建新的群体分析：`—chapter` `5` `listing` `1` `—version` `6` `7`
    `8`。该代码将运行三个指标的群体分析：每月点赞数、每月点踩数和点踩百分比。所有参数如下
- en: '[PRE10]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Figure 7.14 shows a typical result of this analysis. The number of likes per
    month and the number of dislikes per month are associated with reduced churn and
    correlated with each other, but the dislike percentage shows increasing churn
    risk for a higher percentage of dislikes. The result of this analysis is similar
    qualitatively to the analysis of ad views presented in section 7.1.1\. In that
    analysis, a behavior-reducing engagement was correlated with a behavior that increases
    engagement, and a ratio metric made this fact apparent. The difference is that,
    this time, you used a percentage rather than a simple ratio.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.14显示了此分析的典型结果。每月点赞数和每月点踩数与降低的流失率相关，并且相互关联，但点踩百分比显示较高百分比点踩的流失风险增加。此分析的结果在定性上类似于第7.1.1节中介绍的广告查看分析。在那个分析中，减少参与度的行为与增加参与度的行为相关联，比率指标使这一事实变得明显。不同之处在于，这次您使用的是百分比而不是简单的比率。
- en: '![](../Images/7-14.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-14.png)'
- en: Figure 7.14 Percent dislike simulation case study illustrating the use of a
    percentage of total metric
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.14 百分比点踩模拟案例研究，说明了使用总体指标的百分比
- en: If you think that the results would not have been that different if you used
    the simple ratio (of dislikes and likes), you are right. So why bother with the
    percentage? The reason I recommend using a percentage rather than a simple ratio
    in cases like this one is interpretability. Because likes and dislikes form a
    category, it’s more intuitive to describe this kind of relationship with a percentage.
    My advice is to use a percentage ratio when the two metrics are related as parts
    of a whole (likes and dislikes, for example) and to use a simple ratio when two
    metrics are not two parts of a whole (ad views and posts, for example).
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你认为使用简单的比例（不喜欢和喜欢的比例）结果不会有太大差异，你是正确的。那么为什么还要费心使用百分比呢？我之所以推荐在这种情况下使用百分比而不是简单的比例，是因为可解释性。因为喜欢和不喜欢构成一个类别，用百分比来描述这种关系更直观。我的建议是，当两个指标是整体的一部分（例如喜欢和不喜欢）时，使用百分比比例；当两个指标不是整体的一部分时（例如广告观看次数和帖子），使用简单比例。
- en: TAKEAWAY When two metrics are two parts of a whole, a percentage ratio is more
    interpretable than a simple ratio.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '**要点**：当两个指标是整体的一部分时，百分比比例比简单比例更易解释。'
- en: A similar case study occurs for Broadly. Illustrated in figure 7.15, this case
    study shows the results for the metrics customer promoter per month, customer
    detractor per month, and percentage of detractors. A customer promoter event occurs
    when a customer leaves a positive review, so this event is expected to provide
    value to a business that uses Broadly and make the customer less likely to churn,
    which it appears to do in figure 7.15\. A detractor event occurs when a customer
    leaves a bad review, which is expected to displease the business that uses Broadly,
    but it appears to be associated with reduced churn as well. Figure 7.15 also shows
    the churn cohort result for the percentage of detractors, which is the ratio made
    by dividing the number of detractors by the total number of promoters and detractors.
    Higher percentages of detractors are strongly associated with churn, and businesses
    with the lowest percentage of detractors—around 2%—had virtually no churn during
    the study period.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Broadly也有类似的案例研究。如图7.15所示，这个案例研究展示了客户每月推广者、客户批评者和批评者百分比的指标结果。当客户留下正面评论时，就会发生客户推广者事件，因此这个事件预计会给使用Broadly的企业带来价值，并使客户不太可能流失，如图7.15所示。当客户留下负面评论时，就会发生批评者事件，这预计会令使用Broadly的企业感到不悦，但它似乎也与降低流失率有关。图7.15还显示了批评者百分比的流失群体结果，这是通过将批评者数量除以推广者和批评者总数得到的比率。批评者百分比越高，与流失率的相关性就越强，而在研究期间，批评者百分比最低的企业——大约2%——几乎没有流失。
- en: '![](../Images/7-15.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-15.png)'
- en: Figure 7.15 Detractor percentage case study
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.15 消费者批评者百分比案例研究
- en: 7.2.3 Percentage of total metrics case study with multiple metrics
  id: totrans-153
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.3 多指标情况下的总指标百分比案例研究
- en: Percentage of total metrics is useful for making a ratio from two categories
    more interpretable. But percentage of total metrics really shines when you have
    many subcategories that together form a total. Figure 7.16 shows an example for
    Versature, an integrated telecommunications provider. Versature provides service
    in four geographical regions, labeled 1 through 4 in figure 7.16\. The correlation
    matrix in figure 7.16 shows that the numbers of calls per month in all four regions
    are moderately to highly correlated.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 总指标百分比对于使两个类别的比例更易解释是有用的。但是，当有多个子类别共同构成一个整体时，总指标百分比的优势就更加明显。图7.16展示了Versature这个综合电信服务提供商的例子。Versature在四个地理区域提供服务，如图7.16中标记为1至4。图7.16中的相关矩阵显示，所有四个地区的每月通话次数中等至高度相关。
- en: '![](../Images/7-16.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-16.png)'
- en: Figure 7.16 Regional percentages case study for Versature
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.16 Versature的区域百分比案例研究
- en: 'As a result of the correlation between the numbers of calls in the four regions,
    trying to analyze churn by using simple count metrics tells you only one thing:
    more calls by customers reduces churn. But the percentage of total metrics (shown
    on the right side of figure 7.16) can provide some more information. In region
    1, lowest churn occurs when the percentage is high but not the highest. Region
    1 has the most calls, but when customers make calls only in region 1, those calls
    seem to lead to less engagement. Regions 2 and 3 show a relationship to churn
    in which a moderate percentage of calls in the region is optimal; either too few
    or too many lead to higher churn.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 由于四个区域电话数量的相关性，试图通过使用简单的计数指标来分析流失率只能告诉你一件事：客户打更多的电话会减少流失率。但总指标百分比（如图7.16右侧所示）可以提供更多信息。在区域1，当百分比较高但不是最高时，发生最低的流失率。区域1拥有最多的电话，但当客户只在区域1打电话时，这些电话似乎导致较低的参与度。区域2和3显示出与流失率的关系，其中区域内的适度电话百分比是最佳的；要么太少要么太多都会导致更高的流失率。
- en: 'Also as shown in figure 7.16, the correlations between the percentage of total
    metrics in all four regions are weakly correlated. Because region 1 has the most
    calls overall, the percentage in region 1 shows weak to moderate negative correlation
    with the other percentage metrics: a high percentage in region 1 generally leaves
    few calls in the other regions. The other three regional percentages of total
    metrics are correlated weakly with one another and with the call amount metrics,
    indicating that these metrics provide new information for understanding customer
    engagement and churn (distinct from the information in the call amounts).'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 如图7.16所示，所有四个区域中总指标百分比的相互关联性较弱。由于区域1在整体上拥有最多的电话，区域1的百分比与其他百分比指标之间显示出较弱到中等的负相关性：区域1的高百分比通常意味着其他区域留下的电话很少。其他三个区域的总指标百分比相互之间以及与电话量指标的相关性较弱，这表明这些指标为理解客户参与度和流失率提供了新的信息（与电话量中的信息不同）。
- en: 7.3 Metrics that measure change
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.3 测量变化指标
- en: So far, you have looked at measurements of customer behavior around the time
    the measurements are made. But change in behavior can give you additional clues
    to engagement. To understand how change in customer behavior relates to engagement
    and churn, you’ll create a few more metrics specifically for this purpose and
    then analyze the change measurements, using the same techniques you’ve already
    learned.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你已经查看了一些在测量时客户行为的测量结果。但行为的变化可以为你提供关于参与度的额外线索。为了理解客户行为的变化如何与参与度和流失率相关联，你需要创建一些专门为此目的而设计的更多指标，然后使用你已经学到的相同技术来分析变化测量结果。
- en: 7.3.1 Measuring change in the level of activity
  id: totrans-161
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3.1 测量活动水平的变化
- en: Because you’ve calculated metrics on sequences of dates, it’s easy to see whether
    the behavior of a customer is changing by looking at their metrics and comparing
    the current value with the previous value. If the metric has gone up, you know
    that the behavior is increasing; if the metric has gone down, the behavior is
    decreasing. That result is one reason why you calculate metrics at different points
    over time. But if you want to understand how change relates to churn and engagement,
    you need to look at change as another natural experiment and compare customers
    whose behavior has increased with customers whose behavior has decreased. To do
    so, you need metrics that represent change; then you can apply the cohort analysis
    technique that you’ve learned.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 由于你已经计算了基于日期序列的指标，通过查看客户的指标并比较当前值与之前值，很容易看出客户的行为是否在变化。如果指标上升，你知道行为在增加；如果指标下降，行为在减少。这就是为什么你需要在不同的时间点计算指标的原因之一。但如果你想了解变化与流失率和参与度之间的关系，你需要将变化视为另一个自然实验，并比较行为增加的客户与行为减少的客户。为此，你需要代表变化的指标；然后你可以应用你学到的群组分析技术。
- en: A metric that represents change is a derived metric representing the change
    in a primary metric you are interested in. Because you’ve already learned about
    making metrics from other metrics, this idea should not seem as strange to you
    as it might have before you picked up this book. Figure 7.17 illustrates a hypothetical
    scenario for measuring change in the number of logins for two accounts and introduces
    the concept of percentage change as a metric.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 表示变化的度量是一个派生度量，表示你感兴趣的主要度量的变化。因为你已经学习了如何从其他度量中制作度量，所以这个想法可能不会像你在拿起这本书之前那样让你觉得陌生。图7.17说明了测量两个账户登录次数变化的假设场景，并引入了百分比变化作为度量的概念。
- en: '![](../Images/7-17.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-17.png)'
- en: Figure 7.17 Using percentage change metrics for two imaginary accounts
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.17 使用百分比变化度量对两个假设账户的分析
- en: DEFINITION The percentage change is a ratio that takes the change in a metric
    over time and divides that change by the value of the metric at the start of the
    period.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义**：百分比变化是一个比率，它将度量随时间的变化除以该时期开始时度量的值。'
- en: Suppose that two accounts have different amounts of logins; one account logs
    in much more than the other. Also suppose that both accounts’ logins per month
    are increasing. If you look at how much the number of logins changes over time,
    you’ll probably find that the size of the change is larger for the account that
    had more logins to begin with. That is, the size of change in a metric is correlated
    with the level of the metric. Because the size of change is often correlated with
    the starting level of a metric, a simple difference is not the best metric for
    representing change. You can see this result if you look at the change in the
    number of logins in a chart where each account gets its own y-axis scale. The
    relative change can be seen as the same if you allow each account its own scale.
    Because you’ve learned that using ratios is a way to rescale metrics to emphasize
    relative amounts, you can probably see where this example is going.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 假设有两个账户的登录次数不同；一个账户的登录次数远多于另一个账户。还假设这两个账户每月的登录次数都在增加。如果你查看登录次数随时间的变化，你可能会发现变化的大小对于一开始登录次数较多的账户更大。也就是说，度量变化的大小与度量的水平相关。因为变化的大小通常与度量的起始水平相关，所以简单的差值不是表示变化的最佳度量。如果你查看每个账户都有自己y轴刻度的图表中的登录次数变化，你可以看到这种结果。如果你允许每个账户有自己的刻度，相对变化可以看作是相同的。因为你已经了解到使用比率是一种重新缩放度量以强调相对数量的方法，你可能已经看到了这个例子的发展方向。
- en: This ratio calculation makes a measurement of change that is less correlated
    to how high the level of the metric was at the beginning. Figure 7.17 shows that
    for those two accounts, the percentage change is the same, which shows the similarity
    in their increase despite the big difference in the starting points. Equation
    7.1 shows the definition of the percentage change in a mathematical formula.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 这种比率计算使得变化测量与度量在开始时的水平高低相关性较低。图7.17显示，对于这两个账户，百分比变化是相同的，这表明尽管起始点有很大的不同，它们的增长相似。方程7.1展示了百分比变化的数学公式定义。
- en: '| ![](../Images/7-17_E01.png)  | Equation 7.1 |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| ![图片](../Images/7-17_E01.png)  | 方程7.1 |'
- en: 'In equation 7.1, *Metric*[*@start*] means the metric at the start of the measurement
    window, and *Metric*[*@end*] means the metric at the end. Equation 7.1 also shows
    a simplification: the percentage change is actually the ratio of the metric at
    the start to the metric at the end, minus 1.0, because the fraction is separable
    into the ratio of the end metric to the start metric, minus the ratio of the start
    metric to itself. This simplification is based on the fact that any number divided
    by itself is 1.0.'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在方程7.1中，*度量*[*@start*]表示测量窗口开始时的度量，而*度量*[*@end*]表示结束时的度量。方程7.1还展示了一个简化：百分比变化实际上是开始时度量与结束时度量的比值，减去1.0，因为分数可以分解为结束时度量与开始时度量的比值，减去开始时度量与自身的比值。这种简化基于任何数除以自身等于1.0的事实。
- en: TAKEAWAY Use percentage change metrics to see whether behavior has changed.
    Do not include either the (old) metric start values or the absolute change values
    in your analysis directly; those values are correlated with the overall level
    of activity captured by the ending metric value.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '**要点**：使用百分比变化度量来查看行为是否发生变化。在分析中直接不包括（旧的）度量起始值或绝对变化值；这些值与结束度量值所捕获的整体活动水平相关。'
- en: 'To make this example more concrete, figure 7.18 shows the details of the calculation
    of the percentage change as a metric. This figure continues the imaginary example
    of logins from figure 7.17, with one important difference: like every other metric,
    this one is calculated repeatedly on a sequence of dates. This type of calculation
    is sometimes called a rolling percentage change calculation.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使这个例子更具体，图7.18显示了百分比变化作为指标的详细计算。此图继续了图7.17中的登录的假设例子，但有一个重要区别：像其他所有指标一样，这个指标是在一系列日期上重复计算的。这种计算有时被称为滚动百分比变化计算。
- en: In figure 7.18, a period of four weeks is used. For each week, the calculation
    applies equation 7.1 on the metric for that week (as the end metric) and the metric
    from four weeks earlier (as the start metric). As shown on the right of figure
    7.18, the resulting rolling percentage change measurements are not constant; they
    fluctuate, depending on the precise ups and downs of the underlying metric. For
    the period of illustration in which both metrics are fairly consistent, an increase
    in the four-week percentage change ranges from around 5% to around 25%.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在图7.18中，使用了四周的时间段。对于每一周，计算都应用方程7.1于该周的指标（作为最终指标）和四周前的指标（作为起始指标）。如图7.18的右侧所示，得到的滚动百分比变化测量值不是恒定的；它们根据基础指标的精确波动而波动。在两个指标相当一致的示例期间，四周百分比变化增加的范围从大约5%到大约25%。
- en: '![](../Images/7-18.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-18.png)'
- en: Figure 7.18 Calculation of rolling percentage change metrics
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.18 滚动百分比变化指标的计算
- en: 'Figure 7.19 displays the sample output of the SQL statement to calculate percentage
    change (listing 7.4). The figure shows that this metric has something new to this
    book: negative values. If you were familiar with percentage change before reading
    this book, that fact comes as no surprise. If the term is new to you, negative
    percentage change means that the metric in question has gone down over the measurement
    period. Recall from equation 7.1 that the percentage change is'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.19显示了计算百分比变化（列表7.4）的SQL语句的示例输出。该图显示，这个指标对本书来说有新的内容：负值。如果你在阅读这本书之前就熟悉百分比变化，这个事实就不会感到惊讶。如果你对这个术语是新的，那么负百分比变化意味着在测量期间所讨论的指标已经下降。回想一下方程7.1，百分比变化是
- en: '![](../Images/7-21_E00.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-21_E00.png)'
- en: when the end metric is less than the start metric and the fraction is less than
    1.0, so after subtracting 1, the percentage change becomes negative.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 当最终指标小于起始指标且分数小于1.0时，因此在减去1之后，百分比变化变为负值。
- en: '![](../Images/7-19.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-19.png)'
- en: Figure 7.19 Output of running listing 7.4, showing negative results
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.19 运行列表7.4的输出，显示负结果
- en: Because the percentage change is a ratio metric minus 1.0, listing 7.4 is similar
    to calculating a regular ratio metric. The differences between listing 7.4 and
    a regular ratio calculation are
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 因为百分比变化是比率指标减去1.0，所以列表7.4与计算常规比率指标相似。列表7.4与常规比率计算之间的区别是
- en: The numerator and denominator are from the same metric instead of two different
    metrics.
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分子和分母来自同一个指标，而不是两个不同的指标。
- en: The denominator metric (the start value) is selected from sometime earlier than
    the end value (four weeks, in the example). (This selection has to be accounted
    for in both the `JOIN` and `SELECT` statements.)
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分母指标（起始值）是从早于结束值的时间（例如四周）选择的。（这个选择必须在`JOIN`和`SELECT`语句中考虑到。）
- en: In listing 7.4 (the percentage change), the number 1 is subtracted from the
    ratio in the final calculation.
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在列表7.4（百分比变化）中，最终计算中从比率中减去了数字1。
- en: Listing 7.4 Percentage change in a metric
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.4 指标百分比变化
- en: '[PRE11]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: ① This CTE selects all the metrics for the numerator.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: ① 此CTE选择所有分子指标。
- en: ② This CTE selects all the metrics for the denominator.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: ② 此CTE选择所有分母指标。
- en: ③ Uses the same metric for both numerator and denominator
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 分子和分母使用相同的指标
- en: ④ Offsets the dates for the denominator by the change period
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 对分母的日期进行变化周期的偏移
- en: ⑤ Uses the time from the more recent metric for the ratio
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: ⑤ 使用最近指标的时期作为比率
- en: ⑥ The percentage change according to equation 7.1
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: ⑥ 根据方程7.1的百分比变化
- en: ⑦ LEFT OUTER JOIN; if the end metric is NULL, the change is -100%.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: ⑦ 左外连接；如果最终指标为NULL，变化为-100%。
- en: ⑧ The JOIN adjusts for the offset between the start and end.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: ⑧ JOIN调整起始和结束之间的偏移
- en: ⑨ Guards against divide-by-zero errors
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: ⑨ 防止除以零错误
- en: 'Also note that listing 7.4 selects the start and end values used in the calculation
    for illustrative purposes. If you calculate the percentage change as a metric
    to save in the database, you have to leave out the illustration columns and include
    an `INSERT` statement with a metric ID. You should run listing 7.4 with the Python
    wrapper program in the usual way to see the output like figure 7.19 and then rerun
    listing 7.4 with the `—insert` flag to save it to the database like this:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 还要注意，列表7.4为了说明目的选择了计算中使用的起始值和结束值。如果你将百分比变化作为要保存到数据库的指标来计算，你必须省略说明列，并包含一个带有指标ID的`INSERT`语句。你应该以通常的方式使用Python包装程序运行列表7.4以查看类似于图7.19的输出，然后重新运行带有`—insert`标志的列表7.4以将其保存到数据库，如下所示：
- en: '[PRE12]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: You may be wondering whether it would make more sense to use `start_value` as
    the second argument in the `COALESCE` in listing 7.4 so that the result of the
    calculation returns `0` when `end_value` is null. But note that `start_value`
    has to be greater than `0` due to the `WHERE` clause. Then, if there is no `end_value`,
    the change is defined -100% because you went from something (the nonzero `start_value`)
    to nothing, so that the `COALESCE` around the `end_value` gives the correct result.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能想知道是否在列表7.4中使用`start_value`作为`COALESCE`的第二个参数会更合理，以便当`end_value`为空时，计算结果返回`0`。但请注意，由于`WHERE`子句，`start_value`必须大于`0`。然后，如果没有`end_value`，变化被定义为-100%，因为你从某个东西（非零的`start_value`）变成了没有东西，因此`end_value`周围的`COALESCE`给出了正确的结果。
- en: 'You should run a cohort analysis on your new metric for percentage change in
    new friends. The steps are similar to those you saw in section 7.1:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该对你新朋友的百分比变化指标进行群体分析。步骤与你在7.1节中看到的基本相同：
- en: Rerun listing 7.2 to reexport the dataset, including the new metric.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表7.2以重新导出数据集，包括新指标。
- en: Run listing 5.1 with the argument `—version` `9` to plot the cohort analysis
    of percentage change in new friends. All together, the arguments are
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用参数`—version` `9`运行列表5.1以绘制新朋友百分比变化的分析图。所有参数如下：
- en: '[PRE13]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Figure 7.20 shows a typical result for this analysis. Cohorts with a significant
    drop in new friends per month are found to be at elevated risk of churn.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.20显示了这种分析的典型结果。发现每月新朋友数量显著下降的群体，其流失风险增加。
- en: '![](../Images/7-20.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-20.png)'
- en: Figure 7.20 Simulation percentage change in friends per month for the churn
    cohort case study
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.20显示了流失案例研究中每月朋友百分比变化的模拟结果
- en: 7.3.2 Scores for metrics with extreme outliers (fat tails)
  id: totrans-206
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3.2具有极端异常值（厚尾）的指标得分
- en: 'A problem with percentage change metrics is that these metrics can have extreme
    values. This problem is not apparent in the simulated data because it tends to
    be less extreme than real human behavior. Actually, any ratio can have extreme
    values when the denominator is small (less than 1) because then the value of the
    ratio becomes quite large. But for most common ratios, this problem doesn’t exist
    because things like unit costs and efficiency measurements such as transaction
    per customer are constrained by the nature of the business, and percentages must
    be between 0% and 100% by design. When a customer has a low value in a metric,
    and their next measurement is large, the percentage change can be huge. But if
    a customer goes from a high metric value to zero (or near zero), will the metric
    go extremely negative? Not quite: the lowest possible percentage change measurement
    is -100% because that’s the percentage change when any nonzero metric goes to
    zero.'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 百分比变化指标的问题在于这些指标可能具有极端值。由于模拟数据通常比真实人类行为不那么极端，因此这个问题并不明显。实际上，当分母较小时（小于1），任何比率都可能具有极端值，因为此时比率的值变得相当大。但对于大多数常见的比率，这个问题并不存在，因为像单位成本和交易每客户这样的效率度量受到业务性质的限制，并且百分比必须按设计在0%到100%之间。当客户在某个指标上的值较低，而他们的下一次测量值较大时，百分比变化可以非常大。但如果客户从一个高指标值下降到零（或接近零），指标会变得极端负吗？并不完全是这样：最低可能的百分比变化测量值是-100%，因为这是任何非零指标变为零时的百分比变化。
- en: 'Figure 7.21 shows measurements of the distribution of percentage change metrics
    from the social network simulation and from the case study of Versature. To reproduce
    the statistics for the case study, use the Python wrapper program as follows:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.21显示了来自社交网络模拟和Versature案例研究的百分比变化指标的分布测量。要重现案例研究的统计数据，请使用以下Python包装程序：
- en: Rerun listing 7.2 to export a version of the dataset to a CSV file with your
    new metric with the arguments `—chapter` `7` `—listing` `2`.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表7.2，使用参数`—chapter 7 —listing 2`导出包含您新指标的CSV文件版本。
- en: Rerun listing 5.2 to save a table of the dataset summary statistics with the
    arguments `—chapter` `5` `—listing` `2` `—version` `2`.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表5.2，使用参数`—chapter 5 —listing 2 —version 2`保存数据集摘要统计表的表格。
- en: Your results will include the stats from the simulation metric percentage change
    in new friends shown in the first row of figure 7.21\. The values from the simulation
    aren’t too extreme, because the percentage change is for a four-week period, and
    the simulated customers don’t change that much. Still, the maximum is 1,200%,
    indicating that at least one customer went from one new friend per month to 12
    new friends per month; the minimum is -100%, as promised.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 您的结果将包括图7.21第一行显示的模拟指标百分比变化在新朋友中的统计数据。模拟的值并不太极端，因为百分比变化是针对四周期的，模拟客户的变化并不大。尽管如此，最大值是1,200%，这意味着至少有一个客户从每月一个新朋友增加到每月12个新朋友；最小值如承诺的那样是-100%。
- en: '![](../Images/7-21.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-21.png)'
- en: Figure 7.21 Versature percentage change in calls statistics
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.21 Versature通话百分比变化统计
- en: 'The Versature case study metric is more like what you should expect in real
    customer data: the minimum is also -100%, and the maximum is 117,150%. That’s
    an 11,000 times increase! Somewhere in the dataset is a customer who went from
    one call per month three months ago to 11,715 calls 12 weeks later—an extreme
    case of a big customer that started the service at the start of the percentage
    change measurement. The 99th percentile of the change is 423%, meaning that 99%
    of the customers had increases less than 4.23 times.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: Versature案例研究指标更接近你从真实客户数据中期望看到的情况：最小值也是-100%，最大值是117,150%。这是11,000倍的增长！在数据集中某个地方有一个客户，三个月前每月只有一个通话，12周后变成了11,715个通话——这是一个大客户在百分比变化测量开始时开始服务的极端案例。变化的第99百分位数是423%，这意味着99%的客户增加次数小于4.23倍。
- en: Another important point to note is that the median change is 0% (the 50th percentile
    shown in the 50% column in figure 7.21). About as many customers increased their
    number of calls as decreased their number of calls. This result usually occurs
    for a percentage change metric. You may not realize that fact if you look at the
    average, which is usually greater than 0%. This is the case for both the simulation
    percentage change metric and Versature’s percentage change metric in figure 7.20\.
    The reason that the average is greater than 0% when equal numbers of customers
    have positive and negative change metrics is that the positive percent change
    measurements may be much greater in magnitude than negative percent change measurements.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个需要注意的重要点是，中位数变化为0%（如图7.21中50%列所示的第50百分位数）。增加通话次数的客户数量与减少通话次数的客户数量大致相同。这种情况通常出现在百分比变化指标中。如果你只看平均值，可能不会意识到这一点，因为平均值通常大于0%。这在图7.20中Versature的百分比变化指标和模拟百分比变化指标中都是如此。当正负变化指标的客户数量相等时，平均数大于0%的原因是正百分比变化测量值可能远大于负百分比变化测量值。
- en: Something else to notice in figure 7.21 is the skew around 5 for the simulation
    and nearly 90 for the real data. As you may recall from chapter 5, skew means
    that most of the metric values are packed together, but a few are way out there.
    A skew of 5 qualifies as moderately skewed; a skew of 90 is highly skewed. When
    a metric is highly skewed, you should turn it into a score to make it easier to
    understand your cohort analysis (see chapter 5).
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 在图7.21中还有其他需要注意的事情是模拟数据和实际数据在5和90附近的偏斜。你可能还记得第5章，偏斜意味着大多数指标值都聚集在一起，但有几个值远远超出。5的偏斜被认为是中等偏斜；90的偏斜是高度偏斜。当一个指标高度偏斜时，你应该将其转换为分数，以便更容易理解你的群体分析（参见第5章）。
- en: But there is a problem. You can’t use the skewed metric version of the scoring
    transformation if a metric is zero or negative, but percentage change is often
    zero and negative. To solve this problem, you can use another scoring formula,
    which I call the fat-tails formula because it transforms a metric into a score
    when there are extreme outliers in both negative and positive directions. The
    condition of having both positive and negative extreme values is called fat tails
    because tails refer to the extremes of the distribution. When a distribution is
    normal or has thin tails, the most extreme values aren’t too extreme relative
    to the middle of the distribution. If the distribution of a metric has fat tails,
    the extreme values are farther from the middle of the range, and there are more
    extreme values.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 但是存在问题。如果一个度量是零或负数，你不能使用偏斜度量版本的得分变换，但百分比变化通常是零和负数。为了解决这个问题，你可以使用另一个得分公式，我称之为肥尾公式，因为它在正负两个方向都有极端异常值时将度量转换为得分。具有正负极端值条件被称为肥尾，因为尾巴指的是分布的极端。当一个分布是正态分布或具有瘦尾巴时，最极端的值相对于分布的中间部分并不是太极端。如果一个度量的分布具有肥尾，极端值离中间范围更远，并且有更多的极端值。
- en: 'Equation 7.2 shows the fat-tails score formula:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 方程7.2展示了肥尾得分公式：
- en: '![](../Images/7-21_E00.png)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-21_E00.png)'
- en: where
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 其中
- en: '| ![](../Images/7-21_E02.png)  | Equation 7.2 |'
  id: totrans-221
  prefs: []
  type: TYPE_TB
  zh: '| ![图片](../Images/7-21_E02.png) | 方程7.2 |'
- en: 'Equation 7.2 has the same format as the score formula in chapter 5 (equation
    5.1): you are going to transform the metric and then subtract the mean and divide
    by the standard deviation of the transformed metric. In equation 7.2, μm ¢ stands
    for the mean of the distribution of the transformed metric m ¢, and σm ¢ stands
    for the standard deviation of the transformed metric.'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 方程7.2的格式与第5章中的得分公式（方程5.1）相同：你将变换度量，然后减去平均值，并除以变换度量的标准差。在方程7.2中，μm ¢代表变换度量m ¢的分布的平均值，σm
    ¢代表变换度量的标准差。
- en: 'The metric transformation in the fat-tails score formula is only a little bit
    different from the regular score formula: the second part of equation 7.2 says
    that the transformed metric m ¢ is created by taking the logarithm of the original
    metric m plus the square root of the original metric squared plus 1\. Recall that
    in the chapter 5 score formula, you used the logarithm of the original metric
    plus 1 (without squaring or taking the square root).'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在肥尾得分公式中的度量变换与常规得分公式只有一点点的不同：方程7.2的第二部分说明变换后的度量m ¢是通过取原始度量m的对数加上原始度量平方的平方根再加1来创建的。回想一下，在第5章的得分公式中，你使用了原始度量对数加1（没有平方或取平方根）。
- en: The fat-tails score formula works for negative values because when the original
    metric m is negative, the term in the square root is always positive and a little
    bit greater in absolute value then the negative term. Negative values end up as
    small numbers closer to zero, and positive values get pushed out. After applying
    the log function, subtract the mean and divide by the standard deviation of the
    transformed variable.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 肥尾得分公式对负值也适用，因为当原始度量m为负时，平方根中的项总是正的，并且绝对值略大于负项。负值最终成为接近零的小数，而正值则被推远。在应用对数函数后，减去平均值并除以变换变量的标准差。
- en: The second half of equation 7.2 with the logarithm is also known to scientists
    and mathematicians as the inverse hyperbolic sine transform, which is a mouthful
    that you don’t have to remember. This transform is used in certain types of engineering
    and geometry calculations. Regardless of what you call it, the fat-tails score
    transform is a great trick for transforming metrics with extreme values.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 方程7.2的后半部分带有对数，也被称为科学家和数学家所知的双曲正弦逆变换，这是一个很长的名字，你不必记住。这种变换用于某些类型的工程和几何计算。无论你叫它什么，肥尾得分变换是处理具有极端值的度量的一个很好的技巧。
- en: TAKEAWAY Use the fat-tails transformation to create scores from metrics with
    extreme values that are both positive and negative.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '**要点**：使用肥尾变换从具有正负极端值的度量中创建得分。'
- en: Listing 7.5 updates listing 5.3 to include the fat-tails score transform. (I
    skipped this added complication in chapter 5 because we weren’t looking at metrics
    that needed it.) The expanded listing does all the same things, and it makes an
    additional check for skewed columns with negative values. If there are any such
    columns, the score formula defined by equation 7.2 is applied, in addition to
    the regular score transformations for skewed and nonskewed columns.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.5更新列表5.3，包括肥尾分数转换。 (我在第5章中跳过了这个附加的复杂性，因为我们没有查看需要它的指标。) 扩展的列表执行所有相同的事情，并且它还额外检查了具有负值的偏斜列。如果有这样的列，除了对偏斜和非偏斜列的常规分数转换外，还会应用由公式7.2定义的分数公式。
- en: NOTE Another test for fat-tailed metrics is to check for a high value on the
    statistic called kurtosis, a measurement designed to detect fat-tailed distributions.
    I am omitting it for simplicity because in churn cases, the fat-tailed metrics
    are also skewed.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：为了简化，省略了对肥尾指标进行的另一个测试，即检查统计量kurtosis的高值，这是一个旨在检测肥尾分布的测量。在流失案例中，肥尾指标也是偏斜的。
- en: Listing 7.5 Scoring metrics with fat tails
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.5 使用肥尾分数进行评分
- en: '[PRE14]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: ① Wraps the skewed data transform from listing 5.3
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: ① 包含了列表5.3中的偏斜数据转换
- en: ② The transform for skewed scores
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: ② 偏斜分数的转换
- en: ③ A new transform for fat-tailed data
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 对肥尾数据的新的转换
- en: ④ Loops over all columns with fat tails
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 遍历所有具有肥尾的列
- en: ⑤ Applies the fat-tails score formula (equation 7.2)
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: ⑤ 应用肥尾分数公式（公式7.2）
- en: ⑥ Uses kwargs to ignore the default listing parameters
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: ⑥ 使用kwargs忽略默认的列表参数
- en: ⑦ Most of this code is the same as listing 5.3.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: ⑦ 这段代码的大部分与列表5.3相同。
- en: ⑧ Fat-tails score when skew is high and negative values are present
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: ⑧ 当偏斜高且存在负值时，肥尾分数
- en: ⑨ This rescaling is the same as listing 5.3.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: ⑨ 这个缩放与列表5.3相同。
- en: ⑩ Saves what columns are transformed and the parameters
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: ⑩ 保存转换的列和参数
- en: 'You can try listing 7.5 on your own data by making the following calls to the
    Python wrapper program:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过对Python包装程序进行以下调用来在自己的数据上尝试列表7.5：
- en: If you have not done so already, run listing 7.4 with the `—insert` flag to
    save the new metric.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果还没有这样做，使用`—insert`标志运行列表7.4以保存新的指标。
- en: Rerun listing 7.2 to recreate your saved dataset, using the arguments `—chapter`
    `7` `—listing` `2`. This dataset includes your new percentage change metric.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表7.2，使用参数`—chapter 7 —listing 2`来重新创建你的保存的数据集。这个数据集包括你的新的百分比变化率指标。
- en: Run listing 7.5 to create the dataset of scores, using the arguments `—chapter`
    `7` `—listing` `5`.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行列表7.5，使用参数`—chapter 7 —listing 5`来创建分数数据集。
- en: Rerun listing 5.2, version 2, to check the statistics on the scores, using the
    arguments `—chapter` `5` `—listing` `2` `—version` `2`.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行列表5.2，版本2，使用参数`—chapter 5 —listing 2 —version 2`来检查分数的统计数据。
- en: Figure 7.22 shows the analysis of the percentage change in calls with data from
    Versature. For this case study, the metric is the percentage change in the number
    of calls per month, measured over the past 12 weeks. The cohort with the greatest
    reduction in calls shows an elevated churn risk. Because the metric is measured
    over a longer period than the lead time before churn, with which the observation
    is made, this indicator probably is not a churn leading indicator, as discussed
    in chapter 4\. That is, if two weeks before a customer comes up for renewal, you
    see that their use is way down from three months earlier, there is a good chance
    that they have already made up their mind to churn. On the other hand, with two
    weeks left before the actual renewal, there may be time to resolve an issue, if
    there is one.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.22展示了使用Versature数据的通话百分比变化率分析。对于这个案例研究，指标是每月通话数量的百分比变化，测量过去12周的数据。通话数量减少最多的群体显示出较高的流失风险。因为这个指标是在比观察流失前的时间更长的时间段内测量的，所以这个指标可能不是流失的领先指标，正如第4章所讨论的。也就是说，如果客户在续约前两周，你看到他们的使用量比三个月前大幅下降，那么他们很可能已经决定流失。另一方面，在续约前还有两周的时间，如果存在问题，可能还有时间解决。
- en: '![](../Images/7-22.png)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-22.png)'
- en: Figure 7.22 Churn cohort case study for Versature’s percentage change in calls
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.22 Versature通话百分比变化率流失群体案例研究
- en: 7.3.3 Measuring the time since the last activity
  id: totrans-249
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3.3 测量自上次活动以来的时间
- en: Percentage changes are a good way to know whether a user’s behavior has dropped
    or increased. A useful related measurement is time since last activity. Time since
    last activity is not a measurement of change in behavior, but it relates how a
    customer’s current behavior compares with their past behavior. In particular,
    time since last activity distinguishes customers who are newly inactive from those
    who may have been inactive for a long time.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 百分比变化是了解用户行为是否下降或增加的好方法。一个有用的相关测量是自上次活动以来时间。自上次活动以来时间不是行为变化量的测量，而是将客户的当前行为与过去行为进行比较。特别是，自上次活动以来时间区分了新不活跃的客户和可能已经长时间不活跃的客户。
- en: '![](../Images/7-23.png)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![图片7-23](../Images/7-23.png)'
- en: 'Figure 7.23 Measuring the time since the last activity: an event'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.23 测量自上次活动以来时间：一个事件
- en: Figure 7.23 illustrates the concept with a simple example on the event series
    for one account. Any time you calculate the metric, time since last activity is
    the time difference between the most recent event before the measurement date
    and the measurement date. If a customer has an event on the day of the measurement,
    the metric is zero. If the customer has no events for an extended period, the
    metric increases by one every day until another event occurs.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.23通过一个账户的事件序列的简单示例说明了该概念。每次计算指标时，自上次活动以来时间是指测量日期之前最近的事件与测量日期之间的时间差。如果客户在测量当天有事件，则指标为零。如果客户在一段时间内没有事件，则指标每天增加一，直到发生另一个事件。
- en: Like all the metrics we use, time since last activity would be tedious to calculate
    by hand. Fortunately, that calculation isn’t hard to make with SQL CTEs and aggregations.
    Figure 7.24 shows a sample of the typical output from SQL that calculates the
    days since the last event. Note that this output includes the date of the last
    event in the `SELECT` statement for illustrative purposes.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 与我们使用的所有指标一样，自上次活动以来时间手动计算会非常繁琐。幸运的是，使用SQL CTE和聚合进行计算并不困难。图7.24显示了SQL计算自最后事件以来天数典型输出的一个示例。请注意，为了说明目的，此输出包括`SELECT`语句中的最后事件日期。
- en: '![](../Images/7-24.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![图片7-24](../Images/7-24.png)'
- en: Figure 7.24 Output of running listing 7.4\. For each account and date, the date
    of the last event is selected for illustration; the metric value is the number
    of days from the last event to the date of the measurement.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.24 运行列表7.4的输出。对于每个账户和日期，选择最后事件的日期进行说明；指标值是从最后事件到测量日期的天数。
- en: Listing 7.6 gives the SQL program to calculate the time since the last event.
    The basic strategy is to use a `MAX` aggregation on the event times (constrained
    to events before the measurement date) to find all the most recent events. The
    most recent event dates are stored in a CTE. After that, the metric is the difference
    between that event date and the measurement date. The only thing that makes this
    calculation a bit complicated is that, as for all the metrics, the calculation
    is performed simultaneously for a series of measurement dates. The query is not
    finding only one last event date per account but a whole series of last event
    dates for every account.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.6提供了计算自最后事件以来时间的SQL程序。基本策略是在事件时间上使用`MAX`聚合（限制在测量日期之前的事件）以找到所有最近的事件。最近的事件日期存储在一个公用表表达式（CTE）中。之后，该指标是事件日期与测量日期之间的差异。使这个计算变得复杂的是，与所有指标一样，计算是在一系列测量日期上同时进行的。查询不仅为每个账户找到一个最后事件日期，而是为每个账户找到一系列最后事件日期。
- en: 'You should run listing 7.6 on the simulated dataset, following the usual pattern
    with the Python wrapper program, and confirm that the output looks similar to
    figure 7.24\. Also following the usual pattern, to insert the metric in the database,
    you need to remove the illustrative (extra) column and include the metric name
    ID in an insert statement. The GitLab repository has a version of the listing
    that you can run by passing the `—insert` flag as an argument to the program that
    runs the listings as follows:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该在模拟数据集上运行列表7.6，按照Python包装程序的习惯模式进行，并确认输出类似于图7.24。按照惯例，要将指标插入数据库，您需要删除说明（额外）列，并在插入语句中包含指标名称ID。GitLab存储库有一个可以运行的列表版本，您可以通过将`—insert`标志作为参数传递给运行列表的程序来运行，如下所示：
- en: '[PRE15]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Listing 7.6 SQL for measuring time since an event
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.6 用于测量自事件以来时间的SQL
- en: '[PRE16]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: ① CTE for a sequence of dates on which to calculate the metrics
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: ① 用于计算指标的日期序列的CTE
- en: '② CTE for a temporary result: the date of the last event'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: ② 用于临时结果的CTE：最后事件的日期
- en: ③ SELECTs the last date with a MAX aggregation
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 使用MAX聚合选择最后一个日期
- en: ④ Use the date of the last event up to each measurement date.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 使用每个测量日期的上一个事件的日期。
- en: ⑤ SELECTs the event to measure
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: ⑤ 选择要测量的事件
- en: ⑥ Aggregates over each account and date
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: ⑥ 对每个账户和日期进行汇总
- en: ⑦ The date of the last event is selected for illustration.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: ⑦ 选择最后事件的日期进行说明。
- en: ⑧ The result is the number of days since the last event.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: ⑧ 结果是自上次事件以来的天数。
- en: After running the version of listing 7.6 that inserts the metric, you can regenerate
    the dataset and run a cohort churn analysis on it. All together, the runs of the
    Python wrapper program are
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行插入指标的7.6版本后，您可以重新生成数据集并在其上运行群体流失分析。总的来说，Python包装程序的运行次数
- en: 'Run listing 7.6 with the insert flag to save the new metric: `—chapter` `7`
    `—listing` `6` `—insert`.'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用插入标志运行7.6列表以保存新指标：`—chapter` `7` `—listing` `6` `—insert`。
- en: 'Rerun listing 7.2 to reexport the dataset: `—chapter` `7` `—listing` `2`.'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行7.2列表以重新导出数据集：`—chapter` `7` `—listing` `2`。
- en: 'Run a new cohort analysis using listing 5.1, version 10: `—chapter` `5` `—listing`
    `1` `—version` `10`.'
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用5.1列表的第10版运行新的群体分析：`—chapter` `5` `—listing` `1` `—version` `10`。
- en: Figure 7.25 shows the output of the cohort analysis. A gap of more than around
    five days since the last new friend event is associated with an increasing risk
    of churn. The increase in risk is gradual but becomes fairly significant for the
    cohort with the longest time since the event.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.25显示了群体分析的结果。自上次新朋友事件以来超过五天的差距与流失风险的增加相关。风险的增加是渐进的，但对于自事件以来时间最长的群体来说，这种增加变得相当显著。
- en: '![](../Images/7-25.png)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-25.png)'
- en: Figure 7.25 Case study of churn and days since the last new friend event
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.25流失和自上次新朋友事件以来的天数案例研究
- en: 'Figure 7.26 shows a churn cohort analysis for the number of days since the
    last dashboard edit for Klipfolio. In the real case study, days since last edit
    is a significant predictor of churn risk: risk increases substantially over the
    first month. Unlike in the simulated data, the risk increases only modestly in
    the cohorts with the longest time since activity.'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.26显示了Klipfolio自上次仪表板编辑以来的天数流失群体分析。在实际情况研究中，自上次编辑以来的天数是流失风险的显著预测因素：风险在第一个月大幅增加。与模拟数据不同，在活动时间最长的群体中，风险仅适度增加。
- en: '![](../Images/7-26.png)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-26.png)'
- en: Figure 7.26 Case study of churn and days since last dashboard edit for Klipfolio
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.26 Klipfolio的流失和自上次仪表板编辑以来的天数案例研究
- en: When a customer has been inactive for a long time, they can forget about the
    subscription. At that point, some practitioners argue, the best churn-reducing
    strategy is to do nothing and let sleeping dogs lie by not reminding the customer
    that they have the subscription. It is a plausible hypothesis, although a somewhat
    dubious business strategy, to depend on people forgetting about you to boost your
    retention. In any event, figure 7.26 does not suggest that churn risk decreases
    when the time since the last action gets longer. The question of whether interventions
    with people that far gone have positive return on investment is one that must
    be answered empirically by any company that is considering such an approach.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 当客户长时间不活跃时，他们可能会忘记订阅。在这种情况下，一些从业者认为，最好的减少流失策略是不采取任何行动，让沉睡的狗继续沉睡，不提醒客户他们有订阅。虽然这是一个合理的假设，但也是一种有些可疑的商业策略，依赖于人们忘记你以提高你的保留率。无论如何，图7.26并没有表明，自上次行动以来时间越长，流失风险就越低。对于考虑这种方法的任何公司来说，是否对那些已经走得很远的人进行干预会有正的投资回报，这是一个必须通过实证回答的问题。
- en: 7.4 Scaling metric time periods
  id: totrans-281
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.4 指标时间段的缩放
- en: 'In chapter 3, when you learned how to calculate behavioral metrics, I recommended
    that you scale the metric measurement window for simple metrics based on the frequency
    of the event, using longer measurement windows for rarer events. That advice is
    good, but it introduces a couple of problems:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 在第3章中，当您学习了如何计算行为指标时，我建议您根据事件的频率对简单指标的指标测量窗口进行缩放，对于更罕见的事件使用更长的测量窗口。这个建议是好的，但它引入了一些问题：
- en: Choosing different measurement windows for different events is going to be confusing.
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为不同事件选择不同的测量窗口将会令人困惑。
- en: If you use a long measurement period for rare events, you have to wait a long
    time to observe your customers properly. This problem is compounded if you want
    to make percentage change metrics like the ones introduced in section 7.3.
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您为罕见事件使用较长的测量周期，您必须等待很长时间才能正确观察您的客户。如果您还想制作像第7.3节中介绍的那样百分比变化的指标，这个问题会变得更加严重。
- en: This section teaches scaling techniques that address both these issues by scaling
    measurements from one time frame to another. These techniques are similar to the
    scaling of churn rates you learned in chapter 2, but they work a bit differently
    for metrics than for churns.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 本节介绍了通过将一个时间框架的测量扩展到另一个时间框架来解决这两个问题的缩放技术。这些技术与你在第二章中学到的客户流失率缩放类似，但它们在度量指标方面的工作方式略有不同。
- en: 7.4.1 Scaling longer metrics to shorter quoting periods
  id: totrans-286
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4.1 将较长的指标缩放到较短的引用周期
- en: Using different measurement periods for different metrics can be confusing,
    especially if you have a lot of events. It’s easier to compare behaviors when
    all the measurements are on the same scale.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 使用不同的测量周期来测量不同的指标可能会让人困惑，尤其是如果你有很多事件。当所有测量都在同一尺度上时，比较行为更容易。
- en: WARNING Reporting a lot of metrics measured on different time scales will confuse
    people.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告** 报告大量在不同时间尺度上测量的指标会让人困惑。'
- en: 'How can you reconcile that advice with the advice in chapter 3 to use long
    time frames to measure rare events? It’s easy: you can describe your behavioral
    measurements on a different time scale than the window you used to make the measurement.
    Figure 7.27 illustrates this concept. In essence, you are going to describe the
    metric as an average count of something per month rather than a total count measured
    over multiple months.'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 你如何将这些建议与第三章中建议使用长时间框架来测量罕见事件的建议相协调？很简单：你可以使用不同于你进行测量的窗口的时间尺度来描述你的行为测量。图 7.27
    说明了这个概念。本质上，你将描述这个指标作为一个每月的平均计数，而不是多个月份的总计数。
- en: '![](../Images/7-27.png)'
  id: totrans-290
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-27.png)'
- en: Figure 7.27 Quoting a long-period count metric as a short-period average
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.27 引用长期计数指标作为短期平均数
- en: You can measure behavior over a one-year period, for example, but convert it
    to a monthly value by dividing the number you measured over the year by 12, because
    the average number of events per month is the number of events per year divided
    by 12\. This idea is the same as scaling churn measurements (chapter 2) but with
    simpler math. You don’t need any complicated reasoning about survival rates to
    scale standard behavioral metrics in time. This time, the technique is straight
    multiplication and division.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以测量一年期内的行为，例如，但通过将一年内测量的数量除以 12 来将其转换为月度值，因为每月的平均事件数是每年事件数除以 12。这个想法与缩放客户流失度量（第二章）相同，但数学更简单。你不需要任何关于生存率的复杂推理来缩放标准行为指标。这次，技术是直接的乘法和除法。
- en: TAKEAWAY Do not confuse the time period over which you make an average behavioral
    measurement with the time period with which you choose to describe the behavior.
    The time periods don’t have to be the same. You can describe all your metrics
    on one time scale, even if the metrics are measured over different-length time
    windows.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: '**总结** 不要混淆你进行平均行为测量的时间周期与你选择描述行为的时间周期。这两个时间周期不必相同。你可以在一个时间尺度上描述所有你的指标，即使这些指标是在不同长度的时窗内测量的。'
- en: Equation 7.3 shows the multiplication and division necessary to convert an event
    count taken during any time period of measurement (*TMeasure*) to an average at
    any other time period for describing the behavior (*TDescribe*).
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 公式 7.3 展示了将测量期间内任何时间周期的事件计数（*TMeasure*）转换为描述行为时任何其他时间周期的平均数所需的乘法和除法。
- en: '| ![](../Images/7-27_E03.png)  | Equation 7.3 |'
  id: totrans-295
  prefs: []
  type: TYPE_TB
  zh: '| ![](../Images/7-27_E03.png)  | 公式 7.3 |'
- en: Plugging the formula into the simple example of annual measurement with a monthly
    description, the ratio is four weeks description period divided by 52 weeks measurement
    period, or one-thirteenth. Or if you like to do this calculation in days, that’s
    30.4 (the average number of days in a month) divided by 365 days in a year, or
    one-thirteenth. Remember that you have to use the same units for the time period
    of both the description and the count, whether those units are days, months, or
    years.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 将公式应用到简单的年度测量与月度描述的例子中，比率是四周描述周期除以 52 周测量周期，或者说是十三分之一。或者如果你喜欢用天数来计算，那就是 30.4（平均每月天数）除以一年中的
    365 天，或者说是十三分之一。记住，无论这些单位是天数、月份还是年，你都必须使用相同的单位来描述描述和计数的时间周期。
- en: Better yet, how about calculating the scaling on the fly with your measurement?
    Listing 7.7 shows an event per period behavior measurement (like listing 3.2)
    that automatically scales the measurement to a monthly description period average.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 更好的是，你可以在测量时即时计算缩放吗？列表 7.7 展示了一个按周期行为测量的事件（如列表 3.2），该事件自动将测量扩展到月度描述周期的平均值。
- en: Equation 7.3 also applies to metrics that are totals of event properties, such
    as the total time spent on some activity. But scaling is not necessary; in fact,
    it’s incorrect if the metric is an average of an event property. If the events
    are in-app purchases, for example, and you want to make a metric of the average
    purchase amount, this metric doesn’t depend on the length of time for which you
    make the measurement because the average of an event property is defined as a
    per-event measurement, even though you can measure it over a longer time frame.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 公式 7.3 也适用于事件属性总和的指标，例如在某个活动上花费的总时间。但缩放不是必要的；实际上，如果指标是事件属性的平均值，那么缩放是不正确的。例如，如果事件是在应用内购买，并且你想制作平均购买金额的指标，这个指标不依赖于你测量时间的长度，因为事件属性的平均值被定义为每个事件的测量，即使你可以测量更长的时间框架。
- en: WARNING Do not time-scale metrics that are averages of the value of event properties.
    Only metrics that are counts or sums should be scaled.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 警告：不要对事件属性值的平均值进行时间缩放。只有计数或总和的指标应该进行缩放。
- en: You should run listing 7.7 by using the Python wrapper program as usual (with
    the arguments `—chapter` `7` `—listing` `7`). Figure 7.28 shows a typical result.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 您应像往常一样使用 Python 包装程序运行列表 7.7（使用参数 `—chapter` `7` `—listing` `7`）。图 7.28 显示了典型结果。
- en: '![](../Images/7-28.png)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-28.png)'
- en: Figure 7.28 Sample output from listing 7.7
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.28 列表 7.7 的示例输出
- en: Listing 7.7 Scaling a number of events per account metric
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.7 缩放每个账户的事件数量指标
- en: '[PRE17]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: ① This SQL is mostly the same as listing 3.2.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: ① 此 SQL 与列表 3.2 大致相同。
- en: ② The count is scaled from an 84-day to 28-day period (equation 3.1).
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: ② 计数已从 84 天缩放到 28 天周期（公式 3.1）。
- en: ③ Counts over 84 days
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 84 天内的计数
- en: 'Note that listing 7.7 includes a total count column that is shown for illustrative
    purposes. To insert metrics like this one into the database, you need to remove
    that column, replace it with a metric name ID, and add an `INSERT` statement.
    As usual, the repository also contains an insertable version of the metric that
    you can run by adding the `—insert` flag to the execution command as follows:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，列表 7.7 包含一个用于说明目的的总计数列。要将此类指标插入数据库，您需要删除该列，用指标名称 ID 替换它，并添加一个 `INSERT` 语句。像往常一样，存储库还包含一个可插入的指标版本，您可以通过在执行命令中添加
    `—insert` 标志来运行它，如下所示：
- en: '[PRE18]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'After you’ve inserted the unfriend_per_month metric from listing 7.7 into the
    database, perform the following steps to check your result:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 在将列表 7.7 中的 unfriend_per_month 指标插入数据库后，执行以下步骤以检查您的结果：
- en: 'Regenerate the dataset by rerunning listing 7.2 with the arguments: `—chapter`
    `7` `—listing` `2`.'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新运行列表 7.2 并使用以下参数来重新生成数据集：`—chapter` `7` `—listing` `2`。
- en: 'Rerun the dataset summary statistics by rerunning listing 5.2 with these arguments:
    `—chapter` `5` `—listing` `2` `—version` `1`.'
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新运行列表 5.2 并使用以下参数来重新运行数据集摘要统计：`—chapter` `5` `—listing` `2` `—version` `1`。
- en: 'Figure 7.29 shows a typical result for the summary statistics of the original
    unfriend_ per_month metric and the new averaged unfriend per month measured over
    84 days (`unfriend_28day_avg_84day_obs`). The average covers 50% of accounts with
    a nonzero measurement, but the original count covered only 26% of accounts. At
    the same time, the mean value and the percentiles are similar, not three times
    larger, because the metric was measured over a time frame three times as long.
    In fact, the new metrics are somewhat lower: not only is the mean lower, but so
    are the quantiles of the distribution. Think about why that is. (You’ll find out
    the answer in section 7.4.2.)'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.29 展示了原始 unfriend_ per_month 指标和新的平均每月 unfriend 指标（在 84 天内测量，`unfriend_28day_avg_84day_obs`）的典型结果。平均覆盖了具有非零测量的
    50% 的账户，但原始计数仅覆盖了 26% 的账户。同时，平均值和百分位数相似，不是三倍之大，因为指标是在三倍长的时间框架内测量的。实际上，新的指标略低：不仅平均值较低，而且分布的分位数也较低。想想这是为什么。（你将在第
    7.4.2 节中找到答案。）
- en: '![](../Images/7-29.png)'
  id: totrans-314
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-29.png)'
- en: Figure 7.29 Statistics comparing rare simulation events measured at short and
    long time periods
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.29 比较在短时间和长时间期间测量的罕见模拟事件的统计数据
- en: Another benefit of using metrics with longer observation periods than description
    periods is that metrics estimated this way are robust when temporary changes in
    customer activity occur. If you measure some behavior with a one-month period,
    for example, a customer taking a two-week vacation can appear to have a low level
    of activity. Similarly, some customers can go through a brief and intense period
    of activity. In either case, if you measure the average behavior over a three-month
    period, these temporary variations won’t make as much of an impact.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 使用比描述期更长的观察期来衡量指标的好处之一是，这种方式估计的指标在客户活动出现暂时性变化时具有鲁棒性。例如，如果你用一个月的时间来衡量某些行为，一个客户休假两周可能会显得活动水平较低。同样，一些客户可能会经历一段短暂而强烈的活跃期。在两种情况下，如果你在三个月的时间里衡量平均行为，这些暂时性的变化就不会产生太大的影响。
- en: But one downside of using long observation periods for metrics is that the metric
    is no longer up to date as to the latest changes in behavior. With a long observation
    period, when behavior changes, it takes longer for the change to register in the
    metric. The best way to handle this situation is to use the long-observation window
    metrics for most behaviors in combination with a few metrics that measure percentage
    change in behaviors. That way, you have stable estimates of the average level
    of behavior but also a few indicators that will rapidly reveal recent changes.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 但使用长观察期作为指标的一个缺点是，指标不再反映行为的最新变化。使用长观察期时，当行为发生变化时，这种变化在指标中登记的时间会更长。处理这种情况的最佳方式是，在大多数行为中使用长观察窗口指标，并结合一些衡量行为百分比变化的指标。这样，你既有对行为平均水平的稳定估计，也有几个可以迅速揭示最近变化的指标。
- en: One other important problem with measuring behavioral metrics over long time
    frames is taking measurements of new accounts. The problem exists for any measurement
    window, but it is exacerbated when the measurement window is long. If an account
    has been using the service for only a short duration (a tenure shorter than the
    measurement period), the measurement is not valid. Suppose that an old customer
    has only one login per month, so they are a light user of the product and at risk
    for churn. A new customer who joined yesterday can also have only one login in
    the past month, but that’s not the same as the old customer having only one login
    per month.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 在长时间框架内衡量行为指标的一个其他重要问题是衡量新账户。这个问题在任何测量窗口中都存在，但当测量窗口较长时，问题会加剧。如果一个账户只使用了很短的服务时间（低于测量期的任期），那么这个测量是不有效的。假设一个老客户每月只登录一次，因此他们是产品的轻度用户，有流失的风险。一个昨天加入的新客户在过去一个月内也可能只登录过一次，但这并不等同于老客户每月只登录一次。
- en: NOTE Event count measurements made on new customers are not comparable with
    normal accounts that have been around for the entire measurement period.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：对新客户进行的事件计数测量与在整个测量期间都存在的正常账户不可比。
- en: This situation typically applies to customers measured at the time of their
    first renewal. For a monthly renewal subscription, the first measurement of customers
    in your dataset is made after two to three weeks, due to the lead time used in
    observing customers before renewal (as described in chapter 4). If you use four-week
    metric measurement periods, new customers had only one-half to three-quarters
    of the full period, and their metrics are probably underestimated. This problem
    is amplified if you use metric observation periods longer than one month. The
    first renewal is critical, so you don’t want to make this kind of mistake.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况通常适用于在首次续订时进行测量的客户。对于月度续订订阅，你的数据集中客户的首次测量是在续订前两周到三周进行的，这是由于在续订前观察客户所使用的提前期（如第4章所述）。如果你使用四周的指标测量周期，新客户只有整个周期的半到四分之三，他们的指标可能被低估。如果你使用超过一个月的指标观察期，这个问题会加剧。首次续订至关重要，因此你不希望犯这类错误。
- en: 7.4.2 Estimating metrics for new accounts
  id: totrans-321
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4.2 为新账户估计指标
- en: 'As described previously, any metric you measure over a period of several weeks
    or months is not valid for new accounts that have not been using the product that
    long. Fortunately, you have a straightforward way to handle this problem that
    is consistent with the averaging technique you learned in section 7.4.1: you can
    estimate an average by using a shorter time period than you are describing the
    average for. This technique is similar to calculating an average over a long time
    period and describing it as a shorter time period but in reverse. Figure 7.30
    illustrates the concept.'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，任何在几周或几个月内测量的指标对于没有使用产品那么长时间的新账户都是无效的。幸运的是，你有一个简单直接的方法来处理这个问题，这个方法与你在7.4.1节中学到的平均技术一致：你可以使用比描述平均时间更短的时间段来估计平均数。这种技术与在长时间段计算平均值并将其描述为较短时间段的方法类似，但方向相反。图7.30说明了这个概念。
- en: '![](../Images/7-30.png)'
  id: totrans-323
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-30.png)'
- en: Figure 7.30 Estimating long-period metrics with short histories
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.30 使用短期历史估计长期指标
- en: 'The idea is as follows: Suppose that an account has been on a product for two
    weeks and has 10 logins per month. You don’t know how many logins it will have
    after four weeks, but you can make an educated guess—after four weeks, there should
    be twice as many logins as after two weeks. This idea can be extended to scale
    a measurement over any shorter time period to make an estimate of what the average
    measured over a longer time period would be.'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 理念如下：假设一个账户已经使用产品两周，每月有10次登录。你不知道它在四周后会有多少次登录，但你可以做出一个合理的猜测——四周后，登录次数应该是两周后的两倍。这个理念可以扩展到将任何较短时间段的测量扩展到估计较长时间段的平均值。
- en: 'One important caveat is for new customers: if an account has one login after
    one day, does it make sense to estimate that it will have 28 logins after 28 days?
    Superficially, yes, but in practice, no. The problem is that if you estimate starting
    from a short length of time, such as one day, the estimate will be unstable and
    jump around. Suppose that after one day and one login for a customer, you estimate
    28 logins per month. But on day two, the customer doesn’t log in, so your estimate
    becomes 14\. (One login in two days implies 14 logins in 28 days.) That activity
    is a big jump in the estimate of logins_per_month metric in one day. That kind
    of volatility is normal in estimates made from only a few days’ worth of data;
    it usually takes at least 5 to 10 days of data for this kind of estimate to settle
    down. In chapter 3, you learned that most customer behaviors follow weekly cycles,
    so in general, you should use the following rules:'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 一个重要的注意事项是针对新客户：如果一个账户在第一天登录一次，那么在28天后估计它会有28次登录是否合理？表面上看起来是合理的，但实际上并不合理。问题在于，如果你从一个很短的时间段开始估计，比如一天，那么估计将是不稳定的，并且会波动。假设一个客户在第一天登录一次后，你估计他每月有28次登录。但在第二天，客户没有登录，所以你的估计变成了14次。（两天登录一次意味着28天会有14次登录。）这种活动在一天之内对
    logins_per_month 指标的估计产生了很大的波动。这种波动性在仅基于几天数据的估计中是正常的；通常至少需要5到10天的数据，这种估计才会稳定下来。在第3章中，你了解到大多数客户行为遵循每周周期，所以一般来说，你应该使用以下规则：
- en: Do not make estimates for one-month averages until you’ve observed at least
    one week of behavior, and preferably two.
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在观察到至少一周的行为，最好是两周的行为之前，不要对一个月的平均数进行估计。
- en: Similarly, if you are making averages to estimate quarterly or annual counts
    and totals, you should not estimate a metric until you’ve observed a month or
    more of the behavior of interest.
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同样，如果你正在制作平均数来估计季度或年度的计数和总计，你应该在观察到感兴趣的行为至少一个月之后才估计指标。
- en: 'Equation 7.4 provides the math and logic for estimating count metrics for new
    accounts, which also includes the kind of scaling of an average count that you
    learned in section 7.4.1\. The term Count Tmeasure in equation 7.4 refers to the
    actual trailing count of events, and there are three time-period parameters in
    equation 7.3:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 公式7.4提供了为新账户估计计数指标所需的数学和逻辑，这还包括你在7.4.1节中学到的平均计数缩放。公式7.4中的 Count Tmeasure 指的是实际的事件跟踪计数，公式7.3中有三个时间周期参数：
- en: Tmin is the minimum tenure for an account to receive an estimate of this metric
    (one to two weeks for a monthly metric and two to three months for an annual metric).
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tmin 是账户获得此指标估计的最短期限（对于月度指标是一到两周，对于年度指标是两到三个月）。
- en: Tdescribe is the time period that’s used to describe the average (four weeks).
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tdescribe 是用来描述平均时间周期（四周）的。
- en: Tmeasure is the time period that’s used to make the measurement (for an old
    customer).
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tmeasure 是用于测量的时间周期（对于老客户）。
- en: 'Also in equation 7.4, there are three cases based on the subscriber tenure:'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 在公式 7.4 中，根据订阅者任期有三个情况：
- en: If the tenure is less than Tmin, no metric value is calculated.
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果任期小于 Tmin，则不计算任何指标值。
- en: If the tenure is greater than Tmin but less than the time period for describing
    the metric, the count is scaled up by the ratio of the description period to the
    account tenure. This count is the estimated average.
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果任期大于 Tmin 但小于描述指标的时期，计数将按描述期与账户任期的比率进行缩放。这个计数是估计的平均值。
- en: If the tenure is greater than the description period, the count is scaled down
    by the ratio of the description period to the measurement period. This count is
    an average calculated over a longer period.
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果任期大于描述期，计数将按描述期与测量期的比率进行缩放。这个计数是在更长的时间内计算的平均值。
- en: '*If tenure < Tmin*'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果任期 < Tmin*'
- en: '![](../Images/7-30_E00a.png)'
  id: totrans-338
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-30_E00a.png)'
- en: '*Else If Tmin <= tenure <= Tdescribe*'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: '*Else If Tmin <= tenure <= Tdescribe*'
- en: '![](../Images/7-30_E00b.png)'
  id: totrans-340
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-30_E00b.png)'
- en: '*Else*'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '*Else*'
- en: '| ![](../Images/7-30_E04.png) | Equation 7.4 |'
  id: totrans-342
  prefs: []
  type: TYPE_TB
  zh: '| ![图片](../Images/7-30_E04.png) | 公式 7.4 |'
- en: The third case in equation 7.4 is the same as in equation 7.3\. This equation
    adds the logic in the second case, using account tenure.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 公式 7.4 的第三个情况与公式 7.3 相同。此公式在第二个情况下添加了逻辑，使用账户任期。
- en: 'Listing 7.8 gives the SQL that implements equation 7.4 as a metric. This metric
    is a little different from any you’ve seen before: it uses the account tenure
    metric (assumed to be saved in the database already), and, at the same time, it
    makes a count of events. The saved account tenure metric defines the sequence
    of dates for which the new event count metric will be calculated, and the tenure
    value enters into the logic and scaling.'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.8 提供了实现公式 7.4 作为指标的 SQL 代码。这个指标与之前看到的任何指标都略有不同：它使用账户任期指标（假设已保存在数据库中），同时，它还对事件进行计数。保存的账户任期指标定义了新事件计数指标将计算日期序列，任期值进入逻辑和缩放。
- en: 'You might expect there to be an `IF` or `CASE` statement in listing 7.8 to
    implement the case logic from equation 7.4\. Instead, this logic is implemented
    in two separate places:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能预期在列表 7.8 中会有一个 `IF` 或 `CASE` 语句来实现公式 7.4 中的逻辑。相反，这种逻辑在两个不同的地方实现：
- en: The case that there should be no result for accounts with tenure below the minimum
    is implemented with the `WHERE` clause constraint that the tenure metric value
    must be above a minimum.
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于任期低于最小值的账户，应该没有结果的情况是通过 `WHERE` 子句约束实现的，即任期指标值必须高于最小值。
- en: 'The difference between the cases in which the tenure is below the description
    period and those in which the tenure is above the description period is implemented
    by using the `LEAST` function in the denominator of the scaling:'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过在缩放公式的分母中使用 `LEAST` 函数来实现任期低于描述期和高于描述期的情况之间的差异：
- en: When tenure is below the description period, it is the result of the `LEAST`
    function, and the tenure is the denominator for the scaling (the second case).
  id: totrans-348
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当任期低于描述期时，它是 `LEAST` 函数的结果，任期是缩放的分母（第二种情况）。
- en: When the tenure is above the description period, the description period is the
    result of the `LEAST` function, and the description period is the denominator
    of the scaling term.
  id: totrans-349
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当任期高于描述期时，描述期是 `LEAST` 函数的结果，描述期是缩放项的分母。
- en: This logic works as long as the description period is longer than the minimum
    tenure, which should be the case when you use this kind of metric.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 只要描述期长于最小任期，这种逻辑就会起作用，这在使用此类指标时应是这种情况。
- en: Listing 7.8 Scaled count metric with new account estimates
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.8：使用新的账户估计的缩放计数指标
- en: '[PRE19]'
  id: totrans-352
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: ① SELECTs the previously calculated tenure metric
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: ① 选择先前计算的任期指标
- en: ② COUNTs the number of events
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: ② 计算事件数量
- en: ③ Calculates the scaling multiplier (equation 3.2)
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 计算缩放乘数（公式 3.2）
- en: ④ The scaling multiplied by the raw count
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 缩放乘以原始计数
- en: ⑤ INNER JOIN calculates only the metric for accounts with tenure.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: ⑤ 内连接仅计算有任期的账户的指标。
- en: ⑥ JOINs on account ID
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: ⑥ 在账户 ID 上进行连接
- en: ⑦ Limits the events to the appropriate time range
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: ⑦ 限制事件到适当的时间范围
- en: ⑧ The event for which the metric is calculated
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: ⑧ 计算指标的相应事件
- en: ⑨ The metric ID for the account tenure metric
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: ⑨ 账户任期的指标 ID
- en: ⑩ Sets the minimum tenure of accounts for which to calculate
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: ⑩ 设置计算账户最低任期的最小值
- en: ⑪ Includes nonaggregated parts of the SELECT statement (required)
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: ⑪ 包含了 SELECT 语句的非聚合部分（必需）
- en: 'You should run listing 7.8 by using the code in the GitHub repository for the
    Python wrapper program with the arguments `—chapter` `7` `—listing` `8` to calculate
    a new scaled version of the unfriend_per_month metric. Figure 7.31 shows typical
    output from listing 7.8 on the default simulated dataset. Note that listing 7.8
    outputs the count and scaling factor in addition to the final metric value for
    illustrative purposes. Figure 7.31 also illustrates accounts that fall into the
    different cases of equation 7.4:'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 您应使用 GitHub 仓库中 Python 包装程序的代码，通过参数 `—chapter` `7` `—listing` `8` 运行列表 7.8 来计算
    unfriend_per_month 指标的新缩放版本。图 7.31 展示了在默认模拟数据集上列表 7.8 的典型输出。请注意，列表 7.8 除了最终的指标值外，还输出计数和缩放因子以供说明。图
    7.31 还说明了落入方程 7.4 不同情况的账户：
- en: An older account (ID 21) starts with a tenure of 58 days, which is above the
    description period and below the measurement period. The scaling factor is always
    below 1.0, and it reaches a minimum of 0.33 after the tenure is greater than the
    measurement period of 84 days.
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个较老的账户（ID 21）以 58 天的任期开始，这超过了描述期，但低于测量期。缩放因子始终低于 1.0，并且在任期大于 84 天的测量期后达到最小值
    0.33。
- en: Account 12371 appears in the result when it reaches 14 days’ tenure; at this
    point, the scaling factor is 2.0 to produce an estimate of a 28-day average from
    14 days of data. As the tenure increases, the scaling factor falls. At 28 days’
    tenure, the scaling factor is 1.0; at this point, the metric is equivalent to
    an exact 28-day count. After the tenure increases above 28 days. the scaling factor
    falls below 1.0.
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当账户 12371 达到 14 天的任期时，它出现在结果中；此时，缩放因子为 2.0，以从 14 天的数据中估计 28 天的平均值。随着任期的增加，缩放因子下降。在
    28 天的任期时，缩放因子为 1.0；此时，指标相当于精确的 28 天计数。在任期超过 28 天后，缩放因子低于 1.0。
- en: '![](../Images/7-31.png)'
  id: totrans-367
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-31.png)'
- en: Figure 7.31 Sample output for listing 7.8 on the default simulated dataset
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.31 默认模拟数据集上列表 7.8 的样本输出
- en: 'To save the metric in the database, you need to remove the unscaled count and
    scaling columns and then supply the metric name ID as part of an `INSERT` statement.
    A version of the listing that has these changes is in the GitHub repository and
    can be run by adding the `—insert` argument to the script executable statement.
    You should take the following steps:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 要将指标保存到数据库中，您需要删除未缩放的计数和缩放列，然后在 `INSERT` 语句中提供指标名称 ID。具有这些更改的列表版本在 GitHub 仓库中，可以通过在脚本可执行语句中添加
    `—insert` 参数来运行。您应采取以下步骤：
- en: Save the result of listing 7.8 to the database with the arguments `—chapter`
    `7` `—listing` `8` `—insert`.
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用参数 `—chapter` `7` `—listing` `8` `—insert` 将列表 7.8 的结果保存到数据库中。
- en: Regenerate the dataset by rerunning listing 7.2 with the arguments `—chapter`
    `7` `—listing` `2`.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新运行列表 7.2 并使用参数 `—chapter` `7` `—listing` `2` 来重新生成数据集。
- en: Rerun the dataset summary statistics by rerunning listing 5.2 with the arguments
    `—chapter` `5` `—listing` `2` `—version` `1`.
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新运行列表 5.2 并使用参数 `—chapter` `5` `—listing` `2` `—version` `1` 来重新运行数据集汇总统计。
- en: Figure 7.32 shows typical results of the summary statistics. The summary statistics
    show that the new metric (labeled `unfriend_28day_avg_84day_obs_scaled`) has the
    same account coverage as the 12-week period metric (`unfriend_28day_avg_84day_obs`)
    taught in section 7.4.1, but the metric values are somewhat higher, and, in general,
    they are a better match for the simple count metric. The reason is that the unscaled
    metric increases coverage by using a long observation period but does not correct
    for the fact that not all accounts have sufficient tenure to cover that observation
    period. The new metric corrects for this situation with scaling on new accounts.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.32 展示了汇总统计的典型结果。汇总统计显示，新的指标（标记为 `unfriend_28day_avg_84day_obs_scaled`）与第
    7.4.1 节中教授的 12 周期指标（`unfriend_28day_avg_84day_obs`）具有相同的账户覆盖率，但指标值略高，总体上与简单的计数指标更匹配。原因是未缩放的指标通过使用较长的观察期来增加覆盖率，但没有纠正并非所有账户都有足够的任期来覆盖该观察期的事实。新的指标通过对新账户进行缩放来纠正这种情况。
- en: '![](../Images/7-32.png)'
  id: totrans-374
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/7-32.png)'
- en: Figure 7.32 Statistics comparing rare simulation events measured at short and
    long time periods
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.32 比较在短时间和长时间期间测量的罕见模拟事件的统计
- en: 'Because you have the final unfriend_per_month metric, you should also recalculate
    the ratio metric it was used in—unfriend per new friend—and recheck the cohort
    analysis. Following are the additional versions of the program arguments to use:'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 由于你有了最终的每月取消好友数指标，你也应该重新计算它所使用的比率指标——每新增好友取消好友数——并重新检查群体分析。以下是要使用的程序参数的附加版本：
- en: Calculate a new unfriend_per_new_friend metric (`—chapter 7 —listing 1 —version
    7 —insert`).
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算一个新的每新增好友取消好友数指标 (`—第 7 章 —列表 1 —版本 7 —插入`)。
- en: Regenerate the dataset by rerunning listing 7.2 (`—chapter 7 —listing 2`).
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新运行列表 7.2 (`—第 7 章 —列表 2`) 来重新生成数据集。
- en: Run the cohort analyses for unfriend per month and unfriend per new friend by
    rerunning listing 5.1, versions 14 and 16 (`—chapter 5 —listing 1 —version` `14`
    `16`).
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新运行列表 5.1，版本 14 和 16 (`—第 5 章 —列表 1 —版本` `14` `16`) 来运行每月取消好友数和每新增好友取消好友数的群体分析。
- en: Now that you know about scaled metrics based on account tenure, you’re probably
    expecting a case study showing this new technique used in a company. I hate to
    disappoint you, but I don’t have a new company case study to add—because every
    company case study in the book uses metrics with this type of scaling. I didn’t
    mention this fact until now because it would have been too much information for
    you before you learned all the other techniques.
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了基于账户期限的缩放指标，你可能期待一个案例研究来展示这种新技术在公司中的应用。我很抱歉让你失望，但我没有新的公司案例研究可以添加——因为书中所有的公司案例研究都使用了这种类型的缩放指标。我直到现在才提到这个事实，因为在你学习所有其他技术之前，这会是一个过多的信息量。
- en: I always use metrics with the form like listing 7.8 for my case studies because
    these metrics have so many advantages, including highest possible coverage of
    accounts and robust estimation of the metric, without sacrificing the best possible
    estimate for new accounts. The only modest downside is that the metric calculation
    is a bit complicated, which means that you tell your businesspeople it is an average
    (without going into details).
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 我总是使用类似于列表 7.8 的指标来对我的案例研究，因为这些指标具有许多优点，包括对账户的最高可能覆盖率以及稳健的指标估计，而不会牺牲对新账户的最佳可能估计。唯一的适度缺点是指标计算稍微复杂一些，这意味着你告诉你的业务人员这是一个平均值（而不深入细节）。
- en: TAKEAWAY To understand churn, you should use average metrics with longer observation
    periods than the description periods and scaling to make comparable estimates
    of the averages for new accounts. Simple count metrics should be used only to
    measure use of a contracted quantity, in which case the exact count in the contract
    period matters.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '**总结**：要理解客户流失，你应该使用比描述期更长的观察期和缩放来对新账户的平均值进行可比估计的平均指标。简单的计数指标仅应用于衡量合同数量的使用，在这种情况下，合同期间的准确计数很重要。'
- en: 'I use the following standard metrics for churn studies, depending on whether
    the product uses primarily monthly or annual subscriptions:'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 我根据产品主要使用月度或年度订阅，使用以下标准指标进行客户流失研究：
- en: 'For monthly subscriptions, scaled count metrics with the following parameters:'
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于月度订阅，使用以下参数的缩放计数指标：
- en: Tmin = 14 days (2 weeks)
  id: totrans-385
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tmin = 14 天（2 周）
- en: Tdescribe = 28 days (4 weeks)
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tdescribe = 28 天（4 周）
- en: Tmeasure = 84 days (12 weeks)
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tmeasure = 84 天（12 周）
- en: 'For annual subscriptions, scaled count metrics with the following parameters:'
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于年度订阅，使用以下参数的缩放计数指标：
- en: Tmin = 28 days (1 month)
  id: totrans-389
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tmin = 28 天（1 个月）
- en: Tdescribe = 28 days to 84 days (4-12 weeks, 1 month to 1 quarter)
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tdescribe = 28 天至 84 天（4-12 周，1 个月至 1 季度）
- en: Tmeasure = 365 days (1 year)
  id: totrans-391
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tmeasure = 365 天（1 年）
- en: 7.5 User metrics
  id: totrans-392
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5 用户指标
- en: One final area of behavioral measurement you should know about is how to handle
    products with multiple users. These products include multiseat licenses for enterprise
    software and family plans for consumer products.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该了解的最后一个行为度量领域是如何处理具有多个用户的产品。这些产品包括企业软件的多座位许可证和消费者产品的家庭计划。
- en: 7.5.1 Measuring active users
  id: totrans-394
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.5.1 测量活跃用户
- en: The first thing to understand about multiuser products is that it’s still best
    to understand churn at the subscription or account level because all the users
    share one subscription; if the subscription is not renewed, all the users churn
    together.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 关于多用户产品，首先要知道的是，仍然最好在订阅或账户级别理解客户流失，因为所有用户共享一个订阅；如果订阅未续订，所有用户将一起流失。
- en: NOTE Churn does not occur when individual users become inactive on a multiuser
    product.
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：在多用户产品中，当个别用户变得不活跃时不会发生客户流失。'
- en: If you are interested in analyzing user health, you can perform an analysis
    of user activity and inactivity by modifying the techniques for activity-based
    churn analysis from chapter 4\. The goal is still to understand churn at the account
    level, not the user level, and to take advantage of the information about the
    behavior of individual users.
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你对分析用户健康感兴趣，你可以通过修改第4章中基于活动流失分析的技巧来执行用户活动和不活动的分析。目标仍然是理解账户层面的流失，而不是用户层面的流失，并利用有关单个用户行为的信息。
- en: To understand how individual user behavior affects churn, the first important
    question to answer is how many active users there are. This question can be answered
    with a metric based on events, as illustrated in figure 7.33\. It’s similar to
    making a metric by counting events in a time period, but, instead, you count the
    number of distinct users who produced the events. To count the number of active
    users programmatically, you have to have user identifiers stored with the events
    in the database or data warehouse, which requires one additional field in comparison
    with the standard event table schema (table 7.1). You may recall from chapter
    3 that, in general, events can contain optional fields with additional event information,
    so this situation is not too different.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解单个用户行为如何影响流失，首先要回答的一个重要问题是活跃用户有多少。这个问题可以通过基于事件的指标来回答，如图7.33所示。这与在时间段内计数事件以创建指标类似，但不同之处在于，你计数的是产生事件的唯一用户数量。要程序化地计数活跃用户，你必须将用户标识存储在数据库或数据仓库中的事件中，这比标准事件表模式（表7.1）需要额外的一个字段。你可能还记得第3章中提到，通常事件可以包含带有附加事件信息的可选字段，所以这种情况并不太不同。
- en: Table 7.1 Event table with user IDs
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 表7.1 带有用户ID的事件表
- en: '| Column | Type |'
  id: totrans-400
  prefs: []
  type: TYPE_TB
  zh: '| 列 | 类型 |'
- en: '| account_id | Integer or char |'
  id: totrans-401
  prefs: []
  type: TYPE_TB
  zh: '| account_id | 整数或字符 |'
- en: '| event_type_id | Integer or char |'
  id: totrans-402
  prefs: []
  type: TYPE_TB
  zh: '| event_type_id | 整数或字符 |'
- en: '| event_time | Timestamp |'
  id: totrans-403
  prefs: []
  type: TYPE_TB
  zh: '| event_time | 时间戳 |'
- en: '| user_id | Integer or char |'
  id: totrans-404
  prefs: []
  type: TYPE_TB
  zh: '| user_id | 整数或字符 |'
- en: '![](../Images/7-33.png)'
  id: totrans-405
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7-33.png)'
- en: Figure 7.33 Calculating the number of active users from events
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.33 从事件计算活跃用户数量
- en: 'Listing 7.9 shows a short SQL program that counts the number of active users
    as a metric. This listing is practically identical to the simple event count metric
    in chapter 3 with one crucial difference: instead of counting the number of events,
    the aggregation is on the number of `DISTINCT` user IDs. Another difference between
    this metric and standard event count metrics is that this one does not specify
    the type of event: any event indicates user activity. (That option is available,
    of course, and if you want to determine user activity only from certain events,
    that change is easy to make.)'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.9显示了一个简短的SQL程序，它将活跃用户数量作为一个指标进行计数。这个列表实际上与第3章中的简单事件计数指标几乎相同，但有一个关键的区别：不是计数事件的数量，而是对唯一用户ID的数量进行聚合。这个指标与标准事件计数指标之间的另一个区别是，这个指标没有指定事件类型：任何事件都表示用户活动。（当然，这个选项是可用的，如果你只想从某些事件中确定用户活动，这种改变很容易实现。）
- en: TAKEAWAY Counting the number of active users is easy to do with a `DISTINCT`
    aggregation on the user IDs.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 通过对用户ID进行`DISTINCT`聚合，计算活跃用户数量是很容易做到的。
- en: One subtle difference between the active user count metric and event count metric
    is that the count of active users should not be scaled by the tenure or anything
    having to do with the tenure or measurement period. The number of distinct active
    users is an example of an aggregate metric that does not scale in that way. If
    an account has two active users in the first two weeks of a four-week period,
    it doesn’t follow that there will be four active users in four weeks. Mathematically,
    the `DISTINCT` aggregative is not additive, like a `COUNT` aggregation.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 活跃用户计数指标与事件计数指标之间的一个微妙区别是，活跃用户的计数不应该按任期或与任期或测量周期有关的内容进行缩放。唯一活跃用户的数量是一个不按这种方式缩放的聚合指标示例。如果一个账户在四周期的前两周有两个活跃用户，并不意味着四周内会有四个活跃用户。从数学上讲，`DISTINCT`聚合不是可加的，就像`COUNT`聚合一样。
- en: Listing 7.9 Counting the number of active users
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.9 计算活跃用户数量
- en: '[PRE20]'
  id: totrans-411
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: ① This CTE defines the dates on which users will be counted.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: ① 此CTE定义了用户将被计数的日期。
- en: ② Counts the number of users with a COUNT DISTINCT aggregation
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: ② 使用`COUNT DISTINCT`聚合计算用户数量
- en: ③ SELECT limits the query to any events within 12 weeks.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: ③ 使用`SELECT`限制查询为任何12周内的活动。
- en: ④ GROUP BY so the number of users is measured at account level.
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: ④ 使用`GROUP BY`来按账户级别测量用户数量。
- en: The default churn simulation on GitHub does not include users in the simulation,
    but it’s possible to extend the simulation framework to include users. If you
    are interested in the subject, consider extending the framework this way as an
    exercise.
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: GitHub上的默认流失模拟不包括用户，但可以将模拟框架扩展以包括用户。如果你对这个主题感兴趣，可以考虑将框架以这种方式扩展作为练习。
- en: 7.5.2 Active user metrics
  id: totrans-417
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.5.2 活跃用户度量
- en: 'Figure 7.34 shows a case study in measuring the number of active users for
    Klipfolio. The product is sold in multiseat licenses, so there is a metric for
    the number of active users as in listing 7.9, as well as a metric for the number
    of seats sold, using the unit quantity metric pattern as described in chapter
    3\. Figure 7.34 shows that the number of active users is strongly related to churn
    in a pattern that should be familiar by now: churn falls rapidly between one and
    four active users, but then the decrease in risk slows, and there is little difference
    in the churn for customers with dozens of users or more. At the same time, the
    number of licensed users does not appear to be strongly related to churn.'
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.34展示了测量Klipfolio活跃用户数量的案例研究。该产品以多座位许可证的形式销售，因此有一个活跃用户数量的度量，如列表7.9所示，还有一个销售座位数的度量，使用第3章中描述的单位数量度量模式。图7.34显示，活跃用户数量与流失之间存在强烈的关联——这种模式现在应该很熟悉：在1到4个活跃用户之间，流失率迅速下降，但随后风险下降的速度放缓，对于拥有数十个或更多用户的客户，流失率几乎没有差异。同时，许可证用户数量似乎与流失没有强烈的关联。
- en: License utilization is a metric that is defined as the ratio of the number of
    users to the maximum number of allowed users. Sometimes, the number of users is
    measured by creation of user accounts, but for churn, I prefer to measure the
    actual or active license use by making a ratio of the active users divided by
    the number of licensed users. Figure 7.34 also shows the churn cohort analysis
    for license utilization defined this way for Klipfolio. License utilization shows
    a strong relationship to churn—stronger than active users alone. The decrease
    in churn risk with increasing license utilization is fairly continuous for every
    cohort. License utilization is clearly a useful metric for measuring customer
    engagement.
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 许可利用是一个定义为用户数量与允许的最大用户数量之比的度量。有时，用户数量是通过创建用户账户来测量的，但对我来说，为了衡量流失，我更喜欢通过将活跃用户数量除以许可证用户数量来形成一个比率来衡量实际或活跃的许可证使用情况。图7.34还展示了Klipfolio按这种方式定义的许可证利用率的流失
    cohort 分析。许可证利用与流失之间存在强烈的关联——比单独的活跃用户更强烈。随着许可证利用率的增加，流失风险的降低对于每个 cohort 来说相当连续。显然，许可证利用率是一个衡量客户参与度的有用度量。
- en: TAKEAWAY License utilization is a ratio of the number of active users to the
    number of users allowed, and it usually is an important measure of engagement
    for products sold by the user or seat.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: '**总结**：许可利用是活跃用户数量与允许用户数量的比率，通常是对用户或座位销售的产品的参与度的重要衡量指标。'
- en: '![](../Images/7-34.png)'
  id: totrans-421
  prefs: []
  type: TYPE_IMG
  zh: '![图7-34](../Images/7-34.png)'
- en: Figure 7.34 Cohort analysis of churn for Klipfolio’s active users per month
    metric
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.34 Klipfolio每月活跃用户度量指标的客户流失 cohort 分析
- en: 'Figure 7.34 illustrates another type of user metric with another example from
    the Klipfolio case study: dashboard views per user per month. This ratio is made
    from the measurement of dashboard views per month and the number of active users.
    Many metrics of this type are possible. Pretty much any behavior you’ve measured
    at the account level can be divided by the number of active users to form a per
    user ratio. Because the total amount of most behaviors is correlated to total
    number of active users, this type of ratio can result in useful metrics that are
    less correlated to the number of active users, the overall behavior of users,
    or both.'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.34展示了另一种用户度量类型，通过Klipfolio案例研究中的另一个例子来说明：每月每个用户的仪表板查看次数。这个比率是由每月仪表板查看次数和活跃用户数量测量的。这种类型的许多度量都是可能的。几乎任何你在账户级别测量的行为都可以通过活跃用户数量来除，从而形成一个每个用户的比率。因为大多数行为的总量与活跃用户总数相关，这种类型的比率可以产生与活跃用户数量、用户整体行为或两者都较少相关的有用度量。
- en: 7.6 Which ratios to use
  id: totrans-424
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.6 使用哪些比率
- en: You now know a lot about the design and interpretation of customer metrics and
    case studies in customer churn and behavior. In this section, I will tie together
    a few themes and answer a few common questions.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在对客户流失和行为中的客户度量以及案例研究的设计和解释了解了很多。在本节中，我将结合几个主题并回答一些常见问题。
- en: 7.6.1 Why use ratios, and what else is there?
  id: totrans-426
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.6.1 为什么使用比率，还有其他什么？
- en: I have spent a lot of time in this chapter on metrics that are ratios and not
    much time on anything else. I taught you that ratio metrics are a great way to
    understand the relationships between customer behaviors, but are there any other
    options? There are other options, but in my experience, none is as useful. If
    you have a statistics or data science background, you probably have heard of an
    interaction measurement. This concept is similar to a ratio, but instead of dividing
    one metric by another, you multiply the two metrics.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 我在本章中花费了大量时间讲解比率指标，而对其他方面的内容投入的时间并不多。我教过你们，比率指标是理解客户行为之间关系的一种很好的方式，但还有其他选择吗？确实有其他选择，但根据我的经验，没有哪一种像比率指标那样有用。如果你有统计学或数据科学背景，你可能听说过交互测量。这个概念与比率类似，但不是通过将一个指标除以另一个指标，而是将两个指标相乘。
- en: '![](../Images/7-35.png)'
  id: totrans-428
  prefs: []
  type: TYPE_IMG
  zh: '![图7.35](../Images/7-35.png)'
- en: Figure 7.35 Cohort analysis of churn for Klipfolio’s dashboard views per user
    metric
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.35 Klipfolio仪表板每个用户查看的流失率分析
- en: DEFINITION An interaction metric is the product (multiplication) of two other
    metrics.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 定义 交互指标是两个其他指标的乘积（乘法）。
- en: Interaction measurements, like ratios, are ways to understand the relationships
    between behaviors. In fact, in classical statistics, this method is the main one
    for understanding the relationships between measurements. To have a high measurement
    on the interaction term, for example, you must have a high value on both underlying
    metrics. As in a ratio, a zero in either metric means a zero in the interaction.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 交互测量，就像比率一样，是理解行为之间关系的一种方式。实际上，在经典统计学中，这种方法是理解测量之间关系的主要方法。例如，要有一个高交互项的测量值，你必须在这两个基础指标上都有高值。就像比率一样，任一指标为零意味着交互项为零。
- en: An interaction term is a bit like an `and` operation in computer science. If
    you have a computer science background, you may be thinking that you could make
    metrics with a Boolean operation like “Assign a 1 when two metrics are both above
    a certain level.” You can think of a multiplicative interaction as being a more
    nuanced alternative. An interaction isn’t just `0` or `1` when both metrics are
    high; it measures how high both metrics are as a real value. Interaction terms
    also have interesting statistical properties when applied to scores or metrics
    that can take negative values, because when either one metric or the other is
    negative, the interaction measurement takes on a negative value.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 交互项在计算机科学中有点像“与”操作。如果你有计算机科学背景，你可能正在想，你可以使用布尔运算，比如“当两个指标都高于某个特定水平时分配1”。你可以将乘法交互视为一种更细腻的替代方案。当两个指标都高时，交互项不仅仅是`0`或`1`；它测量两个指标的实际高度。当应用于可以取负值的分数或指标时，交互项也有有趣的统计特性，因为当任一指标或另一个指标为负时，交互测量值将变为负值。
- en: If interaction measurements are so interesting and widely used in statistics,
    you may be wondering why I don’t recommend them for churn analysis. The simple
    answer is that no one in the business world understands interaction terms, but
    ratios are easy to understand. That is, metrics that result from the multiplication
    of two other metrics usually have unintuitive units in comparison to ratios. The
    ratio of the amount paid and the number of calls (or videos viewed, and so on)
    is the amount paid per call (or video, and so on), but the multiplication of an
    amount paid and the number of calls (or any behavior) does not have a conventional
    meaning.
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 如果交互测量在统计学中如此有趣且被广泛使用，你可能想知道为什么我不推荐它们用于客户流失分析。简单的答案是，商业世界中没有人理解交互项，而比率则容易理解。也就是说，由两个其他指标相乘得到的指标，与比率相比通常具有不直观的单位。支付金额与通话次数（或观看视频数量等）的比率是每次通话（或视频等）的支付金额，但支付金额与通话次数（或任何行为）的乘积并没有一个常规的意义。
- en: If you took a physics class, you may remember that the multiplication of different
    types of quantities, such as mass (kilograms) and distance (meters), results in
    combined units like kilogram meters. Usually, these units are not too understandable.
    (What’s a dollar call?) The exception that proves the rule is when one of the
    metrics is time and the other metric is a measure of intensity, like a kilowatt
    hour in electricity sales. I have never found a cognitive study that explains
    why ratio units are easy to understand and multiplicative units are not, but that
    fact is clear from everyone’s experience. My advice is to use multiplicative interaction
    metrics only when you already have a business case that gives it an obvious meaning.
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你上过物理课，你可能还记得不同类型数量的乘法，例如质量（千克）和距离（米），会产生组合单位，如千克米。通常，这些单位并不太容易理解。（什么是美元的称呼？）证明规则例外的情况是当一个度量是时间，另一个度量是强度度量时，比如电力销售中的千瓦时。我从未找到过解释为什么比率单位容易理解而乘法单位不容易理解的认知研究，但这个事实从每个人的经验中都很明显。我的建议是，只有在你已经有了一个明显意义的业务案例时，才使用乘法交互度量。
- en: 'Another alternative that is familiar to data scientists and statisticians is
    making metrics from differences (subtraction) of scores rather than ratios (of
    natural scale metrics). In the sidebar in chapter 6 on principal component analysis
    (PCA), I pointed out that PCA does such subtractions implicitly. The idea is that
    if you want to understand the relationship between two metrics, you can look at
    the difference by subtracting one from the other in the same way as taking the
    ratio. This method is not really logical if the metrics are for different things.
    You don’t get a meaningful metric by subtracting the calls someone makes on a
    telco product from the MRR paid, but it is okay to do so after converting the
    metrics to unitless scores. You saw that trick used in chapter 6 for taking average
    groups: scores show whether someone is above average (greater than zero), average
    (near zero), or less than average (a negative number).'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个数据科学家和统计学家熟悉的选择是从得分（减法）而不是比率（自然尺度度量）中创建度量。在第6章关于主成分分析（PCA）的侧边栏中，我指出PCA隐式地进行了这样的减法。想法是，如果你想了解两个度量之间的关系，你可以通过从其中一个减去另一个来查看差异，就像取比率一样。如果度量针对的是不同的事物，这种方法并不真正合理。通过从某人使用的电信产品通话次数中减去MRR支付的度量，你不会得到一个有意义的度量，但在将度量转换为无单位得分后这样做是可以的。你在第6章中看到了这个技巧被用来取平均组：得分显示某人是否高于平均水平（大于零）、平均水平（接近零）或低于平均水平（负数）。
- en: The difference (subtraction) of a calls score and an MRR score is a measure
    of propensity to make calls in relation to the amount paid. So differences between
    metric scores can work like ratios, but once again, the problem is in the interpretation.
    You can tell your businesspeople that you made a metric for dollars per call,
    and they think that’s great; it’s not as easy to explain a metric for the subtraction
    of the calls per month score from the MRR score. When it comes to understandable
    metrics that capture the relationship between two behaviors, ratios are the only
    option. The only exception is if you have technical businesspeople who understand
    the less-intuitive approaches.
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: 通话得分与MRR得分的差异是衡量与支付金额相关的通话倾向的度量。因此，度量得分之间的差异可以像比率一样工作，但问题再次在于解释。你可以告诉你的业务人员你为每通电话的美元制定了度量标准，他们认为那很好；但解释从每月通话得分减去MRR得分的度量标准并不那么容易。当涉及到能够捕捉两种行为之间关系的可理解度量时，比率是唯一的选择。唯一的例外是如果你有理解不那么直观方法的业务技术人员。
- en: 7.6.2 Which ratios to use?
  id: totrans-437
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.6.2 应使用哪些比率？
- en: I hope that at this point, you are convinced that ratio metrics are useful for
    understanding the relationships between different behaviors and how they relate
    to churn and customer engagement. Now is the time to think more generally about
    what ratios to investigate.
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望到这一点，你已经相信比率度量对于理解不同行为之间的关系以及它们与客户流失和客户参与度之间的关系是有用的。现在是时候更广泛地考虑要调查哪些比率了。
- en: First, note that not all metrics can form useful ratios. One requirement is
    that both of the metrics should be nonzero for most customers (and they should
    have no negative values, which is less of a problem). One simple criterion is
    whether a lot of customers have nonzero values for both metrics. Even if you find
    a strong relationship to churn and engagement, a metric that applies to a small
    number of customers is not as useful as one that applies to a lot of customers.
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，要注意并非所有指标都能形成有用的比率。一个要求是，对于大多数客户来说，这两个指标都应该不为零（它们应该没有负值，这不太成问题）。一个简单的标准是，是否有很多客户在这两个指标上都有非零值。即使你发现与活跃度和参与度有强烈的关系，适用于少数客户的指标也不如适用于大量客户的指标有用。
- en: 'A lot of metrics could define ratios in a typical dataset that has dozens of
    event types. If you are familiar with probability and combinatorics, you may recall
    that the number of possible pairs chosen from N items is N × (N - 1). If you have
    N possible metrics, you could choose the numerator of the ratio with N different
    metrics and have N - 1 left over to go in the denominator. That result is a lot
    of combinations, and it raises an additional question: which metric should go
    into the numerator, and which should go into the denominator? The first important
    thing to realize is that you should not try every possible combination.'
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: 在典型的数据集中，有很多事件类型可以定义比率。如果你熟悉概率和组合数学，你可能还记得，从N个项目中选择的可能配对数量是N × (N - 1)。如果你有N个可能的指标，你可以用N个不同的指标选择比率的分子，剩下N
    - 1个用于分母。这样就有很多组合，这又提出了一个额外的问题：哪个指标应该放在分子，哪个应该放在分母？首先重要的是要意识到，你不应该尝试每一个可能的组合。
- en: WARNING Do not create every possible pair of metrics for a possible ratio to
    check the relationship to churn.
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: '**警告**：不要为可能的比率创建每一个可能的指标对来检查与活跃度的关系。'
- en: The reason is that, typically, there are too many combinations, and most will
    not be meaningful. Even so, you risk finding a spurious relationship to churn
    and engagement by checking a lot of metrics.
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: 原因在于，通常情况下，组合方式太多，其中大多数都没有意义。即便如此，通过检查大量指标，你仍然可能会发现一些虚假的关系，从而影响活跃度和参与度。
- en: DEFINITION A spurious relationship between a metric and an outcome is a relationship
    that occurred due to random chance, not due to a repeatable, causal relationship.
    As a result, the relationship is not likely to recur.
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: '**定义**：一个指标与结果之间的虚假关系是指由于随机机会发生的关系，而不是由于可重复的因果关系。因此，这种关系不太可能再次发生。'
- en: If you are new to data analysis, it may sound strange to hear that you can see
    a relationship in your data that is somehow not true, but this problem is well
    known in data science. If you check enough metrics, eventually, you’ll find some
    that appear to be related even though they are not. The problem can be helped
    by using strict criteria to decide when a relationship is strong or weak, which
    is the subject of chapter 8\. But the best practice is to not consider relationships
    that don’t seem to be intuitive to begin with.
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你刚开始接触数据分析，可能会觉得奇怪，因为你可能会发现数据中存在某种并非真实的关系，但这个问题在数据科学中是众所周知的。如果你检查足够的指标，最终你可能会发现一些看似相关但实际上并不相关的指标。可以通过使用严格的准则来判断关系是强还是弱来解决这个问题，这是第8章的主题。但最好的做法是，一开始就不考虑那些看起来并不直观的关系。
- en: TAKEAWAY You mainly consider ratio metrics that make intuitive sense to someone
    in the business.
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
  zh: '**要点**：你主要考虑那些对业务人员来说直观的比率指标。'
- en: 'As you can see, no rule always works; you’ll need to use your knowledge of
    the situation. The same answer goes for which metric should be in the numerator
    and which should be the denominator: whichever one makes more sense. You can try
    the two following approaches:'
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，没有一条规则总是适用；你需要运用你对情况的知识。对于哪个指标应该放在分子和分母的问题，答案也是一样的：哪个更有意义。你可以尝试以下两种方法：
- en: Sometimes, interesting relationships (and good ratio metrics) can exist when
    two metrics are in different parts of a related set of activities. Try looking
    at the ratios of the most common metrics in a correlated group (as described in
    chapter 6); ignore the group members that are less common.
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有时候，当两个指标位于一组相关活动的不同部分时，可能会存在有趣的关系（和良好的比率指标）。尝试查看相关组中最常见指标的比率（如第6章所述）；忽略那些不太常见的组员。
- en: Sometimes, there are interesting relationships between different areas of activity.
    Try testing a ratio of the most common metrics in one correlated group with the
    most common metric in another correlated group. Again, don’t bother with any less
    common metrics.
  id: totrans-448
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有时，不同活动领域之间存在有趣的关系。尝试测试一个相关组中最常见指标与另一个相关组中最常见指标的比率。再次，不必担心任何不太常见的指标。
- en: Table 7.2 summarizes the most common cases for engagement and churn that are
    covered in this chapter.
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 表7.2总结了本章中涵盖的参与度和流失最常见的情况。
- en: Table 7.2 Summary of ratio metrics for customer engagement
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 表7.2 客户参与度比率指标摘要
- en: '| Name | Ratio | Correlation | Information |'
  id: totrans-451
  prefs: []
  type: TYPE_TB
  zh: '| 名称 | 比率 | 相关性 | 信息 |'
- en: '| Unit cost | MRR/Use | Customers on more expensive plans typically use the
    product more. | Unit cost shows whether the per unit price is high or low in comparison
    to other customers. |'
  id: totrans-452
  prefs: []
  type: TYPE_TB
  zh: '| 单位成本 | MRR/使用 | 在更昂贵计划上的客户通常使用产品更多。 | 单位成本显示与其他客户相比，每单位价格是高还是低。|'
- en: '| Unit value | Use/MRR | Customers on more expensive plans typically use the
    product more. | Unit value shows whether use is high or low relative to the price
    paid. |'
  id: totrans-453
  prefs: []
  type: TYPE_TB
  zh: '| 单位价值 | 使用/MRR | 在更昂贵计划上的客户通常使用产品更多。 | 单位价值显示使用相对于支付的价格是高还是低。|'
- en: '| Utilization | Use/Allowance | Customers on a plan that allows a lot of use
    usually use more. | Utilization shows whether use is close to the limit. |'
  id: totrans-454
  prefs: []
  type: TYPE_TB
  zh: '| 利用率 | 使用/允许 | 在允许大量使用的计划上的客户通常使用得更多。 | 利用率显示使用是否接近限制。|'
- en: '| Success rate (or efficiency) | Successes/Total attempts | Customers who attempt
    something a lot succeed more by sheer persistence. | Success rate shows whether
    the customer is relatively successful or efficient at an activity. |'
  id: totrans-455
  prefs: []
  type: TYPE_TB
  zh: '| 成功率（或效率）| 成功次数/总尝试次数 | 尝试很多事情的客户通过纯粹的坚持而更成功。 | 成功率显示客户在活动中的相对成功或效率。|'
- en: '| Percent of total | Part/Whole | Assume that some activity falls into mutually
    exclusive categories: customers who use the product a lot use a lot in all categories.
    | Percent of total shows whether a customer is relatively high or low in the categories,
    apart from the overall level of use. |'
  id: totrans-456
  prefs: []
  type: TYPE_TB
  zh: '| 总计百分比 | 部分/整体 | 假设某些活动属于相互排斥的类别：使用产品较多的客户在所有类别中都使用得较多。 | 总计百分比显示客户在类别中的相对高低，除了整体使用水平之外。|'
- en: '| Percentage change | (Current metric/Past metric) -1.0 | If a customer uses
    the product a lot now, they probably used it a lot in the past. | Percentage change
    shows whether use is high or low relative to the customer’s own history. |'
  id: totrans-457
  prefs: []
  type: TYPE_TB
  zh: '| 百分比变化 | (当前指标/过去指标) -1.0 | 如果客户现在使用产品很多，他们可能过去也使用得很多。 | 百分比变化显示使用相对于客户自己的历史是高还是低。|'
- en: A lot of interesting ratio metrics are not listed in table 7.2, so think of
    this table as being illustrative rather than exhaustive. But the table should
    be enough to get you going.
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 许多有趣的比率指标没有列在表7.2中，所以请将此表视为说明性的，而不是详尽的。但这个表应该足以让你开始。
- en: Summary
  id: totrans-459
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Metrics created from ratios of other metrics can reveal how the balance between
    behaviors is related to churn and engagement.
  id: totrans-460
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从其他指标的比率中创建的指标可以揭示行为平衡与流失和参与度之间的关系。
- en: Ratio metrics are usually less correlated with the numerator and denominator
    metrics than those metrics are with each other.
  id: totrans-461
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比率指标通常与分子和分母指标的相关性低于这些指标相互之间的相关性。
- en: A recurring unit cost metric is the ratio of some cost of using the product
    (such as paying MRR or watching ads) to an outcome of using the product (such
    as making calls or viewing content).
  id: totrans-462
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重复单位成本指标是使用产品的一些成本（如支付MRR或观看广告）与使用产品的结果（如打电话或查看内容）之间的比率。
- en: Churn usually increases with increasing values of a recurring unit cost metric,
    even when the nonunit recurring cost metric itself (plain MRR or number of ads)
    does not show increasing churn.
  id: totrans-463
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 流失率通常随着重复单位成本指标值的增加而增加，即使非单位重复成本指标本身（纯MRR或广告数量）没有显示出增加的流失率。
- en: The ratio of a downstream event in some process to an upstream event can be
    viewed as an efficiency measure. Examples include transactions per customer or
    saves per edit of a document.
  id: totrans-464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某个过程中的下游事件与上游事件的比例可以被视为一个效率指标。例如，包括每客户的交易次数或每份文档编辑的节省量。
- en: The ratio of the completion, or successful outcome, of a process to the number
    of attempts is a success rate. An accepted request rate is an example of such
    a metric.
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过程完成或成功结果与尝试次数的比例是成功率。接受请求率是此类指标的例子。
- en: Churn can increase or decrease with increased values on efficiency and success
    ratio metrics, depending on the characteristics of the business.
  id: totrans-466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 流失率会随着效率和成功率指标值的增加而增加或减少，具体取决于业务的特征。
- en: A percent of total ratio is a special case of a ratio in which the numerator
    is part of an overall total represented by the denominator. Examples include percentage
    of calls made to different regions and percentage of shows viewed in different
    categories (Action, Comedy, Drama, and so on).
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总比率中的百分比是一个特殊的比率情况，其中分子是分母表示的总体总量的部分。例如，包括对不同地区拨打电话的百分比和在不同类别（动作、喜剧、戏剧等）中观看的节目百分比。
- en: Percent of total metrics can be used to understand how the balance of behavior
    in different categories relates to churn and engagement when the level in all
    categories is correlated.
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总比率中的百分比指标可以用来理解不同类别中行为平衡与所有类别水平相关时，与流失率和参与度之间的关系。
- en: A percentage change metric is the ratio of the change in a metric value over
    some period of time to the value of the metric at the start of the time period.
    An example is the percentage change in the number of logins from one month to
    the next.
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 百分比变化指标是某个时间段内指标值变化的比率与该时间段开始时指标值的比率。例如，从一个月到下一个月登录次数的百分比变化。
- en: Percentage change metrics can be used to analyze whether increases or decreases
    in any behavior predict future churn and engagement.
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 百分比变化指标可以用来分析任何行为的增加或减少是否预示着未来的流失率和参与度。
- en: Time since last event is a metric for understanding how periods of inactivity
    relate to future churn.
  id: totrans-471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自上次事件以来经过的时间是理解不活跃期与未来流失率之间关系的指标。
- en: Active users can be measured when a product tracks multiple user IDs.
  id: totrans-472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当产品跟踪多个用户ID时，可以测量活跃用户。
- en: Active users can be used to form a variety of ratio metrics, such as license
    utilization, which is the ratio of active users to the number of users allowed.
  id: totrans-473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 活跃用户可以用来形成各种比率指标，例如许可证利用率，这是活跃用户数与允许用户数的比率。
- en: Any count metric measured on a time period can be described as an average for
    a shorter time period or as an estimate for a longer time period.
  id: totrans-474
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 任何在时间段内测量的计数指标都可以描述为较短时间段的平均值或较长时间段的估计值。
- en: A single scaled metric can combine estimates for new accounts with averages
    for mature accounts. This method is the best way to calculate count and total
    metrics for analyzing churn and engagement.
  id: totrans-475
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单个缩放指标可以结合新账户的估计值和成熟账户的平均值。这种方法是计算用于分析流失率和参与度的计数和总指标的最佳方式。
