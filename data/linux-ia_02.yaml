- en: 'Chapter 2\. Linux virtualization: Building a Linux working environment'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第二章\. Linux虚拟化：构建Linux工作环境
- en: '*This chapter covers*'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: Finding the right virtualization technology
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 寻找合适的虚拟化技术
- en: Using Linux repository managers
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Linux仓库管理器
- en: Building effective environments using VirtualBox
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用VirtualBox构建有效的环境
- en: Building containers with LXC
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用LXC构建容器
- en: How and when to closely manage VMs
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何以及何时密切管理虚拟机
- en: 'Virtualization is the single most important technology behind almost all recent
    improvements in the way services and products are delivered. It’s made entire
    industries from cloud computing to self-driving cars not only possible, but compelling.
    Curious? Here are two virtualization facts you’ll need to know from the start:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟化是几乎所有最近在服务和服务产品交付方式改进背后的单一最重要的技术。它使从云计算到自动驾驶汽车等整个行业不仅成为可能，而且变得引人入胜。好奇吗？以下是您从一开始就需要了解的两个虚拟化事实：
- en: Linux absolutely dominates the virtual space.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux在虚拟空间中绝对占据主导地位。
- en: Virtualization makes it easier to learn any technology.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟化使学习任何技术都变得更容易。
- en: This chapter gives a good taste of the dominant enterprise virtualization technologies
    currently in use. But more to the point, it also enables you to use a virtualized
    environment where you can safely learn Linux administration skills. Why does this
    rather sophisticated technology show up so early in the book? Because it’ll make
    it much easier for you to work through the rest of the chapters.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了目前广泛使用的占主导地位的企业虚拟化技术。但更重要的是，它还使您能够在虚拟环境中安全地学习Linux管理技能。为什么这种相当复杂的技术会在书中出现得这么早？因为它会使您处理剩余章节的内容变得容易得多。
- en: Need a fresh, clean operating system (OS) to try something new? Create one in
    a few seconds. Made a configuration error that’s locked you out of your machine?
    No problem. Kill it and launch a new one. Along the way, you’ll learn how to use
    Linux package managers to download, install, and manage all the software (like
    VirtualBox and LXC) that you’ll need.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 需要一个全新的、干净的操作系统（OS）来尝试新事物？只需几秒钟就可以创建一个。配置错误导致您无法访问您的机器？没问题。终止它并启动一个新的。在这个过程中，您将学习如何使用Linux软件包管理器下载、安装和管理所有需要的软件（如VirtualBox和LXC）。
- en: 2.1\. What is virtualization?
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.1\. 什么是虚拟化？
- en: Once upon a time when you wanted a new server to provide some web server or
    document share for your company or its customers, you’d need to research, request
    budget approval, negotiate, order, safely house, provision, and then launch a
    brand-new machine. The process from start to finish could take months (trust me
    on that one—I’ve been there). And when increasing demand on that service threatened
    to overwhelm the server’s capacity, you’d start the whole thing over again, hoping
    to eventually get the capacity/demand balance right.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 以前，当您想为您的公司或其客户提供新的服务器以提供一些网络服务器或文档共享时，您需要研究、申请预算批准、协商、订购、安全存放、配置和最后启动一台全新的机器。整个过程可能需要数月时间（请相信我——我经历过）。当对该服务的需求增加威胁到服务器容量时，您将重新开始整个过程，希望最终能够平衡容量/需求。
- en: A common scenario would see a company providing multiple but codependent services,
    each run on its own hardware. Picture a frontend web server deployed along with
    a database in the backend. When the dust settled, however, you’d often end up
    with one server deeply underused and one (usually right next to it on the rack)
    unable to keep up. But imagine you could securely share the compute, memory, storage,
    and networking resources of a single high-capacity server among multiple services.
    Imagine being able to carve virtual server instances out of that physical server
    by assigning them only the level of resources they need, and then instantly adjusting
    capacity to meet changing demands.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 一个常见的场景是，一家公司提供多个但相互依赖的服务，每个服务都运行在自己的硬件上。想象一下，一个前端网络服务器与后端数据库一起部署。然而，当尘埃落定后，您通常会发现自己有一台服务器深度未使用，而另一台（通常就在机架旁边）无法跟上。但想象一下，您能否在多个服务之间安全地共享单个高容量服务器的计算、内存、存储和网络资源。想象一下，您能否通过仅分配它们所需的资源级别，从物理服务器中切割出虚拟服务器实例，然后立即调整容量以满足不断变化的需求。
- en: Now imagine being able to efficiently pack dozens of those virtual computers
    running multiple operating systems onto a single bare-metal server so that absolutely
    nothing is ever wasted. Imagine then being able to have those virtual machines
    (VMs) automatically spill over onto other physical servers as the first ones fill
    up. Imagine too the convenience of being able to kill a VM that’s failed or in
    need of an update, and replace it so quickly that users might never realize anything
    has changed. Got that image in your head (hopefully, it’s something like [figure
    2.1](#ch02fig01))? You’re imagining *virtualization*.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 现在想象一下，能够高效地将运行多个操作系统的数十个虚拟计算机打包到单个裸机服务器上，这样就不会有任何浪费。想象一下，当第一个服务器填满时，那些虚拟机（VM）能够自动溢出到其他物理服务器上。再想象一下，能够迅速杀死一个失败的VM或需要更新的VM，并且替换得如此之快，以至于用户可能永远不会意识到有任何变化。在你的脑海中形成了那个图像（希望它类似于[图2.1](#ch02fig01)）吗？你正在想象*虚拟化*。
- en: Figure 2.1\. VM clients of a hardware host with connectivity to each other and
    to a larger network through an external router
  id: totrans-16
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.1\. 具有相互连接以及通过外部路由器连接到更大网络的硬件主机VM客户端
- en: '![](Images/02fig01_alt.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/02fig01_alt.jpg)'
- en: That image is so attractive that it now dominates the enterprise computing world.
    At this point, I doubt there are many local or cloud-based server loads left that
    aren’t running on some kind of virtualization technology. And the OS running the
    vast majority of those virtual workloads is Linux.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 那张图片如此吸引人，现在它已经主导了企业计算领域。此时，我怀疑还有许多本地或基于云的服务器负载没有运行在某种虚拟化技术上。而运行这些大量虚拟工作负载的操作系统是Linux。
- en: Amazon Web Services (AWS), by the way, lets customers rent capacity on (Linux)
    servers hosting millions of VMs that, in turn, run countless workloads, including
    many of the most popular online services. [Figure 2.2](#ch02fig02) shows how an
    AWS Elastic Compute Cloud (EC2) VM instance serves as a hub for a full range of
    storage, database, and networking tools.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 顺便说一句，亚马逊网络服务（AWS）允许客户租用（Linux）服务器上的容量，这些服务器托管着数百万个虚拟机（VM），这些虚拟机反过来运行着无数的工作负载，包括许多最受欢迎的在线服务。[图2.2](#ch02fig02)展示了AWS弹性计算云（EC2）虚拟机实例如何作为一个全面存储、数据库和网络工具的中心。
- en: Figure 2.2\. A typical cloud computing workload centered around AWS’s Elastic
    Cloud Compute (EC2) VM instances on Amazon Web Services
  id: totrans-20
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.2\. 以亚马逊网络服务（AWS）的弹性云计算（EC2）虚拟机实例为中心的典型云计算工作负载
- en: '![](Images/02fig02_alt.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/02fig02_alt.jpg)'
- en: Don’t worry if some of those AWS details are a bit obscure—they’re not the subject
    of this book in any case. But if you do find yourself wanting to learn more about
    Amazon Web Services, you could always read my book *Learn Amazon Web Services
    in a Month of Lunches* (Manning, 2017). And virtualization? There’s my *Teach
    Yourself Linux Virtualization and High Availability* (LULU Press, 2017).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '如果你对那些AWS细节感到有些晦涩，不要担心——无论如何，它们都不是这本书的主题。但如果你发现自己想了解更多关于亚马逊网络服务的信息，你总是可以阅读我的书《一个月午餐时间学习亚马逊网络服务》（Manning，2017年）。至于虚拟化？这是我的《自学Linux虚拟化和高可用性》（LULU
    Press，2017年）。 '
- en: 'This next short section might feel a bit heavy, but it’ll help provide some
    context for those of you interested in understanding how things are working under
    the hood. Successful virtualization uses some kind of isolated space on a physical
    computer where a guest OS can be installed and then fooled into thinking that
    it’s all alone on its own computer. Guest operating systems can share network
    connections so that their administrators can log in remotely (something I’ll discuss
    in [chapter 3](kindle_split_011.xhtml#ch03)) and do their work exactly as they
    would on traditional machines. Those same shared network connections allow you
    to use the VMs to provide public services like websites. Broadly speaking, there
    are currently two approaches to virtualization:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个简短的部分可能会感觉有点沉重，但它将帮助那些对了解内部工作原理感兴趣的人提供一些背景信息。成功的虚拟化使用物理计算机上的某种隔离空间，其中可以安装客户操作系统，然后欺骗它认为它独自在自己的计算机上。客户操作系统可以共享网络连接，以便管理员可以远程登录（我将在[第3章](kindle_split_011.xhtml#ch03)中讨论这一点）并像在传统机器上一样完成他们的工作。这些相同的共享网络连接允许您使用虚拟机提供像网站这样的公共服务。广义而言，目前有两种虚拟化方法：
- en: '*Hypervisors*—Controls host system hardware to one degree or another, providing
    each guest OS the resources it needs ([figure 2.3](#ch02fig03)). Guest machines
    are run as system processes, but with virtualized access to hardware resources.
    AWS servers, for instance, have long been built on the open source Xen hypervisor
    technology (although they’ve recently begun switching some of their servers to
    the equally open source KVM platform). Other important hypervisor platforms include
    VMware ESXi, KVM, and Microsoft’s Hyper-V.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*虚拟机管理程序*—在一定程度上控制宿主系统硬件，为每个客户操作系统提供所需的资源（[图2.3](#ch02fig03)）。客户机作为系统进程运行，但具有虚拟化访问硬件资源的权限。例如，AWS服务器长期以来一直基于开源的Xen虚拟机管理程序技术（尽管他们最近开始将一些服务器切换到同样开源的KVM平台）。其他重要的虚拟机管理程序平台包括VMware
    ESXi、KVM和微软的Hyper-V。'
- en: Figure 2.3\. A type 2 hypervisor architecture showing full operating systems
    installed on each guest with some special administration duties delegated to Guest1
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.3\. 类型2虚拟机管理程序架构图，显示了每个客户机安装了完整的操作系统，并将一些特殊管理任务委托给Guest1
- en: '![](Images/02fig03_alt.jpg)'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](Images/02fig03_alt.jpg)'
- en: '*Containers*—Extremely lightweight virtual servers that, rather than running
    as full operating systems, share the underlying kernel of their host OS (see [figure
    2.4](#ch02fig04)). Containers can be built from plain-text scripts, created and
    launched in seconds, and easily and reliably shared across networks. The best-known
    container technology right now is probably Docker. The Linux Container (LXC) project
    that we’ll be working with in this chapter was Docker’s original inspiration.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*容器*—极其轻量级的虚拟服务器，它们不是作为完整的操作系统运行，而是共享宿主操作系统的底层内核（见[图2.4](#ch02fig04)）。容器可以从纯文本脚本构建，几秒钟内创建和启动，并且可以轻松可靠地在网络上共享。目前最知名的容器技术可能是Docker。在本章中我们将要使用的Linux容器（LXC）项目是Docker的原始灵感来源。'
- en: Figure 2.4\. LXC architecture showing access between the LXC environment and
    both the Linux kernel and the hardware layer beneath it
  id: totrans-28
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.4\. LXC架构图，显示了LXC环境与Linux内核及其下硬件层之间的访问
- en: '![](Images/02fig04_alt.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig04_alt.jpg)'
- en: 'No one technology is right for every project. But if you decide to hang around
    for the rest of this chapter, you’re going to learn how and why to use two virtualization
    technologies: VirtualBox (a type 2 hypervisor) and, as I mentioned earlier, LXC
    (a container manager).'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 没有任何一种技术适合每个项目。但如果你决定继续阅读本章的其余部分，你将学习如何以及为什么使用两种虚拟化技术：VirtualBox（类型2虚拟机管理程序）和之前提到的LXC（容器管理器）。
- en: '|  |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Design considerations**'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**设计考虑因素**'
- en: 'I wouldn’t want you to walk away from this book without at least some basic
    guidelines for choosing virtualization technologies, so here are some thoughts:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 我不希望你在离开这本书时没有至少一些基本指南来选择虚拟化技术，所以这里有一些想法：
- en: Full-sized hypervisors like Xen and KVM (through a management frontend like
    Libvirt) are normally used for enterprise-sized deployments involving large fleets
    of Linux VMs.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完整大小的虚拟机管理程序，如Xen和KVM（通过如Libvirt这样的管理前端），通常用于涉及大量Linux虚拟机的大型企业级部署。
- en: VirtualBox (and VMware’s Player) are perfect for testing and experimenting with
    live operating systems, one or two at a time, without the need to install them
    to actual PCs. Their relatively high overhead makes them unsuitable for most production
    environments.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VirtualBox（以及VMware的Player）非常适合测试和实验实时操作系统，一次一个或两个，无需在真实PC上安装。它们相对较高的开销使它们不适合大多数生产环境。
- en: Container technologies like LXC and Docker are lightweight and can be provisioned
    and launched in mere seconds. LXC containers are particularly well suited to playing
    with new technologies and safely building OS software stacks. Docker is currently
    the technology running countless dynamic, integrated fleets of containers as part
    of vast microservices architectures. (I’ll talk a bit more about microservices
    in [chapter 9](kindle_split_017.xhtml#ch09).)
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类似于LXC和Docker的容器技术轻量级，可以在几秒钟内配置和启动。LXC容器特别适合于尝试新技术和构建操作系统软件栈。Docker目前是运行无数动态、集成容器编队的核心技术，这些编队是庞大微服务架构的一部分。（我将在[第9章](kindle_split_017.xhtml#ch09)中详细谈谈微服务。）
- en: '|  |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 2.2\. Working with VirtualBox
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2\. 使用VirtualBox
- en: There’s a lot you can do with Oracle’s open source VirtualBox. You can install
    it on any OS (including Windows) running on any desktop or laptop computer, or
    use it to host VM instances of almost any major OS.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Oracle的开源VirtualBox，你可以将它安装在运行在任何桌面或笔记本电脑上的任何操作系统（包括Windows）上，或者用它来托管几乎所有主要操作系统的虚拟机实例。
- en: '|  |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Installing VirtualBox on a Windows PC**'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**在Windows PC上安装VirtualBox**'
- en: Want to try all this out from a Windows PC? Head over to the VirtualBox website
    ([https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads))
    and download the executable archive. Click the file you’ve downloaded, and then
    work through a few setup steps (the default values should all work). Finally,
    you’ll be asked whether you’re OK with a possible reset of your network interfaces
    and then whether you want to install VirtualBox. You do.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 想要从Windows PC尝试所有这些？请访问VirtualBox网站([https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads))并下载可执行存档。点击你下载的文件，然后完成几个设置步骤（默认值应该都适用）。最后，你会被问及是否可以重置你的网络接口，然后是否要安装VirtualBox。你当然会安装。
- en: '|  |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: VirtualBox provides an environment within which you can launch as many virtual
    computers as your physical system resources can handle. And it’s a particularly
    useful tool for safely testing and learning new administration skills, which is
    our primary goal right now. But before that’ll happen, you need to know how downloading
    and installing software on Linux works.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: VirtualBox提供了一个环境，在这个环境中，你可以启动尽可能多的虚拟计算机，数量取决于你的物理系统资源。它尤其适用于安全测试和学习新的管理技能，这是我们现在的首要目标。但在那之前，你需要了解在Linux上下载和安装软件的工作原理。
- en: 2.2.1\. Working with Linux package managers
  id: totrans-45
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.1\. 使用Linux包管理器
- en: 'Getting VirtualBox happily installed on an Ubuntu machine is simple. It takes
    two commands:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在Ubuntu机器上顺利安装VirtualBox很简单。只需要两个命令：
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '|  |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-49
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: Remember that the `#` prompt means this command requires admin privileges, which
    are normally accessed by prefacing the command with `sudo`.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，`#` 提示符表示此命令需要管理员权限，通常通过在命令前加上 `sudo` 来访问。
- en: '|  |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'But what happened in our example? It all revolves around the software package
    manager called Advanced Package Tool (APT, more commonly known as *apt*). In the
    Linux world, package managers connect computers to vast online repositories of
    thousands of software applications, most of them free and open source. The manager,
    which comes installed with Linux by default, has a number of jobs:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 但在我们的例子中发生了什么？一切都围绕着名为高级包工具（Advanced Package Tool，简称APT，更常被称为*apt*）的软件包管理器。在Linux世界中，包管理器将计算机连接到成千上万软件应用的庞大在线仓库，其中大多数是免费和开源的。默认情况下随Linux安装的管理器有几个任务：
- en: Maintains a local index to track repositories and their contents
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 维护本地索引以跟踪仓库及其内容
- en: Tracks the status of all the software that’s installed on your local machine
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跟踪你本地机器上安装的所有软件的状态
- en: Ensures that all available updates are applied to installed software
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保将所有可用的更新应用到已安装的软件
- en: Ensures that software dependencies (other software packages or configuration
    parameters required by the package you’re installing) are met for new applications
    before they’re installed
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在安装新应用程序之前确保软件依赖项（你安装的包所需的其它软件包或配置参数）得到满足
- en: Handles installing and removing software packages
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理软件包的安装和卸载
- en: '[Figure 2.5](#ch02fig05) illustrates some elements of the ongoing relationship
    between an online software repository and the package manager running on a Linux
    computer.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '[图2.5](#ch02fig05) 展示了在线软件仓库与运行在Linux计算机上的包管理器之间持续关系的一些要素。'
- en: Figure 2.5\. The relationships among master software repositories, mirror download
    servers, and Linux running on an end user machine
  id: totrans-59
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.5\. 主软件仓库、镜像下载服务器和终端用户机上运行的Linux之间的关系
- en: '![](Images/02fig05_alt.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig05_alt.jpg)'
- en: The system works incredibly well and, for historical and economic reasons, there’s
    nothing quite like it outside of the Linux world. The thing is, though, that the
    manager you use will depend on your particular Linux distribution. By and large,
    if your distribution falls within the Debian/Ubuntu family, then you’ll use APT.
    Members of the Red Hat family will use the RPM manager and Yum (or its new DNF
    replacement). [Table 2.1](#ch02table01) shows a partial list of distributions.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 该系统工作得非常好，并且由于历史和经济原因，在Linux世界之外几乎没有与之相当的东西。但是，你要知道，你所使用的管理器将取决于你的特定Linux发行版。总的来说，如果你的发行版属于Debian/Ubuntu家族，那么你会使用APT。Red
    Hat家族的成员将使用RPM管理器和Yum（或其新的DNF替代品）。[表2.1](#ch02table01) 显示了部分发行版列表。
- en: Table 2.1\. Package managers and distros
  id: totrans-62
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表2.1\. 包管理器和发行版
- en: '| Package manager | Distribution |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 包管理器 | 发行版 |'
- en: '| --- | --- |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| APT | Debian |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| APT | Debian |'
- en: '|   | Ubuntu |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '|   | Ubuntu |'
- en: '|   | Mint |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '|   | Mint |'
- en: '|   | Kali Linux |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '|   | Kali Linux |'
- en: '| RPM | Red Hat Enterprise Linux |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| RPM | Red Hat Enterprise Linux |'
- en: '|   | CentOS |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '|   | CentOS |'
- en: '|   | Fedora |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '|   | Fedora |'
- en: '| YaST | SUSE Linux |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| YaST | SUSE Linux |'
- en: '|   | OpenSUSE |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '|   | OpenSUSE |'
- en: Besides using a package manager to install software from remote repositories,
    you may need to download software from a website. Often, you’ll find packages
    that were formatted by their developers to work with APT or Yum once installed
    from the command line using a backend tool. Say, for instance, you want to use
    Skype. Heading over to its download page ([figure 2.6](#ch02fig06)) will let you
    download either a DEB or RPM file of the Skype for Linux package. You’d choose
    DEB if you’re using a Debian-based distribution and APT, or RPM if you’re in the
    Yum-loving Red Hat family.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用包管理器从远程仓库安装软件外，您可能还需要从网站下载软件。通常，您会发现一些软件包，它们的开发者已经格式化以与APT或Yum兼容，一旦从命令行使用后端工具安装，您就可以使用它们。比如说，您想使用Skype。访问其下载页面([图2.6](#ch02fig06))可以让您下载Skype
    Linux包的DEB或RPM文件。如果您使用的是基于Debian的发行版和APT，则选择DEB；如果您属于喜欢Yum的Red Hat家族，则选择RPM。
- en: Figure 2.6\. The download page for Skype for Linux. Note the separate links
    for the Debian (APT) and RPM (Yum) package managers.
  id: totrans-75
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.6\. Skype for Linux的下载页面。注意Debian (APT)和RPM (Yum)包管理器的单独链接。
- en: '![](Images/02fig06_alt.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig06_alt.jpg)'
- en: Working with the Debian package manager
  id: totrans-77
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 使用Debian包管理器
- en: 'Once you download the file, you can install it from the command line using
    `dpkg`. Use the `-i` flag (for install). You’ll need to make sure that you’re
    running the `dpkg` command from the directory where the skypeforlinux-64 file
    is located. This example assumes that you saved the package to the Downloads directory
    in your user account:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 下载文件后，您可以使用 `dpkg` 从命令行安装它。使用 `-i` 标志（表示安装）。您需要确保您从包含skypeforlinux-64文件的目录中运行
    `dpkg` 命令。此示例假设您将包保存到用户账户的下载目录中：
- en: '[PRE1]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `dpkg` command should take care of dependencies for you. But if it doesn’t,
    its output will usually give you enough information to know what’s going on.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '`dpkg`命令应该会为您处理依赖项。但如果它没有这样做，它的输出通常会提供足够的信息，让您知道发生了什么。'
- en: '|  |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**What’s with that “-64”?**'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '**“-64”是什么意思？**'
- en: Linux, like other x86-based operating systems, comes in both 64-bit and 32-bit
    versions. The vast majority of computers manufactured and sold over the past decade
    use the faster 64-bit architecture. Because there’s still older or development-oriented
    hardware out there, you’ll sometimes need to run 32-bit, and you’ll want the software
    you install to work with it.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: Linux，像其他基于x86的操作系统的版本一样，有64位和32位版本。过去十年中制造和销售的绝大多数计算机使用的是更快的64位架构。因为仍然有较旧的或面向开发的硬件存在，您有时需要运行32位，并且您希望安装的软件能够与它兼容。
- en: You can check for yourself by running `arch` from the command line. Unless you
    know you’re running on older hardware (something Linux does particularly well,
    by the way), you’re safe assuming that you’re a 64-bit kind of person.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过在命令行中运行 `arch` 来自行检查。除非您知道您正在使用较旧的硬件（顺便说一句，Linux在这方面做得特别出色），否则您安全地假设您是一个64位用户。
- en: '|  |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Installing VirtualBox for the RPM package manager
  id: totrans-86
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 为RPM包管理器安装VirtualBox
- en: Earlier, I introduced `apt update` and `apt install virtualbox`. What did those
    brief commands do? To explain, I’ll install the same VirtualBox software on a
    machine running the Fedora Linux distribution. Because I’ll use Red Hat’s DNF
    package manager, it’ll require a few extra steps—which is a good thing, because
    running them will illustrate how the process works. The process is a bit involved,
    so [table 2.2](#ch02table02) lists the steps.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 之前，我介绍了 `apt update` 和 `apt install virtualbox`。这些简短的命令做了什么？为了解释，我将在运行Fedora
    Linux发行版的机器上安装相同的VirtualBox软件。因为我将使用Red Hat的DNF包管理器，所以需要额外的几个步骤——这很好，因为运行这些步骤将说明这个过程是如何工作的。这个过程有点复杂，所以[表2.2](#ch02table02)列出了步骤。
- en: Table 2.2\. Steps to install VirtualBox on Fedora
  id: totrans-88
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表2.2\. 在Fedora上安装VirtualBox的步骤
- en: '| Task | Command |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| 任务 | 命令 |'
- en: '| --- | --- |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Add repo | wget http://download.virtualbox.org/virtualbox/rpm/fedora/ ![](Images/enter.jpg)
    virtualbox.repo |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| 添加仓库 | wget http://download.virtualbox.org/virtualbox/rpm/fedora/ ![](Images/enter.jpg)
    virtualbox.repo |'
- en: '| Update index | dnf update |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| 更新索引 | dnf update |'
- en: '| Install dependencies | dnf install patch kernel-devel dkms |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| 安装依赖项 | dnf install patch kernel-devel dkms |'
- en: '| Install package | dnf install VirtualBox-5.1 |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| 安装包 | dnf install VirtualBox-5.1 |'
- en: '|  |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-96
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: These steps were designed for and tested on Fedora version 25 and do a great
    job illustrating the package management process. It all might work more smoothly
    on more recent Fedora releases, though.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这些步骤是为 Fedora 版本 25 设计并测试的，并且很好地说明了软件包管理过程。尽管如此，在更近期的 Fedora 版本上，这一切可能会运行得更顺畅。
- en: '|  |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Back on Ubuntu, APT knew what I meant by *virtualbox* when I added it to the
    `install` command. That’s because a VirtualBox package is part of an online repository
    with which APT is already familiar. It turns out, however, that Red Hat and its
    children (like CentOS and Fedora) aren’t quite as sociable, at least not out of
    the box, so I’ll need to add the virtualbox repository to Yum.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 回到 Ubuntu，当我将其添加到 `install` 命令时，APT 知道我所说的 *virtualbox* 是什么。这是因为 VirtualBox
    软件包是 APT 已经熟悉的在线仓库的一部分。然而，结果是，Red Hat 及其子产品（如 CentOS 和 Fedora）并不那么社交，至少不是默认情况下，所以我需要将
    virtualbox 仓库添加到 Yum。
- en: 'From the previous chapter, you’ll remember that third-party software configuration
    files are often kept within the /etc/ directory hierarchy, and, in that respect,
    yum/DNF is no different. Repository information is kept in /etc/yum.repos.d/,
    so you should change to that directory. From there, you’ll use the wget program
    (usually installed by default) to download the .repo file. Here’s how to do all
    that:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 从上一章，你会记得第三方软件配置文件通常保存在 `/etc/` 目录结构中，在这方面，yum/DNF 并无不同。仓库信息保存在 `/etc/yum.repos.d/`
    中，因此你应该切换到该目录。从那里，你将使用 wget 程序（通常默认安装）下载 `.repo` 文件。以下是完成所有这些步骤的方法：
- en: '[PRE2]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '|  |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Installing software on Linux**'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '**在 Linux 上安装软件**'
- en: Specific directions for installing Linux software, including details like the
    precise URL I used earlier, are almost always available online. You can find those
    either on the software developers’ own websites or through freely available guides.
    The internet is your friend.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Linux 软件的特定说明，包括我之前使用的精确 URL 等细节，几乎总是可以在网上找到。你可以在软件开发商的网站上找到这些信息，或者通过免费可用的指南。互联网是你的朋友。
- en: Make sure you specify the Linux distribution, release version, and architecture
    in your search engine phrases wherever necessary. I found details about the specific
    packages required for this project through my favorite search engine—so should
    you.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你在搜索引擎短语中指定 Linux 发行版、版本和架构， wherever necessary。我发现有关此项目所需特定软件包的详细信息是通过我最喜欢的搜索引擎找到的——你也应该这样做。
- en: '|  |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'Having the .repo file in the right directory won’t do much until you tell RPM
    what’s changed. You do that by running `update`. The `update` command also checks
    the local repository index against its online counterparts to see whether there’s
    anything new you’ll want to know about. No matter what manager you’re using, it’s
    always a good idea to update the repo information before installing new software:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在正确的目录中拥有 `.repo` 文件，直到你告诉 RPM 发生了什么变化之前，它并不会做什么。你可以通过运行 `update` 命令来做到这一点。`update`
    命令还会将本地仓库索引与其在线对应项进行比较，以查看是否有任何新信息你需要了解。无论你使用什么管理器，在安装新软件之前更新仓库信息总是一个好主意：
- en: '[PRE3]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* All transactions with the repositories are encrypted using GPG keys.**'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 所有与仓库的交易都使用 GPG 密钥加密。**'
- en: '***2* The VirtualBox references refer to the fact that I’m running this Fedora
    host as a VM in VirtualBox.**'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* VirtualBox 引用指的是我将这个 Fedora 主机作为 VirtualBox 中的 VM 运行的事实。**'
- en: 'The next step involves installing all the software dependencies that VirtualBox
    will need to run properly. A *dependency* is software that must already be installed
    on your computer for a new package to work. Back on Ubuntu, APT took care of these
    important details invisibly; Yum will also often take care of a lot of the backend
    details. But when it doesn’t, forcing you to do it manually, the details are readily
    available from the same online sources discussed previously. Here’s a truncated
    version of what that will look like:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步涉及安装 VirtualBox 正确运行所需的所有软件依赖项。*依赖项* 是指必须已经安装在你的计算机上，以便新软件包可以正常工作。回到 Ubuntu，APT
    无形中处理了这些重要的细节；Yum 也经常处理许多后台细节。但是当它不这样做时，迫使你手动处理，这些细节可以从之前讨论的相同在线来源中轻松获得。以下是这将看起来像的截断版本：
- en: '[PRE4]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '***1* Approve the operation by typing y before it will run.**'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 在它运行之前，通过输入 y 来批准操作。**'
- en: '***2* A quick review of the successful operation**'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 快速回顾成功操作**'
- en: It’s been a bit of a journey, but you’re finally ready to install VirtualBox
    itself on your Red Hat, CentOS, or Fedora machine. The version number I used in
    this example came from the online guide used earlier. Naturally, by the time you
    get to try this out, it may no longer be 5.1.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 经过一段时间的旅程，你终于准备好在你的Red Hat、CentOS或Fedora机器上安装VirtualBox本身了。我在这个例子中使用的版本号来自之前使用的在线指南。当然，当你尝试这个时，它可能不再是5.1。
- en: '[PRE5]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '***1* DNF is obviously satisfied with the dependencies installed earlier.**'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* DNF显然对之前安装的依赖项感到满意。**'
- en: '***2* Returns a list of all the packages that will be installed in this operation**'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 返回此操作中将安装的所有包的列表**'
- en: '***3* Note that the process created a new system group. I’ll talk about groups
    in [chapter 9](kindle_split_017.xhtml#ch09).**'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 注意，该过程创建了一个新的系统组。我将在[第9章](kindle_split_017.xhtml#ch09)中讨论组。**'
- en: '|  |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**VirtualBox add-ons**'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '**VirtualBox附加组件**'
- en: You should be aware that Oracle provides an Extension Pack for VirtualBox that
    adds features like USB support, disk encryption, and some alternatives to the
    existing boot options. Take those tools into account should you ever hit a dead
    end running the standard package.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该知道，Oracle为VirtualBox提供了一个扩展包，它增加了USB支持、磁盘加密以及一些现有的引导选项的替代方案。如果你在运行标准包时遇到死胡同，请考虑这些工具。
- en: 'You can also add extra file system and device integration between VirtualBox
    VMs and their host through the VBox Guest Additions CD-ROM image. This provides
    you with features like a shared clipboard and drag and drop. If the Vbox additions
    aren’t already available through your host, install the Extension Pack on Ubuntu
    using this command:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以通过VBox Guest Additions CD-ROM镜像在VirtualBox虚拟机（VM）和其宿主机之间添加额外的文件系统和设备集成。这为你提供了共享剪贴板和拖放等特性。如果Vbox附加组件尚未通过你的宿主机提供，请使用以下命令在Ubuntu上安装扩展包：
- en: '[PRE6]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: And then add it as a virtual optical drive to your running VM. Search online
    documentation concerning any extra packages that might be necessary for this to
    work on your host OS.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 然后将它作为虚拟光驱添加到正在运行的虚拟机中。搜索在线文档，了解可能需要的任何额外包，以便在宿主机上运行。
- en: '|  |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 'Before moving on to actually using virtualization tools like VirtualBox, I
    should leave you with at least a hint or two for tracking down other repository
    packages you might need. APT systems let you directly search for available packages
    using `apt search`. This example searches for packages that might help you monitor
    your system health and then uses `apt show` to display full package information:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在实际使用虚拟化工具如VirtualBox之前，我应该至少给你一两个追踪其他可能需要的仓库包的提示。APT系统允许你直接使用`apt search`搜索可用的包。以下示例搜索可能帮助你监控系统健康的包，然后使用`apt
    show`显示完整的包信息：
- en: '[PRE7]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The aptitude program, when installed, is a semi-graphic shell environment where
    you can explore and manage both available and already installed packages. If you
    can’t live without your mouse, Synaptic is a full GUI package manager for desktop
    environments. And the Yum world is also fully searchable:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 当aptitude程序安装后，它是一个半图形化的shell环境，你可以在这里探索和管理可用的和已安装的包。如果你不能没有鼠标，Synaptic是桌面环境的全GUI包管理器。Yum世界也是完全可搜索的：
- en: '[PRE8]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 2.2.2\. Defining a virtual machine (VM)
  id: totrans-131
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.2. 定义虚拟机（VM）
- en: I’m not sure whether you’ve ever put together a physical computer from components,
    but it can get involved. Defining a new VM within VirtualBox works pretty much
    the same way. The only significant difference is that, rather than having to get
    down on your hands and knees with a flashlight clenched between your teeth to
    manually add RAM and a storage drive to your box, VirtualBox lets you define your
    VM’s “hardware” specs by clicking your mouse.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 我不确定你是否曾经从组件中组装过一台物理计算机，但这可能相当复杂。在VirtualBox中定义一个新的虚拟机基本上是以相同的方式进行的。唯一的显著区别是，你不需要弯腰低头，用牙齿咬着手电筒手动添加RAM和存储驱动器到你的机器中，VirtualBox允许你通过点击鼠标来定义虚拟机的“硬件”规格。
- en: After clicking New in the VirtualBox interface, you’ll give the VM you’re about
    to build a descriptive name. As you can see in [figure 2.7](#ch02fig07), the software
    should be able to correctly populate the Type and Version fields automatically.
    The Type and Version you select here won’t install an actual OS, but are used
    to apply appropriate hardware emulation settings.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在VirtualBox界面中点击“新建”后，你需要给你的虚拟机起一个描述性的名字。正如你在[图2.7](#ch02fig07)中看到的，软件应该能够自动正确填充类型和版本字段。在这里你选择的类型和版本不会安装实际的操作系统，而是用于应用适当的硬件仿真设置。
- en: 'Figure 2.7\. The Create Virtual Machine dialog: VirtualBox will try to approximate
    your OS and OS version to offer intelligent default choices later.'
  id: totrans-134
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.7. 创建虚拟机对话框：VirtualBox将尝试近似你的操作系统和操作系统版本，以便稍后提供智能默认选择。
- en: '![](Images/02fig07_alt.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/02fig07_alt.jpg)'
- en: On the next screen, you’ll allocate RAM to your VM. Unless you’re planning something
    particularly demanding, like hosting a container swarm or running a busy web server,
    the default amount (768 MB) should be fine. You can certainly give it more RAM
    if necessary, but don’t forget to leave enough for your host machine and any other
    VMs that might already live on it. If your host only has 4 GB of physical RAM,
    you probably won’t want to give half of that to your VM.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一屏，你将为你的虚拟机分配RAM。除非你计划做一些特别要求高的任务，比如托管容器集群或运行繁忙的Web服务器，否则默认的（768 MB）应该足够了。如果你需要，当然可以给它更多的RAM，但别忘了为主机机器和可能已经存在于其上的任何其他虚拟机留出足够的空间。如果你的主机只有4
    GB的物理RAM，你可能不会想将其中一半分配给虚拟机。
- en: Keep these limits in mind if you eventually decide to run multiple VMs at a
    time, something that will be useful for some of the projects you’ll attempt later
    in the book. Even if each VM is only using the default amount of memory, two or
    three of them can start to eat away at the RAM needed for normal host operations.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你最终决定同时运行多个虚拟机，请记住这些限制，这在书中稍后尝试的一些项目中将很有用。即使每个虚拟机只使用默认的内存量，两三个虚拟机也可能开始消耗正常主机操作所需的RAM。
- en: The VirtualBox setup process now asks if you’d like to create a new virtual
    disk for your VM or use one that already exists ([figure 2.8](#ch02fig08)). What’s
    a computer without a hard disk? There may be times when you want to share a single
    disk between two VMs, but for this exercise I’m guessing that you’ll want to start
    from scratch. Select Create a Virtual Hard Disk Now.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: VirtualBox的设置过程现在会询问你是否想要为你的虚拟机创建一个新的虚拟磁盘或使用一个已经存在的磁盘（[图2.8](#ch02fig08)）。没有硬盘的计算机是什么？可能有时你想要在两个虚拟机之间共享单个磁盘，但在这个练习中，我猜你可能会想从头开始。选择现在创建虚拟硬盘。
- en: Figure 2.8\. The Hard Disk screen. Note how, in this case, the non-default Use
    an Existing Virtual Hard Disk File radio button is selected.
  id: totrans-139
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.8. 硬盘屏幕。注意，在这种情况下，非默认的“使用现有虚拟硬盘文件”单选按钮被选中。
- en: '![](Images/02fig08_alt.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/02fig08_alt.jpg)'
- en: The next screen ([figure 2.9](#ch02fig09)) lets you choose a hard disk file-type
    format for the disk you’re about to create. Unless you’re planning to eventually
    export the disk to use with some other virtualization environment, the default
    VirtualBox Disk Image (VDI) format will work fine.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 下一屏（[图2.9](#ch02fig09)）允许你为即将创建的磁盘选择硬盘文件格式。除非你计划最终将磁盘导出以用于其他虚拟化环境，否则默认的VirtualBox磁盘镜像（VDI）格式应该足够好。
- en: Figure 2.9\. Virtual hard disks can be created using a number of formats. VDI
    is fine for VMs that will be used only within VirtualBox.
  id: totrans-142
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.9. 虚拟硬盘可以使用多种格式创建。VDI格式适合仅用于VirtualBox的虚拟机。
- en: '![](Images/02fig09_alt.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/02fig09_alt.jpg)'
- en: I’ve also never regretted going with the default Dynamically Allocated option
    ([figure 2.10](#ch02fig10)) to determine how the virtual drive will consume space
    on the host. Here *dynamic* means space on the host storage disk will be allocated
    to the VM only as needed. Should the VM disk usage remain low, less host space
    will be allocated.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我也从未后悔过选择默认的动态分配选项（[图2.10](#ch02fig10)）来确定虚拟驱动器如何在宿主上消耗空间。这里的“动态”意味着宿主存储磁盘上的空间将根据需要分配给虚拟机。如果虚拟机磁盘使用量保持较低，分配的宿主空间将更少。
- en: Figure 2.10\. Dynamically allocated virtual disks will only consume as much
    space on their host’s devices as they need.
  id: totrans-145
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.10. 动态分配的虚拟磁盘将只在其宿主设备上占用它们所需的空间。
- en: '![](Images/02fig10_alt.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/02fig10_alt.jpg)'
- en: A fixed-sized disk, on the other hand, will be given its maximum amount of space
    right away, regardless of how much it’s actually using. The only advantage of
    Fixed Size is application performance. Because I generally only use VirtualBox
    VMs for testing and experiments, I’m fine avoiding the trade-off.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，固定大小的磁盘将立即分配其最大空间，无论其实际使用量如何。固定大小磁盘的唯一优势是应用性能。因为我通常只使用VirtualBox虚拟机进行测试和实验，所以我可以避免这种权衡。
- en: 'Because it knows it’s Linux you’re after, and because Linux makes such efficient
    use of storage space, VirtualBox will probably offer you only 8 GB of total disk
    size on the next screen ([figure 2.11](#ch02fig11)). Unless you’ve got unusually
    big plans for the VM (like, say, you’re going to be working with some serious
    database operations), that will probably be fine. On the other hand, if you had
    chosen Windows as your OS, the default choice would have been 25 GB—and for good
    reason: Windows isn’t shy about demanding lots of resources. That’s a great illustration
    of one way Linux is so well suited to virtual environments.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 因为它知道您想要的是Linux，并且因为Linux对存储空间的利用非常高效，VirtualBox在下一次屏幕上可能会只为您提供8 GB的总磁盘大小（[图2.11](#ch02fig11)）。除非您对虚拟机有非同寻常的大计划（比如，您将要进行一些严肃的数据库操作），否则这可能会是合适的。另一方面，如果您选择了Windows作为操作系统，默认选择将是25
    GB——这是有充分理由的：Windows并不羞于要求大量的资源。这是一个很好的例子，说明了Linux非常适合虚拟环境的一种方式。
- en: Figure 2.11\. If necessary, your virtual disk can be as large as 2 TB or the
    maximum free space on the host device.
  id: totrans-149
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.11. 如果需要，您的虚拟磁盘可以大至2 TB或主机设备上的最大可用空间。
- en: '![](Images/02fig11_alt.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig11_alt.jpg)'
- en: '|  |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-152
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: You can, if you like, also edit the name and location VirtualBox will use for
    your disk on the File Location and Size screen.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您愿意，您还可以在“文件位置和大小”屏幕上编辑VirtualBox将用于您的磁盘的名称和位置。
- en: '|  |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'When you’re done, click Create, and the new VM will appear in the list of VMs
    on the left side of the VirtualBox manager. But you’re not done: that was the
    machine. Now you’ll need an OS to bring it to life.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，点击创建，新的虚拟机将出现在VirtualBox管理器左侧的虚拟机列表中。但您还没有完成：那只是机器。现在您还需要一个操作系统来激活它。
- en: 2.2.3\. Installing an operating system (OS)
  id: totrans-156
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.3. 安装操作系统（OS）
- en: 'Now that you’ve defined your new VM’s virtual hardware profile, here’s what
    you’ll still need to do:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经定义了新虚拟机的虚拟硬件配置文件，以下是你还需要做的事情：
- en: Download a file (in ISO format) containing the image of the Linux distribution
    you want to use.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载一个包含您想要使用的Linux发行版镜像的文件（ISO格式）。
- en: Boot the new VM using a virtual DVD drive containing the ISO you downloaded.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用包含您下载的ISO的虚拟DVD驱动器启动新的虚拟机。
- en: Work through the standard OS installation process.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照标准的操作系统安装流程进行操作。
- en: Boot the VM and launch the OS you installed previously.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动虚拟机并运行您之前安装的操作系统。
- en: Once you’ve settled on a distribution, you’ll need to download an .ISO file
    containing the OS files and installation program. Finding the right file is usually
    a matter of searching the internet for the distribution name and the word *download*.
    In the case of Ubuntu, you could alternatively go to the [https://ubuntu.com](https://ubuntu.com)
    page and click the Downloads tab as you see in [figure 2.12](#ch02fig12). Notice
    the various flavors of Ubuntu that are available. If you’re going to be using
    this VM for administration tasks, then the small and fast Server version is probably
    a better choice than Desktop.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您确定了一个发行版，您将需要下载一个包含操作系统文件和安装程序的.ISO文件。找到正确的文件通常只是在网上搜索发行版名称和“下载”一词。对于Ubuntu，您也可以访问[https://ubuntu.com](https://ubuntu.com)页面，并点击您在[图2.12](#ch02fig12)中看到的“下载”标签。注意可用的各种Ubuntu版本。如果您打算使用这个虚拟机进行管理任务，那么小巧快速的Server版本可能比桌面版本更好选择。
- en: Figure 2.12\. The Downloads drop-down on the home page of Ubuntu.com. Note the
    range of versions Ubuntu offers.
  id: totrans-163
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.12. Ubuntu.com首页上的“下载”下拉菜单。注意Ubuntu提供的版本范围。
- en: '![](Images/02fig12_alt.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig12_alt.jpg)'
- en: 'Large files can sometimes become corrupted during the download process. If
    even a single byte within your .ISO has been changed, there’s a chance the installation
    won’t work. Because you don’t want to invest time and energy only to discover
    that there was a problem with the download, it’s always a good idea to immediately
    calculate the checksum (or *hash*) for the .ISO you’ve downloaded to confirm that
    everything is as it was. To do that, you’ll need to get the appropriate SHA or
    MD5 checksum, which is a long string looking something like this:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 大文件有时在下载过程中可能会损坏。如果您的.ISO文件中的任何一个字节被更改，安装可能无法正常工作。由于您不希望投入时间和精力，最后却发现下载存在问题，因此立即计算您下载的.ISO文件的校验和（或*哈希值*）以确认一切正常总是一个好主意。为此，您需要获取适当的SHA或MD5校验和，它是一个看起来像这样的长字符串：
- en: '[PRE9]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'You should be able to get this string from the same place you got your .ISO.
    In the case of Ubuntu, that would mean going to the web page at [http://releases.ubuntu.com/](http://releases.ubuntu.com/),
    clicking the directory matching the version you’ve downloaded, and then clicking
    one of the links to a checksum (like, for instance, SHA1SUMS). You should compare
    the appropriate string from that page with the results of a command run from the
    same directory as your downloaded .ISO, which might look like this:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该能够从获取 .ISO 文件的地方获取这个字符串。以 Ubuntu 为例，这意味着你要访问 [http://releases.ubuntu.com/](http://releases.ubuntu.com/)
    上的网页，点击与下载版本匹配的目录，然后点击一个校验和链接（例如，SHA1SUMS）。你应该将页面上的相应字符串与从下载 .ISO 的同一目录运行命令的结果进行比较，这可能看起来像这样：
- en: '[PRE10]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: If they match, you’re in business. If they don’t (and you’ve double-checked
    to make sure you’re looking at the right version), then you might have to download
    the .ISO a second time.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 如果它们匹配，你就可以开始了。如果不匹配（并且你已经仔细检查过确保你查看的是正确的版本），那么你可能需要再次下载 .ISO。
- en: '|  |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-171
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: You should be aware that there’s more than one kind of hash. For many years,
    the MD5SUM algorithm was dominant, but SHA256 (with its longer 256-bit hashes)
    has been gaining in popularity. Practically, for large OS image files, one approach
    is probably no worse than the other.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该知道，存在多种哈希类型。多年来，MD5SUM 算法一直占主导地位，但 SHA256（其具有更长的 256 位哈希）越来越受欢迎。实际上，对于大型操作系统镜像文件，一种方法可能并不比另一种方法差。
- en: '|  |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Once your .ISO file is in place, head back to VirtualBox. With the VM you just
    created highlighted in the left panel, click the green Start button at the top
    of the app. You’ll be prompted to select a .ISO file from your file system to
    use as a virtual DVD drive. Naturally, you’ll choose the one you downloaded. The
    new VM will read this DVD and launch an OS installation.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你的 .ISO 文件已经就绪，回到 VirtualBox。在左侧面板中高亮显示你刚刚创建的虚拟机，点击应用顶部的绿色启动按钮。系统会提示你从文件系统中选择一个
    .ISO 文件作为虚拟 DVD 驱动器使用。当然，你会选择你下载的那个。新的虚拟机会读取这个 DVD 并启动操作系统安装。
- en: Most of the time the installation process will go fine; however, including solutions
    to each of the many small things that could go wrong would require a couple of
    full chapters. If you do have trouble, you can consult the documentation and guides
    that are available for each Linux distro, or post your question on the *Linux
    in Action* forum on the Manning website and let the rest of us help.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，安装过程会顺利进行；然而，包括解决可能出错的各种小问题，可能需要几章完整的章节。如果你遇到麻烦，可以查阅每个 Linux 发行版的文档和指南，或者在你所在的
    Manning 网站上的 *Linux in Action* 论坛上发帖提问，让我们其他人帮助你。
- en: When everything is nicely installed, there still might be a few more things
    to take care of before you can successfully boot into your VM. With your VM highlighted,
    click the yellow Settings icon. Here’s where you can play with your VM’s environment
    and hardware settings. Clicking Network, for example, allows you to define network
    connectivity. If you want your VM to have full internet access through the host
    machine’s network interface, then, as shown in [figure 2.13](#ch02fig13), you
    can select Bridged Adapter from the Attached To drop-down and then select the
    name of your host’s adapter.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 当一切安装得很好时，在你成功引导到虚拟机之前，可能还有一些其他事情需要处理。在你的虚拟机高亮显示时，点击黄色的设置图标。这里你可以调整虚拟机的环境和硬件设置。例如，点击网络，你可以定义网络连接。如果你想通过主机机的网络接口为虚拟机提供完整的互联网访问，那么，如
    [图 2.13](#ch02fig13) 所示，你可以在“连接到”下拉菜单中选择桥接适配器，然后选择你主机适配器的名称。
- en: Figure 2.13\. The Network tab of the Settings dialog where you can determine
    what type of network interface (or interfaces) to use for your VM
  id: totrans-177
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 2.13. 设置对话框的网络选项卡，你可以在这里确定为你的虚拟机使用哪种网络接口（或接口）
- en: '![](Images/02fig13_alt.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig13_alt.jpg)'
- en: '|  |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-180
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: Using a bridged adapter might not always be your first choice, and it might
    sometimes present a security risk. In fact, choosing NAT Network is a more common
    way to provide a VM with internet access. Because many of the exercises in this
    book require network connectivity between multiple VMs (something that’s complicated
    using NAT), I’ll go with a bridge for now.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 使用桥接适配器可能不是你的首选，有时它可能带来安全风险。实际上，选择 NAT 网络是一种更常见的为虚拟机提供互联网访问的方式。因为这本书中的许多练习都需要多个虚拟机之间的网络连接（使用
    NAT 是复杂的事情），所以我目前选择使用桥接。
- en: '|  |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: You may never need this next piece of information, but you’ll appreciate knowing
    about it if you do. In some cases, to get the VM to boot properly, you’ll also
    need to remove the DVD from the drive, like you would for a “real” physical installation.
    You do that by clicking Storage. Click the first disk listed and then the Remove
    Disk icon at the bottom ([figure 2.14](#ch02fig14)). Make sure you don’t accidentally
    remove your hard disk!
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能永远不需要这条信息，但如果需要，你会感激知道它。在某些情况下，为了使虚拟机能够正确启动，你可能还需要从驱动器中移除DVD，就像为“真实”的物理安装一样。你可以通过点击存储来实现。点击列出的第一个磁盘，然后点击底部的移除磁盘图标（[图2.14](#ch02fig14)）。确保你不会意外地移除你的硬盘！
- en: Figure 2.14\. Remove a virtual disk by right-clicking its link and selecting
    Remove. You may need to do this to ensure that the VM boots to the right drive.
  id: totrans-184
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.14. 通过右键单击其链接并选择移除来移除虚拟磁盘。你可能需要这样做以确保虚拟机能够启动到正确的驱动器。
- en: '![](Images/02fig14_alt.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/02fig14_alt.jpg)'
- en: It’s also possible that you might sometimes need to mount a DVD (or .ISO file)
    to get VirtualBox to recognize it. Clicking the + icon with the Controller:IDE
    line highlighted lets you select a file to serve as a virtual optical drive.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 也可能有时你需要挂载DVD（或.ISO文件）以使VirtualBox能够识别它。点击带有控制器：IDE行的+图标，你可以选择一个文件作为虚拟光驱。
- en: 2.2.4\. Cloning and sharing a VirtualBox VM
  id: totrans-187
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.4. 克隆和共享VirtualBox虚拟机
- en: 'This section is a bit bonus-y, but who doesn’t like free stuff? I’m going to
    tell you about two related tricks: how to organize your VirtualBox VMs to make
    spinning up new ones as quick as possible and how to use the command line to share
    VMs across a network.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分有点像额外奖励，但谁不喜欢免费的东西呢？我将告诉你两个相关的技巧：如何组织你的VirtualBox虚拟机，以便快速启动新的虚拟机，以及如何使用命令行在网络上共享虚拟机。
- en: Cloning VMs for quick starts
  id: totrans-189
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 快速启动虚拟机的克隆
- en: One of the most obvious advantages of working with VMs is the ability to quickly
    access a fresh, clean OS environment. But if accessing that environment requires
    going through the full install process, than I don’t see a whole lot of *quickly*,
    until you throw cloning into the mix. Why not keep your original VM in its clean
    post-install state and create an identical clone whenever you want to do some
    real work?
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 与虚拟机一起工作的最明显优点之一是能够快速访问一个新鲜、干净的操作系统环境。但如果访问该环境需要通过完整的安装过程，那么在你将克隆加入其中之前，我不认为有多少是“快速”的。为什么不保持你的原始虚拟机在干净的后安装状态下，每次你想做一些实际工作时就创建一个相同的克隆呢？
- en: That’s easy. Take another look at the VirtualBox app. Select the (*stopped*)
    VM you want to use as a master copy, click the Machine menu link, and then click
    Clone. You’ll confirm the name you’d like to give your clone and then, after clicking
    Next, whether you want to create a Full Clone (meaning entirely new file copies
    will be created for the new VM) or Linked Clone (meaning the new VM will share
    all the base files with its master while maintaining your new work separately).
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 这很简单。再次查看VirtualBox应用程序。选择你想要用作主副本的（*停止*）虚拟机，点击机器菜单链接，然后点击克隆。你将确认你想要给你的克隆起的名字，然后点击下一步，选择是否创建完整克隆（这意味着将为新的虚拟机创建全新的文件副本）或链接克隆（这意味着新的虚拟机将与主虚拟机共享所有基础文件，同时保持你的新工作独立）。
- en: '|  |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-193
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: Selecting the Linked option will go much faster and take up much less room on
    your hard disk. The only downside is that you’ll be unable to move this particular
    clone to a different computer later. It’s your choice.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 选择链接选项将更快，并且占用你硬盘上的空间更少。唯一的缺点是，你将无法稍后将其克隆移动到不同的计算机上。这是你的选择。
- en: '|  |'
  id: totrans-195
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Now click Clone, and a new VM appears in the VM panel. Start it the way you
    normally would, and then log in using the same credentials you set on the master.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 现在点击克隆，新的虚拟机就会出现在虚拟机面板中。按照你通常的方式启动它，然后使用你在主虚拟机上设置的相同凭据登录。
- en: Managing VMs from the command line
  id: totrans-197
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 从命令行管理虚拟机
- en: 'VirtualBox comes with its own command-line shell that’s invoked using `vboxmanage`.
    Why bother with the command line? Because, among other benefits, it allows you
    to work on remote servers, which can greatly increase the scope of possible projects.
    To see how `vboxmanage` works, use `list vms` to list all the VMs currently available
    on your system:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: VirtualBox自带一个命令行shell，使用`vboxmanage`来调用。为什么要使用命令行呢？因为，除了其他好处之外，它允许你在远程服务器上工作，这可以大大增加可能项目的范围。要了解`vboxmanage`是如何工作的，使用`list
    vms`来列出你系统上当前可用的所有虚拟机：
- en: '[PRE11]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '`vboxmanage clonevm` will pull off the same kind of clone action I described
    previously using the GUI. Here, I’m making a clone of the Kali Linux template
    VM, naming the copy newkali:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '`vboxmanage clonevm` 命令将执行与我之前使用图形界面描述的相同类型的克隆操作。在这里，我正在克隆 Kali Linux 模板虚拟机，并将副本命名为
    newkali：'
- en: '[PRE12]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: You can verify that worked by running `vboxmanage list vms` once again.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过再次运行 `vboxmanage list vms` 来验证它是否成功。
- en: 'That will work nicely as long as I only need to use the new VM here on my local
    computer. But suppose I wanted other members of my team to be able to run an exact
    copy of that VM, perhaps so they could test something I’ve been working on. For
    that, I’ll need to convert the VM to some standardized file format. Here’s how
    I might export a local VM to a file using the Open Virtualization Format:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在我本地计算机上使用新虚拟机时工作得很好。但假设我想让团队成员能够运行该虚拟机的确切副本，也许他们可以测试我一直在工作的东西。为此，我需要将虚拟机转换为某种标准化的文件格式。以下是如何使用
    Open Virtualization Format 导出本地虚拟机到文件的示例：
- en: '[PRE13]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '***1* The -o flag specifies the output filename: website.ova, in this case.**'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* The -o flag specifies the output filename: website.ova, in this case.**'
- en: 'Next, you’ll need to copy the .OVA file to your colleague’s computer. Bear
    in mind that the file won’t, by any standard, be considered small and dainty.
    If you haven’t got network bandwidth to spare for a multiple-GB transfer, then
    consider moving it via a USB device. But if you do take the network route, the
    best tool for the job is Secure Copy (`scp`). Here’s how that might work:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你需要将 .OVA 文件复制到同事的计算机上。请注意，根据任何标准，该文件都不会被认为是小而精致的。如果你没有足够的网络带宽进行多 GB 的传输，那么考虑通过
    USB 设备移动它。但如果你选择网络路径，最适合这项工作的工具是 Secure Copy (`scp`)。以下是它可能的工作方式：
- en: '[PRE14]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'If that whole `scp` thing seems a bit out-of-the-blue, don’t worry: help is
    on the way. The `scp` command will be fully covered in [chapter 3](kindle_split_011.xhtml#ch03)
    as part of the OpenSSH content. In the meantime, that `scp` command will only
    work if OpenSSH is installed on both computers, you’ve authorized access to the
    username account on the remote computer, and it’s reachable from your local machine.'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 如果整个 `scp` 事情看起来有些出乎意料，不要担心：帮助即将到来。`scp` 命令将在第 3 章（作为 OpenSSH 内容的一部分）中全面介绍。同时，那个
    `scp` 命令只有在两台计算机上都安装了 OpenSSH、你已授权远程计算机上的用户账户访问，并且可以从你的本地机器访问时才会工作。
- en: 'Once the transfer is complete, all that’s left is, from the remote computer,
    to import the VM into that machine’s VirtualBox. The command is simple:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦传输完成，剩下的就是在远程计算机上，将虚拟机导入到该机器的 VirtualBox 中。命令很简单：
- en: '[PRE15]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Confirm that the import operation worked using `list vms`, and try launching
    the VM from the desktop:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `list vms` 验证导入操作是否成功，并尝试从桌面启动虚拟机：
- en: '[PRE16]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: If you don’t need fancy remote access, you can also share a VM from the GUI.
    With the machine you want to share highlighted, click the File menu in VirtualBox
    and then Export Appliance.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不需要复杂的远程访问，你也可以从图形界面共享虚拟机。在 VirtualBox 中，选择你想要共享的机器，然后点击文件菜单，接着导出虚拟机。
- en: 2.3\. Working with Linux containers (LXC)
  id: totrans-214
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3\. 使用 Linux 容器 (LXC)
- en: VirtualBox is great for running operations requiring Linux kernel access (the
    way you would if you were using security features like SELinux, as you’ll see
    in [chapter 9](kindle_split_017.xhtml#ch09)), for when you need GUI desktop sessions,
    or for testing operating systems like Windows. But if you need fast access to
    a clean Linux environment and you’re not looking for any special release version,
    then you’d be hard pressed to beat LXC.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: VirtualBox 对于运行需要 Linux 内核访问的操作（就像你使用 SELinux 等安全功能时那样，你将在第 9 章（kindle_split_017.xhtml#ch09）中看到），需要
    GUI 桌面会话，或测试像 Windows 这样的操作系统来说非常出色。但如果你需要快速访问一个干净的 Linux 环境，并且你不需要任何特殊的发布版本，那么你很难打败
    LXC。
- en: '|  |'
  id: totrans-216
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-217
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: Like any complex system, LXC might not work well with all hardware architectures.
    If you have trouble launching a container, consider the possibility that there
    might be a compatibility issue. The internet, as always should be a helpful source
    of deeper information.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 就像任何复杂的系统一样，LXC 可能不会与所有硬件架构很好地工作。如果你在启动容器时遇到麻烦，考虑一下可能存在兼容性问题。互联网，一如既往地，应该是一个提供更深入信息的有帮助的资源。
- en: '|  |'
  id: totrans-219
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: How fast are LXC containers? You’ll see for yourself soon enough. But because
    they skillfully share many system resources with both the host and other containers,
    they work like full-bore, standalone servers, using only minimal storage space
    and memory.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: LXC 容器的速度有多快？你很快就会自己看到。但因为他们巧妙地与主机和其他容器共享许多系统资源，它们就像全速运行的独立服务器一样工作，只使用最小的存储空间和内存。
- en: 2.3.1\. Getting started with LXC
  id: totrans-221
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.1\. 使用LXC入门
- en: 'Install LXC on your Ubuntu workstation? Piece of cake:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的Ubuntu工作站上安装LXC？小菜一碟：
- en: '[PRE17]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Now how about on CentOS? Well, the cake is still there, but eating it will
    take a bit more work. That’s partly because Ubuntu was built for and on Ubuntu
    and Debian. By all means, give it a shot on CentOS, but I won’t guarantee success.
    You’ll first need to add a new repository, Extra Packages for Enterprise Linux
    (EPEL), and then install LXC along with some dependencies:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 现在在CentOS上呢？嗯，蛋糕还在那里，但吃蛋糕需要做更多的工作。这主要是因为Ubuntu是为Ubuntu和Debian构建的。无论如何，在CentOS上试一试吧，但我不能保证成功。你首先需要添加一个新的仓库，企业Linux的额外包（EPEL），然后安装LXC以及一些依赖项：
- en: '[PRE18]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '***1* The backslash character (\) can be used to conveniently break a long
    command into multiple lines on the command line.**'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1*** 反斜杠字符（\）可以方便地将长命令拆分成多个行在命令行上。**'
- en: That’s it. You’re ready to get down to business. The basic LXC skill set is
    actually quite simple. I’m going to show you the three or four commands you’ll
    need to make it all work, and then an insider tip that, once you understand how
    LXC organizes itself, will blow you away.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样。你已经准备好开始工作了。基本的LXC技能集实际上非常简单。我将向你展示你需要的三四个命令来让它全部工作，然后一个内部提示，一旦你理解了LXC是如何组织自己的，它将让你大吃一惊。
- en: 2.3.2\. Creating your first container
  id: totrans-228
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.2\. 创建你的第一个容器
- en: 'Why not dive right in and create your first container? The value given to `-n`
    sets the name you’ll use for the container, and `-t` tells LXC to build the container
    with the Ubuntu template:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么不直接跳进去创建你的第一个容器呢？`-n`参数设置的值将是你将用于容器的名称，而`-t`告诉LXC使用Ubuntu模板来构建容器：
- en: '[PRE19]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '***1* The create process can take a few minutes to complete, but you’ll see
    verbose output and, eventually, a success notification displayed to the terminal.**'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1*** 创建过程可能需要几分钟才能完成，但你将看到详细的输出，最终在终端显示成功通知。**'
- en: '|  |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-233
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: 'You’ll probably start seeing references to an alternate set of `lxc` commands
    associated with the relatively new LXD container manager. LXD still uses LXC tools
    under the hood but through a slightly different interface. As an example, using
    LXD the previous command would look like this: `lxc launch ubuntu:16.04 myContainer`.
    Both command sets will continue to be widely available.'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会开始看到与相对较新的LXD容器管理器相关联的另一个`lxc`命令集。LXD仍然在底层使用LXC工具，但通过一个稍微不同的界面。例如，使用LXD，之前的命令将看起来像这样：`lxc
    launch ubuntu:16.04 myContainer`。这两个命令集将继续广泛可用。
- en: '|  |'
  id: totrans-235
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'There are actually quite a few templates available, as you can see from this
    listing of the /usr/share/lxc/templates/ directory:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上有很多模板可供选择，正如你可以从`/usr/share/lxc/templates/`目录的列表中看到的那样：
- en: '[PRE20]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '|  |'
  id: totrans-238
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Warning
  id: totrans-239
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 警告
- en: Not all of these templates are guaranteed to work right out of the box. Some
    are provided as experiments or *works in progress*. Sticking with the Ubuntu template
    on an Ubuntu host is probably a safe choice. As I noted, historically, LXC has
    always worked best on Ubuntu hosts. Your mileage may vary when it comes to other
    distros.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有这些模板都能保证直接使用时就能正常工作。一些是作为实验或*正在进行的工作*提供的。在Ubuntu主机上坚持使用Ubuntu模板可能是一个安全的选择。正如我提到的，从历史上看，LXC在Ubuntu主机上总是表现最好。在其他发行版上，你的体验可能会有所不同。
- en: '|  |'
  id: totrans-241
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'If you decided to create, say, a CentOS container, then you should make a note
    of the final few lines of the output, as it contains information about the password
    you’d use to log in:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你决定创建，比如说，一个CentOS容器，那么你应该注意输出中的最后几行，因为它包含了你用于登录的信息：
- en: '[PRE21]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '***1* In this example, I called the container centos_lxc and used the centos
    template.**'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1*** 在这个例子中，我称容器为centos_lxc并使用了centos模板。**'
- en: '***2* The root password is located in a directory named after the container.**'
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2*** 容器的根密码位于以容器命名的目录中。**'
- en: 'You’ll log in using the user name *root* and the password contained in the
    tmp_root_pass file. If, on the other hand, your container uses the Ubuntu template,
    then you’ll use *ubuntu* for both your user name and password. Naturally, if you
    plan to use this container for anything serious, you’ll want to change that password
    right away:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 你将使用用户名*root*和tmp_root_pass文件中包含的密码进行登录。另一方面，如果你的容器使用的是Ubuntu模板，那么你将使用*ubuntu*作为用户名和密码。当然，如果你打算将这个容器用于任何严肃的事情，你将立即更改密码：
- en: '[PRE22]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'By the way, that command is, in fact, `passwd` and not `password`. My guess
    is that the creator of the passwd program didn’t like typing. Now use `lxc-ls
    --fancy` to check the status of your container:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 顺便说一下，那个命令实际上是 `passwd` 而不是 `password`。我的猜测是 passwd 程序的创建者不喜欢打字。现在使用 `lxc-ls
    --fancy` 来检查你的容器状态：
- en: '[PRE23]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Well, it exists, but apparently it needs starting. As before, the `-n` specifies
    by name the container you want to start. The `-d` stands for detach, meaning you
    don’t want to be automatically dropped into an interactive session as the container
    starts. There’s nothing wrong with interactive sessions: some of my best friends
    are interactive sessions, in fact. But in this case, running the `lxc-start` command
    without `-d` would mean that the only way to get out would involve shutting down
    the container, which might not be what you’re after:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 嗯，它确实存在，但显然需要启动。与之前一样，`-n` 通过名称指定你想要启动的容器。`-d` 代表分离，意味着你不想在容器启动时自动进入交互式会话。交互式会话没有问题：事实上，我的许多好朋友都是交互式会话。但在这个情况下，不使用
    `-d` 运行 `lxc-start` 命令意味着唯一的退出方式是关闭容器，这可能不是你想要的：
- en: '[PRE24]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Listing your containers should now display something like this:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 列出你的容器应该会显示类似以下内容：
- en: '[PRE25]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '***1* The container state is now RUNNING.**'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 容器状态现在是正在运行。**'
- en: 'This time, the container is running and has been given an IP address (10.0.3.142).
    You could use this address to log in using a secure shell session, but not before
    reading [chapter 3](kindle_split_011.xhtml#ch03). For now, you can launch a root
    shell session within a running container using `lxc-attach`:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 这次，容器正在运行，并已被分配了一个 IP 地址（10.0.3.142）。你可以使用这个地址通过安全的 shell 会话登录，但在阅读 [第 3 章](kindle_split_011.xhtml#ch03)
    之前不要这样做。现在，你可以使用 `lxc-attach` 在运行中的容器内启动一个 root shell 会话：
- en: '[PRE26]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '***1* Note the information in the new command prompt.**'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 注意新命令提示符中的信息。**'
- en: 'You might want to spend a couple of minutes checking out the neighborhood.
    For instance, `ip addr` will list the container’s network interfaces. In this
    case, the `eth0` interface has been given an IP address of 10.0.3.142, which matches
    the IPV4 value received from `lxc-ls --fancy` earlier:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能想花几分钟检查一下周围的环境。例如，`ip addr` 会列出容器的网络接口。在这种情况下，`eth0` 接口已被分配了一个 IP 地址 10.0.3.142，这与之前通过
    `lxc-ls --fancy` 收到的 IPV4 值相匹配：
- en: '[PRE27]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '***1* eth0 is, in this case, the designation for the container’s primary network
    interface.**'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 在这个例子中，eth0 是容器的主要网络接口的指定名称。**'
- en: '***2* The container’s IP address (10.0.3.142) and CIDR netmask (/24)**'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 容器的 IP 地址（10.0.3.142）和 CIDR 子网掩码（/24）**'
- en: When you’re done looking around your new container, you can either run `exit`
    to log out leaving the container running
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成对新容器的探索后，你可以运行 `exit` 登出，同时保持容器运行
- en: '[PRE28]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'or shut down the container using `shutdown -h now`. But before you do that,
    let’s find out how blazing fast LXC containers are. The `-h` flag I added to `shutdown`
    before stands for *halt*. If I used `r` instead, rather than shutting down for
    good, the container would reboot. Let’s run `reboot` and then try to log in again
    right away to see how long it takes for the container to get back up on its feet:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 或者使用 `shutdown -h now` 关闭容器。但在你这样做之前，让我们了解一下 LXC 容器有多快。我在 `shutdown` 前添加的 `-h`
    标志代表 *停止*。如果我用 `r` 代替，那么容器不会完全关闭，而是会重新启动。让我们运行 `reboot` 并立即尝试再次登录，看看容器恢复需要多长时间：
- en: '[PRE29]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: How did that go? I’ll bet that by the time you managed to retype the `lxc-attach`
    command, myContainer was awake and ready for action. Did you know that pressing
    the up arrow key in Bash will populate the command line with the previous command?
    Using that would make it even faster to request a log in. In my case, there was
    no noticeable delay. The container shut down and fully rebooted in less than 2
    seconds!
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 那个过程怎么样？我敢打赌，在你设法重新输入 `lxc-attach` 命令的时候，myContainer 已经醒来并准备好行动了。你知道在 Bash 中按上箭头键会将上一条命令填充到命令行中吗？使用这个方法会让请求登录更快。在我的情况下，没有明显的延迟。容器关闭并完全重启不到
    2 秒！
- en: '|  |'
  id: totrans-267
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-268
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: LXC containers are also easy on system resources. Unlike my experience with
    VirtualBox VMs, where running three concurrently already starts to seriously impact
    my 8 GB host workstation performance, I can launch all kinds of LXC containers
    without suffering a slowdown.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: LXC 容器对系统资源也很友好。与我在 VirtualBox 虚拟机上的经验不同，那里同时运行三个虚拟机就已经开始严重影响我的 8 GB 主机工作站性能，而我可以启动各种
    LXC 容器而不会出现任何减速。
- en: '|  |'
  id: totrans-270
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'What’s that you say? How about that insider tip I promised you? Excellent.
    I can see you’re paying attention. Well, back in a terminal on the host machine
    (as opposed to the container), you’ll need to open an administrator shell using
    `sudo su`. From here on, until you type `exit`, you’ll be *sudo* full time:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 你说什么？那个我承诺给你的内部小贴士？太好了。我看得出你在认真听。好吧，回到主机机器上的终端（与容器相对），您需要使用 `sudo su` 打开管理员
    shell。从现在开始，直到您输入 `exit`，您将一直处于 *sudo* 状态：
- en: '[PRE30]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Now change directory to /var/lib/lxc/, and list the contents. You should see
    a directory with the name of your container. If you’ve got other containers on
    the system, they’ll have their own directories as well:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 现在切换到 /var/lib/lxc/ 目录，并列出其内容。您应该会看到一个以您的容器命名的目录。如果您在系统上还有其他容器，它们也会有它们自己的目录：
- en: '[PRE31]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Move to your container directory, and list its contents. There’ll be a file
    called config and a directory called rootfs (the *fs* stands for file system):'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 移动到您的容器目录，并列出其内容。您会看到一个名为 config 的文件和一个名为 rootfs 的目录（*fs* 代表文件系统）：
- en: '[PRE32]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Feel free to take a look through config: that’s where the basic environment
    values for the container are set. Once you’re a bit more comfortable with the
    way LXC works, you’ll probably want to use this file to tweak the way your containers
    behave. But it’s the rootfs directory that I really wanted to show you:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 随意查看 config：这是设置容器基本环境值的地方。一旦您对 LXC 的工作方式更加熟悉，您可能会想使用这个文件来调整容器的行为。但真正想展示给您的是
    rootfs 目录：
- en: '[PRE33]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: All those subdirectories that fill rootfs, do they look familiar to you? They’re
    all part of the Linux Filesystem Hierarchy Standard (FHS). This is the container’s
    root (/) directory but within the host’s file system. As long as you have admin
    permissions on the host, you’ll be able to browse through those directories and
    edit any files you want—even when the container isn’t running.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 那些填充 rootfs 的所有子目录，您看起来熟悉吗？它们都是 Linux 文件系统层次结构标准（FHS）的一部分。这是容器的根 (/) 目录，但位于主机文件系统中。只要您在主机上有管理员权限，您就可以浏览这些目录并编辑您想要的任何文件——即使容器没有运行。
- en: You’ll be able to do all kinds of things with this access, but here’s one that
    can quite possibly save your (professional) life one day. Suppose you lock yourself
    out on a container. Now there’s nothing stopping you from navigating through the
    file system, fixing the configuration file that you messed up, and getting back
    to work. Go ahead, tell me that’s not cool. But it gets better.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 您将能够使用这个访问权限做各种事情，但这里有一个可能有一天能救您（职业）一命的事情。假设您在容器上锁定了自己。现在没有任何东西阻止您在文件系统中导航，修复您搞砸的配置文件，并回到工作中。说吧，告诉我这不是很酷。但还有更好的。
- en: It’s true that the Docker ecosystem has gained many layers of features and sophistication
    since the technology moved out from under LXC’s shadow some years ago. Under the
    hood, however, it’s still built on top of a basic structural paradigm that will
    be instantly recognizable to anyone familiar with LXC. This means, should you
    be inclined to test the waters with the fastest-growing virtualization technology
    of the decade, you’ve already got skin in the game.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 的确，自从几年前的技术从 LXC 的阴影下走出来后，Docker 生态系统已经获得了许多层级的特性和复杂性。然而，在底层，它仍然建立在 LXC 熟悉者会立即认出的基本结构范式之上。这意味着，如果您倾向于测试本十年增长最快的虚拟化技术，您已经有所准备了。
- en: Summary
  id: totrans-282
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: Hypervisors like VirtualBox provide an environment where virtual operating systems
    can safely access hardware resources, whereas lightweight containers share their
    host’s software kernel.
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟机管理程序如 VirtualBox 提供了一个环境，虚拟操作系统可以安全地访问硬件资源，而轻量级容器则共享主机的软件内核。
- en: Linux package managers like APT and RPM (Yum) oversee the installation and administration
    of software from curated online repositories using a regularly updated index that
    mirrors the state of the remote repository.
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux 软件包管理器如 APT 和 RPM（Yum）通过定期更新的索引来监督从精选的在线仓库安装和管理软件，该索引反映了远程仓库的状态。
- en: Getting a VM going in VirtualBox requires defining its virtual hardware environment,
    downloading an OS image, and installing the OS on your VM.
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 VirtualBox 中启动虚拟机需要定义其虚拟硬件环境，下载操作系统镜像，并在虚拟机上安装操作系统。
- en: You can easily clone, share, and administer VirtualBox VMs from the command
    line.
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以从命令行轻松克隆、共享和管理 VirtualBox 虚拟机。
- en: LXC containers are built on predefined, distribution-based templates.
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LXC 容器是基于预定义的、基于发行版的模板构建的。
- en: LXC data is stored within the host file system, making it easy to administer
    containers.
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LXC 数据存储在宿主文件系统中，这使得管理容器变得容易。
- en: Key terms
  id: totrans-289
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关键术语
- en: '*Virtualization* is the logical sharing of compute, storage, and networking
    resources among multiple processes, allowing each to run as if it was a standalone
    physical computer.'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*虚拟化* 是在多个进程之间逻辑共享计算、存储和网络资源，使每个进程都能像独立物理计算机一样运行。'
- en: A *hypervisor* is software running on a host machine that exposes system resources
    to a guest layer, allowing the launching and administration of full-stack guest
    VMs.
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*虚拟化程序* 是在宿主机器上运行的软件，它将系统资源暴露给客户层，允许启动和管理全栈客户虚拟机。'
- en: A *container* is a VM that, instead of full-stack, lives on top of (and shares)
    the host machine’s core OS kernel. Containers are extremely easy to launch and
    kill, according to short-term need.
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*容器* 是一种虚拟机，它不是全栈，而是位于（并共享）宿主机的核心操作系统内核之上。根据短期需求，容器非常容易启动和终止。'
- en: A *dynamically allocated* virtual drive in VirtualBox takes up only as much
    space on your physical drives as the VM actually uses. A *fixed-size* disk, by
    contrast, takes up the maximum space no matter how much data is there.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VirtualBox中的动态分配虚拟驱动器只占用物理驱动器上与虚拟机实际使用量相当的空间。相比之下，固定大小的磁盘无论数据量如何，都会占用最大空间。
- en: A *software repository* is a location where digital resources can be stored.
    Repositories are particularly useful for collaboration and distribution of software
    packages.
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*软件仓库* 是可以存储数字资源的位置。仓库对于软件包的协作和分发特别有用。'
- en: Security best practices
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安全最佳实践
- en: Allowing an official package manager to install and maintain the software on
    your Linux system is preferred over doing it manually. Online repositories are
    much more secure, and downloading is properly encrypted.
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与手动安装和维护相比，允许官方软件包管理器在您的 Linux 系统上安装和维护软件是首选。在线仓库更加安全，下载是正确加密的。
- en: Always scan the checksum hashes of downloaded files against the correct hash
    strings, not only because packages can be corrupted during download, but because
    they can also sometimes be switched by man-in-the-middle attackers.
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总是扫描下载文件的校验和哈希值与正确的哈希字符串进行对比，这不仅因为软件包在下载过程中可能会被损坏，还因为它们有时也可能被中间人攻击者替换。
- en: Command-line review
  id: totrans-298
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 命令行回顾
- en: '`apt install virtualbox` uses APT to install a software package from a remote
    repository.'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`apt install virtualbox` 使用 APT 从远程仓库安装软件包。'
- en: '`dpkg -i skypeforlinux-64.deb` directly installs a downloaded Debian package
    on a Ubuntu machine.'
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dpkg -i skypeforlinux-64.deb` 直接在 Ubuntu 机器上安装下载的 Debian 软件包。'
- en: '`wget https://example.com/document-to-download` uses the wget command-line
    program to download a file.'
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`wget https://example.com/document-to-download` 使用 wget 命令行程序下载文件。'
- en: '`dnf update`, `yum update`, or `apt update` syncs the local software index
    with what’s available from online repositories.'
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dnf update`、`yum update` 或 `apt update` 将本地软件索引与在线仓库中可用的内容同步。'
- en: '`shasum ubuntu-16.04.2-server-amd64.iso` calculates the checksum for a downloaded
    file to confirm that it matches the provided value. This means that the contents
    haven’t been corrupted in transit.'
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`shasum ubuntu-16.04.2-server-amd64.iso` 计算下载文件的校验和以确认其与提供的值匹配。这意味着内容在传输过程中没有被损坏。'
- en: '`vboxmanage clonevm Kali-Linux-template --name newkali` uses the vboxmanage
    tool to clone an existing VM.'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`vboxmanage clonevm Kali-Linux-template --name newkali` 使用 vboxmanage 工具克隆现有的虚拟机。'
- en: '`lxc-start -d -n myContainer` starts an existing LXC container.'
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lxc-start -d -n myContainer` 启动现有的 LXC 容器。'
- en: '`ip addr` displays information on each of a system’s network interfaces (including
    their IP addresses).'
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ip addr` 显示系统每个网络接口的信息（包括它们的IP地址）。'
- en: '`exit` leaves a shell session without shutting down the machine.'
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exit` 命令离开 shell 会话而不会关闭机器。'
- en: Test yourself
  id: totrans-308
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试自己
- en: '**[1](#ch02qa2q0a1)**'
  id: totrans-309
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](#ch02qa2q0a1)**'
- en: ''
  id: totrans-310
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following is a quality shared by both containers and hypervisors?
  id: totrans-311
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪项是容器和虚拟化共同拥有的特性？
- en: ''
  id: totrans-312
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: They both allow VMs to run independently of the host OS.
  id: totrans-313
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们都允许虚拟机独立于宿主操作系统运行。
- en: They both rely on the host’s kernel for their basic operations.
  id: totrans-314
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们都依赖于宿主机的内核进行基本操作。
- en: They both permit extremely lightweight VMs.
  id: totrans-315
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们都允许极其轻量级的虚拟机。
- en: They both permit extremely efficient use of hardware resources.
  id: totrans-316
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们都允许极其高效地使用硬件资源。
- en: '**[2](#ch02qa2q0a2)**'
  id: totrans-317
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](#ch02qa2q0a2)**'
- en: ''
  id: totrans-318
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following is *not* the responsibility of a Linux package manager?
  id: totrans-319
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪项不是 Linux 软件包管理器的责任？
- en: ''
  id: totrans-320
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Sync the local index with remote repositories.
  id: totrans-321
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将本地索引与远程仓库同步。
- en: Scan installed software for malware.
  id: totrans-322
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描已安装的软件以查找恶意软件。
- en: Apply updates to installed software.
  id: totrans-323
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应用已安装软件的更新。
- en: Ensure all package dependencies are installed.
  id: totrans-324
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保所有软件包依赖都已安装。
- en: '**[3](#ch02qa2q0a3)**'
  id: totrans-325
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](#ch02qa2q0a3)**'
- en: ''
  id: totrans-326
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following commands would you use to directly install a downloaded
    software package on a Ubuntu system?
  id: totrans-327
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 你会使用以下哪个命令直接在 Ubuntu 系统上安装下载的软件包？
- en: ''
  id: totrans-328
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`dpkg -i`'
  id: totrans-329
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`dpkg -i`'
- en: '`dnf --install`'
  id: totrans-330
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`dnf --install`'
- en: '`apt install`'
  id: totrans-331
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`apt install`'
- en: '`yum -i`'
  id: totrans-332
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`yum -i`'
- en: '**[4](#ch02qa2q0a4)**'
  id: totrans-333
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[4](#ch02qa2q0a4)**'
- en: ''
  id: totrans-334
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: When creating a VM on VirtualBox, which of the following steps comes first?
  id: totrans-335
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在 VirtualBox 上创建虚拟机时，以下哪个步骤是第一步？
- en: ''
  id: totrans-336
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Select a hard disk file type.
  id: totrans-337
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择硬盘文件类型。
- en: Choose between Dynamically Allocated and Fixed Size.
  id: totrans-338
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在动态分配和固定大小之间进行选择。
- en: Remove the virtual DVD from the drive.
  id: totrans-339
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从驱动器中移除虚拟 DVD。
- en: Configure the network interface.
  id: totrans-340
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置网络接口。
- en: '**[5](#ch02qa2q0a5)**'
  id: totrans-341
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[5](#ch02qa2q0a5)**'
- en: ''
  id: totrans-342
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following formats can be used for OS images?
  id: totrans-343
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪种格式可以用于操作系统镜像？
- en: ''
  id: totrans-344
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: VDI
  id: totrans-345
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: VDI
- en: VMI
  id: totrans-346
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: VMI
- en: ISO
  id: totrans-347
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: ISO
- en: VMDK
  id: totrans-348
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: VMDK
- en: '**[6](#ch02qa2q0a6)**'
  id: totrans-349
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[6](#ch02qa2q0a6)**'
- en: ''
  id: totrans-350
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following commands would you use to save a VM to a .OVA formatted
    file?
  id: totrans-351
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 你会使用以下哪个命令将虚拟机保存为 .OVA 格式的文件？
- en: ''
  id: totrans-352
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`vboxmanage export`'
  id: totrans-353
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`vboxmanage export`'
- en: '`vboxmanage clonevm`'
  id: totrans-354
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`vboxmanage clonevm`'
- en: '`vboxmanage import`'
  id: totrans-355
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`vboxmanage import`'
- en: '`vboxmanage clone-ova`'
  id: totrans-356
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`vboxmanage clone-ova`'
- en: '**[7](#ch02qa2q0a7)**'
  id: totrans-357
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[7](#ch02qa2q0a7)**'
- en: ''
  id: totrans-358
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following LXC command-line flags will start a container without
    automatically opening a new shell session?
  id: totrans-359
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪个 LXC 命令行标志可以在不自动打开新 shell 会话的情况下启动容器？
- en: ''
  id: totrans-360
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`lxc-start -t`'
  id: totrans-361
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lxc-start -t`'
- en: '`lxc-start -a`'
  id: totrans-362
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lxc-start -a`'
- en: '`lxc-start -d`'
  id: totrans-363
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lxc-start -d`'
- en: '`lxc-start -n`'
  id: totrans-364
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`lxc-start -n`'
- en: '**[8](#ch02qa2q0a8)**'
  id: totrans-365
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[8](#ch02qa2q0a8)**'
- en: ''
  id: totrans-366
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: By default, in which of the following directories will you find a container’s
    file system?
  id: totrans-367
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 默认情况下，你将在以下哪个目录中找到容器的文件系统？
- en: ''
  id: totrans-368
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: /usr/share/lxc/
  id: totrans-369
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /usr/share/lxc/
- en: /etc/share/lxc/
  id: totrans-370
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /etc/share/lxc/
- en: /usr/lib/lxc/
  id: totrans-371
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /usr/lib/lxc/
- en: /var/lib/lxc/
  id: totrans-372
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /var/lib/lxc/
- en: Answer key
  id: totrans-373
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 答案键
- en: '**[1.](#ch02qa1q1)**'
  id: totrans-374
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1.](#ch02qa1q1)**'
- en: ''
  id: totrans-375
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: d
  id: totrans-376
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: d
- en: '**[2.](#ch02qa1q2)**'
  id: totrans-377
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2.](#ch02qa1q2)**'
- en: ''
  id: totrans-378
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: b
  id: totrans-379
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: b
- en: '**[3.](#ch02qa1q3)**'
  id: totrans-380
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3.](#ch02qa1q3)**'
- en: ''
  id: totrans-381
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: a
  id: totrans-382
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a
- en: '**[4.](#ch02qa1q4)**'
  id: totrans-383
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[4.](#ch02qa1q4)**'
- en: ''
  id: totrans-384
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: a
  id: totrans-385
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a
- en: '**[5.](#ch02qa1q5)**'
  id: totrans-386
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[5.](#ch02qa1q5)**'
- en: ''
  id: totrans-387
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: c
  id: totrans-388
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: c
- en: '**[6.](#ch02qa1q6)**'
  id: totrans-389
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[6.](#ch02qa1q6)**'
- en: ''
  id: totrans-390
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: a
  id: totrans-391
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a
- en: '**[7.](#ch02qa1q7)**'
  id: totrans-392
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[7.](#ch02qa1q7)**'
- en: ''
  id: totrans-393
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: c
  id: totrans-394
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: c
- en: '**[8.](#ch02qa1q8)**'
  id: totrans-395
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[8.](#ch02qa1q8)**'
- en: ''
  id: totrans-396
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: d
  id: totrans-397
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: d
