- en: 12 Holding on to your gains by watching for drift
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 12 通过监控漂移来保持您的收益
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Identifying and monitoring for drift in production solutions
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别和监控生产解决方案中的漂移
- en: Defining responses to detected drift
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义对检测到的漂移的响应
- en: In the preceding chapter, we established the foundations for measuring the effectiveness
    of an ML solution. This solid base enables a DS team to communicate to the business
    about the performance of a project in terms that are relevant to the business.
    To continue making (hopefully) positive reports about the effectiveness of a solution,
    a bit more work needs to be done.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们为衡量机器学习解决方案的有效性奠定了基础。这个坚实的基础使数据科学团队能够用与业务相关的术语向业务沟通项目的性能。为了继续（希望）报告关于解决方案有效性的积极结果，还需要做更多的工作。
- en: If proper attribution monitoring and reporting to the business are the bedrock
    and foundation of a project, entropy is the buffeting storm seeking to continuously
    tear down the project. We call this chaotic shift in performance *drift*, and
    it takes many forms. Combatting against it requires continuous monitoring and
    a suspicious distrust of everything going into and coming out of a model.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 如果适当的归因监控和向业务报告是项目的基石和基础，那么熵就是试图不断摧毁项目的冲击风暴。我们称这种性能的混乱变化为“漂移”，它有多种形式。对抗它需要持续的监控和对进入和离开模型的一切保持怀疑和不信任。
- en: Throughout this chapter, we will look at the types and causes of, and solutions
    for, the major types of model drift. Fighting against drift will help ensure that
    the gains that you’re making for your company continue to prove fruitful.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨模型漂移的主要类型、原因和解决方案。对抗漂移将有助于确保您为公司带来的收益继续证明是富有成效的。
- en: 12.1 Detecting drift
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 12.1 检测漂移
- en: Let’s pretend that we’ve just shipped our ice cream recommender from chapter
    11 to production. We’ve used sound engineering practices throughout development,
    and our internal SME testing has looked promising. Attribution measurement is
    set up, A/B testing is defined, and we’re ready to start collecting the results.
    We release the proverbial kraken upon the world.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们假设我们已经将第11章中的冰淇淋推荐器部署到生产中。我们在整个开发过程中都使用了良好的工程实践，我们的内部专家测试看起来很有希望。归因测量已设置，A/B测试已定义，我们准备开始收集结果。我们将传说中的克苏鲁释放到世界上。
- en: It isn’t until about six weeks into the model running swimmingly in production
    that we are notified by the marketing group about some worrying trends in its
    analysis of the customer base. In one area of the country, the issuance and rebate
    rates for coupons have increased to such a degree that product shortages are occurring,
    while in a different area the imbalance in product purchase types has become so
    egregious that a massive overabundance of scrap product arises. *It may be time
    to panic a little bit.*
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 直到模型在生产中运行得非常顺利大约六周后，我们才被营销团队通知其在分析客户基础时发现的一些令人担忧的趋势。在国家的某个地区，优惠券的发行和返利率已经增加到如此程度，以至于出现了产品短缺，而在另一个地区，产品购买类型的失衡变得如此严重，以至于产生了大量过剩的废品。*可能到了稍微恐慌一下的时候了*。
- en: 'We collectively scramble, digging into the feature data in an ad hoc manner,
    putting all our other project work on hold as we fight this immediate fire of
    trying to investigate whether the root cause of the issues is the model. After
    a few days of exploratory analysis bearing little fruit with respect to a root
    cause, we’re left with an ultimatum from the business: either fix the model or
    shut it off. The profit attribution lift, although offsetting the cost of product
    scrap, isn’t a compelling enough story to placate the business.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我们集体陷入混乱，以临时方式深入研究特征数据，将所有其他项目工作暂停，以便我们应对这场试图调查问题根本原因是否为模型的即时火灾。经过几天对根本原因的探索性分析，几乎没有取得成果后，我们面临来自业务的最后通牒：要么修复模型，要么关闭它。虽然利润归因提升抵消了产品报废的成本，但这并不是一个足够有说服力的故事，无法安抚业务。
- en: We cross our fingers, close our eyes, and hope for the best as we initiate a
    new training run of the model. Based on the results of the holdout validation
    scoring metric during the training, it seems like the problem has resolved itself.
    For now.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在启动模型的新一轮训练时，闭上眼睛，希望一切顺利。根据训练期间保留的验证评分指标的结果，似乎问题已经自行解决。至少目前是这样。
- en: What is going on here? Why did the model all of a sudden start behaving like
    this? Why was the business affected so heavily by something so seemingly innocuous?
    Most important, what should we have done differently before we released this model
    to production?
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 这里发生了什么？为什么模型突然开始表现得像这样？为什么业务会受到看似无害的事情如此严重的影响？最重要的是，在我们将此模型投入生产之前，我们应该做些什么不同的事情？
- en: The simple answer is that *entropy is all around us*. Feature-measurement data,
    along with the latent factors that influence causality, are constantly shifting.
    In many cases, the actions we’re taking on the output of models causes shifts
    in that data. Hidden feedback loops of influence can introduce new correlations
    that the model wasn’t exposed to during training. What had once been a valuable
    relationship for target optimization can either deteriorate or strengthen to a
    point that the predictions coming out of a model are no longer solving the problem
    that the project was intended to address.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 简单的答案是，*熵无处不在*。特征度量数据，以及影响因果关系的潜在因素，始终在变化。在许多情况下，我们对模型输出采取的行动会导致数据的变化。在训练期间模型未接触到的潜在影响可以引入新的相关性。曾经对目标优化有价值的关联关系可能会恶化或增强到一定程度，以至于模型输出的预测不再解决项目旨在解决的问题。
- en: These impacts can, for some use cases, be rather severe and rapid (fraud detection,
    for instance, is highly susceptible to this because criminals are clever and will
    adapt to creative pursuits to defeat your model’s ability to detect their activity),
    while others are gradual and easy to miss if not monitored algorithmically. Being
    aware of and controlling for these inevitable shifts is a part of ML project development.
    We need to expect them, have systems in place to discover them, and know how to
    recover from them.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这些影响在某些用例中可能相当严重且迅速（例如，欺诈检测，因为犯罪分子很聪明，会适应创造性追求以击败你模型检测其活动的能力），而其他影响则是渐进的，如果不进行算法监控则容易忽略。意识到并控制这些不可避免的变动是机器学习项目开发的一部分。我们需要预料到它们，建立系统来发现它们，并知道如何从中恢复。
- en: 12.1.1 What influences drift?
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12.1.1 影响漂移的因素有哪些？
- en: Model drift can take six primary forms. Some are obvious to detect, while others
    require a great deal of research and analysis to discover. Table 12.1 gives a
    brief overview of these mechanisms of model degradation.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '模型漂移可以采取六种主要形式。其中一些很容易检测到，而其他一些则需要大量的研究和分析才能发现。表12.1简要概述了这些模型退化机制。 '
- en: Table 12.1 Prediction drift types and corrective actions
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 表12.1 预测漂移类型及纠正措施
- en: '| Drift type | Measurement method | Corrective actions |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| 漂移类型 | 测量方法 | 纠正措施 |'
- en: '| Feature drift | Feature distribution validation | Retrain model on new data
    |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| 特征漂移 | 特征分布验证 | 在新数据上重新训练模型 |'
- en: '|  | Prediction post hoc error calculation | Revisit feature engineering |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '|  | 后验预测错误计算 | 重新审视特征工程 |'
- en: '| Label drift | Post hoc analysis of predictions | Retrain on new data, tune
    |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| 标签漂移 | 预测的后验分析 | 在新数据上重新训练，调整 |'
- en: '| Concept drift | Attribution measurement | Perform feature engineering work
    |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| 概念漂移 | 归因度量 | 执行特征工程工作 |'
- en: '|  | Feature distribution validation | Retrain model |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '|  | 特征分布验证 | 重新训练模型 |'
- en: '|  | Post hoc prediction analysis | Revisit solution (new algorithm or approach)
    |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '|  | 后验预测分析 | 重新审视解决方案（新算法或方法） |'
- en: '|  | Ad hoc analysis | Evaluate solution relevance |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '|  | 临时分析 | 评估解决方案的相关性 |'
- en: '|  | Causality models (simulations) |  |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '|  | 因果模型（模拟） |  |'
- en: '| Prediction drift | Post hoc prediction analysis | Analyze impact on business
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| 预测漂移 | 后验预测分析 | 分析对业务的影响 |'
- en: '|  | Attribution measurement |  |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '|  | 归因度量 |  |'
- en: '| Reality drift | You’ll just know. Everything is on fire. | Shift to human
    intervention |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| 现实漂移 | 你会直接知道。一切都在燃烧。 | 转向人工干预 |'
- en: '|  |  | Reevaluate features |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '|  |  | 重新评估特征 |'
- en: '|  |  | Create hard-stop boundary in training data |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '|  |  | 在训练数据中创建硬停止边界 |'
- en: '|  |  | Retrain model |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '|  |  | 重新训练模型 |'
- en: '| Feedback drift | Time spent improving model | Evaluate efficacy of solution
    |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| 反馈漂移 | 改进模型所花费的时间 | 评估解决方案的有效性 |'
- en: '|  | Performance during retraining | Determine if new solution is needed |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '|  | 重新训练期间的表现 | 确定是否需要新的解决方案 |'
- en: 'These measurement methods are relatively common, captured in greatest detail
    within concept drift detection. Each one of these measurement methods should be
    employed for any model that is pushed to production. The reasons for constant
    measurement are many, but chief among them are the following:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这些测量方法相对常见，在概念漂移检测中得到了最详细的描述。这些测量方法中的每一个都应该用于任何推向生产的模型。持续测量的原因很多，但最重要的是以下这些：
- en: Models will drift. There is no such thing as a static implementation.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型会漂移。没有静态实施的东西。
- en: Gradual degradations are incredibly challenging to identify by attribution measurement
    alone. Monitoring the performance in multiple ways can alert you to issues that
    manifest themselves over a long period of time.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单凭归因测量很难识别渐进式退化。以多种方式监控性能可以提醒你注意那些在长时间内显现的问题。
- en: Rapid degradations are challenging to respond to if historical measurement is
    not in place. Repairing a model with no data to define what went wrong is incredibly
    time-consuming.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果没有历史测量，快速退化很难应对。在没有数据定义出了什么问题的情况下修复模型是极其耗时的。
- en: Alerting can buy you precious time to fix an eminent problem before it becomes
    a larger issue. This helps with the mission of the project and increases the business’s
    faith in DS work.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 警报可以在问题变成更大问题之前为你赢得宝贵的时间来修复。这有助于项目的使命，并增加企业对数据科学工作的信心。
- en: To explore each of these mechanisms of drift, we’ll be sticking with our ice
    cream scenario throughout this chapter for simplicity’s sake (and for fun).
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 为了探索这些漂移机制的每一个，我们将为了简便（以及乐趣）在本章中坚持使用冰淇淋场景。
- en: Note Some of the techniques described in section 12.2 for setting up monitoring
    for these effects, particularly for feature-based drift, can be difficult to scale
    for models that use a kitchen-sink approach. (I’ve seen people try to implement
    massive vectors, consisting of thousands of features, in the hopes of improving
    accuracy.) This is definitely something to think about when designing predictive
    solutions. Taking the easy way, by just throwing a ton of data into a model and
    hoping for the best, can end up being a nightmare for monitoring the health of
    such an implementation.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：在第12.2节中描述的一些用于设置这些效果监控的技术，尤其是基于特征的漂移，对于采用厨房水槽方法的模型来说可能难以扩展。（我见过人们试图实现包含数千个特征的巨大向量，希望提高准确性。）这绝对是在设计预测解决方案时需要考虑的事情。采取简单的方法，只是把大量数据扔进模型，寄希望于最好的结果，最终可能会成为监控这种实施健康状况的噩梦。
- en: Feature drift
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 特征漂移
- en: Let’s imagine for a moment that our ice cream propensity-to-buy model uses weather-forecast
    data in multiple regions. Let’s also pretend that we have no monitoring set up
    on our model and are using a passive retraining of the model each month.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们暂时想象一下，我们的冰淇淋购买倾向模型使用多个地区的天气预报数据。让我们也假装我们没有在我们的模型上设置监控，并且每月使用被动的模型重新训练。
- en: When we were originally building the model, we did a thorough analysis of our
    features. We determined correlation values (Pearson’s and chi-squared) and found
    an astonishingly strong relationship between temperature and ice cream sales.
    For the first several months, everything is going well, with emails going out
    at defined intervals based on a propensity-to-open score of greater than 60%.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们最初构建模型时，我们对特征进行了彻底的分析。我们确定了相关值（皮尔逊相关系数和卡方值），并发现温度和冰淇淋销量之间存在惊人的强关系。在前几个月，一切进展顺利，根据超过60%的打开倾向得分，定期发送电子邮件。
- en: All of a sudden, midway through June, the attribution models start to fall off
    a cliff. The open and utilization rates are abysmally low. From a revenue lift
    of 20%, the test group is now showing a 300% loss. We continue to operate like
    this, with the marketing team trying different approaches to its campaigns. Even
    the product development team starts trying new flavors under the mistaken impression
    that customers are getting tired of the flavors that are on sale.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 突然间，到了六月中旬，归因模型开始急剧下降。打开率和利用率低得令人难以置信。从20%的收入提升到现在的测试组显示300%的损失。我们继续这样操作，营销团队尝试不同的营销方法。甚至产品开发团队也开始尝试新的口味，错误地认为顾客厌倦了正在销售的口味。
- en: It’s not until a few months go by, when the DS team is informed that the project
    will likely get cancelled, that an in-depth investigation is undertaken. Upon
    investigation of the model’s predictions for the week starting in mid-June, we
    find a dramatic step-function shift in the probabilities for propensity-to-use
    coupons. When we look into the features, we find something a bit concerning, shown
    in figure 12.1.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 直到几个月后，当DS团队被告知项目可能被取消时，才会进行深入调查。在调查6月中旬开始的模型预测时，我们发现倾向性使用优惠券的概率发生了显著的阶梯函数变化。当我们查看特征时，我们发现一些令人担忧的事情，如图12.1所示。
- en: Even though this is a comical example of feature drift, it’s similar to many
    that I’ve seen in my career. I’ve rarely come across a DS who hasn’t had a data
    feed change unexpectedly without being notified, and many of those that I’ve experienced
    or heard about are as ridiculous as this example.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这是一个特征漂移的滑稽例子，但它与我职业生涯中见过的许多例子相似。我很少遇到一个数据科学家没有在未被告知的情况下意外地遇到数据流变化的情况，而且我所经历或听说的许多情况与这个例子一样荒谬。
- en: Many times, shifts like these will be of such a magnitude that prediction results
    become so unusable that it’s known within a short period of time that something
    substantial has changed. In some rare cases, such as the one shown in figure 12.1,
    a shift can be nuanced and difficult to detect for a longer period of time if
    automated monitoring is not in place.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 许多时候，这种变化会如此之大，以至于预测结果变得无法使用，在短时间内就会知道发生了重大变化。在某些罕见的情况下，如图12.1所示，如果没有自动化监控，这种变化可能会微妙且难以在较长时间内检测到。
- en: '![12-01](../Images/12-01.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![12-01](../Images/12-01.png)'
- en: Figure 12.1 Feature drift by way of numeric scaling changes
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.1 通过数值缩放变化引起的特征漂移
- en: For this use case, the prediction outputs would be making recommendations for
    customers enduring a new modern ice age event. The probabilities coming out of
    the model would likely be very low for most users. Since the post-prediction trigger
    for sending out recommendations from the model is set at 60% propensity, the much
    lower probabilities would result in the vast majority of customers in the evaluation
    test no longer receiving emails. With feature monitoring in place that is measuring
    the mean and standard deviation, simple heuristic control logic would have caught
    this.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个用例，预测输出将为经历新现代冰河事件的客户做出推荐。模型输出的概率对于大多数用户来说可能非常低。由于从模型发送推荐的后预测触发器设置为60%的倾向性，因此较低的概率将导致评估测试中的绝大多数客户不再收到电子邮件。由于特征监控正在测量平均值和标准差，简单的启发式控制逻辑就会捕捉到这一点。
- en: Another form of feature drift is *feature ignorance*. This sort of drift comes
    into play when our inference data is arriving to a trained model that is beyond
    the bounds of what the model was trained on. If, for instance, our model was trained
    on temperatures between 60˚F and 95˚F (Southern California), and the imputation
    features drift down to 20 because of the conversion to a Celsius scale, tree-based
    models will handle that just fine. They will bucket these new values within any
    decision criterion that captures temperatures in the lowest range (around 60).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种特征漂移的形式是*特征无知*。当我们的推理数据到达一个训练模型，而这个模型超出了模型训练的范围时，这种漂移就会发挥作用。例如，如果我们的模型是在60°F到95°F（南加州）的温度范围内训练的，而由于转换为摄氏度，插补特征漂移到20，基于树的模型将很好地处理这种情况。它们将把这些新值归入任何捕获最低温度范围（约60）的决策标准中。
- en: Linear models, though? Not so much. The model’s artifact is, after all, an equation
    in a linear model. The temperature value from the inference feature vector will
    be multiplied with a coefficient and either added to or subtracted from the remainder
    of the feature computations that were determined during training. With values
    far outside the range seen during that training estimation, the predictions could
    behave in wildly unexpected ways.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，对于线性模型来说，情况并非如此。模型的缺陷毕竟是一个线性模型中的方程。推理特征向量中的温度值将与系数相乘，然后加到或从训练期间确定的特征计算余数中减去。当值远远超出训练估计期间看到的范围时，预测可能会以完全意想不到的方式表现。
- en: Label drift
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 标签漂移
- en: '*Label* *drift* is a pretty insidious issue to track down. Typically caused
    by a shift in the distribution of several critical (high-importance) features,
    a drift in the label can work at cross-purposes to the desires of the business.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '*标签* *漂移*是一个相当难以追踪的问题。通常由几个关键（高重要性）特征分布的变化引起，标签的漂移可能会与业务的愿望背道而驰。'
- en: Let’s imagine that some aspect of our model for ice cream propensity starts
    to be affected by a latent force that we don’t fully understand due to a lack
    of data collection. We can see in the correlation what seems to be driving it,
    as it is universally reducing the variance of one of our feature values. However,
    we can’t conclusively tie one of our collected data features to the effects that
    we’re seeing. The main effect that we see is shown in figure 12.2.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们假设由于数据收集不足，我们冰激凌倾向模型的一些方面开始受到我们不完全理解的潜在力量的影响。我们可以在相关性中看到似乎在驱动它的因素，因为它普遍降低了我们特征值中的一个方差。然而，我们无法将我们收集的数据特征与我们所看到的效果明确联系起来。我们看到的主要效果如图12.2所示。
- en: '![12-02](../Images/12-02.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![12-02](../Images/12-02.png)'
- en: Figure 12.2 Label drift is a shift in the prediction distribution.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.2 标签漂移是预测分布的变化。
- en: With this distribution shift, we could be looking at dramatic impacts to the
    business. From an ML perspective, the model’s accuracy (loss) could, theoretically,
    be better in the bottom scenario of figure 12.2 than it was during initial training.
    This can make discovering events like this incredibly challenging; from a model
    training perspective, it could appear to be much better and ideal. However, from
    a business perspective, a drift event like this could prove disastrous.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种分布变化下，我们可能会看到对业务的巨大影响。从机器学习的角度来看，模型在图12.2底部场景中的准确性（损失）理论上可能比初始训练时更好。这可能会使发现此类事件变得极其困难；从模型训练的角度来看，它可能看起来要好得多，更理想。然而，从业务角度来看，此类漂移事件可能会证明是灾难性的。
- en: What would happen if the marketing team had a threshold for sending the customized
    email coupons out only if the probability for using one was above 90%? Restrictions
    like this are usually in place because of costs (bulk sends are cheap, while customized
    solutions are far more expensive for services). If the marketing team based its
    threshold for sending on this level, having analyzed the results of the model’s
    predictions during the first few weeks of running, it would have selected an optimal
    cost-to-benefit ratio for these customized sends. With the label drift occurring
    over time in the second chart, this would mean that basically all of the test
    group customers would be entered into this program. This massive increase in cost
    could quickly make the project less palatable for the marketing department. If
    it were egregious enough, the team might just abandon its utilization of the project’s
    output entirely.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果营销团队只在使用概率超过90%的情况下发送定制电子邮件优惠券，会发生什么？这样的限制通常是由于成本（批量发送便宜，而定制解决方案对于服务来说要昂贵得多）。如果营销团队基于这个水平发送的阈值，在分析了模型预测的前几周结果后，它将为这些定制发送选择一个最佳的成本效益比。随着第二张图中标签漂移的发生，这意味着基本上所有测试组客户都会被纳入这个计划。这种成本的大幅增加可能会迅速使营销部门对项目失去兴趣。如果问题严重到足以让团队完全放弃对项目输出的利用。
- en: Paying close attention to the distribution of a model’s output over time can
    bring visibility to potential problems and ensure a certain degree of consistency
    to the output. When the results shift (and they will, let me assure you), be it
    in a seemingly positive or negative way, there could be follow-on effects from
    the results that the internal consumers of the model might not be prepared for.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 密切关注模型输出随时间的变化分布，可以揭示潜在问题并确保输出的一致性。当结果发生变化（而且它们会的，请相信我），无论是看似积极的还是消极的，模型内部消费者可能没有准备好的后续影响。
- en: 'It’s always best to monitor this. The impact to the greater scope of the business,
    depending on the sort of problem that you’re solving, could be severe if you’re
    not continually monitoring the state of the predictions coming out of the solution.
    An implementation of label drift monitoring should focus on the following:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 总是最好进行监控。根据你解决的问题类型，如果你不持续监控解决方案输出的预测状态，对业务范围的影响可能会非常严重。标签漂移监控的实施应关注以下方面：
- en: Collection and storage of predictions
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测的收集和存储
- en: For classification problems
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类问题
- en: Define a time window for aggregation of prediction class values and store the
    counts of each.
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义一个用于聚合预测类别值的窗口时间，并存储每个值的计数。
- en: Track the ratio of label predictions over time and establish acceptable deviation
    levels for the ratio values.
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跟踪标签预测随时间变化的比率，并建立比率值的可接受偏差水平。
- en: Perform a comparison of equivalency, utilizing an algorithm such as Fisher’s
    exact test with a very low alpha value (< 0.01), between recent values and the
    validation (test) metrics calculated during model generation.
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行等效性比较，使用如Fisher精确测试之类的算法，具有非常低的alpha值（< 0.01），比较最近值和模型生成期间计算的验证（测试）指标。
- en: (Optionally) Determine the probability mass function (`pmf`) of recent data
    and compare to the `pm` f of the validation predictions generated by the model
    during training. Comparison of `pmf` discrete distributions can be done with an
    algorithm such as Fisher’s noncentral hypergeometric test.
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: （可选）确定最近数据的概率质量函数（`pmf`），并与模型在训练期间生成的验证预测的`pm` f进行比较。可以使用如Fisher非中心超几何测试之类的算法进行`pmf`离散分布的比较。
- en: For regression problems
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于回归问题
- en: Analyze distribution of recent predictions (number of days back, number of hours
    back, depending on the volume and volatility of predictions) by capturing mean,
    median, stddev, and interquartile range (IQR) of the windowed data.
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过捕获窗口数据的均值、中位数、标准差和四分位数间距（IQR）来分析最近预测的分布（根据预测的量和波动性，回溯天数和小时数）。
- en: Set thresholds for monitoring the values of interest from the measured aggregated
    statistics. When a deviation occurs, alert the team to investigate.
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为监测感兴趣的值设置阈值。当发生偏差时，提醒团队进行调查。
- en: (Optionally) Determine the closest distribution fit to the continuous predictions
    and compare the similarity of this probability density function (`pdf`) through
    the use of an algorithm such as the Kolmogorov-Smirnov test.
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: （可选）确定与连续预测最接近的分布拟合，并通过使用如Kolmogorov-Smirnov测试之类的算法比较此概率密度函数（`pdf`）的相似性。
- en: Concept drift
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 概念漂移
- en: '*Concept* *drift* is a challenging issue that can affect models. In simplest
    terms, it is an introduction of a large latent (not collected) variable that has
    a strong influence on a model’s predictions. These effects typically manifest
    themselves in a broad sense, changing most, if not all, of the features used for
    imputation by a trained model. Continuing with our ice cream example, let’s look
    at figure 12.3.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '*概念* *漂移* 是一个具有挑战性的问题，可能会影响模型。用最简单的话说，它是一个引入了一个具有强烈影响模型预测的大隐含（未收集）变量的过程。这些影响通常在广义上表现出来，改变了一个训练模型用于插补的大多数，如果不是所有特征。继续我们的冰淇淋例子，让我们看看图12.3。'
- en: '![12-03](../Images/12-03.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![12-03](../Images/12-03.png)'
- en: Figure 12.3 Concept drift effects on model performance, business impact, and
    attribution measurement
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.3 概念漂移对模型性能、业务影响和归因测量的影响
- en: These values that we measure and use for correlation-based training (weather
    data, our own product data, and event data) have been used to build strong correlations
    to propensities to buy ice cream during the week for individual customers. As
    we discussed in chapter 11, the latent variables that are beyond our ability to
    collect have a stronger influence over a person’s decision to buy than the data
    that we collect.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 我们测量并用于基于相关性的训练（天气数据、我们自己的产品数据和事件数据）的这些值，已被用来建立强大的相关性，以预测个人客户在周内购买冰淇淋的倾向。正如我们在第11章中讨论的，我们无法收集的潜在变量对一个人购买决策的影响比我们收集的数据更强。
- en: 'When unknown influences positively or negatively influence a model’s output,
    we may get a dramatic shift in either our predictions or in the attribution measurements
    for the model, which is the case here. Tracking down the root cause can be either
    quite obvious (a global pandemic) or insidious and complex (social media effects
    on brand image). We can go about monitoring this type of drift for our scenario
    as follows:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 当未知因素正面或负面地影响模型输出时，我们可能会在我们的预测或模型归因测量中看到剧烈的变化，这正是这里的情况。追踪根本原因可能是非常明显（全球大流行）或微妙复杂（社交媒体对品牌形象的影响）。我们可以按照以下方式监控我们场景中的此类漂移：
- en: Implement metric logging for
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施指标日志记录，包括
- en: Primary model error (loss) metric(s)
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要模型误差（损失）指标
- en: Model attribution criteria (the business metric that the project is working
    to improve)
  id: totrans-81
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型归因标准（项目正在努力改善的业务指标）
- en: 'Collect and generate aggregated statistics (over an applicable time window)
    for predictions:'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集并生成预测的聚合统计信息（适用于适用的时间窗口）：
- en: Counts (number of predictions, predictions per grouped cohort, etc.)
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计数（预测次数、分组队列中的预测次数等）
- en: Mean, stddev, IQR for regressors
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 回归器的均值、标准差、四分位数间距
- en: Counts (number of predictions, number of labels predicted) and bucketed probability
    thresholds for classifiers
  id: totrans-85
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计数（预测次数、预测的标签数量）和分类器的分桶概率阈值
- en: Evaluate trends of aggregated statistics on predictions and attribution measurement
    over time. Unexplained drifts can be grounds for model retraining or a return
    to feature-engineering evaluation (additional features may be required to capture
    the new latent factor effects).
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估预测和归因测量随时间推移的聚合统计数据趋势。无法解释的漂移可能是模型重新训练或回归到特征工程评估（可能需要额外的特征来捕捉新的潜在因素效应）的依据。
- en: 'Regardless of the causes, it is important to monitor both potential symptoms
    of this issue: the model metrics associated with training for passive retraining,
    and the model attribution data for active retraining. Monitoring these shifts
    in model efficacy can help with early intervention, explainable analytics reports,
    and the ability to resolve the issue in a way that will not cause a disruption
    to the project as a whole.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 无论原因如何，重要的是要监控这个问题的潜在症状：与被动重新训练相关的模型指标，以及与主动重新训练相关的模型归因数据。监控这些模型有效性的变化可以帮助进行早期干预，解释性分析报告，以及以不会对整个项目造成干扰的方式解决问题。
- en: The answer may not be readily apparent as with other types of drift (namely,
    feature and prediction drift). The critical aspect of production monitoring for
    this type of unexplained drift is that it is captured in the first place. Being
    blind to this potential impact to a model’s performance can have staggering effects
    on a business if left unchecked, depending on the use case. Creating these monitoring
    statistics through a simple ETL is always time well spent.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 与其他类型的漂移（即特征和预测漂移）相比，答案可能并不明显。对于这种无法解释的漂移，生产监控的关键方面是它首先被捕捉到。如果对这种可能对模型性能的影响视而不见，那么根据用例，如果未加控制，可能会对业务产生巨大的影响。通过简单的ETL创建这些监控统计数据总是值得花费时间。
- en: Prediction drift
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 预测漂移
- en: '*Prediction* *drift* is highly related to label drift but has a nuanced difference
    that makes recovery from this type of drift follow an alternate set of actions.
    Like label drift, it affects the predictions greatly, but instead of being related
    to an outside influence, it’s directly related to a feature that is part of the
    model (although sometimes in a confounding manner).'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*预测* *漂移* 与标签漂移高度相关，但有一个细微的区别，使得从这种类型的漂移中恢复需要遵循另一套行动。像标签漂移一样，它极大地影响了预测，但它与外部影响无关，而是直接与模型的一部分特征（尽管有时是以混淆的方式）相关。'
- en: Let’s imagine that our wildly successful ice cream company had, at the time
    of training our model solution, a rather paltry showing in the Pacific Northwest
    region of the United States. With a lack of training data, the model wasn’t well
    suited to adapt to the extreme minority of feature data associated with this region.
    Adding to this lack of data issue, we were unaware of whether potential future
    customers in this region would like our product, because of the same dearth of
    information for exploratory data analysis (EDA).
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们想象一下，我们的冰淇淋公司当时在训练我们的模型解决方案时，在美国太平洋西北地区的表现相当糟糕。由于缺乏训练数据，模型并不适合适应与该地区相关的极端少数特征数据。加上这个数据不足的问题，我们还不知道该地区的潜在未来客户是否喜欢我们的产品，因为同样的信息缺乏导致了探索性数据分析（EDA）的信息不足。
- en: 'After the first few months of running the new campaign, raising awareness through
    word of mouth, it turns out that not only do people (and dogs) in the Pacific
    Northwest thoroughly enjoy our ice cream, but their behavior patterns turn out
    to match quite well with some of our most highly active customers. As a result,
    our model increases the frequency and rate at which coupons are issued to customers
    in this part of the country. Because of this increased demand, the model begins
    to issue so many coupons to customers in this region that we create an entirely
    new problem: a stock issue.'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在新活动运行的前几个月，通过口碑提高知名度后，结果发现不仅太平洋西北地区的人们（和狗）非常喜欢我们的冰淇淋，而且他们的行为模式与我们的最活跃客户之一相当吻合。因此，我们的模型增加了向该国该地区客户发放优惠券的频率和速率。由于这种需求增加，模型开始向该地区的客户发放如此多的优惠券，以至于我们创造了一个全新的问题：库存问题。
- en: Figure 12.4 shows the effect on the business that our model has inadvertently
    helped to create. While this isn’t a bad problem per se (it certainly drives up
    revenue!), an unexpected driver to the foundation of the business’s operation
    can introduce problems that will need to be solved.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4显示了我们的模型无意中帮助创造的业务影响。虽然这本身并不是一个问题（它确实提高了收入！），但业务运营基础的意外驱动因素可能会引入需要解决的问题。
- en: The situation shown in figure 12.4 is a positive one indeed. However, the model’s
    impact in this case will not show up in modeling metrics. In reality, this would
    likely show as a fairly equivalent loss score, even if we were to retrain the
    model on this new data. The attribution measurement analysis is the only way to
    detect this and account for the underlying shifts in the customer base moving
    forward.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4所示的情况确实是一个积极的局面。然而，在这种情况下，模型的影响不会在建模指标中显示出来。实际上，这可能会显示为一个相当等效的损失分数，即使我们在这个新数据上重新训练模型也是如此。归因测量分析是唯一能够检测这种情况并解释客户基础未来潜在变化的方法。
- en: '![12-04](../Images/12-04.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![12-04](../Images/12-04.png)'
- en: Figure 12.4 A highly beneficial impact to the business from a model’s output.
    This can create other problems and might need rapid adjustment (particularly if
    the opposite condition happens).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4 模型输出的高度有益的商业影响。这可能会引起其他问题，可能需要快速调整（尤其是如果发生相反条件时）。
- en: 'Prediction drift, in general terms, is handled through the process of feature
    monitoring. This set of tooling involves many of the following concepts:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 从一般意义上讲，预测漂移通过特征监控过程处理。这组工具涉及许多以下概念：
- en: 'Distribution monitoring of priors for each feature compared to recent values,
    lagged by an appropriate time factor:'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与最近值相比，每个特征的先验分布的分布监控，滞后一个适当的时间因子：
- en: Calculate mean, median, standard deviation, IQR for the feature as it was at
    training time.
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算特征在训练时间点的均值、中位数、标准差、四分位数范围。
- en: Compute recent feature statistical metrics that are being used for inference.
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算用于推理的最近特征统计指标。
- en: Calculate the distance or percentage error between these values.
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算这些值之间的距离或百分比误差。
- en: If the delta between these metrics is above a determined level, alert the team.
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果这些指标之间的差异超过一个确定的水平，则向团队发出警报。
- en: 'Distribution equivalency measurement:'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分布等效性测量：
- en: Convert continuous features to a probability density function (`pdf`) for the
    features as they were during training.
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将连续特征转换为训练期间的特征的概率密度函数（`pdf`）。
- en: Convert nominal (categorical) features to a probability mass function (`pmf`)
    for the features as they were during training.
  id: totrans-105
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将名义（分类）特征转换为训练期间的特征的概率质量函数（`pmf`）。
- en: Compute the similarity between these and the most recent (unseen-to-the-model
    through training) inference data utilizing algorithms such as the Wasserstein
    metric or Hellinger distance.
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用Wasserstein度量或Hellinger距离等算法计算这些与最近（在训练过程中对模型不可见）的推理数据之间的相似性。
- en: 'Specifying statistical process control (SPC) rules for basic statistical metrics
    for each feature:'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为每个特征的基本统计指标指定统计过程控制（SPC）规则：
- en: Sigma-based threshold levels whereby a smoothed value of each continuous feature
    over time is measured (typically, through a moving average or window aggregation)
    and alerted on when selected rules are violated. Western Electric rules are generally
    used for this.
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于Sigma的阈值水平，通过测量每个连续特征随时间的变化的平滑值（通常通过移动平均或窗口聚合）并在违反选定规则时发出警报。通常使用Western Electric规则。
- en: SPC rules based on scaled percentage membership of categorical or nominal values
    within a feature (aggregated as a function of time).
  id: totrans-109
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于特征中分类或名义值的缩放百分比成员资格的SPC规则（按时间函数聚合）。
- en: Whichever methodology you choose to utilize (or if you’d like to choose to do
    all of them), the most critical aspect of collecting information about the state
    of the features during training is that it allows for monitoring and having advance
    notice of feature degradation.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您选择哪种方法（或者如果您想选择全部方法），在训练过程中收集关于特征状态的信息的最重要的方面是，它允许进行监控并提前通知特征退化。
- en: To aid in tracking these statistical metrics, many (including myself) rely heavily
    on the tracking server of MLflow. Logging the values as part of a model-training
    event can help ensure that the historical record of what that model utilized for
    training is preserved, as well as keeping you from having to do an expensive (computationally
    and temporally) historic calculation of these values each time a validation of
    drift is executed.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助跟踪这些统计指标，许多人（包括我自己）严重依赖MLflow的跟踪服务器。将值作为模型训练事件的一部分进行记录可以帮助确保该模型用于训练的历史记录得到保留，同时避免每次执行漂移验证时都要进行昂贵的（计算和时间的）历史计算。
- en: Reality drift
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 现实漂移
- en: I’m writing this sentence on January 20, 2022\. It’s been a rough past year
    in the ice cream business. It’s arguably been a rough year for humanity in general.
    What once had been our company’s primary means of selling our tasty treats (ice
    cream trucks trolling about neighborhoods, community parks, sporting events, and
    dog parks) hasn’t been working out so well for us. We’ve had to reevaluate our
    distribution strategy and our marketing messaging and work through an incredibly
    tough economic climate due to the impacts of Covid-19.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 我是在2022年1月20日写下这句话的。过去一年对冰淇淋行业来说是个艰难的年份。可以说，对人类来说，这也许是个艰难的一年。曾经是我们公司销售美味佳肴（冰淇淋车在社区、社区公园、体育赛事和狗公园附近巡逻）的主要手段，对我们来说并没有那么顺利。我们不得不重新评估我们的分销策略和营销信息，并在由于Covid-19的影响而造成的极其艰难的经济环境中努力。
- en: '*Reality drift* is a special case of concept drift: while it is an outside
    (unmeasured and unforeseen) influence, these foundational shifts can have a much
    more profound and large-scale impact on the effectiveness of a model than general
    concept drift. Not only pandemics cause reality drift, though. Horseshoe manufacturers,
    after all, would have had similar issues with predicting demand accurately during
    the first few decades of the 20th century.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '**现实漂移**是概念漂移的一种特殊情况：虽然它是一种外部（未测量和不可预见的）影响，但这些基础性的转变对模型的有效性可能比一般的概念漂移有更深远和更大规模的影响。不仅仅是流行病会导致现实漂移。毕竟，马蹄铁制造商在20世纪的前几十年预测需求时也会遇到类似的问题。'
- en: Events such as these are foundationally transformative and disruptive, particularly
    when they are *black swan events**.* In the most severe cases, they can be so
    detrimental to businesses that a malfunctioning model is the worst of their worries;
    the continued existence of the company is far more pressing of a problem.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这些事件在根本上是变革性和破坏性的，尤其是当它们是**黑天鹅事件**时。在最严重的情况下，它们对企业的损害可能如此之大，以至于一个功能失调的模型只是他们担忧的最坏情况；公司持续存在的问题更为紧迫。
- en: For more moderate disruptive reality drifts, the ML solutions that are running
    in production are generally hit pretty heavily. With no ability to recognize which
    new features can explain the underlying tectonic shifts in the business, adapting
    solutions to handle large and immediate changes becomes a temporal problem. There
    simply isn’t enough time or resources to repair the models (and sometimes, not
    even the ability to collect the data needed).
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 对于更为温和的破坏性现实漂移，运行在生产中的机器学习解决方案通常受到相当大的冲击。由于无法识别哪些新特征可以解释业务中的潜在构造性变化，适应解决方案以处理大规模和即时变化成为了一个时间问题。简单地来说，没有足够的时间或资源来修复模型（有时甚至没有收集所需数据的可能性）。
- en: 'When these sorts of foundational paradigm-shifting events happen, models affected
    by the change in the state of the world should face one of two fates:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 当这类基础性的范式转变事件发生时，受到世界状态变化影响的模型应该面临两种命运之一：
- en: Abandonment due to poor performance and/or cost-savings initiatives
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于表现不佳和/或成本节约措施而放弃
- en: Model rebuilding after extensive feature generating and engineering
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在进行广泛的特征生成和工程后重建模型
- en: What you absolutely should never do is quietly ignore the problem. The predictions
    are likely to be irrelevant, retraining on original features blindly is not likely
    to solve the problem, and leaving poor-performing models running is costly. At
    the bare minimum, a comprehensive assessment of the nature and state of the features
    going into models needs to be undertaken to ensure that the validity is still
    sound. Without approaching these events in this thorough manner of validation
    and verification, the chances that the model (and other models) is allowed to
    continue to produce unvetted results for very long are slim.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 你绝对不应该做的事情是安静地忽视问题。预测很可能是无关的，盲目地在原始特征上进行再训练不太可能解决问题，让表现不佳的模型继续运行是代价高昂的。至少，需要对进入模型的特征的性质和状态进行全面评估，以确保其有效性仍然可靠。如果不以这种彻底的验证和验证方式来处理这些事件，模型（以及其他模型）被允许继续长时间产生未经审查的结果的可能性很小。
- en: Feedback drift and the law of diminishing returns
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈漂移和收益递减定律
- en: A form of drift less spoken of is *feedback drift*. Imagine that we’re working
    on a modeling solution for estimating a defect density on a part manufactured
    in a factory. Our model is a causal model, with our production recipes being built
    in such a way that it reflects a directed acyclic graph that mirrors our production
    process. After running through this Bayesian modeling approach to simulate the
    different effects of changing parameters to the end result (our yield), we find
    ourselves with a set of seemingly optimal parameters to put into our machines.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 一种较少提及的漂移形式是*反馈漂移*。想象一下，我们正在为估计工厂制造的零件的缺陷密度开发一个建模解决方案。我们的模型是一个因果模型，我们的生产配方被构建成反映一个反映我们的生产过程的定向无环图。通过运行贝叶斯建模方法来模拟改变参数对最终结果（我们的产量）的不同影响，我们发现我们有一组看似最优的参数可以放入我们的机器中。
- en: At first, the model shows relationships that do not result in optimal outcomes.
    As we explore the feature space further and retrain our model, the simulations
    more accurately reflect the expected outcome when we initiate tests. Our yields
    stabilize to nearly 100% over the first few months of running the model and utilizing
    the simulation’s outputs.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 最初，模型显示的关系并不能导致最佳结果。随着我们进一步探索特征空间并重新训练我们的模型，模拟结果在测试启动时能更准确地反映预期的结果。在模型运行的前几个月，我们的产量稳定在近100%。
- en: By controlling for the causal relationships present in the system that we’re
    modeling, we’ve effectively created a feedback loop in the model. The variances
    of allowable parameters to adjust shrink, and were we to build a supervised machine
    learning model for validation purposes on this data, it wouldn’t learn very much.
    There simply isn’t a signal to learn from anymore (at least not one worth much).
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 通过控制我们在建模系统中存在的因果关系，我们已经在模型中有效地创建了一个反馈循环。可调整参数的方差缩小，如果我们为验证目的构建一个监督机器学习模型，它将学不到很多东西。这里根本就没有可以学习的信号（至少不是值得太多）。
- en: This effect isn’t present in all situations, as causal models are more heavily
    affected by this than correlation-based traditional ML models are. But in some
    situations, the results of the predictions of a correlation-based model can contaminate
    our new features coming in, thereby skewing the effects of those features that
    were collected with the observed result that actually occurred. Churn models,
    fraud models, and recommendation engines are all highly susceptible to these effects
    (we are directly manipulating the behavior of our customers by acting on the predictions
    to promote positive results and minimize negative results).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这种影响并不在所有情况下都存在，因为因果模型比基于相关性的传统机器学习模型更容易受到影响。但在某些情况下，基于相关性的模型预测结果可能会污染我们新收集的特征，从而扭曲那些与实际发生观察结果收集的特征的效果。流失模型、欺诈模型和推荐引擎都高度易受这些影响（我们通过采取行动来促进积极结果和最小化消极结果，直接操纵客户的行为了）。
- en: This is a risk in many supervised learning problems, and it can be detected
    by evaluating the prediction quality over time. As each retraining happens, the
    metrics associated with the model should be recorded (MLflow is a great tool for
    this) and measured periodically to see if degradation occurs on the inclusion
    of new feature data to the model. If the model is simply incapable of returning
    to acceptable levels of loss metrics based on the validation data being used for
    recent activity, you may be in the realm of diminishing returns.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 这是在许多监督学习问题中的一个风险，可以通过评估预测质量随时间的变化来检测。每次重新训练发生时，与模型相关的指标都应该被记录（MLflow是一个很好的工具），并定期测量，以查看是否在将新特征数据包含到模型中时发生了退化。如果模型根本无法根据用于最近活动的验证数据将损失指标恢复到可接受的水平，那么你可能处于收益递减的领域。
- en: The response to this occurrence is to either revisit feature-engineering work
    (adding data that can assist in helping the model learn the new data paradigm)
    or revisit the project. Revisiting the project can mean, sometimes, that it’s
    best to turn it off. Some problems can be completely solved over time by utilizing
    ML to discover the patterns present in behavior of systems (or people) and can
    be supplanted by modifying the manner in which the business operates.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 对此现象的响应是重新审视特征工程工作（添加可以帮助模型学习新数据范式的数据）或重新审视项目。重新审视项目有时意味着最好将其关闭。一些问题可以通过利用机器学习来发现系统（或人）行为中的模式并在一段时间内完全解决，可以通过修改业务运营的方式取代。
- en: 12.2 Responding to drift
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 12.2 对漂移的响应
- en: We’ve covered how to calculate model impacts by using appropriate statistical
    tests on attribution metrics, and we’ve discussed the types of model-affecting
    entropy that make our models less stable over time. If we were to see our ice
    cream coupon model deteriorate in any of the six ways defined in section 12.1,
    what process would we use to correct it?
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经介绍了如何通过在归因度量上使用适当的统计测试来计算模型影响，我们也讨论了导致我们的模型随时间变得不稳定的影响模型熵的类型。如果我们看到我们的冰淇淋优惠券模型在12.1节中定义的六种方式中的任何一种恶化，我们将使用什么过程来纠正它？
- en: 12.2.1 What can we do about it?
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12.2.1 我们能对此做些什么？
- en: It all starts with monitoring. For our ice cream coupon scenario, that involves
    building ETL processes for not only our predictions (safely storing each batch
    of predictions for analytics use cases), but also basic statistical measurement
    attributes to use for setting triggered alerts about model health.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这一切都始于监控。对于我们冰淇淋优惠券场景，这涉及到构建ETL流程，不仅包括我们的预测（安全存储每个批次的预测以供分析用途），还包括基本统计测量属性，用于设置关于模型健康状况的触发警报。
- en: Let’s revisit the outside temperature measurements that are being fed as a feature
    into our model from chapter 11\. Figure 12.5 shows a visual example of how, by
    setting three separate checks on the temperature feature, we could detect issues
    in the underlying data.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾一下第11章中作为特征输入到我们模型的外部温度测量。图12.5展示了通过在温度特征上设置三个单独的检查，我们可以如何检测底层数据中存在的问题。
- en: This plot is intended to be a visual aid only. In practice, alerts would be
    configured through calculations performed on the data, triggering if the boundary
    shift magnitude crosses a predetermined threshold purely based on logic written
    in code. The three regions identified in this plot, though, are examples of rules
    that should be embedded in monitoring code that can alert the team to an issue
    in the input features to the model.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 此图仅作为视觉辅助。在实际操作中，警报将通过在数据上执行的计算进行配置，如果边界移动的幅度超过预先设定的阈值，则触发警报，这完全基于代码中编写的逻辑。然而，此图中所识别的三个区域是应该嵌入到监控代码中的规则的示例，这些规则可以提醒团队注意模型输入特征中存在的问题。
- en: '![12-05](../Images/12-05.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![12-05](../Images/12-05.png)'
- en: Figure 12.5 Setting threshold boundaries around a feature to alert on large-magnitude
    changes
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.5 在特征周围设置阈值边界以警报大范围变化
- en: The first identified detection (step change alerting on the mean) is useful
    for detecting large, unexpected deviations that may prove problematic for a model’s
    predictive capability. Rules like this are relatively trivial to implement, can
    have configured thresholds, and are an effective early-warning system for the
    ML team to intervene immediately when the new data arrives.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个识别出的检测（基于平均值的阶跃变化警报）对于检测可能对模型预测能力造成问题的较大、意外的偏差非常有用。这类规则相对容易实现，可以配置阈值，并且是机器学习团队在新的数据到达时立即干预的有效早期预警系统。
- en: The second detection type (step change in the values of data variance) generally
    requires a bit more time to trigger. The variance of the same value (temperature)
    on different scales (Celsius versus Fahrenheit) is intrinsically different. As
    such, the total variance of the data will show a marked difference. However, to
    reduce the chances of false-positive warnings on discrete periods of time, alarm
    conditions concerned with variance monitoring generally require longer periods
    to trigger.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种检测类型（数据方差值的阶跃变化）通常需要更多的时间来触发。同一值（温度）在不同尺度（摄氏度与华氏度）上的方差本质上是不同的。因此，数据的总方差将显示出明显的差异。然而，为了减少在离散时间段内出现假阳性警告的可能性，与方差监控相关的警报条件通常需要更长时间才能触发。
- en: The third indication type, although coinciding with the shift in the mean, is
    a dramatic increase in variation that has not been historically observed. When
    large peaks occur in variation measurements (typically far larger than the changes
    that would be monitored by the second case in this example), an investigation
    is warranted into the state of the data being measured.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 第三种指示类型，尽管与平均值的移动一致，但却是历史上未曾观察到的显著增加的变异性。当变异性测量中出现大峰值（通常远大于本例中第二个案例所监控的变化）时，有必要调查被测量的数据状态。
- en: At the very least, to protect against both the slow entropic decay of model
    effectiveness and the foundational disruptive events seen in figure 12.5, we need
    to be measuring aspects of our models. Feature monitoring, training label drift
    measurement, model validation metrics, and attribution metrics are all elements
    that make up an effective strategy to identify drift.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 至少，为了防止模型有效性的缓慢熵减和如图12.5所示的基础颠覆性事件，我们需要测量我们模型的一些方面。特征监控、训练标签漂移测量、模型验证指标和归因指标都是构成有效策略以识别漂移的元素。
- en: Table 12.2 illustrates common types of modeling that I’ve seen and worked on
    in different industries and a general estimate of how long stability held before
    a retraining event was required, for perspective.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 表12.2展示了我在不同行业中看到并参与过的常见建模类型，以及重新训练事件之前稳定性保持的一般估计，以供参考。
- en: Table 12.2 Model stability and robustness to drift
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 表12.2 模型稳定性和对漂移的鲁棒性
- en: '| Application | Attribution metric | Retraining periodicity (approximate) |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| 应用 | 归因度量指标 | 重新训练周期性（近似） |'
- en: '| Churn prediction | Purchase event after action taken on customer with high
    probability | Monthly |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| 持续流失预测 | 对高概率客户采取行动后的购买事件 | 每月 |'
- en: '| Customer lifetime value (CLV) | % of continued CLV group membership | Weekly
    |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| 客户终身价值（CLV） | 继续CLV群体成员的百分比 | 每周 |'
- en: '|  | Stability |  |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '|  | 稳定性 |  |'
- en: '| Transportation Industry | Revenue | Monthly |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '| 交通运输业 | 收入 | 每月 |'
- en: '| Demand/pricing | Purchase rate |  |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| 需求/定价 | 购买率 |  |'
- en: '| Recommendation engine (personalization) | Purchase rate or viewership rate
    | Hourly or daily |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| 推荐引擎（个性化） | 购买率或观看率 | 每小时或每日 |'
- en: '| Image content labeling | % error in classification | Two to six months |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| 图像内容标注 | 分类错误百分比 | 两到六个月 |'
- en: '| Fraud detection | Loss event count | Biweekly |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| 欺诈检测 | 损失事件计数 | 双周 |'
- en: '|  | Loss amounts |  |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '|  | 损失金额 |  |'
- en: '|  | Undetected fraud event count |  |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '|  | 未检测到的欺诈事件计数 |  |'
- en: '| Equipment failure | Maintenance costs (replacement) | Semiannually or annually
    |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 设备故障 | 维护成本（更换） | 每半年或每年 |'
- en: '| Prediction (survivability) | Count of unrequired maintenance |  |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 预测（生存能力） | 不必要维护的计数 |  |'
- en: '| Sales forecasting | Backtesting accuracy in projection | Daily or weekly
    |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 销售预测 | 预测准确性回溯测试 | 每日或每周 |'
- en: As you can see, the projected retraining periodicity varies quite widely across
    applications. Table 12.2 doesn’t reflect what happens outside these plans. Even
    with a system in place for active retraining to trigger a new model to be created
    upon a degradation in model attribution performance, continued success is not
    guaranteed for that new model. Drift effects could have influenced both the old
    and new models (and most of the time, they do) to the point that just retraining
    on new data will not repair the model’s performance to an acceptable level.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，预测的重新训练周期性在各个应用中差异很大。表12.2并未反映这些计划之外的情况。即使有系统用于主动重新训练，在模型归因性能下降时触发创建新模型，也不能保证新模型的成功持续。漂移效应可能已经影响了旧模型和新模型（大多数情况下确实如此），以至于仅仅在新的数据上重新训练并不能将模型性能修复到可接受的水平。
- en: For a passive scheduled retraining paradigm, the problem can take longer to
    realize if the attribution measurements are not closely monitored. With the periodicity
    mentioned in table 12.2 (which is loosely approximated), the first scheduled retraining
    after a drift event will generally uncover an issue that requires manual intervention
    to solve. It could be revisiting feature-engineering stages for the project, including
    new features that can help the model adapt to the new state of the world in the
    existing features, or a complete overhaul of the approach used to build the project
    in the first place.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 对于被动计划的重新训练范式，如果归因测量没有密切监控，问题可能需要更长的时间才能显现。根据表12.2中提到的周期性（大致近似），漂移事件后的第一次计划重新训练通常会发现需要手动干预解决的问题。这可能包括重新审视项目的特征工程阶段，包括新特征，这些特征可以帮助模型适应现有特征中的新世界状态，或者是对最初构建项目所使用方法的彻底改革。
- en: It is through monitoring the elements that impact a model, from feature metrics
    and model metrics, all the way to attribution measurement, that we can identify
    an issue that exists in the predictions. Once we identify it, though, what can
    we do about it?
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 通过监控影响模型的因素，从特征指标和模型指标，到归因测量，我们可以识别出预测中存在的问题。然而，一旦我们识别出问题，我们又能做些什么呢？
- en: 12.2.2 Responding to drift
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12.2.2 对漂移的响应
- en: For our example of temperature drift shown previously in figure 12.5, the response
    to repairing the drift condition is trivial. We can apply a feature conversion
    to the older data to bring it in line with the new scaling of the temperature
    values. Identifying, isolating, and repairing issues that are obvious and trivial
    to correct is, well, obvious. Just fix it and move on.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 对于之前在图12.5中展示的温度漂移示例，修复漂移条件时的响应是微不足道的。我们可以对旧数据进行特征转换，使其与新温度值的缩放一致。识别、隔离和修复明显且易于纠正的问题，嗯，很明显。只需修复并继续前进。
- en: 'Unfortunately, not every problem is so simple. What if we can’t readily identify
    what is causing a degradation in the model? We have four primary means of responding
    to drift:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，并非每个问题都如此简单。如果我们不能轻易地识别导致模型退化的原因怎么办？我们有四种主要方式来应对漂移：
- en: Scheduled or triggered retraining, with validation of results against the prior
    model, and new model against new validation data. Keep the best one.
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安排或触发的重新训练，对先前模型的结果进行验证，对新模型进行新验证数据的验证。保留最好的一个。
- en: For obvious issues (for example, ETL errors, explosions in cardinality, or shifts
    in variance of features), either repair or scale the features, retrain the model,
    validate its performance on new holdout data, and continue running as before on
    the new model.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于明显的问题（例如，ETL错误、基数爆炸或特征方差的变化），要么修复或缩放特征，重新训练模型，在新保留数据上验证其性能，然后在新模型上继续运行，就像以前一样。
- en: For prediction degradation issues that are not related to the obvious factors
    mentioned in the preceding list item, revisit feature engineering, and conduct
    exploratory data analysis and correlation analysis. Determine if any new features
    need to be added or existing features need to be removed. Attempt to retrain and
    release a new validated model to production.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于与前面列表项中提到的明显因素无关的预测退化问题，重新审视特征工程，进行探索性数据分析和相关性分析。确定是否需要添加任何新特征或删除现有特征。尝试重新训练并发布一个经过验证的新模型到生产环境中。
- en: If the model shows a negative business impact that is statistically significant,
    stop using the model immediately. Attempt to perform root cause analysis and repair
    the issue (if possible). If the benefit of the model is no longer present, shut
    it down permanently.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果模型显示出具有统计学意义的负面业务影响，立即停止使用该模型。尝试进行根本原因分析并修复问题（如果可能）。如果模型的好处不再存在，永久关闭它。
- en: 'The latter three elements in this list are relatively self-explanatory. However,
    the first one has a degree of nuance, principally in the mechanism used for retraining.
    There are two primary means of initiating a retraining event: passive and active,
    illustrated in figure 12.6.'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 列表中的后三个元素相对容易理解。然而，第一个元素在重新训练的机制上具有一定的细微差别。启动重新训练事件有两种主要方式：被动和主动，如图12.6所示。
- en: '![12-06](../Images/12-06.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![12-06](../Images/12-06.png)'
- en: Figure 12.6 Passive retraining (scheduled) and active retraining (triggered)
    to respond to model drift
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.6 被动重新训练（计划）和主动重新训练（触发）以应对模型漂移
- en: These two mechanisms for initiating a model retraining are remarkably different.
    In *passive retraining*, we set up a scheduled job that will take either a sliding
    window of our feature data to train a new model (this approach is useful for highly
    dynamic datasets predicting values that change rapidly over periods of time) or
    all data from the beginning of time, including new data that the previous production
    model has not seen. We then take a holdout validation set from the most recent
    data and run a model evaluation of the current prior model (our production model)
    and the new model against the same new holdout validation data. The winner, based
    on our model metrics, is the one selected for production.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种启动模型重新训练的机制非常不同。在*被动重新训练*中，我们设置一个计划任务，该任务将使用我们的特征数据的一个滑动窗口来训练一个新模型（这种方法对于预测随时间快速变化的值的动态数据集非常有用）或者从时间开始的所有数据，包括之前的生产模型尚未看到的新数据。然后我们从最新数据中取出一组保留验证集，对当前先前的模型（我们的生产模型）和新的模型进行模型评估，评估它们在相同的保留验证数据上的性能。根据我们的模型指标，获胜者将被选为生产模型。
- en: For this passive retraining approach, we typically have alerting set up to notify
    us in the event that a new model is not selected for replacement for too many
    iterations. This is to warn us that a fundamental shift could occur in the recent
    data that may indicate a need to rebuild the feature-engineering set (which would
    be an activity removed from the passive retraining cycle).
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这种被动重新训练方法，我们通常会设置警报，以便在新的模型在多次迭代后没有被选为替换时通知我们。这是为了警告我们，最近的数据可能发生了根本性的变化，这可能表明需要重建特征工程集（这将是一项从被动重新训练周期中移除的活动）。
- en: For the *active retraining* implementation shown in the lower portion of figure
    12.6, a constantly monitored, automated solution is used that measures attributes
    associated with the model’s business impact and prediction quality (distribution,
    variance, mean, etc.). If the attribution monitoring detects a degradation in
    performance, an automated retraining event takes place. Like the passive implementation,
    a comparison of the new triggered model event against recent holdout data to the
    current running model against the same data is conducted. If the new model is
    better, it is selected for promotion into production (typically automated through
    CI/CD). As with the passive approach, repeated failures to succeed an earlier
    generation of model iteration will trigger an alert for the DS team to investigate.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 对于图12.6下半部分所示的活动重新训练实现，使用了一种持续监控的自动化解决方案，该解决方案测量与模型业务影响和预测质量（分布、方差、均值等）相关的属性。如果归因度量的监控检测到性能下降，将发生自动重新训练事件。与被动实现一样，会进行新触发的模型事件与最近保留数据对比当前运行模型与相同数据的比较。如果新模型表现更好，它将被选中提升到生产环境中（通常通过CI/CD自动化）。与被动方法一样，如果早期一代模型迭代连续失败，将触发DS团队的警报以进行调查。
- en: Whether a passive or active implementation is chosen is entirely applicable
    to the size of the ML team working on the project, the stability of the implementation,
    the nature of the business use case, and the capabilities of the team. It doesn’t
    matter which of these solutions is chosen for an ML project. The only important
    thing to understand is that one of them needs to be chosen.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 选择被动或主动实现完全适用于在项目上工作的ML团队的大小、实现的稳定性、业务用例的性质以及团队的能力。对于ML项目来说，选择哪种解决方案无关紧要。唯一重要的是要理解，其中之一必须被选择。
- en: Leaving a model to its own devices, assuming that it will go on predicting as
    well as it did when first trained with no further action, is a recipe for disaster.
    Projects that do not account for retraining, health checks, monitoring, and attribution
    measurements are doomed to failure, due to irrelevance or actively poor results
    negatively impacting a business.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 将模型置之不理，假设它将继续像最初训练时那样良好地预测，而不采取任何进一步行动，这是灾难的预兆。那些没有考虑到重新训练、健康检查、监控和归因度量的项目注定会失败，因为它们的不相关性或积极的不良结果会对业务产生负面影响。
- en: Summary
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Monitoring for the primary types of drift—feature, label, concept, prediction,
    reality, and feedback—are incredibly important to ensure a solution’s health.
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控漂移的主要类型——特征、标签、概念、预测、现实和反馈——对于确保解决方案的健康至关重要。
- en: Retraining through passive or active means is an effective way to counteract
    drift. When these attempts fail, revisiting the implementation is critical to
    introduce new features that deal with drifts in order to ensure that the solution
    continues to serve its purpose.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过被动或主动的方式重新训练是有效对抗漂移的方法。当这些尝试失败时，重新审视实现方式是至关重要的，以便引入处理漂移的新功能，以确保解决方案继续发挥作用。
