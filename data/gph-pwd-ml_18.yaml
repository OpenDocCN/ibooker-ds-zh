- en: appendix B. Neo4j
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录B. Neo4j
- en: 'Throughout this book, the examples, code, and exercises are based on a specific
    graph database: Neo4j. Nevertheless, all the theories, algorithms, and even code
    can easily be adapted to work with any graph database on the market now and (with
    a good approximation) in the future. I selected this database because'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，示例、代码和练习都是基于特定的图数据库：Neo4j。尽管如此，所有的理论、算法甚至代码都可以轻松地适应与市场上现在和（在良好近似下）将来的任何图数据库一起工作。我选择这个数据库是因为
- en: I’ve worked with this database for the past 10 years (and know it inside out).
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我过去10年一直在使用这个数据库（并且对其了如指掌）。
- en: It is a native graph database (with all the consequences that it brings, as
    explained throughout the book).
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它是一个原生的图数据库（它带来的所有后果，如本书中所述）。
- en: It has a broad community of experts.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它拥有广泛的专家社区。
- en: According to DB-Engines, Neo4j has been the most popular graph database management
    system (DBMS) for several years ([http://mng.bz/YAMB](https://shortener.manning.com/YAMB);
    figure B.1).[¹](#pgfId-1001064)
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 根据DB-Engines的数据，Neo4j已经连续几年是最受欢迎的图数据库管理系统（DBMS）([http://mng.bz/YAMB](https://shortener.manning.com/YAMB);
    图B.1)。[¹](#pgfId-1001064)
- en: '![APPB_F01_Negro](../Images/APPB_F01_Negro.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![APPB_F01_Negro](../Images/APPB_F01_Negro.png)'
- en: Figure B.1 DB-Engines ranking of graph DBMSes
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 图B.1 图数据库管理系统（DBMS）的DB-Engines排名
- en: This appendix contains the minimum information necessary to get started with
    Neo4j, including a generic introduction to Neo4j, installation instructions, a
    description of the Cypher language (the language used to query the database),
    and the configuration of some plugins used in the examples.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本附录包含启动Neo4j所需的最基本信息，包括对Neo4j的通用介绍、安装说明、Cypher语言（用于查询数据库的语言）的描述，以及示例中使用的某些插件的配置。
- en: B.1 Neo4j introduction
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.1 Neo4j简介
- en: Neo4j is available as a GPL3-licensed open source Community Edition. Neo4j Inc.
    also licenses an Enterprise Edition with backup, scaling extensions, and other
    enterprise-grade features under closed source commercial terms. Neo4j is implemented
    in Java and accessible over the network through a transactional HTTP endpoint
    or the binary Bolt protocol.[²](#pgfId-1001093) We will use Neo4j throughout the
    book as our graph database reference implementation.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j作为GPL3许可的开源社区版提供。Neo4j Inc.还根据封闭源代码的商业条款，以企业级功能（包括备份、扩展和其它企业级特性）许可企业版。Neo4j是用Java实现的，可以通过事务HTTP端点或二进制Bolt协议在网络中访问。[²](#pgfId-1001093)
    我们将在本书中使用Neo4j作为我们的图数据库参考实现。
- en: 'Neo4j has been widely adopted for the following reasons:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j因其以下原因被广泛采用：
- en: It implements a labeled property graph database.[³](#pgfId-1001108)
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它实现了带标签的属性图数据库。[³](#pgfId-1001108)
- en: It uses a native graph storage based on index-free adjacency.[⁴](#pgfId-1001129)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用基于无索引邻接的原生图存储。[⁴](#pgfId-1001129)
- en: It provides native graph querying and a related language, Cypher,[⁵](#pgfId-1001144)
    that defines how the graph database describes, plans, optimizes, and executes
    queries.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它提供了原生的图查询和相关语言Cypher[⁵](#pgfId-1001144)，该语言定义了图数据库如何描述、计划、优化和执行查询。
- en: Every architecture layer—from the queries that use Cypher to the files on disk—is
    optimized for storing and retrieving graph data.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个架构层——从使用Cypher的查询到磁盘上的文件——都针对存储和检索图数据进行了优化。
- en: It provides an easy-to-use developer workbench with a graph visualization interface.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它提供了一个易于使用的开发者工作台，带有图可视化界面。
- en: 'Neo4j aims to provide a full-strength, industrial-grade database. Transactional
    support is one of its strengths, differentiating it from the majority of NoSQL
    solutions. Neo4j provides full ACID support [Vukotic et al., 2014]:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j旨在提供全功能的工业级数据库。事务支持是其优势之一，使其与大多数NoSQL解决方案区分开来。Neo4j提供了完整的ACID支持 [Vukotic
    et al., 2014]：
- en: '*Atomicity (A)*—You can wrap multiple database operations within a single transaction
    and make sure that they’re all executed atomically. If one of the operations fails,
    the entire transaction will be rolled back.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*原子性（A）*——您可以在单个事务中包装多个数据库操作，并确保它们都是原子性地执行的。如果其中一个操作失败，整个事务将被回滚。'
- en: '*Consistency (C)*—When you write data to the Neo4j database, you can be sure
    that every client accessing the database afterward will read the latest updated
    data.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*一致性（C）*——当您将数据写入Neo4j数据库时，您可以确信随后访问数据库的每个客户端都将读取最新更新的数据。'
- en: '*Isolation (I)*—You can be sure that operations within a single transaction
    will be isolated one from another, so writes in one transaction won’t affect reads
    in another transaction.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*隔离性 (I)*—您可以确信单个事务内的操作将相互隔离，因此一个事务中的写入不会影响另一个事务中的读取。'
- en: '*Durability (D)*—You can be certain that the data you write to Neo4j will be
    written to disk and available after database restart or a server crash.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*耐用性 (D)*—您可以确信您写入 Neo4j 的数据将被写入磁盘，并在数据库重启或服务器崩溃后仍然可用。'
- en: The ACID support makes it easy for anyone who’s used to the traditional guarantees
    of relational databases to transition to Neo4j, and makes working with graph data
    both safe and convenient. In addition to ACID transactional support, features
    to consider when choosing the right database for an architectural stack include
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: ACID 支持使得习惯于传统关系数据库保证的任何人都能轻松过渡到 Neo4j，并且使得处理图数据既安全又方便。除了 ACID 事务支持外，在选择适合架构堆栈的数据库时还应考虑以下特性：
- en: '*Recoverability*—This feature has to do with the database’s ability to set
    things right after a failure. Databases, like all other software systems, “are
    susceptible to bugs in their implementation, in the hardware they run on, and
    in that hardware’s power, cooling, and connectivity. Though diligent engineers
    try to minimize the possibility of failure in all of these, at some point it’s
    inevitable that a database will crash. And when a failed server resumes operation,
    it must not serve corrupt data to its users, irrespective of the nature or timing
    of the crash. When recovering from an unclean shutdown, perhaps caused by a fault
    or even an overzealous operator, Neo4j checks in the most recently active transaction
    log and replays any transactions it finds against the store. It’s possible that
    some of those transactions may have already been applied to the store, but because
    replaying is an idempotent action, the net result is the same: after recovery,
    the store will be consistent with all transactions successfully committed prior
    to the failure” [Robinson et al., 2015]. Moreover, Neo4j offers an online backup
    procedure that allows you to recover the database when the original data is lost.
    In such case, recovery to the last committed transaction is impossible, but it
    is better than losing all the data [Robinson et al., 2015].'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可恢复性*—这一特性与数据库在失败后恢复事物的能力有关。数据库，就像所有其他软件系统一样，“容易受到其实施中的错误、运行其上的硬件以及该硬件的电力、冷却和连接性的影响。尽管勤勉的工程师们试图最小化所有这些失败的可能性，但最终数据库崩溃是不可避免的。当失败的服务器恢复操作时，它必须不向用户提供损坏的数据，无论崩溃的性质或时间如何。在从未清理的关闭中恢复时，可能是由于故障或甚至是一个过于热情的操作员，Neo4j
    会检查最近的活跃事务日志，并重新播放它发现的任何事务。可能有些事务已经应用到存储中，但由于重新播放是一个幂等操作，最终结果是相同的：恢复后，存储将与失败前成功提交的所有事务保持一致”
    [Robinson 等人，2015]。此外，Neo4j 提供了一个在线备份程序，允许您在原始数据丢失时恢复数据库。在这种情况下，恢复到最后提交的事务是不可能的，但比丢失所有数据要好
    [Robinson 等人，2015]。'
- en: '*Availability*—In addition to recoverability and to increase the chance of
    recoverability, “a good database needs to be highly available to meet the increasingly
    sophisticated needs of data-heavy applications. The database’s ability to recognize
    and, if necessary, repair an instance after crashing means that data quickly becomes
    available again without human intervention. And of course, more live instances
    increases the overall availability of the database to process queries. It’s uncommon
    to want individual disconnected database instances in a typical production scenario.
    More often, we cluster database instances for high availability. Neo4j uses a
    master/slave cluster arrangement to ensure that a complete replica of the graph
    is stored on each machine. Writes are replicated out from the master to the slaves
    at frequent intervals. At any point, the master and some slaves will have a completely
    up-to-date copy of the graph, while other slaves will be catching up (typically,
    they will be but milliseconds behind)” [Robinson et al., 2015].'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可用性*——除了恢复性和增加恢复机会之外，“一个好的数据库需要具有高度的可用性，以满足数据密集型应用程序日益复杂的需求。数据库在崩溃后能够识别并（如果需要）修复实例的能力意味着数据可以快速恢复，无需人工干预。当然，更多的活动实例会增加数据库处理查询的整体可用性。在典型的生产场景中，通常不希望有单独的断开连接的数据库实例。更常见的是，我们为了高可用性而集群数据库实例。Neo4j使用主/从集群配置来确保每个机器上存储了图的一个完整副本。写入操作会频繁地从主节点复制到从节点。在任何时候，主节点和一些从节点将拥有图的一个完全最新的副本，而其他从节点正在追赶（通常，它们将落后几毫秒）”[Robinson等人，2015]。'
- en: '*Capacity*—Another critical aspect is related to the amount of data it is possible
    to store in a database—in our specific case, a graph database. Thanks to the adoption
    of dynamically sized pointers in Neo4j 3.0 and later, the database can scale up
    to run any conceivable size of graph workload, with an upper limit “in the quadrillions”
    of nodes [Woodie, 2016].'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*容量*——另一个关键方面与数据库中可以存储的数据量有关——在我们的特定案例中，是一个图数据库。得益于Neo4j 3.0及以后版本中动态大小指针的采用，数据库可以扩展到运行任何可想象大小的图工作负载，上限“在万亿级别”的节点[Woodie，2016]。'
- en: Two excellent books on this topic are Neo4j in Action [Vukotic et al., 2014]
    and Graph Databases [Robinson et al., 2015]. At the time of writing, the latest
    version available was 4.2.x, so the code and queries were tested with that version.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 关于这个主题有两本优秀的书籍，分别是《Neo4j实战》（Vukotic等人，2014年）和《图数据库》（Robinson等人，2015年）。在撰写本文时，可用的最新版本是4.2.x，因此代码和查询都是与该版本进行测试的。
- en: B.2 Neo4j installation
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.2 Neo4j安装
- en: 'Neo4j is available in two editions: Community and Enterprise. The Community
    Edition can be downloaded freely from the Noe4j website and used indefinitely
    for noncommercial purposes under the GPLv3 license.[⁶](#pgfId-1001159) The Enterprise
    Edition can be downloaded and tried for a limited amount of time and under specific
    constraints (because it requires you to buy a proper license). The book’s code
    has been adapted to work perfectly with the Community Edition; I recommend using
    it, so that you have all the time you need. You can also use Neo4j packaged as
    a Docker image.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j有两种版本：社区版和企业版。社区版可以从Neo4j网站免费下载，并且可以在GPLv3许可证下无限期地用于非商业目的。[⁶](#pgfId-1001159)
    企业版可以下载并试用一定时间，并受到特定约束（因为它要求你购买适当的许可证）。本书的代码已经调整为与社区版完美兼容；我建议使用它，这样你就有足够的时间。你也可以使用作为Docker镜像打包的Neo4j。
- en: Another option is to use Neo4j Desktop,[⁷](#pgfId-1001175) which is a sort of
    developer environment for Neo4j. You can manage as many projects and database
    servers locally as you like and also connect to remote Neo4j servers. Neo4j Desktop
    comes with a free developer license for Neo4j Enterprise Edition. From the Neo4j
    download page, you can select the version to download and install.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选择是使用Neo4j Desktop，[⁷](#pgfId-1001175)，这是一种Neo4j的开发者环境。你可以管理你喜欢的任意数量的项目和数据库服务器，并且也可以连接到远程的Neo4j服务器。Neo4j
    Desktop附带了Neo4j企业版的免费开发者许可证。从Neo4j下载页面，你可以选择要下载和安装的版本。
- en: B.2.1 Neo4j server installation
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.2.1 Neo4j服务器安装
- en: 'If you decide to download a Neo4j server (Community or Enterprise), installation
    is straightforward. For Linux or macOS, make sure that you have Java 11 or later
    installed, and then follow these steps:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你决定下载Neo4j服务器（社区版或企业版），安装过程很简单。对于Linux或macOS，请确保你已经安装了Java 11或更高版本，然后按照以下步骤操作：
- en: Open your terminal/shell.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开你的终端/壳。
- en: Extract the contents of the archive, using tar xf <filecode> (such as tar xf
    neo4j-community-4.2.3-unix.tar.gz).
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 tar xf <filecode>（例如 tar xf neo4j-community-4.2.3-unix.tar.gz）提取存档内容。
- en: Place the extracted files in a permanent home on your server. The top-level
    directory is NEO4J_HOME.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将提取的文件放置在服务器上的永久主目录。顶级目录是 NEO4J_HOME。
- en: To run Neo4j as a console application, use <NEO4J_HOME>/bin/neo4j console.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要以控制台应用程序运行 Neo4j，请使用 <NEO4J_HOME>/bin/neo4j console。
- en: To run Neo4j in a background process, use <NEO4J_HOME>/bin/neo4j start.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在后台进程运行 Neo4j，请使用 <NEO4J_HOME>/bin/neo4j start。
- en: Visit http://localhost:7474 in your web browser.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的网络浏览器中访问 http://localhost:7474。
- en: Connect, using the username neo4j with the default password neo4j. You’ll be
    prompted to change the password.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用默认用户名 neo4j 和密码 neo4j 连接。您将被提示更改密码。
- en: On Windows machines, the procedure is similar; unzip the downloaded file and
    proceed from there.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 机器上，过程类似；解压缩下载的文件，然后继续操作。
- en: At the end of the process, when you open the specified link in the browser,
    you should see something like figure B.2.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在过程结束时，当您在浏览器中打开指定的链接时，您应该看到类似于图 B.2 的内容。
- en: '![APPB_F02_Negro](../Images/APPB_F02_Negro.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![APPB_F02_Negro](../Images/APPB_F02_Negro.png)'
- en: Figure B.2 The Neo4j browser
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图 B.2 Neo4j 浏览器
- en: The Neo4j browser is a simple web-based application that allows the user to
    interact with a Neo4j instance, submit queries, and perform basic configurations.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j 浏览器是一个简单的基于网络的 Web 应用程序，允许用户与 Neo4j 实例交互，提交查询，并执行基本配置。
- en: B.2.2 Neo4j Desktop installation
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.2.2 Neo4j Desktop 安装
- en: If you decide to install the Desktop version for macOS, follow these steps to
    get it up and running quickly:[⁸](#pgfId-1001192)
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您决定安装 macOS 的桌面版本，请按照以下步骤快速安装和运行：[⁸](#pgfId-1001192)
- en: In the Downloads folder, locate and double-click the .dmg file you downloaded
    to start the Neo4j Desktop installer.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下载文件夹中，找到并双击您下载的 .dmg 文件以启动 Neo4j Desktop 安装程序。
- en: Save the app to the Applications folder (either the global one or your user-specific
    one) by dragging the Neo4j Desktop icon to that folder (figure B.3).
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将 Neo4j Desktop 图标拖到该文件夹中（图 B.3），将应用程序保存到应用程序文件夹（无论是全局的还是您特定的用户文件夹）。
- en: '![APPB_F03_Negro](../Images/APPB_F03_Negro.png)'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F03_Negro](../Images/APPB_F03_Negro.png)'
- en: Figure B.3 Neo4j Desktop installation in macOS
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.3 在 macOS 中安装 Neo4j Desktop
- en: Double-click the Neo4j Desktop icon to launch it (figure B.4).
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击 Neo4j Desktop 图标以启动它（图 B.4）。
- en: '![APPB_F04_Negro](../Images/APPB_F04_Negro.png)'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F04_Negro](../Images/APPB_F04_Negro.png)'
- en: Figure B.4 Launching Neo4j Desktop
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.4 启动 Neo4j Desktop
- en: The first time you start Neo4J Desktop, you will be asked for the activation
    code you received upon downloading the software. Copy and paste the code into
    the Activation Key box. Alternatively, generate a key from within the app by filling
    out the form on the right side of the screen (figure B.5).
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一次启动 Neo4J Desktop 时，您将被要求输入在下载软件时收到的激活码。将代码复制并粘贴到激活密钥框中。或者，您可以通过填写屏幕右侧的表单（图
    B.5）在应用程序内部生成密钥。
- en: '![APPB_F05_Negro](../Images/APPB_F05_Negro.png)'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F05_Negro](../Images/APPB_F05_Negro.png)'
- en: Figure B.5 Activating the license in Neo4j Desktop
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.5 在 Neo4j Desktop 中激活许可证
- en: When the product has been activated (figure B.6), click the Add Graph button.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当产品被激活（图 B.6）时，点击“添加图”按钮。
- en: '![APPB_F06_Negro](../Images/APPB_F06_Negro.png)'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F06_Negro](../Images/APPB_F06_Negro.png)'
- en: Figure B.6 Adding a graph to Neo4j Desktop
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.6 将图添加到 Neo4j Desktop
- en: Select Create a Local Graph (figure B.7).
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择创建本地图（图 B.7）。
- en: '![APPB_F07_Negro](../Images/APPB_F07_Negro.png)'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F07_Negro](../Images/APPB_F07_Negro.png)'
- en: Figure B.7 Creating a new local graph
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.7 创建新的本地图
- en: Enter the database name and password, and click the Create button (figure B.8).
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入数据库名称和密码，然后点击“创建”按钮（图 B.8）。
- en: '![APPB_F08_Negro](../Images/APPB_F08_Negro.png)'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F08_Negro](../Images/APPB_F08_Negro.png)'
- en: Figure B.8 In the case of a new local graph, create an admin password.
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.8 在创建新的本地图时，创建一个管理员密码。
- en: Start the new graph by clicking the Start button (figure B.9).
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击“启动”按钮（图 B.9）启动新图。
- en: '![APPB_F09_Negro](../Images/APPB_F09_Negro.png)'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F09_Negro](../Images/APPB_F09_Negro.png)'
- en: Figure B.9 Start the new created database instance.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.9 启动新创建的数据库实例。
- en: Click the Manage button (figure B.10).
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“管理”按钮（图 B.10）。
- en: '![APPB_F10_Negro](../Images/APPB_F10_Negro.png)'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![APPB_F10_Negro](../Images/APPB_F10_Negro.png)'
- en: Figure B.10 Click Manage to operate the graph database.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 B.10 点击“管理”来操作图数据库。
- en: In the next screen, click Open Browser to open the Neo4j browser in a new window
    (figure B.11).
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一屏，点击“打开浏览器”以在新窗口中打开 Neo4j 浏览器（图 B.11）。
- en: '![APPB_F11_Negro](../Images/APPB_F11_Negro.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![APPB_F11_Negro](../Images/APPB_F11_Negro.png)'
- en: Figure B.11 The Open Browser button opens the Neo4j browser.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图 B.11 打开 Neo4j 浏览器的“打开浏览器”按钮。
- en: You’ll have access to the browser, from which you can interact with Neo4j.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 你将能够访问浏览器，你可以从中与 Neo4j 进行交互。
- en: If you want to avoid all this effort, Neo4j has a cloud version called Aura.[⁹](#pgfId-1001213)
    At the time of writing, a free-tier version is available if you would like to
    play with it a bit before jumping in. Keep in mind that for the exercises and
    the learning cycle in this book, however, it would be better to have Neo4j installed
    locally on your machine or wherever you can run the Python code.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要避免所有这些努力，Neo4j 有一个名为 Aura 的云版本。[⁹](#pgfId-1001213) 在撰写本文时，如果你想在跳入之前稍微尝试一下，有一个免费层版本可用。但请注意，然而，对于本书中的练习和学习周期，最好是在你的机器上或你能够运行
    Python 代码的地方安装 Neo4j。
- en: B.3 Cypher
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.3 Cypher
- en: The query language used in Neo4j is Cypher.[^(10)](#pgfId-1001228) Like SQL
    (which inspired it), Cypher allows users to store and retrieve data from the graph
    database. Cypher is easy to learn, understand, and use, yet it offers the power
    and functionality of other standard data access languages.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j 使用的查询语言是 Cypher。[^(10)](#pgfId-1001228) 与 SQL（它受到了它的启发）一样，Cypher 允许用户从图数据库中存储和检索数据。Cypher
    容易学习、理解和使用，同时它提供了其他标准数据访问语言的力量和功能。
- en: 'Cypher is a declarative language for describing visual patterns in graphs with
    ASCII-Art syntax. By using its syntax, you can describe a graph pattern in a visual,
    logical way. Following is a simple example of looking for all the nodes of type
    Person in a graph:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: Cypher 是一种使用 ASCII-Art 语法描述图中的视觉模式的声明性语言。通过使用其语法，你可以以直观、逻辑的方式描述图模式。以下是一个简单的示例，用于在图中查找所有类型为
    Person 的节点：
- en: '[PRE0]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This pattern can be used to search for nodes and relationships in the graph
    or to create them. It allows you to state what you want to select, insert, update,
    or delete from your graph data without describing exactly how to do it.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 这种模式可以用来在图中搜索节点和关系，或者创建它们。它允许你声明你想要从你的图数据中选择、插入、更新或删除的内容，而不必描述如何确切地执行它。
- en: In addition to being used by Neo4j, Cypher has become open source. The openCypher[^(11)](#pgfId-1001243)
    project provides an open language specification, technical compatibility kit,
    and reference implementation of the parser, planner, and runtime for Cypher. The
    project is backed by several companies in the database industry and allows implementors
    of databases and clients to freely benefit from, use, and contribute to the development
    of the openCypher language.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 除了被 Neo4j 使用外，Cypher 还已成为开源。openCypher[^(11)](#pgfId-1001243) 项目提供了一个开放的语言规范、技术兼容性套件以及
    Cypher 的解析器、规划器和运行时的参考实现。该项目由数据库行业中的几家公司在背后支持，允许数据库和客户端的实现者自由地从 openCypher 语言的开发中受益、使用和贡献。
- en: Throughout the book, you’ll learn this language through examples and exercises.
    If you would like to learn more about Cypher, I recommend Neo4j’s guide;[^(12)](#pgfId-1001258)
    it’s a good reference, full of examples.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，你将通过示例和练习学习这门语言。如果你想了解更多关于 Cypher 的信息，我推荐 Neo4j 的指南；[^(12)](#pgfId-1001258)
    它是一个很好的参考，充满了示例。
- en: B.4 Plugin installation
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.4 插件安装
- en: One of the great things about Neo4j is how easy it is to extend. Neo4j allows
    developers to customize it in multiple ways. You can enrich the Cypher language
    with new procedures and functions that you can call while querying the graph.
    You can customize the security with authentication and authorization plugins.
    You can enable new surfaces to be created in the HTTP API via server extensions.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j 的一个优点是它很容易扩展。Neo4j 允许开发者以多种方式对其进行定制。你可以在查询图时使用新的过程和函数来丰富 Cypher 语言。你可以通过身份验证和授权插件来定制安全性。你还可以通过服务器扩展启用在
    HTTP API 中创建新的表面。
- en: 'Moreover, you can download, configure, and use a lot of existing plugins. The
    most relevant were developed by Neo4j and are supported by the entire community
    because they are open source. For the purposes of this book, we are going to consider
    two of them:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你可以下载、配置和使用许多现有的插件。其中最相关的是由 Neo4j 开发的，并且得到整个社区的支持，因为它们是开源的。为了本书的目的，我们将考虑其中的两个：
- en: '*Awesome Procedures on Cypher (APOC)*—The APOC library is a standard utility
    library containing common procedures and functions. It contains more than 450
    procedures and provides functionality for reading data from JDBC source or JSON,
    conversions, graph updates, and more. The functions and procedures are well supported
    and stable in most of the cases.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Cypher 上的神奇程序 (APOC)*——APOC 库是一个标准的实用程序库，包含常见的程序和函数。它包含超过 450 个程序，并提供从 JDBC
    源或 JSON 读取数据、转换、图更新等功能。在大多数情况下，函数和程序都得到了良好的支持和稳定性。'
- en: '*Graph Data Science (GDS) Library*—This library of procedures implements many
    common graph algorithms, such as PageRank, several centrality measures, similarities,
    and more recent techniques such as node embedding and link prediction. Because
    the algorithms run inside the Neo4j engine, they are optimized in reading nodes
    and relationships before analysis and storage of the results. This aspect allows
    this library to compute results quickly over tens of billions of nodes.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*图数据科学 (GDS) 库*——这个程序库实现了许多常见的图算法，如 PageRank、几个中心度度量、相似度以及更近期的技术，如节点嵌入和链接预测。因为这些算法在
    Neo4j 引擎内部运行，所以在分析前对节点和关系的读取以及结果的存储进行了优化。这一特性使得这个库能够在数十亿个节点上快速计算结果。'
- en: The next two sections describe how to download, install, and configure these
    plugins. I recommend doing all this before you start using Cypher queries in chapter
    4.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 下两个部分将描述如何下载、安装和配置这些插件。我建议在您开始使用第 4 章中的 Cypher 查询之前完成所有这些操作。
- en: B.4.1 APOC installation
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.4.1 APOC 安装
- en: 'Installing plugins in Neo4j is simple. Let’s start with the APOC library. If
    you installed the server version, download the plugin from the related GitHub
    release page[^(13)](#pgfId-1001273) (take *-all.jar to get the full library, and
    select the version that matches your version of Neo4j), and copy it to the plugins
    directory inside your NEO4J_HOME folder. At this point, edit the configuration
    file conf/neo4j.conf by adjusting or adding the following lines:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Neo4j 中安装插件很简单。让我们从 APOC 库开始。如果您安装了服务器版本，请从相关的 GitHub 发布页面下载插件[^(13)](#pgfId-1001273)（使用
    *-all.jar 获取完整库，并选择与您的 Neo4j 版本匹配的版本），并将其复制到 NEO4J_HOME 文件夹内的插件目录中。此时，通过调整或添加以下行来编辑配置文件
    conf/neo4j.conf：
- en: '[PRE1]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Restart Neo4j, and open the browser. Run the following procedure to check whether
    everything is in place:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 重启 Neo4j，并打开浏览器。运行以下程序来检查是否一切就绪：
- en: '[PRE2]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You should see the list of APOC procedures.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该能看到 APOC 程序的列表。
- en: '![APPB_F12_Negro](../Images/APPB_F12_Negro.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![APPB_F12_Negro](../Images/APPB_F12_Negro.png)'
- en: Figure B.12 APOC installation in Neo4j Desktop
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图 B.12 Neo4j Desktop 中的 APOC 安装
- en: If you are using the Neo4j Desktop version, the process is even simpler. After
    creating the database, open the Manage screen, click the Plugins tab, click Install
    in the APOC box, and wait to see the Installed message (figure B.12). For further
    details and explanations, see the official APOC installation guide.[^(14)](#pgfId-1001288)
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 Neo4j Desktop 版本，过程会更简单。在创建数据库后，打开管理屏幕，点击插件选项卡，点击 APOC 框中的安装，等待看到已安装的消息（图
    B.12）。有关更详细的信息和解释，请参阅官方 APOC 安装指南。[^(14)](#pgfId-1001288)
- en: B.4.2 GDS Library
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.4.2 GDS 库
- en: 'You can follow a similar procedure for the GDS Library. If you installed the
    server version, download the plugin from the related GitHub release page[^(15)](#pgfId-1001304)
    (take *-standalone .jar), and copy it to the plugins directory inside your NEO4J_HOME
    folder. At this point, edit the configuration file conf/neo4j.conf by adjusting
    or adding the following lines:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以遵循类似的步骤来安装 GDS 库。如果您安装了服务器版本，请从相关的 GitHub 发布页面下载插件[^(15)](#pgfId-1001304)（使用
    *-standalone .jar），并将其复制到 NEO4J_HOME 文件夹内的插件目录中。此时，通过调整或添加以下行来编辑配置文件 conf/neo4j.conf：
- en: '[PRE3]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Restart Neo4j, open the browser, and run the following procedure to check whether
    everything is in place:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 重启 Neo4j，打开浏览器，并运行以下程序来检查是否一切就绪：
- en: '[PRE4]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You should be able to see the version of the GDS you downloaded.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该能够看到您下载的 GDS 版本。
- en: '![APPB_F13_Negro](../Images/APPB_F13_Negro.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![APPB_F13_Negro](../Images/APPB_F13_Negro.png)'
- en: Figure B.13 GDS installation from Neo4j Desktop
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 B.13 从 Neo4j Desktop 安装 GDS
- en: If you are using Neo4j Desktop, the process is even simpler. After creating
    the database, open the Manage screen, click the Plugins tab, click Install in
    the Graph Data Science Library, and wait to see the Installed message (figure
    B.13). After these steps, you will be ready to have fun with Neo4j and run all
    the examples and exercises in the book.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用Neo4j Desktop，过程会更加简单。在创建数据库后，打开管理屏幕，点击插件标签，点击Graph Data Science Library中的安装，等待看到已安装的消息（图B.13）。完成这些步骤后，您就可以享受Neo4j的乐趣，并运行书中的所有示例和练习。
- en: B.5 Cleaning
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.5 清理
- en: 'Sometimes, you need to clean a database. You can do this job by using the functions
    in the APOC library that you have installed into your database. To delete everything:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，您需要清理数据库。您可以通过将安装到数据库中的APOC库中的函数来完成这项工作。要删除所有内容：
- en: '[PRE5]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'To drop all constraints:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除所有约束：
- en: '[PRE6]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: References
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参考文献
- en: '[Robison et al., 2015] Robinson, Ian, Jim Webber, and Emil Eifrem. Graph Databases.
    2nd ed. Sebastopol, CA: O’Reilly, 2015.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '[Robison等人，2015] Robinson, Ian, Jim Webber, 和 Emil Eifrem. 《图数据库》。第2版。Sebastopol,
    CA: O’Reilly, 2015.'
- en: '[Vukotic et al., 2014] Vukotic, Aleksa, Dominic Fox, Jonas Partner, Nicki Watt,
    and Tareq Abedrabbo. Neo4j in Action. Shelter Island, NY: Manning, 2014.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '[Vukotic等人，2014] Vukotic, Aleksa, Dominic Fox, Jonas Partner, Nicki Watt, 和
    Tareq Abedrabbo. 《Neo4j实战》。Shelter Island, NY: Manning, 2014.'
- en: '[Woodie, 2016] Woodie, Alex. “Neo4j Pushes Graph DB Limits Past a Quadrillion
    Nodes.” *Datanami*, April 26, 2016\. [http://mng.bz/0rJN](https://shortener.manning.com/0rJN).'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '[Woodie, 2016] Woodie, Alex. “Neo4j Pushes Graph DB Limits Past a Quadrillion
    Nodes.” *Datanami*，2016年4月26日。[http://mng.bz/0rJN](https://shortener.manning.com/0rJN).'
- en: '* * *'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: ^(1.)The score takes into account multiple factors, such as number of mentions
    of the database on websites, frequency of technical questions on Stack Overflow
    and Database Administrators Stack Exchange, job offers, and relevance in social
    networks.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: (1.) 评分考虑了多个因素，例如数据库在网站上的提及次数、Stack Overflow和Database Administrators Stack Exchange上的技术问题频率、工作机会以及在社会网络中的相关性。
- en: ^(2.)[https://boltprotocol.org](https://boltprotocol.org).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: (2.) [Bolt协议](https://boltprotocol.org).
- en: ^(3.)If you haven’t read chapter 2 yet, see section 2.3.5 for details on label
    property graphs.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: (3.) 如果您还没有阅读第2章，请参阅2.3.5节以获取有关标签属性图的详细信息。
- en: ^(4.)See appendix D.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: (4.) 请参阅附录D。
- en: ^(5.)[https://www.opencypher.org](https://www.opencypher.org).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: (5.) [OpenCypher](https://www.opencypher.org).
- en: ^(6.)[https://www.gnu.org/licenses/gpl-3.0.en.html](https://www.gnu.org/licenses/gpl-3.0.en.html).
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: (6.) [GNU通用公共许可证v3.0](https://www.gnu.org/licenses/gpl-3.0.en.html).
- en: ^(7.)[https://neo4j.com/developer/neo4j-desktop/](https://neo4j.com/developer/neo4j-desktop/).
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: (7.) [Neo4j开发者桌面](https://neo4j.com/developer/neo4j-desktop/).
- en: ^(8.)The installation procedure is taken from the installation guide, which
    is available when you download the software. Refer to that installation guide
    for directions for your operating system.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: (8.) 安装过程取自安装指南，该指南在您下载软件时可用。请参考该安装指南以获取您操作系统的说明。
- en: ^(9.)[https://neo4j.com/cloud/aura](https://neo4j.com/cloud/aura).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: (9.) [Neo4j云服务Aura](https://neo4j.com/cloud/aura).
- en: ^(10.)[https://neo4j.com/developer/cypher](https://neo4j.com/developer/cypher).
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: (10.) [Neo4j开发者Cypher](https://neo4j.com/developer/cypher).
- en: ^(11.)[https://www.opencypher.org](https://www.opencypher.org)
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: (11.) [OpenCypher](https://www.opencypher.org)
- en: ^(12.)[https://neo4j.com/developer/cypher](https://neo4j.com/developer/cypher)
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: (12.) [Neo4j开发者Cypher](https://neo4j.com/developer/cypher)
- en: ^(13.)[http://mng.bz/G6mv](https://shortener.manning.com/G6mv)
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: (13.) [http://mng.bz/G6mv](https://shortener.manning.com/G6mv)
- en: ^(14.)[https://neo4j.com/labs/apoc/4.2/installation](https://neo4j.com/labs/apoc/4.2/installation).
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: (14.) [APOC安装](https://neo4j.com/labs/apoc/4.2/installation).
- en: ^(15.)[http://mng.bz/zGDB](https://shortener.manning.com/zGDB).
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: (15.) [http://mng.bz/zGDB](https://shortener.manning.com/zGDB).
