- en: Part 1\. Why it all matters
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第1部分. 为什么这一切都很重要
- en: When you set out to learn new topics, it’s important to consider the big picture,
    to frame and focus your thinking. The first part of this book will familiarize
    you with Python’s importance in modern software development, and it will provide
    a framework for understanding the value of software design principles and practices
    in furthering your career in programming.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始学习新主题时，考虑大局很重要，以框架和聚焦你的思考。本书的第一部分将使你熟悉 Python 在现代软件开发中的重要性，并提供一个框架来理解软件设计原则和实践的价值，以进一步你在编程职业中的发展。
- en: Whether you’re new to programming, looking for the next language you’d like
    to learn, or trying to advance your skills to tackle bigger projects, this part
    of the book should convince you that Python is a great choice.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是编程新手，正在寻找你想要学习的下一门语言，还是试图提高你的技能以应对更大的项目，这本书的这一部分应该会让你相信 Python 是一个很好的选择。
- en: Chapter 1\. The bigger picture
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第1章. 更大的图景
- en: '*This chapter covers*'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: Using Python in complex software projects
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在复杂软件项目中使用 Python
- en: Getting familiar with the high-level process of software design
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉软件设计的高级流程
- en: Recognizing when you should invest in design
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认识到何时应该投资于设计
- en: I’m glad you picked up this book; it means you’d like to take the next step
    with software development. Maybe you’re looking to enter the software industry,
    or maybe you’re looking to use software to supplement your work. Maybe you’ve
    even been paid to write software before. Congratulations—you’re already a pro!
    Coding like a pro just means learning the concepts and strategies that will help
    you build and maintain big software for the long term.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我很高兴你选择了这本书；这意味着你想要在软件开发方面迈出下一步。也许你想要进入软件行业，或者也许你想要使用软件来补充你的工作。也许你甚至曾经被支付编写软件。恭喜你——你已经是一名专业人士了！像专业人士一样编码只是意味着学习那些将帮助你长期构建和维护大型软件的概念和策略。
- en: By reading on, you’re committing yourself to learning how Python can help you
    think big and go from writing utility scripts to writing complex software. I’ll
    help you lay a foundation on which you can construct your software development
    skills.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 通过继续阅读，你正在承诺学习 Python 如何帮助你思考宏大，并从编写实用脚本过渡到编写复杂软件。我将帮助你打下基础，以便你可以构建你的软件开发技能。
- en: Throughout your career, you will likely be exposed to ever-increasing software
    complexity. That software could be something you build over time, or it could
    very well be an existing heap of code thrust upon you at the most inopportune
    moment. Whatever the case, you’ll want to have a suite of utilities at your disposal
    so you can be prepared to make sense of it.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的整个职业生涯中，你可能会接触到不断增长的软件复杂性。这可能是一些你逐渐构建的软件，或者它可能是在最不合适的时候强加给你的现有代码堆。无论哪种情况，你都会希望有一套工具在你的掌握之中，这样你就可以准备好理解它。
- en: By reading this book, you’ll gain experience and familiarity with how complex
    software systems work so that you can use that expertise to improve upon them.
    You’ll be learning how to envision these kinds of systems before building them
    to minimize surprises and risks. Once you’re through with this book, you should
    be able to dive headlong into things that you’re confused or anxious about now
    with a newfound enthusiasm.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 通过阅读这本书，你将获得关于复杂软件系统如何工作的经验和熟悉度，这样你就可以利用这些专业知识来改进它们。你将学习如何在构建之前构想这些类型的系统，以最小化惊喜和风险。一旦你完成这本书，你应该能够带着新的热情一头扎进你现在感到困惑或焦虑的事情中。
- en: You’ll learn about putting the complexities of your code into easy-to-understand,
    reusable wrappers. You’ll make sure your code is neatly organized by its purpose
    so you can remember what’s what. These tools will help you help yourself and become
    more productive in your projects, both new and old!
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你将学习如何将代码的复杂性放入易于理解、可重用的包装器中。你将确保你的代码根据其目的进行整洁的组织，这样你就可以记住是什么。这些工具将帮助你帮助自己，并在新旧项目中变得更加高效！
- en: I’m going to use Python as the vehicle for the examples in this book. Python
    has been my favorite programming language for some time now, and I hope it’s one
    of yours too. If you haven’t had a chance to get to know Python much yet, take
    the time to do that first. *The Quick Python Book*, third edition, by Naomi Ceder
    (Manning, 2018), is a great place to get started.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用 Python 作为本书示例的载体。Python 已经是我最喜欢的编程语言有一段时间了，我希望它也是你的。如果你还没有机会深入了解 Python，请花时间先去了解它。《快速
    Python 书》，第三版，由 Naomi Ceder 编著（Manning，2018），是一个很好的入门起点。
- en: All examples in this book are written with a recent version of Python 3 in mind.
    I strongly recommend you install Python 3 before proceeding. See the appendix
    if you need some guidance on the installation process.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的所有示例都是基于Python 3的最新版本编写的。我强烈建议你在继续之前安装Python 3。如果你需要有关安装过程的指导，请参阅附录。
- en: '|  |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**The great divide**'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '**巨大的分歧**'
- en: Are you using Python 2 or Python 3? A sizable number of people are still using
    Python 2, even though Python 3 came onto the scene a while ago—*quite* a while
    ago, in 2008\. To put that in perspective, Flo Rida’s “Low” and Alicia Keys’ “No
    One” were at the top of the charts that year.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 你使用的是Python 2还是Python 3？尽管Python 3已经出现了一段时间——*相当长一段时间*，在2008年，但仍有相当多的人仍在使用Python
    2。为了更好地理解这一点，请记住，那一年Flo Rida的“Low”和Alicia Keys的“No One”都位居排行榜首位。
- en: Python 3 brought with it several backward-incompatible changes whose effects
    are still being felt today. Many of these changes have been backported to later
    versions of Python 2 to ease the transition. Developers on large projects using
    Python 2 have some hurdles to overcome, but some people seem to be taking their
    Python 2 software to the grave with them.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Python 3带来了几个与先前版本不兼容的更改，这些更改的影响至今仍在感受到。其中许多更改已被回滚到Python 2的后续版本，以简化过渡。在大型项目中使用Python
    2的开发者有一些障碍需要克服，但有些人似乎要把他们的Python 2软件带到坟墓里去。
- en: '|  |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: If you need a bit of convincing about why Python is a good choice of language,
    read on a bit further.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要一些说服来了解为什么Python是一种好的语言选择，请继续阅读。
- en: 1.1\. Python is an enterprise language
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1\. Python是企业级语言
- en: The Python programming language has been treated historically as a scripting
    language. Developers perceived its performance and applicability negatively, choosing
    other languages for their enterprise software needs. Python was used for small
    data-processing jobs or personal tools, but enterprise software was still a job
    for languages like Java, C, or SAS.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 历史上，Python编程语言一直被视为一种脚本语言。开发者对其性能和适用性持负面看法，选择其他语言来满足他们的企业软件需求。Python被用于小型数据处理工作或个人工具，但企业软件仍然是Java、C或SAS等语言的工作。
- en: 1.1.1\. The times they are a-changin’
  id: totrans-23
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.1\. 时代在变化
- en: Over the last few years, the notion that Python couldn’t stand up to enterprise
    use has shifted dramatically. Python is now being applied to nearly every discipline
    out there, from robotics to machine learning to chemistry. Python has powered
    some of the most successful internet companies of the last decade and doesn’t
    show any signs of slowing.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去几年里，Python无法胜任企业使用的观念发生了巨大的转变。Python现在几乎被应用于所有学科，从机器人学到机器学习再到化学。Python为过去十年中最成功的互联网公司提供动力，并且没有任何放缓的迹象。
- en: 1.1.2\. What I like about Python
  id: totrans-25
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.2\. 我喜欢Python的几点
- en: Python is a breath of fresh air. Like many of my friends and colleagues, I learned
    a great deal of C++ in school, along with a bit of MATLAB, Perl, and PHP. I built
    my first website in PHP and even tried a Java Spring version at one point. PHP
    and Java are, as many successful companies will attest, perfectly capable languages
    in this arena, but they didn’t click with me for some reason.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Python就像一股清新的空气。像许多我的朋友和同事一样，我在学校学了很多C++，还学了一点MATLAB、Perl和PHP。我最初是用PHP构建网站，甚至一度尝试过Java
    Spring版本。PHP和Java，正如许多成功公司所证实的那样，在这个领域是完美无缺的语言，但不知何故它们并没有吸引我。
- en: I found that Python excelled in its syntax; this is often cited as one reason
    for its accelerating popularity. The syntax comes closer to written English than
    other languages, and as a result it can be more approachable for those new to
    programming, as well as for people who don’t like the verbosity of other languages.
    I’ve seen people light up with joy when asking Python to `print('Hello world!')`
    and seeing it do exactly that. Even now I will occasionally have one of those
    moments when I uncover a standard library module I didn’t know about before.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我发现Python在语法方面表现出色；这经常被引用为其日益流行的一个原因。其语法比其他语言更接近书面英语，因此对于编程新手以及不喜欢其他语言冗长的人来说，它可能更容易接近。我曾看到人们在请求Python打印`'Hello
    world!'`并看到它确实这样做时，脸上洋溢着喜悦。即使现在，我偶尔也会遇到那些时刻，当我发现一个我之前不知道的标准库模块时。
- en: Python is readable. This translates to faster development even for fairly seasoned
    developers. Hui Ding, an engineer at Instagram, astutely points out that “Performance
    speed is no longer the primary worry. Time to market speed is.”^([[1](#ch01fn01)])
    Python enables rapid prototyping and, as you’ll see later on, the ability to solidify
    software into a robust, maintainable codebase. This is what I like about Python.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Python易于阅读。这转化为即使是经验丰富的开发者也能更快地进行开发。Instagram的工程师Hui Ding敏锐地指出：“性能速度不再是首要担忧。上市速度才是。”^([[1](#ch01fn01)])
    Python能够实现快速原型设计，正如你稍后将会看到的，它还有将软件固化成稳健、可维护的代码库的能力。这正是我喜欢Python的原因。
- en: ¹
  id: totrans-29
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ¹
- en: ''
  id: totrans-30
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Michelle Gienow, “Instagram Makes a Smooth Move to Python 3,” The New Stack,
    [http://mng.bz/Ze0j](http://mng.bz/Ze0j). This is a great write-up on Instagram’s
    transition from Python 2 to Python 3.
  id: totrans-31
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Michelle Gienow，“Instagram顺利过渡到Python 3”，The New Stack，[http://mng.bz/Ze0j](http://mng.bz/Ze0j)。这是一篇关于Instagram从Python
    2过渡到Python 3的精彩文章。
- en: 1.2\. Python is a teaching language
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.Python是一种教学语言
- en: In 2017, Stack Overflow revealed that, in high-income countries, questions related
    to Python made up more than 10% of all questions on the platform, surpassing all
    other major programming languages.^([[2](#ch01fn02)]) Python is the fastest growing
    programming language today, which is why it’s a handy teaching tool. The thriving
    developer community and wealth of information available online mean that it will
    be a safe choice for the next several years.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 2017年，Stack Overflow透露，在高收入国家，与Python相关的问题占平台所有问题的10%以上，超过了所有其他主要编程语言.^([[2](#ch01fn02)])
    Python是目前增长最快的编程语言，这也是为什么它是一个方便的教学工具。蓬勃发展的开发者社区和在线上可获取的大量信息意味着，在接下来的几年里，它将是一个安全的选择。
- en: ²
  id: totrans-34
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ²
- en: ''
  id: totrans-35
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: See David Robinson, “The Incredible Growth of Python,” Stack Overflow Blog,
    [http://mng.bz/m48n](http://mng.bz/m48n).
  id: totrans-36
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 参见David Robinson，“Python的惊人增长”，Stack Overflow博客，[http://mng.bz/m48n](http://mng.bz/m48n)。
- en: Throughout this book, I’ll assume you have a foundational knowledge of Python
    syntax, data types, and classes. You’ve seen it and played with it, but you don’t
    need to have won awards with it. (Do they have those?). Anyone with a bit of programming
    under their belt and a few hours of learning and using Python on their own should
    have no problem with the code in this book. You’re going to go through this book
    with Python as the conduit for designing bigger, better software. That being said,
    what you learn here will, with any luck, be applicable to any language you choose
    to use. You’ll find that many software design concepts transcend any particular
    technology.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书的整个过程中，我将假设你具备Python语法、数据类型和类的基础知识。你已经见过并玩过它，但不需要因此获奖。（他们有那种奖项吗？）。任何有了一点编程经验，并且花几个小时自学和使用Python的人，都应该没有问题理解这本书中的代码。你将带着Python作为设计更大、更好软件的渠道来学习这本书。话虽如此，你在这里学到的，如果有幸，将适用于你选择的任何语言。你会发现许多软件设计概念超越了任何特定的技术。
- en: 1.3\. Design is a process
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.设计是一个过程
- en: Although the word *design* often describes a tangible outcome, the value of
    design is in the *process* of arriving at that outcome. Consider fashion designers.
    Their goal is ultimately to create pieces that will end up in the hands of the
    people wearing them. For the designer to reach customers with the next great trend,
    though, a lot of steps—and people—are involved (see [figure 1.1](#ch01fig01)).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然单词“设计”通常描述一个有形的成果，但设计的价值在于达到该成果的*过程*。考虑一下时尚设计师。他们的最终目标是创造出最终会出现在穿着者手中的作品。然而，为了设计师能够将下一个伟大的趋势带给消费者，涉及了许多步骤和人员（见图1.1）。
- en: Figure 1.1\. The workflow for a fashion designer. The designer works with a
    number of other people to get the job done.
  id: totrans-40
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.1.时尚设计师的工作流程。设计师与许多人合作以完成任务。
- en: '![](../Images/f0029-01_alt.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f0029-01_alt.jpg)'
- en: Designers usually work with a fabric supplier to source the right materials
    for the look, fit, and texture they want. Once they’ve designed a piece, they
    work with a patterner to get different sizes made. Once they produce the pieces,
    they’re sent through fulfillment to retail stores where customers can finally
    buy the clothing. This can take months!
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 设计师通常与面料供应商合作，以获取他们想要的款式、合身度和质感的正确材料。一旦他们设计了一件作品，他们就会与制版师合作，制作不同尺寸的产品。一旦生产出这些产品，它们就会被送到零售店，顾客最终可以购买这些衣服。这可能会花费数月时间！
- en: As in fashion, art, and architecture, design in software is the process of sketching
    out the plans for a system so that it can be executed for maximum effect. In software,
    these plans help us understand the flow of data and the pieces of the system operating
    on that data. [Figure 1.2](#ch01fig02) shows a high-level diagram of an e-commerce
    workflow, outlining how a user would progress through the steps.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 就像时尚、艺术和建筑一样，软件设计是绘制系统计划的过程，以便可以执行以产生最大效果。在软件中，这些计划帮助我们理解数据的流动和在该数据上运行的系统组件。图1.2[图1.2](#ch01fig02)显示了电子商务工作流程的高级图，概述了用户如何通过步骤进行。
- en: Figure 1.2\. The workflow for an e-commerce website. The system performs a number
    of activities to get the job done.
  id: totrans-44
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.2. 电子商务网站的流程图。系统执行多项活动以完成任务。
- en: '![](../Images/f0029-02_alt.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/f0029-02_alt.jpg)'
- en: A customer looking to buy something online usually logs in, enters their shipping
    information, and pays for the item. This creates an order for the company to process
    and ship. Workflows like these require a great deal of design to nail down. The
    software that runs these systems tackles complex rules, error-state checking,
    and more. And it has to do it all without missing a beat, because users are sensitive
    to errors. They might abandon or even actively speak out against a product that
    isn’t working well for them.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 想在线购买东西的客户通常会登录，输入他们的送货信息，并支付商品。这为公司创建了一个订单，以便处理和发货。这类工作流程需要大量的设计来确保。运行这些系统的软件处理复杂的规则、错误状态检查等。而且它必须做到无懈可击，因为用户对错误很敏感。他们可能会放弃或甚至积极反对对他们不起作用的软件产品。
- en: 1.3.1\. The user experience
  id: totrans-47
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.3.1. 用户体验
- en: Workflows that appear concise and clear often take a *lot* of work to create.
    Creating software that works smoothly for all use cases requires market research,
    user testing, and robust design. Some products work well for the *intended* use
    case, but companies may find after release that users are doing something totally
    unexpected with the product. The software may work for that use case, but it wasn’t
    *optimized* for it. There may be gaps in the design that need to be considered.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来简洁明了的流程通常需要大量的工作来创建。为所有用例创建运行顺畅的软件需要市场研究、用户测试和稳健的设计。一些产品对于预期的用例运行良好，但公司可能在发布后会发现用户正在用产品做完全意想不到的事情。软件可能适用于那个用例，但它并没有为此进行优化。设计中可能存在需要考虑的空白。
- en: When software works well, we hardly notice. People using software products like
    to have a *frictionless* experience, and developers working on software like it
    too. Working with code that hasn’t been maintained can lead to frustration, and
    not knowing how to fix it can lead to anger! Take a deep breath.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 当软件运行良好时，我们几乎注意不到。使用软件产品的用户喜欢无摩擦的体验，开发软件的人也是如此。与未维护的代码一起工作可能会导致挫折，而不知道如何修复它可能会导致愤怒！深呼吸。
- en: '|  |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Friction**'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**摩擦**'
- en: Imagine ice skating at the local hockey rink. When you get on the ice right
    after the Zamboni finishes smoothing it out, skating requires little effort. You
    can lean into each step just a little, letting the skate do the work. After some
    time, everyone’s skates start to cut up the ice. It gets more difficult to glide;
    you have to push hard into each step.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 想象在当地冰球场上滑冰。当你Zamboni完成平滑处理之后立即上冰，滑冰几乎不需要用力。你可以稍微倾斜每个步骤，让滑冰鞋做功。过了一段时间，每个人的滑冰鞋开始切割冰面。滑行变得更加困难；你必须用力推动每个步骤。
- en: Friction in a user experience is a lot like the rough ice. The user may still
    be able to accomplish what they’re trying to do, but that doesn’t mean it’s fun.
    A frictionless experience is one that guides users along lightly, to the point
    that they hardly notice they’re doing work.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 用户体验中的摩擦就像粗糙的冰面。用户可能仍然能够完成他们试图做的事情，但这并不意味着它是有趣的。无摩擦的体验是指引导用户轻松前进，直到他们几乎注意不到他们在工作。
- en: '|  |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 'Say you’ve been tasked with updating the reporting software at your company.
    It’s currently using comma-separated values (CSV) in its export files, but users
    have been talking about how much they like *tab*-separated values (TSV). You think,
    “I’ll just go update the delimiter in the output function to a tab instead of
    a comma!” Now imagine opening up the code to find that the lines of output are
    all being built up like so:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你被分配更新你公司中的报告软件。它目前在其导出文件中使用逗号分隔值（CSV），但用户一直在谈论他们多么喜欢制表符分隔值（TSV）。你想，“我只是去更新输出函数中的分隔符，从逗号改为制表符！”现在想象一下打开代码，发现输出行都是这样构建的：
- en: '[PRE0]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To change the output from CSV to TSV, you’d have to make sure you changed the
    comma to a tab in *six* places. This leaves some room for human error; maybe you
    saw the first line printing the header but missed the line printing the data rows.
    To make this more friendly to the next developer who uses the code, you can store
    the delimiter value in a constant and make use of it where needed. You could also
    use a Python function to make building the string easier on yourself. Then, when
    users decide they like the commas better after all, the change could be made in
    just one place:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 要将输出从CSV更改为TSV，你必须在六个地方将逗号更改为制表符。这留下了一些人为错误的空间；也许你看到了打印标题的第一行，但错过了打印数据行的行。为了让下一个使用这段代码的开发者更友好，你可以在需要的地方存储分隔符值。你也可以使用Python函数来简化字符串构建。然后，当用户最终决定他们更喜欢逗号时，更改只需在一个地方进行：
- en: '[PRE1]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: By sitting down and thinking through the system at a high level, you’ll start
    to notice rough areas you didn’t see before, or realize that certain assumptions
    you had aren’t accurate. You’ll surprise yourself more than once, and this kind
    of enlightenment can motivate you to keep at it. Once you start seeing repeated
    patterns and common mistakes, you can start recognizing which thorns can be pulled
    out. It can be quite therapeutic.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 通过坐下来从高层次思考整个系统，你将开始注意到之前没有看到的粗糙区域，或者意识到你之前的一些假设并不准确。你可能会一次又一次地惊讶自己，这种启发可以激励你继续努力。一旦你开始看到重复的模式和常见的错误，你就可以开始识别哪些刺可以拔除。这可以相当有治疗作用。
- en: 1.3.2\. You’ve been here before
  id: totrans-60
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.3.2\. 你已经走过这条路
- en: Whether you realize it or not, you’ve almost certainly gone through a design
    process in the past. Think of a time when you stopped writing code for a moment
    to revisit the goal you were trying to achieve. Did you notice something that
    made you change direction? Did you see a more efficient way of doing things?
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是否意识到，你几乎肯定在以前经历过设计过程。想想你曾经停下来，暂时回顾一下你试图实现的目标。你是否注意到让你改变方向的事情？你是否看到了做事更有效的方法？
- en: These little moments are design processes in themselves. You take stock of the
    goal and current state of your software and use them together to inform what you
    do next. Generating these moments intentionally and early on in your software
    process will have both short- and long-term benefits.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这些小瞬间本身就是设计过程。你评估软件的目标和当前状态，并将它们结合起来，以指导你下一步的行动。在软件过程中有意地早期生成这些时刻将带来短期和长期的好处。
- en: 1.4\. Design enables better software
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4\. 设计促进软件质量提升
- en: 'I’ll level with you: good design requires time and effort. It’s not something
    you get for free. Although embedding design thinking into the development work
    you do everyday is ideal, an independent design step before writing (or rewriting)
    your code is crucial.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我会坦白告诉你：好的设计需要时间和努力。这不是你可以免费得到的东西。尽管将设计思维嵌入到你每天进行的开发工作中是理想的，但在编写（或重写）代码之前进行独立的设计步骤是至关重要的。
- en: Planning out a software system will help you uncover areas that present risk.
    You can identify where sensitive user information might be exposed to a vulnerability.
    You can also see which pieces of the system might be performance bottlenecks or
    single points of failure.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 规划软件系统将帮助你发现存在风险的区域。你可以确定敏感用户信息可能暴露在漏洞中。你还可以看到系统中哪些部分可能是性能瓶颈或单点故障。
- en: You can save time and money by simplifying, combining, or splitting up pieces
    of the system. Gains like this are difficult to identify when looking at a component
    in isolation because it isn’t clear whether other components are doing similar
    jobs. Viewing the system as a whole allows you to regroup and make informed decisions
    about the path forward.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 通过简化、合并或拆分系统的某些部分，你可以节省时间和金钱。当单独查看一个组件时，这种收益很难识别，因为不清楚其他组件是否在做类似的工作。将系统作为一个整体来观察，可以使你重新分组，并对前进的道路做出明智的决策。
- en: 1.4.1\. Considerations in software design
  id: totrans-67
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.1\. 软件设计中的考虑因素
- en: We often think about writing software for “the user,” but software can often
    serve multiple audiences. Sometimes “the user” is a person using the product the
    software is a part of, whereas other times “the user” is a person trying to develop
    additional features of the software. Often, you’re the only user of your software!
    By looking at software from these different points of view, you can better identify
    the qualities of the software you want to build.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们经常考虑为“用户”编写软件，但软件可以服务于多个受众。有时“用户”是使用软件所构成产品的个人，而有时“用户”是试图开发软件额外功能的个人。通常，您是您软件的唯一用户！通过从这些不同的视角看待软件，您可以更好地确定您想要构建的软件的品质。
- en: 'The following are some common aspects consumers use to assess software for
    their use cases:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些消费者用来评估他们用例的软件的常见方面：
- en: '*Speed*—The software does its job as quickly as it can.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*速度*—软件尽可能快地完成其工作。'
- en: '*Integrity*—Data used or created by the software is protected from corruption.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*完整性*—软件使用或创建的数据受到损坏的保护。'
- en: '*Resources*—The software uses disk space and network bandwidth efficiently.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*资源*—软件高效地使用磁盘空间和网络带宽。'
- en: '*Security*—Users of the software can read and write only data for which they’re
    authorized.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*安全性*—软件用户只能读取和写入他们授权的数据。'
- en: 'In addition, these are some common outcomes you as a developer might want:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，以下是一些作为开发者您可能希望实现的结果：
- en: '*Loose coupling*—Components of the software are not intricately dependent on
    one another.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*松散耦合*—软件的组件之间没有复杂的依赖关系。'
- en: '*Intuitability*—Developers can discover the nature of the software and how
    it works by reading it.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*直观性*—开发者可以通过阅读来发现软件的本质以及它是如何工作的。'
- en: '*Flexibility*—Developers can adapt the software to related or similar tasks.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*灵活性*—开发者可以将软件适应相关或类似的任务。'
- en: '*Extensibility*—Developers can add or change one aspect of the software without
    affecting other aspects.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可扩展性*—开发者可以在不影响其他方面的情况下添加或更改软件的一个方面。'
- en: The pursuit of these outcomes often involves real-world costs. As an example,
    committing to increasing security in your software likely means you’ll have to
    spend more time in development. Because that development time may increase your
    expenses, you may choose to sell your software at a higher price. Effective planning
    and an understanding of the trade-offs between these outcomes will help you minimize
    the costs to you and your consumers.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 追求这些成果往往涉及现实世界的成本。例如，承诺提高软件的安全性可能意味着您在开发上需要花费更多时间。由于开发时间可能会增加您的开支，您可能选择以更高的价格出售您的软件。有效的规划和对这些成果之间权衡的理解将帮助您最小化您和您的消费者所承担的成本。
- en: Programming languages don’t typically address most of these considerations head
    on; they simply provide tools that will enable developers to cater to them. For
    example, *high-level languages* like Python, which allow developers to write in
    something similar to human language instead of machine language, provide some
    protections in terms of memory corruption. Python also encourages the use of efficient
    data types through its syntax; you’ll learn more about this in [chapter 4](../Text/kindle_split_014.html#ch04).
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 编程语言通常不会直接解决这些考虑因素中的大多数；它们只是提供工具，使开发者能够满足这些需求。例如，*高级语言*如Python，允许开发者用类似人类语言而不是机器语言编写代码，提供一些防止内存损坏的保护。Python还通过其语法鼓励使用高效的数据类型；您将在第[4章](../Text/kindle_split_014.html#ch04)中了解更多关于这一点。
- en: That being said, there’s still a lot of work we can do on our own, because even
    Python can’t predict all the ways developers might screw things up. This is where
    careful design and thinking about the system as a whole will help.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 话虽如此，我们仍然可以在自己身上做很多工作，因为即使是Python也无法预测开发者可能会犯的所有错误。这就是为什么仔细设计和整体考虑系统将有所帮助。
- en: 1.4.2\. Organically grown software
  id: totrans-82
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.2. 有机生长的软件
- en: Unlike the produce at your local farmers’ market, organically grown software
    is not good for your health. In the context of software, a system that has grown
    organically over time is likely a system ripe for *refactoring*. Refactoring code
    is the process of updating code so it’s better designed and reflects your latest
    best practices. It might involve improving the performance, maintainability, or
    readability of code.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 与您当地农民市场的产品不同，有机生长的软件对您的健康并无益处。在软件的语境中，随着时间的推移有机生长的系统很可能是一个适合*重构*的系统。重构代码是更新代码的过程，使其设计更优，并反映您最新的最佳实践。这可能包括提高性能、可维护性或可读性。
- en: As the term suggests, organically grown software has become an organism, complete
    with a nervous system and a mind of its own. Bits of other software may have been
    plastered onto it (usually more than once), methods that haven’t been used in
    years are in there somewhere, rotting, and maybe there’s one function that does
    about 150% of the work. Choosing when to refactor a system like this can be difficult,
    but it’s sometime before the moment that makes you yell, “It’s alive!”
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如同术语所暗示的，自然成长的软件已经成为一个有机体，拥有自己的神经系统和大脑。其他软件的碎片可能被粘贴到上面（通常不止一次），多年未使用的函数可能在其中某个地方腐烂，可能有一个函数做了大约150%的工作。选择何时重构这样的系统可能很困难，但通常是在你大喊“它活起来了！”的那个时刻之前。
- en: 'An example of this phenomenon is shown in [figure 1.3](#ch01fig03), which depicts
    the checkout process for an e-commerce site. It involves several important steps:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这种现象的一个例子显示在[图1.3](#ch01fig03)中，它描述了一个电子商务网站的结账过程。它涉及几个重要步骤：
- en: Determine that the product is available in the inventory.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定产品在库存中可用。
- en: Based on the price of the product, calculate the subtotal.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据产品的价格，计算小计。
- en: 'Based on the region of purchase, calculate:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据购买区域，计算：
- en: Tax
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 税
- en: Shipping and handling
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运输和处理
- en: Based on the current promotions, calculate any discounts.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据当前的促销活动，计算任何折扣。
- en: Calculate the final total.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算最终总额。
- en: Process the payment.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 处理支付。
- en: Fulfill the order.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 履行订单。
- en: Figure 1.3\. An e-commerce system that grew organically
  id: totrans-95
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.3。一个自然成长的电子商务系统
- en: '![](../Images/f0033-01_alt.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/f0033-01_alt.jpg)'
- en: In this system, some of the steps are separated clearly. Not bad! But there
    is a rough patch in the middle. It looks like all of the price-related logic happens
    in one big chunk. If there’s a bug in that process, it might be difficult to understand
    exactly *which* step contains the bug. You may see that the price is wrong, but
    there will be a lot of code to sift through to figure out why. The payment processing
    and fulfillment are also lumped together, so with an ill-timed error it’s possible
    you could process the payment successfully but never fulfill the order. That would
    make for a disgruntled customer.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个系统中，一些步骤被清晰地分开。还不错！但中间有一段粗糙的地方。看起来所有与价格相关的逻辑都发生在一个大块中。如果在这个过程中有错误，可能很难确切地知道是哪个步骤包含了错误。你可能看到价格是错误的，但可能需要浏览大量代码才能找出原因。支付处理和履行也被合并在一起，所以如果出现错误的时间不当，你可能会成功处理支付，但永远不会履行订单。这会让顾客感到不满。
- en: A good start on the path to making this workflow more robust is to split its
    logical steps up ([figure 1.4](#ch01fig04)). If each step is handled by its own
    service, the service for a particular step only needs to concern itself with one
    job. The inventory service keeps track of how many items are in stock. The pricing
    service knows the cost and tax for each item. This isolates each step from the
    others, making each one less likely to suffer from bugs.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 使这个工作流程更健壮的一个好方法是将其逻辑步骤分开([图1.4](#ch01fig04))。如果每个步骤都由自己的服务处理，那么特定步骤的服务只需要关注一项工作。库存服务跟踪库存中有多少商品。定价服务知道每个商品的成本和税费。这使每个步骤与其他步骤隔离开来，使得每个步骤不太可能受到错误的影响。
- en: Figure 1.4\. What a thoughtfully planned e-commerce system might look like
  id: totrans-99
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.4。一个精心设计的电子商务系统可能的样子
- en: '![](../Images/f0034-01_alt.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/f0034-01_alt.jpg)'
- en: Design often allows you to see where a system’s existing pieces can be broken
    down into simpler ones. This idea of *decomposition* is just one of the tools
    we’ll explore more thoroughly in the chapters to come. Keep in mind that this
    work is almost never done; refactoring and redesigning code will happen constantly.
    By internalizing some of the techniques you’ll learn in this book, though, you’ll
    find these tasks get easier and quicker in a given project over time. Stay sharp
    and recognize opportunities for improving your existing code!
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 设计通常允许你看到系统的现有部分可以被分解成更简单的部分。这种*分解*的想法是我们将在接下来的章节中更深入探讨的工具之一。记住，这项工作几乎永远不会完成；重构和代码重设计会不断发生。但是，通过内化你在本书中学到的一些技术，你会发现随着时间的推移，在特定项目中这些任务会变得更容易、更快。保持敏锐，并认识到改进现有代码的机会！
- en: 1.5\. When to invest in design
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.5. 何时投资于设计
- en: We tend to focus our efforts on creating new software to complete tasks. But
    as projects grow, we forget about the implementation of working code until it
    gets in our way. Some code gets in the way so often that it creates more trouble
    than value. At this point the project incurs technical debt, because additional
    work must be done to remain productive.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 我们倾向于将精力集中在创建新的软件来完成任务。但随着项目的增长，我们忘记了实现工作代码的实施，直到它阻碍了我们的工作。有些代码经常阻碍工作，以至于它带来的麻烦比价值还要多。在这种情况下，项目积累了技术债务，因为必须进行额外的工作才能保持生产力。
- en: The more frequently a gnarly piece of code gets in the way, and the more difficult
    it is to deal with it *when* it gets in the way, the more time you should allot
    to getting in there and sweeping up the mess. This is often based on a gut feeling
    after a system is already built, but sometimes you can catch things early.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 当一段复杂的代码经常阻碍工作，并且当它阻碍时处理起来更加困难，你应该分配更多的时间去清理这些混乱。这通常是基于系统构建后的直觉判断，但有时你可以在早期就发现问题。
- en: Intentional software design up front can save time and headaches down the road.
    When software is flexible enough to be extended to new use cases, it can be a
    pleasure to work with, so putting thought into the system before writing a line
    of code is a good way to keep productivity up. I like to think of this as a technical
    *investment* because it’s putting work in up front for a later return.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在前期进行有意识的软件设计可以节省时间和减少麻烦。当软件足够灵活，可以扩展到新的用例时，与之合作会变得愉快，因此在编写代码之前对系统进行思考是提高生产力的好方法。我喜欢将其视为一种技术**投资**，因为它是在前期投入工作，以期待未来的回报。
- en: 'One place you may have encountered this is in a *framework*. Frameworks are
    large libraries of code that act as guides to some goal. A framework might help
    you make your website look wonderful, or it may help you build a neural network
    for detecting faces in video. Regardless of its function, a framework seeks to
    provide the building blocks that you can use to make something all your own. For
    a framework to be useful, it must be flexible enough to handle a variety of use
    cases and extensible enough that you can write new functionality that the original
    developers didn’t think of. Python developers have created numerous frameworks:
    Requests, for making HTTP calls; Flask and Django, for web development; and Pandas,
    for data analysis, to name a few. In a way, much of the code you write is a framework.
    It provides some useful functionality that you may need to use again and again
    or for different purposes along the way. Writing your code with these facts in
    mind will keep you from putting hurdles in your own way.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能遇到过这种情况是在一个**框架**中。框架是一系列代码的大库，作为实现某些目标的指南。一个框架可能帮助你使你的网站看起来很棒，或者它可能帮助你构建用于在视频中检测人脸的神经网络。无论其功能如何，框架都旨在提供你可以用来创建自己独特产品的构建块。为了使框架有用，它必须足够灵活，能够处理各种用例，并且足够可扩展，以便你可以编写原始开发者没有考虑到的新的功能。Python
    开发者已经创建了众多框架：用于进行 HTTP 调用的 Requests；用于网络开发的 Flask 和 Django；以及用于数据分析的 Pandas，仅举几例。从某种意义上说，你编写的许多代码本身就是框架。它提供了一些你可能需要反复使用或在不同目的上使用的有用功能。考虑到这些事实来编写代码，将帮助你避免给自己设置障碍。
- en: The process of designing software, whether revisiting a project or starting
    a new one, is an investment. The hope is that the return on this investment will
    be code that adapts to the needs of developers and consumers without incurring
    a great deal of overhead or frustration. There will be times when some code is
    in poor shape but may not warrant the time and effort good design can require.
    How often the code is used or updated is an important consideration, because spending
    weeks improving a script that’s used once or twice in its lifetime isn’t economical.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 设计软件的过程，无论是回顾一个项目还是开始一个新的项目，都是一种投资。希望这种投资的回报将是能够适应开发者和消费者需求的代码，而不会带来过多的开销或挫败感。有时，一些代码状况不佳，但可能不值得投入大量时间和精力进行良好的设计。代码的使用频率或更新频率是一个重要的考虑因素，因为花费数周时间改进在其生命周期中只使用一两次的脚本并不经济。
- en: 1.6\. New beginnings
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.6. 新的开始
- en: When you set out to be more mindful of design, the opportunities for improvement
    can become overwhelming. There is so much to learn and do that trying to manage
    it all at once won’t be fun. Taking on design concepts little by little, until
    they become a part of your mindset, is a more sustainable approach to success.
    In this book, I’ll introduce small sets of concepts in each chapter, and you can
    revisit particular chapters at any time to reinforce what you learned there.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始更加关注设计时，改进的机会可能会变得压倒性。有太多东西要学习和做，试图一次性管理所有这些事情不会很有趣。逐步承担设计概念，直到它们成为你思维模式的一部分，是更可持续的成功方法。在这本书中，我将在每一章介绍一小组概念，你可以随时回顾特定的章节来巩固你所学到的知识。
- en: 1.7\. Design is democratic
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.7. 设计是民主的
- en: Up to now, it’s quite possible that you’ve worked on projects mostly by yourself.
    If you did any coding as part of a class, you may have been *required* to write
    all the code yourself. In the real world, this doesn’t happen often for large
    projects. In companies writing software for business uses, there may be tens of
    developers working on a single product. Each developer has a unique set of experiences
    that can affect how they choose to work. This diversity of viewpoints can lead
    to a more robust system because experiences with previous bugs, failures, and
    successes all inform directions to take in upcoming work.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你很可能主要独立完成项目。如果你在课程中参与了任何编码，你可能被*要求*自己编写所有代码。在现实世界中，大型项目很少是这样。在为商业用途编写软件的公司中，可能有数十名开发者正在为一个单一的产品工作。每个开发者都有独特的一套经验，这会影响他们选择工作的方式。这种观点的多样性可以导致更健壮的系统，因为之前的错误、失败和成功经验都会影响即将到来的工作的方向。
- en: It’s to your benefit to get input from other developers, especially at the early
    stages. There’s rarely one way of doing something, so learning many approaches,
    along with their pros and cons, will empower you to make educated choices, or
    at least to choose what feels best if all other things are equal. Some approaches
    will make sense for one use case but not for another, so knowing several will
    increase your productivity.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 从其他开发者那里获取反馈对你来说是有益的，尤其是在早期阶段。做事情很少有唯一的方法，所以学习多种方法，包括它们的优缺点，将使你能够做出明智的选择，或者至少在所有其他条件相同的情况下选择感觉最好的方法。某些方法可能适用于某个用例，但不适用于另一个，所以了解多种方法将提高你的生产力。
- en: If you don’t have the privilege of working with an active team of developers,
    examining some open source projects is another way to get some exposure to the
    collaborative nature of software. Look for discussions where developers disagreed
    (constructively!) about how to achieve some task, and see what kinds of considerations
    came into play on the way to a resolution. The thought process that leads to a
    solution is often more important than the specific solution the developers choose.
    This kind of reasoning and discussion capability will get you through more difficulties
    than knowing a specific algorithm.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有与活跃的开发者团队一起工作的特权，检查一些开源项目是了解软件协作性质的另一途径。寻找开发者就如何完成任务存在分歧（建设性地！）的讨论，并看看在解决问题的过程中考虑了哪些因素。导致解决方案的思维过程通常比开发者选择的特定算法更重要。这种推理和讨论能力将帮助你克服比知道特定算法更多的困难。
- en: 1.7.1\. Presence of mind
  id: totrans-114
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.7.1. 专注
- en: It’s easy to get carried away when writing software. Think about a time when
    you were excited to get something done. You were probably anxious to see your
    code work, and it’s often difficult in that situation to sit still and be deliberate
    about writing perfect code.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 写软件时很容易陷入其中。想想你兴奋地想要完成某件事的时候。你可能急于看到你的代码工作，在这种情况下，坐下来仔细编写完美的代码往往很困难。
- en: When working with a small script or doing some exploratory work, a quick feedback
    cycle can be valuable in staying productive. I often do this kind of work in Python’s
    *read-eval-print loop* (REPL).
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 当处理小型脚本或进行一些探索性工作时，快速反馈周期对于保持生产力非常有价值。我经常在Python的*读取-评估-打印循环*（REPL）中做这类工作。
- en: '|  |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**The REPL**'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '**REPL**'
- en: The REPL—pronounced REH-pull—is what’s hiding behind the `>>>` when you type
    `python` at the terminal. It *reads* what you type, *evaluates* it, *prints* the
    result, and waits for it all to happen again (the *loop*). Many languages provide
    a REPL so developers can interactively test a few lines of code.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: REPL——发音为REH-pull——是当你终端中输入`python`时隐藏在`>>>`后面的东西。它*读取*你输入的内容，*评估*它，*打印*结果，并等待这一切再次发生（*循环*）。许多语言都提供了REPL，以便开发者可以交互式地测试几行代码。
- en: 'But beware: at some point, the back and forth of writing a quick line of code
    and seeing how it changes the program’s output becomes tedious. You’ll want to
    write length-ier or longer-lived code in a file and run it with the interpreter.
    Each person has a different threshold; I usually hit mine when I want to reuse
    a line of code I previously wrote, and it’s 15 lines back in my history.'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 但要注意：在某个时候，编写快速的一行代码并看到它如何改变程序输出的来回操作会变得乏味。你将想要在文件中编写更长的或更持久的代码，并使用解释器运行它。每个人的阈值都不同；我通常在我想要重用之前写过的代码时达到我的阈值，那是在我历史记录中15行之前。
- en: '|  |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'The example in [listing 1.1](#ch01ex1) shows how you might work through transforming
    a dictionary of data. Given a dictionary that maps states in the United States
    to their capital cities, you want to produce a list of all capital cities in alphabetical
    order. The approach is something like this:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '[列表 1.1](#ch01ex1)中的示例展示了如何处理转换数据字典的过程。给定一个将美国各州映射到其首都城市的字典，你想要生成一个按字母顺序排列的所有首都城市的列表。方法大致如下：'
- en: Get the city values from the dictionary.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从字典中获取城市值。
- en: Sort the city values.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对城市值进行排序。
- en: Listing 1.1\. Getting the United States capitals in alphabetical order
  id: totrans-125
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 1.1\. 获取按字母顺序排列的美国首都
- en: '[PRE2]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '***1* A dictionary that maps state names to capital names**'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 一个将州名映射到首府名的字典**'
- en: '***2* Only the capital names**'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 只需首府名称**'
- en: '***3* Whoops! This isn’t a “list”, so no “sort” method is available.**'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 哎呀！这不是“列表”，因此没有“排序”方法可用。**'
- en: '***4* New (sorted) list using “sorted”, which accepts any iterable**'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 使用“sorted”创建的新（排序后的）列表，它接受任何可迭代对象**'
- en: This task wasn’t too bad; there was only one fumble along the way. But as a
    project grows and the scope of the change you’re making increases, taking a step
    back and planning your actions in advance is helpful.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 这个任务并不太难；在过程中只有一个失误。但随着项目的增长和你要做的更改范围的扩大，退后一步并提前规划你的行动是有帮助的。
- en: Some thoughtful planning will often save you time in the long run because you
    won’t be going two steps forward and one step back as you develop. If you do this
    up front, you can also get into a good habit of recognizing opportunities to refactor
    as they happen, rather than when you’re further down the road. When I’m in this
    mode, I typically shift to writing my code in a real Python module, even if I’m
    still writing a pretty short script. This encourages me to slow down a bit and
    keep the bigger goal in mind during development.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 一些深思熟虑的计划通常会节省你大量的时间，因为你不会在开发过程中前进两步，后退一步。如果你提前这样做，你还可以养成在发生时识别重构机会的好习惯，而不是在你走得更远的时候。当我处于这种模式时，我通常会转向编写真正的Python模块中的代码，即使我还在编写一个相当短的脚本。这促使我放慢脚步，在开发过程中始终牢记更大的目标。
- en: In the case of the state capitals code, imagine you’ll need the list of state
    capitals in many contexts. You might need it on a registration form, a shipping
    form, or a billing form. To avoid doing the same calculation over and over, you
    could wrap that calculation in a function and call it whenever you need it, as
    shown in the following listing.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在州首府代码的情况下，想象你会在许多场景下需要州首府的列表。你可能在注册表单、发货表单或账单表单上需要它。为了避免重复进行相同的计算，你可以将这个计算封装在一个函数中，并在需要时调用它，如下面的列表所示。
- en: Listing 1.2\. Wrapping the state capital logic in a function
  id: totrans-134
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 1.2\. 将州首府逻辑封装在函数中
- en: '[PRE3]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Same code as [listing 1.1](#ch01ex1), in a function**'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 与[列表 1.1](#ch01ex1)中的代码相同，但封装在函数中**'
- en: Now you have a reusable function. But looking at this function, you can see
    that it operates on constant data but does a bit of calculation each time it’s
    called. If this function is called frequently in the program, it can be refactored
    further to improve its performance.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你有一个可重用的函数。但看这个函数，你可以看到它操作的是常量数据，但每次调用时都会进行一些计算。如果这个函数在程序中被频繁调用，可以通过进一步重构来提高其性能。
- en: In fact, it turns out a function isn’t necessary at all. You can achieve the
    reusability while still making only one set of calculations by storing the result
    in a constant for later use, as shown in the following listing.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，结果证明根本不需要函数。你可以通过将结果存储在常量中以供以后使用，同时仍然只进行一组计算来实现可重用性，如下面的列表所示。
- en: Listing 1.3\. Refactored code reveals a more concise solution
  id: totrans-139
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 1.3\. 重构后的代码揭示了一个更简洁的解决方案
- en: '[PRE4]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '***1* Constant data, defined once**'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 常量数据，只定义一次**'
- en: '***2* Also constant, no need for a function; just reference “US_CAPITALS”.**'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 也同样是常量，不需要函数；只需引用“US_CAPITALS”。**'
- en: This has the added benefit of cutting the number of lines of code in half without
    sacrificing readability.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这还有额外的优点，即在保持可读性的同时，可以将代码行数减半。
- en: The process we just went through from initial problem statement to a final solution
    is a design process. As you progress, you may find that you can identify areas
    for improvement earlier and earlier. Eventually, you may even decide to start
    drawing high-level diagrams that represent several complex pieces of software,
    using your diagrams to assess opportunities and risk before writing any code.
    Not everyone works this way, of course, so you’ll need to use what you learn in
    this book where it gives you the most value.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚经历的过程，从最初的问题陈述到最终的解决方案，是一个设计过程。随着你的进步，你可能会发现你可以越来越早地识别出改进的领域。最终，你甚至可能决定开始绘制代表几个复杂软件组件的高级图表，使用你的图表在编写任何代码之前评估机会和风险。当然，并不是每个人都这样做，所以你需要将本书中学到的知识应用到能给你带来最大价值的地方。
- en: You might be feeling the urge to scrap everything and start your project anew
    at this point, but hold on! As you go through this book, you’ll see that the processes
    of designing and refactoring software are not only interrelated, but in fact are
    two sides of the same coin. Doing one often means doing the other, and they’re
    both continuous processes throughout the life of a project. Nothing and no one
    is perfect either, so it’s valuable to revisit code early and often, especially
    when you start to feel friction.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 此时你可能会有把一切推翻，重新开始项目的冲动，但请稍等！随着你阅读本书，你会发现设计和重构软件的过程不仅相互关联，实际上它们是同一枚硬币的两面。做一件事情往往意味着做另一件事情，它们都是贯穿项目生命周期的连续过程。没有任何事物或任何人完美无缺，因此，在开始感到摩擦时，经常回顾代码是非常有价值的。
- en: With that in mind, take a deep breath and relax. There’s plenty more to cover.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这一点，深呼吸并放松。还有很多内容要介绍。
- en: 1.8\. How to use this book
  id: totrans-147
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.8\. 如何使用本书
- en: Generally speaking, this book is best experienced from cover to cover. I’ve
    laid out the parts of the book so they build on one another; later parts use concepts
    from earlier parts. In [part 3](../Text/kindle_split_016.html#part03), each chapter
    builds upon a software project you’ll start in [chapter 6](../Text/kindle_split_017.html#ch06).
    But feel free to skim or skip chapters that cover things you already know, with
    the caveat that you may need to thumb back to an earlier chapter from time to
    time.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 一般而言，这本书最好从头到尾阅读。我已经安排了本书的各个部分，以便它们相互关联；后面的部分使用了前面部分的概念。在[第3部分](../Text/kindle_split_016.html#part03)中，每个章节都是基于你在[第6章](../Text/kindle_split_017.html#ch06)中开始的一个软件项目。但如果你已经了解某些内容，可以自由地浏览或跳过这些章节，但要注意，你可能需要不时地翻回前面的章节。
- en: Most chapters will leave you in a good place to incorporate a new concept or
    practice into your software development routine. If there’s a chapter whose concepts
    you find particularly valuable, you might want to work on applying those concepts
    to your projects until you’ve got the hang of them. Once you feel comfortable,
    you can come back and read the next chapter.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数章节都会让你在软件开发的常规中融入新的概念或实践。如果你发现某个章节的概念特别有价值，你可能想将这些概念应用到你的项目中，直到你熟练掌握它们。一旦你感到舒适，你就可以回来阅读下一章。
- en: Remember that the code for the examples and exercises is in this book’s GitHub
    repository ([https://github.com/daneah/practices-of-the-python-pro](https://github.com/daneah/practices-of-the-python-pro)),
    and also remember that most of the source code is meant as a way to check your
    own work after completing an exercise. Use the provided code if you’re stuck or
    you want to compare solutions, but give each exercise your own effort first.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，示例和练习的代码在本书的 GitHub 仓库中([https://github.com/daneah/practices-of-the-python-pro](https://github.com/daneah/practices-of-the-python-pro))，也请记住，大部分源代码是为了在完成练习后检查你的工作而设计的。如果你卡住了或者想要比较解决方案，可以使用提供的代码，但请首先为每个练习付出自己的努力。
- en: Happy coding!
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 开心编码！
- en: Summary
  id: totrans-152
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: Python pulls as much weight in complex, enterprise projects as other major programming
    languages.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 在复杂的企业项目中与其他主要编程语言一样，具有举足轻重的地位。
- en: Python has one of the fastest growing user bases of any programming language.
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 是任何编程语言中用户增长最快的之一。
- en: Design isn’t only a thing you draw on paper; it’s the process you follow to
    get there.
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计不仅仅是你在纸上画的东西；它是你为了达到那个目标而遵循的过程。
- en: Design up front is an *investment* that will reward you with clean and flexible
    code later on.
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预先设计是一种*投资*，它会在以后给你带来干净和灵活的代码。
- en: You need to build software with a diverse audience in mind.
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要考虑具有多元化受众的软件构建。
