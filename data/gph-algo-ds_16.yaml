- en: Appendix. The Neo4j environment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录。Neo4j环境
- en: In this book, you will learn graph theory and algorithms through practical examples
    using Neo4j. I chose Neo4j because I have more than five years of experience with
    it, building and analyzing graphs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，您将通过使用Neo4j的实际示例学习图理论和算法。我选择Neo4j是因为我有超过五年的使用经验，用于构建和分析图。
- en: Neo4j is a native graph database, built from the ground up to store, query,
    and manipulate graph data. It is implemented in Java and accessible from software
    written in other languages using Cypher query language, through a transactional
    HTTP endpoint or the binary Bolt Protocol. In Neo4j, data is stored as nodes and
    relationships, which are both first-class citizens in the database. Nodes represent
    entities, such as people or businesses, and relationships represent the connections
    between these entities. Nodes and relationships can have properties, which are
    key-value pairs that provide additional information about the nodes and relationships.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j是一个本机图数据库，从头开始构建以存储、查询和操作图数据。它使用Java实现，可以通过Cypher查询语言从其他语言编写的软件中访问，通过事务性HTTP端点或二进制Bolt协议。在Neo4j中，数据以节点和关系的形式存储，它们在数据库中都是一等公民。节点代表实体，如人或企业，关系代表这些实体之间的连接。节点和关系可以具有属性，这些属性是键值对，提供了关于节点和关系的额外信息。
- en: Neo4j is designed to be highly scalable. It uses a flexible indexing system
    to efficiently query and manipulate data and supports atomicity, consistency,
    isolation, and durability (ACID) transactions to ensure data consistency. It also
    has a built-in query language, called Cypher, which is designed to be expressive
    and easy to use for querying and manipulating graph data.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j设计为高度可扩展。它使用灵活的索引系统来高效地查询和处理数据，并支持原子性、一致性、隔离性和持久性（ACID）事务，以确保数据一致性。它还内置了一个查询语言，称为Cypher，该语言旨在易于表达且易于使用，用于查询和操作图数据。
- en: 'Another benefit of using Neo4j is that it has two practical plugins you will
    be using:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Neo4j的另一个好处是它有两个实用的插件，您将使用它们：
- en: '*The Awesome Procedures on Cypher (APOC) plugin*—A library of procedures, functions,
    and plugins for Neo4j that provide a wide range of capabilities, including data
    import/export, data transformation and manipulation, date-time interval processing,
    geospatial processing, text processing, and others.'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*The Awesome Procedures on Cypher (APOC) plugin*—这是一个为Neo4j提供的程序、函数和插件库，它提供了广泛的功能，包括数据导入/导出、数据转换和处理、日期时间区间处理、地理空间处理、文本处理等。'
- en: '*The Graph Data Science (GDS) plugin*—A set of graph algorithms and procedures
    for Neo4j that allow users to perform advanced analytics on their graph data.
    GDS provides efficient, parallel implementations of common graph algorithms, such
    as shortest path, PageRank, and community detection. In addition, the plugin includes
    node embedding algorithms and machine learning workflows that support node classification
    and link prediction workflows.'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*The Graph Data Science (GDS) plugin*—这是一套为Neo4j设计的图算法和程序，允许用户对其图数据进行高级分析。GDS提供了常见图算法（如最短路径、PageRank和社区检测）的高效、并行实现。此外，该插件还包括节点嵌入算法和机器学习工作流程，支持节点分类和链接预测工作流程。'
- en: A.1 Cypher query language
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 Cypher查询语言
- en: Cypher is a declarative query language for graph databases used to retrieve
    and manipulate data stored in a graph database. Cypher queries are written in
    a simple, human-readable syntax. Here is an example of a simple Cypher query that
    uses ASCII-art-style diagramming to illustrate the relationships being queried.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Cypher是一种用于图数据库的声明式查询语言，用于检索和操作存储在图数据库中的数据。Cypher查询使用简单、易于阅读的语法编写。以下是一个简单的Cypher查询示例，它使用ASCII艺术风格的图表来展示所查询的关系。
- en: Listing A.1 A sample Cypher statement
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 列表A.1 一个示例Cypher语句
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The openCypher initiative is a collaboration between Neo4j and several other
    organizations to promote the use of Cypher query language as a standard for working
    with graph data. The goal of the openCypher initiative is to create a common language
    that can be used to query any graph database, regardless of the underlying technology.
    To achieve this goal, the openCypher initiative is making the Cypher language
    specification and related resources available under an open source license and
    is encouraging the development of Cypher implementations by a variety of organizations.
    So far, the Cypher query language has been adopted by Amazon, Agens Graph, Katana
    Graph, Memgraph, RedisGraph, and SAP HANA (openCypher Implementers Group; [https://opencypher.org/projects/](https://opencypher.org/projects/)).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: openCypher倡议是Neo4j与几个其他组织之间的合作，旨在推广Cypher查询语言作为处理图数据的标准。openCypher倡议的目的是创建一种通用的语言，可以用来查询任何图数据库，无论其底层技术如何。为了实现这一目标，openCypher倡议正在将Cypher语言规范和相关资源以开源许可证的形式提供，并鼓励各种组织开发Cypher实现。到目前为止，Cypher查询语言已被Amazon、Agens
    Graph、Katana Graph、Memgraph、RedisGraph和SAP HANA（openCypher实施者小组；[https://opencypher.org/projects/](https://opencypher.org/projects/)）采用。
- en: There is also an official ISO project to propose a unified Graph Query Language
    (GQL) to interact with graph databases (GQL Standards Committee). The GQL aims
    to build on the foundation of SQL and integrate proven ideas from existing graph
    query languages, including Cypher. That makes learning Cypher a great start to
    interact with graph databases, as it is already integrated with many of them and
    will also be part of the official ISO Graph Query Language. Take a look at the
    graph pattern matching proposal for GQL (Deutsch et al., 2022) for more information.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有一个官方的ISO项目提议一个统一的图查询语言（GQL）来与图数据库交互（GQL标准委员会）。GQL旨在建立在SQL的基础上，并整合现有图查询语言中的成熟想法，包括Cypher。这使得学习Cypher成为与图数据库交互的绝佳起点，因为它已经与许多数据库集成，并将成为官方ISO图查询语言的一部分。有关更多信息，请参阅GQL的图模式匹配提案（Deutsch等人，2022年）。
- en: A.2 Neo4j installation
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.2 Neo4j安装
- en: 'There are a few different options to set up your Neo4j environment:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种不同的选项来设置您的Neo4j环境：
- en: Neo4j Desktop
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Neo4j Desktop
- en: Neo4j Docker
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Neo4j Docker
- en: Neo4j Aura
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Neo4j Aura
- en: I would advise you to use Neo4j Desktop if you are new to Neo4j.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您是Neo4j的新用户，我建议您使用Neo4j桌面版。
- en: A.2.1 Neo4j Desktop installation
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.1 Neo4j桌面版安装
- en: 'Neo4j Desktop is a local Neo4j graph database management application. It allows
    you to create database instances and install official plugins with only a few
    clicks. If you decide to use Neo4j Desktop, follow these steps to successfully
    start a Neo4j database instance with installed APOC and GDS plugins:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j桌面版是一个本地的Neo4j图数据库管理应用程序。它允许您通过几个点击创建数据库实例并安装官方插件。如果您决定使用Neo4j桌面版，请按照以下步骤成功启动一个安装了APOC和GDS插件的Neo4j数据库实例：
- en: Download the Neo4j Desktop application from the official website ([https://neo4j.com/download](https://neo4j.com/download);
    figure A.1).
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从官方网站下载Neo4j桌面版应用程序（[https://neo4j.com/download](https://neo4j.com/download)；图A.1）。
- en: '![A-01](../../OEBPS/Images/A-01.png)'
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-01](../../OEBPS/Images/A-01.png)'
- en: Figure A.1 Download Neo4j Desktop.
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.1 下载Neo4j桌面版。
- en: Install the Neo4j Desktop application on your computer, and then open it.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的计算机上安装Neo4j桌面版应用程序，然后打开它。
- en: Complete the registration step. You can enter the software key you were assigned
    when you downloaded the application or skip this step by clicking Register Later
    (figure A.2).
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成注册步骤。您可以在下载应用程序时分配的软件密钥，或者通过点击“稍后注册”（图A.2）跳过此步骤。
- en: '![A-02](../../OEBPS/Images/A-02.png)'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-02](../../OEBPS/Images/A-02.png)'
- en: Figure A.2 Enter your personal information, or skip the registration step.
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.2 输入您的个人信息，或跳过注册步骤。
- en: The Movie Database Management System (DBMS) is automatically started on the
    first execution of Neo4j Desktop. Stop the Movie DBMS if it is running (figure
    A.3).
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 电影数据库管理系统（DBMS）在Neo4j桌面版首次执行时自动启动。如果正在运行，请停止电影DBMS（图A.3）。
- en: '![A-03](../../OEBPS/Images/A-03.png)'
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-03](../../OEBPS/Images/A-03.png)'
- en: Figure A.3 Stop the default Movie DBMS database.
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.3 停止默认的电影数据库管理系统数据库。
- en: Add a new local DBMS (figure A.4).
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个新的本地数据库管理系统（图A.4）。
- en: '![A-04](../../OEBPS/Images/A-04.png)'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-04](../../OEBPS/Images/A-04.png)'
- en: Figure A.4 Add a Local DBMS.
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.4 添加本地数据库管理系统。
- en: Type in any values for the DBMS name and password. Make sure to select version
    5.12.0 or greater (figure A.5).
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入数据库管理系统名称和密码的任何值。请确保选择版本5.12.0或更高版本（图A.5）。
- en: '![A-05](../../OEBPS/Images/A-05.png)'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-05](../../OEBPS/Images/A-05.png)'
- en: Figure A.5 Define a DBMS password and version.
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.5 定义DBMS密码和版本。
- en: Install the APOC and GDS plugins by selecting the DBMS, which opens a right-hand
    pane with Details, Plugins, and Upgrade tabs. Select the Plugins tab, and then
    install the APOC and GDS plugins (figure A.6).
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择DBMS来安装APOC和GDS插件，这将在右侧面板中打开详细信息、插件和升级选项卡。选择插件选项卡，然后安装APOC和GDS插件（图A.6）。
- en: '![A-06](../../OEBPS/Images/A-06.png)'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-06](../../OEBPS/Images/A-06.png)'
- en: Figure A.6 Install the APOC and GDS plugins.
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.6 安装APOC和GDS插件。
- en: Start the database (figure A.7).
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动数据库（图A.7）。
- en: '![A-07](../../OEBPS/Images/A-07.png)'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-07](../../OEBPS/Images/A-07.png)'
- en: Figure A.7 Start the database.
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.7 启动数据库。
- en: Open Neo4j Browser (figure A.8).
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Neo4j浏览器（图A.8）。
- en: '![A-08](../../OEBPS/Images/A-08.png)'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-08](../../OEBPS/Images/A-08.png)'
- en: Figure A.8 Open Neo4j Browser.
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.8 打开Neo4j浏览器。
- en: Execute Cypher queries by typing them in the Cypher editor. For longer Cypher
    statements, you can use the full-screen editor option (figure A.9).
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在Cypher编辑器中输入来执行Cypher查询。对于较长的Cypher语句，可以使用全屏编辑器选项（图A.9）。
- en: '![A-09](../../OEBPS/Images/A-09.png)'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![A-09](../../OEBPS/Images/A-09.png)'
- en: Figure A.9 The Cypher query editor in Neo4j Browser
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图A.9 Neo4j浏览器中的Cypher查询编辑器
- en: A.2.2 Neo4j Docker installation
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.2 Neo4j Docker安装
- en: If you select the Neo4j Docker installation, you need to run the command in
    the following listing in your command prompt.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你选择了Neo4j Docker安装，你需要在命令提示符中运行以下列表中的命令。
- en: Listing A.2 Starting Neo4j Docker
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 列表A.2 启动Neo4j Docker
- en: '[PRE1]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This command starts a dockerized Neo4j in the background. The APOC and GDS plugins
    are automatically added by defining the `NEO4J_PLUGINS` environment variable.
    It is a good practice to mount the `data` volume to persist the database files.
    The database username and password are specified with the `NEO4J_AUTH` variable.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令在后台启动docker化的Neo4j。通过定义`NEO4J_PLUGINS`环境变量，APOC和GDS插件会自动添加。将`data`卷挂载以持久化数据库文件是一个好习惯。数据库用户名和密码由`NEO4J_AUTH`变量指定。
- en: Visit http://localhost:7474 in your web browser after you have executed the
    command in listing A.2\. Type in the password, specified with the `NEO4J_AUTH`
    variable. The password in the example is `pleaseletmein`.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行列表A.2中的命令后，在你的网页浏览器中访问http://localhost:7474。输入由`NEO4J_AUTH`变量指定的密码。示例中的密码是`pleaseletmein`。
- en: A.2.3 Neo4j Aura
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.3 Neo4j Aura
- en: 'Neo4j Aura is a hosted cloud instance of the Neo4j database. Unfortunately,
    the free version does not provide the GDS library. If you want to use cloud-hosted
    Neo4j Aura to follow the examples in this book, you will need to use the AuraDS
    version, which provides support for GDS algorithms. You can find more information
    on Neo4j’s official website: [https://neo4j.com/cloud/platform/aura-graph-database/](https://neo4j.com/cloud/platform/aura-graph-database/).'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j Aura是Neo4j数据库的托管云实例。不幸的是，免费版本不提供GDS库。如果你想使用云托管的Neo4j Aura来跟随本书中的示例，你需要使用AuraDS版本，它提供了对GDS算法的支持。你可以在Neo4j的官方网站上找到更多信息：[https://neo4j.com/cloud/platform/aura-graph-database/](https://neo4j.com/cloud/platform/aura-graph-database/)。
- en: A.3 Neo4j Browser configuration
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.3 Neo4j浏览器配置
- en: Neo4j Browser has a beginner-friendly feature that visualizes all the relationships
    between resulting nodes, even when the relationships are not part of the query
    results. To avoid confusion, untick the Connect Result Nodes feature, as shown
    in figure A.10\.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Neo4j浏览器有一个面向初学者的功能，可以可视化结果节点之间所有的关系，即使这些关系不是查询结果的一部分。为了避免混淆，请取消选中如图A.10所示的连接结果节点功能。
- en: '![A-10](../../OEBPS/Images/A-10.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![A-10](../../OEBPS/Images/A-10.png)'
- en: Figure A.10 Untick Connect Result Nodes in Neo4j Browser.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.10 在Neo4j浏览器中取消选中连接结果节点。
