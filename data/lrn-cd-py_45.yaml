- en: Lesson 37\. A library for graphical user interfaces
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第37课\. 图形用户界面库
- en: After reading [lesson 37](#ch37), you’ll be able to
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读[第37课](#ch37)之后，你将能够
- en: Describe a graphical user interface
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述图形用户界面
- en: Use a library for a graphical user interface to write a program
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用图形用户界面库编写程序
- en: Every program you’ve written has interacted with the user in a text-based way.
    You’ve been displaying text on the screen and getting text input from the user.
    Although you can write interesting programs this way, the user is missing a more
    visual experience.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 你编写过的每个程序都以基于文本的方式与用户交互。你一直在屏幕上显示文本并从用户那里获取文本输入。虽然你可以用这种方式编写有趣的程序，但用户缺少更直观的体验。
- en: '|  |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Consider this**'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**考虑这一点**'
- en: 'Think about a program you use in your everyday life: a browser to go on the
    internet. What kinds of interactions do you have with the browser?'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 想想你在日常生活中使用的程序：上网的浏览器。你与浏览器有哪些交互？
- en: 'Answer: You open the browser window, click buttons, scroll, select text, and
    close the browser window.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 答案：你打开浏览器窗口，点击按钮，滚动，选择文本，然后关闭浏览器窗口。
- en: '|  |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'Many programming languages have libraries that help programmers write visual
    applications. These applications use familiar interfaces between the user and
    the program: buttons, text boxes, drawing canvases, icons, and many more.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 许多编程语言都有库可以帮助程序员编写可视化应用程序。这些应用程序使用用户和程序之间熟悉的界面：按钮、文本框、绘图画布、图标等等。
- en: 37.1\. A library for graphical user interfaces
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 37.1\. 图形用户界面库
- en: 'A library for a graphical user interface (GUI) is a set of classes and methods
    that know how to interface between the user and the operating system to display
    graphical control elements, called *widgets*. Widgets are meant to enhance the
    user experience through interaction: buttons, scrollbars, menus, windows, drawing
    canvases, progress bars, or dialog boxes are a few examples.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 图形用户界面（GUI）库是一组类和方法，它们知道如何将用户和操作系统接口，以显示称为*小部件*的图形控制元素。小部件旨在通过交互来增强用户体验：按钮、滚动条、菜单、窗口、绘图画布、进度条或对话框是一些例子。
- en: Python comes with a standard library for GUIs, called tkinter, whose documentation
    is available at [https://docs.python.org/3.5/library/tkinter.html#module-tkinter](https://docs.python.org/3.5/library/tkinter.html#module-tkinter).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Python附带了一个用于GUI的标准库，称为tkinter，其文档可在[https://docs.python.org/3.5/library/tkinter.html#module-tkinter](https://docs.python.org/3.5/library/tkinter.html#module-tkinter)找到。
- en: 'Developing a GUI application usually requires three steps. Each step is demonstrated
    in this lesson. As with any other program, development also involves setting up
    unit tests and debugging. The three steps are as follows:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 开发GUI应用程序通常需要三个步骤。本课将演示每个步骤。与其他任何程序一样，开发还涉及设置单元测试和调试。以下是三个步骤：
- en: Setting up the window by determining its size, location, and title.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过确定其大小、位置和标题来设置窗口。
- en: Adding widgets, which are interactive “things” like buttons or menus, among
    many others.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加小部件，这些是交互式“事物”，如按钮或菜单等。
- en: Choosing behaviors for widgets to handle events such as clicking a button or
    selecting a menu item. Behaviors are implemented by writing event handlers in
    the form of functions that tell the program which actions to take when the user
    interacts with the specific widget.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为小部件选择行为以处理事件，例如点击按钮或选择菜单项。行为通过编写函数形式的事件处理程序来实现，这些函数告诉程序当用户与特定小部件交互时应该采取哪些操作。
- en: '|  |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 37.1**'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查37.1**'
- en: What are some actions that you could do on each of the following?
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在以下每个选项上执行哪些操作？
- en: '**[1](kindle_split_056.html#app01qa146q0a1)**'
  id: totrans-21
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](kindle_split_056.html#app01qa146q0a1)**'
- en: ''
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A button
  id: totrans-23
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一个按钮
- en: '**[2](kindle_split_056.html#app01qa146q0a2)**'
  id: totrans-24
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](kindle_split_056.html#app01qa146q0a2)**'
- en: ''
  id: totrans-25
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A scrollbar
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一个滚动条
- en: '**[3](kindle_split_056.html#app01qa146q0a3)**'
  id: totrans-27
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](kindle_split_056.html#app01qa146q0a3)**'
- en: ''
  id: totrans-28
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A menu
  id: totrans-29
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一个菜单
- en: '**[4](kindle_split_056.html#app01qa146q0a4)**'
  id: totrans-30
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[4](kindle_split_056.html#app01qa146q0a4)**'
- en: ''
  id: totrans-31
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A canvas
  id: totrans-32
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一个画布
- en: '|  |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 37.2\. Setting up a program using the tkinter library
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 37.2\. 使用tkinter库设置程序
- en: All GUI programs typically run in a window. The window can be customized by
    changing its title, size, and background color. The following listing shows how
    to create a window of size 800 x 200 pixels, with a title of “My first GUI” and
    a background color of gray.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 所有GUI程序通常在窗口中运行。可以通过更改其标题、大小和背景颜色来自定义窗口。以下列表显示了如何创建一个800 x 200像素大小的窗口，标题为“我的第一个GUI”，背景颜色为灰色。
- en: Listing 37.1\. Creating a window
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表37.1\. 创建窗口
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '***1* Imports the tkinter library**'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 导入tkinter库**'
- en: '***2* Creates a new object and binds it to a variable named window**'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 创建一个新的对象并将其绑定到名为 window 的变量**'
- en: '***3* Changes the size of the window**'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 改变窗口大小**'
- en: '***4* Adds a title to the window**'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 为窗口添加标题**'
- en: '***5* Changes the background color of the window**'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 改变窗口的背景颜色**'
- en: '***6* Starts the program**'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 启动程序**'
- en: After you run this program, a new window will show up on your computer screen.
    If you don’t see it, it might be hiding behind another window you have open, so
    look on your taskbar for a new icon. You can terminate your program by closing
    the window.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 运行此程序后，你的电脑屏幕上会出现一个新窗口。如果你看不到它，它可能被你打开的另一个窗口遮挡，所以请在任务栏上寻找新的图标。你可以通过关闭窗口来终止你的程序。
- en: '[Figure 37.1](#ch37fig01) shows what the window looks like on the Windows operating
    system. The window may look different if you’re using Linux or a Mac operating
    system.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 37.1](#ch37fig01)显示了在Windows操作系统上窗口的外观。如果你使用的是Linux或Mac操作系统，窗口的外观可能会有所不同。'
- en: Figure 37.1\. An 800 x 200 pixel window with the title “My first GUI” and a
    background color of gray
  id: totrans-46
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 37.1\. 一个800 x 200像素的窗口，标题为“我的第一个GUI”，背景颜色为灰色
- en: '![](images/37fig01_alt.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](images/37fig01_alt.jpg)'
- en: '|  |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 37.2**'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 37.2**'
- en: 'Write a program for each of the following:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 为以下每个要求编写一个程序：
- en: '**[1](kindle_split_056.html#app01qa147q0a1)**'
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](kindle_split_056.html#app01qa147q0a1)**'
- en: ''
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Makes a 500 x 200 window with the title “go go go” and the background color
    green
  id: totrans-53
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 创建一个标题为“go go go”背景颜色为绿色的500 x 200窗口
- en: '**[2](kindle_split_056.html#app01qa147q0a2)**'
  id: totrans-54
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](kindle_split_056.html#app01qa147q0a2)**'
- en: ''
  id: totrans-55
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Makes a 100 x 900 window with the title “Tall One” and the background color
    red
  id: totrans-56
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 创建一个标题为“Tall One”背景颜色为红色的100 x 900窗口
- en: '**[3](kindle_split_056.html#app01qa147q0a3)**'
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](kindle_split_056.html#app01qa147q0a3)**'
- en: ''
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Makes two 100 x 100 windows with no title, but one has the background color
    white and the other black
  id: totrans-59
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 创建两个100 x 100窗口，没有标题，但一个的背景颜色为白色，另一个为黑色
- en: '|  |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 37.3\. Adding widgets
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 37.3\. 添加小部件
- en: A blank window isn’t interesting. The user has nothing to click! After you create
    the window, you can start adding widgets. You’ll create a program that has three
    buttons, one text box, one progress bar, and one label.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一个空白的窗口并不有趣。用户没有可以点击的东西！在你创建窗口后，你可以开始添加小部件。你将创建一个包含三个按钮、一个文本框、一个进度条和一个标签的程序。
- en: 'To add a widget, you need two lines of code: one to create the widget and one
    to put it on the window. The following code shows the two lines by creating one
    button and adding it to the window object from [listing 37.1](#ch37ex01). The
    first line creates the button and binds it to a variable named `btn`. The second
    line adds it (with pack) to the window:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加小部件，你需要两行代码：一行用于创建小部件，另一行用于将其放置在窗口上。以下代码通过创建一个按钮并将其添加到窗口对象（[列表 37.1](#ch37ex01)）中，展示了这两行代码。第一行创建按钮并将其绑定到名为`btn`的变量。第二行（使用pack）将其添加到窗口中：
- en: '[PRE1]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The next listing shows you how to add three buttons, one text box, and one label,
    assuming that you’ve already created a window, as in [listing 37.1](#ch37ex01).
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个列表显示了如何添加三个按钮、一个文本框和一个标签，假设你已经创建了一个窗口，如[列表 37.1](#ch37ex01)所示。
- en: Listing 37.2\. Adding widgets to the window
  id: totrans-66
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 37.2\. 向窗口添加小部件
- en: '[PRE2]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '***1* Creates a new button with a red background color and with the text “Red”
    on it**'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 创建一个新的按钮，背景颜色为红色，上面写着“红色”**'
- en: '***2* Adds the button with those properties to the window**'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 将具有这些属性的按钮添加到窗口中**'
- en: '***3* Creates and adds a box in which you can enter text**'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 创建并添加一个可以输入文本的框**'
- en: '***4* Creates and adds a label whose height is 10**'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 创建并添加一个高度为 10 的标签**'
- en: When you run this program, you get a window that looks like the one in [figure
    37.2](#ch37fig02).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 当你运行此程序时，你会得到一个看起来像[图 37.2](#ch37fig02)中的窗口。
- en: Figure 37.2\. Window after adding three buttons, one text box, and one label.
    The top button is red and is labeled Red, the middle button is yellow and is labeled
    Yellow, and the bottom button is green and is labeled Green.
  id: totrans-73
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 37.2\. 添加了三个按钮、一个文本框和一个标签后的窗口。最上面的按钮是红色的，上面写着 Red，中间的按钮是黄色的，上面写着 Yellow，下面的按钮是绿色的，上面写着
    Green。
- en: '![](images/37fig02_alt.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](images/37fig02_alt.jpg)'
- en: You can add many widgets to your programs. The ones that come with the standard
    tkinter library are listed in [table 37.1](#ch37table01).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在程序中添加许多小部件。标准 tkinter 库中包含的小部件列在[表 37.1](#ch37table01)中。
- en: Table 37.1\. Widgets available in tkinter
  id: totrans-76
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 37.1\. tkinter 中可用的小部件
- en: '| Widget name | Description | Widget name | Description |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| 小部件名称 | 描述 | 小部件名称 | 描述 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Button | Shows a button | Menubutton | Shows menus |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| 按钮 | 显示一个按钮 | 菜单按钮 | 显示菜单 |'
- en: '| Canvas | Draws shapes | OptionMenu | Shows a pop-up menu |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| 画布 | 绘制形状 | 选项菜单 | 显示弹出菜单 |'
- en: '| Checkbutton | Shows options via checkboxes (can select more than one option)
    | PanedWindow | Contains window panes that can be resized |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| 复选框 | 通过复选框显示选项（可以选中多个选项） | 分割窗口 | 包含可以调整大小的窗口面板 |'
- en: '| Entry | A text field the user can type text in | Radiobutton | Shows options
    via radio buttons (can select only one option) |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| 输入框 | 用户可以输入文本的文本字段 | 单选按钮 | 通过单选按钮显示选项（只能选择一个选项） |'
- en: '| Frame | Container to put other widgets in | Scale | Shows a slider |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| 框架 | 放置其他小部件的容器 | 滑块 | 显示滑块 |'
- en: '| Label | Shows single line of text or an image | Scrollbar | Adds scrollbars
    to other widgets |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| 标签 | 显示单行文本或图像 | 滚动条 | 为其他小部件添加滚动条 |'
- en: '| LabelFrame | Container to add space | Spinbox | Like an Entry, but can select
    only from some text |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| 标签框架 | 添加空间的容器 | 滚动条 | 为其他小部件添加滚动条 |'
- en: '| Listbox | Shows options via a list | Text | Shows multiple lines of text
    |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| 列表框 | 通过列表显示选项 | 文本 | 显示多行文本 |'
- en: '| Menu | Shows commands (contained inside Menubutton) | TopLevel | Allows for
    a separate window container |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| 菜单 | 显示命令（包含在菜单按钮内） | 顶层窗口 | 允许有单独的窗口容器 |'
- en: '|  |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 37.3**'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 37.3**'
- en: '**[Q1:](kindle_split_056.html#app01qa148q0a1)**'
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa148q0a1)**'
- en: ''
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Write a line that creates each of the following:'
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一行代码以创建以下内容：
- en: ''
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: An orange button with the text Click here
  id: totrans-94
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个带有文本“点击此处”的橙色按钮
- en: Two radio buttons
  id: totrans-95
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个单选按钮
- en: A checkbutton
  id: totrans-96
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个复选框
- en: '|  |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 37.4\. Adding event handlers
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 37.4. 添加事件处理器
- en: At this point, you’ve created GUI windows and added widgets to them. The last
    step is to write code that tells the program what to do when a user interacts
    with the widgets. The code must somehow link the widget to the action.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你已经创建了GUI窗口并将控件添加到其中。最后一步是编写代码，告诉程序当用户与控件交互时程序应该做什么。代码必须以某种方式将控件与操作链接起来。
- en: When you create a widget, you give it the name of a command you want to run.
    The command is a function in the same program. The following listing shows an
    example of a code snippet that changes a window’s background color when a button
    widget is clicked.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 当你创建一个控件时，你给它一个你想运行的命令的名称。该命令是同一程序中的函数。以下列表显示了一个示例代码片段，该片段在按钮控件被点击时更改窗口的背景颜色。
- en: Listing 37.3\. Event handler for a button click
  id: totrans-101
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 37.3. 按钮点击事件处理器
- en: '[PRE3]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Function representing the event to happen**'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 表示要发生事件的函数**'
- en: '***2* The function changes the background color of the window.**'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 函数更改窗口的背景颜色。**'
- en: '***3* Button with an associated action, by assigning the function name to the
    command parameter**'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 通过将函数名称分配给命令参数，具有相关操作的按钮**'
- en: '[Figure 37.3](#ch37fig03) shows what the screen looks like after the button
    is clicked. The window is originally gray, but after you click the button, it’s
    white. Clicking the button again doesn’t change the color back to gray; it stays
    white.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 37.3](#ch37fig03) 显示了按钮被点击后的屏幕外观。窗口最初是灰色，但当你点击按钮后，它变成了白色。再次点击按钮不会将颜色改回灰色；它保持白色。'
- en: Figure 37.3\. The window background color changes to white from gray after clicking
    the button.
  id: totrans-107
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 37.3. 点击按钮后，窗口背景颜色从灰色变为白色。
- en: '![](images/37fig03_alt.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](images/37fig03_alt.jpg)'
- en: You can do more interesting things with event handlers. You can apply everything
    you’ve learned so far in the book when you write GUIs. For the final example,
    you’ll write code for a countdown timer. You’ll see how to read information from
    other widgets, use loops in event handlers, and even use another library.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以用事件处理器做更多有趣的事情。当你编写GUI时，你可以应用书中学到的一切。对于最后的例子，你将编写倒计时计时器的代码。你将看到如何从其他控件中读取信息，在事件处理器中使用循环，甚至使用另一个库。
- en: '[Listing 37.4](#ch37ex04) shows a program that reads a number the user enters
    in a text box and then displays a countdown from that number to 0, with the number
    changing every second. There are four widgets in the program:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '[列表 37.4](#ch37ex04) 显示了一个程序，该程序读取用户在文本框中输入的数字，然后从该数字倒计时到0，每秒更改一次数字。程序中有四个控件：'
- en: A label with instructions for the user
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个带有用户说明的标签
- en: A text box for the user to put in a number
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个用户可以输入数字的文本框
- en: A button to start the countdown
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个开始倒计时的按钮
- en: A label to show the changing numbers
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个标签来显示变化的数字
- en: 'The button is the only widget that has an event handler associated with it.
    The function for that event will do the following:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 按钮是唯一一个与其相关联事件处理器的控件。该事件的处理函数将执行以下操作：
- en: Change the color of the label to white
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将标签的颜色更改为白色
- en: Get the number from the text box and convert it to an integer
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从文本框获取数字并将其转换为整数
- en: Use the number from the text box in a loop, starting from that value and ending
    at 0
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用文本框中的数字在循环中使用，从该值开始，到0结束
- en: The bulk of the work is being done inside the loop. It uses the loop variable,
    `i`, to change the text of the label. Notice that you’re giving a variable name
    to the text parameter of the label, whose value changes every time through the
    loop. Then, it calls an update method to refresh the window and show the changes.
    Finally, it uses the `sleep` method from the `time` library to pause execution
    for one second. Without the `sleep` method, the countdown would go so fast that
    you wouldn’t be able to see the changing numbers.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 大部分工作都是在循环内部完成的。它使用循环变量`i`来更改标签的文本。注意，你正在给标签的文本参数赋予一个变量名，其值在每次循环中都会改变。然后，它调用一个更新方法来刷新窗口并显示更改。最后，它使用`time`库中的`sleep`方法暂停执行一秒钟。如果没有`sleep`方法，倒计时会进行得太快，以至于你无法看到数字的变化。
- en: Listing 37.4\. Program that reads a text box and counts down that many seconds
  id: totrans-120
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表37.4\. 读取文本框并倒计时相应秒数的程序
- en: '[PRE4]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '***1* Event handler function**'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 事件处理函数**'
- en: '***2* Changes the label’s color to white**'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 将标签的颜色更改为白色**'
- en: '***3* Gets the value from the text box and converts it to an int**'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 从文本框获取值并将其转换为int**'
- en: '***4* Loops starting from the number in the text box until 0**'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 从文本框中的数字开始循环直到0**'
- en: '***5* Changes the text on the label to the value of the loop variable**'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 将标签上的文本更改为循环变量的值**'
- en: '***6* Updates the window to show the updated value on the label**'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 更新窗口以显示标签上的更新值**'
- en: '***7* Waits one second using the time library**'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***7* 使用time库等待一秒钟**'
- en: '***8* Changes the text of the label to done after reaching 0**'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***8* 在达到0后更改标签的文本为“完成”**'
- en: '***9* One label with instructions for the user**'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***9* 一个带有用户说明的标签**'
- en: '***10* Text box for the user to enter a number**'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***10* 用户输入数字的文本框**'
- en: '***11* Button to start the countdown, with the function written in the first
    line as the event command**'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***11* 启动倒计时的按钮，其功能写在第一行作为事件命令**'
- en: '***12* A label on which to print the countdown**'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***12* 用于打印倒计时的标签**'
- en: With the ability to set up a window, add widgets, and create event handlers,
    you can write many visually appealing and uniquely interactive programs.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 通过设置窗口、添加小部件和创建事件处理程序的能力，你可以编写许多视觉上吸引人且独特交互的程序。
- en: '|  |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 37.4**'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查37.4**'
- en: '**[Q1:](kindle_split_056.html#app01qa149q0a1)**'
  id: totrans-137
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa149q0a1)**'
- en: ''
  id: totrans-138
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write code that creates a button. When clicked, the button randomly chooses
    the color red, green, or blue, and changes the background color of the window
    to the chosen color.
  id: totrans-139
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写代码创建一个按钮。当点击时，按钮随机选择红色、绿色或蓝色，并将窗口的背景颜色更改为所选颜色。
- en: '|  |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Summary
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this lesson, my goal was to teach you how to use a graphical user interface
    library. The library contains classes and methods that help programmers manipulate
    graphical elements of the operating system. Here are the major takeaways:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在本课中，我的目标是教你如何使用图形用户界面库。该库包含帮助程序员操作操作系统图形元素的类和方法。以下是主要收获：
- en: Your GUI program works inside a window.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的GUI程序在窗口内运行。
- en: In the window, you can add graphical elements, called widgets.
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在窗口中，你可以添加称为小部件的图形元素。
- en: You can add functions that perform tasks when a user interacts with the widget.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以添加在用户与小部件交互时执行任务的函数。
- en: Let’s see if you got this...
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看你是否掌握了这些...
- en: '**[Q37.1](kindle_split_056.html#app01qa150q0a1)**'
  id: totrans-147
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q37.1](kindle_split_056.html#app01qa150q0a1)**'
- en: ''
  id: totrans-148
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that stores names, phone numbers, and emails of people in a
    phonebook. The window should have three text boxes for the name, phone, and email.
    Then it should have one button to add a contact, and one button to show all contacts.
    Finally, it should have a label. When the user clicks the Add button, the program
    reads the text boxes and stores the information. When the user clicks the Show
    button, it reads all the contacts stored and prints them on a label.
  id: totrans-149
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个程序，将人们的姓名、电话号码和电子邮件存储在电话簿中。窗口应包含三个文本框，分别用于姓名、电话和电子邮件。然后应有一个按钮用于添加联系人，还有一个按钮用于显示所有联系人。最后，它应有一个标签。当用户点击添加按钮时，程序会读取文本框并存储信息。当用户点击显示按钮时，它会读取存储的所有联系人并将它们打印在标签上。
