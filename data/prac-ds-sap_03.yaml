- en: Chapter 3\. SAP for Data Scientists
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三章 SAP 数据科学家
- en: Note
  id: totrans-1
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: If you’re an SAP professional, you may not need much of the information in this
    chapter. We’re trying to get data scientists up to speed on things that you probably
    already know.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是 SAP 专业人士，你可能不需要本章的大部分信息。我们正试图让数据科学家了解你可能已经知道的事情。
- en: 'At Big Bonanza Warehouse, Greg and Paul^([1](ch03.html#idm46252724679896))
    make up the entire data science team. They’re surrounded by delicious data everywhere
    they look: plant automation systems, transportation records for customer shipments,
    marketing campaign data, and the copious spreadsheets and Microsoft Access databases
    that seem to sprout up everywhere at big enterprises. They can’t get up to get
    coffee without hearing about another fascinating data opportunity. They’re simultaneously
    overjoyed and swamped: they get to come in and work on interesting problems every
    day, but there’s no way they can ever catch up to the insane backlog of data requests.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Big Bonanza Warehouse，Greg 和 Paul^([1](ch03.html#idm46252724679896)) 组成了整个数据科学团队。无论他们往哪里看，都会看到大量有趣的数据：工厂自动化系统、客户发货的运输记录、营销活动数据以及大型企业中随处可见的大量电子表格和
    Microsoft Access 数据库。他们无法喝咖啡都听到另一个引人入胜的数据机会。他们既感到欣喜若狂又感到不堪重负：他们每天都要处理有趣的问题，但是他们永远也无法赶上堆积如山的数据请求。
- en: Well, of course, there’s one way they could catch up. They could dive in and
    learn SAP.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，他们也有一种赶上来的方法。他们可以深入学习 SAP。
- en: Because SAP is the leviathan that continues to swallow other Big Bonanza Warehouse
    systems whole. As Big Bonanza moves to consolidate its enterprise software resources
    into the SAP portfolio, more of that delicious data disappears into the belly
    of the beast. Greg and Paul know the amount of data—and therefore opportunity—in
    SAP boggles the mind. They just have no idea how to go poking around to get it.
    Talking to SAP end users doesn’t reveal the true data model, and talking to SAP
    administrators hardly goes anywhere, because they’re so incredibly overworked.
    Greg and Paul need a way in.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 SAP 是继续吞并其他大型宝库系统的利维坦。随着 Big Bonanza 将其企业软件资源整合到 SAP 组合中，更多珍贵的数据消失在这头巨兽的腹中。Greg
    和 Paul 知道 SAP 中数据量和机会之多令人难以置信。但他们不知道如何开始探索获取这些数据。与 SAP 最终用户交流无法揭示真正的数据模型，而与 SAP
    管理员交流几乎毫无进展，因为他们的工作负荷实在太大。Greg 和 Paul 需要一种方法来进入这个领域。
- en: Data scientists, listen up. This chapter lays out the SAP basics that will get
    you where you need to go. SAP professionals spent many years becoming familiar
    with the waters of SAP. You will not be able to navigate like Magellan after one
    chapter of a book. This is your way of becoming conversant enough to work with
    your SAP team and SAP data.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 数据科学家们，请注意。本章介绍了 SAP 基础知识，将帮助你达到你想要的目标。SAP 专业人员花了很多年时间熟悉 SAP 的各个方面。阅读一章书后，你不会像马哥伦那样导航。这是你成为与
    SAP 团队和 SAP 数据合作的合格者的方法。
- en: If you’ve ever heard the expression “I know just enough to be dangerous”—that’s
    our goal.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你听过“我知道的只够让我危险”的说法——这正是我们的目标。
- en: Getting Started with SAP
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始学习 SAP
- en: SAP is enterprise resource planning (ERP) software with multiple highly configurable
    capabilities. Enterprises that install and run SAP choose from many possible modules
    (see [Chapter 1](ch01.html#ch01) for a partial list), but the most common release
    of SAP in use is R/3 ERP, a client/server architecture that places heavy application
    processing requirements on application servers.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: SAP 是具有多个高度可配置功能的企业资源规划（ERP）软件。安装并运行 SAP 的企业可以选择多个可能的模块（参见 [第一章](ch01.html#ch01)
    部分清单），但目前最常见的 SAP 版本是 R/3 ERP，这是一个在应用服务器上需要大量应用处理的客户端/服务器架构。
- en: The application servers will almost certainly be set up and maintained by a
    set of administrators known within the SAP community as SAP Basis administrators.
    They specialize in installing and configuring SAP systems to run with high availability.
    SAP Basis administrators perform database administration, server administration,
    scheduling and troubleshooting batch jobs, managing low-level security, patching
    both the application and the base OS that runs the application, and many other
    technical tasks.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 应用服务器几乎肯定由 SAP 社区内被称为 SAP Basis 管理员的一组管理员设置和维护。他们专注于安装和配置 SAP 系统，以实现高可用性运行。SAP
    Basis 管理员执行数据库管理、服务器管理、调度和故障处理批处理作业、管理低级安全性、修补应用程序和运行应用程序的基本操作系统等许多其他技术任务。
- en: Working with SAP means you’ll use the powerful (if a bit antiquated-looking)
    SAP GUI. It’s likely that you will have to get it installed by—or get instructions
    from—your corporate IT department. Most often there are connection settings maintained
    by the Basis team that point your installation to the right servers. Once the
    GUI is installed, you start SAP by opening the SAP GUI Logon Pad ([Figure 3-1](#fig0301)).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 与 SAP 合作意味着您将使用功能强大（尽管看起来有些过时）的 SAP GUI。您很可能需要通过或从公司 IT 部门获得指示来安装它。通常由 Basis
    团队维护的连接设置指向您的安装到正确服务器。一旦 GUI 安装完成，您可以通过打开 SAP GUI 登录板（图 [3-1](#fig0301)）来启动 SAP。
- en: '![](assets/pdss_0301.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0301.png)'
- en: Figure 3-1\. The SAP GUI Logon Pad
  id: totrans-13
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-1\. SAP GUI 登录板
- en: 'If your SAP logon pad has lots and lots of system connections in it, don’t
    fret. This is normal. When you consider that separate systems can be installed
    for many of the SAP R/3 applications, and that each system is present in sandbox,
    development, QA, pre-prod, and production environments, you can see: often there
    are hundreds of possible systems to log into. Knowing where the data you need
    exists among all these systems will probably require at least one initial pointer
    from the SAP experts in your company.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的 SAP 登录板上有许多系统连接，请不要担心，这是正常的。考虑到为许多 SAP R/3 应用程序安装了单独的系统，并且每个系统存在于沙盒、开发、QA、预生产和生产环境中，您可以看到：通常有数百个可能的系统可供登录。了解您需要的数据在所有这些系统中的位置可能需要您公司
    SAP 专家的至少一个初始指引。
- en: 'But once you find the right system, and you get the proper access, you’re ready
    to sign in. Remember: just like in any enterprise system, getting this access
    usually goes through a team of security pros and approvals, and can take anywhere
    from seconds to weeks. Once that’s squared away and you enter your credentials,
    you’ll see something like [Figure 3-2](#fig0302) (though some companies choose
    to put other pictures in the righthand side of the GUI screen).'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 但一旦找到合适的系统并获得适当的访问权限，您就可以准备登录。请记住：就像任何企业系统一样，获取此访问权限通常需要通过安全专业团队的审核，并可能需要几秒到几周的时间。一旦完成并输入您的凭据，您将看到类似于图 [3-2](#fig0302)
    的内容（尽管有些公司选择在 GUI 屏幕右侧放置其他图片）。
- en: '![](assets/pdss_0302.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0302.png)'
- en: Figure 3-2\. The SAP Easy Access screen, ready to run transactions
  id: totrans-17
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-2\. SAP Easy Access 屏幕，准备运行事务
- en: Now you’re ready to do some real exploration. The screen you find yourself at
    initially lets you launch into any of the SAP GUI functionality via the use of
    *transaction codes* (you’ll hear SAP pros refer to them as “t-codes”). The command
    field at the top allows you to manually type t-codes, and all the files and folders
    on the lefthand side are shortcuts to t-codes.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经准备好进行一些真正的探索了。最初出现的屏幕允许您通过顶部的命令字段手动输入 t-code 启动任何 SAP GUI 功能，而左侧的所有文件和文件夹则是
    t-code 的快捷方式。
- en: Think of t-codes as SAP’s internal shortcuts to programs. Entering t-code VA03
    as in [Figure 3-3](#fig0303) will start the SAP program to view sales orders,
    SE37 will take you to the editor for SAP functions, and so on. End users have
    alternative ways of viewing their business t-codes, like web interfaces or mobile
    apps—but data scientists will need to explore the administrative side of the SAP
    application suite.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 将 t-code 理解为 SAP 内部的程序快捷方式。输入 t-code VA03，如图 [3-3](#fig0303) 所示，将启动 SAP 程序查看销售订单；输入
    SE37 将进入 SAP 函数编辑器等。最终用户有通过网页界面或移动应用程序等其他方式查看其业务 t-code 的替代方法，但数据科学家需要探索 SAP 应用套件的管理侧面。
- en: '![](assets/pdss_0303.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0303.png)'
- en: Figure 3-3\. The first screen for displaying and editing sales orders
  id: totrans-21
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-3\. 显示和编辑销售订单的第一个屏幕
- en: As you can see from the VA03 screenshot shown in [Figure 3-3](#fig0303), the
    SAP end user experience can get incredibly confusing. A typical SAP user will
    only need to use a small subset of the available fields for an order. In some
    cases, entering data into a normally unused field can trigger unintended functionality.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如您从图 [3-3](#fig0303) 中看到的 VA03 截图，SAP 终端用户体验可能变得非常混乱。典型的 SAP 用户通常只需使用订单的少量字段。在某些情况下，向通常不使用的字段输入数据可能会触发意外功能。
- en: This is part of what makes the SAP and data science intersection so weird yet
    so interesting. There’s *so much* data to be had from SAP. Where do you find it?
    How would you even know it’s there?
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这正是使 SAP 和数据科学交汇如此奇怪却又如此有趣的部分。从 SAP 中可以获取到大量数据。您从哪里找到它？您甚至如何知道它在那里？
- en: For you data scientists, this book will help you answer some of those questions,
    some of the time. For you SAP gurus, rest assured that all that hard-won experience
    and domain knowledge has *immense* value to the data science process.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 对于你们数据科学家，这本书将帮助你们在某些时间回答一些问题。对于你们SAP专家，放心，所有那些辛苦赢得的经验和领域知识对数据科学过程有着*巨大*的价值。
- en: The ABAP Data Dictionary
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ABAP数据字典
- en: One of the great powers of SAP systems is their built-in flexibility for customers
    to add or change delivered functionality. This allows SAP to deliver support packs
    and enhancements that customers can implement for themselves, but also allows
    customers to create their own data objects and programs *inside* the SAP system.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: SAP系统的一个重要功能是其内置的灵活性，允许客户添加或更改交付功能。这使得SAP能够交付支持包和增强功能，供客户自行实施，同时也允许客户在SAP系统*内部*创建自己的数据对象和程序。
- en: SAP systems lay out a process for letting customers define custom data objects.
    The collection of tools, objects, and processes is commonly referred to as the
    *ABAP Data Dictionary.* Data scientists and other programmers are probably familiar
    with common SQL commands for creating data types and tables. SAP provides the
    same functionality in concept, but in fact turbo-charges it. Data definition changes
    instantly impact the system’s raw application functionality. For example, by altering
    the definition of a field in an SAP table, you can make a screen immediately give
    the user a friendly drop-down list of values for an input field.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: SAP系统为让客户定义自定义数据对象规定了一个过程。这些工具、对象和流程的集合通常称为*ABAP数据字典*。数据科学家和其他程序员可能熟悉用于创建数据类型和表的常见SQL命令。SAP在概念上提供了相同的功能，但实际上对其进行了加强。数据定义的变更立即影响系统的原始应用功能。例如，通过修改SAP表中字段的定义，您可以立即使屏幕为用户提供一个友好的下拉列表，用于输入字段的值。
- en: We’ll go over some of the main pieces of the ABAP Data Dictionary here, since
    they are of great use in sleuthing out what data is in the systems you can access.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在这里介绍ABAP数据字典的一些主要部分，因为它们在解析您可以访问的系统中的数据时非常有用。
- en: Tip
  id: totrans-29
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Tip
- en: With great power comes great responsibility! You data scientists out there peeking
    into SAP for the first time should avoid the temptation to edit SAP data dictionary
    objects. If your administrators have given you developer access, you may find
    that you have the right permissions to do this. Don’t!
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 强大的功能伴随着巨大的责任！那些第一次窥探SAP的数据科学家们应该避免编辑SAP数据字典对象的诱惑。如果管理员给了您开发者访问权限，您可能会发现自己有权进行此操作。但请不要这样做！
- en: Changing data dictionary objects can lead to instability across many areas of
    the system. The authors have seen an unwise data dictionary change require an
    entire SAP instance to be restored from a backup. It should tell you something
    that the most seasoned SAP veterans are also the most paranoid to touch data dictionary
    objects.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 更改数据字典对象可能会导致系统多个区域的不稳定性。作者曾见过一次不明智的数据字典更改导致整个SAP实例必须从备份中恢复。可以告诉你的是，最有经验的SAP老手也是最谨慎触碰数据字典对象的人。
- en: Tables
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Tables
- en: In most SAP systems the application runs on top of a traditional RDBMS like
    Microsoft SQL Server, Oracle, or IBM DB2\. Rather than directly editing those
    database systems to make changes to them, SAP gives users several t-codes that
    can view and change the system DB. In the last few years SAP has released its
    own RDBMS, called HANA. It’s gaining a foothold in SAP environments around the
    world, but as of this writing it’s not a majority shareholder of the market for
    SAP databases. Later in this chapter we’ll show an example of creating a data
    service for HANA systems.^([2](ch03.html#idm46252724629800))
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数SAP系统中，应用程序运行在像Microsoft SQL Server、Oracle或IBM DB2这样的传统RDBMS之上。与直接编辑这些数据库系统以进行更改不同，SAP为用户提供了几个可以查看和更改系统数据库的事务代码。在过去几年中，SAP推出了自己的RDBMS，称为HANA。它正在全球SAP环境中获得立足点，但截至目前尚未成为SAP数据库市场的主要股东。在本章的后面，我们将展示为HANA系统创建数据服务的示例。^([2](ch03.html#idm46252724629800))
- en: Let’s examine a couple of SAP tables in depth. Go to t-code SE11 and enter VBAK
    into the Database Table field. Click the Display button, and the table definition
    is displayed as in [Figure 3-4](#fig0304).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入研究一些SAP表。转到事务码SE11，输入VBAK到数据库表字段中。点击显示按钮，表定义如[图3-4](#fig0304)所示。
- en: '![](assets/pdss_0304.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0304.png)'
- en: Figure 3-4\. The VBAK table definition in t-code SE11
  id: totrans-36
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 3-4\. 在事务码SE11中的VBAK表定义
- en: 'VBAK is a *transparent table*, which means that the fields and other information
    presented on the screen match one-to-one with the table in the lower-level RDBMS.
    This is way better than staring at some DDL statement in SQL. SAP also allows
    two other sorts of tables: pooled and cluster. For the purposes of this book we
    don’t need to go into a lot of details, but understand that SAP pooled and cluster
    tables are not one-to-one with the lower-level RDBMS tables, so the screen does
    not show a perfect representation of how the data is physically stored in the
    database. For most programming tasks in SAP, this distinction doesn’t matter much.^([3](ch03.html#idm46252724623528))'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: VBAK 是一个*透明表*，这意味着屏幕上显示的字段和其他信息与底层的关系数据库管理系统中的表一一对应。这比在 SQL 中盯着某些 DDL 语句好得多。SAP
    还允许另外两种类型的表：汇总和集群。对于本书的目的，我们不需要详细讨论，但要理解 SAP 汇总和集群表与关系数据库管理系统表不是一一对应的，因此屏幕显示的数据物理存储方式并不完全代表数据库中数据的物理存储方式。对于
    SAP 中的大多数编程任务，这种区别并不太重要。^([3](ch03.html#idm46252724623528))
- en: Note
  id: totrans-38
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: 'VBAK is the sales order header table. VBAP is a sales order item table. As
    you hunt around SAP tables, remember: SAP is German software. Ks often stand for
    “Kopf” or head. Ps often stand for “Position” or item.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: VBAK 是销售订单头表。VBAP 是销售订单行项目表。在查找 SAP 表时，请记住：SAP 是德国软件。K 通常代表“Kopf”或头部。P 通常代表“Position”或项目。
- en: The SAP GUI lists out the fields that are part of this table in the lower section,
    with their data types and lengths. The Field column gives you the name of the
    field in the database—MANDT in our first example row. Rows that have the Key checkbox
    checked are enforced to be unique together, so in our example MANDT and VBELN
    must be unique in combination before a record is written to this table. The Data
    Element column identifies the referencing data object type, further specified
    by the Data Type, Length, and Decimals columns. For data scientists trying to
    identify a field’s purpose, the Short Description column gives you just that.
    If you scroll to the bottom of the list of fields, you may see one or more fields
    with Y or Z prefixes to their names. This indicates fields that the company has
    added to the delivered database tables, since data scientists may need to collect
    other unique data inside the SAP system.^([4](ch03.html#idm46252724620072)) SAP
    segments these fields by using a Y or Z to name them. But those new fields do
    actually become part of the underlying database table when they are added.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: SAP GUI 列出了此表的字段在底部部分，包括它们的数据类型和长度。字段列给出了数据库中字段的名称——在我们的第一个示例行中是 MANDT。选中 Key
    复选框的行必须在记录写入表之前以组合形式唯一，因此在我们的示例中，MANDT 和 VBELN 必须唯一。数据元素列标识引用数据对象类型，进一步由数据类型、长度和小数点列指定。对于试图确定字段用途的数据科学家，简短描述列提供了这一点。如果你滚动到字段列表底部，可能会看到一个或多个字段名称带有
    Y 或 Z 前缀。这表示公司已向交付的数据库表中添加了字段，因为数据科学家可能需要在 SAP 系统中收集其他唯一数据。^([4](ch03.html#idm46252724620072))
    SAP 使用 Y 或 Z 来命名这些字段。但是，这些新字段确实在添加时成为底层数据库表的一部分。
- en: T-code SE11 gives you another valuable feature when searching for SAP data.
    There’s an “Indexes…” button near the top. This lets you know which fields are
    optimized for searching this table, an incredibly important note when considering
    some of the larger SAP tables. Indices are another key point of flexibility—the
    SAP application lets you add your own indices to the base system tables to improve
    search performance. Indices aren’t perfect, though. They can incur a performance
    cost, so be cautious and pragmatic when adding your own to the SAP tables.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: T-code SE11 在搜索 SAP 数据时提供了另一个有价值的功能。顶部附近有一个“Indexes…”按钮。这让你知道哪些字段被优化用于搜索此表，这在考虑某些较大的
    SAP 表时非常重要。索引是灵活性的另一个关键点——SAP 应用程序允许你向基本系统表中添加自己的索引以提高搜索性能。然而，索引并不完美。它们可能会造成性能成本，因此在向
    SAP 表添加自己的索引时要谨慎和实用。
- en: If our intrepid data scientists Greg and Paul need to examine a particular set
    of sales orders to see what sort of data exists in their system, they can use
    t-code SE16 (General Table Display) or the newer SE16N as shown in [Figure 3-5](#fig0305).
    Knowing that VBAK is the order header table on a tip from their SAP colleagues,
    they can enter search criteria in the lower section, and view results. Note that
    they can restrict the number of records returned—great for discovering if they’re
    searching for the right things without having to wait for 30 million rows to return
    to the screen. SE16/SE16N are better designed for viewing the data in tables,
    whereas SE11 is better for inspecting setup details of the tables.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们勇敢的数据科学家 Greg 和 Paul 需要检查特定的销售订单集以查看系统中存在的数据类型，他们可以使用 t-code SE16（通用表显示）或较新的
    SE16N，如[图 3-5](#fig0305)所示。知道 VBAK 是订单头表的提示来自他们的 SAP 同事，他们可以在下部分输入搜索条件，并查看结果。请注意，他们可以限制返回的记录数量，这对于发现他们是否在等待
    3000 万行返回到屏幕上以确定他们是否正在搜索正确的内容非常有用。SE16/SE16N 更适合查看表中的数据，而 SE11 更适合检查表的设置详细信息。
- en: '![](assets/pdss_0305.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0305.png)'
- en: Figure 3-5\. The VBAK table displayed in SE16N, for querying
  id: totrans-44
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-5\. 在 SE16N 中显示的 VBAK 表，用于查询
- en: Structures
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 结构
- en: SE11 is also used to define SAP structures. Structures are groups of fields
    defined in the dictionary that provide common ways to refer to data in SAP ABAP
    code. In [“OData Services”](#odata_services), we use a dictionary-defined structure
    to hold SAP physical plant data. If you define a structure in the dictionary as
    in [Figure 3-6](#fig0306), programs all over the SAP system can use that structure
    to create internal variables. Structures do not persist data permanently in and
    of themselves; they’re just the cookie-cutter that stamps out data cookies.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: SE11 还用于定义 SAP 结构。结构是在字典中定义的字段组，提供了在 SAP ABAP 代码中引用数据的常用方式。在[“OData 服务”](#odata_services)中，我们使用字典定义的结构来保存
    SAP 物理工厂数据。如果像[图 3-6](#fig0306)中那样在字典中定义了一个结构，那么整个 SAP 系统中的程序都可以使用该结构来创建内部变量。结构本身并不永久保留数据；它们只是用于生成数据的模板。
- en: '![](assets/pdss_0306.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0306.png)'
- en: Figure 3-6\. Structure view of t-code SE11
  id: totrans-48
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-6\. 在 t-code SE11 中的结构视图
- en: The visual is very similar to the table view. You can review the field names,
    data types, and some basic descriptions. As a data scientist you probably won’t
    find yourself defining new structures very often, but the nice thing is that defining
    your own structures carries far less risk than redefining the base application
    tables. For an example, in [Chapter 5](ch05.html#anomaly_detection_with_r_and_python),
    you’ll learn about anomaly detection, where we define our own structure to use
    for extracting data from SAP.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 视觉效果非常类似于表视图。您可以查看字段名称、数据类型和一些基本描述。作为数据科学家，您可能不会经常定义新的结构，但好处是定义自己的结构比重新定义基本应用表的风险要小得多。例如，在[第
    5 章](ch05.html#anomaly_detection_with_r_and_python)中，您将了解到异常检测，我们将定义自己的结构以用于从
    SAP 提取数据。
- en: Data Elements and Domains
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据元素和域
- en: The SAP application layer uses data elements as the lowest-level piece of structures
    and table definitions (outside of elementary types like integers and strings).
    They can be used in structures, tables, and programs all over the system, making
    them a key part of the flexibility of available in custom dictionary definitions.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: SAP 应用层使用数据元素作为结构和表定义（除了像整数和字符串这样的基本类型之外）的最低级别部分。它们可以在整个系统中的结构、表和程序中使用，这使它们成为定制字典定义中灵活性的关键部分。
- en: Data elements are also defined in SE11 ([Figure 3-7](#fig0307)).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 数据元素也在 SE11 中定义（见[图 3-7](#fig0307)）。
- en: Here, you define a data element as made up of either a predefined elementary
    type or of a domain. In the screenshot shown in [Figure 3-8](#fig0308), the SAP-provided
    LOGSYS data element uses the same-named LOGSYS domain. This comes installed with
    the base system. Whenever possible, use a domain to give your data elements some
    extra power.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您将数据元素定义为预定义的基本类型或域的一部分。在[图 3-8](#fig0308)中显示的屏幕截图中，SAP 提供的 LOGSYS 数据元素使用了同名的
    LOGSYS 域。这是安装在基本系统中的。尽可能使用域来赋予您的数据元素一些额外的功能。
- en: '![](assets/pdss_0307.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0307.png)'
- en: Figure 3-7\. A data element defined in t-code SE11
  id: totrans-55
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-7\. 在 t-code SE11 中定义的数据元素
- en: '![](assets/pdss_0308.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0308.png)'
- en: Figure 3-8\. Domain definition for LOGSYS (in this case, LOGSYS is the domain
    for the LOGSYS data element)
  id: totrans-57
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-8\. LOGSYS 的域定义（在本例中，LOGSYS 是 LOGSYS 数据元素的域）
- en: Domains can act as a kind of sensibility layer on top of data elements. Most
    powerfully, you can define a list of acceptable values for that domain, either
    by hardcoding your list (as shown in [Figure 3-9](#fig0309) for the VBTYP domain),
    or by specifying an SAP table as the definition of possible values for that domain
    (as shown in [Figure 3-10](#fig0310) for the LOGSYS domain).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 域可以作为数据元素之上的一种感性层。最强大的是，您可以为该域定义一个可接受的值列表，无论是通过硬编码列表（如[VBTYP域的图3-9所示](#fig0309)），还是指定一个SAP表作为该域可能值的定义（如[LOGSYS域的图3-10所示](#fig0310)）。
- en: '![](assets/pdss_0309.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0309.png)'
- en: Figure 3-9\. Hardcoded list of acceptable values for the VBTYP domain
  id: totrans-60
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-9\. VBTYP域的硬编码可接受值列表
- en: As you sleuth around in SAP trying to find information about the data, having
    data elements defined with domains can be extremely helpful for finding possible
    values. Knowing the possible values and their meaning grants an immediate boost
    to the insight you’re trying to get about the data at your fingertips. For example,
    if Greg and Paul extract information from the VBTYP field seen in [Figure 3-9](#fig0309),
    the data comes out of SAP with those A, B, C… and so on shortcut values. Greg
    and Paul can quickly translate those values by referring to the domain definition
    of VBTYP.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在SAP中进行信息搜索时，使用域定义的数据元素可以极大地帮助查找可能的值。了解可能的值及其含义会立即提升您对正在查看的数据的洞察力。例如，如果Greg和Paul从[图3-9](#fig0309)中看到的VBTYP字段提取信息，数据将从SAP中提取出这些A、B、C……等快捷值。Greg和Paul可以通过参考VBTYP的域定义快速转换这些值。
- en: '![](assets/pdss_0310.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0310.png)'
- en: Figure 3-10\. Possible values for the LOGSYS domain defined in table TBDLS,
    as configured in SE11
  id: totrans-63
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-10\. 在SE11中配置的TBDLS表中定义的LOGSYS域的可能值
- en: Where-Used
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用位置
- en: We’ve talked about tables, structures, data elements, and domains as the key
    points of defining data in the SAP system. As you explore things and hunt for
    the right set of information to science up your data, one of the most powerful
    tools available is the where-used list, available for all those elements. The
    little weird-looking box with arrows ([Figure 3-11](#weirdbox)) means you can
    hunt around for related information.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经讨论了在SAP系统中定义数据的关键点，包括表、结构、数据元素和域。在您探索和寻找正确信息集的过程中，一个最强大的工具是“使用位置”清单，适用于所有这些元素。带有箭头的小奇怪方框（[图3-11所示](#weirdbox)）表示您可以四处寻找相关信息。
- en: '![](assets/pdss_03in01.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_03in01.png)'
- en: Figure 3-11\. The “where-used” button, to find references to the ABAP object
    you’re looking at
  id: totrans-67
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-11\. “使用位置”按钮，用于查找对您正在查看的ABAP对象的引用
- en: For example, Greg and Paul came to know that the table VBAK is the sales order
    header table. They suspect that other system tables contain valuable related information,
    but don’t know where to find them. They read the short descriptions of the fields
    and decided to drill in further on VBELN.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，Greg和Paul得知表VBAK是销售订单头表。他们怀疑其他系统表中也包含有价值的相关信息，但不知道在哪里找到它们。他们阅读字段的简短描述，并决定进一步深入研究VBELN。
- en: To see how they’d do this, click to highlight the field VBELN, then double-click
    the data element VBELN_VA as in [Figure 3-12](#fig0311). In the Data Element screen,
    click the where-used icon. Choose Table Fields from the dialog that appears as
    in [Figure 3-13](#fig0312), and voila! A listing of other tables that contain
    the VBELN field appears like in [Figure 3-14](#fig0313). Then, with a combination
    of further analysis through the general table display in t-code SE16 and finding
    related data, you can piece together the model you’re looking for from the available
    table data.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看如何执行此操作，请单击以突出显示VBELN字段，然后如[图3-12所示](#fig0311)双击数据元素VBELN_VA。在数据元素屏幕上，单击“使用位置”图标。从出现的对话框中选择“表字段”，如[图3-13所示](#fig0312)，完成！将显示包含VBELN字段的其他表的列表，如[图3-14所示](#fig0313)。然后，通过在t-code
    SE16中进行一般表显示和查找相关数据的结合分析，您可以从可用表数据中组合出您正在寻找的模型。
- en: '![](assets/pdss_0311.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0311.png)'
- en: Figure 3-12\. Choosing data element VBELN_VA for where-used analysis
  id: totrans-71
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-12\. 选择数据元素VBELN_VA进行“使用位置”分析
- en: '![](assets/pdss_0312.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0312.png)'
- en: Figure 3-13\. Restricting the where-used search to just table fields
  id: totrans-73
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-13\. 限制“使用位置”搜索仅限表字段
- en: '![](assets/pdss_0313.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0313.png)'
- en: Figure 3-14\. A partial list of VBELN_VA results for where-used in tables
  id: totrans-75
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-14\. VBELN_VA在表中使用位置的部分列表
- en: The same goes with individual domains and data elements. If your investigation
    has led you to find a data element that you suspect is vital to your data sleuthing,
    you can *where-used* that little guy and find out where else the system uses this
    field. In this way you can find the table in which that data element is used;
    hopefully that table has the data you need.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 个体域和数据元素也是如此。如果您的调查已经让您发现一个您认为对数据调查至关重要的数据元素，您可以“使用它”，找出系统在哪些其他地方使用了这个字段。通过这种方式，您可以找到使用该数据元素的表格；希望这个表格包含您需要的数据。
- en: In addition to uncovering the model structure of SAP tables, you can also often
    discover program elements that support your search. By searching functions, classes,
    and other program objects for your chosen dictionary object, you gain access to
    possible utility functions and reusable code. In several of the later chapters,
    we’ll use SAP functions and tables to show these relationships, but teaching you
    how to write SAP ABAP code is not a main objective of this book.^([5](ch03.html#idm46252724555912))
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 除了揭示 SAP 表的模型结构外，您还经常可以发现支持您搜索的程序元素。通过搜索函数、类和其他程序对象来查找您选择的字典对象，您可以访问可能的实用函数和可重复使用的代码。在本书的几个后续章节中，我们将使用
    SAP 函数和表来展示这些关系，但教授您如何编写 SAP ABAP 代码并非本书的主要目标。^([5](ch03.html#idm46252724555912))
- en: ABAP QuickViewer
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ABAP QuickViewer
- en: Most often you’ll want to view data from multiple tables. For instance, you
    may want to see purchase order data—but like most data in SAP, it’s split out
    by the header and the item. If you were to use SE16 or SE16N you’d need to query
    data from both EKKO and EKPO^([6](ch03.html#idm46252724543960))—not the most effective
    method. To further complicate things, there are hundreds of fields on each of
    these tables—the vast majority of which you won’t want.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，您可能需要查看来自多个表格的数据。例如，您可能希望查看采购订单数据——但像 SAP 中的大多数数据一样，它按照头和项目进行拆分。如果您使用
    SE16 或 SE16N，您需要从 EKKO 和 EKPO^([6](ch03.html#idm46252724543960)) 查询数据——这并不是最有效的方法。为了进一步复杂化事情，每个表格上有数百个字段——其中绝大多数您都不需要。
- en: 'There’s a better tool to look at multiple related tables: ABAP Quick Viewer.
    This tool allows you to make quick queries that you can view in the SAP GUI or
    extract for another tool. Let’s take a look at a quick example.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个查看多个相关表的更好工具：ABAP Quick Viewer。此工具允许您创建快速查询，您可以在 SAP GUI 中查看或提取到另一个工具中。让我们看一个快速的例子。
- en: Enter t-code `**SQVI**` into the command bar. You will see the Quick Viewer
    Initial Screen as in [Figure 3-15](#fig0314). Put in a name for your query, Purchasing,
    and click on the Create button.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在命令栏中输入事务码`**SQVI**`。您将看到与[图 3-15](#fig0314)相同的 Quick Viewer 初始屏幕。输入查询的名称，采购，并点击“创建”按钮。
- en: '![](assets/pdss_0314.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0314.png)'
- en: Figure 3-15\. The QuickViewer initial screen
  id: totrans-83
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-15\. QuickViewer 初始屏幕
- en: Enter a Title and change the Data Source to Table join. Click on the Enter button
    (the one with a checkmark inside a green circle).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 输入标题并将数据源更改为表连接。点击“输入”按钮（绿色圆圈内有勾号的按钮）。
- en: You will see a blank canvas where you can visualize the tables you work with.
    Click on the Insert Table button ([Figure 3-16](#table)).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到一个空白画布，您可以在其中查看您使用的表格。点击“插入表格”按钮（[图 3-16](#table)）。
- en: '![](assets/pdss_03in04.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_03in04.png)'
- en: Figure 3-16\. The Insert Table button
  id: totrans-87
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-16\. 插入表格按钮
- en: In the Add Table dialog ([Figure 3-17](#fig0315)) enter the primary table EKKO
    for the query. Click on the Enter button.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在“添加表格”对话框（[图 3-17](#fig0315)）中，输入查询的主表 EKKO。点击“输入”按钮。
- en: '![](assets/pdss_0315.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0315.png)'
- en: Figure 3-17\. Add a table to the QuickViewer setup
  id: totrans-90
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-17\. 向 QuickViewer 设置中添加表格
- en: You will now see on the canvas the primary table you selected. Click on the
    Insert Table button again to add another table—EKPO. Click on the Enter button
    again to accept it.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您会在画布上看到您选择的主表。再次点击“插入表格”按钮以添加另一个表格——EKPO。再次点击“输入”按钮以接受它。
- en: SAP tries to detect the proper relationship between the two tables and displays
    the result on the canvas; however, it doesn’t always get it quite right. [Figure 3-18](#fig0316)
    shows that there are two relationships between EKKO and EKPO—specifically, EKKO-EBELN
    to EKPO-EBELN and EKKO-LPONR to EKPO-EBELP. The second of these is not correct
    (for our purposes) and needs to be removed.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: SAP 试图检测两个表之间的正确关系，并在画布上显示结果；然而，它并不总是完全正确。[图 3-18](#fig0316) 显示 EKKO 和 EKPO
    之间存在两种关系——具体来说，EKKO-EBELN 到 EKPO-EBELN 和 EKKO-LPONR 到 EKPO-EBELP。第二个关系（对于我们的目的）不正确，需要删除。
- en: '![](assets/pdss_0316.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0316.png)'
- en: Figure 3-18\. Two automatically proposed relationships between EKKO and EKPO
  id: totrans-94
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-18\. EKKO 和 EKPO 之间的两个自动建议关系
- en: Right-click the connection to be removed and select “Delete Link” from the context
    menu.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 右键单击要删除的连接，并从上下文菜单中选择“删除链接”。
- en: '![](assets/pdss_0317.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0317.png)'
- en: Figure 3-19\. Context menu for link
  id: totrans-97
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-19\. 链接的上下文菜单
- en: Now that the relationship is correct, click on the Back button to see a screen
    like [Figure 3-20](#fig0318), and select the fields. On the right is a list of
    the available fields. There are hundreds of them, but we only want a few. Click
    on the ones desired and then click on the Add Field button.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在关系正确了，点击“返回”按钮，会看到一个类似[图 3-20](#fig0318)的屏幕，并选择字段。右侧是可用字段的列表。有数百个字段，但我们只需要几个。点击所需字段，然后点击“添加字段”按钮。
- en: '![](assets/pdss_0318.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0318.png)'
- en: Figure 3-20\. QuickViewer field selection
  id: totrans-100
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-20\. QuickViewer字段选择
- en: The selected fields ([Figure 3-21](#fig0319)) will move to the left panel.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 选择的字段（[图 3-21](#fig0319)）将移动到左侧面板。
- en: '![](assets/pdss_0319.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0319.png)'
- en: Figure 3-21\. Fields selected in QuickViewer
  id: totrans-103
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-21\. 在QuickViewer中选择的字段
- en: Click on the “Selection fields” tab shown in [Figure 3-21](#fig0319), and select
    those fields by which you want to query the data ([Figure 3-22](#fig0320)). For
    instance, we only want to filter our data by date so we’ll select “Date on which
    the record was created” and move that value to the left as we did earlier.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“选择字段”选项卡（如[图 3-21](#fig0319)所示），并选择要查询数据的字段（[图 3-22](#fig0320)）。例如，我们只想按日期筛选我们的数据，因此我们将选择“记录创建日期”并将该值移动到左侧，就像我们之前做的那样。
- en: '![](assets/pdss_0320.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0320.png)'
- en: Figure 3-22\. Selecting the fields for display
  id: totrans-106
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-22\. 选择显示的字段
- en: That’s it! The query is ready to go! Click on the Save button to save your work.
    Next click on the Execute button to test it.^([7](ch03.html#idm46252724515128))
    You will see a simple report with only the selection criteria we specified. Put
    in a date range for purchase orders and then click on the Execute button. SAP
    shows a simple table report (as in [Figure 3-23](#fig0321)) of the purchasing
    details you requested.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样！查询准备就绪！点击“保存”按钮保存您的工作。接下来点击“执行”按钮进行测试。^([7](ch03.html#idm46252724515128))
    您将看到一个简单的报告，只包含我们指定的选择标准。输入采购订单的日期范围，然后点击“执行”按钮。SAP将显示您请求的采购详细信息的简单表格报告（如[图 3-23](#fig0321)）。
- en: '![](assets/pdss_0321.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0321.png)'
- en: Figure 3-23\. Results of QuickViewer query
  id: totrans-109
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-23\. QuickViewer查询结果
- en: This toolbar is found throughout SAP and is part of nearly all standard reports.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 此工具栏在整个SAP中都可以找到，并且几乎所有标准报表都包含在内。
- en: '![](assets/pdss_03in07.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_03in07.png)'
- en: Notice in particular the Export button. When you click on it you are given a
    number of options for exporting the data ([Figure 3-24](#fig0322)). Selecting
    Local File will then take you to the local file options ([Figure 3-25](#fig0323)).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 特别注意导出按钮。当您点击它时，会显示一些导出数据的选项（[图 3-24](#fig0322)）。选择“本地文件”将带您到本地文件选项（[图 3-25](#fig0323)）。
- en: '![](assets/pdss_0322.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0322.png)'
- en: Figure 3-24\. Query export options
  id: totrans-114
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-24\. 查询导出选项
- en: '![](assets/pdss_0323.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0323.png)'
- en: Figure 3-25\. Local file options
  id: totrans-116
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-25\. 本地文件选项
- en: As a data scientist you already know how to import tab-delimited files into
    R, Python, or Weka. The ABAP Quick Viewer provides an easy way to do some initial
    data exports and crucial exploratory data analysis. By using this technique, you
    can quickly get data out of SAP and perform proof-of-concept without too much
    effort.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 作为数据科学家，您已经知道如何将制表符分隔文件导入到R、Python或Weka中。ABAP Quick Viewer提供了一种简便的方法来进行一些初始数据导出和关键的探索性数据分析。通过使用这种技术，您可以快速地从SAP获取数据，并进行概念验证，而不需要太多的努力。
- en: SE16 Export
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SE16 导出
- en: Now that you can see the data in SAP you want to do some exploratory data analysis
    and visualization in your tool of choice. Perhaps you plan to use R and R Studio
    or the Jupyter Notebook. Maybe even Weka! Let’s get this tabular data pulled out
    from the SAP GUI.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您可以在SAP中看到数据，想要在您选择的工具中进行一些探索性数据分析和可视化。也许您计划使用R和R Studio或Jupyter Notebook。甚至是Weka！让我们从SAP
    GUI中提取这些表格数据。
- en: The General Table Display t-code SE16 comes with this handy toolbar ([Figure 3-26](#fig0324)).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 通用表显示t-code SE16带有这个方便的工具栏（[图 3-26](#fig0324)）。
- en: '![](assets/pdss_0324.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0324.png)'
- en: Figure 3-26\. SE16 General Table Display toolbar options
  id: totrans-122
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-26\. SE16通用表显示工具栏选项
- en: 'There are two buttons of interest to the data scientist: “Open in Excel” (left
    circle) and “Local file” (right circle). They both do what you would expect. The
    “Local file” button offers options on formatting before export.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 数据科学家感兴趣的两个按钮：“在 Excel 中打开”（左圆圈）和“本地文件”（右圆圈）。它们的功能都符合您的预期。在导出之前，“本地文件”按钮提供格式化选项。
- en: A data scientist that has access to a raw data file is a happy data scientist.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 有权访问原始数据文件的数据科学家是一位快乐的数据科学家。
- en: OData Services
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OData 服务
- en: Now that you know a bit about how to find the right data and manually pull it
    out, let’s look at how to reproduce that data pull and make it externally available.
    Recall from [Chapter 1](ch01.html#ch01) that OData services have advantages for
    data extraction.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经了解了如何找到正确的数据并手动提取它，让我们看看如何再现该数据提取并使其外部可用。回想一下第一章提到的，OData 服务在数据提取方面有其优势。
- en: They fit the popular REST paradigm.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们符合流行的 REST 范式。
- en: They expose data services to any device/client that can make HTTP calls.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们将数据服务暴露给任何能够进行 HTTP 调用的设备/客户端。
- en: They allow for filtering and paging through result data.
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们允许通过结果数据进行过滤和分页。
- en: 'Now that we know how data dictionary objects are defined, we can use that to
    build the components of a simple OData service using SAP NetWeaver Gateway. A
    few things to keep in mind before we begin:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道如何定义数据字典对象，我们可以利用它来构建一个简单的 OData 服务的组件，使用 SAP NetWeaver Gateway。在我们开始之前，有几件事情需要记住：
- en: Gateway architecture
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: Gateway 架构
- en: Some SAP installations use a separate system to run the Gateway component, and
    others use Gateway installed right into the same system as all the ERP modules.
    For simplicity, we’ll assume we’re on the same system as all the modules, and
    just note when there may be some differences.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 一些 SAP 安装使用单独的系统来运行 Gateway 组件，而其他一些则将 Gateway 安装在与所有 ERP 模块相同的系统中。为简单起见，我们假设我们在与所有模块相同的系统上，并且只在可能存在差异时进行注释。
- en: ABAP programming
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: ABAP 编程
- en: We’ll minimize the amount of code written for our example. As mentioned earlier,
    this book is not an ABAP primer. Hopefully you data scientists out there won’t
    have to spend a lot of time learning the language when all you really need is
    the data.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将尽量减少我们示例中编写的代码量。正如前面提到的，本书不是 ABAP 入门指南。希望各位数据科学家在不必花费大量时间学习语言的情况下能够获得所需的数据。
- en: Security matters
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 安全问题
- en: By default, most companies that run NetWeaver Gateway run it behind the corporate
    firewall. You will likely need a computer running inside the corporate network
    to make use of the OData services you create. It is possible to expose them to
    the broader internet, but do heed the advice of your security team in coming up
    with the best way to secure and monitor the APIs as they’re created.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，大多数运行 NetWeaver Gateway 的公司将其部署在企业防火墙之后。您可能需要一台运行在企业网络内部的计算机来使用您创建的 OData
    服务。虽然可以将其暴露给更广泛的互联网，但请务必听取安全团队的建议，找到最佳的安全和监控 API 的方法。
- en: Other OData capabilities
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 其他 OData 功能
- en: OData also allows for the full RESTful set of operations—create/read/update/delete—if
    they’re programmed in. We will only make use of and explain the read capabilities
    as they’re most pertinent to this book, but if your scenarios expand to other
    data gathering and analysis, OData is a great place to start creating those capabilities.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: OData 还允许完整的 RESTful 操作集（创建/读取/更新/删除），只要它们被编程实现。我们将仅利用和解释读取能力，因为它们对本书最相关，但如果您的场景扩展到其他数据收集和分析，OData
    是创建这些能力的绝佳起点。
- en: Since we’ll use OData for other use cases throughout this book, let’s do a simple
    example just to show how to set things up. We’ll make a simple service that returns
    a listing of all the plants configured in the SAP ERP system.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将在本书中的其他用例中使用 OData，让我们做一个简单的示例来展示设置的方法。我们将创建一个简单的服务，返回配置在 SAP ERP 系统中的所有工厂的列表。
- en: First, we’ll create a structure to define the shape of the data we’ll serve
    out. Start by going to t-code SE11 and clicking on the radio button next to “Data
    type.” Enter `**ZEXAMPLE_PLANT**` in the field next to it, and then click the
    Create button, as in [Figure 3-27](#fig0325).
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将创建一个结构来定义我们将提供的数据形状。在 t-code SE11 中，点击“数据类型”旁边的单选按钮。在其旁边的字段中输入 `**ZEXAMPLE_PLANT**`，然后点击“创建”按钮，如图
    [3-27](#fig0325) 所示。
- en: '![](assets/pdss_0325.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0325.png)'
- en: Figure 3-27\. Defining a new structure in SE11
  id: totrans-142
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-27\. 在 SE11 中定义一个新结构
- en: 'When you click Create, you’ll see an option for one of three kinds of types:
    Data Element, Structure, and Table Type. Choose Structure as in [Figure 3-28](#fig0326)
    and click the checkmark to continue.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 当您点击创建时，将会看到三种类型之一的选项：数据元素、结构和表类型。选择结构如同[图 3-28](#fig0326)所示，并点击勾选继续。
- en: '![](assets/pdss_0326.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0326.png)'
- en: Figure 3-28\. Structure type selection
  id: totrans-145
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-28\. 结构类型选择
- en: On the next screen ([Figure 3-29](#fig0327)), you define the actual fields that
    go into the structure. Keep it simple and define only plant and description fields.
    When you’re done, click the magic wand button to activate this structure. This
    will make it so that the structure is available to outside programs. Note that
    you’re required to enter a description of the structure itself in the top section.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个屏幕（[图 3-29](#fig0327)）上，您定义实际进入结构的字段。保持简单，仅定义植物和描述字段。完成后，点击魔术棒按钮激活此结构。这将使该结构可供外部程序使用。请注意，您需要在顶部部分输入结构本身的描述。
- en: '![](assets/pdss_0327.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0327.png)'
- en: Figure 3-29\. Plant and Description fields defined for our new ZEXAMPLE_PLANT
    structure
  id: totrans-148
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-29\. 我们新的ZEXAMPLE_PLANT结构定义的Plant和Description字段
- en: 'How did we know what types and data elements to use for this structure? We
    discovered that plants are stored at the line item level of sales orders in table
    VBAP. Using SE11 to view that table, we found the plant field (WERKS) and its
    associated data element (WERKS_EXT). By clicking into the data element, we found
    the domain that defines WERKS_EXT to be WERKS. We used the properties of that
    domain to discover the table that underlies it: T001W ([Figure 3-30](#fig0328)).
    By then opening T001W in its own SE11 session, we found the WERKS and NAME1 fields
    to contain the information that we wanted. Just like we showed you for the data
    dictionary stuff! So for our two fields, PLANT and DESCRIPTION, we use the same
    data elements as the corresponding fields in T001W.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何知道要为此结构使用什么类型和数据元素？我们发现植物存储在销售订单的行项目级别中，存储在表VBAP中。使用SE11查看该表，我们找到了植物字段（WERKS）及其关联的数据元素（WERKS_EXT）。通过点击数据元素，我们找到定义WERKS_EXT的域为WERKS。我们使用该域的属性来发现其底层的表：T001W（[图 3-30](#fig0328)）。然后，在其自己的SE11会话中打开T001W，我们发现WERKS和NAME1字段包含我们想要的信息。就像我们为数据字典的内容所展示的一样！因此，对于我们的两个字段，PLANT和DESCRIPTION，我们使用与T001W中相应字段相同的数据元素。
- en: '![](assets/pdss_0328.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0328.png)'
- en: Figure 3-30\. T001W table defining plants and branches viewed in t-code SE11
  id: totrans-151
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-30\. 在SE11中查看的定义植物和分支的T001W表
- en: Now that we have the right shape of our returned data, let’s set up the OData
    service to feed it. Enter t-code SEGW. This is the Gateway Service Builder ([Figure 3-31](#fig0329)),
    your one stop to set up and maintain OData services. Click the little white paper
    button to start building our service.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经有了返回数据的正确形状，让我们设置OData服务来提供它。输入事务码SEGW。这就是网关服务生成器（[图 3-31](#fig0329)），您设置和维护OData服务的一站式工具。点击小白纸按钮开始构建我们的服务。
- en: '![](assets/pdss_0329.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0329.png)'
- en: Figure 3-31\. The Gateway Service Builder
  id: totrans-154
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-31\. 网关服务生成器
- en: In the pop-up, enter the values as shown in [Figure 3-32](#fig0330). Make sure
    to replace `*[YOUR_USER]*` with your actual user ID (it should be filled in by
    default), then click the checkmark. You’ll see that there’s a skeleton of your
    service created. Now we can plug in the structure we created and automatically
    make it into a part of the service.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在弹出窗口中，按照[图 3-32](#fig0330)中显示的值填入。确保用你的实际用户ID替换`*[YOUR_USER]*`（默认应已填充），然后点击勾选。您将看到服务的骨架已创建。现在我们可以插入我们创建的结构，并自动将其作为服务的一部分。
- en: '![](assets/pdss_0330.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0330.png)'
- en: Figure 3-32\. Naming and defining the SEGW project
  id: totrans-157
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图3-32\. 命名和定义SEGW项目
- en: OData services can have multiple sources of data plugged in to them. These sources
    of data are referred to as *entities* and *entity sets*. Think of an entity as
    defining the single-record structure of a data source endpoint, and an entity
    set as a collection of records matching that structure. A single service can have
    multiple entities and entity sets attached to it, and each entity can choose whether
    to implement some or all of the create/read/update/delete operations. We will
    turn our plant information into one of the available entity sets in our service,
    and only implement the read functionality.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: OData服务可以有多个数据源插入它们。这些数据源称为*实体*和*实体集*。将实体视为定义数据源端点单记录结构的对象，将实体集视为匹配该结构的记录集合。一个服务可以附加多个实体和实体集，并且每个实体可以选择是否实现一些或所有的创建/读取/更新/删除操作。我们将把我们的植物信息转换为服务中可用的实体集之一，并且只实现读取功能。
- en: Right-click the Data Model folder and choose “Import...DDIC Structure” (DDIC
    means “data dictionary”), as shown in [Figure 3-33](#fig0331).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 右键单击数据模型文件夹，选择“导入...DDIC结构”（DDIC表示“数据字典”），如[图 3-33](#fig0331)所示。
- en: In the first step of the wizard ([Figure 3-34](#fig0332)), enter `**Plant**`
    as the name of the entity, enter `**ZEXAMPLE_PLANT**` as the ABAP Structure (remember
    we just created that structure), and make sure Create Default Entity Set is selected.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在向导的第一步（[图 3-34](#fig0332)），将`**Plant**`作为实体的名称输入，将`**ZEXAMPLE_PLANT**`作为ABAP结构输入（记住我们刚刚创建的结构），并确保选择创建默认实体集。
- en: '![](assets/pdss_0331.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0331.png)'
- en: Figure 3-33\. Import DDIC structure
  id: totrans-162
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-33\. 导入DDIC结构
- en: '![](assets/pdss_0332.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0332.png)'
- en: Figure 3-34\. OData setup wizard step 1
  id: totrans-164
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-34\. OData设置向导步骤 1
- en: In the second step ([Figure 3-35](#fig0333)), check all the available fields
    from the structure as imports, and click the Next button.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二步（[图 3-35](#fig0333)），从结构中作为导入的所有可用字段进行检查，并点击“下一步”按钮。
- en: '![](assets/pdss_0333.png)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0333.png)'
- en: Figure 3-35\. OData setup wizard step 2
  id: totrans-167
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-35\. OData设置向导步骤 2
- en: In the final step ([Figure 3-36](#fig0334)), mark the Plant field as the key
    field, as this will be the uniquely identifying piece of information for these
    records. Click Finish.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后一步（[图 3-36](#fig0334)），将Plant字段标记为关键字段，因为这将是这些记录的唯一识别信息。点击“完成”。
- en: What we just did ensures that the structure we created is imported into the
    service as the definition of the Plant entity. The SAP system uses information
    from the structure to ensure that the OData service is properly type-defined.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚所做的确保了我们创建的结构被导入到服务中，作为Plant实体的定义。SAP系统使用结构中的信息来确保OData服务被正确地类型定义。
- en: Next, we generate some data extraction classes. SAP Gateway uses generated classes
    to handle default behavior of the OData services when particular actions (create/read/update/delete)
    are called, and developers can use those generated classes as hooks to implement
    their own unique code and features for the OData services. To generate those classes,
    click the little checkerboarded circle icon (circled in [Figure 3-37](#fig0335)).
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们生成一些数据提取类。SAP Gateway使用生成的类来处理调用特定操作（创建/读取/更新/删除）时OData服务的默认行为，并且开发人员可以使用这些生成的类作为实现自己独特代码和功能的钩子。要生成这些类，请点击小棋盘状圆圈图标（在[图 3-37](#fig0335)中标出）。
- en: '![](assets/pdss_0334.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0334.png)'
- en: Figure 3-36\. OData setup wizard final step
  id: totrans-172
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-36\. OData设置向导最终步骤
- en: '![](assets/pdss_0335.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0335.png)'
- en: Figure 3-37\. Generating base OData classes
  id: totrans-174
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-37\. 生成基本OData类
- en: When this completes, we’re ready to write some brief data retrieval code. Open
    the Service Implementation folder and expand the PlantSet item. Right-click on
    GetEntitySet (Query) and choose Go to ABAP Workbench ([Figure 3-38](#fig0336)).
    You will get a nasty-sounding information popup indicating that a method has not
    yet been implemented. That is OK—that’s what we’re going to do!
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 当完成这一步后，我们准备编写一些简短的数据检索代码。打开服务实现文件夹并展开PlantSet项目。右键单击GetEntitySet（Query）并选择转到ABAP工作台（[图 3-38](#fig0336)）。您将收到一个听起来很恶心的信息弹出窗口，指示某个方法尚未实现。这没关系，这正是我们要做的事情！
- en: '![](assets/pdss_0336.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0336.png)'
- en: Figure 3-38\. Navigating to ABAP Workbench
  id: totrans-177
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-38\. 转到ABAP工作台
- en: You’ll be taken to the class builder screen. Using the lefthand side of the
    screen, navigate to the inherited method PLANTSET_GET_ENTITYSET. Right-click on
    it and choose Redefine, as in [Figure 3-39](#fig0337).
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 您将进入类生成器屏幕。使用屏幕左侧的导航，转到继承方法PLANTSET_GET_ENTITYSET。右键单击它，并选择重新定义，如[图 3-39](#fig0337)所示。
- en: '![](assets/pdss_0337.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0337.png)'
- en: Figure 3-39\. Preparing to redefine OData ABAP code
  id: totrans-180
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 3-39\. 准备重定义 OData ABAP 代码
- en: 'On the righthand side of the screen, you’ll be greeted with a text editor allowing
    you to edit the code of the method. We’re not going to dive all the way into ABAP
    programming here, so just trust us and input the following code and click the
    magic wand to activate the code:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在屏幕右侧，您将看到一个文本编辑器，允许您编辑方法的代码。我们这里不会深入讨论 ABAP 编程，所以请相信我们，并输入以下代码，然后点击魔术棒以激活代码：
- en: '| `METHOD plantset_get_entityset.`'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '| `METHOD plantset_get_entityset.`'
- en: '`SELECT werks AS plant`'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '`SELECT werks AS plant`'
- en: '`name1 AS description`'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '`name1 AS description`'
- en: '`INTO CORRESPONDING FIELDS OF TABLE et_entityset`'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '`INTO CORRESPONDING FIELDS OF TABLE et_entityset`'
- en: '`FROM t001w`'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '`FROM t001w`'
- en: '`ORDER BY werks ASCENDING.`'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '`ORDER BY werks ASCENDING.`'
- en: '`ENDMETHOD.` |'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '`ENDMETHOD.` |'
- en: By entering this code, we’ve done enough to set up the service to have runnable
    code. Now we have to do a couple more steps to get it working as a web service.
    Go to t-code /N/IWFND/MAINT_SERVICE and click the Add Service button near the
    top of the catalog. The next screen will allow you to search, and you may have
    to talk to your local SAP expert to understand your system environment to know
    whether you have to use the local system as the Gateway or if you have a separate
    Gateway server. If you have to use the local system you’ll enter a system alias
    of LOCAL or similar, whereas if you have to use a Gateway hub system then you’ll
    have to find out the right alias to use.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入此代码，我们已经做了足够的工作来设置服务以具备可运行的代码。现在我们需要做一些额外的步骤，使其作为 web 服务正常运行。转到事务码 /N/IWFND/MAINT_SERVICE
    并点击目录顶部的添加服务按钮。下一个屏幕将允许您搜索，您可能需要与本地 SAP 专家沟通，以了解您的系统环境，以确定您是否需要使用本地系统作为网关，还是您有一个单独的网关服务器。如果您需要使用本地系统，则将输入一个系统别名如
    LOCAL 或类似的，而如果您需要使用网关中心系统，则需要找到正确的别名。
- en: 'Click Get Services after entering the alias, and scroll down to our service:
    ZEXAMPLE_PLANT_SRV. Click on the service to see a single-screen activation wizard—just
    accept its defaults and go back to the main service catalog. Now your new service
    will be in the main catalog and ready to test.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在输入别名后，点击获取服务，并向下滚动找到我们的服务：ZEXAMPLE_PLANT_SRV。点击服务以查看单屏激活向导 —— 只需接受其默认设置，并返回到主服务目录。现在您的新服务将出现在主目录中，准备好进行测试。
- en: Scroll down in the list to find ZEXAMPLE_PLANT_SRV, and click on it. At the
    bottom of the screen, you’ll see an “ICF Nodes” section expand like in [Figure 3-40](#fig0338).
    Click the Gateway Client button in that section to be taken to the SAP GUI Gateway
    testing tool.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在列表中向下滚动以找到 ZEXAMPLE_PLANT_SRV，并点击它。在屏幕底部，您将看到一个“ICF 节点”部分展开，如 [Figure 3-40](#fig0338)
    中所示。点击该部分中的 Gateway 客户端按钮，即可进入 SAP GUI 网关测试工具。
- en: '![](assets/pdss_0338.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0338.png)'
- en: Figure 3-40\. Navigating to the Gateway Client
  id: totrans-193
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 3-40\. 导航到网关客户端
- en: Change the request URI to */sap/opu/odata/sap/ZEXAMPLE_PLANT_SRV/PlantSet?$format=json*
    and click Execute. You’ll see JSON-formatted data appear as results of your service
    call as in [Figure 3-41](#fig0339). There you go! You’ve set up a simple, web-callable
    service for getting SAP plant data. OData services we set up in later chapters
    will have more complexity to them, but this initial process will get you off on
    the right foot.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 将请求 URI 更改为 */sap/opu/odata/sap/ZEXAMPLE_PLANT_SRV/PlantSet?$format=json* 并点击执行。您将看到作为服务调用结果的
    JSON 格式化数据，如 [Figure 3-41](#fig0339) 中所示。就这样！您已经设置了一个简单的、可通过 web 调用的服务，用于获取 SAP
    植物数据。我们在后面的章节中设置的 OData 服务会更加复杂，但这个初始过程会让您顺利起步。
- en: '![](assets/pdss_0339.png)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0339.png)'
- en: Figure 3-41\. Results of OData request for our sample service
  id: totrans-196
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 3-41\. 我们示例服务的 OData 请求结果
- en: Core Data Services
  id: totrans-197
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 核心数据服务
- en: As promised earlier in this chapter, here’s a look at making SAP data stored
    in HANA available. Remember, HANA is the new backend database that the latest
    SAP ERP systems run on top of. If your system is new (or newly updated) you may
    have this capability ready to use. If you’re a data science nerd, check with your
    SAP nerd colleagues.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 正如本章前面承诺的那样，这里是使存储在 HANA 中的 SAP 数据可用的一瞥。请记住，HANA 是最新 SAP ERP 系统运行在其上的新后端数据库。如果您的系统是新的（或最近更新的），您可能已经准备好使用此功能。如果您是数据科学爱好者，请与您的
    SAP 同事联系。
- en: Core Data Services (CDS) is a new SAP feature with which a user can develop
    data models that can be exposed to client requests via HTTP. These models can
    be tables, SQL views, associations, and user-defined structures. Think of them
    like the NetWeaver Gateway…but no gateway. They are incredibly powerful and useful
    ways of exposing, modeling, and analyzing SAP data. Their capabilities are one
    of the most compelling reasons for an SAP shop to upgrade to HANA.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 核心数据服务（CDS）是 SAP 的一个新特性，用户可以通过 HTTP 开发可以向客户端请求公开的数据模型。这些模型可以是表、SQL 视图、关联和用户定义的结构。可以将它们看作是
    NetWeaver Gateway……但没有网关。它们是一种极其强大和有用的暴露、建模和分析 SAP 数据的方式。它们的功能是 SAP 店升级到 HANA
    的最具诱惑力的原因之一。
- en: While there are many features to CDS, we’ll stick to a simple sales order data
    extraction example. In order to create these views you will need to install and
    modify Eclipse such that it can be used with SAP. Most ABAP developers have already
    migrated to Eclipse for their development needs, but that was a choice not a requirement.
    CDS views *require* Eclipse.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 CDS 有很多功能，我们将以一个简单的销售订单数据提取示例为例。为了创建这些视图，您需要安装并修改 Eclipse，以便它可以与 SAP 一起使用。大多数
    ABAP 开发人员已经将其开发需求迁移到 Eclipse，但这是一个选择而不是必需的。CDS 视图*需要* Eclipse。
- en: Download the latest version of Eclipse from [*www.eclipse.org*](http://www.eclipse.org)
    and follow the wizard instructions to install it. You will need to install the
    *Eclipse IDE for Java Developers* as a minimum.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 从 [*www.eclipse.org*](http://www.eclipse.org) 下载最新版本的 Eclipse，并按照向导说明安装。您至少需要安装*Java
    开发人员的 Eclipse IDE*。
- en: '![](assets/pdss_03in13.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_03in13.png)'
- en: Once installed, you will need to add some additions to make it work with SAP.
    Launch Eclipse and navigate to the menu path Menu → Install New Software as in
    [Figure 3-42](#fig0340).
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，您需要添加一些附加组件以使其与 SAP 正常工作。启动 Eclipse 并导航到菜单路径菜单 → 安装新软件，如 [图 3-42](#fig0340)。
- en: '![](assets/pdss_0340.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0340.png)'
- en: Figure 3-42\. Installing new add-ons to Eclipse
  id: totrans-205
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-42\. 向 Eclipse 安装新的插件
- en: In the dialog that displays ([Figure 3-43](#fig0341)) enter the URL [*https://tools.hana.ondemand.com/photon*](https://tools.hana.ondemand.com/photon).
    Replace *photon* with the version of Eclipse you are using.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在显示的对话框中（[图 3-43](#fig0341)），输入 URL [*https://tools.hana.ondemand.com/photon*](https://tools.hana.ondemand.com/photon)。用您使用的
    Eclipse 版本替换*photon*。
- en: '![](assets/pdss_0341.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0341.png)'
- en: Figure 3-43\. Choose Eclipse version to download add-ons
  id: totrans-208
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-43\. 选择要下载插件的 Eclipse 版本
- en: Hit Enter to see the options for installation. Then select the components you’d
    like to install. In our example, we are selecting all the SAP options in [Figure 3-44](#fig0342).
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 按 Enter 键查看安装选项。然后选择您想要安装的组件。在我们的示例中，我们选择了 [图 3-44](#fig0342) 中的所有 SAP 选项。
- en: '![](assets/pdss_0342.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0342.png)'
- en: Figure 3-44\. Software selections for installing into Eclipse
  id: totrans-211
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-44\. 安装到 Eclipse 的软件选择
- en: Click on the Next button and wait for the components to install. When finished,
    it will display all the software components it added to the Eclipse environment.
    Click Next again to accept the license agreement and then click on the Finish
    button.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮等待组件安装完成。完成后，它将显示添加到 Eclipse 环境中的所有软件组件。再次点击“下一步”接受许可协议，然后点击“完成”按钮。
- en: When the software is done installing you will need to restart Eclipse. Once
    restarted, click on the Open Perspective button to open up your new SAP environment.
    Select the ABAP perspective as in [Figure 3-45](#fig0343) and then click on the
    Open button.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后需要重新启动 Eclipse。重新启动后，点击“打开透视图”按钮打开新的 SAP 环境。选择 ABAP 透视图如 [图 3-45](#fig0343)，然后点击“打开”按钮。
- en: '![](assets/pdss_0343.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0343.png)'
- en: Figure 3-45\. Choose the ABAP perspective to open Eclipse with the correct SAP
    development settings
  id: totrans-215
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-45\. 选择 ABAP 透视图以使用正确的 SAP 开发设置打开 Eclipse
- en: The first step is to create a CDS document. These are design-time source files
    that contain the DDL (Data Definition Language) code describing the model.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是创建一个 CDS 文档。这些是设计时源文件，包含描述模型的 DDL（数据定义语言）代码。
- en: In Eclipse, follow the menu path File → New → Other ([Figure 3-46](#fig0344)).
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Eclipse 中，按照菜单路径文件 → 新建 → 其他（[图 3-46](#fig0344)）。
- en: '![](assets/pdss_0344.png)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0344.png)'
- en: Figure 3-46\. Selecting a new project for a CDS document
  id: totrans-219
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-46\. 选择一个新的项目用于 CDS 文档
- en: In the dialog window expand the ABAP and the Core Data Services and select the
    Data Definition option ([Figure 3-47](#fig0345)).
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在对话框中展开 ABAP 和 Core Data Services，并选择数据定义选项（[图 3-47](#fig0345)）。
- en: Click on the Next button and accept the default project.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 单击“下一步”按钮并接受默认项目。
- en: Enter a package for the development objects. For our purposes, we will use $TMP,
    which is SAP’s designation for a local/nontransportable object.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 为开发对象输入一个包。对于我们的目的，我们将使用 $TMP，这是 SAP 用于本地/不可传输对象的指定。
- en: Enter a name for your service and a description, then click on the Finish button
    ([Figure 3-48](#fig0346)).
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 为您的服务输入名称和描述，然后单击“完成”按钮（[图 3-48](#fig0346)）。
- en: '![](assets/pdss_0345.png)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0345.png)'
- en: Figure 3-47\. New ABAP repository object for CDS
  id: totrans-225
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-47\. 新的 ABAP 存储库对象用于 CDS
- en: '![](assets/pdss_0346.png)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0346.png)'
- en: Figure 3-48\. Finishing the new CDS data definition
  id: totrans-227
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-48\. 完成新的 CDS 数据定义
- en: In the workspace there are some default annotations. We will change a few and
    add some new ones.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 在工作空间中有一些默认注解。我们将更改一些并添加一些新的。
- en: 'The annotations begin by default:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，注解从此处开始：
- en: '[PRE0]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Change the `sqlViewName` and the `authorizationCheck`:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 更改`sqlViewName`和`authorizationCheck`：
- en: '[PRE1]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Two new annotations are needed:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 需要两个新的注解：
- en: '`@VDM.viewType: #CONSUMPTION`'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: '`@VDM.viewType: #CONSUMPTION`'
- en: Indicates that we want to consume this data definition.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 表明我们要消费此数据定义。
- en: '`@OData.publish: true`'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '`@OData.publish: true`'
- en: Indicates that we want the definition to be published automatically.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 表明我们希望定义能够自动发布。
- en: 'The annotations section should now look like this:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 现在注解部分应如下所示：
- en: '[PRE2]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Now you can set up the shape and relationships of the data. First, define the
    main table to be read:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您可以设置数据的形状和关系。首先，定义要读取的主表：
- en: '[PRE3]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'If there are other tables that are associated with the main table, identify
    and name them:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有其他与主表关联的表格，请识别并命名它们：
- en: '[PRE4]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Identify and name the fields to be extracted from the SAP system. Note we’ve
    included a calculated line to show on-the-fly output for `NetPrice`:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 确定并命名要从 SAP 系统中提取的字段。请注意，我们已包括一个计算行，用于显示即时输出的`NetPrice`：
- en: '[PRE5]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Add any conditions to the selection:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择中添加任何条件：
- en: '[PRE6]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The complete final definition:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的最终定义：
- en: '[PRE7]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Click on the Save button, and then click on the Activate button to publish the
    data definition.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 单击“保存”按钮，然后单击“激活”按钮以发布数据定义。
- en: Test the service by pressing F8\. The results are shown in another tab ([Figure 3-49](#fig0347)).
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 通过按下 F8 键来测试服务。结果将显示在另一个标签页中（[图 3-49](#fig0347)）。
- en: '![](assets/pdss_0347.png)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0347.png)'
- en: Figure 3-49\. CDS data results in Eclipse
  id: totrans-253
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-49\. Eclipse 中的 CDS 数据结果
- en: The service should properly activate. If you happen to receive the following
    warning next to the OData annotation then the service did not actually publish.
    The following steps allow you to manually do so.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 服务应该正确激活。如果您在 OData 注解旁边收到以下警告，则服务实际上没有发布。以下步骤允许您手动执行此操作。
- en: '![](assets/pdss_03in15.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_03in15.png)'
- en: Within Eclipse, click on the SAP GUI button ([Figure 3-50](#fig0348)). Select
    the project to be launched and click the OK button. This is the same project where
    the data definition is made.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Eclipse 中，点击 SAP GUI 按钮（[图 3-50](#fig0348)）。选择要启动的项目，然后点击“确定”按钮。这与创建数据定义的同一项目。
- en: '![](assets/pdss_0348.png)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0348.png)'
- en: Figure 3-50\. Launching SAP GUI with the CDS project
  id: totrans-258
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-50\. 使用 CDS 项目启动 SAP GUI
- en: In the transaction field, enter the transaction code `**/n/iwfnd/maint_service**`
    ([Figure 3-51](#fig0349)).
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 在事务字段中，输入事务代码`**/n/iwfnd/maint_service**`（[图 3-51](#fig0349)）。
- en: '![](assets/pdss_0349.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0349.png)'
- en: Figure 3-51\. Enter the transaction code for maintaining services
  id: totrans-261
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-51\. 输入维护服务的事务代码
- en: Click the Enter button (circled), then click on the Add Service button.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“输入”按钮（圈出），然后点击“添加服务”按钮。
- en: Enter the System Alias, which in our case will be LOCAL, and the Technical Service
    Name as in [Figure 3-52](#fig0350). This is the name of the data definition with
    “_CDS” appended. Then click on the Get Services button.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 输入系统别名，对于我们的情况将是 LOCAL，并输入技术服务名称，如 [图 3-52](#fig0350)。这是数据定义的名称，附加了“_CDS”。然后点击“获取服务”按钮。
- en: '![](assets/pdss_0350.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0350.png)'
- en: Figure 3-52\. Settings for starting the technical service
  id: totrans-265
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-52\. 启动技术服务的设置
- en: The service definition will appear in the report. Highlight the appropriate
    service and click on the Add Selected Services button.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 服务定义将显示在报告中。突出显示适当的服务，并单击“添加所选服务”按钮。
- en: '![](assets/pdss_0351.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0351.png)'
- en: Figure 3-53\. Adding the new service to the Gateway backend services
  id: totrans-268
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-53\. 将新服务添加到 Gateway 后端服务
- en: The last “Add Service” screen appears, as shown in [Figure 3-54](#fig0352).
    Accept the default settings and add the package assignment, which in our case
    is $TMP.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，"添加服务" 屏幕显示如 [图 3-54](#fig0352) 所示。接受默认设置并添加包分配，我们的情况下是 $TMP。
- en: '![](assets/pdss_0352.png)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0352.png)'
- en: Figure 3-54\. Accept defaults and add $TMP package assignment to add the service
    to Gateway
  id: totrans-271
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-54\. 接受默认设置并添加 $TMP 包分配以将服务添加到网关
- en: Click on the Enter button (circled). If all was done correctly, you’ll see the
    message shown in [Figure 3-55](#fig0353).
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 单击输入按钮（环绕）。如果一切操作正确，你将看到在 [图 3-55](#fig0353) 中显示的消息。
- en: '![](assets/pdss_0353.png)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0353.png)'
- en: Figure 3-55\. Successfully creating the CDS OData service
  id: totrans-274
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-55\. 成功创建 CDS OData 服务
- en: Return to the data definition screen with the CDS annotations and click on the
    Activate button ([Figure 3-56](#activate)).
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 返回具有 CDS 注释的数据定义屏幕，然后单击激活按钮（[图 3-56](#activate)）。
- en: '![](assets/pdss_03in18.png)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_03in18.png)'
- en: Figure 3-56\. The activate button let you make your CDS definition usable in
    the SAP system
  id: totrans-277
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-56\. 激活按钮允许你使你的 CDS 定义在 SAP 系统中可用
- en: There is a new *Generated OData Service* indicator next to the OData annotation.
    Put your cursor over that symbol to show a pop-up with the OData-Service details.
    Click on the OData-Service highlighted link like the one in [Figure 3-57](#fig0354)
    to see the OData service definition in your browser.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在 OData 注释旁边有一个新的 *生成的 OData 服务* 指示器。将光标放在该符号上，将显示一个弹出窗口，显示 OData 服务的详细信息。单击类似
    [图 3-57](#fig0354) 中的 OData 服务突出显示链接，可以在浏览器中查看 OData 服务定义。
- en: '![](assets/pdss_0354.png)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/pdss_0354.png)'
- en: Figure 3-57\. OData service publishing results
  id: totrans-280
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 3-57\. OData 服务发布结果
- en: Summary
  id: totrans-281
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概要
- en: Having exhaustively perused the data dictionary, data export, OData, and CDS
    information, Greg and Paul feel ready to dive in to create their SAP data science
    stories!
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 格雷格和保罗详尽地查阅了数据字典、数据导出、OData 和 CDS 信息，他们觉得已经准备好创建他们的 SAP 数据科学故事了！
- en: Data scientists working with SAP data should never forget the real live resources
    available to them. SAP teams working in the enterprise are filled with people
    who know the data model intimately. They also have that wonderfully helpful tribal
    knowledge of how their particular enterprise has customized SAP for its own business
    purposes. Just like hackers who socially engineer passwords from people before
    attempting to crack difficult encryption, data scientists working with SAP should
    seek knowledge from those experienced with SAP before trying to reverse engineer
    all the nooks and crannies of the SAP data model. Inspecting the data dictionary
    as we’ve laid out here will eventually allow you to navigate to the data you need
    for business answers, but it will take serious time. A human being sitting right
    behind you may very likely have all those goofy SAP table names in her head.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 与 SAP 数据一起工作的数据科学家永远不应忘记他们可以利用的真实资源。在企业中工作的 SAP 团队充满了深入了解数据模型的人。他们还具有极富帮助性的部落知识，了解他们所在企业如何定制
    SAP 以适应其业务需求。就像黑客在尝试破解复杂加密之前从人们那里社会工程获取密码一样，与 SAP 工作的数据科学家应该在尝试逆向工程 SAP 数据模型的所有细节之前向那些有经验的
    SAP 人士寻求知识。按照我们在这里描述的方式检查数据字典最终将帮助你找到需要的业务答案所需的数据，但这需要相当长的时间。坐在你身后的人很可能能轻易记住那些怪诞的
    SAP 表名。
- en: ^([1](ch03.html#idm46252724679896-marker)) Please permit us this one instance
    of authorial hubris.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](ch03.html#idm46252724679896-marker)) 请允许我们这一次作者的自豪。
- en: ^([2](ch03.html#idm46252724629800-marker)) Just because we’re nice like that.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: ^([2](ch03.html#idm46252724629800-marker)) 就因为我们是好人。
- en: ^([3](ch03.html#idm46252724623528-marker)) In the newest SAP releases of HANA,
    pooled and clustered tables have been de-pooled and de-clustered. So if you don’t
    understand them, don’t bother—they’re going away.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: ^([3](ch03.html#idm46252724623528-marker)) 在最新的 SAP HANA 发布版本中，汇集和集群表已经取消汇集和取消集群化。因此，如果你不理解它们，不要费心
    — 它们即将消失。
- en: ^([4](ch03.html#idm46252724620072-marker)) We weren’t kidding with that note
    at the beginning of the chapter—only do this if you are an SAP system administrator,
    have system backups, and have performed the required rituals.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: ^([4](ch03.html#idm46252724620072-marker)) 我们在章节开头的注释是认真的 — 只有当你是 SAP 系统管理员、有系统备份并完成必要的仪式时才能执行此操作。
- en: ^([5](ch03.html#idm46252724555912-marker)) Which is good, because it’s not as
    fun as Python or R.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: ^([5](ch03.html#idm46252724555912-marker)) 这很好，因为它不像 Python 或 R 那样有趣。
- en: ^([6](ch03.html#idm46252724543960-marker)) EKKO is the purchase order header
    table and EKPO is for the line items. Notice the “K” and the “P” as mentioned
    earlier?
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: ^([6](ch03.html#idm46252724543960-marker)) **EKKO** 是采购订单头表，而 **EKPO** 则是用于行项目。注意前面提到的
    “K” 和 “P”？
- en: ^([7](ch03.html#idm46252724515128-marker)) At this point you may see a log detail
    dialog box. Just click through it.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: ^([7](ch03.html#idm46252724515128-marker)) 此时可能会看到一个日志详细信息对话框。只需点击继续。
