- en: 'Chapter 7\. Web servers: Building a MediaWiki server'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第7章\. 网络服务器：构建MediaWiki服务器
- en: '*This chapter covers*'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: Building dynamic web servers using Apache
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Apache构建动态网络服务器
- en: Managing backend application data with SQL databases
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用SQL数据库管理后端应用程序数据
- en: Identifying and resolving application package dependencies
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别和解决应用程序包依赖关系
- en: Installing and configuring a MediaWiki CMS
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装和配置MediaWiki CMS
- en: Got a small company blog to publish, or 30 years of technical and corporate
    data spanning 100,000 pages? You’ll need some kind of content management system
    (CMS). In case you’re wondering, a *CMS* is an application designed as a framework
    for the creation and administration of digital content. Popular CMS applications
    you might have encountered include WordPress and Joomla.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 你有一个小型公司博客要发布，或者有跨越30年、100,000页的技术和公司数据？你需要某种内容管理系统（CMS）。如果你在好奇，*CMS*是一种设计为创建和管理数字内容框架的应用程序。你可能遇到的一些流行的CMS应用程序包括WordPress和Joomla。
- en: A *wiki* can be a particularly effective way to manage large communities of
    contributors. It’s a kind of CMS whose architecture is intentionally decentralized,
    allowing users to freely collaborate not only on the content itself, but on the
    larger structure of the entire data collection. A *wiki engine* is a platform
    on which wikis are built, usually using some kind of simple and intuitive markup
    language. MediaWiki is a popular example of an open source wiki engine, but Atlassian
    Confluence is a mature commercial alternative.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '*维基*可以是一种特别有效的管理大量贡献者社区的方式。它是一种其架构有意地分散化的CMS，允许用户不仅自由地协作于内容本身，还可以协作于整个数据集的更大结构。*维基引擎*是构建维基的平台，通常使用某种简单直观的标记语言。MediaWiki是一个流行的开源维基引擎的例子，但Atlassian
    Confluence是一个成熟的商业替代品。'
- en: MediaWiki itself may not be all that important to us right now. I only chose
    to focus on installing MediaWiki because it’s a great way to illustrate the process
    of building a web server (often known as a *LAMP server*) on Linux. Considering
    that more than two of every three web servers on the internet today are running
    on Linux, that’s a big deal.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 目前MediaWiki对我们来说可能并不那么重要。我之所以选择专注于安装MediaWiki，是因为它是一个很好的说明在Linux上构建网络服务器（通常称为*LAMP服务器*）的过程的方法。考虑到今天互联网上超过三分之二的网络服务器都在Linux上运行，这意义重大。
- en: 'Don’t get me wrong: MediaWiki doesn’t lack for charm. It is, after all, the
    CMS originally created to power the tens of millions of articles that make up
    Wikipedia and the other Wikimedia Foundation projects. If you’re looking for a
    robust and reliable way to manage a great deal of media content, whether private
    collections documenting your company’s processes or public-facing help pages,
    you could do a lot worse than MediaWiki. But those specific use cases aren’t common
    enough to justify inclusion in a core-skills kind of book like this one.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 请不要误解：MediaWiki并不缺乏魅力。毕竟，它是最初为支持构成维基百科和其他维基媒体基金会项目的数千万篇文章而创建的CMS。如果你在寻找一种强大且可靠的方式来管理大量媒体内容，无论是记录你公司流程的私人收藏还是面向公众的帮助页面，MediaWiki可能是一个不错的选择。但那些特定用例并不常见，不足以证明在像这本书这样的核心技能书中包含它们的合理性。
- en: Working through a MediaWiki deployment can, however, teach you about the software
    packages that make up a Linux web server and how they fit together to make those
    two out of three websites possible. As a Linux admin, there’s a good chance that
    you’ll be asked to build web servers to support all kinds of applications, so
    you’ve got an interest in learning how to do this stuff, right?
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，通过MediaWiki的部署过程可以让你了解组成Linux网络服务器的软件包，以及它们如何组合起来使那些两到三个网站成为可能。作为一个Linux管理员，你很可能会被要求构建支持各种应用程序的网络服务器，因此你对学习如何做这些事情很感兴趣，对吧？
- en: 7.1\. Building a LAMP server
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1\. 构建LAMP服务器
- en: If you or your business has information, applications, or services, the odds
    are that you’ll want to make them available for consumption by web browsers. A
    *web server* is software running on a computer that allows locally hosted resources
    to be viewed and consumed by visitors to a website. To be clear, the term *web
    server* is also often used to describe the computer hosting the web server software.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你或你的业务有信息、应用程序或服务，那么你很可能希望让它们可以通过网络浏览器进行访问。*网络服务器*是运行在计算机上的软件，它允许本地托管资源被网站访客查看和消费。为了明确，*网络服务器*这个术语也经常用来描述托管网络服务器软件的计算机。
- en: '|  |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Static or dynamic websites?**'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**静态还是动态网站？**'
- en: This section will guide you through the process of building a *dynamic* website.
    That’s a website whose pages are generated with the help of server-side operations.
    It’s also possible to create *static* websites that, for the most part, provide
    only plain HTML files that delegate all the work to the client web browser.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将指导您构建一个**动态**网站的过程。这是一个通过服务器端操作生成页面的网站。也可以创建**静态**网站，这类网站大部分只提供纯HTML文件，并将所有工作委托给客户端的网页浏览器。
- en: For simpler sites, static can be a fast and affordable option. But because there’s
    nothing Linux-y about that, I’ll say no more about the subject here. [Chapter
    6](kindle_split_014.xhtml#ch06) of my *Learn Amazon Web Services in a Month of
    Lunches* (Manning, 2017), on the other hand, includes a nice demonstration of
    using AWS’s S3 to host a static site.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 对于更简单的网站，静态网站可以是一个快速且经济的选择。但鉴于这与Linux无关，我在这里就不再多说了。另一方面，我的《一个月午餐时间学习亚马逊网络服务》（Manning，2017）的第六章（[Chapter
    6](kindle_split_014.xhtml#ch06)）中，有一个很好的使用AWS的S3来托管静态网站的演示。
- en: '|  |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: As illustrated in [figure 7.1](#ch07fig01), most Linux web servers are built
    on the four pillars of what’s known as a LAMP server. The letters *LAMP* stand
    for Linux, the Apache web server administration software, either the MySQL or
    MariaDB database engine, and the PHP server-side scripting language (or, alternatively,
    Perl or Python). Those, in addition to Linux, with which I’d hope you’re already
    familiar, will be the focus of this chapter.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图7.1](#ch07fig01)所示，大多数Linux网络服务器都是建立在所谓的LAMP服务器的基础之上。*LAMP*代表Linux、Apache网络服务器管理软件、MySQL或MariaDB数据库引擎，以及PHP服务器端脚本语言（或者，也可以是Perl或Python）。除了Linux（希望您已经熟悉）之外，这些内容将是本章的重点。
- en: Figure 7.1\. The Apache web server software exposes HTTP-based resources to
    external clients and coordinates internal services.
  id: totrans-19
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.1. Apache网络服务器软件向外部客户端暴露基于HTTP的资源，并协调内部服务。
- en: '![](Images/07fig01_alt.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/07fig01_alt.jpg)'
- en: 'The LAMP server is such a common Linux configuration that Ubuntu, at least,
    has its own installation meta package. The caret (`^`) at the end of this example
    identifies the target as a special package bundled together to make installing
    common software stacks simpler:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: LAMP服务器是一种常见的Linux配置，至少Ubuntu有它自己的安装元包。这个例子末尾的撇号（`^`）标识目标为一个特殊包，捆绑在一起以简化常见软件堆栈的安装：
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: That one command will, after asking you to create a database password, automatically
    drop a working web server on top of your system, leaving you with nothing to do
    besides create some website content. Directing your web browser to the server’s
    IP address should display a welcome page created when Apache was installed.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 那条命令会在您创建数据库密码后，自动在您的系统上创建一个工作的网络服务器，除了创建一些网站内容外，您无需做任何事情。将您的网页浏览器指向服务器的IP地址应该会显示Apache安装时创建的欢迎页面。
- en: 'But automation isn’t always the best solution. Sometimes you’ll want to customize
    your software stack by specifying particular release versions to ensure application
    compatibility, or by substituting one package for another (MariaDB over MySQL,
    for instance, as you’ll soon see). Setting things up manually will be particularly
    helpful in this case, as it’ll force you to better understand how each bit works.
    That’s the approach I’ll take in this chapter. Here’s a list of what needs doing
    to get you to your goal:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 但自动化并不总是最佳解决方案。有时您可能需要通过指定特定的发布版本来自定义软件堆栈，以确保应用程序兼容性，或者通过替换一个包来替代另一个（例如，您很快就会看到，MariaDB替代MySQL）。在这种情况下，手动设置将特别有用，因为它会迫使您更好地理解每个部分是如何工作的。这就是我在本章中采取的方法。以下是需要完成的任务列表，以帮助您达到目标：
- en: Install Apache
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装Apache
- en: Add a web page or two to the web document root
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在网页文档根目录中添加一个或两个网页
- en: Install an SQL engine (MariaDB in this case)
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装一个SQL引擎（在本例中为MariaDB）
- en: Install the PHP server-side scripting language
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装PHP服务器端脚本语言
- en: Install and configure MediaWiki
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装和配置MediaWiki
- en: 7.2\. Manually setting up an Apache web server
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2. 手动设置Apache网络服务器
- en: Web server software has one primary job—to guide site visitors to the right
    directories and files on the server host—so appropriate website resources should
    be made available. Practically speaking, entering a uniform resource locator (URL)
    address in your browser address bar is really a request for the web server software
    running on a remote website host to retrieve a web page, video, or other resource
    from the host file system and load it in your browser. Web server software will
    usually integrate closely with other systems on the host server like networking,
    security, and file system tools so that access to local resources is well managed.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 网络服务器软件的主要任务是指引网站访客访问服务器主机上的正确目录和文件，因此应提供适当的网站资源。从实际角度来说，在浏览器地址栏中输入统一资源定位符（URL）地址实际上是对运行在远程网站主机上的网络服务器软件的请求，以从主机文件系统中检索网页、视频或其他资源并将其加载到您的浏览器中。网络服务器软件通常会与主机服务器上的其他系统紧密集成，如网络、安全和文件系统工具，以确保对本地资源的良好管理。
- en: Although it’s a volatile market, the open source Apache HTTP server tends to
    dominate the web server market across all platforms. Because it’s so popular,
    and despite the fact that Apache has serious competitors including Nginx (also
    cross-platform) and Microsoft’s IIS (which runs exclusively on Windows servers),
    I’m going to stick with Apache. (C’mon. Did you *really* think I’d devote an entire
    chapter to IIS?)
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这是一个波动很大的市场，但开源的Apache HTTP服务器通常在所有平台上主导着网络服务器市场。由于它非常受欢迎，尽管Apache有包括Nginx（也是跨平台）和微软的IIS（仅在Windows服务器上运行）在内的严重竞争对手，我仍然会坚持使用Apache。（拜托。你真的认为我会用整整一章来介绍IIS吗？）
- en: 7.2.1\. Installing the Apache web server on Ubuntu
  id: totrans-33
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.2.1。在Ubuntu上安装Apache网络服务器
- en: Installing Apache itself is easy. On Debian/Ubuntu, it’s `apt install apache2`.
    If you’re following along on an Ubuntu machine, once Apache is installed, there’s
    nothing stopping you from opening a browser and visiting your live website right
    away. You’ll be greeted by the introduction page seen in [figure 7.2](#ch07fig02).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Apache本身很简单。在Debian/Ubuntu上，使用`apt install apache2`。如果您正在Ubuntu机器上操作，一旦安装了Apache，就没有什么阻止您立即打开浏览器并访问您的实时网站了。您将看到[图7.2](#ch07fig02)中显示的介绍页面。
- en: '|  |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: The URL you’ll use to reach an Apache site running on your workstation is *localhost*.
    If, instead, you chose to work on an LXC container or VirtualBox VM, then you’ll
    use the machine’s IP address for the URL. To make sure you’ll have network access
    to sites running on your VirtualBox VM, ensure it’s configured to use a bridged
    adapter (the way you did it in [chapter 2](kindle_split_010.xhtml#ch02)).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 您将使用的URL来访问在您的工作站上运行的Apache网站是*localhost*。如果您选择在LXC容器或VirtualBox虚拟机（VM）上工作，那么您将使用机器的IP地址作为URL。为了确保您将能够访问在VirtualBox
    VM上运行的网络站点，请确保它配置为使用桥接适配器（就像您在[第2章](kindle_split_010.xhtml#ch02)中做的那样）。
- en: '|  |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Figure 7.2\. The Apache default page displayed in browsers directed to your
    server’s URL or IP address includes some important basic configuration and navigation
    information.
  id: totrans-39
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.2。当浏览器指向您的服务器URL或IP地址时，显示的Apache默认页面包括一些重要的基本配置和导航信息。
- en: '![](Images/07fig02_alt.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图片7.2](Images/07fig02_alt.jpg)'
- en: Ubuntu makes things easy. But where’s the fun in that? Once again, learning
    how it works on CentOS will help you understand what’s happening under the hood.
    Even if you don’t happen to have a VM or container running CentOS, Fedora, or
    Red Hat right now, I’d recommend you at least familiarize yourself with the CentOS
    way of doing things.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: Ubuntu让事情变得简单。但那样有什么乐趣呢？再次强调，学习如何在CentOS上工作将帮助您理解底层发生了什么。即使您现在没有运行CentOS、Fedora或Red
    Hat的虚拟机（VM）或容器，我也建议您至少熟悉CentOS的工作方式。
- en: 'The CentOS processes you’ll see in this chapter are different than Ubuntu’s.
    For clarity, I decided to separate the two, placing all CentOS directions in their
    own section: 7.6\. If you’re aiming to install Apache on CentOS, head there for
    details.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中您将看到的CentOS进程与Ubuntu的不同。为了清晰起见，我决定将它们分开，将所有CentOS说明放在自己的部分：7.6。如果您打算在CentOS上安装Apache，请前往那里获取详细信息。
- en: 7.2.2\. Populating your website document root
  id: totrans-43
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.2.2。填充您的网站文档根目录
- en: Fantastic! You’ve got yourself a working website. Considering that there’s nothing
    on the site besides the Apache welcome page, don’t expect to win any awards (or
    generate much revenue). You’re going to need to add some content. And to do that,
    you’ll need to know where the content goes.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 太棒了！您已经拥有了一个运行中的网站。考虑到网站上除了Apache欢迎页面外没有其他内容，不要期望赢得任何奖项（或产生太多收入）。您将需要添加一些内容。为此，您需要知道内容放在哪里。
- en: 'The content’s location is controlled by the DocumentRoot setting in an Apache
    configuration file. On CentOS systems, the configuration is set in the httpd.conf
    file in the /etc/httpd/conf/ directory. Ubuntu users will find it in a file called
    000-default.conf in the /etc/apache2/sites-available/ directory. Either way, searching
    the configuration file for DocumentRoot will probably show you a value like this:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 内容的位置由 Apache 配置文件中的 DocumentRoot 设置控制。在 CentOS 系统上，配置设置在 /etc/httpd/conf/ 目录下的
    httpd.conf 文件中。Ubuntu 用户将在 /etc/apache2/sites-available/ 目录下的一个名为 000-default.conf
    的文件中找到它。无论如何，在配置文件中搜索 DocumentRoot 可能会显示类似这样的值：
- en: '[PRE1]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This means that Apache will direct all incoming browser requests to files in
    the /var/www/html/ directory. You can change this value to point to any location
    on your file system you’d like. In fact, although it’s not a topic for this book,
    if you plan to host multiple websites on your server, you’re able to point to
    multiple file system locations.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着 Apache 将将所有传入的浏览器请求都指向 /var/www/html/ 目录下的文件。你可以更改这个值，使其指向你文件系统上的任何位置。实际上，尽管这不是本书的主题，如果你计划在服务器上托管多个网站，你可以将多个文件系统位置指向这些网站。
- en: 'If you’ve never done it before, why not take a couple of minutes right now
    and build a simple website of your own? Create a text file called index.html in
    your document root. (This file will overwrite Apache’s welcome page using the
    same name.) You can type some welcome text of your own in the file along with
    a link to a second HTML file and a graphic image. Make sure to create that second
    file along with an image. The index.html file might look like this:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你以前从未这样做过，为什么不现在花几分钟时间构建一个简单的个人网站呢？在你的文档根目录中创建一个名为 index.html 的文本文件。（此文件将使用相同名称覆盖
    Apache 的欢迎页面。）你可以在文件中输入自己的欢迎文本，并添加一个指向第二个 HTML 文件和图形图像的链接。确保创建那个第二个文件以及图像。index.html
    文件可能看起来像这样：
- en: '[PRE2]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 7.3\. Installing an SQL database
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3\. 安装 SQL 数据库
- en: Take a quick look at the US government’s Bureau of Labor Statistics (BLS) Occupational
    Outlook Handbook page for Network and Computer Systems Administrators ([http://mng.bz/kHN3](http://mng.bz/kHN3))
    as shown in [figure 7.3](#ch07fig03). Given all the content displayed on each
    of the page’s nine tabs, there’s quite a lot of text. But I suspect that very
    little of it was manually added to this page by a human being.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 快速浏览一下美国政府的劳工统计局（BLS）职业展望手册页面，针对网络和计算机系统管理员（[http://mng.bz/kHN3](http://mng.bz/kHN3)），如图
    7.3 所示。[#ch07fig03]。考虑到每个页面的九个标签页上显示的所有内容，文本量相当大。但我怀疑其中非常少的内容是由人类手动添加到这个页面的。
- en: 'Figure 7.3\. A page from the Bureau of Labor Statistics. The What Network and
    Computer Systems Administrators Do header was probably expanded from something
    like this: What $selected_occupation Do.'
  id: totrans-52
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 7.3\. 劳动力统计局的一页。网络和计算机系统管理员做什么的标题可能是由类似这样的内容扩展而来：$selected_occupation 做什么。
- en: '![](Images/07fig03_alt.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/07fig03_alt.jpg)'
- en: What’s more likely is that the database on the BLS server contains terabytes
    of raw data, within which can be found structured information related to each
    of the many thousands of included occupations. That data is probably then organized
    by information categories (Summary, Work Environment, and so forth). When I requested
    this page from the BLS menu (or through an internet search engine), the BLS web
    server might have requested the relevant raw data from the database and dynamically
    organized it on the page the way you see it in [figure 7.3](#ch07fig03).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 更可能的情况是，BLS 服务器上的数据库包含数以兆字节的数据，其中包含与所包含的成千上万种职业相关的结构化信息。这些数据可能随后按信息类别（摘要、工作环境等）进行组织。当我从
    BLS 菜单（或通过互联网搜索引擎）请求这个页面时，BLS 网络服务器可能已从数据库中请求相关原始数据，并按你在 [图 7.3](#ch07fig03) 中看到的方式动态组织在页面上。
- en: There are many more ways that a website can make use of dynamic access to a
    database engine installed in the backend, but that was a good illustration. The
    kind of database engine most likely used for a BLS-like project (or for our MediaWiki
    site) is called a *relational database*, which is a tool for organizing data into
    tables made up of columns and rows. The data contained within an individual row
    is known as a *record*. A record is identified by an ID value known as a *key*,
    which can be used to reference records between tables.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 网站可以利用动态访问后端安装的数据库引擎的许多其他方式，但这只是一个很好的示例。在类似 BLS 的项目（或我们的 MediaWiki 网站）中可能使用的数据库引擎类型被称为
    *关系数据库*，这是一种将数据组织成由列和行组成的表格的工具。单个行中的数据称为 *记录*。记录通过一个称为 *键* 的 ID 值来识别，它可以用来在表之间引用记录。
- en: The *Structured Query Language* (SQL) is a standardized syntax for managing
    data on relational databases. A *database engine* is software for managing relational
    database data and exposing it to administrators and automated processes using
    SQL syntax.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '*结构化查询语言*（SQL）是管理关系数据库中数据的标准语法。*数据库引擎*是用于管理关系数据库数据并将其通过SQL语法暴露给管理员和自动化过程的软件。'
- en: I’ll show you how to create and display a simple database table in a moment.
    But first, you’ll have to install your own database engine so you can follow along
    yourself. Because our long-term goal is a full LAMP server, it would make sense
    to install this on the same computer/VM/container where you built your Apache
    web server. (The CentOS way can be found at the end of the chapter.)
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我将很快向你展示如何创建和显示一个简单的数据库表。但首先，你必须安装自己的数据库引擎，这样你才能亲自跟随操作。因为我们的长期目标是完整的LAMP服务器，所以将它安装在你构建Apache网络服务器相同的计算机/VM/容器上是有意义的。（CentOS的方法可以在本章末尾找到。）
- en: '[PRE3]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Install MariaDB on your server.**'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 在你的服务器上安装MariaDB。**'
- en: Why did I choose MariaDB over MySQL? They both work with the exact same MySQL
    standards. In fact, they were both initially created by the same people. Both
    are great, but, right now at least, MariaDB seems to be the beneficiary of more
    active development and support. In addition to those two, there are other important
    SQL database engines in heavy use around the IT world, including Oracle, PostgreSQL,
    and Amazon’s Aurora, which was built specifically for AWS workloads.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么我选择MariaDB而不是MySQL？它们都遵循完全相同的MySQL标准。事实上，它们最初都是由同一群人创建的。两者都很好，但至少目前，MariaDB似乎得到了更活跃的开发和支持。除了这两个之外，还有其他重要的SQL数据库引擎在IT世界中广泛使用，包括Oracle、PostgreSQL和专为AWS工作负载构建的Amazon
    Aurora。
- en: 'Why not check the status of the database (DB) you’ve just installed? You can
    confirm the DB is running using `systemctl`:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么不检查你刚刚安装的数据库（DB）的状态？你可以使用`systemctl`来确认数据库正在运行：
- en: '[PRE4]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '***1* Whether you’ve got MySQL or MariaDB installed, Linux refers to the DB
    using the mysql command.**'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 无论你安装了MySQL还是MariaDB，Linux都使用mysql命令来引用数据库。**'
- en: 7.3.1\. Hardening SQL
  id: totrans-64
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.3.1\. 强化SQL
- en: 'Once MariaDB’s installed, it’s always a good idea to harden your database security,
    so you’ll want to run the mysql_secure_installation tool. If you weren’t prompted
    to create a root MariaDB password during the installation process (something that’s
    quite common), then you’ll need to run mysql_secure_installation, as that’s also
    how you’ll set up your authentication. Running this tool presents the following
    interactive dialog:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了MariaDB，强化数据库安全性总是一个好主意，因此你将需要运行mysql_secure_installation工具。如果你在安装过程中没有被提示创建root
    MariaDB密码（这种情况相当常见），那么你需要运行mysql_secure_installation，因为这也是你设置认证的方式。运行此工具将显示以下交互式对话框：
- en: '[PRE5]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '***1* Note that this command may require sudo privileges, which will cause
    trouble later. Stay tuned.**'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 注意，此命令可能需要sudo权限，这可能会在以后造成麻烦。请保持关注。**'
- en: '***2* Enter the password of the database root user, not the Linux root user.**'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 输入数据库root用户的密码，而不是Linux root用户的密码。**'
- en: The values recommended by mysql_secure_installation are aimed at preventing
    anonymous and remote users from accessing your data. Unless you’re planning to
    use this database only for testing, and it won’t contain important or sensitive
    data, you’ll want to accept the defaults.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: mysql_secure_installation推荐的价值旨在防止匿名和远程用户访问你的数据。除非你计划仅为此数据库进行测试，并且它不会包含重要或敏感数据，否则你将希望接受默认设置。
- en: '|  |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-71
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: If the mysql_secure_installation only works when run using `sudo`, then create
    your password that way. But keep in mind that this will create a problem that
    will need fixing later. You’ll see how to address that in the next section.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 如果mysql_secure_installation仅在以sudo运行时才起作用，那么请以此方式创建你的密码。但请记住，这将导致一个以后需要解决的问题。你将在下一节中看到如何解决这个问题。
- en: '|  |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 7.3.2\. SQL administration
  id: totrans-74
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.3.2\. SQL管理
- en: Now, as promised, I’m going to show you some simple database administration
    commands. The fact is you might never have to run any of these commands directly
    because most databases are accessed from within application code, rather than
    from the command line. Considering how inconvenient it would be to manually manage
    the thousands or even millions of data records commonly included in SQL databases,
    this makes a lot of sense. You’ll see a perfect example of this automated application/
    database relationship a bit later in this chapter when we finally get to installing
    and configuring MediaWiki.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如承诺的那样，我将向你展示一些简单的数据库管理命令。实际上，你可能永远不需要直接运行这些命令，因为大多数数据库都是从应用程序代码中访问的，而不是从命令行。考虑到手动管理SQL数据库中常见的数千甚至数百万条数据记录是多么不方便，这很有道理。你将在本章稍后安装和配置MediaWiki时看到这个自动化的应用程序/数据库关系的完美示例。
- en: Still, you may sometimes need to handcraft your own database. Perhaps you need
    some test data to work with while you’re putting a new application together. Or
    maybe your new business is starting off slowly and, rather than investing in a
    new application, for now it makes sense to manage your customers manually. You
    should at least know how it’s done.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 仍然，有时你可能需要手动创建自己的数据库。也许当你组装一个新应用程序时，你需要一些测试数据来工作。或者，也许你的新业务起步缓慢，与其投资新应用程序，不如现在手动管理客户更有意义。至少你应该知道如何操作。
- en: Feel free to skip to [section 7.4](#ch07lev1sec4) if you feel you’re not up
    to a database dive right now. But before you go, there’s one more important thing
    I should talk about.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你觉得自己现在还不足以深入数据库，可以自由跳转到[第7.4节](#ch07lev1sec4)。但在你离开之前，还有一件更重要的事情我应该谈谈。
- en: By default, you’ll access and administer the databases in your MariaDB or MySQL
    installations using the root user. That’s a bad idea. For security reasons, individual
    databases should be owned and managed by regular database users who have been
    given only the authority they need to do their specific jobs. Nevertheless, for
    this demo, I’m going to throw caution to the wind and, for the sake of simplicity,
    use the root user. Later, when I show you how to set up your MediaWiki database,
    I’ll do it properly by creating a non-root user.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，你将使用root用户访问和管理你的MariaDB或MySQL安装中的数据库。这可不是什么好主意。出于安全原因，应该由只有完成特定工作所需权限的常规数据库用户拥有和管理各个数据库。然而，为了演示的简便，我将冒险使用root用户。稍后，当我向你展示如何设置MediaWiki数据库时，我会正确地创建一个非root用户。
- en: Accessing the database
  id: totrans-79
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 访问数据库
- en: 'Whether you’ve installed MariaDB or MySQL, you log in to your shell using `mysql`,
    followed by `-u root`. This tells the database that you want to authenticate as
    the root user. The `-p` means you’ll be prompted for your MariaDB password:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你安装了MariaDB还是MySQL，你都应该使用`mysql`登录到你的shell，后面跟着`-u root`。这告诉数据库你想要以root用户身份进行身份验证。`-p`表示你将被提示输入你的MariaDB密码：
- en: '[PRE6]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '***1* Log in by specifying a user, and prompt for the user’s password.**'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 通过指定用户登录，并提示输入用户的密码。**'
- en: '***2* The [(none)] value will change to the name of an active database.**'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* [(none)]的值将更改为活动数据库的名称。**'
- en: 'Here’s where the trouble I hinted to earlier might rear its ugly head. MariaDB
    might not let you log in unless you run the `mysql` command as `sudo`. If this
    happens, log in using `sudo` and provide the MariaDB password you created. Then
    run these three commands at the MySQL prompts (substituting your password for
    `your-password`):'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这里就是之前暗示的麻烦可能浮现的地方。MariaDB可能不会让你登录，除非你以`sudo`运行`mysql`命令。如果发生这种情况，使用`sudo`登录并提供你创建的MariaDB密码。然后在这些MySQL提示符下运行这三个命令（用`your-password`替换你的密码）：
- en: '[PRE7]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The next time you log in, you should no longer require `sudo` and, more importantly,
    MediaWiki should be able to do its job properly. With that little trouble out
    of the way, take a look around your SQL environment. Here’s how to create a new
    database:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 下次你登录时，你应该不再需要`sudo`，更重要的是，MediaWiki应该能够正确地完成其工作。解决了这个小麻烦后，看看你的SQL环境。这是创建新数据库的方法：
- en: '[PRE8]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '***1* Most MySQL commands must end with a semicolon (;). Forgetting this will
    prevent the execution of the command.**'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 大多数MySQL命令必须以分号 (;) 结尾。忘记这一点将阻止命令的执行。**'
- en: 'Suppose your company needs to store customer contact information. You might
    create a new table for contacts within your database like this:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你的公司需要存储客户联系信息。你可以在数据库中创建一个新的联系人表，如下所示：
- en: '[PRE9]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '***1* This is the last part of a single command, stretched over seven lines
    for clarity.**'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 这是单个命令的最后部分，为了清晰起见，被扩展到七行。**'
- en: 'Just got your first customer? Congrats! Here’s how you’d enter the new information:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 刚刚获得第一个客户？恭喜！以下是输入新信息的方法：
- en: '[PRE10]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '***1* This line establishes which columns in the table will have new values
    added.**'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 这行定义了表格中哪些列将添加新值。**'
- en: 'Want to see what you’ve done? To display all the data in your new `Contacts`
    table, type `select *`:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 想看看你做了什么？要显示你新创建的 `Contacts` 表中的所有数据，请输入 `select *`：
- en: '[PRE11]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Note the ID value in your table, which can be used as the key value for your
    records. When you’re all done, you can close the MariaDB shell by typing `exit`.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 注意你表中的 ID 值，它可以作为你记录的关键值。当你完成所有操作后，你可以通过输入 `exit` 命令关闭 MariaDB shell。
- en: If, as I noted earlier, you might never need to perform any of those tasks manually,
    why bother reading about it here? Because, to integrate automated operations with
    your databases, you’ll almost certainly need to include variations of MySQL syntax
    within scripts and application code someday. Even the simplest of web shopping
    portals lives on external data. You may not be the one doing the coding, but the
    odds are that someone you know or love will, and they may need your help making
    the database connection. All in a day’s work for a tireless Linux sysadmin.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 如果，如我之前提到的，你可能永远不需要手动执行任何这些任务，为什么还要在这里阅读它呢？因为，为了将自动化操作与你的数据库集成，你几乎肯定需要在脚本和应用程序代码中包含
    MySQL 语法的变体。即使是简单的网络购物门户也依赖于外部数据。你可能不是编写代码的人，但几乎可以肯定的是，你认识或爱的人会，他们可能需要你的帮助来建立数据库连接。这对于不知疲倦的
    Linux 系统管理员来说，是日常工作中的一部分。
- en: Creating a MediaWiki database user
  id: totrans-99
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 创建 MediaWiki 数据库用户
- en: There’s one more bit of database administration. As you’ve seen, MariaDB comes
    with an active root user out of the box. But because that user has full admin
    rights over all the tables in the system, it isn’t a good idea to use root for
    day-to-day operations. Instead, from a security perspective, you’re better off
    creating unique users for each database consumer and giving them only the access
    rights they need.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 还有另一项数据库管理任务。正如你所看到的，MariaDB 默认附带一个活跃的 root 用户。但由于该用户拥有对系统所有表的完全管理权限，因此使用 root
    进行日常操作并不是一个好主意。从安全角度考虑，你最好为每个数据库消费者创建唯一的用户，并只授予他们所需的访问权限。
- en: 'Let’s log in to MariaDB one more time and create a new database called `wikidb`
    for MediaWiki to use later. Then you’ll create a user that you’ll call mw-admin.
    The `FLUSH PRIVILEGES` command enables the new settings and grants the mw-admin
    user full control over the `wikidb` database:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次登录到 MariaDB，并为 MediaWiki 创建一个名为 `wikidb` 的新数据库，以便稍后使用。然后，你将创建一个名为 mw-admin
    的用户。`FLUSH PRIVILEGES` 命令启用新设置，并授予 mw-admin 用户对 `wikidb` 数据库的完全控制权：
- en: '[PRE12]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 7.4\. Installing PHP
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4\. 安装 PHP
- en: The final LAMP ingredient is the PHP scripting language. *PHP* is a tool that
    can be used to write your own web applications. Prebuilt PHP applications are
    often used by third-party applications like MediaWiki to access and process system
    resources. It’s safe to assume, therefore, that you’ll be needing the *P* in your
    LAMP server.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: LAMP 的最后一个组成部分是 PHP 脚本语言。*PHP* 是一个可以用来编写你自己的网络应用程序的工具。预构建的 PHP 应用程序通常被第三方应用程序（如
    MediaWiki）用来访问和处理系统资源。因此，可以安全地假设，你将需要在你的 LAMP 服务器中用到 *P*。
- en: 7.4.1\. Installing PHP on Ubuntu
  id: totrans-105
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.4.1\. 在 Ubuntu 上安装 PHP
- en: 'Despite what the examples you’ve seen so far might suggest, Ubuntu installations
    aren’t always simpler than CentOS. But here’s one more task that goes down quicker
    the Ubuntu way. Want the latest PHP? `apt install php` is all it takes for Ubuntu
    to grant your desire. Because you’ll want it to play nicely with Apache, you’ll
    also need an extension:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管你迄今为止看到的示例可能表明，Ubuntu 安装并不总是比 CentOS 简单。但这里有一个任务，使用 Ubuntu 方式会更快完成。想要最新的 PHP
    吗？在 Ubuntu 上只需执行 `apt install php` 命令，它就能满足你的需求。因为你希望它与 Apache 顺利协作，所以你还需要一个扩展：
- en: '[PRE13]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'You should get into the habit of restarting Apache whenever making changes
    to a web server’s system configuration. Here’s how:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该养成在更改网络服务器系统配置时重启 Apache 的习惯。以下是方法：
- en: '[PRE14]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: That’s it. PHP should now be live.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 就这些。PHP 现在应该已经启动了。
- en: 7.4.2\. Testing your PHP installation
  id: totrans-111
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.4.2\. 测试 PHP 安装
- en: 'To make sure your PHP installation is live (and to learn about PHP’s local
    environment and resource integration), create a new file using the .php filename
    extension in the Apache web document root directory. Then fill the file with the
    remaining lines of text as shown here:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确保您的 PHP 安装是活跃的（并且了解 PHP 的本地环境和资源集成），在 Apache 网络文档根目录下创建一个新的文件，使用 .php 文件扩展名。然后按照以下所示填充文件的剩余行文本：
- en: '[PRE15]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now head over to a browser, enter the IP address of the machine that’s running
    PHP (or localhost, if it’s the desktop you’re working on) and the name of the
    file you created:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 现在转到浏览器，输入运行 PHP 的机器的 IP 地址（或者如果您正在工作的桌面，则为 localhost）以及您创建的文件名：
- en: '[PRE16]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: You’ll be treated to a long web page (like the one you see in [figure 7.4](#ch07fig04)),
    broken down into many sections, that describes your computer and the ways PHP
    talks to it.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到一个长网页（就像您在 [图 7.4](#ch07fig04) 中看到的那样），分为多个部分，描述了您的计算机以及 PHP 与其通信的方式。
- en: '|  |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-118
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: When you’re done, make sure to either delete or restrict access to the testmyphp.php
    file. Exposing this kind of information about your system to the public is a serious
    security breach.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，请确保删除或限制对 testmyphp.php 文件的访问。将此类有关您系统的信息公之于众是一种严重的安全漏洞。
- en: '|  |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Figure 7.4\. A small sample from the configuration and environment data displayed
    by `phpinfo`
  id: totrans-121
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 7.4. `phpinfo` 显示的配置和环境数据的小样本
- en: '![](Images/07fig04_alt.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/07fig04_alt.jpg)'
- en: As before, getting all this done on CentOS will come later. For now, let’s give
    MediaWiki its very own database.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前一样，在 CentOS 上完成所有这些操作将在以后进行。现在，让我们为 MediaWiki 创建一个专用的数据库。
- en: 7.5\. Installing and configuring MediaWiki
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.5. 安装和配置 MediaWiki
- en: 'Got documents and media to share (as we discussed at the start of this chapter
    all those pages ago)? You’ve come to the right place. Here’s how that process
    will break down:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 有文档和媒体要共享（就像我们在本章开头讨论的那样）？您来对地方了。以下是该过程的分解：
- en: Download and unpack the MediaWiki archive package
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并解压 MediaWiki 存档包
- en: Identify and install necessary software extensions
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 识别和安装必要的软件扩展
- en: Connect MediaWiki to your MariaDB database
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 MediaWiki 连接到您的 MariaDB 数据库
- en: Run and test the installation.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行并测试安装。
- en: 'Head over to the MediaWiki download page ([www.mediawiki.org/wiki/Download](http://www.mediawiki.org/wiki/Download)),
    and click Download MediaWiki to get the latest package. If you’d rather pull the
    file directly into your server via the command line, you can right-click the Download
    link, select Copy Link Address, and paste the address into a terminal window along
    with the wget program:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 转到 MediaWiki 下载页面 ([www.mediawiki.org/wiki/Download](http://www.mediawiki.org/wiki/Download))，点击下载
    MediaWiki 以获取最新包。如果您更愿意通过命令行直接将文件拉入您的服务器，可以右键单击下载链接，选择复制链接地址，并将地址粘贴到终端窗口中，包括 wget
    程序：
- en: '[PRE17]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '***1* The exact address (and version) will probably have changed by the time
    you read this.**'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 当您阅读此内容时，确切的地址（和版本）可能已经更改。**'
- en: '|  |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-134
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: 'If you get a `-bash: wget: Command Not Found` error when running the previous
    command, then you’ll need to install wget.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '如果在运行上一条命令时遇到 `-bash: wget: Command Not Found` 错误，那么您需要安装 wget。'
- en: '|  |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 'Running `tar` against the downloaded archive creates a new directory containing
    all the extracted files and directories. You’ll want to copy that entire directory
    hierarchy to the location on the file system where it’ll do its work. If MediaWiki
    is going to be the only web application hosted on your server, that will probably
    mean your web root directory:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `tar` 对下载的存档进行操作将创建一个包含所有提取的文件和目录的新目录。您需要将整个目录层次结构复制到文件系统中的工作位置。如果 MediaWiki
    将是您服务器上唯一的网络应用程序，那么这很可能意味着您的网络根目录：
- en: '[PRE18]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: If MediaWiki is going to be just one of a number of applications, then you might
    want to create a subdirectory within the document root that will expose the service
    in a practical and predictable way. Putting the files into a directory called
    /var/www/html/mediawiki/, for instance, would mean that your users would find
    MediaWiki at www.example.com/ mediawiki, assuming that you’re using example.com
    as your public domain.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 MediaWiki 只是一系列应用程序中的一个，那么您可能希望在文档根目录内创建一个子目录，以便以实用和可预测的方式公开服务。例如，将文件放入名为
    /var/www/html/mediawiki/ 的目录中，这意味着您的用户将在 www.example.com/mediawiki 找到 MediaWiki，假设您正在使用
    example.com 作为您的公共域名。
- en: 'From this point, the MediaWiki browser interface takes over. Point your browser
    to the index.php file in the MediaWiki directory on your server’s IP address (or
    localhost if you’re running all this on your desktop). If you copied the files
    to the /var/www/ html/ root, then it would look something like this:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个点开始，MediaWiki的浏览器界面接管了。将你的浏览器指向服务器IP地址上MediaWiki目录中的index.php文件（如果你在桌面上运行所有这些，则是localhost）。如果你将文件复制到了/var/www/html/根目录，那么它看起来可能像这样：
- en: '[PRE19]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'If, instead, you created a subdirectory for MediaWiki, it might look like this:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 如果，相反，你为MediaWiki创建了一个子目录，它可能看起来像这样：
- en: '[PRE20]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Normally, when I install an application for the first time, I’ll follow the
    instructions of a good online guide, preferably one created and maintained by
    the project developers themselves. More often then not, such a guide will provide
    me with a long list of package dependencies that I’ll quickly read (often too
    quickly) and then copy and paste into an `apt install` command.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，当我第一次安装应用程序时，我会遵循一个优秀的在线指南的指示，最好是项目开发者自己创建和维护的。很多时候，这样的指南会给我提供一个长长的包依赖列表，我会快速阅读（通常读得太快）然后复制粘贴到`apt
    install`命令中。
- en: This time, however, I’ve turned the process upside down and installed just the
    bare bones of the Apache, MariaDB, and PHP packages. I know that this won’t give
    MediaWiki enough to work with, and that’s exactly what I want. What better way
    to learn about how all the complex bits are supposed to fit together?
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这次，我倒转了整个过程，只安装了Apache、MariaDB和PHP包的基础部分。我知道这不会给MediaWiki提供足够的工作环境，这正是我想要的。还有什么更好的方法来了解所有复杂的部分应该如何组合在一起呢？
- en: 7.5.1\. Troubleshooting missing extensions
  id: totrans-146
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.5.1\. 解决缺失扩展的问题
- en: 'The people who designed the MediaWiki setup process intelligently understood
    that things wouldn’t always go smoothly. If it turns out that there’s something
    missing from your configuration, rather than failing silently, you’ll get an error
    page containing helpful information. In this case, as illustrated by [figure 7.5](#ch07fig05),
    I seem to be missing a couple of PHP extensions: mbstring and xml.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 设计MediaWiki设置过程的人们明智地理解到事情并不总是顺利。如果发现你的配置中缺少某些东西，而不是默默失败，你会得到一个包含有用信息的错误页面。在这个例子中，如图7.5所示，我似乎缺少几个PHP扩展：mbstring和xml。
- en: Figure 7.5\. A helpful error page telling me that my system is missing two extensions
    and providing links to appropriate PHP documentation pages
  id: totrans-148
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.5\. 一个有用的错误页面告诉我我的系统缺少两个扩展，并提供适当的PHP文档页面链接
- en: '![](Images/07fig05_alt.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/07fig05_alt.jpg)'
- en: 'I’ll use `apt search` to see what packages relate to mbstring. Since I’m running
    PHP 7, the php7.0-mbstring package seems like the one most likely to put a smile
    back on MediaWiki’s flowery face:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用`apt search`来查看哪些包与mbstring相关。由于我运行的是PHP 7，php7.0-mbstring包似乎是最有可能让MediaWiki的华丽面容重现笑容的：
- en: '[PRE21]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '***1* Provides multibyte string encoding for PHP 7**'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 为PHP 7提供多字节字符串编码**'
- en: 'A similar search for both xml and php (`apt search xml | grep php`) told me
    about a package called php7.0-xml that seemed likely to satisfy MediaWiki’s XML
    requirements. I’ll install both packages and then use `systemctl` to restart Apache:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 对xml和php（`apt search xml | grep php`）的类似搜索告诉我有一个名为php7.0-xml的包似乎可以满足MediaWiki的XML需求。我将安装这两个包，然后使用`systemctl`重新启动Apache：
- en: '[PRE22]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The beautiful thing about the way all this works is that you (and I) don’t need
    to understand what multibyte string encoding or even XML is and why it is that
    MediaWiki feels so completely lost without them. As long as we can trust an application’s
    developers, there’s nothing wrong with following their instructions. That assumes
    we can trust the application’s developers, something that’s often hard to assess.
    The philosophy underlying the entire Linux package management system is built
    on the premise that the managers of official repositories have already done the
    vetting job for us. It’s up to us to hope they’re right.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这一切工作方式的美好之处在于，你（和我）不需要理解多字节字符串编码或甚至XML是什么，以及为什么MediaWiki没有它们会感到如此完全迷失。只要我们能信任应用程序的开发者，遵循他们的指示就没有什么问题。这假设我们能信任应用程序的开发者，而这往往很难评估。整个Linux软件包管理系统背后的哲学建立在这样一个前提上：官方仓库的管理者已经为我们完成了审查工作。这取决于我们希望他们是正确的。
- en: Getting back to our example, if everything goes according to plan, refreshing
    the browser page should take you back to the initial MediaWiki intro page. When
    the page loads, you’ll see a warning about a missing LocalSettings.php file and
    a link to set up the wiki. When you click the link, you’ll get to select a language
    preference and then, the MediaWiki Environmental Checks page and...more trouble!
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 回到我们的例子，如果一切按计划进行，刷新浏览器页面应该会带你回到最初的MediaWiki简介页面。当页面加载时，你会看到一个关于缺少LocalSettings.php文件的警告和一个设置维基的链接。当你点击链接时，你可以选择语言偏好，然后是MediaWiki环境检查页面和...更多麻烦！
- en: The biggest issue is the absence of a *database driver*. That would be the software
    used to negotiate between PHP and, in our case, MariaDB. Not having that installed
    is, indeed, a killer. Although the suggested package shown in [figure 7.6](#ch07fig06)
    is php5-mysql, `apt search` tells us that we’re more likely to see success with
    the php-mysql package.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 最大的问题是缺少一个*数据库驱动程序*。这将是用于在PHP和我们的案例中MariaDB之间协商的软件。没有安装它确实是一个杀手。尽管[图7.6](#ch07fig06)中显示的建议包是php5-mysql，但`apt
    search`告诉我们，我们更有可能使用php-mysql包成功。
- en: Figure 7.6\. The bright *x* indicates a show-stopping hole in our configuration;
    other notes present less severe warnings.
  id: totrans-158
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.6。明亮的*x*表示我们配置中的一个阻止性的漏洞；其他注释提供了不那么严重的警告。
- en: '![](Images/07fig06_alt.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/07fig06_alt.jpg)'
- en: 'Also throw in the suggested PHP extensions for APCu (part of a framework for
    caching and optimizing PHP intermediate code) and ImageMagick (an image-processing
    tool). Another restart for Apache and another refresh of the browser window, and
    you should be all set:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 还应包括为APCu（缓存和优化PHP中间代码的框架的一部分）和ImageMagick（一个图像处理工具）建议的PHP扩展。重新启动Apache并刷新浏览器窗口，你应该就绪了：
- en: '[PRE23]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: You’ll see a Continue button at the bottom of the page. Use it.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 你会在页面底部看到一个继续按钮。使用它。
- en: 7.5.2\. Connecting MediaWiki to the database
  id: totrans-163
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.5.2. 将MediaWiki连接到数据库
- en: 'The information you provide through the Connect to Database page tells MediaWiki:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 你通过“连接到数据库”页面提供的信息告诉MediaWiki：
- en: What kind of database you’ve got installed on your system (MySQL or compatible,
    in this case)
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你在系统上安装了什么类型的数据库（在这个例子中是MySQL或兼容的）
- en: Where the database lives (it can be remote or even cloud-based, but this is
    on the local server, so `localhost` is the correct value)
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库所在的位置（它可以是远程的，甚至是基于云的，但这是在本地服务器上，所以`localhost`是正确的值）
- en: The name you’d like to give the database that MediaWiki will use (I’ll use the
    wikidb database I created earlier)
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你希望给MediaWiki将使用的数据库取的名字（我将使用我之前创建的wikidb数据库）
- en: The name of the existing database user account (mw-admin in this case)
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现有的数据库用户账户的名称（在这个例子中是mw-admin）
- en: The password of the current database account (this allows MediaWiki to access
    MariaDB and create and administrate its database; see [figure 7.7](#ch07fig07))
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当前数据库账户的密码（这允许MediaWiki访问MariaDB并创建和管理其数据库；参见[图7.7](#ch07fig07))
- en: Figure 7.7\. Part of the MySQL settings page where you tell MediaWiki how to
    connect to the database
  id: totrans-170
  prefs:
  - PREF_IND
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.7。MySQL设置页面的一部分，其中你告诉MediaWiki如何连接到数据库
- en: '![](Images/07fig07_alt.jpg)'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图片](Images/07fig07_alt.jpg)'
- en: '|  |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Note
  id: totrans-173
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: That didn’t work? If MediaWiki can’t connect to your database, confirm that
    you’re using the right password, but also make sure that you’re able to log in
    to a MariaDB shell from the command line.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 如果不起作用？如果MediaWiki无法连接到你的数据库，请确认你使用的是正确的密码，但也请确保你能够从命令行登录到MariaDB shell。
- en: '|  |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: If all goes well, you’ll be taken through a series of screens from which you’ll
    enter configuration details like database settings, a name for your wiki (something
    like Company Documentation for this example) and a username, password, and contact
    email address for a wiki administrator account. This account is not connected
    to the accounts you already have on the Linux host or MariaDB.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切顺利，你将进入一系列屏幕，在那里你可以输入配置细节，如数据库设置、你的维基的名称（例如，在这个例子中是公司文档）以及一个用户名、密码和维基管理员账户的联系方式。此账户与你在Linux主机或MariaDB上已有的账户无关。
- en: Some optional setup questions let you set preferences for user rights, copyrights
    for the wiki content, a mail server to send notification emails, and add-on software
    extensions for things like an in-browser WikiEditor or anti-spam software. With
    the possible exception of the return email address, the defaults should work.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 一些可选的设置问题让你可以设置用户权限的偏好、维基内容的版权、发送通知邮件的邮件服务器以及添加诸如浏览器内WikiEditor或反垃圾邮件软件等附加软件扩展。除了可能的返回电子邮件地址外，默认值应该可以工作。
- en: 'When you’re done, MediaWiki starts its installation process. When that’s complete,
    it prompts you to download a file called LocalSettings.php and then save it to
    the MediaWiki root directory (/var/www/html/ in this example). You can use `scp`
    to copy the file you’ve saved to your user’s home directory:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成时，MediaWiki 将开始其安装过程。当安装完成时，它会提示你下载一个名为 LocalSettings.php 的文件，并将其保存到 MediaWiki
    根目录（在这个例子中是 /var/www/html/）。你可以使用 `scp` 将你保存的文件复制到你的用户主目录：
- en: '[PRE24]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'And then, from a command line on your server, move it to the document root:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，从服务器上的命令行中，将其移动到文档根目录：
- en: '[PRE25]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: With everything in place, head back to the browser page at the same address
    you used earlier (something like 10.0.3.184/index.php). This time, as you can
    see in [figure 7.8](#ch07fig08), you’ll find yourself on the main page of your
    brand-new wiki. From here on in, it’ll be your job to start packing your wiki
    with the many fruits of your wisdom and experience.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 一切准备就绪后，回到之前使用的浏览器页面（例如 10.0.3.184/index.php）。这次，正如你在 [图 7.8](#ch07fig08) 中可以看到的，你将发现自己在新创建的维基百科的主页上。从现在开始，你的任务就是开始用你智慧和经验的丰富果实来充实你的维基百科。
- en: Figure 7.8\. You can add and edit the page’s contents and links by clicking
    the Edit tab at the top.
  id: totrans-183
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 7.8\. 你可以通过点击顶部的“编辑”标签来添加和编辑页面内容以及链接。
- en: '![](Images/07fig08_alt.jpg)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/07fig08_alt.jpg)'
- en: Feel free to spend some time with the MediaWiki User’s Guide ([www.mediawiki.org/wiki/Help:Contents](http://www.mediawiki.org/wiki/Help:Contents)).
    Here’s where you’ll learn how to work with files and to write using the simple
    markup language.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 随意花些时间阅读 MediaWiki 用户指南 ([www.mediawiki.org/wiki/Help:Contents](http://www.mediawiki.org/wiki/Help:Contents))。在这里，你将学习如何处理文件以及如何使用简单的标记语言进行编写。
- en: 7.6\. Installing the Apache web server on CentOS
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.6\. 在 CentOS 上安装 Apache 网络服务器
- en: 'If you want to avoid some of the trouble we experienced in our Ubuntu installation
    efforts, consider doing some preemptive research to find out exactly which release
    versions you’ll need for each part of the LAMP puzzle. A quick trip to the MediaWiki
    Installation Requirements page ([http://mng.bz/4Bp1](http://mng.bz/4Bp1)) should
    give you all the information you’ll need to install the Apache web server (or
    httpd, as it’s known on CentOS). Once that’s done, getting the software is simple:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要避免我们在 Ubuntu 安装过程中遇到的一些麻烦，考虑做一些预防性的研究，以找出 LAMP 拼图每个部分所需的精确版本。快速访问 MediaWiki
    安装要求页面 ([http://mng.bz/4Bp1](http://mng.bz/4Bp1)) 应该会给你安装 Apache 网络服务器（或 CentOS
    上的 httpd）所需的所有信息。一旦完成，获取软件就很简单了：
- en: '[PRE26]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'By default, Apache won’t be running. Remember how to fix that on systemd? No
    peeking! I hoped you guessed this:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Apache 不会运行。你还记得如何在 systemd 中修复这个问题吗？不要偷看！我希望你已经猜到了：
- en: '[PRE27]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The command `systemctl start` launches the service, and `enable` causes it
    to start every time the computer boots. To confirm that Apache is running, you
    can use `curl` to print a web page to the terminal, specifying `localhost` to
    tell `curl` that you’re after the default page being served locally. You may need
    to install `curl`...I’m sure you’re OK with that by now. If `curl` spits out something
    that starts this way, then Apache is obviously doing its job:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 命令 `systemctl start` 启动服务，而 `enable` 则会在计算机启动时启动它。要确认 Apache 是否正在运行，你可以使用 `curl`
    将网页打印到终端，指定 `localhost` 来告诉 `curl` 你想要的是本地正在提供的服务器默认页面。你可能需要安装 `curl`...我相信你现在应该没问题了。如果
    `curl` 输出以这种方式开始的内容，那么 Apache 显然正在正常工作：
- en: '[PRE28]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '***1* The title attribute for this Apache test index.html page**'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 这个 Apache 测试 index.html 页面的标题属性**'
- en: 'But here’s something strange: that successful `curl` command means that Apache
    is running and, hopefully, you know that you’ve got network connectivity between
    your computer and your CentOS VM through the bridged adapter. ([Chapter 14](kindle_split_022.xhtml#ch14)
    will be helpful if you’re having trouble with that.) But you probably still won’t
    be able to load the page from a GUI browser. The odds are you’ll get a This Site
    Can’t Be Reached error, instead. What’s the problem?'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 但这里有一个奇怪的现象：那个成功的 `curl` 命令意味着 Apache 正在运行，并且，希望你能知道，通过桥接适配器，你的计算机和 CentOS 虚拟机之间有网络连接。([第
    14 章](kindle_split_022.xhtml#ch14) 如果你在处理这个问题上有困难，将会很有帮助。)但你可能仍然无法从 GUI 浏览器中加载页面。你可能会遇到“无法访问此网站”的错误，而不是其他问题。问题出在哪里？
- en: This error illustrates another interesting way that the Ubuntu philosophy differs
    from CentOS’s. By default, Ubuntu ships without a firewall of any sort. (Because
    there are no open network services beyond basic infrastructure, that’s not nearly
    as crazy as it sounds.) Apache is ready to accept incoming external traffic as
    soon as it’s installed. Naturally, there are plenty of ways to shut down network
    access to fit your needs, but out of the box, you’re open to the world. CentOS,
    on the other hand, comes with all ports securely shut tight. If you want your
    web server to receive inbound HTTP requests, you’ll first need to open the HTTP
    port (which, by convention, is port 80).
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 这个错误说明了Ubuntu哲学与CentOS的不同之处还有另一种有趣的方式。默认情况下，Ubuntu没有安装任何类型的防火墙。（因为除了基本基础设施之外没有开放的网络服务，所以这并不像听起来那么疯狂。）Apache一旦安装完毕，就准备好接受外部传入的流量。当然，有很多方法可以关闭网络访问以满足您的需求，但出厂时，您对全世界都是开放的。另一方面，CentOS默认将所有端口都安全关闭。如果您想使您的Web服务器接收传入的HTTP请求，您首先需要打开HTTP端口（按照惯例，是端口80）。
- en: 7.6.1\. Understanding network ports
  id: totrans-196
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.6.1. 理解网络端口
- en: What, by the way, is a *network port*? It’s nothing more than a way to identify
    a particular server resource to network users. Imagine that your server is hosting
    two separate applications. Visitors can reach your server using either its public
    IP address or a corresponding DNS domain name (like 172.217.1.174 for google.com).
    But how will a browser know which of the two applications you want to load?
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 顺便问一下，什么是*网络端口*？它不过是一种识别特定服务器资源给网络用户的方式。想象一下，您的服务器正在托管两个不同的应用程序。访客可以使用其公共IP地址或相应的DNS域名（如google.com的172.217.1.174）来访问您的服务器。但浏览器如何知道您想加载哪个应用程序呢？
- en: Applications can be told to listen for traffic coming to the server when a predetermined
    port is specified. Thus, one application could use port 50501 and another, port
    50502\. As you can see in [figure 7.9](#ch07fig09), the first application would,
    therefore, respond to incoming requests using 192.168.2.10:50501 (assuming that
    192.168.2.10 is your server’s IP address), and the second application would expect
    traffic using 192.168.2.10:50502.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 当指定一个预定的端口时，可以指示应用程序监听传入服务器的流量。因此，一个应用程序可以使用端口50501，另一个应用程序使用端口50502。如图7.9所示，第一个应用程序将使用192.168.2.10:50501响应传入请求（假设192.168.2.10是您的服务器IP地址），第二个应用程序将期望使用192.168.2.10:50502的流量。
- en: Figure 7.9\. Applications configured to listen on separate network ports (80
    = insecure HTTP; 443 = secure HTTPS; 30303 = a custom application)
  id: totrans-199
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.9.配置在单独网络端口上监听的应用程序（80 = 不安全的HTTP；443 = 安全的HTTPS；30303 = 自定义应用程序）
- en: '![](Images/07fig09_alt.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![图片 7.9](Images/07fig09_alt.jpg)'
- en: We’ll come back to ports later in the book in [chapters 9](kindle_split_017.xhtml#ch09)
    and [14](kindle_split_022.xhtml#ch14). But it’s your web server software (like
    Apache) that will do most of the heavy lifting for servers hosting multiple websites,
    automatically translating ports into local file system locations. If you’re considering
    opening up your web server to more than one site, software configuration guides
    (like those at [http://mng.bz/w6h4](http://mng.bz/w6h4)) are the place to start.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本书的后续章节中回到端口的问题，例如在第9章（kindle_split_017.xhtml#ch09）和第14章（kindle_split_022.xhtml#ch14）。但您的Web服务器软件（如Apache）将为您托管多个网站的服务器做大部分繁重的工作，自动将端口转换为本地文件系统位置。如果您考虑将您的Web服务器向多个网站开放，软件配置指南（如[http://mng.bz/w6h4](http://mng.bz/w6h4)）是您开始的地方。
- en: 7.6.2\. Controlling network traffic
  id: totrans-202
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.6.2. 控制网络流量
- en: 'How do you control access to your network? One way is through *firewall rules*.
    On CentOS, that’s handled through the firewalld service and its firewall-cmd tool.
    In this case, you’ll want to add the `http` service and, through the `--permanent`
    flag, ensure that the rule will be active each time you restart the service or
    boot the computer. (I’ll have much more to say about firewalls in [chapter 9](kindle_split_017.xhtml#ch09).)
    To apply the changes, restart the service:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 您如何控制对您网络的访问？一种方法是通过*防火墙规则*。在CentOS上，这通过firewalld服务和firewall-cmd工具来处理。在这种情况下，您需要添加`http`服务，并通过`--permanent`标志确保每次您重新启动服务或启动计算机时，规则都将生效。（我将在第9章（kindle_split_017.xhtml#ch09）中详细介绍防火墙。）要应用更改，请重新启动服务：
- en: '[PRE29]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: With that done, you should be able to successfully load the CentOS version of
    the Apache test page ([figure 7.10](#ch07fig10)).
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些后，您应该能够成功加载CentOS版本的Apache测试页面（[图7.10](#ch07fig10)）。
- en: Figure 7.10\. The default web page on a CentOS Apache web server
  id: totrans-206
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图7.10. CentOS Apache Web服务器的默认网页
- en: '![](Images/07fig10_alt.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![图片 7.10](Images/07fig10_alt.jpg)'
- en: 7.6.3\. Installing MariaDB on CentOS
  id: totrans-208
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.6.3\. 在 CentOS 上安装 MariaDB
- en: 'Again, the installation itself is simple. You’ll need to manually start MariaDB,
    however, and then use `enable` to configure it to load on system boot:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，安装本身很简单。但是，您需要手动启动 MariaDB，然后使用 `enable` 命令来配置它在系统启动时加载：
- en: '[PRE30]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: From here, you can follow the MariaDB setup steps outlined earlier as part of
    the Ubuntu installation process.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里，您可以遵循之前作为 Ubuntu 安装过程一部分概述的 MariaDB 设置步骤。
- en: 7.6.4\. Installing PHP on CentOS
  id: totrans-212
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7.6.4\. 在 CentOS 上安装 PHP
- en: At the time of writing, the default version of PHP available though the CentOS
    repository was still 5.4, which is well behind the latest version available from
    the Ubuntu repository. The problem is that the current MediaWiki version (1.30)
    will not work with anything older than PHP 5.5.9\. By the time you read this,
    the issue might have resolved itself. If it hasn’t, you’ll need to use web searches
    to find repositories containing more up-to-date versions of PHP to install.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，通过 CentOS 仓库提供的 PHP 默认版本仍然是 5.4，这远远落后于 Ubuntu 仓库中可用的最新版本。问题是当前的 MediaWiki
    版本（1.30）无法与低于 PHP 5.5.9 的任何版本兼容。到您阅读本文时，问题可能已经自行解决。如果没有，您将需要使用网络搜索来查找包含更新版本 PHP
    的仓库以进行安装。
- en: 'I’m not mentioning this because CentOS happens to be a version or two behind
    at the moment, but because things like that happen all the time; there are important
    lessons to learn. The first lesson is to always check the package version before
    installing it. All Linux package managers make all kinds of information available
    for you before you jump in. Get in the habit of reading. Following is the software
    summary information for the PHP installation package:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 我不是提到这一点是因为 CentOS 目前恰好落后一个或两个版本，而是因为类似的事情经常发生；有许多重要的教训要学习。第一个教训是在安装之前始终检查软件包版本。所有
    Linux 软件包管理器在您跳入之前都会提供各种信息。养成阅读的习惯。以下是 PHP 安装软件包的软件摘要信息：
- en: '[PRE31]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '***1* dnf displays an installation summary before launching the action.**'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* dnf 在启动操作之前会显示安装摘要。**'
- en: '***2* Note the PHP version dnf will, by default, install.**'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 注意 dnf 默认将安装的 PHP 版本。**'
- en: '***3* The installation will not begin until you explicitly authorize it.**'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 安装将在您明确授权之前不会开始。**'
- en: It’s also important to keep in mind that both newer and older versions of software
    packages can coexist within the repository system at the same time. Remember that
    you’ve got choices. And remember, too, that the most recent one is not always
    the one you want. This can be because another application you’re working with
    might break with the latest version of this package or because a newer version
    might not be stable or secure enough for your project.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 还需要记住的是，软件包的新版本和旧版本可以在仓库系统中同时存在。记住，您有选择权。同样，也要记住，最新的版本并不总是您想要的版本。这可能是因为您正在使用的另一个应用程序可能与该软件包的最新版本不兼容，或者因为新版本可能对您的项目来说不够稳定或安全。
- en: '|  |'
  id: totrans-220
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Note
  id: totrans-221
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意
- en: There’s a good chance that you might one day need to install a package that’s
    not part of an official Linux repository. This is neither a crime nor an immoral
    act, so there’s no reason to feel guilty. But you should be aware that you will
    be fully responsible for making sure that compatibility with other services and
    applications is maintained, and that your non-repo package and configuration survive
    system updates. And, of course, you must be extra careful to ensure that the package
    itself doesn’t contain malware.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 有很大可能性您将来可能需要安装不属于官方 Linux 仓库的软件包。这既不是犯罪也不是不道德的行为，因此您没有必要感到内疚。但您应该意识到您将完全负责确保与其他服务和应用程序的兼容性得到维护，以及您的非仓库软件包和配置在系统更新中能够生存。当然，您还必须格外小心，确保该软件包本身不包含恶意软件。
- en: '|  |'
  id: totrans-223
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 'Whether or not you use the official CentOS PHP repository version, you’ll probably
    need to manually add individual modules to support your intended operations. Following
    online guides to setting things up will prove useful. But you can run `yum search
    php-` to check for available modules, and then `yum info` and the name of an interesting
    choice to learn more about a specific package:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您是否使用官方的 CentOS PHP 仓库版本，您可能都需要手动添加单个模块以支持您预期的操作。遵循在线指南来设置这些设置将非常有用。但您可以使用
    `yum search php-` 来检查可用的模块，然后使用 `yum info` 和一个有趣的选项名称来了解更多关于特定软件包的信息：
- en: '[PRE32]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '***1* Because a MySQL-like database is installed, it makes sense to look for
    related modules.**'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 因为已经安装了类似 MySQL 的数据库，所以查找相关模块是有意义的。**'
- en: '***2* The php-mysql package for 64-bit architectures**'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 64 位架构的 php-mysql 软件包**'
- en: '***3* Use yum info to learn more about an interesting package.**'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 使用 yum info 了解有关有趣软件包的更多信息。**'
- en: '***4* This is the package name you’ll use with yum to install the module.**'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 这是您将使用 yum 安装模块的软件包名称。**'
- en: 'After installing PHP and any additional PHP modules, restart Apache to ensure
    that Apache can incorporate the new modules into its service:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 PHP 和任何额外的 PHP 模块后，重新启动 Apache 以确保 Apache 能够将新模块纳入其服务：
- en: '[PRE33]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: As was described during the Ubuntu setup process earlier in the chapter, use
    `phpinfo` to confirm PHP is properly installed.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 如本章前面所述的 Ubuntu 设置过程中所描述的，使用 `phpinfo` 确认 PHP 是否正确安装。
- en: Summary
  id: totrans-233
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: Web server packages like Apache coordinate connectivity between system resources
    such as databases and files, and expose website resources to clients.
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web 服务器软件包，如 Apache，协调系统资源（如数据库和文件）之间的连接，并将网站资源暴露给客户端。
- en: Available software package versions can vary between Linux distributions, and
    the release version you need can depend on your specific project.
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可用的软件包版本在不同 Linux 发行版之间可能会有所不同，您需要的发布版本可能取决于您的特定项目。
- en: Package dependencies can be met with the help of search tools and metadata provided
    by package management systems (like APT and Yum).
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 软件包依赖关系可以通过包管理系统（如 APT 和 Yum）提供的搜索工具和元数据来满足。
- en: Applications will often need access to a database engine and will, therefore,
    need to be given valid authentication information.
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序通常需要访问数据库引擎，因此需要提供有效的身份验证信息。
- en: Key terms
  id: totrans-238
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关键术语
- en: A *wiki* is a tool for creating and managing distributed, collaborative projects.
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Wiki* 是一种用于创建和管理分布式、协作项目的工具。'
- en: A *content management system* (CMS) is an application designed to make creating,
    sharing, and editing digital content easy.
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*内容管理系统*（CMS）是一种应用程序，旨在使创建、共享和编辑数字内容变得容易。'
- en: A *web server* is software designed to safely and reliably expose server resources
    to remote clients.
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Web 服务器* 是一种软件，旨在安全可靠地将服务器资源暴露给远程客户端。'
- en: '*DocumentRoot* is the Apache setting determining where on the file system the
    web server will look for website files.'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*DocumentRoot* 是 Apache 设置，它确定 Web 服务器在文件系统中查找网站文件的位置。'
- en: '*Structured Query Language* (SQL) is a syntax for managing data in relational
    databases.'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*结构化查询语言*（SQL）是用于管理关系数据库中数据的语法。'
- en: '*Package dependencies* are programs or extensions required for the proper function
    of installed applications.'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*软件包依赖关系* 是安装的应用程序正常功能所需的程序或扩展。'
- en: Security best practices
  id: totrans-245
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安全最佳实践
- en: Ensure your system firewall settings permit appropriate client access to system
    resources but block all other requests.
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保您的系统防火墙设置允许适当的客户端访问系统资源，但阻止所有其他请求。
- en: In most cases, it’s not a good idea to allow remote root access to your database.
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在大多数情况下，允许远程 root 访问数据库不是一个好主意。
- en: Never leave a file running `phpinfo` exposed on a public-facing website.
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 永远不要在面向公众的网站上暴露运行 `phpinfo` 的文件。
- en: Command-line review
  id: totrans-249
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 命令行审查
- en: '`apt install lamp-server^` (a single Ubuntu command) installs all the elements
    of a LAMP server.'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`apt install lamp-server^`（单个 Ubuntu 命令）安装 LAMP 服务器的所有元素。'
- en: '`systemctl enable httpd` launches Apache on a CentOS machine at every system
    boot.'
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`systemctl enable httpd` 在 CentOS 机器上每次系统启动时启动 Apache。'
- en: '`firewall-cmd --add-service=http --permanent` permits HTTP browser traffic
    into a CentOS system.'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`firewall-cmd --add-service=http --permanent` 允许 HTTP 浏览器流量进入 CentOS 系统。'
- en: '`mysql_secure_installation` resets your root password and tightens database
    security.'
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql_secure_installation` 重置您的 root 密码并加强数据库安全性。'
- en: '`mysql -u root -p` logs in to MySQL (or MariaDB) as the root user.'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql -u root -p` 以 root 用户登录 MySQL（或 MariaDB）。'
- en: '`CREATE DATABASE newdbname;` creates a new database in MySQL (or MariaDB).'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CREATE DATABASE newdbname;` 在 MySQL（或 MariaDB）中创建一个新的数据库。'
- en: '`yum search php- | grep mysql` searches for available packages related to PHP
    on a CentOS machine.'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`yum search php- | grep mysql` 在 CentOS 机器上搜索与 PHP 相关的可用软件包。'
- en: '`apt search mbstring` searches for available packages related to multibyte
    string encoding.'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`apt search mbstring` 在系统中搜索与多字节字符串编码相关的可用软件包。'
- en: Test yourself
  id: totrans-258
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试自己
- en: '**[1](#ch07qa2q0a1)**'
  id: totrans-259
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](#ch07qa2q0a1)**'
- en: ''
  id: totrans-260
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following packages would you need to install to provide a database
    for a LAMP web server?
  id: totrans-261
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 您需要安装以下哪个软件包来为 LAMP Web 服务器提供数据库？
- en: ''
  id: totrans-262
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: mariadb
  id: totrans-263
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: mariadb
- en: httpd
  id: totrans-264
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: httpd
- en: mariadb-client
  id: totrans-265
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: mariadb-client
- en: mariadb-server
  id: totrans-266
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: mariadb-server
- en: '**[2](#ch07qa2q0a2)**'
  id: totrans-267
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](#ch07qa2q0a2)**'
- en: ''
  id: totrans-268
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of these platforms enables networking between browser clients and data
    resources on a server?
  id: totrans-269
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 哪个平台允许在浏览器客户端和服务器上的数据资源之间建立网络连接？
- en: ''
  id: totrans-270
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Apache
  id: totrans-271
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: Apache
- en: Perl
  id: totrans-272
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: Perl
- en: PHP
  id: totrans-273
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: PHP
- en: systemctl
  id: totrans-274
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: systemctl
- en: '**[3](#ch07qa2q0a3)**'
  id: totrans-275
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](#ch07qa2q0a3)**'
- en: ''
  id: totrans-276
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`localhost` is a designation used to invoke'
  id: totrans-277
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`localhost` 是一个用于调用的标识'
- en: ''
  id: totrans-278
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The DocumentRoot of a remote client
  id: totrans-279
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 远程客户端的 DocumentRoot
- en: The DocumentRoot of the server from which the command is run
  id: totrans-280
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行命令的服务器上的 DocumentRoot
- en: The .conf file on a web server
  id: totrans-281
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 网络服务器上的 .conf 文件
- en: The default HTTP port on a host server
  id: totrans-282
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: 主服务器上的默认 HTTP 端口
- en: '**[4](#ch07qa2q0a4)**'
  id: totrans-283
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[4](#ch07qa2q0a4)**'
- en: ''
  id: totrans-284
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Where, by default, is the DocumentRoot of an Apache web server?
  id: totrans-285
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 默认情况下，Apache 网络服务器的 DocumentRoot 在哪里？
- en: ''
  id: totrans-286
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: /var/www/html/
  id: totrans-287
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /var/www/html/
- en: /var/html/www/
  id: totrans-288
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /var/html/www/
- en: /etc/apache2/
  id: totrans-289
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /etc/apache2/
- en: /home/username/www/html/
  id: totrans-290
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: /home/username/www/html/
- en: '**[5](#ch07qa2q0a5)**'
  id: totrans-291
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[5](#ch07qa2q0a5)**'
- en: ''
  id: totrans-292
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following commands will allow web browser traffic into a CentOS
    web server using port 80?
  id: totrans-293
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪个命令允许通过端口 80 将网络浏览器流量引入 CentOS 网络服务器？
- en: ''
  id: totrans-294
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`firewalld --add-service=http`'
  id: totrans-295
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`firewalld --add-service=http`'
- en: '`firewall-cmd --add-service=https`'
  id: totrans-296
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`firewall-cmd --add-service=https`'
- en: '`firewall --add-service=https`'
  id: totrans-297
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`firewall --add-service=https`'
- en: '`firewall-cmd --add-service=http`'
  id: totrans-298
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`firewall-cmd --add-service=http`'
- en: '**[6](#ch07qa2q0a6)**'
  id: totrans-299
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[6](#ch07qa2q0a6)**'
- en: ''
  id: totrans-300
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following commands will let you successfully log in to your MariaDB
    shell?
  id: totrans-301
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪个命令可以让你成功登录到你的 MariaDB 命令行界面？
- en: ''
  id: totrans-302
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`mariadb -u root`'
  id: totrans-303
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mariadb -u root`'
- en: '`mysql root -p`'
  id: totrans-304
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mysql root -p`'
- en: '`mariadb -r -p`'
  id: totrans-305
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mariadb -r -p`'
- en: '`mysql -u root -p`'
  id: totrans-306
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mysql -u root -p`'
- en: '**[7](#ch07qa2q0a7)**'
  id: totrans-307
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[7](#ch07qa2q0a7)**'
- en: ''
  id: totrans-308
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following `yum` commands will display contextual data about the
    specified package?
  id: totrans-309
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪个 `yum` 命令可以显示指定软件包的上下文数据？
- en: ''
  id: totrans-310
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`yum search php-mysql.x86_64`'
  id: totrans-311
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`yum search php-mysql.x86_64`'
- en: '`yum describe php-mysql.x86_64`'
  id: totrans-312
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`yum describe php-mysql.x86_64`'
- en: '`yum info php-mysql.x86_64`'
  id: totrans-313
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`yum info php-mysql.x86_64`'
- en: '`yum data php-mysql.x86_64`'
  id: totrans-314
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`yum data php-mysql.x86_64`'
- en: '**[8](#ch07qa2q0a8)**'
  id: totrans-315
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[8](#ch07qa2q0a8)**'
- en: ''
  id: totrans-316
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Which of the following tools is optional for running MediaWiki on a LAMP server?
  id: totrans-317
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下哪个工具是运行 MediaWiki 在 LAMP 服务器上的可选工具？
- en: ''
  id: totrans-318
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: php-mysql
  id: totrans-319
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: php-mysql
- en: mbstring
  id: totrans-320
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: mbstring
- en: php-imagick
  id: totrans-321
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: php-imagick
- en: php7.0-xml
  id: totrans-322
  prefs:
  - PREF_BQ
  - PREF_OL
  type: TYPE_NORMAL
  zh: php7.0-xml
- en: Answer key
  id: totrans-323
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 答案键
- en: '**[1.](#ch07qa1q1)**'
  id: totrans-324
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1.](#ch07qa1q1)**'
- en: ''
  id: totrans-325
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: d
  id: totrans-326
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: d
- en: '**[2.](#ch07qa1q2)**'
  id: totrans-327
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2.](#ch07qa1q2)**'
- en: ''
  id: totrans-328
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: a
  id: totrans-329
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a
- en: '**[3.](#ch07qa1q3)**'
  id: totrans-330
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3.](#ch07qa1q3)**'
- en: ''
  id: totrans-331
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: b
  id: totrans-332
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: b
- en: '**[4.](#ch07qa1q4)**'
  id: totrans-333
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[4.](#ch07qa1q4)**'
- en: ''
  id: totrans-334
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: a
  id: totrans-335
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a
- en: '**[5.](#ch07qa1q5)**'
  id: totrans-336
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[5.](#ch07qa1q5)**'
- en: ''
  id: totrans-337
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: d
  id: totrans-338
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: d
- en: '**[6.](#ch07qa1q6)**'
  id: totrans-339
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[6.](#ch07qa1q6)**'
- en: ''
  id: totrans-340
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: d
  id: totrans-341
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: d
- en: '**[7.](#ch07qa1q7)**'
  id: totrans-342
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[7.](#ch07qa1q7)**'
- en: ''
  id: totrans-343
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: c
  id: totrans-344
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: c
- en: '**[8.](#ch07qa1q8)**'
  id: totrans-345
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[8.](#ch07qa1q8)**'
- en: ''
  id: totrans-346
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: c
  id: totrans-347
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: c
