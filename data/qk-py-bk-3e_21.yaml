- en: Chapter 19\. Using Python libraries
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第19章。使用Python库
- en: '*This chapter covers*'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: Managing various data types—strings, numbers, and more
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理各种数据类型——字符串、数字等
- en: Manipulating files and storage
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作文件和存储
- en: Accessing operating system services
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问操作系统服务
- en: Using internet protocols and formats
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用互联网协议和格式
- en: Developing and debugging tools
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开发和调试工具
- en: Accessing PyPI (a.k.a. “The Cheese Shop”)
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问PyPI（也称为“奶酪店”）
- en: Installing Python libraries and virtual environments using pip and venv
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用pip和venv安装Python库和虚拟环境
- en: Python has long proclaimed that one of its key advantages is its “batteries
    included” philosophy. This means that a stock install of Python comes with a rich
    standard library that lets you handle a wide variety of situations without the
    need to install additional libraries. This chapter gives you a high-level survey
    of some of the contents of the standard library, as well as some suggestions on
    finding and installing external modules.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Python长期以来一直宣称其关键优势之一是“内置电池”哲学。这意味着Python的默认安装包含一个丰富的标准库，让你能够处理各种情况而无需安装额外的库。本章为您提供了标准库部分内容的概述，以及一些关于查找和安装外部模块的建议。
- en: '19.1\. “Batteries included”: The standard library'
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 19.1。“内置电池”：标准库
- en: In Python, what’s considered to be the *library* consists of several components,
    including built-in data types and constants that can be used without an `import`
    statement, such as numbers and lists, as well as some built-in functions and exceptions.
    The largest part of the library is an extensive collection of modules. If you
    have Python, you also have libraries to manipulate diverse types of data and files,
    to interact with your operating system, to write servers and clients for many
    internet protocols, and to develop and debug your code.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在Python中，被认为是*库*的部分包括几个组件，包括可以不使用`import`语句使用的内置数据类型和常量，如数字和列表，以及一些内置函数和异常。库的最大部分是一个广泛的模块集合。如果你有Python，你也有用于操作各种类型的数据和文件的库、与操作系统交互的库、为许多互联网协议编写服务器和客户端的库，以及用于开发和调试代码的库。
- en: What follows is a survey of the high points. Although most of the major modules
    are mentioned, for the most complete and current information I recommend that
    you spend time on your own exploring the library reference that’s part of the
    Python documentation. In particular, before you go in search of an external library,
    be sure to scan through what Python already offers. You may be surprised by what
    you find.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的内容是对高点的概述。尽管提到了大多数主要模块，但我仍然建议您花时间探索Python文档中的一部分库参考，以获得最完整和最新的信息。特别是，在寻找外部库之前，请务必浏览Python已经提供的功能。你可能会对你的发现感到惊讶。
- en: 19.1.1\. Managing various data types
  id: totrans-13
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.1.1。管理各种数据类型
- en: 'The standard library naturally contains support for Python’s built-in types,
    which I touch on in this section. In addition, three categories in the standard
    library deal with various data types: string services, data types, and numeric
    modules.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 标准库自然包含对Python内置类型的支持，我在本节中提到了这一点。此外，标准库中的三个类别处理各种数据类型：字符串服务、数据类型和数值模块。
- en: String services include the modules in [table 19.1](#ch19table01) that deal
    with bytes as well as strings. The three main things these modules deal with are
    strings and text, sequences of bytes, and Unicode operations.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 字符串服务包括[表19.1](#ch19table01)中处理字节和字符串的模块。这些模块主要处理字符串和文本、字节序列以及Unicode操作。
- en: Table 19.1\. String services modules
  id: totrans-16
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表19.1。字符串服务模块
- en: '| Module | Description and possible uses |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| 模块 | 描述和可能用途 |'
- en: '| --- | --- |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| string | Compare with string constants, such as digits or whitespace; format
    strings (see [chapter 6](kindle_split_017.html#ch06)) |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| 字符串 | 与字符串常量（如数字或空白字符）进行比较；格式化字符串（见第6章） |'
- en: '| re | Search and replace text using regular expressions (see [chapter 16](kindle_split_028.html#ch16))
    |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| re | 使用正则表达式搜索和替换文本（见第16章） |'
- en: '| struct | Interpret bytes as packed binary data, and read and write structured
    data to/from files |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| struct | 将字节解释为打包的二进制数据，并从文件中读取和写入结构化数据 |'
- en: '| difflib | Use helpers for computing deltas, find differences between strings
    or sequences, and create patches and diff files |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| difflib | 使用计算差异、查找字符串或序列之间的差异以及创建补丁和diff文件的辅助工具 |'
- en: '| textwrap | Wrap and fill text, and format text by breaking lines or adding
    spaces |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| textwrap | 包装和填充文本，并通过断行或添加空格来格式化文本 |'
- en: The data types category is a diverse collection of modules covering various
    data types, particularly time, date, and collections, as shown in [table 19.2](#ch19table02).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 数据类型类别是一个多样化的模块集合，涵盖了各种数据类型，特别是时间、日期和集合，如[表 19.2](#ch19table02)所示。
- en: Table 19.2\. Data types modules
  id: totrans-25
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 19.2\. 数据类型模块
- en: '| Module | Description and possible uses |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| 模块 | 描述和可能用途 |'
- en: '| --- | --- |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| datetime, calendar | Date, time, and calendar operations |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| datetime, calendar | 日期、时间和日历操作 |'
- en: '| collections | Container data types |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| collections | 容器数据类型 |'
- en: '| enum | Allows creation of enumerator classes that bind symbolic names to
    constant values |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| enum | 允许创建将符号名称绑定到常量值的枚举类 |'
- en: '| array | Efficient arrays of numeric values |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| 数组 | 高效的数值数组 |'
- en: '| sched | Event scheduler |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| sched | 事件调度器 |'
- en: '| queue | Synchronized queue class |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| queue | 同步队列类 |'
- en: '| copy | Shallow and deep copy operations |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| copy | 浅拷贝和深拷贝操作 |'
- en: '| pprint | Data pretty printer |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| pprint | 数据美化打印器 |'
- en: '| typing | Support for annotating code with hints as to the types of objects,
    particularly of function parameters and return values |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| typing | 支持使用类型提示注解代码，特别是函数参数和返回值的类型 |'
- en: As the name indicates, the numeric and mathematical modules deal with numbers
    and mathematical operations, and the most common of these modules are listed in
    [table 19.3](#ch19table03). These modules have everything you need to create your
    own numeric types and handle a wide range of math operations.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如其名所示，数值和数学模块处理数字和数学运算，其中最常见的模块列在[表 19.3](#ch19table03)中。这些模块包含了您创建自己的数值类型和处理广泛数学运算所需的一切。
- en: Table 19.3\. Numeric and mathematical modules
  id: totrans-38
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 19.3\. 数值和数学模块
- en: '| Module | Description and possible uses |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| 模块 | 描述和可能用途 |'
- en: '| --- | --- |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| numbers | Numeric abstract base classes |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| 数字 | 数值抽象基类 |'
- en: '| math, cmath | Mathematical functions for real and complex numbers |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| math, cmath | 实数和复数的数学函数 |'
- en: '| decimal | Decimal fixed-point and floating-point arithmetic |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| decimal | 十进制定点和浮点算术 |'
- en: '| statistics | Functions for calculating mathematical statistics |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| statistics | 计算数学统计的函数 |'
- en: '| fractions | Rational numbers |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| fractions | 有理数 |'
- en: '| random | Generate pseudorandom numbers and choices, and shuffle sequences
    |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| random | 生成伪随机数和选择，以及洗牌序列 |'
- en: '| itertools | Functions that create iterators for efficient looping |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| itertools | 创建迭代器的函数，用于高效循环 |'
- en: '| functools | Higher-order functions and operations on callable objects |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| functools | 高阶函数和对可调用对象的操作 |'
- en: '| operator | Standard operators as functions |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| operator | 作为函数的标准运算符 |'
- en: 19.1.2\. Manipulating files and storage
  id: totrans-50
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.1.2\. 操作文件和存储
- en: Another broad category in the standard library covers files, storage, and data
    persistence and is summarized in [table 19.4](#ch19table04). This category ranges
    from modules for file access to modules for data persistence and compression and
    handling special file formats.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 标准库中的另一个广泛类别涵盖了文件、存储和数据持久性，总结在[表 19.4](#ch19table04)中。这个类别从文件访问模块到数据持久性和压缩以及处理特殊文件格式的模块。
- en: Table 19.4\. File and storage modules
  id: totrans-52
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 19.4\. 文件和存储模块
- en: '| Module | Description and possible uses |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| 模块 | 描述和可能用途 |'
- en: '| --- | --- |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| os.path | Perform common pathname manipulations |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| os.path | 执行常见的路径名操作 |'
- en: '| pathlib | Deal with pathnames in an object-oriented way |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| pathlib | 以面向对象的方式处理路径名 |'
- en: '| fileinput | Iterate over lines from multiple input streams |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| fileinput | 遍历多个输入流的行 |'
- en: '| filecmp | Compare files and directories |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| filecmp | 比较文件和目录 |'
- en: '| tempfile | Generate temporary files and directories |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| tempfile | 生成临时文件和目录 |'
- en: '| glob, fnmatch | Use UNIX-style pathname and filename pattern handling |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| glob, fnmatch | 使用 UNIX 风格的路径名和文件名模式处理 |'
- en: '| linecache | Gain random access to text lines |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| linecache | 获取对文本行的随机访问 |'
- en: '| shutil | Perform high-level file operations |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| shutil | 执行高级文件操作 |'
- en: '| pickle, shelve | Enable Python object serialization and persistence |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| pickle, shelve | 启用 Python 对象序列化和持久化 |'
- en: '| sqlite3 | Work with a DB-API 2.0 interface for SQLite databases |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| sqlite3 | 使用 SQLite 数据库的 DB-API 2.0 接口 |'
- en: '| zlib, gzip, bz2, zipfile, tarfile | Work with archive files and compressions
    |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| zlib, gzip, bz2, zipfile, tarfile | 与归档文件和压缩操作 |'
- en: '| csv | Read and write CSV files |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| csv | 读取和写入 CSV 文件 |'
- en: '| configparser | Use a configuration file parser; read/write Windows-style
    configuration .ini files |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| configparser | 使用配置文件解析器；读取/写入Windows风格的配置 .ini 文件 |'
- en: 19.1.3\. Accessing operating system services
  id: totrans-68
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.1.3\. 访问操作系统服务
- en: This category is another broad one, containing modules for dealing with your
    operating system. As shown in [table 19.5](#ch19table05), this category includes
    tools for handling command-line parameters, redirecting file and print output
    and input, writing to log files, running multiple threads or processes, and loading
    non-Python (usually, C) libraries for use in Python.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这个类别是另一个广泛的类别，包含处理操作系统模块。如[表19.5](#ch19table05)所示，这个类别包括处理命令行参数、重定向文件和打印输出和输入、写入日志文件、运行多个线程或进程以及加载非Python（通常是C）库以在Python中使用的工具。
- en: Table 19.5\. Operating system modules
  id: totrans-70
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表19.5\. 操作系统模块
- en: '| Module | Description |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| Module | 描述 |'
- en: '| --- | --- |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| os | Miscellaneous operating system interfaces |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| os | 杂项操作系统接口 |'
- en: '| io | Core tools for working with streams |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| io | 处理流的工具核心 |'
- en: '| time | Time access and conversions |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| time | 时间访问和转换 |'
- en: '| optparse | Powerful command-line option parser |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| optparse | 强大的命令行选项解析器 |'
- en: '| logging | Logging facility for Python |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| logging | Python的日志记录设施 |'
- en: '| getpass | Portable password input |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| getpass | 可移植的密码输入 |'
- en: '| curses | Terminal handling for character-cell displays |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| curses | 用于字符单元格显示的终端处理 |'
- en: '| platform | Access to underlying platform’s identifying data |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| platform | 访问底层平台标识数据 |'
- en: '| ctypes | Foreign function library for Python |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| ctypes | Python的外部函数库 |'
- en: '| select | Waiting for I/O completion |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| select | 等待I/O完成 |'
- en: '| threading | Higher-level threading interface |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| threading | 高级线程接口 |'
- en: '| multiprocessing | Process-based threading interface |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| multiprocessing | 基于进程的线程接口 |'
- en: '| subprocess | Subprocess management |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| subprocess | 子进程管理 |'
- en: 19.1.4\. Using internet protocols and formats
  id: totrans-86
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.1.4\. 使用互联网协议和格式
- en: The internet protocols and formats category is concerned with encoding and decoding
    the many standard formats used for data exchange on the internet, from MIME and
    other encodings to JSON and XML. This category also has modules for writing servers
    and clients for common services, particularly HTTP, and a generic socket server
    for writing servers for custom services. The most commonly used of these modules
    are listed in [table 19.6](#ch19table06).
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网协议和格式类别涉及编码和解码在互联网上用于数据交换的许多标准格式，从MIME和其他编码到JSON和XML。这个类别还包括编写常见服务（尤其是HTTP）的客户端和服务器以及用于编写自定义服务的通用套接字服务器的模块。这些模块中最常用的列在[表19.6](#ch19table06)中。
- en: Table 19.6\. Modules supporting internet protocols and formats
  id: totrans-88
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表19.6\. 支持互联网协议和格式的模块
- en: '| Module | Description |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| Module | 描述 |'
- en: '| --- | --- |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| socket, ssl | Low-level networking interface and SSL wrapper for socket objects
    |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| socket, ssl | 低级网络接口和套接字对象的SSL包装器 |'
- en: '| email | Email and MIME handling package |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| email | 电子邮件和MIME处理包 |'
- en: '| json | JSON encoder and decoder |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| json | JSON编码和解码器 |'
- en: '| mailbox | Manipulate mailboxes in various formats |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| mailbox | 操作各种格式的邮箱 |'
- en: '| mimetypes | Map filenames to MIME types |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| mimetypes | 将文件名映射到MIME类型 |'
- en: '| base64, binhex, binascii, quopri, uu | Encode/decode files or streams with
    various encodings |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| base64, binhex, binascii, quopri, uu | 使用各种编码对文件或流进行编码/解码 |'
- en: '| html.parser, html.entities | Parse HTML and XHTML |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| html.parser, html.entities | 解析HTML和XHTML |'
- en: '| xml.parsers.expat, xml.dom, xml.sax, xml.etree.ElementTree | Various parsers
    and tools for XML |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| xml.parsers.expat, xml.dom, xml.sax, xml.etree.ElementTree | XML的各种解析器和工具
    |'
- en: '| cgi, cgitb | Common Gateway Interface support |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| cgi, cgitb | 常见网关接口支持 |'
- en: '| wsgiref | WSGI utilities and reference implementation |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| wsgiref | WSGI实用工具和参考实现 |'
- en: '| urllib.request, urllib.parse | Open and parse URLs |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| urllib.request, urllib.parse | 打开和解析URL |'
- en: '| ftplib, poplib, imaplib, nntplib, smtplib, telnetlib | Clients for various
    internet protocols |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| ftplib, poplib, imaplib, nntplib, smtplib, telnetlib | 各种互联网协议的客户端 |'
- en: '| socketserver | Framework for network servers |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| socketserver | 网络服务器框架 |'
- en: '| http.server | HTTP servers |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| http.server | HTTP服务器 |'
- en: '| xmlrpc.client, xmlrpc.server | XML-RPC client and server |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| xmlrpc.client, xmlrpc.server | XML-RPC客户端和服务器 |'
- en: 19.1.5\. Development and debugging tools and runtime services
  id: totrans-106
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.1.5\. 开发和调试工具以及运行时服务
- en: Python has several modules to help you debug, test, modify, and otherwise interact
    with your Python code at runtime. As shown in [table 19.7](#ch19table07), this
    category includes two testing tools, profilers, modules to interact with error
    tracebacks, the interpreter’s garbage collection, and so on, as well as modules
    that let you tweak the importing of other modules.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Python 有几个模块可以帮助您在运行时调试、测试、修改以及与其他 Python 代码交互。如 [表 19.7](#ch19table07) 所示，此类类别包括两个测试工具、性能分析器、与错误跟踪交互的模块、解释器的垃圾回收以及允许您调整其他模块导入的模块。
- en: Table 19.7\. Development, debugging, and runtime modules
  id: totrans-108
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 19.7\. 开发、调试和运行时模块
- en: '| Module | Description |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| 模块 | 描述 |'
- en: '| --- | --- |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| pydoc | Documentation generator and online help system |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| pydoc | 文档生成器和在线帮助系统 |'
- en: '| doctest | Test interactive Python examples |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| doctest | 测试交互式 Python 示例 |'
- en: '| unittest | Unit testing framework |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| unittest | 单元测试框架 |'
- en: '| test.support | Utility functions for tests |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| test.support | 测试的实用函数 |'
- en: '| pdb | Python debugger |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| pdb | Python 调试器 |'
- en: '| profile, cProfile | Python profilers |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| profile, cProfile | Python 性能分析器 |'
- en: '| timeit | Measure execution time of small code snippets |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| timeit | 测量小代码片段的执行时间 |'
- en: '| trace | Trace or track Python statement execution |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| trace | 跟踪或追踪 Python 语句执行 |'
- en: '| sys | System-specific parameters and functions |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| sys | 系统特定参数和函数 |'
- en: '| atexit | Exit handlers |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| atexit | 退出处理程序 |'
- en: '| __future__ | Future statement definitions—features to be added to Python
    |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| __future__ | 未来语句定义——即将添加到 Python 的功能 |'
- en: '| gc | Garbage collector interface |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| gc | 垃圾回收器接口 |'
- en: '| inspect | Inspect live objects |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| 检查 | 检查活动对象 |'
- en: '| imp | Access the import internals |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| imp | 访问导入内部 |'
- en: '| zipimport | Import modules from zip archives |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| zipimport | 从 zip 存档导入模块 |'
- en: '| modulefinder | Find modules used by a script |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| modulefinder | 查找脚本使用的模块 |'
- en: 19.2\. Moving beyond the standard library
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 19.2\. 超越标准库
- en: Although Python’s “batteries included” philosophy and well-stocked standard
    library mean that you can do a lot with Python out of the box, there will inevitably
    come a situation in which you need some functionality that doesn’t come with Python.
    This section surveys your options when you need to do something that isn’t in
    the standard library.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Python 的“内置电池”哲学和丰富的标准库意味着您可以使用 Python 做很多事情，但不可避免地会有需要一些 Python 没有提供的功能的情况。本节概述了您在需要执行标准库中没有的功能时的选择。
- en: 19.3\. Adding more Python libraries
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 19.3\. 添加更多 Python 库
- en: Finding a Python package or module can be as easy as entering the functionality
    you’re looking for (such as `mp3 tags` and `Python`) in a search engine and then
    sorting through the results. If you’re lucky, you may find the module you need
    packaged for your OS—with an executable Windows or macOS installer or a package
    for your Linux distribution.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 寻找一个 Python 包或模块可能就像在搜索引擎中输入您要查找的功能（例如 `mp3 标签` 和 `Python`）然后筛选结果一样简单。如果您幸运的话，您可能会找到为您的操作系统打包的模块——带有可执行的
    Windows 或 macOS 安装程序或适用于您的 Linux 发行版的包。
- en: This technique is one of the easiest ways to add a library to your Python installation,
    because the installer or your package manager takes care of all the details of
    adding the module to your system correctly. It can also be the answer for installing
    more complex libraries, such as scientific libraries with complex build requirements
    and dependencies.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术是向您的 Python 安装添加库的最简单方法之一，因为安装程序或您的包管理器会负责将模块正确添加到您的系统中的所有细节。它也可以是安装更复杂库的答案，例如具有复杂构建要求和依赖关系的科学库。
- en: In general, except for scientific libraries, such prebuilt packages aren’t the
    rule for Python software. Such packages tend to be a bit older, and they offer
    less flexibility in where and how they’re installed.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，除了科学库之外，这些预构建的包并不是 Python 软件的常规做法。这些包通常稍微旧一些，并且在安装位置和方式上提供的灵活性较少。
- en: 19.4\. Installing Python libraries using pip and venv
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 19.4\. 使用 pip 和 venv 安装 Python 库
- en: 'If you need a third-party module that isn’t prepackaged for your platform,
    you’ll have to turn to its source distribution. This fact presents a couple of
    problems:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要一个未为您的平台预打包的第三方模块，您将不得不求助于其源代码分发。这一事实带来了一些问题：
- en: To install the module, you must find and download it.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要安装该模块，您必须找到并下载它。
- en: Installing even a single Python module correctly can involve a certain amount
    of hassle in dealing with Python’s paths and your system’s permissions, which
    makes a standard installation system helpful.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确安装单个Python模块可能需要处理Python的路径和系统权限的一定程度的麻烦，这使得标准的安装系统很有帮助。
- en: Python offers `pip` as the current solution to both problems. `pip` tries to
    find the module in the Python Package index (more about that soon), downloads
    it and any dependencies, and takes care of the installation. The basic syntax
    of `pip` is quite simple. To install the popular requests library from the command
    line, for example, all you have to do is
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: Python提供`pip`作为解决这两个问题的当前解决方案。`pip`试图在Python包索引中查找模块（关于这一点稍后讨论），下载它及其依赖项，并负责安装。`pip`的基本语法相当简单。例如，要从命令行安装流行的requests库，你只需要这样做：
- en: '[PRE0]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Upgrading to the library’s latest version requires only the addition of the
    `–-upgrade` switch:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 升级到库的最新版本只需要添加`–-upgrade`开关：
- en: '[PRE1]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Finally, if you need to specify a particular version of a package, you can
    append it to the name like this:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，如果你需要指定包的特定版本，你可以像这样将其附加到名称上：
- en: '[PRE2]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 19.4.1\. Installing with the –user flag
  id: totrans-143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.4.1\. 使用–user标志安装
- en: 'On many occasions, you can’t or don’t want to install a Python package in the
    main system instance of Python. Maybe you need a bleeding-edge version of the
    library, but some other application (or the system itself) still uses an older
    version. Or maybe you don’t have access privileges to modify the system’s default
    Python. In cases like those, one answer is to install the library with the `–-user`
    flag. This flag installs the library in the user’s home directory, where it’s
    not accessible by any other users. To install `requests` for only the local user:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，你无法或在Python的主系统实例中不希望安装Python包。可能你需要库的最新版本，但某些其他应用程序（或系统本身）仍在使用较旧版本。或者，你可能没有权限修改系统的默认Python。在这种情况下，一个解决方案是使用`–-user`标志安装库。这个标志将库安装到用户的家目录中，那里其他用户无法访问。要仅为本地用户安装`requests`：
- en: '[PRE3]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: As I mentioned previously, this scheme is particularly useful if you’re working
    on a system on which you don’t have sufficient administrator rights to install
    software, or if you want to install a different version of a module. If your needs
    go beyond the basic installation methods discussed here, a good place to start
    is “Installing Python Modules,” which you can find in the Python documentation.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 如我之前提到的，如果你在一个没有足够管理员权限安装软件的系统上工作，或者你想安装模块的不同版本，这种方案特别有用。如果你的需求超出了这里讨论的基本安装方法，一个好的起点是“安装Python模块”，你可以在Python文档中找到它。
- en: 19.4.2\. Virtual environments
  id: totrans-147
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.4.2\. 虚拟环境
- en: You have another, better option if you need to avoid installing libraries in
    the system Python. This option is called a virtual environment (virtualenv). A
    *virtual environment* is a self-contained directory structure that contains both
    an installation of Python and its additional packages. Because the entire Python
    environment is contained in the virtual environment, the libraries and modules
    installed there can’t conflict with those in the main system or in other virtual
    environments, allowing different applications to use different versions on both
    Python and its packages.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要避免在系统Python中安装库，你还有一个更好的选择，这个选项被称为虚拟环境（virtualenv）。虚拟环境是一个包含Python安装及其附加包的独立目录结构。因为整个Python环境都包含在虚拟环境中，所以那里安装的库和模块不会与主系统或其他虚拟环境中的库冲突，允许不同的应用程序使用不同的Python及其包版本。
- en: 'Creating and using a virtual environment takes two steps. First, you create
    the environment:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 创建和使用虚拟环境需要两个步骤。首先，你创建环境：
- en: '[PRE4]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This step creates the environment with Python and `pip` installed in a directory
    called test-env. Then, when the environment is created, you activate it. On Windows,
    you do this:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 此步骤在名为test-env的目录中创建环境，其中安装了Python和`pip`。然后，当环境创建完成后，你激活它。在Windows上，你这样做：
- en: '[PRE5]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'On Unix or MacOS systems, you source the activate script:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在Unix或MacOS系统上，你使用source激活脚本：
- en: '[PRE6]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'When you’ve activated the environment, you can use `pip` to manage packages
    as earlier, but in the virtual environment `pip` is a standalone command:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 当你激活了环境后，你可以像之前一样使用`pip`管理包，但在虚拟环境中`pip`是一个独立的命令：
- en: '[PRE7]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: In addition, whatever version of Python you used to create the environment is
    the default Python for that environment, so you can use just `python` instead
    of `python3` or `python3.6`.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，无论你使用什么版本的 Python 创建环境，该环境默认的 Python 就是那个版本，因此你可以只使用 `python` 而不是 `python3`
    或 `python3.6`。
- en: Virtual environments are very useful for managing projects and their dependencies
    and are very much a standard practice, particularly for developers working on
    multiple projects. For more information, look at the “[Virtual Environments and
    Packages](#ch19lev2sec7)” section of the Python tutorial in the Python online
    documentation.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟环境对于管理项目和它们的依赖非常有用，并且已经成为一种标准做法，尤其是对于在多个项目上工作的开发者。更多信息，请参阅 Python 在线文档中 Python
    教程的“[虚拟环境和包](#ch19lev2sec7)”部分。
- en: 19.5\. PyPI (a.k.a. “The Cheese Shop”)
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 19.5. PyPI（又称“奶酪店”）
- en: 'Although `distutils` packages get the job done, there’s one catch: You have
    to find the correct package, which can be a chore. And after you’ve found a package,
    it would be nice to have a reasonably reliable source from which to download that
    package.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然使用 `distutils` 包可以完成任务，但有一个问题：你必须找到正确的包，这可能是一项繁琐的工作。而且在你找到包之后，有一个合理可靠的来源来下载该包会很好。
- en: To meet this need, various Python package repositories have been made available
    over the years. Currently, the official (but by no means the only) repository
    for Python code is the Python Package Index, or PyPI (formerly also known as “The
    Cheese Shop,” after the Monty Python sketch) on the Python website. You can access
    it from a link on the main page or directly at [https://pypi.python.org](https://pypi.python.org).
    PyPI contains more than 6,000 packages for various Python versions, listed by
    date added and name, but also searchable and broken down by category.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 为了满足这一需求，多年来已经提供了各种 Python 包仓库。目前，Python 代码的官方（但绝非唯一）仓库是 Python 包索引，或 PyPI（以前也被称为“奶酪店”，这是蒙提·派森的喜剧片段），位于
    Python 网站上。你可以从主页上的链接或直接在 [https://pypi.python.org](https://pypi.python.org) 访问它。PyPI
    包含了超过 6,000 个针对各种 Python 版本的包，按添加日期和名称列出，但也可以按类别搜索和细分。
- en: At this writing, a new version of PyPI is in the wings; currently, it’s called
    “The Warehouse.” This version is still in testing but promises to provide a much
    smoother and friendlier search experience.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，PyPI 的新版本正在准备中；目前，它被称为“仓库”。这个版本仍在测试中，但承诺将提供更流畅、更友好的搜索体验。
- en: PyPI is the logical next stop if you can’t find the functionality you want with
    a search of the standard library.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你无法通过搜索标准库找到所需的功能，PyPI 就是下一个合理的去处。
- en: Summary
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: Python has a rich standard library that covers more common situations than many
    other languages, and you should check what’s in the standard library carefully
    before looking for external modules.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 拥有一个丰富的标准库，它涵盖了比许多其他语言更多的常见情况，因此在寻找外部模块之前，你应该仔细检查标准库中有什么。
- en: If you do need an external module, prebuilt packages for your operating system
    are the easiest option, but they’re sometimes older and often hard to find.
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你确实需要外部模块，为你的操作系统预构建的包是最容易的选择，但它们有时会过时，而且往往难以找到。
- en: The standard way to install from source is to use pip, and the best way to prevent
    conflicts among multiple projects is to create virtual environments with the venv
    module.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从源安装的标准方式是使用 pip，而创建虚拟环境以避免多个项目之间冲突的最佳方式是使用 venv 模块。
- en: Usually, the logical first step in searching for external modules is the Python
    Package Index (PyPI).
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通常，在搜索外部模块时，逻辑上的第一步是查找 Python 包索引（PyPI）。
