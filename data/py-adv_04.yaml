- en: '4 User errors: Everybody makes mistakes'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4 用户错误：每个人都会犯错误
- en: In this chapter
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章
- en: Erik discovers that users don’t always do what you tell them to
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 艾瑞克发现用户并不总是按照你的指示去做
- en: Erik learns how to use loops to repeat his question to the user
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 艾瑞克学习如何使用循环重复向用户提问
- en: Simon helps Erik make the menus more robust
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西蒙帮助艾瑞克使菜单更加健壮
- en: “Yesterday you did a great job, Erik,” Simon said the next day. “You wrote a
    very good function, you added default arguments, and you tested it.”
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: “昨天你做得很好，艾瑞克，”西蒙第二天说，“你写了一个非常好的函数，你添加了默认参数，并测试了它。”
- en: “Yes,” Erik answered. “I think it’s a good program. I want to show it to my
    friends!”
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，”艾瑞克回答。“我认为这是一个好程序。我想向我的朋友们展示！”
- en: “Wait, wait,” Simon said. “I don’t think it’s ready to use yet.”
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: “等等，等等，”西蒙说，“我认为它还没有准备好使用。”
- en: “Why? I think it works perfectly!”
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: “为什么？我认为它工作得很好！”
- en: '“Oh, really? Let me try.” Simon looked like he had something in mind. He started
    Erik’s program again, and at the first menu he entered `coffee`:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: “哦，真的吗？让我试试。”西蒙看起来好像有什么想法。他重新启动了艾瑞克的程序，在第一个菜单中他输入了`coffee`：
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: ❶ Error messages from Python
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ Python的错误信息
- en: “What are you doing?” Erik was enraged. “You should enter only numbers and not
    words!”
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: “你在做什么？”艾瑞克愤怒地说，“你应该只输入数字，而不是单词！”
- en: “But you gave me a list and asked what I wanted. I wanted coffee, so I entered
    `coffee`. What’s wrong?” Simon tried to look innocent, but he couldn’t hide his
    smile.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: “但是你给了我一个列表并问我想要什么。我想喝咖啡，所以我输入了`coffee`。怎么了？”西蒙试图表现得无辜，但他无法掩饰他的笑容。
- en: “Well, for such *stupid* users like you, I’ll print in ALL CAPS that you should
    enter a *number*!” Erik grumbled.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，对于像你这样*愚蠢*的用户，我会全部大写地打印出你应该输入一个*数字*！”艾瑞克抱怨。
- en: '“Okay, okay, let me try again,” said Simon. He started the program again, and
    at the first menu, he entered `42`:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: “好吧，好吧，让我再试一次，”西蒙说。他重新启动了程序，在第一个菜单中，他输入了`42`：
- en: '[PRE1]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: ❶ Error messages from Python
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ Python的错误信息
- en: “Again? You broke it again?” Erik was ready to slap Simon’s hands on the keyboard.
    “Didn’t you see that there are only three choices? Why did you enter 42?”
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: “又来了？你又把它搞坏了？”艾瑞克准备拍西蒙的键盘。 “你没看到只有三个选项吗？你为什么输入42？”
- en: “First, because 42 is my favorite number. Second, yes, it was my mistake. Users
    make mistakes, you know. Seriously, I wanted to show you that your program should
    be ready for that. You can print whatever you want, in all caps, but there *will*
    be users who won’t read it. There will be users who make mistakes.”
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: “首先，因为42是我的幸运数字。其次，是的，那是我犯的错误。用户会犯错误，你知道的。说真的，我想向你展示你的程序应该为此做好准备。你可以打印任何你想要的内容，全部大写，但会有用户不会阅读它。会有用户犯错误。”
- en: “What should I do about it?” Erik was still angry at his brother, but he tended
    to agree with him. He made mistakes with programs himself.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: “我该怎么做？”艾瑞克仍然对他哥哥很生气，但他倾向于同意他的观点。他自己也犯过程序错误。
- en: “You should check what the user enters and tell them if the input is wrong.
    Let’s think what we can do here.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: “你应该检查用户输入的内容，并告诉他们输入是否错误。让我们想想我们能做什么。
- en: “What should the user enter in the first menu?” Simon asked.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: “用户在第一个菜单中应该输入什么？”西蒙问。
- en: “They should enter 1, 2, or 3,” Erik answered.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “他们应该输入1，2，或者3，”艾瑞克回答。
- en: “Okay, so we can check if their answer was 1, or 2, or 3, and then we pass it
    to the function and pick that item from the list of options. But if it’s not,
    we should tell the user that something is wrong.”
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: “好吧，所以我们可以检查他们的答案是不是1，2，或者3，然后我们传递给函数并从选项列表中选取那个项目。但如果不是，我们应该告诉用户出错了。”
- en: “Yes, I remember. We can use `if`-`else` in Python,” Erik suggested.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，我记得。我们可以在Python中使用`if`-`else`。” 艾瑞克建议。
- en: “Let’s try it,” Simon said. “How will you do that? Try to explain it to me as
    if I didn’t know about `if`-`else`.”
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们试试，”西蒙说，“你打算怎么做？试着向我解释一下，就像我不知道`if`-`else`一样。”
- en: “I’ll add to my function, ‘if the user’s choice is 1, or 2, or 3, then go ahead
    and use it. If not (`else`), print that the user should enter one of those numbers’.”
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: “我会在我的函数中添加，‘如果用户的选项是1，2，或者3，那么就继续使用它。如果不是（`else`），打印用户应该输入那些数字’。”
- en: “And how do you check if the user’s choice is 1, or 2, or 3? How do we do it
    in Python?” Simon asked.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: “那么我们如何检查用户的选项是1，2，还是3？我们在Python中怎么做？”西蒙问。
- en: '"I don’t remember . . . ,” Erik said.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: “我不记得了……” 艾瑞克说。
- en: '“You need to use a *comparison* operator. It uses two equal signs, like this:
    `==`. For example, to check if `choice` is equal to 1, you’d write `choice ==
    ''1''`.”'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: “你需要使用一个*比较*运算符。它使用两个等号，就像这样：`==`。例如，要检查`choice`是否等于1，你会写`choice == '1'`。”
- en: “But I want to check all three numbers,” Erik said. “Should I write `if choice
    == '1' or '2' or '3'`?”
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: “但我想要检查所有三个数字，”埃里克说。“我应该写`if choice == '1' or '2' or '3'`吗？”
- en: '“You’re almost right!” Simon answered. "Yes, you can use `or` in Python, but
    in this case, you should write it as three *separate* comparisons and place `or`
    between them. Like this,” and he wrote this code on a piece of paper:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: “你差不多对了！”西蒙回答。“是的，你可以在Python中使用`or`，但在这个情况下，你应该将其写成三个*独立的*比较，并在它们之间放置`or`。就像这样，”他在一张纸上写下了这段代码：
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: “Okay, got it,” Erik said.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: “好的，明白了，”埃里克说。
- en: “Good, let’s code it,” Simon said.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: “好的，让我们写代码，”西蒙说。
- en: 'Erik opened his editor and added the four lines before `return` to his function:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克打开了他的编辑器，并将四行代码添加到`return`之前：
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: “Now let’s try it,” Simon said.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: “现在让我们试试，”西蒙说。
- en: Erik started the program, and at the first menu, he typed `2`.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克启动了程序，并在第一次菜单中键入了`2`。
- en: “Why did you enter 2?” Simon asked.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: “你为什么输入2？”西蒙问。
- en: “Because I wanted coffee,” Erik answered.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: “因为我想要咖啡，”埃里克回答。
- en: “But we should test your program for *wrong* answers!” Simon said. “Yes, I know,
    it’s your program and you don’t want to break it, but as a developer you *have*
    to try to break your program. You have to imagine all the possible wrong ways
    your users will use your program. It’s hard and very uncomfortable, I know, but
    you have to overcome that and try to enter all the possible wrong values.”
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: “但我们应该测试你的程序对*错误*答案的处理！”西蒙说。“是的，我知道，这是你的程序，你不想让它出问题，但作为一个开发者，你必须尝试破坏你的程序。你必须想象用户可能会以所有可能的方式使用你的程序。我知道这很困难，也很不舒服，但你必须克服这一点，并尝试输入所有可能的错误值。”
- en: '“Okay, okay,” Erik said and restarted his program. At the first menu, he entered
    `42` like Simon did the last time (Erik’s input is shown in bold.):'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: “好吧，好吧，”埃里克说，并重新启动了他的程序。在第一次菜单中，他像上一次西蒙做的那样输入了`42`（埃里克的输入以粗体显示）：
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: ❶ Python shows you where the error is.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ Python会告诉你错误在哪里。
- en: ❷ Python tells you what the error is
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ Python会告诉你错误是什么
- en: 'Note You can learn more about Python error messages at the book’s companion
    site: [https://pythonicadventure.com/troubleshooting/index.html](https://pythonicadventure.com/troubleshooting/index.html).'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：你可以在本书的配套网站上了解更多关于Python错误信息的内容：[https://pythonicadventure.com/troubleshooting/index.html](https://pythonicadventure.com/troubleshooting/index.html)。
- en: '“Let’s see what’s going on here,” Simon said. “First of all, when you entered
    `42`, your program printed the message that the user should enter only 1, 2, or
    3\. This is good. But then something went wrong. Look, it says that the variable
    `answer` was referenced before assignment:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们看看这里发生了什么，”西蒙说。“首先，当你输入`42`时，你的程序打印出用户应该只输入1、2或3的消息。这是好的。但然后出了点问题。看，它说变量`answer`在赋值之前被引用了：
- en: '[PRE5]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '“In simple words, that means you didn’t create `answer` but you tried to use
    it. And Python shows you exactly where: you tried to `return answer`, but Python
    didn’t know anything about the variable `answer`.”'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: “简单来说，这意味着你没有创建`answer`，但你尝试使用它。Python会确切地告诉你：你尝试`return answer`，但Python对变量`answer`一无所知。”
- en: “But why?” Erik said. “I have this `answer =` line in my code.”
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: “但为什么？”埃里克说。“我的代码里有一行`answer =`。”
- en: “Yes, you have it, but the important thing is *where* this line is used. In
    your code, you create the `answer` variable *only* when the user enters the right
    choice. If the user enters something else, `answer` is not even created.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，你有它，但重要的是*在哪里*使用这一行。在你的代码中，你只在用户输入正确的选择时创建`answer`变量。如果用户输入其他内容，`answer`甚至不会被创建。
- en: '“In other words,” Simon continued, “even when the user answers with a wrong
    number, or even a word, you still have to return *some* answer. It’s a very important
    rule: never use a variable before you create it and assign *some* value to it.
    What value can we assign to `answer` here in case the user makes a mistake? An
    empty string like `''''` should work here. Add it to your function and check if
    it helps.”'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: “换句话说，”西蒙继续说，“即使用户回答了一个错误的数字，或者甚至是一个单词，你仍然必须返回*某个*答案。这是一条非常重要的规则：在创建变量并给它赋值之前，永远不要使用变量。在这种情况下，如果用户出错，我们可以给`answer`赋什么值呢？一个空字符串`''`应该可以在这里工作。把它添加到你的函数中，并检查它是否有所帮助。”
- en: 'Erik changed the function to this:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克将函数更改为以下内容：
- en: '[PRE6]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: ❶ An empty line assigned to answer.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 将一个空行分配给`answer`。
- en: '*Your Turn!* Add code to check the user’s answer'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '*轮到你了!* 添加代码来检查用户的答案'
- en: In your menu function, add the code that Erik just added. Make sure you assign
    an empty line to `answer` in case the input is wrong. Test whether it really checks
    your answers.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的菜单函数中，添加埃里克刚刚添加的代码。确保在输入错误的情况下将一个空行分配给`answer`。测试它是否真的检查了你的答案。
- en: He tested the program again, and this time it didn’t give him an error. It printed
    the message `Enter number 1, 2, or 3!` and jumped to the next menu.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 他再次测试了程序，这次它没有给他错误。它打印了消息`输入数字 1, 2 或 3!`并跳转到下一个菜单。
- en: “Do you think your program did it right?” Simon asked.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: “你认为你的程序做得对吗？”西蒙问。
- en: “It printed the message that you should enter 1, 2, or 3,” Erik answered. “I
    think it’s right.”
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: “它打印了你应该输入 1, 2 或 3 的消息，”埃里克回答。“我认为是对的。”
- en: “But you didn’t get the user’s choice for a drink. If they entered a wrong number,
    you should give them a chance to enter a right one. It’s not like a test in school,
    where you just have one chance to answer. You should keep asking the user until
    you get one of the right answers.”
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: “但你没有获取用户的饮料选择。如果他们输入了错误的数字，你应该给他们一个机会输入正确的数字。这不像学校的考试，你只有一个回答的机会。你应该不断询问用户，直到你得到正确的答案。”
- en: “How should I do that?” Erik asked.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: “我该怎么做？”埃里克问。
- en: “There is another kind of *loop* for that,” Simon explained to his brother.
    “It’s called a *while loop*. It repeats something over and over again, and with
    every cycle, it checks the *condition*. When the condition is true, it continues.
    If it becomes false, the loop ends.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: “还有另一种*循环*，”西蒙向他的兄弟解释说，“它被称为*while循环*。它会一次又一次地重复某件事，并且每次循环都会检查*条件*。当条件为真时，它会继续。如果它变为假，循环结束。
- en: “Sometimes we check the condition at the beginning of the loop if we already
    know it. In this case, we say ‘While something is true, do this.’ But sometimes,
    like in our case, we don’t have the answer when we start the loop, because we
    haven’t asked our user about their choice yet. So we start an *infinite loop*
    and check the condition *inside* the loop—after we receive an answer from the
    user. We exit the loop if the condition becomes true. We call this *breaking*
    from the loop. Let me show it in a sketch,” Simon said and started drawing.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: “有时候，如果我们已经知道了条件，我们会在循环的开始处检查它。在这种情况下，我们会说‘当某事为真时，做这件事。’但有时，就像我们的情况一样，我们在开始循环时还没有答案，因为我们还没有询问用户他们的选择。所以，我们启动一个*无限循环*并在循环内部检查条件——在我们收到用户的答案之后。如果条件变为真，我们就退出循环。我们称这为*跳出循环*。让我用草图展示一下，”西蒙说，并开始画图。
- en: '![](../Images/04-01-while-condition.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![while循环条件](../Images/04-01-while-condition.png)'
- en: Simon explained, “In this example, we already know the condition before we start
    the loop. We check the condition and decide if we should start. It should be `True`,
    or the loop won’t even start. I used a diamond-shaped figure for this check; this
    is how programmers usually draw decision points.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙解释说，“在这个例子中，我们在开始循环之前已经知道了条件。我们检查条件并决定是否开始。它应该是`True`，否则循环甚至不会开始。我用了菱形来表示这个检查；这是程序员通常绘制决策点的方式。
- en: “If it’s true, then we do something. The important thing is that this ‘do something’
    should change the condition, among other things. Otherwise, the loop will continue
    forever, and we don’t want that.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: “如果它是真的，那么我们就做某件事。重要的是，这个‘做某件事’应该改变条件，以及其他事情。否则，循环将永远继续，我们不想那样。
- en: “After we have done that ‘something,’ we go to the beginning of the loop and
    *check the condition again*. If it’s still true, we repeat that ‘do something.’
    If not, we exit the loop and continue with our program.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: “在我们做了那‘某件事’之后，我们回到循环的开始处并*再次检查条件*。如果它仍然为真，我们就重复那‘做某件事’。如果不为真，我们就退出循环并继续我们的程序。
- en: '“Look at this simple example: we want to count down from 5 to 0\. First, we
    set the variable `n` to 5, and at the beginning of the loop, we check if it’s
    greater than 0\. Yes, it’s greater, so we start the loop. Remember that we have
    to change the condition at some point, or the loop will never end. In our example,
    we subtract 1 from `n` each time we go through the loop. Eventually, the variable
    `n` will become equal to 0, and the loop will stop.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: “看看这个简单的例子：我们想要从 5 开始倒数到 0。首先，我们将变量`n`设置为 5，并在循环的开始处检查它是否大于 0。是的，它大于 0，所以我们开始循环。记住，我们必须在某个时候改变条件，否则循环将永远不会结束。在我们的例子中，我们每次通过循环时都会从`n`中减去
    1。最终，变量`n`将等于 0，循环将停止。
- en: “The important thing is that, in this case, before we start the loop, we already
    know what is in the variable `n`, and we know that it’s greater than 0.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: “在这个情况下，重要的是，在我们开始循环之前，我们已经知道了变量`n`的内容，并且我们知道它大于 0。
- en: “What if we don’t know what’s in the variable, or if the variable doesn’t even
    exist? Like in our case, we can check the user’s answer only *after* we ask them
    to choose one of the items from the menu. So we have to do this,” and Simon drew
    another diagram.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: “如果我们不知道变量里有什么，或者变量甚至不存在怎么办？就像我们这个例子一样，我们只能在用户被要求从菜单中选择一个项目之后检查用户的答案。所以我们必须这样做，”
    西蒙又画了一个图。
- en: '![](../Images/04-02-while-true.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![while-true 图](../Images/04-02-while-true.png)'
- en: Simon continued his explanation, “Here, we start the loop without checking any
    condition. We do something first, and only *after that* do we check the condition.
    Sometimes this loop is called ‘do-until,’ which means ‘do something until the
    condition is true.’ When the condition is true, we exit the loop and continue
    with the rest of the program.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙继续解释，“在这里，我们开始循环而不检查任何条件。我们先做些事情，然后才检查条件。有时这种循环被称为‘do-until’，意思是‘做某事直到条件为真。’当条件为真时，我们退出循环并继续执行程序的其余部分。”
- en: 'In the example here, I used your situation with `input()`. You ask for input,
    and then you check that input. This is your condition: if the input is valid,
    you should exit the loop. In Python, we use the `break` operator for that.”'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我使用了你的 `input()` 情况。你请求输入，然后检查这个输入。这是你的条件：如果输入有效，你应该退出循环。在 Python 中，我们使用
    `break` 操作符来实现这一点。”
- en: Erik was a bit overwhelmed by this long explanation, but he felt like he knew
    what to do. He asked his brother, “So you’re saying that I should just put a `while`
    in front of my `input()` line and add a `break` after I get a correct answer?”
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克对这个长篇大论感到有些不知所措，但他感觉他知道该怎么做。他问他的哥哥，“所以你是说，我应该在我的 `input()` 行前面放一个 `while`，在我得到正确答案后添加一个
    `break` 吗？”
- en: “Yes,” Simon answered, “exactly right! Just don’t forget to indent all the lines
    that are part of the loop by four spaces to the right. Your editor will help you,
    don’t worry.”
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，” 西蒙回答，“完全正确！只是别忘了将所有属于循环的行向右缩进四个空格。你的编辑器会帮你的，别担心。”
- en: 'Erik started working on his program. After several minutes, his function looked
    like this:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克开始编写他的程序。几分钟过后，他的函数看起来是这样的：
- en: '[PRE7]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: “Right?” Erik asked his brother.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: “对吗？” 艾瑞克问他的哥哥。
- en: “I told you that your editor can help you. Click Check ![](../Images/icon_check.png)
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: “我告诉你你的编辑器可以帮你。点击检查 ![检查图标](../Images/icon_check.png)”
- en: 'Erik did as his brother suggested and saw this:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克按照他哥哥的建议做了，看到了这个：
- en: '![](../Images/04-03-mu-editor-check.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![代码检查图](../Images/04-03-mu-editor-check.png)'
- en: “You see now?” Simon said. “You forgot to indent the lines to the right. That’s
    why it says that it expects an indented block here. Move all the lines that are
    part of the loop to the right.”
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: “你现在看懂了吗？” 西蒙说。“你忘记将右边的行缩进了。这就是为什么它说这里期望一个缩进的块。将所有属于循环的行都向右移动。”
- en: 'Erik changed his function and checked the code again:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克修改了他的函数并再次检查了代码：
- en: '[PRE8]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: ❶ While loop begins here.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 当循环开始时。
- en: ❷ If the answer is right, exit from the loop.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 如果答案是正确的，退出循环。
- en: ❸ End of the indented block; end of the loop
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 缩进块的结束；循环结束
- en: '*Your Turn!* Add a `while` loop to your function'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*轮到你了!* 在你的函数中添加一个 `while` 循环'
- en: Add a loop like Erik just did. Try using the Check button to find out if there
    are errors in your code. Make some errors and see if the editor can find them.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 添加一个像艾瑞克刚刚做的循环。尝试使用检查按钮来找出你的代码中是否有错误。故意制造一些错误，看看编辑器是否能找到它们。
- en: Now the Check button showed a green thumbs-up ![](../Images/icon_check-good.png)
    for a moment, so Erik knew it was okay. He clicked Run to test the program. At
    the first menu, he entered `42` like Simon did last time. The program reported
    that he should choose 1, 2, or 3 and returned to the prompt again. It didn’t crash;
    it worked!
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，检查按钮显示了一个绿色的点赞图标 ![检查图标](../Images/icon_check-good.png) 一会儿，所以艾瑞克知道这是可以的。他点击运行来测试程序。在第一个菜单中，他输入了
    `42`，就像西蒙上次做的那样。程序报告说他应该选择 1、2 或 3，然后又回到了提示符。它没有崩溃；它运行正常！
- en: “What was the other wrong thing Simon did with my program?” Erik tried to remember.
    “Right, he tried to enter ‘coffee’! Let’s try that too.”
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: “西蒙在我的程序里还做了什么其他错误的事情？” 艾瑞克试图回忆。“对了，他尝试输入‘咖啡’！我们也试试这个。”
- en: 'He entered `coffee`, and his program responded as he expected again! Finally,
    Erik typed `2` and got the next menu. Here is what he saw in the editor window:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 他输入了 `coffee`，他的程序再次如他所预期地响应！最后，艾瑞克输入了 `2` 并进入了下一个菜单。这是他在编辑器窗口中看到的内容：
- en: '[PRE9]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'At the next menu, he typed `4` for raspberry and got the same message:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个菜单中，他输入了 `4` 以选择树莓派，得到了同样的信息：
- en: '[PRE10]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: “Why is that?” he asked Simon.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: “为什么？” 他问西蒙。
- en: “Your program behaves exactly as you wrote it,” Simon answered. Of course, he
    knew where the problem was.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: “你的程序的行为完全符合你写的，” 西蒙回答。当然，他知道问题在哪里。
- en: “How did you write your condition?” he asked.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: “你是怎么写你的条件的？”他问道。
- en: Erik said, “If the answer is 1, 2, or 3—aha, I understand now! I entered `4`,
    so the program thinks it’s a wrong answer! But how can I fix this?”
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克说：“如果答案是1、2或3——啊哈，我现在明白了！我输入了`4`，所以程序认为这是一个错误的答案！但我怎么修复这个问题？”
- en: “It looks like we need a list of valid answers for each menu list,” Simon said.
    “You can pass it as another argument. But I think you know enough already to create
    a better solution.”
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: “看起来我们需要为每个菜单列表提供一个有效答案列表，”西蒙说。“你可以将其作为另一个参数传递。但我认为你已经足够了解如何创建一个更好的解决方案了。”
- en: “What is it?” Erik asked. “Something with loops again?”
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: “是什么？”埃里克问。“又是关于循环的事情？”
- en: “Not only loops,” Simon answered. “You’ll learn something new about lists, too.
    Yes, I know that you are tired of my lectures, but let’s finish it today. It will
    make your program work correctly again—isn’t that worth it?” and he winked at
    his brother.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: “不仅仅是循环，”西蒙回答。“你也会对列表有新的了解。是的，我知道你已经厌倦了我的讲座，但让我们今天完成它。这样可以让你的程序再次正确工作——这难道不值得吗？”然后他向他的兄弟眨了眨眼。
- en: Erik was tired, but that bug (yes, he had learned that word!) with the flavors
    menu was really annoying, and he wanted to fix it. “Okay,” he sighed, “let’s fix
    it. What did you want to tell me about lists?”
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克感到疲倦，但那个带有风味菜单的bug（是的，他已经学会了这个词！）真的很烦人，他想要修复它。“好吧，”他叹了口气，“我们来修复它。你想要告诉我关于列表的什么？”
- en: '“Look at your condition,” Simon said. “You used a simple `if`-`else` check,
    and you checked the input against three valid answers: 1, 2, and 3\. But what
    if your list of items is long, like 20 items? Your `if`-`else` block would be
    too long. There is another way in Python. We can check if a certain item is in
    a list. In our case, we can check if the answer we got from the user is in the
    list of 1, 2, 3\. We can try that for the first menu. Let me show you.”'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: “看看你的条件，”西蒙说。“你使用了一个简单的`if`-`else`检查，并且将输入与三个有效答案：1、2和3进行了比较。但如果你的项目列表很长，比如20个项目，你的`if`-`else`块会太长。Python中还有另一种方法。我们可以检查某个项目是否在列表中。在我们的情况下，我们可以检查用户得到的答案是否在1、2、3的列表中。我们可以为第一个菜单尝试一下。让我给你看看。”
- en: 'Simon took Erik’s keyboard and changed the `if choice == . . .` line in his
    function to the following:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙拿起埃里克的键盘，并更改了他函数中`if choice == . . .`行的内容，改为以下内容：
- en: '[PRE11]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: “This needs some explanation,” he said. “Look, the user enters a string that
    can be 1 or 42\. We test whether this string is in the list of allowed answers,
    which is 1, 2, or 3\. If it’s not in the list, we print the error message and
    continue with the loop. If it *is* in the list of allowed answers, we convert
    it and pick that item from the menu list.”
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: “这需要一些解释，”他说。“看，用户输入了一个可以是1或42的字符串。我们测试这个字符串是否在允许答案的列表中，这个列表是1、2或3。如果它不在列表中，我们打印错误信息并继续循环。如果它确实在允许答案的列表中，我们就将其转换并从菜单列表中选取那个项目。”
- en: “Yes, I understand,” Erik said. “But what about the second menu where I got
    the error? It didn’t let me choose number `4` because it wasn’t in my `if`. With
    your list, I’ll have the same problem. I have five flavors, so I need another
    list of answers here, right?”
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，我明白了，”埃里克说。“但关于我出错的那第二个菜单怎么办？它不允许我选择数字`4`，因为它不在我的`if`语句中。用你的列表，我也会有同样的问题。我有五种风味，所以我需要在这里再有一个答案列表，对吧？”
- en: '“Excellent question!” Simon said. “I was just about to ask it myself. And you
    are right. Each menu list should have its own list of allowed answers. That’s
    not a big problem; we can build one when we know what’s in our menu list. Let
    me write it first, and then I’ll explain it step by step.” Simon added the following
    lines just before the `if` block he added previously:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: “好问题！”西蒙说。“我正准备自己问这个问题。而且你是对的。每个菜单列表都应该有自己的允许答案列表。这不是一个大问题；当我们知道我们的菜单列表中有什么时，我们可以构建一个。让我先写出来，然后我会一步一步地解释。”西蒙在他之前添加的`if`块之前添加了以下几行：
- en: '[PRE12]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: ❶ An empty list for allowed answers
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 允许答案的空列表
- en: ❷ Calculates the length of the menu
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 计算菜单的长度
- en: ❸ Appends the allowed answer
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 添加允许答案
- en: '“First, we create an empty list for the allowed answers. Then we measure the
    length of the menu list using the `len()` function. For your drinks, the result
    will be three, and for the flavors, it will be five. Then we use the `range()`
    function to create a *sequence* of numbers from one to the length of the menu.
    For drinks, the sequence will be 1, 2, 3\. For flavors, it will be 1, 2, 3, 4,
    5\. You get the idea. Just notice that in the `range()` function, we shouldn’t
    use the *last* element of the sequence, but the one *after the last*, which is
    not included in the sequence. That’s why we have to add one to the length of the
    menu, like this:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: “首先，我们创建一个空列表用于允许的答案。然后我们使用`len()`函数测量菜单列表的长度。对于饮料，结果将是三个，对于口味，将是五个。然后我们使用`range()`函数创建一个从一到菜单长度的数字序列。对于饮料，序列将是1,
    2, 3。对于口味，序列将是1, 2, 3, 4, 5。你明白我的意思了。注意，在`range()`函数中，我们不应该使用序列的最后一个元素，而是最后一个元素之后的那个元素，它不包括在序列中。这就是为什么我们必须将菜单长度加一，如下所示：
- en: '[PRE13]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: “Finally, in the `for` loop, we convert each number from the sequence to a string
    and add it to the end of the list of allowed answers. This function is called
    `append()`.”
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: “最后，在`for`循环中，我们将序列中的每个数字转换为字符串，并将其添加到允许答案列表的末尾。这个函数叫做`append()`。”
- en: Simon finished his explanation and added, “Yes, it’s a bit complicated the first
    time, but try reading the Python code yourself, and you’ll understand it as if
    it were plain English.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙完成了他的解释，并补充说：“是的，第一次确实有点复杂，但试着阅读一下Python代码，你会发现它就像普通的英语一样容易理解。”
- en: “Now we have to change our list with 1, 2, 3 to the list of allowed answers
    that we just built.” Simon made that change, looked at the code, and slapped his
    forehead. “Oh, I just noticed!”
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们必须将我们的1, 2, 3列表更改为我们刚刚构建的允许答案列表。”西蒙做了这个修改，看了看代码，然后拍了拍自己的额头。“哦，我刚刚注意到！”
- en: “What?” Erik thought they had already finished, but it looked like there was
    something else.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: “什么？”艾瑞克以为他们已经完成了，但看起来好像还有其他的事情。
- en: “We also have to change our message,” Simon said. “Because our function now
    can accept menu lists of any length, we should tell the user something like, ‘Enter
    a number from 1 to 6’ or ‘from 1 to 12,’ depending on the length of our menu.
    Remember how we can get the length of a list?”
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: “我们还得改变我们的信息，”西蒙说。“因为我们的函数现在可以接受任何长度的菜单列表，我们应该告诉用户像‘输入一个1到6的数字’或‘从1到12的数字’，这取决于我们菜单的长度。记得我们是如何获取列表长度的吗？”
- en: “With the `len()` function?” asked Erik.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: “用`len()`函数？”艾瑞克问。
- en: '“Of course!” Simon said and made the final change in the function. It now looked
    like this:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: “当然！”西蒙说，并在函数中做了最后的修改。现在它看起来是这样的：
- en: '[PRE14]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: ❶ len() is used to calculate the number of choices.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ `len()`用于计算选择数量。
- en: '*Your Turn!* Add the `allowed_answers` list'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '*轮到你了!* 添加`allowed_answers`列表'
- en: Add a list of allowed answers to your function. Test whether it allows you to
    use menu lists of different lengths.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的函数中添加一个允许的答案列表。测试它是否允许使用不同长度的菜单列表。
- en: “Now we’re protected from user errors!” Simon said. “Try it and see if it works!”
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们免受用户错误的影响了！”西蒙说。“试试看它是否工作！”
- en: Erik ran the program again and entered `42`, `coffee`, and `weryiuryt587456`,
    but the program didn’t crash like before. Every time, it gave him a reminder that
    he should use a number, and it should be between 1 and 3 or 5, depending on the
    menu.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克再次运行程序，输入了`42`、`coffee`和`weryiuryt587456`，但程序并没有像以前那样崩溃。每次，它都会提醒他应该使用一个数字，并且这个数字应该在1到3或5之间，具体取决于菜单。
- en: “This is cool! It works and it doesn’t crash!” Erik was really happy that he
    had created such a robust program.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: “这太酷了！它工作得很好，而且没有崩溃！”艾瑞克非常高兴自己创建了一个如此健壮的程序。
- en: “One more thing,” Simon said. “This one will be the final one for today, I promise!”
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: “还有一件事，”西蒙说。“这是今天的最后一件事，我保证！”
- en: “Okay,” said Erik. He was starting to like this programming thing. He liked
    that his program now looked like a real one—and it worked! Even if it wasn’t an
    online or mobile application yet, it worked like a chat with a shop. Erik imagined
    that he was texting with his favorite coffee shop, ordering his drinks, and then
    coming to pick them up.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: “好吧，”艾瑞克说。他开始喜欢编程这件事了。他喜欢他的程序现在看起来像是一个真正的程序——而且它真的工作了！即使它还不是在线或移动应用，它也像与商店的聊天一样工作。艾瑞克想象自己正在给最喜欢的咖啡店发短信，订购饮料，然后去取。
- en: Simon said, “Your program doesn’t let me enter anything except the numbers from
    1 to 3 or 5\. But what if I want to skip something? Like I don’t want any toppings
    on my drink?”
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙说：“你的程序只允许我输入1到3或5的数字，但如果我们想跳过某些内容怎么办？比如我不想在我的饮料上加任何配料？”
- en: “In my flavors menu, I have ‘plain,’ which means ‘no flavor.’ I can add the
    same to toppings,” Erik answered.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: “在我的口味菜单中，我有‘plain’，这意味着‘无味’。我可以在配料中添加相同的选项，”埃里克回答。
- en: “That will work,” Simon said. “But in general, with every menu you should give
    your user an option to exit the menu. Usually, people use something like ‘Click
    X to exit from this menu.’ I think we should add this to our menu function too.”
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: “那会行得通，”西蒙说，“但一般来说，在每个菜单中，你应该给用户一个退出菜单的选项。通常，人们会使用类似‘点击X退出此菜单’这样的提示。我认为我们也应该把这一点加入到我们的菜单函数中。”
- en: “How do we do it?” Erik asked. He thought a little and said, “I know! We’ll
    add ‘X’ to the list of allowed answers! Am I right?”
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: “我们怎么做到的？”埃里克问。他想了一会儿，然后说，“我知道！我们将把‘X’添加到允许答案的列表中！我这样做对吗？”
- en: “Absolutely!” Simon was very glad to see his brother making such good progress.
    “Remember, we used the function called `append()` to add items to the list? We
    can use it here, right after we finish adding numbers to `allowed_answers`.”
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: “绝对！”西蒙很高兴看到他的兄弟取得了如此好的进展。“记住，我们使用了名为`append()`的函数来向列表中添加项目？我们可以在向`allowed_answers`添加数字之后立即使用它。”
- en: “Let me try,” Erik said and started typing.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: “让我试试，”埃里克说，并开始输入。
- en: “Sure, go ahead,” Simon encouraged his brother. “Just make sure you add it *after*
    that `for` loop. Better to add an empty line after it; that way you’ll be able
    to see that it’s not part of the loop.”
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，继续，”西蒙鼓励他的兄弟。“只是确保你在那个`for`循环之后添加它。最好在它之后添加一个空行；这样你就能看到它不是循环的一部分。”
- en: 'Here is Erik’s new version of the menu function:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是埃里克菜单函数的新版本：
- en: '[PRE15]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: ❶ 'X' is now an allowed answer.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 'X' 现在是一个允许的答案。
- en: “Nice,” Simon said. “I would also add the lowercase letter ‘x’, because that’s
    what most people would type. Now what should we do if the user types ‘x’?”
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: “不错，”西蒙说，“我还会添加小写字母‘x’，因为大多数人会这样输入。现在，如果用户输入‘x’我们应该怎么做？”
- en: “Exit the menu loop?” Erik said.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: “退出菜单循环？”埃里克说。
- en: '“Right! But what are we going to return to the main program? Normally, we return
    the user’s choice from the menu: coffee or chocolate or whatever. What if the
    user types ‘x’? What should we return?”'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: “对！但我们将要返回给主程序什么？通常，我们返回用户从菜单中做出的选择：咖啡、巧克力或者任何其他东西。如果用户输入‘x’怎么办？我们应该返回什么？”
- en: “Nothing?” Erik suggested.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: “没有吗？”埃里克建议。
- en: “Yes, we return an empty string,” Simon said. “If the user types ‘x’, you assign
    an empty string (`''`) to `answer` and return `answer` the same way you do when
    the answer is in the menu.”
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，我们返回一个空字符串，”西蒙说，“如果用户输入‘x’，你将一个空字符串（`''`）赋值给`answer`，并以相同的方式返回`answer`，就像答案在菜单中一样。”
- en: 'Simon continued, “Important thing: you should do that check *before* you try
    to convert it into a number but *after* you check whether it’s in the `allowed_answers`
    list. Do you see where to put this check?”'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙继续说，“重要的事情：你应该在尝试将其转换为数字之前，但在检查它是否在`allowed_answers`列表中之后进行这个检查。你看到在哪里放置这个检查了吗？”
- en: '“Yes, right after this line: `if choice in allowed_answers`.”'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，就在这一行之后：`if choice in allowed_answers`。”
- en: “Great! Go ahead and add it. In this case, you will have a *nested* `if` statement—one
    `if` inside another `if`. This is pretty common—sometimes you see three levels
    of nested `if`s or even more. Just make sure your indentations are correct. This
    is how Python tells the computer what to do if the condition is true or false.”
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: “太好了！继续添加。在这种情况下，你将有一个*嵌套*的`if`语句——一个`if`语句在另一个`if`语句内部。这是很常见的——有时你会看到三层嵌套的`if`语句，甚至更多。只要确保你的缩进正确。这就是Python告诉计算机在条件为真或假时应该做什么的方式。”
- en: 'Erik worked some more on his code and finally got this:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克对他的代码进行了更多的修改，最终得到了这个版本：
- en: Listing 4.1 The final version of Erik’s menu
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 列表4.1 埃里克菜单的最终版本
- en: '[PRE16]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '*Your Turn!* Add the exit option'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '*轮到你了!* 添加退出选项'
- en: Add the `'x'` option to your lists of allowed answers. Then add a nested `if`
    to check it. Test whether it works. What if you enter `'x'` in all the menus?
    What order will you get in that case?
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 将`'x'`选项添加到你的允许答案列表中。然后添加一个嵌套的`if`语句来检查它。测试它是否工作。如果你在所有菜单中都输入`'x'`会发生什么？在这种情况下你会得到什么顺序？
- en: 'He tested the program, entering `x` in all three menus, and he got what he
    expected:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 他测试了程序，在所有三个菜单中都输入了`x`，并得到了他预期的结果：
- en: '[PRE17]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: “An empty order!” he said.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: “一个空订单！”他说。
- en: “Right, exactly as it should be,” Simon confirmed. “I like your program,” he
    continued. “It works—that’s the first and most important part. It’s user friendly,
    and it gives the user instructions on what to do—that’s the second part. It checks
    the input and it doesn’t let the user enter wrong values—that’s the third part.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: “对，正是如此，”西蒙确认。“我喜欢你的程序，”他继续说。“它运行得很好——这是第一点，也是最重要的。它用户友好，并且给用户提供了操作说明——这是第二点。它检查输入，并阻止用户输入错误值——这是第三点。”
- en: “Let’s quickly recap what you learned today,” Simon said. “What was the first
    thing?”
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们快速回顾一下你今天学到的内容，”西蒙说。“第一件事是什么？”
- en: “First you broke my program, again!” Erik answered. He wasn’t very angry this
    time, because he knew that together with Simon he had fixed the program. “And
    you told me that I should always think about how my users might use the program
    in a bad way.”
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: “首先你又破坏了我的程序，又一次！”艾瑞克回答。这次他并不很生气，因为他知道他和西蒙一起修复了程序。“而且你告诉我，我应该总是考虑我的用户可能会以错误的方式使用程序。”
- en: “Right, dealing with stubborn users who don’t want to follow your instructions
    is part of a programmer’s job,” Simon said.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: “对，处理那些不愿意遵循你指示的顽固用户是程序员工作的一部分，”西蒙说。
- en: “Then we wrote a menu loop where we checked what the user entered, and we didn’t
    allow them to use answers that aren’t allowed. Then you told me about the `append()`
    function that adds something to a list.”
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: “然后我们编写了一个菜单循环，检查用户输入的内容，并且不允许他们使用不允许的答案。然后你告诉我关于`append()`函数，它可以向列表中添加内容。”
- en: Erik continued, “Then I wrote *nested* `if` checks, and now my code looks like
    real programs they show in movies.”
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克继续说，“然后我编写了嵌套的`if`检查，现在我的代码看起来就像电影中展示的真实程序了。”
- en: Simon smiled, “Trust me, programs they show in movies are very rarely real programs.
    But you’re right, your program is getting more complex. It uses different Python
    operators, all these loops, and `if`s, and lists.”
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙微笑着说，“相信我，电影中展示的程序很少是真实的程序。但你说得对，你的程序变得越来越复杂了。它使用了不同的Python运算符，所有这些循环，还有`if`语句和列表。”
- en: “And then we added the ‘x’ option in the menu, and now any user can get an empty
    order!” Erik giggled.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: “然后我们在菜单中添加了‘x’选项，现在任何用户都可以得到一个空订单！”艾瑞克咯咯地笑了起来。
- en: “Yes, and why not?” Simon asked. “You shouldn’t *force* your users to always
    order something. You should give them an option to cancel their order or to exit
    from the menu.”
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，为什么不呢？”西蒙问道。“你不应该强迫你的用户总是下订单。你应该给他们一个取消订单或退出菜单的选项。”
- en: Simon continued, “The program is really good now. Tomorrow I’ll ask you to stop
    being a programmer and become the coffee shop manager.”
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙继续说，“程序现在真的很好了。明天我会让你停止做程序员，成为咖啡店经理。”
- en: “Am I not a manager already?” Erik asked.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: “我不是已经是一名经理了吗？”艾瑞克问道。
- en: “Yes, you are,” Simon smiled. “Now imagine that you, the coffee shop manager,
    just received a new flavor component for your coffee drinks. And you want to add
    that flavor to the menu. And a couple of new toppings. What would you do?”
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，你是对的，”西蒙微笑着说。“现在想象一下，你，咖啡店经理，刚刚收到了一种新的咖啡饮品风味成分。你想要把这个风味添加到菜单上。还有几样新的配料。你会怎么做？”
- en: “I would add those toppings to the list of toppings. Not a big deal,” Erik answered.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: “我会把这些配料添加到配料列表中。没什么大不了的，”艾瑞克回答。
- en: “Yes, but what if you are *just* a manager and not a programmer? You know nothing
    about this program, and you don’t know Python, but you want to add those flavors
    and toppings to the menu. You, as a programmer, should give the manager an easy
    way to add something to the menu.”
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，但如果你只是个经理而不是程序员呢？你对这个程序一无所知，你也不懂Python，但你想要把那些风味和配料添加到菜单上。作为程序员，你应该给经理提供一个简单的方法来添加菜单上的内容。”
- en: “How do you suggest I do that?” Erik asked. He knew already that Simon had something
    in mind.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: “你建议我怎么做？”艾瑞克问道。他已经知道西蒙心里有主意了。
- en: “I think we should put the menus in files and read your lists from those files.”
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: “我认为我们应该把菜单放在文件里，从那些文件中读取你的列表。”
- en: “Like in Word documents?” Erik asked.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: “就像在Word文档中一样吗？”艾瑞克问道。
- en: “Yes, almost,” Simon said. “Your program will open those files and read from
    them. I think it will be easiest to have one file per menu. One file will have
    all the drinks, another one all the flavors, and another all the toppings. Then
    your manager can just edit those files instead of editing your Python code. Sound
    good?”
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，几乎是这样，”西蒙说。“你的程序将打开这些文件并从中读取。我认为最好每个菜单有一个文件。一个文件将包含所有的饮品，另一个文件包含所有的风味，还有一个文件包含所有的配料。然后你的经理可以直接编辑这些文件，而不是编辑你的Python代码。听起来不错吗？”
- en: “Yes, interesting,” Erik said. He wondered how his Python program would open
    files the same way Word does.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，很有趣，”埃里克说。他想知道他的Python程序会如何以与Word相同的方式打开文件。
- en: “Great,” Simon said. “That is what we’re going to do tomorrow. Take a rest now.”
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: “太好了，”西蒙说，“那就是我们明天要做的。现在先休息一下。”
- en: New things you have learned today
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 您今天学到的新知识
- en: '*Users make mistakes*—You have learned that users don’t always follow the directions
    you give them in your program. You have to be ready for that and check their input
    for errors, wrong types, and so on.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*用户会犯错*—您已经了解到用户并不总是遵循您在程序中给出的指示。您必须为此做好准备，并检查他们的输入是否存在错误、错误的类型等问题。'
- en: '*Indentation*—When you create a *block* in Python (like `while`, for example)
    you have to make sure all the code in the block is *indented*, meaning it’s shifted
    to the right.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*缩进*—当您在Python中创建一个*块*（例如`while`）时，您必须确保块中的所有代码都是*缩进的*，这意味着它向右移动。'
- en: '*How to exit from a menu*—You have to give your users a way to exit from each
    menu. For example, if they don’t want to order a topping, they may want to skip
    that menu.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如何退出菜单*—您必须为用户提供一种从每个菜单退出的方式。例如，如果他们不想订购配料，他们可能想要跳过那个菜单。'
- en: Code for this chapter
  id: totrans-184
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本章的代码
- en: 'You can find the code for this chapter here: [https://github.com/pavelanni/pythonicadventure-code/tree/main/ch04](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch04).'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在此处找到本章的代码：[https://github.com/pavelanni/pythonicadventure-code/tree/main/ch04](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch04)。
