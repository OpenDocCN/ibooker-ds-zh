- en: 7 Basic statistics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7 基本统计
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖了
- en: Descriptive statistics
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述性统计
- en: Frequency and contingency tables
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 频率和列联表
- en: Correlations and covariances
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关性和协方差
- en: T-tests
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: t检验
- en: Nonparametric statistics
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非参数统计
- en: In previous chapters, you learned how to import data into R and use a variety
    of functions to organize and transform the data into a useful format. We then
    reviewed basic methods for visualizing data.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，你学习了如何将数据导入R，并使用各种函数来组织和转换数据，使其成为有用的格式。然后我们回顾了基本的数据可视化方法。
- en: 'Once your data is properly organized and you’ve begun to explore it visually,
    the next step is typically to describe the distribution of each variable numerically,
    followed by an exploration of the relationships among selected variables, two
    at a time. The goal is to answer questions like these:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你的数据得到适当的组织，并且你已经开始从视觉上探索它，下一步通常是数值上描述每个变量的分布，然后是探索所选变量之间的关系，一次两个。目标是回答如下问题：
- en: What kind of mileage are cars getting these days? Specifically, what’s the distribution
    of miles per gallon (mean, standard deviation, median, range, and so on) in a
    survey of automobile makes and models?
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这些天汽车的平均油耗是多少？具体来说，在汽车品牌和型号的调查中，每加仑英里数（均值、标准差、中位数、范围等）的分布是什么？
- en: After a new drug trial, what’s the outcome (no improvement, some improvement,
    marked improvement) for drug versus placebo groups? Does the gender of the participants
    have an impact on the outcome?
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在一项新药试验之后，药物组与安慰剂组的结果（无改善、有些改善、显著改善）是什么？参与者的性别对结果有影响吗？
- en: What’s the correlation between income and life expectancy? Is it significantly
    different from zero?
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收入和预期寿命之间的相关性是多少？它与零的差异是否显著？
- en: Are you more likely to receive imprisonment for a crime in different regions
    of the United States? Are the differences between regions statistically significant?
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你在美国的不同地区犯罪后更有可能被判入狱吗？地区间的差异在统计上是否显著？
- en: In this chapter, we’ll review R functions for generating basic descriptive and
    inferential statistics. First, we’ll look at measures of location and scale for
    quantitative variables. Then, you’ll learn how to generate frequency and contingency
    tables (and associated chi-square tests) for categorical variables. Next, we’ll
    examine the various forms of correlation coefficients available for continuous
    and ordinal variables. Finally, we’ll turn to the study of group differences through
    parametric (t-tests) and nonparametric (Mann–Whitney U test, Kruskal–Wallis test)
    methods. Although our focus is on numerical results, we’ll refer to graphical
    methods for visualizing these results throughout.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将回顾R函数，用于生成基本的描述性和推断性统计。首先，我们将查看定量变量的位置和尺度度量。然后，你将学习如何为分类变量生成频率和列联表（以及相关的卡方检验）。接下来，我们将检查可用于连续和有序变量的各种相关系数形式。最后，我们将通过参数方法（t检验）和非参数方法（曼-惠特尼U检验、克鲁斯卡尔-沃利斯检验）来研究组间差异。尽管我们的重点是数值结果，但我们将参考图形方法来可视化这些结果。
- en: The statistical methods covered in this chapter are typically taught in a first-year
    undergraduate statistics course. If these methodologies are unfamiliar to you,
    two excellent references are McCall (2000) and Kirk (2008). Alternatively, many
    informative online resources are available (such as Wikipedia) for each of the
    topics covered.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中涵盖的统计方法通常在第一年的本科生统计学课程中教授。如果你对这些方法不熟悉，McCall（2000）和Kirk（2008）是两个很好的参考文献。或者，对于涵盖的每个主题，许多在线资源（如维基百科）都提供了丰富的信息。
- en: 7.1 Descriptive statistics
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.1 描述性统计
- en: 'In this section, we’ll look at measures of central tendency, variability, and
    distribution shape for continuous variables. For illustrative purposes, we’ll
    use several of the variables from the Motor Trend Car Road Tests (`mtcars`) dataset
    you first saw in chapter 1\. Our focus will be on miles per gallon (`mpg`), horsepower
    (`hp`), and weight (`wt`):'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将探讨连续变量的集中趋势、变异性和分布形状的度量。为了说明目的，我们将使用你在第一章中首次看到的“汽车道路测试”（`mtcars`）数据集中的几个变量。我们的重点将放在每加仑英里数（`mpg`）、马力（`hp`）和重量（`wt`）上：
- en: '[PRE0]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: First, we’ll look at descriptive statistics for all 32 cars. Then, we’ll examine
    descriptive statistics by transmission type (`am`) and engine cylinder configuration
    (`vs`). The former is coded `0=automatic,` `1=manual`, and the latter is coded
    `0=V-shape` and `1=straight`.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将查看所有32辆车的描述性统计量。然后，我们将按变速器类型（`am`）和发动机气缸配置（`vs`）进行考察。前者编码为`0=自动，` `1=手动`，后者编码为`0=V形`和`1=直列`。
- en: 7.1.1 A menagerie of methods
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.1 方法大全
- en: When it comes to calculating descriptive statistics, R has an embarrassment
    of riches. Let’s start with functions that are included in the base installation.
    Then we’ll look at extensions that are available through the use of user-contributed
    packages.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到计算描述性统计量时，R拥有丰富的资源。让我们从基本安装版中包含的函数开始。然后我们将查看通过使用用户贡献的包可用的扩展。
- en: In the base installation, you can use the `summary()` function to obtain descriptive
    statistics. An example is presented in the following listing.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在基本安装中，你可以使用`summary()`函数来获取描述性统计量。以下列表提供了一个示例。
- en: Listing 7.1 Descriptive statistics via `summary()`
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.1 使用`summary()`进行描述性统计
- en: '[PRE1]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `summary()` function provides the minimum, maximum, quartiles, and mean
    for numerical variables and frequencies for factors and logical vectors. You can
    use the `apply()` and `sapply()` functions from chapter 5 to provide any descriptive
    statistics you choose. The `apply()` function is used with matrices, and the `sapply()`
    function is used with data frames. The format for the for the `sapply()` function
    is
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '`summary()`函数提供了数值变量的最小值、最大值、四分位数和平均值，以及因子和逻辑向量的频率。你可以使用第5章中的`apply()`和`sapply()`函数来提供你选择的任何描述性统计量。`apply()`函数与矩阵一起使用，而`sapply()`函数与数据框一起使用。`sapply()`函数的格式如下'
- en: '[PRE2]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: where `x` is the data frame and `FUN` is an arbitrary function. If *`options`*
    are present, they’re passed to `FUN`. Typical functions that you can plug in here
    are `mean()`, `sd()`, `var()`, `min()`, `max()`, `median()`, `length()`, `range()`,
    and `quantile()`. The function `fivenum()` returns Tukey’s five-number summary
    (minimum, lower-hinge, median, upper-hinge, and maximum).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`x`是数据框，`FUN`是任意函数。如果存在`options`，它们会被传递给`FUN`。你可以插入这里的典型函数包括`mean()`、`sd()`、`var()`、`min()`、`max()`、`median()`、`length()`、`range()`和`quantile()`。函数`fivenum()`返回Tukey的五数摘要（最小值、下四分位数、中位数、上四分位数和最大值）。
- en: Surprisingly, the base installation doesn’t provide functions for skew and kurtosis,
    but you can add your own. The example in the next listing provides several descriptive
    statistics, including skew and kurtosis.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 令人惊讶的是，基本安装版不提供偏度和峰度的函数，但你可以添加自己的。下一列表中的示例提供了几个描述性统计量，包括偏度和峰度。
- en: Listing 7.2 Descriptive statistics via `sapply()`
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.2 使用`sapply()`进行描述性统计
- en: '[PRE3]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: For cars in this sample, the mean mpg is 20.1, with a standard deviation of
    6.0\. The distribution is skewed to the right (+0.61) and is somewhat flatter
    than a normal distribution (–0.37). This is most evident if you graph the data.
    Note that if you wanted to omit missing values, you could use `sapply(mtcars[myvars],`
    `mystats,` `na.omit =TRUE)`.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个样本中，汽车的均值mpg为20.1，标准差为6.0。分布向右偏斜（+0.61），并且相对于正态分布来说略平坦（–0.37）。如果你绘制数据图，这一点最为明显。注意，如果你想要省略缺失值，可以使用`sapply(mtcars[myvars],`
    `mystats,` `na.omit =TRUE)`。
- en: 7.1.2 Even more methods
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.2 更多的方法
- en: Several user-contributed packages offer functions for descriptive statistics,
    including `Hmisc`, `pastecs`, `psych`, `skimr`, and `summytools`. Due to space
    limitations, we’ll only demonstrate the first three, but you can generate useful
    summaries with any of the five. Because these packages aren’t included in the
    base distribution, you’ll need to install them on first use (see section 1.4).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 几个用户贡献的包提供了描述性统计的函数，包括`Hmisc`、`pastecs`、`psych`、`skimr`和`summytools`。由于空间限制，我们只演示前三个，但你可以用这五个中的任何一个生成有用的摘要。因为这些包不包括在基本分布中，所以你需要在首次使用时安装它们（见第1.4节）。
- en: The `describe()` function in the `Hmisc` package returns the number of variables
    and observations, the number of missing and unique values, the mean, quantiles,
    and the five highest and lowest values. The following listing provides an example.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '`Hmisc`包中的`describe()`函数返回变量的数量和观测值的数量，缺失值和唯一值的数量，平均值、四分位数以及最高和最低的五个值。以下列表提供了一个示例。'
- en: Listing 7.3 Descriptive statistics via `describe()` in the `Hmisc` package
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.3 使用`Hmisc`包中的`describe()`进行描述性统计
- en: '[PRE4]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The `pastecs` package includes a function named `stat.desc()` that provides
    a wide range of descriptive statistics. The format is
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '`pastecs` 包包含一个名为 `stat.desc()` 的函数，它提供了一系列广泛的描述性统计。格式如下'
- en: '[PRE5]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: where *`x`* is a data frame or time series. If `basic=TRUE` (the default), the
    number of values, null values, missing values, minimum, maximum, range, and sum
    are provided. If `desc=TRUE` (also the default), the median, mean, standard error
    of the mean, 95% confidence interval for the mean, variance, standard deviation,
    and coefficient of variation are also provided. Finally, if `norm=TRUE` (not the
    default), normal distribution statistics are returned, including skewness and
    kurtosis (and their statistical significance) and the Shapiro–Wilk test of normality.
    A p-value option is used to calculate the confidence interval for the mean (.95
    by default). The next listing gives an example.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`x`* 是一个数据框或时间序列。如果 `basic=TRUE`（默认值），则提供值数、空值、缺失值、最小值、最大值、范围和总和。如果 `desc=TRUE`（也是默认值），则还会提供中位数、均值、均值的标准误差、均值的
    95% 置信区间、方差、标准差和变异系数。最后，如果 `norm=TRUE`（非默认值），则返回正态分布统计信息，包括偏度和峰度（及其统计显著性）以及 Shapiro–Wilk
    正态性检验。使用 p-value 选项来计算均值的置信区间（默认为 .95）。下一个列表提供了一个示例。
- en: Listing 7.4 Descriptive statistics via `stat.desc()` in the `pastecs` package
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.4 在 `pastecs` 包中使用 `stat.desc()` 进行描述性统计
- en: '[PRE6]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: As if this isn’t enough, the `psych` package also has a function called `describe()`
    that provides the number of nonmissing observations, mean, standard deviation,
    median, trimmed mean, median absolute deviation, minimum, maximum, range, skew,
    kurtosis, and standard error of the mean. You can see an example in the following
    listing.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 似乎这还不够，`psych` 包还有一个名为 `describe()` 的函数，它提供了非缺失观测值的数量、均值、标准差、中位数、截断均值、中位数绝对偏差、最小值、最大值、范围、偏度、峰度和均值的标准误差。你可以在下面的列表中看到一个示例。
- en: Listing 7.5 Descriptive statistics via `describe()` in the `psych` package
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.5 在 `psych` 包中使用 `describe()` 进行描述性统计
- en: '[PRE7]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: I told you that it was an embarrassment of riches!
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我告诉你，这是富得流油的尴尬！
- en: NOTE In the previous examples, the packages `psych` and `Hmisc` both provide
    a function named `describe()`. How does R know which one to use? Simply put, the
    package last loaded takes precedence, as shown in listing 7.5\. Here, `psych`
    is loaded after `Hmisc`, and a message is printed indicating that the `describe()`
    function in `Hmisc` is masked by the function in `psych`. When you type in the
    `describe()` function and R searches for it, R comes to the `psych` package first
    and executes it. If you want the `Hmisc` version instead, you can type `Hmisc::describe(mt)`.
    The function is still there. You have to give R more information to find it.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：在先前的例子中，`psych` 和 `Hmisc` 包都提供了一个名为 `describe()` 的函数。R 是如何知道使用哪一个的？简单来说，最后加载的包具有优先权，如列表
    7.5 所示。在这里，`psych` 包是在 `Hmisc` 包之后加载的，并且会打印出一个消息，表明 `Hmisc` 中的 `describe()` 函数被
    `psych` 中的函数覆盖。当你输入 `describe()` 函数时，R 会首先搜索 `psych` 包并执行它。如果你想使用 `Hmisc` 版本，你可以输入
    `Hmisc::describe(mt)`。函数仍然存在。你必须给 R 提供更多信息才能找到它。
- en: Now that you know how to generate descriptive statistics for the data as a whole,
    let’s review how to obtain statistics for subgroups of the data.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经知道了如何生成整个数据的描述性统计，让我们回顾一下如何获取数据的子组的统计信息。
- en: 7.1.3 Descriptive statistics by group
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.3 按组进行描述性统计
- en: When comparing groups of individuals or observations, the focus is usually on
    the descriptive statistics of each group rather than the total sample. Group statistics
    can be generated using base R’s `by()` function. The format is
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 当比较个体或观测值的组时，通常关注的是每个组的描述性统计，而不是整个样本。可以使用基础 R 的 `by()` 函数生成组统计信息。格式如下
- en: '[PRE8]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: where *`data`* is a data frame or matrix, *`INDICES`* is a factor or list of
    factors that defines the groups, and *`FUN`* is an arbitrary function that operates
    on all the columns of a data frame. The next listing provides an example.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`data`* 是一个数据框或矩阵，*`INDICES`* 是一个因子或因子列表，它定义了组，而 *`FUN`* 是一个作用于数据框所有列的任意函数。下一个列表提供了一个示例。
- en: Listing 7.6 Descriptive statistics by group using `by()`
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.6 使用 `by()` 按组进行描述性统计
- en: '[PRE9]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: In this case, `dstats()` applies the `mystats()` function from listing 7.2 to
    each column of the data frame. Placing it in the `by()` function gives you summary
    statistics for each level of `am`.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，`dstats()` 将列表 7.2 中的 `mystats()` 函数应用于数据框的每一列。将其放在 `by()` 函数中，你可以得到
    `am` 的每个级别的汇总统计信息。
- en: In the next example (listing 7.7), summary statistics are generated for two
    `by` variables (`am` and `vs`), and the results for each group are printed with
    custom labels. Additionally, missing values are omitted before calculating statistics.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个例子（列表 7.7）中，为两个 `by` 变量（`am` 和 `vs`）生成了汇总统计量，并且每个组的统计结果都使用自定义标签打印出来。此外，在计算统计量之前，省略了缺失值。
- en: Listing 7.7 Descriptive statistics for groups defined by multiple variables
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.7：由多个变量定义的组的描述性统计
- en: '[PRE10]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Although the previous examples used the `mystats()` function, you could have
    used the `describe()` function from the `Hmisc` and `psych` packages or the `stat.desc()`
    function from the `pastecs` package. In fact, the `by()` function provides a general
    mechanism for repeating *any* analysis by subgroups.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然前面的例子使用了 `mystats()` 函数，但你也可以使用 `Hmisc` 和 `psych` 包中的 `describe()` 函数，或者 `pastecs`
    包中的 `stat.desc()` 函数。实际上，`by()` 函数提供了一个通用的机制，可以重复对任何子组进行任何分析。
- en: 7.1.4 Summarizing data interactively with dplyr
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.4 使用 dplyr 交互式汇总数据
- en: So far, we’ve focused on methods that generate a comprehensive set of descriptive
    statistics for a given data frame. However, in interactive, exploratory data analyses,
    our goal is to answer targeted questions. In this case, we’ll want to obtain a
    limited number of statistics on specific groups of observations.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们一直关注生成给定数据框的全面描述性统计方法。然而，在交互式、探索性数据分析中，我们的目标是回答有针对性的问题。在这种情况下，我们希望从特定的观察组中获得有限数量的统计信息。
- en: The `dplyr` package, introduced in section 3.11, provides us with tools to quickly
    and flexibly accomplish this. The `summarize()` and `summarize_all()` functions
    can be used to calculate any statistic, and the `group_by()` function can be used
    to specify the groups on which to calculate those statistics.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在第 3.11 节中介绍的 `dplyr` 包为我们提供了快速灵活地完成此任务的工具。`summarize()` 和 `summarize_all()`
    函数可以用来计算任何统计量，而 `group_by()` 函数可以用来指定计算这些统计量的组。
- en: As a demonstration, let’s ask and answer a set of questions using the `Salaries`
    data frame in the `carData` package. The dataset contains 2008–2009 nine-month
    salaries in US dollars (`salary`) for 397 faculty members at a university in the
    United States. The data were collected as part of ongoing efforts to monitor salary
    differences between male and female faculty.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 作为演示，让我们使用 `carData` 包中的 `Salaries` 数据框提出并回答一系列问题。该数据集包含美国一所大学 2008-2009 年九个月的美元薪资（`salary`），涉及
    397 名教职员工。这些数据是作为持续监测男性和女性教职员工薪资差异的持续努力的一部分而收集的。
- en: Before continuing, be sure that the `carData` and `dplyr` packages are installed
    (`install.packages(c("carData",` `"dplyr")`). Then load the packages
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，请确保已安装 `carData` 和 `dplyr` 包（`install.packages(c("carData", "dplyr"))`）。然后加载这些包
- en: '[PRE11]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: We’re now ready to interrogate the data.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在准备好对数据进行查询。
- en: What is the median salary and salary range for the 397 professors?
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 397 名教授的薪资中位数和薪资范围是多少？
- en: '[PRE12]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The `Salaries` dataset is passed to the `summarize()` function, which calculates
    the median, minimum, and maximum value for salary and returns the result as a
    one-row tibble (data frame). The median nine-month salary is $107,300, and at
    least one person was making more than $230,000\. Clearly, I need to ask for a
    raise.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '`Salaries` 数据集被传递给 `summarize()` 函数，该函数计算薪资的中位数、最小值和最大值，并将结果作为一行 tibble（数据框）返回。九个月薪资的中位数是
    $107,300，至少有一个人赚得超过 $230,000。显然，我需要要求加薪。'
- en: What is the faculty count, median salary, and salary range by sex and rank?
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 按性别和职称，教职员工的数量、中位薪资和薪资范围是多少？
- en: '[PRE13]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: When categorical variables are specified in a `by_group()` statement, the `summarize()`
    function generates a row of statistics for each combination of their levels. Women
    have a lower median salary than men within each faculty rank. In addition, there
    is a very large number of male full professors at this university.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 当在 `by_group()` 语句中指定分类变量时，`summarize()` 函数为它们级别的每个组合生成一行统计信息。在每一所学院的职称中，女性的中位薪资低于男性。此外，这所大学有大量的男性正教授。
- en: What are the mean years of service and years since PhD for faculty by sex and
    rank?
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 按性别和职称，教职员工的平均服务年限和自获得博士学位以来的年限是多少？
- en: '[PRE14]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The `summarize_all()` function calculates a summary statistic for each nongrouping
    variable (`yrs.service` and `yrs.since.phd`). If you want more than one statistic
    for each variable, provide them in a list. For example, `summarize_all(list (mean=mean,`
    `std=sd))` would calculate the mean and standard deviation for each variable.
    Men and women have comparable experience histories at the assistant and associate
    professor levels. However, female full professors have fewer years of experience
    than their male counterparts.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '`summarize_all()` 函数为每个非分组变量（`yrs.service` 和 `yrs.since.phd`）计算汇总统计量。如果你想要每个变量的多个统计量，请以列表形式提供。例如，`summarize_all(list(mean=mean,
    std=sd))` 将为每个变量计算均值和标准差。男性和女性在助理教授和副教授级别上的经验历史相当。然而，女性正教授的经验年数少于她们的男性同行。'
- en: One advantage of the `dplyr` approach is that results are returned as tibbles
    (data frames). This allows you to analyze these summary results further, plot
    them, and reformat them for printing. It also provides an easy mechanism for aggregating
    data.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '`dplyr` 方法的一个优点是结果以 tibbles（数据框）的形式返回。这允许你进一步分析这些汇总结果，绘制它们，并将它们重新格式化以供打印。它还提供了一个简单的机制来聚合数据。'
- en: In general, data analysts have their own preferences for which descriptive statistics
    to display and how they like to see them formatted. This is probably why there
    are many variations available. Choose the one that works best for you, or create
    your own!
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，数据分析师都有自己的偏好，选择哪些描述性统计量来展示，以及他们喜欢如何格式化这些统计量。这可能是为什么有这么多变体可供选择。选择最适合你的一个，或者创建你自己的！
- en: 7.1.5 Visualizing results
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.1.5 可视化结果
- en: Numerical summaries of a distribution’s characteristics are important, but they’re
    no substitute for a visual representation. For quantitative variables, you have
    histograms (section 6.4), density plots (section 6.5), box plots (section 6.6),
    and dot plots (section 6.7). They can provide insights that are easily missed
    by reliance on a small set of descriptive statistics.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 分布特性的数值汇总很重要，但它们不能替代视觉表示。对于定量变量，你有直方图（第 6.4 节）、密度图（第 6.5 节）、箱线图（第 6.6 节）和点图（第
    6.7 节）。它们可以提供通过依赖少量描述性统计量容易错过的见解。
- en: The functions considered so far provide summaries of quantitative variables.
    The functions in the next section allow you to examine the distributions of categorical
    variables.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止考虑的函数提供了定量变量的汇总。下一节中的函数允许你检查分类变量的分布。
- en: 7.2 Frequency and contingency tables
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.2 频率和列联表
- en: In this section, we’ll look at frequency and contingency tables from categorical
    variables along with tests of independence, measures of association, and methods
    for graphically displaying results. We’ll be using functions in the basic installation,
    along with functions from the `vcd` and `gmodels` packages. In the following examples,
    assume that `A`, `B`, and `C` represent categorical variables.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将查看来自分类变量的频率和列联表，以及独立性检验、关联度测量和图形显示结果的方法。我们将使用基本安装中的函数，以及 `vcd` 和 `gmodels`
    包中的函数。在以下示例中，假设 `A`、`B` 和 `C` 代表分类变量。
- en: 'The data for this section come from the `Arthritis` dataset included with the
    `vcd` package. The data are from Koch and Edward (1988) and represents a double-blind
    clinical trial of new treatments for rheumatoid arthritis. Here are the first
    few observations:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 本节的数据来自 `vcd` 包中包含的 `Arthritis` 数据集。数据来自 Koch 和 Edward（1988 年）的研究，代表了一种针对类风湿性关节炎的新治疗方法的双盲临床试验。以下是前几个观测值：
- en: '[PRE15]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Treatment (Placebo, Treated), Sex (Male, Female), and Improved (None, Some,
    Marked) are all categorical factors. In the next section, you’ll create frequency
    and contingency tables (cross-classifications) from the data.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 处理（安慰剂，治疗），性别（男性，女性），以及改善（无，一些，显著）都是分类因素。在下一节中，你将根据数据创建频率和列联表（交叉分类）。
- en: 7.2.1 Generating frequency tables
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.1 生成频率表
- en: R provides several methods for creating frequency and contingency tables. The
    most important functions are listed in table 7.1.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: R 提供了多种创建频率和列联表的方法。最重要的函数列于表 7.1 中。
- en: Table 7.1 Functions for creating and manipulating contingency tables
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 表 7.1 创建和操作列联表的函数
- en: '| Function | Description |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| 函数 | 描述 |'
- en: '| `table(*var1*, *var2*, ..., *varN*)` | Creates an `N`-way contingency table
    from `N` categorical variables (factors) |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| `table(*var1*, *var2*, ..., *varN*)` | 从 `N` 个分类变量（因素）创建一个 `N` 方列联表 |'
- en: '| `xtabs(*formula, data*)` | Creates an `N`-way contingency table based on
    a formula and a matrix or data frame |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| `xtabs(*formula, data*)` | 根据公式和矩阵或数据框创建一个`N`维列联表 |'
- en: '| `prop.table(*table, margins*)` | Expresses table entries as fractions of
    the marginal table defined by the `margins` |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| `prop.table(*table, margins*)` | 将表条目表示为由`margins`定义的边际表的分数 |'
- en: '| `margin.table(*table, margins*)` | Computes the sum of table entries for
    a marginal table defined by the `margins` |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| `margin.table(*table, margins*)` | 计算由`margins`定义的边际表的条目总和 |'
- en: '| `addmargins(*table, margins*)` | Puts summary `margins` (sums by default)
    on a table |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| `addmargins(*table, margins*)` | 在表上添加摘要`margins`（默认为总和） |'
- en: '| `ftable(*table*)` | Creates a compact, “flat” contingency table |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| `ftable(*table*)` | 创建一个紧凑的、“扁平”的列联表 |'
- en: In the next sections, we’ll use each of these functions to explore categorical
    variables. We’ll begin with simple frequencies, followed by two-way contingency
    tables, and end with multiway contingency tables. The first step is to create
    a table using either the `table()` or `xtabs()` function and then manipulate it
    using the other functions.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的几节中，我们将使用这些函数中的每一个来探索分类变量。我们将从简单的频率开始，然后是双向列联表，最后是多维列联表。第一步是使用`table()`或`xtabs()`函数创建一个表，然后使用其他函数对其进行操作。
- en: One-way tables
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 一维表
- en: 'You can generate simple frequency counts using the `table()` function. Here’s
    an example:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`table()`函数生成简单的频率计数。以下是一个示例：
- en: '[PRE16]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: You can turn these frequencies into proportions with `prop.table()`
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`prop.table()`将这些频率转换为比例
- en: '[PRE17]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'or into percentages using `prop.table()*100`:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 或者使用`prop.table()*100`转换为百分比：
- en: '[PRE18]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Here you can see that 50% of study participants had some or marked improvement
    (16.7 + 33.3).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你可以看到50%的研究参与者有一些或显著的改善（16.7 + 33.3）。
- en: Two-way tables
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 二维表
- en: For two-way tables, the format for the `table()` function is
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 对于双向表，`table()`函数的格式是
- en: '[PRE19]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: where `A` is the row variable and `B` is the column variable. Alternatively,
    the `xtabs()` function allows you to create a contingency table using formula-style
    input. The format is
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`A`是行变量，`B`是列变量。或者，`xtabs()`函数允许你使用公式样式输入创建列联表。格式是
- en: '[PRE20]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: where `mydata` is a matrix or data frame. In general, the variables to be cross-classified
    appear on the right of the formula (that is, to the right of the `~`), separated
    by `+` signs. If a variable is included on the left side of the formula, it’s
    assumed to be a vector of frequencies (useful if the data have already been tabulated).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`mydata`是一个矩阵或数据框。一般来说，要交叉分类的变量出现在公式的右边（即`~`的右边），由加号分隔。如果一个变量出现在公式的左边，它被假定为频率向量（如果数据已经过分类很有用）。
- en: For the `Arthritis` data, you have
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`Arthritis`数据，你有
- en: '[PRE21]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: You can generate marginal frequencies and proportions using the `margin.table()`
    and `prop.table()` functions, respectively. For row sums and row proportions,
    you have
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`margin.table()`和`prop.table()`函数分别生成边际频率和比例。对于行总和和行比例，你有
- en: '[PRE22]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The index (`1`) refers to the first variable in the `xtabs()` statement—the
    row variable. The proportions in each row add up to 1\. Looking at the table,
    you can see that 51% of treated individuals had marked improvement, compared to
    16% of those receiving a placebo.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 索引（`1`）指的是`xtabs()`语句中的第一个变量——行变量。每行的比例加起来等于1。查看表格，你可以看到51%的接受治疗的人有显著改善，而接受安慰剂的人只有16%。
- en: For column sums and column proportions, you have
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 对于列总和和列比例，你有
- en: '[PRE23]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Here, the index (`2`) refers to the second variable in the `xtabs()` statement—i.e.,
    the columns. The proportions in each column add up to 1.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，索引（`2`）指的是`xtabs()`语句中的第二个变量——即列。每列的比例加起来等于1。
- en: 'Cell proportions are obtained with this statement:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此语句可以获得单元格比例：
- en: '[PRE24]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: The sum of all the cell proportions adds up to 1.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 所有单元格比例的总和加起来等于1。
- en: 'You can use the `addmargins()` function to add marginal sums to these tables.
    For example, the following code adds a `Sum` row and column:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`addmargins()`函数将这些表的边际总和添加到其中。例如，以下代码添加了一个`Sum`行和列：
- en: '[PRE25]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'When using `addmargins()`, the default is to create sum margins for all variables
    in a table. In contrast, the following code adds a `Sum` column alone:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用`addmargins()`时，默认是为表中的所有变量创建总和边际。相比之下，以下代码仅添加一个`Sum`列：
- en: '[PRE26]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Similarly, this code adds a `Sum` row:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，此代码添加了一个`Sum`行：
- en: '[PRE27]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: In the table, you see that 25% of those patients with marked improvement received
    a placebo.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在表中，你可以看到25%的显著改善的患者接受了安慰剂。
- en: NOTE The `table()` function ignores missing values (`NAs`) by default. To include
    `NA` as a valid category in the frequency counts, include the table option `useNA="ifany"`.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：`table()`函数默认忽略缺失值（`NAs`）。要包括`NA`作为频率计数中的有效类别，请包含表格选项`useNA="ifany"`。
- en: A third method for creating two-way tables is the `CrossTable()` function in
    the `gmodels` package. The `CrossTable()` function produces two-way tables modeled
    after `PROC FREQ` in SAS or `CROSSTABS` in SPSS. The following listing shows an
    example.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 创建双向表的第三种方法是`gmodels`包中的`CrossTable()`函数。`CrossTable()`函数生成类似于SAS中的`PROC FREQ`或SPSS中的`CROSSTABS`的双向表。以下列表提供了一个示例。
- en: Listing 7.8 Two-way table using `CrossTable`
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.8 使用`CrossTable`的二维表
- en: '[PRE28]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: The `CrossTable()` function has options to report percentages (row, column,
    and cell); specify decimal places; produce chi-square, Fisher, and McNemar tests
    of independence; report expected and residual values (Pearson, standardized, and
    adjusted standardized); include missing values as valid; annotate with row and
    column titles; and format as SAS- or SPSS-style output. See `help(CrossTable)`
    for details.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '`CrossTable()`函数有选项可以报告百分比（行、列和单元格）；指定小数位数；生成卡方、Fisher和McNemar独立性检验；报告期望值和残差值（皮尔逊、标准化和调整标准化）；将缺失值视为有效；用行和列标题注释；并以SAS或SPSS风格输出格式化。有关详细信息，请参阅`help(CrossTable)`。'
- en: If you have more than two categorical variables, you’re dealing with multidimensional
    tables. We’ll consider these next.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有两个以上的分类变量，你将处理多维表。我们将在下一部分考虑这些。
- en: Multidimensional tables
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 多维表
- en: Both `table()` and `xtabs()` can be used to generate multidimensional tables
    based on three or more categorical variables. The `margin.table()`, `prop.table()`,
    and `addmargins()` functions extend naturally to more than two dimensions. Additionally,
    the `ftable()` function can be used to print multidimensional tables in a compact
    and attractive manner. An example is given in the next listing.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '`table()`和`xtabs()`都可以用于根据三个或更多分类变量生成多维表。`margin.table()`、`prop.table()`和`addmargins()`函数自然扩展到超过两个维度。此外，`ftable()`函数可以用于以紧凑和吸引人的方式打印多维表。以下列表提供了一个示例。'
- en: Listing 7.9 Three-way contingency table
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.9 三维列联表
- en: '[PRE29]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: ❶ Cell frequencies
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 单元频率
- en: ❷ Marginal frequencies
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 边际频率
- en: ❸ Treatment × Improved marginal frequencies
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 处理 × 改进边际频率
- en: ❹ Improved proportions for Treatment × Sex
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 处理 × 性别改进比例
- en: The code at ❶ produces cell frequencies for the three-way classification. The
    code also demonstrates how the `ftable()` function can be used to print a more
    compact and attractive version of the table.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: ❶处的代码生成了三维分类的单元频率。该代码还演示了如何使用`ftable()`函数打印出更紧凑和吸引人的表格版本。
- en: The code at ❷ produces the marginal frequencies for `Treatment`, `Sex`, and
    `Improved`. Because you created the table with the formula `~Treatment+Sex` `+
    Improved`, `Treatment` is referred to by index `1`, `Sex` is referred to by index
    `2`, and `Improved` is referred to by index `3`.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: ❷处的代码生成了`Treatment`、`Sex`和`Improved`的边际频率。因为你使用公式`~Treatment+Sex + Improved`创建了表格，所以`Treatment`通过索引`1`引用，`Sex`通过索引`2`引用，而`Improved`通过索引`3`引用。
- en: The code at ❸ produces the marginal frequencies for the `Treatment` `x Improved`
    classification, summed over `Sex`. ❹ provides the proportion of patients with
    `None`, `Some`, and `Marked` improvement for each `Treatment` `×` `Sex` combination.
    Here you see that 36% of treated males had marked improvement compared to 59%
    of treated females. In general, the proportions will add to 1 over the indices
    not included in the `prop.table()` `call` (the third index, or `Improved` in this
    case). You can see this in the last example, where you add a sum margin over the
    third index.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: ❸处的代码生成了`Treatment` `x Improved`分类的边际频率，按`Sex`求和。❹提供了每个`Treatment` `×` `Sex`组合中`None`、`Some`和`Marked`改进的病人比例。在这里，你可以看到36%的接受治疗的男性有显著的改善，而接受治疗的女性中有59%。一般来说，比例将在`prop.table()`调用中未包含的索引上求和为1（在这个例子中是第三个索引，即`Improved`）。你可以在最后一个示例中看到这一点，其中你在第三个索引上添加了一个总和边缘。
- en: If you want percentages instead of proportions, you can multiply the resulting
    table by 100\. For example, this statement
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要百分比而不是比例，可以将结果表乘以100。例如，此语句
- en: '[PRE30]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'produces this table:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 生成此表：
- en: '[PRE31]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Contingency tables tell you the frequency or proportions of cases for each combination
    of the variables that make up the table, but you’re probably also interested in
    whether the variables in the table are related or independent. Tests of independence
    are covered in the next section.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 列联表告诉你表中每个变量组合的案例频率或比例，但你可能也对表中的变量是否相关或独立感兴趣。独立性检验将在下一节中介绍。
- en: 7.2.2 Tests of independence
  id: totrans-149
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.2 独立性检验
- en: R provides several methods of testing the independence of categorical variables.
    The three tests described in this section are the chi-square test of independence,
    the Fisher exact test, and the Cochran-Mantel–Haenszel test.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: R 提供了多种测试分类变量独立性的方法。本节中描述的三种测试分别是卡方独立性检验、Fisher 精确检验和 Cochran-Mantel-Haenszel
    检验。
- en: Chi-square test of independence
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 独立性卡方检验
- en: You can apply the function `chisq.test()` to a two-way table to produce a chi-square
    test of independence of the row and column variables. See the next listing for
    an example.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以将 `chisq.test()` 函数应用于双向表，以产生行和列变量的独立性卡方检验。请参见下一列表中的示例。
- en: Listing 7.10 Chi-square test of independence
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.10 独立性卡方检验
- en: '[PRE32]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: ❶ Treatment and Improved aren’t independent.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 治疗和改善不是独立的。
- en: ❷ Gender and Improved are independent.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 性别和改善是独立的。
- en: From the results, there appears to be a relationship between treatment received
    and level of improvement (p < .01). But there doesn’t appear to be a relationship
    ❷ between patient sex and improvement (p > .05). The p-values are the probability
    of obtaining the sampled results, assuming independence of the row and column
    variables in the population. Because the probability is small for ❶, you reject
    the hypothesis that treatment type and outcome are independent. Because the probability
    for ❷ isn’t small, it’s not unreasonable to assume that outcome and gender are
    independent. The warning message in listing 7.10 is produced because one of the
    six cells in the table (male, some improvement) has an expected value less than
    `5`, which may invalidate the chi-square approximation.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 从结果来看，似乎治疗接受情况与改善程度之间存在关联（p < .01）。但似乎没有发现患者性别与改善程度之间的关联（p > .05）。p 值是在假设总体中行和列变量的独立性成立的情况下，获得样本结果的概率。因为概率很小❶，所以你拒绝治疗类型和结果独立的假设。因为概率❷并不小，所以假设结果和性别独立是合理的。列表
    7.10 中的警告信息产生是因为表格中的六个单元格（男性，有些改善）的期望值小于 `5`，这可能会使卡方近似无效。
- en: Fisher’s exact test
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: Fisher 精确检验
- en: 'You can produce a Fisher’s exact test via the `fisher.test()` function. Fisher’s
    exact test evaluates the null hypothesis of independence of rows and columns in
    a contingency table with fixed marginals. The format is `fisher.test(mytable)`,
    where `mytable` is a two-way table. Here’s an example:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过 `fisher.test()` 函数进行 Fisher 精确检验。Fisher 精确检验评估的是列联表中行和列的独立性零假设，其中边际是固定的。格式是
    `fisher.test(mytable)`，其中 `mytable` 是一个双向表。以下是一个示例：
- en: '[PRE33]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: In contrast to many statistical packages, the `fisher.test()` function can be
    applied to any two-way table with two or more rows and columns, not just a 2 ×
    2 independence table.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 与许多统计软件包不同，`fisher.test()` 函数可以应用于任何具有两个或更多行和列的双向表，而不仅仅是 2 × 2 独立性表。
- en: Cochran–Mantel–Haenszel test
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: Cochran-Mantel-Haenszel 检验
- en: 'The `mantelhaen.test()` function provides a Cochran–Mantel–Haenszel chi-square
    test of the null hypothesis that two nominal variables are conditionally independent
    in each stratum of a third variable. The following code tests the hypothesis that
    the `Treatment` and `Improved` variables are independent within each level for
    `Sex`. The test assumes that there’s no three-way (`Treatment` × `Improved` ×
    `Sex`) interaction:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '`mantelhaen.test()` 函数提供了对第三变量每个层中两个名义变量条件独立性的零假设的 Cochran-Mantel-Haenszel
    卡方检验。以下代码测试了 `Treatment` 和 `Improved` 变量在 `Sex` 的每个水平上是否独立的假设。该测试假设不存在三重交互作用（`Treatment`
    × `Improved` × `Sex`）：'
- en: '[PRE34]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: The results suggest that the treatment received and the improvement reported
    aren’t independent within each level of `Sex` (that is, treated individuals improved
    more than those receiving placebos when controlling for sex).
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 结果表明，在 `Sex` 的每个水平上，接受的治疗和报告的改善情况并不是独立的（即在控制性别的情况下，接受治疗的人比接受安慰剂的人改善更多）。
- en: 7.2.3 Measures of association
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.3 关联度量
- en: The significance tests in the previous section evaluate whether sufficient evidence
    exists to reject a null hypothesis of independence between variables. If you can
    reject the null hypothesis, your interest turns naturally to measures of association
    to gauge the strength of the relationships present. The `assocstats()` function
    in the `vcd` package can be used to calculate the phi coefficient, contingency
    coefficient, and Cramér’s V for a two-way table. An example is given in the following
    listing.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 上一节中的显著性检验评估是否存在足够的证据来拒绝变量之间独立性的零假设。如果你可以拒绝零假设，你的兴趣自然会转向关联性度量，以衡量现有关系的强度。`vcd`
    包中的 `assocstats()` 函数可以用来计算双向表的 phi 系数、列联系数和 Cramér 的 V 值。以下是一个示例。
- en: Listing 7.11 Measures of association for a two-way table
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.11 双向表的关联性度量
- en: '[PRE35]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: In general, larger magnitudes indicate stronger associations. The `vcd` package
    also provides a `kappa()` function that can calculate Cohen’s kappa and weighted
    kappa for a confusion matrix (for example, the degree of agreement between two
    judges classifying a set of objects into categories).
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，较大的数值表示更强的关联性。`vcd` 包还提供了一个 `kappa()` 函数，可以计算混淆矩阵的 Cohen 的 kappa 和加权 kappa（例如，两个将一组对象分类到类别中的评委之间的一致程度）。
- en: 7.2.4 Visualizing results
  id: totrans-171
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.2.4 结果的可视化
- en: R has mechanisms for visually exploring the relationships among categorical
    variables that go well beyond those found in most other statistical platforms.
    You typically use bar charts to visualize frequencies in one dimension (see section
    6.1). The `vcd` package has excellent functions for visualizing relationships
    among categorical variables in multidimensional datasets using mosaic and association
    plots (see section 11.4). Finally, correspondence-analysis functions in the `ca`
    package allow you to visually explore relationships between rows and columns in
    contingency tables using various geometric representations (Nenadic´and Greenacre,
    2007).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: R 具有探索分类变量之间关系的机制，这些机制远远超出了大多数其他统计平台所发现的。你通常使用条形图来可视化一维中的频率（参见第6.1节）。`vcd` 包提供了用于使用镶嵌图和关联图可视化多维数据集中分类变量之间关系的优秀函数（参见第11.4节）。最后，`ca`
    包中的对应分析函数允许你使用各种几何表示来可视化列联表中行与列之间的关系（Nenadic´和Greenacre，2007）。
- en: This ends the discussion of contingency tables until we take up more advanced
    topics in chapters 11 and 19\. Next, let’s look at various types of correlation
    coefficients.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 这结束了关于列联表的讨论，直到我们在第11章和第19章中探讨更高级的主题。接下来，让我们看看各种类型的相关系数。
- en: 7.3 Correlations
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.3 相关系数
- en: Correlation coefficients are used to describe relationships among quantitative
    variables. The sign (plus or minus) indicates the direction of the relationship
    (positive or inverse), and the magnitude indicates the strength of the relationship
    (ranging from 0 for no relationship to 1 for a perfectly predictable relationship).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 相关系数用于描述定量变量之间的关系。符号（正号或负号）表示关系的方向（正相关或负相关），而数值表示关系的强度（从0表示没有关系到1表示完全可预测的关系）。
- en: In this section, we’ll look at a variety of correlation coefficients, as well
    as tests of significance. We’ll use the `state.x77` dataset available in the base
    R installation. It provides data on the population, income, illiteracy rate, life
    expectancy, murder rate, and high school graduation rate for the 50 US states
    in 1977\. There are also temperature and land-area measures, but we’ll drop them
    to save space. Use `help(state .x77)` to learn more about the file. In addition
    to the base installation, we’ll be using the `psych` and `ggm` packages.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将探讨各种相关系数以及显著性检验。我们将使用 R 基础安装中可用的 `state.x77` 数据集。它提供了1977年50个美国州的人口、收入、文盲率、预期寿命、谋杀率和高中毕业率的数据。还有温度和土地面积指标，但我们将删除它们以节省空间。使用
    `help(state .x77)` 可以了解更多关于该文件的信息。除了基础安装外，我们还将使用 `psych` 和 `ggm` 包。
- en: 7.3.1 Types of correlations
  id: totrans-177
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3.1 相关类型的种类
- en: R can produce a variety of correlation coefficients, including Pearson, Spearman,
    Kendall, partial, polychoric, and polyserial. Let’s look at each in turn.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: R 可以产生各种相关系数，包括皮尔逊、斯皮尔曼、肯德尔、偏相关、多项相关和多项序列相关。让我们逐一来看。
- en: Pearson, Spearman, and Kendall correlations
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 皮尔逊、斯皮尔曼和肯德尔相关系数
- en: The Pearson product-moment correlation assesses the degree of linear relationship
    between two quantitative variables. Spearman’s rank-order correlation coefficient
    assesses the degree of relationship between two rank-ordered variables. Kendall’s
    tau is also a nonparametric measure of rank correlation.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 皮尔逊积矩相关系数评估两个定量变量之间线性关系的程度。斯皮尔曼秩相关系数评估两个秩次变量之间的关系程度。肯德尔tau也是一种非参数的秩相关度量。
- en: The `cor()` function produces all three correlation coefficients, whereas the
    `cov()` function provides covariances. There are many options, but a simplified
    format for producing correlations is
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '`cor()`函数产生所有三个相关系数，而`cov()`函数提供协方差。有许多选项，但生成相关性的简化格式如下：'
- en: '[PRE36]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: The options are described in table 7.2.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 选项在表7.2中描述。
- en: Table 7.2 `cor/cov` options
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 表7.2 `cor/cov`选项
- en: '| Option | Description |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| 选项 | 描述 |'
- en: '| `x` | Matrix or data frame. |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| `x` | 矩阵或数据框。 |'
- en: '| `use` | Specifies the handling of missing data. The options are `all.obs`
    (assumes no missing data—missing data will produce an error), `everything` (any
    correlation involving a case with missing values will be set to `missing)`, `complete.obs`
    (listwise deletion), and `pairwise.complete.obs` (pairwise deletion). |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| `use` | 指定缺失数据的处理方式。选项有`all.obs`（假设没有缺失数据——缺失数据将产生错误）、`everything`（任何涉及缺失值的案例的相关性都将设置为`missing`）、`complete.obs`（逐行删除）和`pairwise.complete.obs`（成对删除）。
    |'
- en: '| `method` | Specifies the type of correlation. The options are `pearson`,
    `spearman`, and `kendall`. |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| `method` | 指定相关类型。选项有`pearson`、`spearman`和`kendall`。 |'
- en: The default options are `use="everything"` and `method="pearson"`. You can see
    an example in the following listing.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 默认选项是`use="everything"`和`method="pearson"`。以下列表提供了一个示例。
- en: Listing 7.12 Covariances and correlations
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 列表7.12 协方差和相关系数
- en: '[PRE37]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: The first call produces the variances and covariances, the second provides Pearson
    product-moment correlation coefficients, and the third produces Spearman rank-order
    correlation coefficients. You can see, for example, that a strong positive correlation
    exists between income and high school graduation rate and that a strong negative
    correlation exists between illiteracy rates and life expectancy.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次调用产生方差和协方差，第二次提供皮尔逊积矩相关系数，第三次产生斯皮尔曼秩相关系数。例如，您可以看到收入与高中毕业率之间存在强烈的正相关，而文盲率与预期寿命之间存在强烈的负相关。
- en: 'Notice that you get square matrices by default (all variables crossed with
    all other variables). You can also produce nonsquare matrices, as shown in the
    following example:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，默认情况下您会得到方阵（所有变量与所有其他变量交叉）。您也可以生成非方阵，如下面的示例所示：
- en: '[PRE38]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: This version of the function is particularly useful when you’re interested in
    the relationships between one set of variables and another. Notice that the results
    don’t tell you if the correlations differ significantly from 0 (that is, whether
    there’s sufficient evidence based on the sample data to conclude that the population
    correlations differ from 0). For that, you need tests of significance (described
    in section 7.3.2).
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 当您对一组变量与另一组变量之间的关系感兴趣时，这个函数版本特别有用。请注意，结果不会告诉您相关性是否显著不同于0（即，是否有足够的证据基于样本数据来得出结论，认为总体相关性不同于0）。为此，您需要进行显著性测试（在7.3.2节中描述）。
- en: Partial correlations
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 部分相关
- en: A *partial* correlation is a correlation between two quantitative variables,
    controlling for one or more other quantitative variables. You can use the `pcor()`
    function in the `ggm` package to provide partial correlation coefficients. The
    `ggm` package isn’t installed by default, so be sure to install it on first use.
    The format is
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '**部分相关**是指两个定量变量之间的相关关系，同时控制一个或多个其他定量变量。您可以使用`ggm`包中的`pcor()`函数来提供部分相关系数。`ggm`包默认未安装，因此请确保在首次使用时安装它。格式如下：'
- en: '[PRE39]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'where `u` is a vector of numbers, with the first two numbers being the indices
    of the variables to be correlated, and the remaining numbers being the indices
    of the conditioning variables (that is, the variables being partialed out). `S`
    is the covariance matrix among the variables. An example will help clarify this:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`u`是一个数字向量，前两个数字是要相关变量的索引，其余数字是条件变量的索引（即部分化的变量）。`S`是变量之间的协方差矩阵。以下示例将有助于澄清这一点：
- en: '[PRE40]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: In this case, 0.346 is the correlation between population (variable `1`) and
    murder rate (variable `5`), controlling for the influence of income, illiteracy
    rate, and high school graduation rate (variables `2`, `3`, and `6`, respectively).
    The use of partial correlations is common in the social sciences.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，0.346 是在控制收入、文盲率和高中毕业率（分别对应变量 `2`、`3` 和 `6`）的影响下，人口（变量 `1`）与谋杀率（变量 `5`）之间的相关系数。在社会科学中，使用偏相关系数是很常见的。
- en: Other types of correlations
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 其他类型的相关性
- en: The `hetcor()` function in the `polycor` package can compute a heterogeneous
    correlation matrix containing Pearson product-moment correlations between numeric
    variables, polyserial correlations between numeric and ordinal variables, polychoric
    correlations between ordinal variables, and tetrachoric correlations between two
    dichotomous variables. Polyserial, polychoric, and tetrachoric correlations assume
    that the ordinal or dichotomous variables are derived from underlying normal distributions.
    See the documentation that accompanies this package for more information.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '`polycor` 包中的 `hetcor()` 函数可以计算包含数值变量之间的皮尔逊积矩相关系数、数值和有序变量之间的多项式相关系数、有序变量之间的多项式相关系数以及二元变量的四分位相关系数的异质相关矩阵。多项式、多项式和四分位相关系数假设有序或二元变量是从潜在的正态分布中派生出来的。有关更多信息，请参阅此包的文档。'
- en: 7.3.2 Testing correlations for significance
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3.2 测试相关性的显著性
- en: Once you’ve generated correlation coefficients, how do you test them for statistical
    significance? The typical null hypothesis is no relationship (that is, the correlation
    in the population is 0). You can use the `cor.test()` function to test an individual
    Pearson, Spearman, and Kendall correlation coefficient. A simplified format is
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦生成了相关系数，你如何测试它们的统计显著性？典型的零假设是没有关系（即总体中的相关系数为 0）。你可以使用 `cor.test()` 函数来测试单个皮尔逊、斯皮尔曼和肯德尔相关系数。简化格式如下
- en: '[PRE41]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: where *`x`* and *`y`* are the variables to be correlated, `alternative` specifies
    a two-tailed or one-tailed test (`"two.side"`, `"less"`, or `"greater"`), and
    `method` specifies the type of correlation (`"pearson"`, `"kendall"`, or `"spearman"`)
    to compute. Use `alternative="less"` when the research hypothesis is that the
    population correlation is less than 0\. Use `alternative="greater"` when the research
    hypothesis is that the population correlation is greater than 0\. By default,
    `alternative="two.side"` (the population correlation isn’t equal to 0) is assumed.
    See the following listing for an example.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`x`* 和 *`y`* 是要相关联的变量，`alternative` 指定是双尾还是单尾测试（`"two.side"`、`"less"` 或
    `"greater"`），而 `method` 指定要计算的相关类型（`"pearson"`、`"kendall"` 或 `"spearman"`）。当研究假设是总体相关系数小于
    0 时，使用 `alternative="less"`。当研究假设是总体相关系数大于 0 时，使用 `alternative="greater"`。默认情况下，假设
    `alternative="two.side"`（总体相关系数不等于 0）。以下列表提供了一个示例。
- en: Listing 7.13 Testing a correlation coefficient for significance
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.13 测试相关系数的显著性
- en: '[PRE42]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: This code tests the null hypothesis that the Pearson correlation between life
    expectancy and murder rate is 0\. Assuming that the population correlation is
    0, you’d expect to see a sample correlation as large as 0.703 less than 1 time
    out of 10 million (that is, `p=1.258e-08`). Given how unlikely this is, you reject
    the null hypothesis in favor of the research hypothesis that the population correlation
    between life expectancy and murder rate is *not* 0.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 此代码测试了零假设，即预期寿命与谋杀率之间的皮尔逊相关系数为 0。假设总体相关系数为 0，你预计在 1000 万次中只会看到 0.703 这样大的样本相关系数不到一次（即
    `p=1.258e-08`）。鉴于这种情况不太可能发生，你将拒绝零假设，支持研究假设，即预期寿命与谋杀率之间的总体相关系数**不是** 0。
- en: Unfortunately, you can test only one correlation at a time using `cor.test()`.
    Luckily, the `corr.test()` function provided in the `psych` package allows you
    to go further. The `corr.test()` function produces correlations and significance
    levels for matrices of Pearson, Spearman, and Kendall correlations. An example
    is given in the following listing.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 很遗憾，使用 `cor.test()` 你一次只能测试一个相关性。幸运的是，`psych` 包中提供的 `corr.test()` 函数允许你更进一步。`corr.test()`
    函数可以生成皮尔逊、斯皮尔曼和肯德尔相关系数矩阵的相关性和显著性水平。以下列表提供了一个示例。
- en: Listing 7.14 Correlation matrix and tests of significance via `corr.test()`
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.14 通过 `corr.test()` 计算相关矩阵和显著性测试
- en: '[PRE43]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: The `use=` options can be `"pairwise"` or `"complete"` (for pairwise or listwise
    deletion of missing values, respectively). The `method=` option is `"pearson"`
    (the default), `"spearman"`, or `"kendall"`. Here you see that the correlation
    between illiteracy and life expectancy (–0.59) is significantly different from
    zero (`p=0.00`) and suggests that as the illiteracy rate goes up, life expectancy
    tends to go down. However, the correlation between population size and high school
    graduation rate (–0.10) is not significantly different from 0 (`p=0.5`).
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '`use=`选项可以是`"pairwise"`或`"complete"`（分别表示成对或列表删除缺失值）。`method=`选项是`"pearson"`（默认值）、`"spearman"`或`"kendall"`。在这里，你可以看到文盲率和预期寿命之间的相关性（-0.59）与零显著不同（p=0.00），这表明随着文盲率的上升，预期寿命往往会下降。然而，人口规模和高中毕业率之间的相关性（-0.10）与0没有显著差异（p=0.5）。'
- en: Other tests of significance
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 其他显著性测试
- en: In section 7.4.1, we looked at partial correlations. The `pcor.test()` function
    in the `psych` package can be used to test the conditional independence of two
    variables controlling for one or more additional variables, assuming multivariate
    normality. The format is
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 在7.4.1节中，我们研究了部分相关。`psych`包中的`pcor.test()`函数可以用来测试在控制一个或多个额外变量的情况下，两个变量的条件独立性，假设多元正态性。格式是
- en: '[PRE44]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: where *`r`* is the partial correlation produced by the `pcor()` function, *`q`*
    is the number of variables being controlled, and *`n`* is the sample size.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 其中*`r`*是由`pcor()`函数产生的部分相关，*`q`*是正在控制的变量数量，*`n`*是样本大小。
- en: 'Before leaving this topic, I should mention that the `r.test()` function in
    the `psych` package also provides a number of useful significance tests. The function
    can be used to test the following:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在离开这个主题之前，我应该提到，`psych`包中的`r.test()`函数也提供了一些有用的显著性测试。该函数可以用来测试以下内容：
- en: The significance of a correlation coefficient
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关系数的显著性
- en: The difference between two independent correlations
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个独立相关系数之间的差异
- en: The difference between two dependent correlations sharing a single variable
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 共享单个变量的两个相关系数之间的差异
- en: The difference between two dependent correlations based on completely different
    variables
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于完全不同变量的两个相关系数之间的差异
- en: See `help(r.test)` for details.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 有关详细信息，请参阅`help(r.test)`。
- en: 7.3.3 Visualizing correlations
  id: totrans-225
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.3.3 可视化相关性
- en: The bivariate relationships underlying correlations can be visualized through
    scatter plots and scatter plot matrices, whereas correlograms provide a unique
    and powerful method for comparing a large number of correlation coefficients in
    a meaningful way. Chapter 11 covers both.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 通过散点图和散点图矩阵可以可视化相关性背后的双变量关系，而相关图提供了一种独特且强大的方法，以有意义的方式比较大量相关系数。第11章涵盖了这两者。
- en: 7.4 T-tests
  id: totrans-227
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.4 t检验
- en: The most common activity in research is the comparison of two groups. Do patients
    receiving a new drug show greater improvement than patients using an existing
    medication? Does one manufacturing process produce fewer defects than another?
    Which of two teaching methods is most cost effective? If your outcome variable
    is categorical, you can use the methods described in section 7.3\. Here, we’ll
    focus on group comparisons in which the outcome variable is continuous and assumed
    to be distributed normally.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 研究中最常见的活动是比较两组。接受新药的患者是否比使用现有药物的患者显示出更大的改善？一个制造过程是否比另一个制造过程产生的缺陷更少？两种教学方法中哪一种最具有成本效益？如果你的结果变量是分类的，你可以使用第7.3节中描述的方法。在这里，我们将重点关注结果变量是连续且假设为正态分布的组间比较。
- en: For this illustration, we’ll use the `UScrime` dataset distributed with the
    `MASS` package. It contains information about the effect of punishment regimes
    on crime rates in 47 US states in 1960\. The outcome variables of interest will
    be `Prob` (the probability of imprisonment), `U1` (the unemployment rate for urban
    males ages 14–24), and `U2` (the unemployment rate for urban males ages 35–39).
    The categorical variable `So` (an indicator variable for Southern states) will
    serve as the grouping variable. The data have been rescaled by the original authors.
    (I considered naming this section “Crime and Punishment in the Old South,” but
    cooler heads prevailed.)
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个示例，我们将使用与`MASS`包一起分发的`UScrime`数据集。它包含了关于1960年47个美国州惩罚制度对犯罪率影响的信息。感兴趣的结果变量将是`Prob`（监禁的概率）、`U1`（14-24岁城市男性的失业率）和`U2`（35-39岁城市男性的失业率）。分类变量`So`（南方州的指示变量）将作为分组变量。数据已被原始作者进行了缩放。（我考虑将这一节命名为“旧南方的犯罪与惩罚”，但更冷静的头脑占了上风。）
- en: 7.4.1 Independent t-test
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4.1 独立t检验
- en: Are you more likely to be imprisoned if you commit a crime in the South? The
    comparison of interest is Southern versus non-Southern states, and the dependent
    variable is the probability of incarceration. A two-group independent t-test can
    be used to test the hypothesis that the two population means are equal. Here,
    you assume that the two groups are independent and that the data is sampled from
    normal populations. The format is either
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 在南方犯罪你是否更有可能被监禁？感兴趣的比较是南方各州与非南方各州，因变量是被监禁的概率。可以使用双组独立t检验来检验两个总体均值相等的假设。在这里，你假设两组是独立的，并且数据是从正态总体中抽取的。格式可以是
- en: '[PRE45]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: where *`y`* is numeric and *`x`* is a dichotomous variable, or
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`y`* 是数值型，*`x`* 是二元变量，或者
- en: '[PRE46]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: where *`y1`* and *`y2`* are numeric vectors (the outcome variable for each group).
    The optional `data` argument refers to a matrix or data frame containing the variables.
    In contrast to most statistical packages, the default test assumes unequal variance
    and applies the Welsh degrees-of-freedom modification. You can add a `var.equal=TRUE`
    option to specify equal variances and a pooled variance estimate. By default,
    a two-tailed alternative is assumed (that is, the means differ, but the direction
    isn’t specified). You can add the option `alternative="less"` or `alternative="greater"`
    to specify a directional test.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`y1`* 和 *`y2`* 是数值向量（每个组的因变量）。可选的 `data` 参数指的是包含变量的矩阵或数据框。与大多数统计软件包不同，默认测试假设方差不等，并应用威尔士自由度修正。你可以添加
    `var.equal=TRUE` 选项来指定方差相等和合并方差估计。默认情况下，假设双尾备择假设（即，均值不同，但方向未指定）。你可以添加选项 `alternative="less"`
    或 `alternative="greater"` 来指定方向性测试。
- en: 'The following code compares Southern (group 1) and non-Southern (group 0) states
    on the probability of imprisonment using a two-tailed test without the assumption
    of equal variances:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码使用双尾测试且不假设方差相等，比较南方（组1）和非南方（组0）各州被监禁的概率：
- en: '[PRE47]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: You can reject the hypothesis that Southern states and non-Southern states have
    equal probabilities of imprisonment (p < .001).
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以拒绝南方各州和非南方各州被监禁概率相等的假设（p < .001）。
- en: NOTE Because the outcome variable is a proportion, you might try to transform
    it to normality before carrying out the t-test. In the current case, all reasonable
    transformations of the outcome variable (`Y/1-Y,` `log(Y/1-Y)`, `arcsin(Y)`, and
    `arcsin(sqrt(Y)`) would lead to the same conclusions. Chapter 8 covers transformations
    in detail.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：因为因变量是比例，你可能尝试在执行t检验之前将其转换为正态分布。在当前情况下，所有合理的因变量转换（`Y/1-Y`，`log(Y/1-Y)`，`arcsin(Y)`，和
    `arcsin(sqrt(Y))`）都会得出相同的结论。第8章详细介绍了转换。
- en: 7.4.2 Dependent t-test
  id: totrans-240
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4.2 相关t检验
- en: As a second example, you might ask if the unemployment rate for younger males
    (14–24) is greater than for older males (35–39). In this case, the two groups
    aren’t independent. You wouldn’t expect the unemployment rate for younger and
    older males in Alabama to be unrelated. When observations in the two groups are
    related, you have a dependent-groups design. Pre-post or repeated-measures designs
    also produce dependent groups.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 作为第二个例子，你可能想知道年轻男性（14–24岁）的失业率是否高于老年男性（35–39岁）。在这种情况下，两组并不独立。你不会期望阿拉巴马州年轻和老年男性的失业率无关。当两组的观测值相关时，你有一个相关组设计。前后比较或重复测量设计也会产生相关组。
- en: A dependent t-test assumes that the difference between groups is normally distributed.
    In this case, the format is
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 相关t检验假设组间差异呈正态分布。在这种情况下，格式为
- en: '[PRE48]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'where `y1` and `y2` are the numeric vectors for the two dependent groups. The
    results are as follows:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 `y1` 和 `y2` 是两个相关组的数值向量。结果如下：
- en: '[PRE49]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: The mean difference (61.5) is large enough to warrant rejection of the hypothesis
    that the mean unemployment rate for older and younger males is the same. Younger
    males have a higher rate. In fact, the probability of obtaining a sample difference
    this large if the population means are equal is less than 0.00000000000000022
    (that is, 2.2e–16).
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 均值差异（61.5）足够大，足以拒绝老年和年轻男性失业率均值相同的假设。年轻男性的失业率更高。实际上，如果总体均值相等，获得如此大的样本差异的概率小于0.00000000000000022（即，2.2e–16）。
- en: 7.4.3 When there are more than two groups
  id: totrans-247
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.4.3 当有超过两个组时
- en: What do you do if you want to compare more than two groups? If you can assume
    that the data are independently sampled from normal populations, you can use analysis
    of variance (ANOVA). ANOVA is a comprehensive methodology that covers many experimental
    and quasi-experimental designs. As such, it has earned its own chapter. Feel free
    to abandon this section and jump to chapter 9 at any time.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想比较超过两组，你可以假设数据是从正态总体中独立采样的，可以使用方差分析（ANOVA）。ANOVA是一种涵盖许多实验和准实验设计的综合方法，因此它拥有自己的章节。你可以随时放弃这一节，跳转到第9章。
- en: 7.5 Nonparametric tests of group differences
  id: totrans-249
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.5 组间差异的非参数检验
- en: If you’re unable to meet the parametric assumptions of a t-test or ANOVA, you
    can turn to nonparametric approaches. For example, if the outcome variables are
    severely skewed or ordinal in nature, you may wish to use the techniques in this
    section.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你无法满足t检验或方差分析（ANOVA）的参数假设，你可以转向非参数方法。例如，如果结果变量严重偏斜或具有序数性质，你可能希望使用本节中的技术。
- en: 7.5.1 Comparing two groups
  id: totrans-251
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.5.1 比较两组
- en: If the two groups are independent, you can use the Wilcoxon rank-sum test (more
    popularly known as the Mann–Whitney U test) to assess whether the observations
    are sampled from the same probability distribution (that is, whether the probability
    of obtaining higher scores is greater in one population than the other). The format
    is either
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 如果两组是独立的，你可以使用Wilcoxon秩和检验（更通俗地称为Mann-Whitney U检验）来评估观察值是否来自相同的概率分布（即，一个群体中获得更高分数的概率是否大于另一个群体）。格式可以是
- en: '[PRE50]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: where `y` is numeric and `x` is a dichotomous variable, or
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`y`是数值型，`x`是二元变量，或者
- en: '[PRE51]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: where `y1` and `y2` are the outcome variables for each group. The optional `data`
    argument refers to a matrix or data frame containing the variables. The default
    is a two-tailed test. You can add the option `exact` to produce an exact test,
    and `-alternative="less"` or `alternative="greater"` to specify a directional
    test.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`y1`和`y2`是每个组的输出变量。可选的`data`参数指的是包含变量的矩阵或数据框。默认是双尾检验。你可以添加`exact`选项以产生精确检验，以及`-alternative="less"`或`alternative="greater"`来指定方向性检验。
- en: 'If you apply the Mann–Whitney U test to the question of incarceration rates
    from the previous section, you’ll get these results:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将Mann-Whitney U检验应用于上一节中的监禁率问题，你会得到以下结果：
- en: '[PRE52]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: Again, you can reject the hypothesis that incarceration rates are the same in
    Southern and non-Southern states (p < .001).
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，你可以拒绝南部和非南部各州监禁率相同的假设（p < .001）。
- en: 'The Wilcoxon signed rank test provides a nonparametric alternative to the dependent
    sample t-test. It’s appropriate in situations when the groups are paired and the
    assumption of normality is unwarranted. The format is identical to the Mann–Whitney
    U test, but you add the `paired=TRUE` option. Let’s apply it to the unemployment
    question from the previous section:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: Wilcoxon符号秩检验为相关样本t检验提供了一个非参数替代方案。在组别配对且正态性假设不成立的情况下适用。其格式与Mann-Whitney U检验相同，但需要添加`paired=TRUE`选项。让我们将其应用于上一节中的失业问题：
- en: '[PRE53]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: Again, you reach the same conclusion as you reached with the paired t-test.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，你得出与配对t检验相同的结论。
- en: In this case, the parametric t-tests and their nonparametric equivalents reach
    the same conclusions. When the assumptions for the t-tests are reasonable, the
    parametric tests are more powerful (more likely to find a difference if it exists).
    The nonparametric tests are more appropriate when the assumptions are grossly
    unreasonable (for example, rank-ordered data).
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，参数t检验及其非参数等价检验得出相同的结论。当t检验的假设合理时，参数检验更有效（如果存在差异，更有可能发现）。当假设明显不合理时（例如，等级排序数据），非参数检验更合适。
- en: 7.5.2 Comparing more than two groups
  id: totrans-264
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 7.5.2 比较超过两组
- en: When you’re comparing more than two groups, you must turn to other methods.
    Consider the `state.x77` dataset from section 7.3\. It contains population, income,
    illiteracy rate, life expectancy, murder rate, and high school graduation rate
    data for US states. What if you want to compare the illiteracy rates in four regions
    of the country (Northeast, South, North Central, and West)? This is called a *one-way
    design*, and there are both parametric and nonparametric approaches for addressing
    the question.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 当你比较超过两个组时，你必须转向其他方法。考虑 7.3 节中的 `state.x77` 数据集。它包含美国各州的人口、收入、文盲率、预期寿命、谋杀率和高中毕业率数据。如果你想比较该国四个地区（东北、南、北中、西）的文盲率怎么办？这被称为
    *单因素设计*，对于解决这个问题，既有参数方法也有非参数方法。
- en: If you can’t meet the assumptions of ANOVA designs, you can use nonparametric
    methods to evaluate group differences. If the groups are independent, a Kruskal–Wallis
    test is a useful approach. If the groups are dependent (for example, repeated
    measures or randomized block design), the Friedman test is more appropriate.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 如果无法满足 ANOVA 设计的假设，可以使用非参数方法来评估组间差异。如果组是独立的，Kruskal-Wallis 检验是一种有用的方法。如果组是相关的（例如，重复测量或随机区组设计），则
    Friedman 检验更为合适。
- en: The format for the Kruskal–Wallis test is
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: Kruskal-Wallis 检验的格式为
- en: '[PRE54]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: where `y` is a numeric outcome variable and `A` is a grouping variable with
    two or more levels (if there are two levels, it’s equivalent to the Mann–Whitney
    U test). For the Friedman test, the format is
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 `y` 是数值结果变量，`A` 是具有两个或更多级别的分组变量（如果有两个级别，则等同于 Mann-Whitney U 检验）。对于 Friedman
    检验，格式为
- en: '[PRE55]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: where `y` is the numeric outcome variable, `A` is a grouping variable, and `B`
    is a blocking variable that identifies matched observations. In both cases, `data`
    is an option argument specifying a matrix or data frame containing the variables.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 `y` 是数值结果变量，`A` 是分组变量，`B` 是识别匹配观察值的分组变量。在这两种情况下，`data` 是一个可选参数，指定包含变量的矩阵或数据框。
- en: 'Let’s apply the Kruskal–Wallis test to the illiteracy question. First, you’ll
    have to add the region designations to the dataset. These are contained in the
    dataset `state.region` distributed with the base installation of R:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们应用 Kruskal-Wallis 检验来解决文盲问题。首先，你必须将地区标识符添加到数据集中。这些标识符包含在 R 基础安装中提供的 `state.region`
    数据集中：
- en: '[PRE56]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Now you can apply the test:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你可以应用这个测试：
- en: '[PRE57]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: The significance test suggests that the illiteracy rate isn’t the same in each
    of the four regions of the country (p <.001).
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 显著性检验表明，该国的四个地区（东北、南、北中、西）的文盲率并不相同（p <.001）。
- en: Although you can reject the null hypothesis of no difference, the test doesn’t
    tell you *which* regions differ significantly from each other. To answer this
    question, you could compare groups two at a time using the Wilcoxon test. A more
    elegant approach is to apply a multiple-comparisons procedure that computes all
    pairwise comparisons while controlling the Type I error rate (the probability
    of finding a difference that isn’t there). I have created a function called `wmc()`
    that can be used for this purpose. It compares groups two at a time using the
    Wilcoxon test and adjusts the probability values using the `p.adj()` function.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以拒绝无差异的零假设，但这个检验并不能告诉你 *哪些* 地区之间存在显著差异。为了回答这个问题，你可以使用 Wilcoxon 检验一次比较两组。一种更优雅的方法是应用多重比较程序，该程序在控制
    I 类错误率（发现不存在差异的概率）的同时计算所有成对比较。我已经创建了一个名为 `wmc()` 的函数，可用于此目的。它使用 Wilcoxon 检验一次比较两组，并使用
    `p.adj()` 函数调整概率值。
- en: To be honest, I’m stretching the definition of *basic* in the chapter title
    quite a bit, but because the function fits well here, I hope you’ll bear with
    me. You can download a text file containing `wmc()` from [https://rkabacoff.com/RiA/wmc.R](https://rkabacoff.com/RiA/wmc.R).
    The following listing uses this function to compare the illiteracy rates in the
    four US regions.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 说实话，我在章节标题中相当夸张地使用了 *基本* 的定义，但因为这个函数非常适合这里，我希望你能理解。你可以从 [https://rkabacoff.com/RiA/wmc.R](https://rkabacoff.com/RiA/wmc.R)
    下载包含 `wmc()` 的文本文件。以下列表使用此函数比较了四个美国地区的文盲率。
- en: Listing 7.15 Nonparametric multiple comparisons
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 7.15 非参数多重比较
- en: '[PRE58]'
  id: totrans-280
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: ❶ Accesses the function
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 访问函数
- en: ❷ Basic statistics
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 基本统计
- en: ❸ Pairwise comparisons
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 成对比较
- en: The `source()` function downloads and executes the R script defining the `wmc()`
    function ❶. The function’s format is `wmc(``y` `~` `A``,` `data``,` `method``)`,
    where `y` is a numeric outcome variable, `A` is a grouping variable, `data` is
    the data frame containing these variables, and `method` is the approach used to
    limit Type I errors. Listing 7.15 uses an adjustment method developed by Holm
    (1979) that provides strong control of the family-wise error rate (the probability
    of making one or more Type I errors in a set of comparisons). See `help(p.adjust)`
    for a description of the other methods available.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: '`source()`函数下载并执行定义`wmc()`函数的R脚本❶。该函数的格式为`wmc(``y` `~` `A``,` `data``,` `method``)`，其中`y`是数值结果变量，`A`是分组变量，`data`是包含这些变量的数据框，而`method`是用于限制I类错误的途径。列表7.15使用Holm（1979）开发的一种调整方法，该方法提供了对家族错误率（在一系列比较中犯一个或多个I类错误的概率）的强控制。有关其他方法的描述，请参阅`help(p.adjust)`。'
- en: The `wmc()` function first provides the sample sizes, medians, and median absolute
    deviations for each group ❷. The West has the lowest illiteracy rate, and the
    South has the highest. The function then generates six statistical comparisons
    (West versus North Central, West versus Northeast, West versus South, North Central
    versus Northeast, North Central versus South, and Northeast versus South) ❸. You
    can see from the two-sided p-values (`p`) that the South differs significantly
    from the other three regions and that the other three regions don’t differ from
    each other at a p < .05 level.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: '`wmc()`函数首先为每个组提供样本大小、中位数和中位数绝对偏差❷。西方地区的文盲率最低，而南方地区最高。然后该函数生成六个统计比较（西部与中部北部、西部与东北部、西部与南部、中部北部与东北部、中部北部与南部，以及东北部与南部）❸。你可以从双尾p值（`p`）中看出，南部与其他三个地区存在显著差异，而其他三个地区在p
    < .05水平上彼此之间没有差异。'
- en: 7.6 Visualizing group differences
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7.6 可视化组间差异
- en: In sections 7.4 and 7.5, we looked at statistical methods for comparing groups.
    Examining group differences visually is also a crucial part of a comprehensive
    data analysis strategy. It allows you to assess the magnitude of the differences,
    identify any distributional characteristics that influence the results (such as
    skew, bimodality, or outliers), and evaluate the appropriateness of the test assumptions.
    R provides a wide range of graphical methods for comparing groups, including box
    plots (simple, notched, and violin), covered in section 6.6; overlapping kernel
    density plots, covered in section 6.5; and graphical methods for visualizing outcomes
    in an ANOVA framework, discussed in chapter 9.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 在第7.4节和第7.5节中，我们探讨了比较组之间的统计方法。检查组间差异的视觉表现也是全面数据分析策略的一个关键部分。它允许你评估差异的大小，识别任何影响结果分布特征的因素（例如偏斜、双峰或异常值），并评估测试假设的适当性。R提供了广泛的图形方法来比较组，包括在第6.6节中介绍的箱线图（简单、带缺口和小提琴图），在第6.5节中介绍的重叠核密度图，以及在第9章中讨论的用于在方差分析框架中可视化结果的图形方法。
- en: Summary
  id: totrans-288
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Descriptive statistics can describe the distribution of a quantitative variable
    numerically. Many packages in R provide descriptive statistics for data frames.
    The choice among packages is primarily a matter of personal preference.
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述性统计可以以数值方式描述定量变量的分布。R中的许多包都提供了数据框的描述性统计。包的选择主要是一个个人偏好的问题。
- en: Frequency tables and cross-tabulations summarize the distributions of categorical
    variables.
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 频率表和交叉表总结了分类变量的分布。
- en: The t-tests and the Mann-Whitney U test can be used to compare two groups on
    a quantitative outcome.
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: t检验和Mann-Whitney U检验可以用来比较两个组在定量结果上的差异。
- en: A chi-square test can be used to evaluate the association between two categorical
    variables. The correlation coefficient is used to evaluate the association between
    two quantitative variables.
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用卡方检验来评估两个分类变量之间的关联。相关系数用于评估两个定量变量之间的关联。
- en: Data visualizations should usually accompany numeric summaries and statistical
    tests. Otherwise, you might miss important features of the data.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据可视化通常应伴随数值摘要和统计测试。否则，你可能会错过数据的重要特征。
