- en: Chapter 6\. Implementing Notifications While Avoiding Alert Fatigue
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第六章。在避免警报疲劳的同时实施通知
- en: What good would a monitoring system be if it didn’t alert you when something
    went wrong? Yet alerts are both the essence and the Achilles’ heel of monitoring.
    Done right, notifications will reach the correct people via the appropriate channels,
    help them understand the severity of the issue, and even point them to the root
    cause for fast resolution. Done wrong, notifications will spam too many people,
    lack context, and be difficult to act on. They’ll be untrustworthy—and ultimately
    ignored.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 如果监控系统在出现问题时没有通知你，那么它有什么用呢？然而，警报既是监控的精髓，也是它的致命弱点。正确地执行，通知将通过适当的渠道将信息传达给正确的人员，帮助他们理解问题的严重性，甚至指出快速解决问题的根本原因。但是，如果执行不当，通知将会向太多人发送，缺乏上下文，并且难以采取行动。它们将是不可信的，并最终被忽视。
- en: Alert fatigue is one of the greatest reasons that data quality monitoring efforts
    fail, especially as enterprises scale (see the sidebar [“Alert Fatigue”](ch02.html#alert_fatigue)).
    If you have dozens of people involved in data quality and thousands of tables
    triggering alerts, that’s a lot of employee time and energy being wasted if those
    alerts are unhelpful, confusing, or noisy.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 警报疲劳是数据质量监控工作失败的最大原因之一，尤其是在企业扩展时（参见侧边栏[“警报疲劳”](ch02.html#alert_fatigue)）。如果有数十人参与数据质量工作，并且成千上万的表格触发了警报，那么如果这些警报没有帮助、令人困惑或嘈杂，那么大量的员工时间和精力将被浪费。
- en: 'In this chapter, we’ll share a variety of techniques you can use to ensure
    your notifications are empowering your team to fix data quality issues. We’ll
    cover the steps in the issue resolution process and how notifications can be designed
    to help at each stage, even with root cause analysis. We’ll talk about how you
    find the right audience for any given notification and the right delivery mechanism.
    And we’ll explore many strategies for avoiding alert fatigue so that your system
    respects what may be our most valuable human resource: our attention.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将分享多种技术，帮助您确保通知能够赋予团队解决数据质量问题的能力。我们将介绍问题解决过程中的步骤以及如何设计通知以在每个阶段（包括根本原因分析）提供帮助。我们将讨论如何找到特定通知的正确受众和适当的传递机制。我们将探讨许多避免警报疲劳的策略，以便您的系统尊重可能是我们最宝贵的人力资源之一：我们的注意力。
- en: How Notifications Facilitate Data Issue Response
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何通过通知促进数据问题响应
- en: You can monitor data quality as much as you want—you’ll only actually improve
    data quality if your monitoring results in productive actions. Notifications are
    the crucial link between your monitoring system and the results it’s trying to
    achieve. They make it possible for a human to take the steps that lead to a true
    understanding and resolution of a data quality issue.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以随时监控数据质量，但只有在监控结果产生积极作用时，你才能真正改善数据质量。通知是你的监控系统和其试图实现的结果之间的关键联系。它们使人类能够采取步骤，以真正理解和解决数据质量问题。
- en: Regardless of the details of the notification itself, which we’ll get to later,
    the response usually follows the same steps. These steps are good to have in mind
    as we discuss the requirements for building good notifications. A quality notification
    will empower humans at every stage in the response process.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 不管通知本身的详细内容是什么，我们稍后会讨论，响应通常遵循相同的步骤。当我们讨论构建良好通知的要求时，这些步骤对于我们来说是很重要的。高质量的通知将在响应过程的每个阶段赋予人类能力。
- en: Triage
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分类
- en: The triage step can be summed up as “deciding if the issue is concerning or
    not.” For example, a concerning alert for an ecommerce business might be a large
    drop in the number of checkout conversion events tracked on Android devices. On
    the other hand, a decrease in the number of checkout conversion events across
    the board on a holiday might not be so concerning to the business—unless it’s
    Black Friday.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 分类步骤可以总结为“判断问题是否值得关注”。例如，对于电子商务业务而言，一个令人关注的警报可能是跟踪Android设备上结账转化事件数量的大幅下降。另一方面，在假日期间整体结账转化事件数量的减少对业务可能并不那么令人关注，除非是黑色星期五。
- en: For a bank that gets credit card data from a third party to use in a fraud model,
    a high-priority issue might be a sudden increase in the number of NULL values
    for a column that tracks recent transactions. A sudden increase in NULLs can be
    especially catastrophic for models (see the section [“NULL increases”](ch03.html#null_increases)),
    and this is an issue the business will want to follow up on quickly. Conversely,
    they might not be as concerned if they see a change in the distribution of credit
    scores after launching a product targeted at a new customer segment.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 对于从第三方获取信用卡数据用于欺诈模型的银行，高优先级问题可能是跟踪近期交易的某一列的NULL值突然增加。NULL值的突然增加对模型尤为灾难性（见章节[“NULL增加”](ch03.html#null_increases)），业务将希望快速跟进这个问题。相反，如果他们在推出针对新客户段的产品后看到信用评分分布的变化，可能就不会那么担心。
- en: Recall that automated data quality monitors are looking for significant, unexpected
    changes in the data values—they are agnostic about whether these changes *actually
    matter* to the business. So, in this chapter, we’ll spend a lot of time talking
    about how you can make notifications easier to triage and, in many cases, even
    mute some kinds of notifications so that your team doesn’t spend a lot of time
    looking at low-priority alerts.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，自动化数据质量监视器正在寻找数据值中的显著且意外的变化——它们并不关心这些变化是否*确实对业务有影响*。因此，在本章中，我们将花费大量时间讨论如何使通知更容易进行分类，甚至在许多情况下静音某些类型的通知，以免团队花费大量时间查看低优先级的警报。
- en: Routing
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 路由
- en: Once you’ve determined the severity of an issue, the next step is to decide
    who should be notified so that further investigation or resolution can be undertaken.
    This process depends greatly on how your data organization is structured. [Table 6-1](#example_data_quality_issues_mapped_to_t)
    shows a few examples of different functional teams and how they might be involved
    in following up on different kinds of issues.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦确定了问题的严重性，下一步就是决定通知谁，以便进行进一步的调查或解决方案。这一过程在很大程度上取决于您的数据组织结构。[表6-1](#example_data_quality_issues_mapped_to_t)显示了几个不同功能团队的示例以及它们可能参与解决不同类型问题的方式。
- en: Table 6-1\. Example data quality issues mapped to teams
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 表6-1\. 示例数据质量问题映射到团队
- en: '| Problem | Responsible team |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: 问题 | 负责团队 |
- en: '| --- | --- |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '--- | --- |'
- en: '| A service that is responsible for some activity in the app is failing intermittently,
    causing missing data. | Engineering infrastructure |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: 负责应用程序中某些活动的服务偶尔失败，导致数据丢失。 | 工程基础设施 |
- en: '| A code change was made that caused an application to log duplicate events
    in certain circumstances. | Product engineering |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: 由于代码更改导致应用程序在某些情况下记录重复事件。 | 产品工程 |
- en: '| A third-party provider has changed their API and did not communicate about
    that change. | Data partnerships |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: 第三方提供商已更改其API，并未就此变更进行沟通。 | 数据合作伙伴关系 |
- en: '| A configuration change was made to how advertising campaigns were run that
    removed tracking information. | Marketing operations |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: 更改广告活动运行方式的配置更改删除了跟踪信息。 | 营销运营 |
- en: '| An ETL process that previously ran every hour is now scheduled to run only
    every six hours. | Data engineering |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: 以前每小时运行一次的ETL过程现在计划改为每六小时运行一次。 | 数据工程 |
- en: '| A transformation that uses a `CASE WHEN` SQL clause to remap categories was
    changed, and some categories were dropped, resulting in NULL values. | Analytics
    engineering |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: 使用`CASE WHEN` SQL子句重新映射类别的转换已更改，一些类别被删除，导致NULL值。 | 分析工程 |
- en: Routing can be quite complex. You’ll most likely have different audiences for
    data quality issues depending on the domain; for instance, a separate team for
    data about ad campaigns versus data about customers. At times, you may need to
    involve multiple teams to provide all the necessary context. Later in the chapter,
    we’ll talk about how you can make sure notifications get to the right people while
    avoiding the mistake of creating too broad of an audience.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 路由可能非常复杂。根据领域的不同，您可能会有不同的数据质量问题的受众；例如，关于广告活动的数据与关于客户的数据可能有不同的团队。有时，您可能需要涉及多个团队以提供所有必要的背景信息。本章后面，我们将讨论如何确保通知到达合适的人员，同时避免创建过于广泛的受众的错误。
- en: Resolution
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 解决方案
- en: This is the actual work required to fix the data quality issue (the shock) and/or
    backfill historical data (the scar). It’s often tracked in a separate system like
    Linear, GitHub Issues, or Jira. The resolution process depends highly on how a
    data quality issue was introduced and what, if any, control the organization has
    over the production, transmission, or transformation of the data. We aren’t going
    to spend too much time on the nuts and bolts of resolution in this book, but we
    will talk later on about how root cause analysis can aid issue resolution.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这是修复数据质量问题（震惊）和/或回填历史数据（疤痕）所需的实际工作。通常会在诸如Linear、GitHub Issues或Jira之类的单独系统中进行跟踪。解决过程极大地取决于数据质量问题是如何引入的，以及组织是否对数据的生产、传输或转换有任何控制。在本书中，我们不会过多讨论解决的具体细节，但稍后会讨论根本原因分析如何帮助解决问题。
- en: Documentation
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文档
- en: Finally, when closing out an issue, it’s essential to document what (if any)
    actions were taken to fix the issue. Many issues recur with some small variations,
    and having a history of how issues were handled in the past can be a great information
    repository for future issues that may be similar. Furthermore, fixing data quality
    issues is far from straightforward, and in some cases, mistakes are made—the logic
    behind the fix might not be sound or might result in unintended side effects.
    Without documentation, it can be difficult to go back and reverse or otherwise
    remedy a bad fix.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在关闭问题时，记录解决问题所采取的任何行动（如果有的话）至关重要。许多问题会以某些微小变化的形式再次出现，过去如何处理问题的历史记录可以成为未来可能类似的问题的重要信息库。此外，解决数据质量问题远非一帆风顺，有时会出错——修复背后的逻辑可能不合理或可能导致意外副作用。没有文档记录，要想回头撤销或以其他方式纠正错误的修复将会很困难。
- en: Taking Action Without Notifications
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 没有通知就采取行动
- en: Before going further, we should acknowledge that notifications don’t have to
    be the only trigger for taking action to resolve a data quality issue. Let’s explore
    the limited scenarios where you can take action without a notification.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在进一步进行之前，我们应该承认，通知不一定是解决数据质量问题时采取行动的唯一触发器。让我们探讨一下在没有通知的有限场景下，您可以采取行动的情况。
- en: Some teams integrate data quality monitors directly into their orchestration
    tools and flows (e.g., Airflow, dbt). Every time the data is loaded into a staging
    environment, they run a suite of data quality checks. If the checks pass, the
    data is copied into a production environment and “published” for downstream use
    cases. If the checks fail, rather than notifying someone, automated scripts might
    clean up some data quality issues, such as duplicate records. You can imagine
    a rule that says to retain only the most recent customer record according to a
    timestamp, for example.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 有些团队直接将数据质量监视器集成到其编排工具和流程中（例如Airflow、dbt）。每次将数据加载到暂存环境时，他们都会运行一系列数据质量检查。如果检查通过，数据将被复制到生产环境并用于下游用例的“发布”。如果检查失败，自动化脚本可能会清理一些数据质量问题，例如重复记录。例如，您可以想象一个规则，根据时间戳仅保留最近的客户记录。
- en: These kinds of automated tests can be valuable in certain scenarios. For instance,
    they may stop the data from being published, and in some cases, late or no data
    is better than wrong data (when using it to make irreversible decisions, for example).
    Or the “fixes” that are applied may be tantamount to “retries.” Especially for
    data freshness or volume issues, sometimes if you wait for a bit, the issue resolves
    itself. In complex distributed orchestrations, it can be difficult to ensure everything
    is scheduled appropriately, and so having retries built into the system can make
    it more robust.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这些自动化测试在某些场景下非常有价值。例如，它们可以阻止数据发布，在某些情况下，晚发或者不发数据要比发错数据好（例如用于做不可逆决策）。或者应用的“修复”可能相当于“重试”。特别是对于数据新鲜度或者体积问题，有时候稍等片刻问题就会自行解决。在复杂的分布式编排中，确保一切都按照适当的计划进行可能很困难，因此在系统中内置重试功能可以使其更加健壮。
- en: But when the underlying data quality issue is truly just bad data, then papering
    over the issue with a fix that mutates the data is generally a bad idea. While
    it can ensure that downstream systems work as expected (the data loads into a
    typed field; no exceptions are thrown downstream), it’s really just burying the
    issue and preventing anyone from realizing that it is there. It is also introducing
    bias into the data that may affect decisions or ML models in unexpected ways.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 但当基础数据质量问题真正只是糟糕的数据时，用修复数据的方法掩盖问题通常不是个好主意。虽然它可以确保下游系统按预期工作（数据加载到一个类型字段中；在下游没有抛出异常），但实际上只是掩盖了问题，防止任何人意识到它的存在。它还会引入可能以意想不到的方式影响决策或ML模型的数据偏差。
- en: There are a few other scenarios where you may not need to set up notifications
    because you are examining the system’s output directly. For instance, you might
    use an API to interact with your data quality monitoring system, so you take complete
    control of its responses. This may be useful if you’re performing a data migration
    and want to run checks and retrieve their status from the command line. Or you
    might run checks to generate dashboards that you intend to review by hand on each
    scheduled run. However, situations like these are by definition manual and don’t
    scale.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些其他情况，你可能不需要设置通知，因为你直接检查系统的输出。例如，你可能会使用API与你的数据质量监控系统交互，因此可以完全控制其响应。如果你正在执行数据迁移，并希望通过命令行运行检查并检索其状态，这可能非常有用。或者，你可能会运行检查生成仪表板，计划的运行后手动检查。然而，这些情况从定义上讲是手动的，并且不可扩展。
- en: With that out of the way, let’s go back to notifications, the primary vehicle
    by which monitoring results in actions that improve data quality, and the focus
    of this chapter.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们回到通知问题上，这是监控结果转化为改进数据质量行动的主要手段，也是本章的重点。
- en: Anatomy of a Notification
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通知的构成
- en: 'Given the steps that need to be taken in the resolution process, the question
    we have to ask when designing a data quality monitoring system is: How do we create
    notifications that facilitate these steps as much as possible, making issues easy
    to triage, route, resolve, and document?'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于解决过程中需要采取的步骤，设计数据质量监控系统时我们要问的问题是：如何创建通知，以尽可能地促进这些步骤，使问题易于分类、路由、解决和记录？
- en: Let’s begin by defining, at a high level, the key components that should be
    part of the notification itself—its anatomy. Next, we’ll move on to all the decisions
    you need to make outside of the contents of the notification, such as how you
    deliver notifications, avoid alert fatigue, and provide additional context for
    root cause analysis.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从高层次定义通知本身的主要组成部分开始。接下来，我们将进行所有不包括通知内容的决策，例如如何传递通知、避免警报疲劳以及为根本原因分析提供额外上下文。
- en: For this anatomy lesson, [Figure 6-1](#sample_slack_notification_for_a_data_qu)
    provides a sample Slack notification that we’ll dissect together.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这堂解剖课，[图 6-1](#sample_slack_notification_for_a_data_qu) 展示了我们将一同剖析的一个Slack通知样本。
- en: '![Sample Slack notification for a data quality issue](assets/adqm_0601.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![数据质量问题的Slack通知样本](assets/adqm_0601.png)'
- en: Figure 6-1\. Sample Slack notification for a data quality issue. See a full-sized
    version of this image at [*https://oreil.ly/adqm_6_1*](https://oreil.ly/adqm_6_1).
  id: totrans-39
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-1\. 数据质量问题的Slack通知样本。在[*https://oreil.ly/adqm_6_1*](https://oreil.ly/adqm_6_1)查看这幅图的完整版本。
- en: Visualization
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可视化
- en: As Jill Hardy [pointed out](https://oreil.ly/ejHOM), a visualization is worth
    a thousand data points.^([1](ch06.html#ch01fn4)) A graphic can contain a ton of
    information about the underlying issue, how severe it is, and what (if any) next
    steps may be required.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 根据Jill Hardy [指出](https://oreil.ly/ejHOM)，一个可视化图表胜过一千个数据点。^([1](ch06.html#ch01fn4))
    图形可以包含大量关于基础问题的信息，问题的严重程度以及可能需要的下一步措施。
- en: We include one, and only one, visualization in every notification, and the type
    of visualization varies with the check and issue found. More details can always
    be found by clicking on “View details” and going to the full report.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们每个通知中只包含一个可视化图表，其类型随检查和发现的问题而异。点击“查看详情”并转到完整报告中，可以找到更多详细信息。
- en: It’s important that the visualization shows the current issue but also provides
    some context or history. There may be many users who will see notifications but
    who may not be active participants in the monitoring platform. Keep in mind that
    if the visualization is too complex, though, users won’t be able to quickly understand
    it.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化不仅显示当前问题，还提供一些上下文或历史。可能有许多用户会看到通知，但可能不是监控平台的活跃参与者。请记住，如果可视化太复杂，用户将无法快速理解。
- en: Actions
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作
- en: 'It’s important to make notifications immediately actionable. We recommend supporting
    three different actions right from the notification (you can see these actions
    as buttons at the bottom of [Figure 6-1](#sample_slack_notification_for_a_data_qu)):'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是立即使通知变得可操作。我们建议从通知中支持三种不同的操作（您可以在[图 6-1](#sample_slack_notification_for_a_data_qu)的底部看到这些操作按钮）：
- en: View details
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 查看详细信息
- en: Allows the user to investigate the issue and understand more of the context
    and history behind it. This action takes users right into the data quality monitoring
    platform, where they can see additional visualizations, samples of records, summaries
    of actions taken, etc.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 允许用户调查问题并更多地了解背景和历史。此操作将用户直接带入数据质量监控平台，他们可以看到额外的可视化、记录示例、采取的行动摘要等。
- en: Edit check
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 编辑检查
- en: Brings up the edit configuration for the check that sent this notification.
     This makes it easy for the user to go in and change the configuration so that
    the check is better targeted to an issue they care about or is less likely to
    send notifications in the future.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 引发编辑配置，用于发送此通知的检查。这使用户可以轻松地进入并更改配置，以便检查更好地针对他们关心的问题或将来少发通知。
- en: Triage
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 分类
- en: 'Brings the user directly into a triage flow on the platform, where they can
    do one of the following:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 将用户直接带入平台上的分类流程，他们可以执行以下操作之一：
- en: 'Acknowledge: alert others that they have acknowledged the issue and are investigating
    further.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确认：通知其他人已经意识到问题并正在进一步调查。
- en: 'Resolve: resolve the issue, either because it has been fixed or because it
    is not important to address or was expected.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解决：解决问题，无论是因为已修复还是因为不需要解决或预期内。
- en: 'File a ticket: create a ticket for additional work, which they can either undertake
    directly in the platform via API or track in a ticketing system like Jira. For
    example, an engineer may need to change how events are being logged to fix this
    underlying issue. See [Figure 6-2](#example_triage_options) for a screenshot of
    triage options.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提交工单：为额外的工作创建一个工单，他们可以直接通过 API 在平台上执行，或者在像 Jira 这样的工单系统中跟踪。例如，工程师可能需要更改事件记录方式以修复此基础问题。参见[图 6-2](#example_triage_options)，显示了关于分类选项的截图。
- en: '![Example triage options](assets/adqm_0602.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![示例分类选项](assets/adqm_0602.png)'
- en: Figure 6-2\. Example triage options.
  id: totrans-56
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-2\. 示例分类选项。
- en: Text Description
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文本描述
- en: 'In addition to a visualization, some text information can be helpful to give
    more context about the issue that was detected. We generally recommend three different
    text components:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 除了可视化外，一些文本信息可以帮助更多地了解检测到的问题背景。我们通常推荐三种不同的文本组件：
- en: Title
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 标题
- en: A user-defined string that represents the intent or purpose of the check, often
    supplied by users when creating checks. This helps pass additional business, data,
    or engineering context to whomever ultimately receives the alert.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 用户定义的字符串，表示检查的意图或目的，通常由用户在创建检查时提供。这有助于将额外的业务、数据或工程上下文传递给最终接收警报的人员。
- en: Summary
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 摘要
- en: An automatically generated text summary of the alert that identifies the nature
    of the issue discovered and quantifies how significant it is.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 自动生成的警报摘要，识别发现的问题性质并量化其重要程度。
- en: History
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 历史记录
- en: How many times an alert has fired in the past. This helps a lot when investigating
    the issue. Has this alert been silent (i.e., passing without issue) for hundreds
    of days? Yikes—something dramatic must have happened! In contrast, is this the
    fourth time the alert has gone off in a row? That could mean there’s an ongoing
    issue we still need to fix, or we might need to reconfigure the check itself.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 过去触发警报的次数。在调查问题时非常有帮助。这个警报已经静默了几百天吗？天啊，一定发生了什么重大的事情！相比之下，这是连续第四次触发警报吗？这可能意味着我们仍然需要修复一个持续存在的问题，或者可能需要重新配置检查本身。
- en: Who Created/Last Edited the Check
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 谁创建/最后编辑了检查
- en: Below the action buttons we identify who first created the check, and who last
    edited the check. This can be helpful context because whoever is receiving the
    alert may want to ask those people questions, such as why they set up this check
    in the first place or who could help investigate further or resolve the issue.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在操作按钮下面，我们识别了首次创建检查的人和最后编辑检查的人。这是有帮助的背景信息，因为接收警报的人可能想要向这些人提问，例如为什么他们首先设置了这个检查或者谁可以帮助进一步调查或解决问题。
- en: Delivering Notifications
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 传递通知
- en: No matter how thoughtfully your notifications are designed, if they reach the
    wrong people or go into an inbox that no one is checking, they won’t get results.
    So, it’s essential that your monitoring platform integrates with many different
    delivery channels and lets users configure how notifications are delivered. You
    can get a sense of the variety of possible channels by looking at the dropdown
    in [Figure 6-3](#example_alert_and_notification_destinat).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您的通知设计得有多么周到，如果它们发送给错误的人或者进入一个没有人检查的收件箱，它们都不会产生结果。因此，您的监控平台必须与多种不同的交付渠道集成，并允许用户配置通知的交付方式。您可以通过查看[图6-3](#example_alert_and_notification_destinat)中的下拉菜单来了解可能的各种渠道的情况。
- en: '![Example alert and notification destinations](assets/adqm_0603.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![示例警报和通知目的地](assets/adqm_0603.png)'
- en: Figure 6-3\. Example alert and notification destinations.
  id: totrans-70
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图6-3。示例警报和通知目的地。
- en: 'There are really three dimensions to this notification delivery: (1) *who*
    gets the notification, (2) *how* they get it (In their email inbox? Slack? Do
    they get paged?), and (3) *when* they get it (immediately or in a summary?).'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 通知传递的三个维度真正存在：(1) *谁*会收到通知，(2) *他们*会如何收到（在他们的电子邮件收件箱？Slack？他们会被呼叫吗？），以及(3) *他们*会在什么时候收到（立即还是总结中？）。
- en: Notification Audience
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通知受众
- en: Who should get notified is a key decision and essential for reducing alert fatigue.
    A large company may have hundreds of individuals interested in seeing alerts about
    a very wide array of data quality issues. If everyone received every alert, it
    would be completely overwhelming!
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 应该通知谁是一个关键决策，对于减少警报疲劳至关重要。一个大公司可能有数百名对各种数据质量问题感兴趣的人。如果每个人都收到每个警报，那将会完全不堪重负！
- en: When thinking about your audience, focus on ownership and context. Notifications
    only create value if action is taken. So, whoever is receiving the notifications
    should have *a high degree of ownership* over data quality for the associated
    tables. They must be incentivized to own the notifications and their triage and
    routing. You also need to ensure that you’ve included people who will bring in
    the necessary *context*. In some cases, there might be multiple people required
    to understand the issue and decide what next steps should be taken.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑受众时，要专注于所有权和背景信息。通知只有在采取行动时才会创造价值。因此，接收通知的人应对相关表的数据质量有*很高的所有权*。他们必须有动力来负责通知及其分类和路由。您还需要确保已经包括了能够提供必要*背景信息*的人员。在某些情况下，可能需要多个人来理解问题并决定接下来应该采取什么步骤。
- en: 'Assuming you’ve controlled for ownership and sufficient context, you then want
    to minimize the audience that is exposed to notifications. Notifications are distracting:
    each human that sees them has to stop what they are otherwise doing and process
    the information. You might have many parties who are interested in following along
    with data quality, but that doesn’t mean they should all be notified. If they’re
    not essential to the response, give them other means of discovering the relevant
    information, like reports, dashboards, or summaries.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您已控制了所有权和足够的背景信息，那么接下来您希望将接收通知的受众最小化。通知会分散注意力：每个看到它们的人都必须停下手头的工作并处理信息。您可能有很多方面对数据质量感兴趣的各方，但这并不意味着他们都应该被通知。如果他们对响应不是必不可少的，给他们其他发现相关信息的手段，比如报告、仪表板或总结。
- en: To get more concrete, the most common strategy for defining the audience is
    to group alerts by table and then group tables by the domain of users who are
    interested in those tables. This ensures that each topical domain (e.g., marketing,
    finance, growth, operations, etc.) will only receive notifications for tables
    that they care about. Domains vary widely by industry and usually map to how teams
    are organized. For example, when Jeremy worked at Instacart, the domains included
    logistics, catalog, advertising, consumer growth, and consumer app.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 更具体地说，定义受众的最常见策略是按表分组，然后按照对这些表感兴趣的用户域分组。这确保了每个主题领域（例如市场营销、财务、增长、运营等）只接收他们关心的表的通知。不同行业的域因组织团队的方式而异。例如，Jeremy在Instacart工作时，领域包括物流、目录、广告、消费者增长和消费者应用。
- en: You can also determine the audience based on the *type* of issue being detected.
    Data engineering may be most interested in alerts about the freshness and volume
    of tables, whereas analytics and business users may care the most about changes
    in key metrics.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以根据检测到的问题*类型*确定受众。数据工程可能对表的新鲜度和量最感兴趣，而分析和业务用户可能最关心关键指标的变化。
- en: 'No matter what, an essential rule of thumb is to send any given alert to one,
    and only one, audience. This ensures you maintain a high degree of ownership and
    have single-threaded conversations about each issue. Otherwise, you can end up
    in one of two bad situations:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，一个基本的经验法则是将任何给定的警报发送给一个，而且只有一个受众。这样可以确保您保持高度的责任感，并且针对每个问题进行单线程对话。否则，您可能会陷入两种糟糕的情况之一：
- en: Low ownership
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 低所有权
- en: Multiple audiences get each alert, and individuals in each group assume that
    the other group is looking at the alert.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 多个受众收到每个警报，并且每个组中的个人都认为另一组正在查看警报。
- en: Duplicate efforts
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 重复的努力
- en: Multiple audiences get an alert, and there are now two separate conversations
    and work streams on triage and resolution of the underlying issue.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 多个受众收到警报，现在有两个独立的对话和工作流用于分析和解决潜在问题。
- en: Notification Channels
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通知渠道
- en: Different audiences will have different preferences for how to receive notifications.
    And some types of notifications are better suited for an email versus an urgent
    ping. Here are the primary channels that you’ll want your data quality monitoring
    system to integrate with, and how they tend to get used at most businesses.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 不同的受众将会有不同的偏好，以何种方式接收通知。有些类型的通知更适合通过电子邮件而不是紧急提示。以下是您希望您的数据质量监控系统集成的主要渠道，以及它们在大多数企业中的使用方式。
- en: Email
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 电子邮件
- en: Email, the most common form of asynchronous communication, is often used to
    send summary notifications (e.g., a weekly list of issues and statuses) that aren’t
    intended to be responded to quickly. However, in some organizations, email is
    still the dominant form of communication, so email alerts can be the primary channel.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件，作为最常见的异步通信形式，通常用于发送摘要通知（例如每周问题和状态列表），不打算迅速回复。但是，在某些组织中，电子邮件仍然是主要的通信形式，因此电子邮件警报可以成为主要渠道。
- en: Real-time communication
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实时通信
- en: Today, most teams want to receive notifications via a real-time communications
    provider, like Slack or Microsoft Teams. Commonly, teams will want to set up one
    or more groups (such as Slack channels) where the relevant audience(s) receive
    their data quality notifications.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，大多数团队希望通过像Slack或Microsoft Teams这样的实时通信提供商接收通知。通常，团队会希望设置一个或多个群组（例如Slack频道），在这些群组中相关受众接收其数据质量通知。
- en: Real-time communication affords some time-saving tactics that wouldn’t be as
    easy to achieve by other means. For example, on Slack, many teams use emoji reactions
    to help quickly triage and manage notification status, as shown in [Figure 6-4](#example_of_common_emoji_reactions_to_al).
    From the notification itself, it’s also easy to start a conversation thread to
    track investigation/triage or resolution while maintaining shared context.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 实时通信为一些节省时间的策略提供了便利，其他方式难以实现。例如，在Slack上，许多团队使用表情符号反应来帮助快速分析和管理通知状态，如[图6-4](#example_of_common_emoji_reactions_to_al)所示。从通知本身开始，还可以轻松启动一个对话线程，以跟踪调查/分析或解决方案，同时保持共享的上下文。
- en: '![Example of common emoji reactions to alerts in Slack or Microsoft Teams](assets/adqm_0604.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![在Slack或Microsoft Teams中对警报的常见表情符号反应示例](assets/adqm_0604.png)'
- en: Figure 6-4\. Example of common emoji reactions to alerts in Slack or Microsoft
    Teams.
  id: totrans-91
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图6-4。在Slack或Microsoft Teams中对警报的常见表情符号反应示例。
- en: PagerDuty or Opsgenie-type platforms (alerting, on-call management)
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PagerDuty或Opsgenie类型的平台（警报，值班管理）
- en: For the most important checks (these should be rare), you may want to “wake
    up” someone who is designated to respond to the issue with an alerting or on-call
    system such as PagerDuty or Opsgenie.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 对于最重要的检查（这些应该很少见），您可能希望通过像PagerDuty或Opsgenie这样的警报或值班系统“唤醒”指定的人员以响应问题。
- en: Ticketing platforms (Jira, ServiceNow)
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 票务平台（Jira，ServiceNow）
- en: In rare cases, you may even want to create a work item for someone any time
    a check fails by plugging your notifications directly into a ticketing platform.
    However, we recommend having a human in the middle to evaluate and triage the
    issue before creating the work ticket. Otherwise, you may end up with tickets
    that are not actionable or important.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在罕见的情况下，您甚至可能希望通过直接将通知插入到票务平台来为某人创建工作项，但我们建议在创建工作票之前，让人类中介评估和分类问题。否则，您可能会得到无法执行或重要性不大的工单。
- en: Webhooks
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Webhook
- en: A webhook is a general-purpose means of programmatically notifying another arbitrary
    system over the web. By supporting webhooks, you ensure that users can route notifications
    into arbitrary systems that don’t fit into the previous categories. For example,
    some companies may have enterprise notification routing systems they have purchased
    or built internally, and they’d like to send alerts to these systems and then
    apply additional business logic or rules on how those notifications are delivered
    to end users.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Webhook是通过网络通知另一个任意系统的通用手段。通过支持Webhook，您确保用户可以将通知路由到不适合前述类别的任意系统。例如，一些公司可能有他们购买或内部构建的企业通知路由系统，他们希望将警报发送到这些系统，然后根据如何向最终用户发送这些通知应用额外的业务逻辑或规则。
- en: Notification Timing
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通知时机
- en: 'In general, there are two strategies for *when* to send notifications:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 通常有两种策略决定*何时*发送通知：
- en: Send notifications for failures as soon as the check completes (in real time),
    so the notification channel becomes a “log” of the failures as they are computed.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一旦检查完成（实时），即时发送失败的通知，因此通知渠道变成了随着计算而产生的“日志”。
- en: Wait for all checks for a specific set of data (a table, schema, or other grouping)
    to complete, and then send a single notification with a summary of all passing
    and/or failing checks.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 等待特定数据集（表格，模式或其他分组）的所有检查完成，然后发送包含所有通过和/或失败检查摘要的单个通知。
- en: We strongly recommend the first approach for a few reasons. First, it allows
    users to receive notifications as soon as an issue is identified, leading to faster
    response times. Especially when checks are being applied to large datasets and/or
    are leveraging machine learning, the run times for different checks can vary dramatically.
    If you wait for all checks to complete to send a single summary notification,
    you may delay the arrival of some notifications by many hours, exacerbating the
    harm of a data quality issue.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 几个原因推荐第一种方法。首先，它允许用户在识别问题后尽快接收通知，从而缩短响应时间。特别是当检查应用于大数据集和/或利用机器学习时，不同检查的运行时间可能会有很大差异。如果等待所有检查完成以发送单个摘要通知，可能会延迟某些通知的到达时间数小时，加剧数据质量问题的伤害。
- en: A second point is that, typically, summary notifications are sent even if there’s
    no data quality issue. These “all green” alerts can be comforting, but they require
    the user to consume something that requires no action—which can inadvertently
    drive alert fatigue. Will people still pay attention when a summary arrives containing
    important failures?
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 第二点是，通常即使没有数据质量问题，也会发送汇总通知。这些“全绿”警报可能令人放心，但它们需要用户消耗不需要采取行动的内容，这可能无意中加剧警报疲劳。当包含重要失败的摘要到达时，人们是否仍会关注？
- en: Finally, a given set of data might have multiple data quality issues. We’ve
    seen value in having each notification arrive separately, so conversations about
    different issues can happen underneath the corresponding data quality notification.
    With a summary alert, a confusing thread can result as users discuss or triage
    multiple unrelated issues.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，一组给定的数据可能存在多个数据质量问题。我们发现每个通知单独到达是有价值的，这样关于不同问题的讨论可以在相应的数据质量通知下进行。使用汇总警报时，可能会导致用户讨论或分类多个不相关的问题，形成混乱的线程。
- en: Avoiding Alert Fatigue
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 避免警报疲劳
- en: How to avoid overwhelming your users with noisy notifications is one of the
    trickiest problems when setting up a data quality monitoring system. To some degree,
    all the advice in this chapter so far has been designed to mitigate the risk of
    alert fatigue—from narrowing your audience for notifications, to including UX
    elements that help with quick triage. In this section, though, we’ll explore more
    direct techniques to limit the number of low-value alerts your team receives.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 如何避免在设置数据质量监控系统时用噪音通知过度冲击您的用户是一个最棘手的问题之一。在这一章节中，我们将探讨更直接的技术，以限制团队接收的低价值警报数量。
- en: Scheduling Checks in the Right Order
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 按正确顺序安排检查
- en: How checks are scheduled is one of the biggest sources of false-positive notifications
    in many monitoring systems. That’s because there are two naive approaches to scheduling
    your data quality checks, and both are problematic.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多监控系统中，如何安排检查是许多误报通知的最大原因之一。这是因为安排数据质量检查有两种简单的方法，而这两种方法都有问题。
- en: The first approach is to automatically run all your checks each time you finish
    processing a new set of incoming data. For example, at the end of your Airflow
    directed acyclic graph (DAG) for updating a table, you might programmatically
    trigger data quality checks via API for the newest date that is loaded into the
    table. The second naive approach is to run checks every day on a set schedule.
    For instance, you might expect some third-party data to arrive each day by 5 a.m.
    ET, so you run all of your data quality checks at 7 a.m. ET.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 第一种方法是在处理完一组新的进入数据后自动运行所有检查。例如，在更新表的Airflow有向无环图（DAG）结束时，您可以通过API自动触发针对加载到表中的最新日期的数据质量检查。第二种简单的方法是按照设定的时间表每天运行检查。例如，您可能期望第三方数据每天早上5点前到达，因此您会在东部时间早上7点运行所有数据质量检查。
- en: 'The problem with both these approaches is that you will often end up running
    checks on incomplete data. If you’re running checks on a set schedule and the
    data is delayed, then all of the checks may fail or throw exceptions because there
    is no data. And in either scenario, the data might not be fully delivered when
    you run the checks, meaning that validation rules that are comparing across tables
    or aggregating data will almost certainly fail. Any metrics you’re monitoring
    will look anomalous, too. Incomplete data is almost always biased—by time of day,
    the subset that was available or loaded, or simply the obvious: total volume.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种方法的问题在于，您通常会在不完整的数据上运行检查。如果按照设定的时间表运行检查而数据延迟，那么所有检查可能会失败或抛出异常，因为没有数据。而且无论哪种情况，当您运行检查时数据可能尚未完全交付，这意味着跨表比较或聚合数据的验证规则几乎肯定会失败。您正在监控的任何指标看起来也会异常。不完整的数据几乎总是有偏差的——无论是因为一天中的时间、可用或加载的子集，还是显而易见的总体数据量。
- en: So, how do you avoid running checks on data that hasn’t even fully arrived and
    creating a bunch of noisy alerts? The best approach is to first set up checks
    to see if you have sufficient *freshness* and *volume* within a specific partition
    of the data (often a day or an hour of data as specified in a partitioned time
    column). Then, only run your deep data quality checks after those checks pass.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，如何避免在数据还没有完全到达时运行检查，并创建大量噪音警报呢？最好的方法是首先设置检查，以查看特定数据分区（通常是以分区时间列指定的一天或一小时的数据）内是否具有足够的*新鲜度*和*数据量*。然后，在这些检查通过后，再运行深度数据质量检查。
- en: One way to solve this with a data quality monitoring platform is as follows
    (see [Figure 6-5](#scheduling_data_checks_in_the_right_ord)). As part of the system
    behavior, set up a “data freshness” check that looks for records within each date
    partition. Since not all data is delivered at the same cadence, this check should
    learn and adapt to variations, like if data typically doesn’t arrive on certain
    days of the week. Once “data freshness” completes, run a “data volume” check,
    which ensures that the volume of records is within the expected predicted distribution
    of record counts for that specific time period (using a time series model that
    controls for seasonality, trend, variance changes, etc.). Only once data freshness
    and data volume have run should you kick off the deep data quality checks on that
    new partition of data.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 通过数据质量监控平台解决这个问题的一种方法如下（见[图 6-5](#scheduling_data_checks_in_the_right_ord)）。作为系统行为的一部分，设置一个“数据新鲜度”检查，查找每个日期分区内的记录。由于并非所有数据都以相同的频率交付，此检查应学习和适应变化，例如，如果数据通常不会在某些周几到达。一旦“数据新鲜度”完成，运行“数据量”检查，确保记录的数量在预期的特定时间段内的预测分布范围内（使用时间序列模型来控制季节性、趋势、方差变化等）。仅当数据新鲜度和数据量运行后，才应启动该数据新分区的深度数据质量检查。
- en: '![Scheduling data checks in the right order. Data Freshness and Data Volume
    checks run every 15 minutes, and “gate” the deep data quality checks shown below.
    All of the other checks (Missing Data, Table Anomalies, etc.) only run when we
    are certain they won’t trigger false positive notifications due to freshness or
    data volume issues.](assets/adqm_0605.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![在正确顺序中安排数据检查。数据新鲜度和数据量检查每 15 分钟运行一次，并且“门”控制下面显示的深度数据质量检查。所有其他检查（缺失数据、表异常等）只有在我们确定它们不会因新鲜度或数据量问题触发误报通知时才运行。](assets/adqm_0605.png)'
- en: Figure 6-5\. Scheduling data checks in the right order. Data Freshness and Data
    Volume checks run every 15 minutes, and “gate” the deep data quality checks shown
    below. All of the other checks (Missing Data, Table Anomalies, etc.) only run
    when we are certain they won’t trigger false positive notifications due to freshness
    or data volume issues.
  id: totrans-114
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-5\. 在正确顺序中安排数据检查。数据新鲜度和数据量检查每 15 分钟运行一次，并且“门”控制下面显示的深度数据质量检查。所有其他检查（缺失数据、表异常等）只有在我们确定它们不会因新鲜度或数据量问题触发误报通知时才运行。
- en: Clustering Alerts Using Machine Learning
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用机器学习对警报进行聚类
- en: Another source of alert fatigue is when your system fires duplicate alerts that
    spring from the same issue. There are several reasons this can happen. First,
    data freshness and volume issues can “cascade” downstream into derived tables
    that depend on the upstream table. Second, there can be multiple columns in a
    table that are all tightly related to one another and may all reflect the same
    underlying data quality issue. Finally, exogenous effects—that may appear as data
    quality issues but really are changes in the product behavior, or the world the
    product is interacting with—can cause a wide variety of related effects in multiple
    columns or tables.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 警报疲劳的另一个来源是系统触发了源自同一问题的重复警报。造成这种情况的原因有几个。首先，数据新鲜度和数据量问题可以“级联”到依赖上游表的派生表中。其次，表中可能有多列彼此密切相关，并且可能都反映同一潜在的数据质量问题。最后，外生效应——可能表现为数据质量问题，但实际上是产品行为或产品正在交互的世界中的变化——可能会在多个列或表中引起多种相关效应。
- en: This means that clustering or deduping alerts is an important feature of a monitoring
    system. When duplicate alerts happen within the same table, you can use machine
    learning to cluster them. Assuming your data quality issue can be mapped down
    to individual records, you can classify each record as being either “good” or
    “bad” in the context of the issue. You can then compute how correlated the “bad”
    and “good” records are across multiple data quality issues and determine if they
    are likely identifying the same set of bad records. As explained in [Chapter 4](ch04.html#automating_data_quality_monitoring_wi),
    machine learning algorithms that can allocate credit for the anomalies they detect
    down to individual values can similarly cluster issues together.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着聚类或去重警报是监控系统的一个重要特性。当相同表内发生重复警报时，您可以使用机器学习对其进行聚类。假设您的数据质量问题可以映射到个别记录，您可以在问题的上下文中将每条记录分类为“良好”或“不良”。然后，您可以计算“不良”和“良好”记录在多个数据质量问题中的相关性，并确定它们是否可能标识出相同的一组不良记录。正如在[第
    4 章](ch04.html#automating_data_quality_monitoring_wi)中所解释的那样，能够为其检测到的异常分配信用的机器学习算法可以类似地将问题聚类在一起。
- en: Some teams will use data lineage to cluster data quality issues across multiple
    tables. [Figure 6-6](#lineage_showing_how_issues_can_affect_u) shows a screenshot
    of lineage. When a table is failing freshness or volume, you can look upstream
    to see if tables that feed into this table are also failing and cluster alerts
    in that manner.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 一些团队将使用数据血统来跨多个表聚类数据质量问题。[图 6-6](#lineage_showing_how_issues_can_affect_u) 展示了血统的截图。当表格的新鲜度或容量出现问题时，您可以向上查看，看看供给此表的表格是否也在失败，并以此方式聚类警报。
- en: '![Lineage showing how issues can affect upstream and downstream tables](assets/adqm_0606.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![展示问题如何影响上游和下游表的血统](assets/adqm_0606.png)'
- en: Figure 6-6\. Lineage showing how issues can affect upstream and downstream tables.
    See a full-sized version of this image at [*https://oreil.ly/adqm_6_6*](https://oreil.ly/adqm_6_6).
  id: totrans-120
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-6\. 展示问题如何影响上游和下游表的血统。在[*https://oreil.ly/adqm_6_6*](https://oreil.ly/adqm_6_6)
    可查看此图片的完整版本。
- en: Suppressing Notifications
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 抑制通知
- en: A large part of managing alert fatigue is suppressing notifications before they
    even reach users. Let’s explore several ways to achieve this.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 管理警报疲劳的一大部分是在其达到用户之前抑制通知。让我们探讨几种实现这一目标的方式。
- en: Priority level
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 优先级别
- en: One way to suppress notifications is to ask users to set the priority of different
    checks.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 抑制通知的一种方法是要求用户设置不同检查的优先级别。
- en: '![Priority levels for data quality checks](assets/adqm_0607.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![数据质量检查的优先级别](assets/adqm_0607.png)'
- en: Figure 6-7\. Priority levels for data quality checks.
  id: totrans-126
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-7\. 数据质量检查的优先级别。
- en: 'As shown in [Figure 6-7](#priority_levels_for_data_quality_checks), we suggest
    three priority levels: high, normal, and low. The Anomalo platform implements
    those priorities in the following way, though you may find that you need a different
    interpretation:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图 6-7](#priority_levels_for_data_quality_checks)所示，我们建议三个优先级别：高、普通和低。Anomalo
    平台以以下方式实现这些优先级别，尽管您可能发现需要不同的解释：
- en: High
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 高
- en: These checks will alert the user every time they fail, as well as the first
    time they pass following a failure.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这些检查将在每次失败时警报用户，以及在首次通过后重新失败时。
- en: Normal
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 普通
- en: Normal checks alert the first three times the check fails in a row, suppressing
    additional repeated alerts. Like high-priority checks, they also alert when they
    pass again following this failure. Most checks should fall into this priority
    level, and it’s the default for new checks.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 普通检查在连续三次失败后首次警报，会抑制额外的重复警报。与高优先级检查类似，当这些检查在失败后重新通过时也会发出警报。大多数检查应该属于此优先级别，也是新检查的默认设置。
- en: Low
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 低
- en: These checks never alert users when they fail. This priority level is useful
    for debugging data issues or when you want to document a particular type of data
    quality issue, but you don’t want to be notified about it.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 当这些检查失败时，它们永远不会警报用户。此优先级别对于调试数据问题或者想要记录特定类型的数据质量问题但不希望收到通知时非常有用。
- en: Continuous retraining
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 连续再训练
- en: The ML approach to data quality monitoring that we described in [Chapter 4](ch04.html#automating_data_quality_monitoring_wi)
    involves retraining the model every day when new data comes in. This has the advantage
    of automatically suppressing alerts for “known issues” that might otherwise continue
    to notify users.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在[第 4 章](ch04.html#automating_data_quality_monitoring_wi)中描述的数据质量监控的机器学习方法包括在每天新数据到来时重新训练模型。这样做的好处是自动抑制“已知问题”的警报，否则可能会继续通知用户。
- en: If on day 1 there is a sudden new issue, such as a change in the distribution
    for a column, the model will alert about it on day 1\. But on day 2, we’ll retrain
    the model *using day 1’s data*. So, the model essentially recognizes that day
    1 represents a “new normal” for this dataset and suppresses alerts for issues
    that appeared on day 1.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在第 1 天出现了突如其来的新问题，例如某列分布的变化，模型将在第 1 天发出警报。但是在第 2 天，我们将使用第 1 天的数据重新训练模型。因此，该模型基本上会认识到第
    1 天代表了这个数据集的“新正常”，并会抑制出现在第 1 天的问题的警报。
- en: Narrowing the scope of the model
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 缩小模型的范围
- en: To reduce the number of data quality alerts you receive overall, it can be helpful
    to narrow the scope of the tables that you monitor with ML to just the ones you
    really care about. Refer back to [Table 3-1](ch03.html#how_monitoring_strategies_vary_with_dat)
    for an example of how ML monitoring is applied to just the important tables in
    a large data warehouse.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减少总体接收到的数据质量警报数量，将监控 ML 应用于真正关心的表格范围内可能是有帮助的。参考[表格 3-1](ch03.html#how_monitoring_strategies_vary_with_dat)
    ，了解如何将 ML 监控应用于大数据仓库中的重要表格的示例。
- en: For ML-based approaches that scan the entirety of the table, you can also limit
    the columns to just those of interest. Data often migrates its schema over time,
    with new columns added and others deprecated. To avoid causing downstream failures,
    most systems leave legacy columns in place and always add new columns rather than
    changing old ones. This can lead to many columns that are deprecated and should
    be excluded from monitoring, as they may lead to additional notifications that
    no one needs to care about.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 对于扫描整个表格的基于机器学习的方法，你也可以将列限制在感兴趣的那些列上。数据往往会随着时间的推移而迁移其模式，新增列和废弃其他列。为了避免造成下游故障，大多数系统会保留旧的列并始终添加新的列，而不是修改旧列。这可能导致许多已被废弃的列，应该从监控中排除，因为它们可能会导致不必要的额外通知。
- en: A final very powerful way to narrow the scope of fully automated monitoring
    is to look at the SQL query logs that are hitting the data warehouse. The SQL
    queries that are generated by dashboards, machine learning models, or ad hoc analytics
    queries are all clues as to which data matters the most (we call this *heat* in
    the data). By parsing those queries and identifying which tables and columns are
    used the most, automated approaches can be narrowed even further to just the most
    important data in the organization.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个非常有效的缩小完全自动化监控范围的方法是查看命中数据仓库的 SQL 查询日志。由仪表板、机器学习模型或特定分析查询生成的 SQL 查询是显示出最重要数据的线索（我们称之为数据中的“热”）。通过解析这些查询并确定使用最多的表和列，自动化方法可以进一步缩小范围，仅关注组织中最重要的数据。
- en: Making the check less sensitive
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使检查 less sensitive
- en: Finally, it’s helpful to give users affordances to manually tune the sensitivity
    of a given check so that it alerts less frequently. For instance, you can let
    them widen the range of the acceptable bad values, or they can decide if the monitor
    should alert only on *new* bad records that appear in a table.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，为了让用户能够手动调节特定检查的敏感度，以便更少频繁地发出警报，这非常有帮助。例如，您可以让他们扩大可接受坏值的范围，或者他们可以决定监视器是否仅在表格中出现*新*坏记录时发出警报。
- en: For checks that leverage time series to set ranges dynamically (like the metrics
    monitoring we discussed in [Chapter 2](ch02.html#data_quality_monitoring_strategies_and)),
    you can also let users change the confidence interval to make these checks less
    sensitive, as illustrated in [“Metrics Monitoring”](ch02.html#metrics_monitoring).
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 对于利用时间序列动态设置范围的检查（例如我们在[第 2 章](ch02.html#data_quality_monitoring_strategies_and)中讨论的指标监控），用户还可以改变置信区间，使这些检查
    less sensitive，如“指标监控”中所示。
- en: '![Confidence interval options for an alert](assets/adqm_0608.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![警报的置信区间选项](assets/adqm_0608.png)'
- en: Figure 6-8\. Confidence interval options for an alert.
  id: totrans-145
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-8. 警报的置信区间选项。
- en: The confidence interval can have a large effect on the sensitivity of the notification.
    [Figure 6-9](#comparing_different_confidence_interval) shows a time series metrics
    monitoring check with a 95% confidence interval on the left side and an 80% confidence
    interval on the right side.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 置信区间可以对通知的敏感性产生很大影响。图 6-9 显示了具有左侧 95% 置信区间和右侧 80% 置信区间的时间序列指标监控检查。
- en: '![Comparing different confidence intervals](assets/adqm_0609.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![比较不同置信区间](assets/adqm_0609.png)'
- en: Figure 6-9\. Comparing different confidence intervals.
  id: totrans-148
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-9. 比较不同置信区间。
- en: An 80% confidence interval means that, on average, we expect the latest metric
    value to fall within the confidence interval 80% of the time. That means that
    it will fall out of the interval 20% of the time. On average, that means you will
    get an alert every 5 days (1 / .2 = 5).
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 80% 的置信区间意味着，平均而言，我们预期最新的度量值将在置信区间内的时间占 80%。这意味着它将有 20% 的时间超出此区间。平均而言，这意味着您每
    5 天将会收到一次警报（1 / .2 = 5）。
- en: In contrast, the result will only fall outside of a 99% confidence interval
    1% of the time, which means you’d expect an alert every 1 / .01 = 100 days.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，在 99% 的置信区间之外的情况只会发生 1% 的时间，这意味着你每 1 / .01 = 100 天可以预期会收到一次警报。
- en: Note that in practice, there may be periods of time where alerts happen more
    frequently, and other long stretches where there are no alerts.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，实际情况下可能会有频繁发生警报的时间段，也会有长时间没有警报的时期。
- en: 'What not to suppress: Expected changes'
  id: totrans-152
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 不应该屏蔽的内容：预期变更
- en: Sometimes you expect a change in your data.  For instance, you might plan to
    deprecate a column in a certain table, so you expect that all of its values will
    go to NULL tomorrow. It’s natural to think that perhaps you should suppress alerts
    for these kinds of changes, for example, by supplying a list of expected changes
    to your monitoring system.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候您预期数据会发生变化。例如，您可能计划在某个表中弃用一个列，因此您预期它的所有值明天将变为空。或许您会自然而然地认为，也许您应该屏蔽此类变更的警报，例如向监控系统提供预期变更的列表。
- en: In general, this isn’t a good idea. It’s quite difficult to maintain a list
    of expected changes, and it is *very* difficult to map each change to the specific
    table, column, type of change, and moment when that change will take effect. Without
    precision in this mapping, you risk either failing to suppress an expected change
    or suppressing an unexpected change. Both have consequences for trust.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，这不是一个好主意。维护一份预期变更列表相当困难，并且很难将每个变更映射到特定的表、列、变更类型和变更生效的时间点。如果这种映射不精确，你可能会冒着未能屏蔽预期变更或屏蔽意外变更的风险。这两种情况都会对信任产生后果。
- en: In practice, we’ve found that it is better to allow expected changes to still
    trigger data quality checks. The alert will verify that the change did in fact
    happen and can provide context (root cause analysis, time of day, etc.) that may
    prove useful. Furthermore, the notification will act as a saved log of the change
    and its implications, which can be helpful to future analysts, especially if there
    were any unintended consequences.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，我们发现允许预期变更继续触发数据质量检查更好。警报将验证变更确实发生，并可以提供可能有用的上下文（根本原因分析、时间等）。此外，通知将作为变更及其影响的保存日志，这对未来的分析师特别有帮助，尤其是如果有任何意外后果。
- en: Automating the Root Cause Analysis
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化根本原因分析
- en: Usually, before you can resolve a data quality issue, you need to pinpoint the
    location in the data where the problem is happening. The clock is ticking—as long
    as the issue remains unresolved, the data scarring will only magnify, costing
    the business more money and resources as time goes on. But root cause analysis
    is traditionally very time-consuming, requiring analysts to comb through records
    and perform custom, complex SQL analyses.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 通常在解决数据质量问题之前，您需要准确定位问题发生的数据位置。时间在流逝——只要问题未解决，数据损伤只会加剧，随着时间的推移，这将花费企业更多的金钱和资源。但传统的根本原因分析非常耗时，需要分析师仔细查阅记录并执行定制的复杂
    SQL 分析。
- en: Imagine that you have a data quality check to verify that a certain column is
    never NULL. Suddenly that check is failing, and you want to figure out where all
    the NULLs are coming from in a table with millions of records. What if your notifications
    could be accompanied by an automatic root cause analysis?
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，您有一个数据质量检查，用于验证某个列永远不会为空。突然之间，该检查失败了，您想要找出在拥有数百万条记录的表中所有空值来自何处。如果您的通知能够伴随自动根本原因分析，会怎么样？
- en: One way to achieve this would be to use the unsupervised ML approach described
    in [Chapter 4](ch04.html#automating_data_quality_monitoring_wi) to explain the
    differences between the good and bad rows. In practice, however, users care most
    about understanding if there is a specific segment in the data that best explains
    where the bad data is coming from (e.g., a specific geography, type of event,
    or product line), and they want an explanation that’s as clear as possible. We’ve
    found that this can be achieved with a much simpler, less computationally intensive
    approach. Namely, you can sample the data, segment it (“`WHERE column = x`”),
    and analyze each data segment independently.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 实现这一点的一种方法是使用第四章中描述的无监督机器学习方法来解释好坏行之间的差异。然而，在实践中，用户最关心的是是否存在特定数据段最能解释坏数据来源的情况（例如，特定地理位置、事件类型或产品线），并且他们希望得到尽可能清晰的解释。我们发现，可以通过更简单、计算量较少的方法实现这一目标。换句话说，您可以对数据进行采样，分割数据（“`WHERE
    column = x`”），并独立分析每个数据段。
- en: To understand this process, let’s start by considering the rectangle in [Figure 6-10](#how_bad_data_may_occur_in_a_tablecomma),
    which represents all the data. Sections A and B are where the data is passing
    the check. Sections C and D are where the data is failing the check. The segment
    of data in question is the B/D area on the right, compared to the rest of the
    data in the A/C area on the left.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 要理解这个过程，让我们从考虑图中的矩形开始，[Figure 6-10](#how_bad_data_may_occur_in_a_tablecomma)代表所有数据。
    A 和 B 部分是数据通过检查的地方。 C 和 D 部分是数据未通过检查的地方。问题数据段是右侧的 B/D 区域，与左侧的 A/C 区域中的其他数据进行比较。
- en: '![How bad data may occur in a table, when looking at a particular segment](assets/adqm_0610.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![当查看特定段时，表中可能出现不良数据的情况](assets/adqm_0610.png)'
- en: Figure 6-10\. How bad data may occur in a table, when looking at a particular
    segment.
  id: totrans-162
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 6-10\. 当查看特定段时，表中可能出现不良数据的方式。
- en: The percentage of bad rows in the segment, compared to bad rows in the total
    data, is D / (C + D). The percentage of good rows in the segment, compared to
    good rows in the total data, is B / (A + B). We can then compare these percentages.
    What we are looking for are samples where the bad rows are highly overrepresented
    compared to the overall population, and the good rows are highly underrepresented.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在段内的不良行的百分比，与总数据中的不良行相比，为 D / (C + D)。段内的良好行的百分比，与总数据中的良好行相比，为 B / (A + B)。然后我们可以比较这些百分比。我们寻找的是不良行在整体人群中显著过度表现的样本，以及良好行显著低估的情况。
- en: To help explain further, [Figure 6-11](#different_possible_locations_for_the_ba)
    shows the four categories that a segment could fall into. If a segment contains
    almost the same proportion of bad data as the entire population (upper left),
    it’s most likely unrelated to the incident. If a segment includes all of the bad
    data but also a lot of good data (upper right), it may help point us in the right
    direction, but it’s not granular enough to pinpoint the issue. If a segment is
    mostly bad data but is also missing a lot of the bad data (lower left), it’s insufficient
    to understand the issue. Finally, if a segment contains all of the bad data and
    hardly anything else (lower right), you’ve probably found the root cause.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步解释，[Figure 6-11](#different_possible_locations_for_the_ba)显示了段可能落入的四个类别。如果一个段包含的不良数据比整体人群几乎相同的比例（左上），它很可能与事件无关。如果一个段包含所有的不良数据，但也包含大量的良好数据（右上），它可能有助于指出问题的方向，但不足以精确定位问题。如果一个段大部分是不良数据，但同时也缺少很多不良数据（左下），这是无法理解问题的。最后，如果一个段包含所有的不良数据并且几乎没有其他数据（右下），那么你很可能找到了根本原因。
- en: '![Different possible locations for the bad data compared to the segment, and
    the respective implications](assets/adqm_0611.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![与段相比，不良数据可能出现在不同的可能位置及其相应影响](assets/adqm_0611.png)'
- en: Figure 6-11\. Different possible locations for the bad data compared to the
    segment, and the respective implications.
  id: totrans-166
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Figure 6-11\. 不良数据可能出现在与片段相比的不同可能位置，以及相应的影响。
- en: 'Since it’s pretty fast to do the percentage calculations described earlier,
    you can automate this and provide a visualization that shows the most likely root
    cause segments. As an example, [Figure 6-12](#data_segments_that_contain_a_disproport)
    shows data segments that are likely the root cause of a data check failing (in
    this case, the table tracks ticket sales, and a concerning number of ticket prices
    were NULL). The top segment is our likely culprit: it covers all the bad rows
    and very few of the good rows (the light gray rectangle). The next three segments
    also cover 100% of the bad rows, but have a significantly higher proportion of
    good rows, making them more directional rather than probable. The final segment
    shown, where `eventname = "Il Trovatore"`, is notable because it contains exclusively
    bad rows. But because it has such a small number of the total bad rows, this segment
    is insufficient to understand the root cause.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 由于早先描述的百分比计算非常快速，您可以自动化此过程并提供可视化，显示最可能是根本原因段的部分。例如，[图 6-12](#data_segments_that_contain_a_disproport)显示了可能导致数据检查失败的数据段（在本例中，表跟踪了票务销售，票价为NULL的数量令人担忧）。顶部段是我们的主要嫌疑：它覆盖了所有的坏行和极少量的良好行（浅灰色矩形）。接下来的三个段也覆盖了所有的坏行，但良好行的比例显著更高，使它们更具指向性而非概率性。显示的最后一个段，其中`eventname
    = "Il Trovatore"`，值得注意，因为它只包含坏行。但由于它的坏行总数非常少，这个段无法理解其根本原因。
- en: Note that since you’re sampling the data anyway and separating it into good
    and bad rows, you can also make these samples available to explore and/or export
    for further analysis, as in [Figure 6-13](#samples_of_good_and_bad_rows).
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，由于您已经对数据进行了采样并将其分为良好和坏行，因此您还可以使这些样本可供探索和/或导出进行进一步分析，如[图 6-13](#samples_of_good_and_bad_rows)所示。
- en: '![Data segments that contain a disproportionate amount of bad records](assets/adqm_0612.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![包含大量坏记录的数据段](assets/adqm_0612.png)'
- en: Figure 6-12\. Data segments that contain a disproportionate amount of bad records.
    See a full-sized version of this image at [*https://oreil.ly/adqm_6_12*](https://oreil.ly/adqm_6_12).
  id: totrans-170
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-12\. 包含大量坏记录的数据段。在[*https://oreil.ly/adqm_6_12*](https://oreil.ly/adqm_6_12)上查看此图的完整版本。
- en: '![Samples of good and bad rows](assets/adqm_0613.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![良好和坏行的样本](assets/adqm_0613.png)'
- en: Figure 6-13\. Samples of good and bad rows. See a full-sized version of this
    image at [*https://oreil.ly/adqm_6_13*](https://oreil.ly/adqm_6_13).
  id: totrans-172
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-13\. 良好和坏行的样本。在[*https://oreil.ly/adqm_6_13*](https://oreil.ly/adqm_6_13)上查看此图的完整版本。
- en: Conclusion
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: You have many design decisions to make when implementing notifications for an
    automated data quality monitoring system. It’s especially complex when those notifications
    need to scale across a large data warehouse and multiple teams. We hope this chapter
    has given you a good starting point for what notifications should contain in order
    to be actionable, how they can be delivered to the appropriate audience, and where
    you should think about building in tuning knobs and guardrails to prevent alert
    fatigue. As you can see, there’s a lot that you can do with thoughtful automation,
    including even helping with root cause analysis right from the notification.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在实施自动化数据质量监控系统的通知时，您需要做出许多设计决策。当这些通知需要在大型数据仓库和多个团队之间扩展时，问题变得特别复杂。我们希望本章为您提供了一个良好的起点，了解通知内容应包含哪些内容以便采取行动，它们如何传递给适当的受众，以及您应该考虑在哪里构建调节旋钮和防范警报疲劳的防护栏。正如您所见，通过深思熟虑的自动化，您可以做很多事情，甚至可以在通知中直接帮助进行根本原因分析。
- en: Notifications are the heart of how your users take action on data quality issues
    to address data shocks and heal data scars. But as we’ll see in [Chapter 7](ch07.html#integrating_monitoring_with_data_tools)
    on integrations, there are many other ways that an automated data quality monitoring
    system can extend into different parts of your operations to foster trust around
    your data.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 通知是用户如何采取数据质量问题行动的核心，以解决数据冲击和治愈数据伤痕的方式。但正如我们将在第7章中看到的[集成](ch07.html#integrating_monitoring_with_data_tools)中所述，自动化数据质量监控系统还可以通过不同部分扩展到您的运营中，建立对数据的信任。
- en: ^([1](ch06.html#ch01fn4-marker)) Jill Hardy, “Why a Visualization Is Worth a
    Thousand Data Points,” *Looker* (blog), July 18, 2019.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](ch06.html#ch01fn4-marker)) Jill Hardy，“为什么可视化值千言万语”，*Looker*（博客），2019年7月18日。
