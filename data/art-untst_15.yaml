- en: 11 Integrating unit testing into the organization
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 11 将单元测试集成到组织中
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Becoming an agent of change
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 成为变革推动者
- en: Implementing change from the top down or from the bottom up
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从上到下或从下到上实施变革
- en: Preparing to answer the tough questions about unit testing
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备回答关于单元测试的棘手问题
- en: As a consultant, I’ve helped several companies, big and small, integrate continuous
    delivery processes and various engineering practices, such as test-driven development
    and unit testing, into their organizational culture. Sometimes this has failed,
    but those companies that succeeded had several things in common. In any type of
    organization, changing people’s habits is more psychological than technical. People
    don’t like change, and change is usually accompanied with plenty of FUD (fear,
    uncertainty, and doubt) to go around. It won’t be a walk in the park for most
    people, as you’ll see in this chapter.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名顾问，我帮助了几家大公司和中小企业将持续交付流程和各种工程实践，如测试驱动开发和单元测试，整合到他们的组织文化中。有时这会失败，但那些成功的企业有几个共同点。在任何类型的组织中，改变人们的习惯更多的是心理上的，而不是技术上的。人们不喜欢改变，改变通常伴随着大量的FUD（恐惧、不确定性和怀疑）。对大多数人来说，这不会像散步一样轻松，正如你将在本章中看到的。
- en: 11.1 Steps to becoming an agent of change
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.1 成为变革推动者的步骤
- en: If you’re going to be the agent of change in your organization, you should first
    accept that role. People will view you as the person responsible (and sometimes
    accountable) for what’s happening, whether or not you want them to, and there’s
    no use in hiding. In fact, hiding can cause things to go terribly wrong.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打算成为你组织中的变革推动者，你应该首先接受这个角色。人们会把你视为负责（有时是问责）正在发生的事情的人，无论你是否愿意，隐藏是没有用的。事实上，隐藏可能会导致事情变得非常糟糕。
- en: As you start to implement or push for changes, people will start asking tough
    questions related to what they care about. How much time will this “waste”? What
    does this mean for me as a QA engineer? How do we know it works? Be prepared to
    answer. The answers to the most common questions are discussed in section 11.5\.
    You’ll find that convincing others inside the organization before you start making
    changes will help you immensely when you need to make tough decisions and answer
    those questions.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始实施或推动变革时，人们会开始询问与他们关心的问题相关的棘手问题。这将“浪费”多少时间？这对作为QA工程师的我意味着什么？我们如何知道它有效？准备好回答。最常见的问答讨论在第11.5节中。你会发现，在你开始做出改变之前说服组织内部的人会极大地帮助你做出艰难的决定和回答这些问题。
- en: Finally, someone will have to stay at the helm, making sure the changes don’t
    die for lack of momentum. That’s you. There are ways to keep things alive, as
    you’ll see in the next sections.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，有人必须留在舵手的位置上，确保变革不会因为缺乏动力而失败。那个人就是你。有一些方法可以保持事物的活力，你将在下一节中看到。
- en: 11.1.1 Be prepared for the tough questions
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.1 准备回答棘手的问题
- en: Do your research. Read the questions and answers at the end of this chapter,
    and look at the related resources. Read forums, mailing lists, and blogs, and
    consult with your peers. If you can answer your own tough questions, there’s a
    good chance you can answer someone else’s.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 做好研究。阅读本章末尾的问题和答案，查看相关资源。阅读论坛、邮件列表和博客，并与你的同行咨询。如果你能回答你自己的棘手问题，那么你很可能也能回答别人的。
- en: '11.1.2 Convince insiders: Champions and blockers'
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.2 说服内部人士：支持者和阻挠者
- en: 'Few things make you feel as lonely in an organization as the decision to go
    against the current. If you’re the only one who thinks what you’re doing is a
    good idea, there’s little reason for anyone to make an effort to implement what
    you’re advocating. Consider who can help and hurt your efforts: the champions
    and blockers.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在组织中，很少有事情能让你感到像反对潮流的决定那样孤独。如果你是唯一一个认为你所做的事情是个好主意的人，那么很少有人会努力去实施你所倡导的事情。考虑一下谁可以帮助或阻碍你的努力：支持者和阻挠者。
- en: Champions
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 支持者
- en: As you start pushing for change, identify the people you think are most likely
    to help in your quest. They’ll be your *champions*. They’re usually early adopters,
    or people who are open minded enough to try the things you’re advocating. They
    may already be half convinced but are looking for an impetus to start the change.
    They may have even tried it and failed on their own.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始推动变革时，确定你认为最有可能帮助你的人。他们将成为你的*支持者*。他们通常是早期采用者，或者足够开放心态去尝试你所倡导的事情的人。他们可能已经半信半疑，但正在寻找开始变革的动力。他们甚至可能已经尝试过并失败了。
- en: Approach them before anyone else and ask for their opinions on what you’re about
    to do. They may tell you some things that you hadn’t considered, including
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他人之前接近他们，并询问他们对你要做的事情的看法。他们可能会告诉你一些你没有考虑过的事情，包括
- en: Teams that might be good candidates to start with
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能适合开始的团队
- en: Places where people are more accepting of such changes
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人们更容易接受这种变化的地方
- en: What (and who) to watch out for in your quest
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的追求中要注意什么（和谁）
- en: 'By approaching them, you’re helping to ensure that they’re part of the process.
    People who feel part of the process usually try to help make it work. Make them
    your champions: ask them if they can help you and be the ones people can come
    to with questions. Prepare them for such events.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 通过接近他们，你正在帮助确保他们是这个过程的一部分。感觉自己是过程一部分的人通常会尽力让它成功。让他们成为你的支持者：询问他们是否可以帮助你，并成为人们可以就问题来咨询的人。为他们准备这样的情况。
- en: Blockers
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 阻碍者
- en: Next, identify the *blockers*. These are the people in the organization who
    are most likely to resist the changes you’re making. For example, a manager might
    object to adding unit tests, claiming that they’ll add too much time to the development
    effort and increase the amount of code that needs to be maintained. Make them
    part of the process instead of resisters of it by giving them (at least those
    who are willing and able) an active role in the process.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，确定*阻碍者*。这些是在组织中最有可能抵制你所做改变的的人。例如，一个经理可能会反对添加单元测试，声称这将增加开发时间，并增加需要维护的代码量。通过让他们（至少是那些愿意并且能够的）在过程中扮演积极角色，使他们成为过程的参与者而不是抵制者。
- en: The reasons why people might resist changes vary. Answers to some of the possible
    objections are covered in section 11.4 on *influence forces*. Some will be worried
    about job security, and some will just feel too comfortable with the way things
    currently are. Approaching potential blockers and detailing all the things they
    could have done better is often not constructive, as I’ve found out the hard way.
    People don’t like to be told that their baby is ugly.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 人们可能抵制改变的原因多种多样。一些可能的反对意见的答案在11.4节关于*影响力因素*中有所涉及。有些人会担心工作安全，而有些人可能只是对目前的情况感到过于舒适。我发现，详细说明潜在的阻碍者可能做得更好的事情通常不是建设性的，因为这是我艰难学到的。人们不喜欢被告知他们的孩子长得丑。
- en: Instead, ask blockers to help you in the process by being in charge of defining
    coding standards for unit tests, for example, or by doing code and test reviews
    with peers every other day. Or make them part of the team that chooses the course
    materials or outside consultants. You’ll give them a new responsibility that will
    help them feel relied on and relevant in the organization. They need to be part
    of the change or they’ll almost certainly undermine it.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，让阻碍者通过负责定义单元测试的编码标准，例如，或者通过每隔一天与同事进行代码和审查来帮助你在这个过程中。或者让他们成为选择课程材料或外部顾问的团队的一部分。你将赋予他们一个新的责任，这将帮助他们感到在组织中受到信赖和重要。他们需要成为变革的一部分，否则他们几乎肯定会破坏它。
- en: 11.1.3 Identify possible starting points
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.3 确定可能的起点
- en: Identify where in the organization you can start implementing changes. Most
    successful implementations take a steady route. Start with a pilot project in
    a small team, and see what happens. If all goes well, move on to other teams and
    other projects.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 确定在组织中你可以从哪里开始实施改变。大多数成功的实施都采取稳定的路线。从一个小型团队的试点项目开始，看看会发生什么。如果一切顺利，再转向其他团队和其他项目。
- en: 'Here are some tips that will help you along the way:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些可以帮助你的建议：
- en: Choose smaller teams.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择较小的团队。
- en: Create subteams.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建子团队。
- en: Consider project feasibility.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑项目的可行性。
- en: Use code and test reviews as teaching tools.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用代码和审查作为教学工具。
- en: These tips can take you a long way in a mostly hostile environment.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这些建议可以在一个主要敌对的环境中带你走得很远。
- en: Choose smaller teams
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 选择较小的团队
- en: Identifying possible teams to start with is usually easy. You’ll generally want
    a small team working on a low-profile project with low risks. If the risk is minimal,
    it’s easier to convince people to try your proposed changes.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 确定可能开始的团队通常很容易。你通常会希望有一个小团队在低知名度项目上工作，风险较低。如果风险很小，就更容易说服人们尝试你提出的改变。
- en: One caveat is that the team needs to have members who are open to changing the
    way they work and to learning new skills. Ironically, the people with less experience
    on a team are usually most likely to be open to change, and people with more experience
    tend to be more entrenched in their way of doing things. If you can find a team
    with an experienced leader who’s open to change, but that also includes less-experienced
    developers, it’s likely that team will offer little resistance. Go to the team
    and ask their opinion on holding a pilot project. They’ll tell you if this is
    (or is not) the right place to start.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 一个需要注意的问题是，团队需要有一些愿意改变工作方式和学习新技能的成员。具有讽刺意味的是，团队中经验较少的人通常最有可能接受改变，而经验较多的人往往更固守自己的做事方式。如果你能找到一个愿意改变且包括经验较少的开发者的有经验的领导者团队，那么这个团队很可能不会提出太多反对意见。去到团队中询问他们对于进行试点项目的看法。他们会告诉你这是否（或不是）一个合适的开始地点。
- en: Create subteams
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 创建子团队
- en: Another possible candidate for a pilot test is to form a subteam within an existing
    team. Almost every team will have a “black hole” component that needs to be maintained,
    and while it does many things right, it also has many bugs. Adding features for
    such a component is a tough task, and this kind of pain can drive people to experiment
    with a pilot project.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个可能的试点测试候选方案是在现有团队内组建一个子团队。几乎每个团队都会有一个需要维护的“黑洞”组件，虽然它做很多事情都做得很好，但也存在许多错误。为这样的组件添加功能是一项艰巨的任务，这种痛苦可以促使人们尝试试点项目。
- en: Consider project feasibility
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑项目的可行性
- en: For a pilot project, make sure you’re not biting off more than you can chew.
    It takes more experience to run more difficult projects, so you might want to
    have at least two options—a complicated project and an easier project—so that
    you can choose between them.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 对于试点项目，确保你不会超出自己的能力范围。管理更困难的项目需要更多的经验，因此你可能想要至少有两个选择——一个复杂的项目和一个简单的项目——这样你就可以在它们之间进行选择。
- en: Use code and test reviews as teaching tools
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 将代码和测试审查作为教学工具使用
- en: 'If you’re the technical lead on a small team (up to eight people), one of the
    best ways of teaching is instituting code reviews that also include test reviews.
    The idea is that as you review other people’s code and tests, you teach them what
    you look for in the tests and your way of thinking about writing tests or approaching
    TDD. Here are some tips:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是一个小型团队（最多八人）的技术负责人，那么最好的教学方法之一就是实施包括测试审查在内的代码审查。想法是，当你审查他人的代码和测试时，你教会他们你在测试中寻找的内容以及你思考编写测试或采用TDD的方式。以下是一些建议：
- en: Do the reviews in person, not through remote software. The personal connection
    lets much more information pass between you in nonverbal ways, so learning happens
    better and faster.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行面对面审查，而不是通过远程软件。个人联系可以让你们之间通过非言语方式传递更多信息，因此学习效果更好、更快。
- en: In the first couple of weeks, review every line of code that gets checked in.
    This will help you avoid the “we didn’t think this code needs reviewing” problem.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在最初的几周内，审查所有提交的代码行。这将帮助你避免“我们以为这段代码不需要审查”的问题。
- en: Add a third person to your code reviews—one who will sit on the side and learn
    how you review the code. This will allow them to later do code reviews themselves
    and teach others, so that you won’t become a bottleneck for the team as the only
    person capable of doing reviews. The idea is to develop others’ ability to do
    code reviews and accept more responsibility.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的代码审查中增加第三个人——他将在旁边观察你如何审查代码。这将使他们能够后来自己进行代码审查并教授他人，这样你就不必成为团队中唯一能够进行审查的人的瓶颈。想法是培养他人进行代码审查的能力并承担更多的责任。
- en: 'If you want to learn more about this technique, I wrote about it in my blog
    for technical leaders: “What Should a Good Code Review Look and Feel Like?” at
    [https://5whys.com/blog/what-should-a-good-code-review-look-and-feel-like.html](https://5whys.com/blog/what-should-a-good-code-review-look-and-feel-like.html).'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于这种技术的信息，我在我的技术领导者博客中对此进行了讨论：“一个好的代码审查应该是什么样的？”请参阅[https://5whys.com/blog/what-should-a-good-code-review-look-and-feel-like.html](https://5whys.com/blog/what-should-a-good-code-review-look-and-feel-like.html)。
- en: 11.2 Ways to succeed
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.2 成功的11种方法
- en: 'There are two main ways an organization or team can start changing a process:
    from the bottom-up or the top-down (and sometimes both). The two ways are very
    different, as you’ll see, and either could be the right approach for your team
    or company. There’s no one right way.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 一个组织或团队可以开始改变流程的主要方式有两种：自下而上或自上而下（有时两者兼而有之）。这两种方式非常不同，正如你将看到的，它们中的任何一种都可能适合你的团队或公司。没有一种绝对正确的方法。
- en: As you proceed, you’ll need to learn how to convince management that *your*
    efforts should also be *their* efforts, or when it would be wise to bring in someone
    from outside to help. Making progress visible is important, as is setting clear
    goals that can be measured. Identifying and avoiding obstacles should also be
    high on your list. There are many battles that can be fought, and you need to
    choose the right ones.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在你继续前进的过程中，你需要学会如何说服管理层，*你的*努力也应该是*他们的*努力，或者何时引入外部人员来帮助会更为明智。使进展可见是很重要的，同样重要的是设定可以衡量的明确目标。识别和避免障碍也应该在你的清单上。有许多战斗可以打，你需要选择正确的战斗。
- en: 11.2.1 Guerrilla implementation (bottom-up)
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.1 游击战式实施（自下而上）
- en: Guerrilla-style implementation is all about starting out with a team, getting
    results, and only then convincing other people that the practices are worthwhile.
    Usually the driver for guerrilla implementation is a team who’s tired of doing
    things the prescribed way. They set out to do things differently; they study on
    their own and make changes happen. When the team shows results, other people in
    the organization may decide to start implementing similar changes in their own
    teams.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 游击战式实施完全关乎从一个团队开始，取得成果，然后才说服其他人这些实践是值得的。通常，游击战式实施的推动力是一个厌倦了按传统方式做事的团队。他们着手以不同的方式做事；他们自学并促成改变。当团队展示出成果时，组织中的其他人可能会决定在自己的团队中开始实施类似的变化。
- en: In some cases, guerrilla-style implementation is a process *adopted* first by
    developers and then by management. At other times, it’s a process *advocated*
    for first by developers and then by management. The difference is that you can
    accomplish the first covertly, without the higher powers knowing about it. The
    latter is done in conjunction with management. It’s up to you to figure out which
    approach will work better. Sometimes the only way to change things is by covert
    operations. Avoid this if you can, but if there’s no other way, and you’re sure
    the change is needed, you can just do it.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，游击战式实施是首先由开发者采用，然后由管理层采用的过程。在其他时候，它是由开发者首先倡导，然后由管理层采用的过程。区别在于你可以秘密地完成第一个，而上级并不知道。后者是与管理层一起完成的。取决于你决定哪种方法更有效。有时改变事物的唯一方法是通过秘密行动。如果可能的话，避免这样做，但如果没有其他方法，而且你确信改变是必要的，你就可以直接这样做。
- en: 'Don’t take this as a recommendation to make a career-limiting move. Developers
    do things without permission all the time: debugging code, reading email, writing
    code comments, creating flow diagrams, and so on. These are all tasks that developers
    do as a regular part of the job. The same goes for unit testing. Most developers
    already write tests of some sort (automated or not). The idea is to redirect the
    time spent on tests into something that will provide benefits in the long term.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 不要把这当作一个建议去做一个限制你职业生涯的举动。开发者经常在没有许可的情况下做事：调试代码、阅读电子邮件、编写代码注释、创建流程图等等。这些都是开发者作为日常工作的一部分所做的事情。单元测试也是如此。大多数开发者已经编写了某种类型的测试（自动化的或非自动化的）。想法是将花在测试上的时间重新分配到长期会带来好处的事情上。
- en: 11.2.2 Convincing management (top-down)
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.2 说服管理层（自上而下）
- en: The top-down move usually starts in one of two ways. A manager or a developer
    will initiate the process and start the rest of the organization moving in that
    direction, piece by piece. Or a mid-level manager may see a presentation, read
    a book (such as this one), or talk to a colleague about the benefits of specific
    changes to the way they work. Such a manager will usually initiate the process
    by giving a presentation to people in other teams or even using their authority
    to make the change happen.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 自上而下的转变通常以两种方式之一开始。一位经理或开发者会启动这个过程，并逐步引导整个组织朝着这个方向前进。或者，一位中层经理可能会看到一场演示，阅读一本书（比如这本书），或者与同事讨论他们对工作方式具体改变的益处。这样的经理通常会通过向其他团队的人做演示，甚至使用他们的权力来实现改变来启动这个过程。
- en: 11.2.3 Experiments as door openers
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.3 实验作为开门钥匙
- en: 'Here’s a powerful way to get started with unit testing in a large organization
    (it could also fit other types of transformation or new skills). Declare an experiment
    that will last two to three months. It will apply to only one pre-picked team
    and relate to only one or two components in a real application. Make sure it’s
    not too risky. If it fails, the company won’t go under or lose a major client.
    It also shouldn’t be useless: the experiment must provide real value and not just
    serve as a playground. It has to be something you’ll end up pushing into your
    codebase and use in production eventually; it shouldn’t be a write-and-forget
    piece of code.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个在大型组织中开始单元测试的强大方法（它也可能适合其他类型的转型或新技能）。宣布一个为期两到三个月的实验。它将仅适用于一个预先挑选的团队，并且与真实应用中的一个或两个组件相关。确保它风险不大。如果它失败了，公司不会倒闭或失去主要客户。它也不应该是无用的：实验必须提供真正的价值，而不仅仅是作为游乐场。它必须是最终会推入你的代码库并在生产中使用的；它不应该是一段写完就忘记的代码。
- en: The word “experiment” conveys that the change is temporary, and if it doesn’t
    work out, the team can go back to the way they were before. Also, the effort is
    time-boxed, so we know when the experiment is finished.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: “实验”这个词传达了这种变化是暂时的，如果它不起作用，团队可以回到之前的方式。此外，这种努力是时间限制的，因此我们知道实验何时结束。
- en: Such an approach helps people feel more at ease with big changes, because it
    reduces the risk to the organization, the number of people affected (and thus
    the number of people objecting), and the number of objections relating to fear
    of changing things “forever.”
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法有助于人们更轻松地接受大的变化，因为它降低了组织风险、受影响的人数（以及因此反对的人数），以及与害怕“永远改变”事物相关的反对意见的数量。
- en: 'Here’s another hint: when faced with multiple options for an experiment, or
    if you get objections pushing for another way of working, ask, “Which idea do
    we want to experiment with *first*?”'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 这里还有一个提示：当面对实验的多个选项，或者如果有人反对推动另一种工作方式时，问自己，“我们想先实验哪个想法？”
- en: Walk the walk
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 言行一致
- en: Be prepared that your idea might not be selected from among all the options
    for an experiment. When push comes to shove, you have to hold experiments based
    on what the consensus of leadership decides, whether you like it or not.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 准备好你的想法可能不会被选为实验的所有选项之一。当事情变得紧迫时，你必须根据领导层的共识来举行实验，无论你是否喜欢。
- en: The nice thing about going with other people’s experiments is that, like with
    yours, they are time-boxed and temporary! The best outcome might be that another
    approach fixes what you were trying to fix, and you might want to keep someone
    else’s experiment going. However, if you hate the experiment, just remember that
    it’s temporary, and you can push for the next experiment.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 跟随他人的实验的好处是，就像你的实验一样，它们是时间限制的，暂时的！最好的结果可能是另一种方法修复了你试图修复的问题，你可能想继续进行他人的实验。然而，如果你讨厌这个实验，只需记住它是暂时的，你可以推动下一个实验。
- en: Metrics and experiments
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 指标和实验
- en: Be sure to record a baseline set of metrics before and after the experiment.
    These metrics should be related to things you’re trying to change, such as eliminating
    waiting times for a build, reducing the lead time for a product to go out the
    door, or reducing the number of bugs found in production.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在实验前后一定要记录一组基线指标。这些指标应该与你要尝试改变的事情相关，比如消除构建的等待时间、减少产品出厂的提前期，或者减少在生产中发现的错误数量。
- en: To dive deeper into the various metrics you might use, take a look at my talk
    “Lies, Damned Lies, and Metrics,” which you can find in my blog at [https://pipelinedriven.org/article/video-lies-damned-lies-and-metrics](https://pipelinedriven.org/article/video-lies-damned-lies-and-metrics).
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 要深入了解你可能使用的各种指标，请查看我的演讲“谎言、该死的谎言和指标”，您可以在我的博客[https://pipelinedriven.org/article/video-lies-damned-lies-and-metrics](https://pipelinedriven.org/article/video-lies-damned-lies-and-metrics)中找到。
- en: 11.2.4 Get an outside champion
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.4 获得外部支持者
- en: 'I highly recommend getting an outside person to help with the change. An outside
    consultant coming in to help with unit testing and related matters has advantages
    over someone who works in the company:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 我强烈建议找一个外部人员来帮助进行变革。一个外部顾问进入公司帮助进行单元测试和相关事务，比公司内部的人有优势：
- en: '*Freedom to speak*—A consultant can say things that people inside the company
    may not be willing to hear from someone who works there (“The code integrity is
    bad,” “Your tests are unreadable,” and so on).'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*言论自由*——顾问可以说出公司内部的人可能不愿意从公司员工那里听到的话（“代码完整性差”，“你的测试不可读”，等等）。'
- en: '*Experience*—A consultant will have more experience dealing with resistance
    from the inside, coming up with good answers to tough questions, and knowing which
    buttons to push to get things going.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*经验*—顾问将更有经验处理来自内部的阻力，提出对棘手问题的良好答案，并知道哪些按钮可以推动事情进展。'
- en: '*Dedicated time*—For a consultant, this is their job. Unlike other employees
    in the company who have better things to do than push for change (like writing
    software), the consultant does this full time and is dedicated to this purpose.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*专用时间*—对于顾问来说，这是他们的工作。与公司中其他有更重要事情去做（如编写软件）以推动变革的员工不同，顾问全职投入并致力于这一目标。'
- en: I’ve often seen a change break down because an overworked champion doesn’t have
    the time to dedicate to the process.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我经常看到变化失败，因为过度劳累的支持者没有时间投入这个过程。
- en: 11.2.5 Make progress visible
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.5 使进展可见
- en: 'It’s important to keep the progress and status of the change visible. Hang
    whiteboards or posters on walls in corridors or in the food-related areas where
    people congregate. The data displayed should be related to the goals you’re trying
    to achieve. For example:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 保持变革的进展和状态可见非常重要。在走廊或人们聚集的食物相关区域墙上挂上白板或海报。显示的数据应与您试图实现的目标相关。例如：
- en: Show the number of passing or failing tests in the last nightly build.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示上次夜间构建中通过或失败的测试数量。
- en: Keep a chart showing which teams are already running an automated build process.
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持一个图表，显示哪些团队已经在运行自动化构建流程。
- en: Put up a Scrum burndown chart of iteration progress or a test-code-coverage
    report (as shown in figure 11.1) if that’s what you have your goals set to. (You
    can learn more about Scrum at [www.controlchaos.com](http://www.controlchaos.com).)
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你的目标是迭代进度或测试代码覆盖率报告（如图11.1所示），请挂起Scrum燃尽图。 (您可以在[www.controlchaos.com](http://www.controlchaos.com)上了解更多关于Scrum的信息。)
- en: '![11-01](../Images/11-01.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![11-01](../Images/11-01.png)'
- en: Figure 11.1 An example of a test-code-coverage report in TeamCity with NCover
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.1 TeamCity中NCover的测试代码覆盖率报告示例
- en: Put up contact details for yourself and all the champions, so someone can answer
    any questions that arise.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公布你自己和所有支持者的联系方式，以便有人可以回答出现的任何问题。
- en: Set up a big-screen display that’s always showing, in big bold graphics, the
    status of the builds, what’s currently running, and what’s failing. Put that in
    a visible place where all developers can see—in a well-trafficked corridor, for
    example, or at the top of the team room’s main wall.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置一个始终显示的巨幕显示器，以大号粗体图形显示构建状态、当前运行的内容和失败的内容。将其放置在所有开发者都能看到的地方——例如，在一个繁忙的走廊或团队房间的主要墙壁顶部。
- en: 'Your aim in using these charts is to connect with two groups:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些图表的目标是连接两个群体：
- en: '*The group undergoing the change*—People in this group will gain a greater
    feeling of accomplishment and pride as the charts (which are open to everyone)
    are updated, and they’ll feel more compelled to complete the process because it’s
    visible to others. They’ll also be able to keep track of how they’re doing compared
    to other groups. They may push harder, knowing that another group implemented
    specific practices more quickly.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*正在经历变革的群体*—随着图表（对每个人都是开放的）更新，这个群体的人将获得更大的成就感与自豪感，他们会更有动力完成这个过程，因为它对他人来说是可见的。他们还将能够跟踪自己与其他群体的表现。他们可能会更加努力，因为他们知道另一个群体更快地实施了特定的实践。'
- en: '*Those in the organization who aren’t part of the process*—You’re raising interest
    and curiosity among these people, triggering conversations and buzz, and creating
    a current that they can join if they choose.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*那些不是流程一部分的组织成员*—你正在激发这些人的兴趣和好奇心，引发对话和热议，并形成一股他们可以选择加入的潮流。'
- en: 11.2.6 Aim for specific goals, metrics, and KPIs
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.6 设定具体的目标、指标和KPI
- en: Without goals, the change will be hard to measure and to communicate to others.
    It will be a vague “something” that can easily be shut down at the first sign
    of trouble.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 没有目标，变化将难以衡量，也难以向他人传达。它将是一个模糊的“某事”，在出现任何问题迹象时很容易被关闭。
- en: Lagging indicators
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 滞后指标
- en: 'At the organizational level, unit tests are generally part of a bigger set
    of goals, usually related to continuous delivery. If that’s the case for you,
    I highly recommend using the four common DevOps metrics:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在组织层面，单元测试通常是更大目标集的一部分，通常与持续交付相关。如果你也是这样，我强烈建议使用四个常见的DevOps指标：
- en: '*Deployment frequency*—How often an organization successfully releases to production.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*部署频率*—一个组织成功发布到生产环境的频率。'
- en: '*Lead time for changes*—The time it takes a feature request to get into production.
    Note that many places incorrectly publish this as the amount of time it takes
    a commit to get into production, which is only a part of the journey that a feature
    goes through, from an organizational standpoint. If you’re measuring from commit
    time, you’re closer to measuring the “cycle time” of a feature from commit up
    to a specific point. Lead time is made up of multiple cycle times.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*变更的领先时间*—功能请求进入生产所需的时间。请注意，许多地方错误地将此发布为提交进入生产所需的时间，这仅仅是功能所经历的旅程的一部分，从组织角度来看。如果你从提交时间开始测量，你更接近于测量从提交到特定点的“周期时间”。领先时间由多个周期时间组成。'
- en: '*Escaped bugs/change failure rate*—The number of failures found in production
    per some unit, usually release, deployment, or time. You can also use the percentage
    of deployments causing a failure in production.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*逃逸的虫子/变更失败率*—在生产中发现的失败数量，通常以发布、部署或时间作为单位。你也可以使用导致生产失败的部署百分比。'
- en: '*Time to restore service*—How long it takes an organization to recover from
    a failure in production.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*恢复服务的时间*—组织从生产中的故障中恢复所需的时间。'
- en: These four are what we’d call *lagging indicators*, and they’re very hard to
    fake (although they’re pretty easy to measure in most places). They are great
    in making sure we do not lie to ourselves about the results of experiments.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这四个是我们所说的*滞后指标*，它们很难伪造（尽管在大多数地方它们很容易测量）。它们在确保我们不会对自己实验的结果撒谎方面非常出色。
- en: Leading indicators
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 领先指标
- en: Often we’d like faster feedback to ensure that we’re going the right way. That’s
    where *leading indicators* come in. Leading indicators are things we can control
    on a day-to-day basis—code coverage, number of tests, build run time, and more.
    They are easier to fake, but combined with lagging indicators, they can often
    provide us with early signs that we might be going the right way.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通常希望得到更快的反馈，以确保我们走的是正确的方向。这就是*领先指标*的作用。领先指标是我们可以在日常基础上控制的事情—代码覆盖率、测试数量、构建运行时间等。它们更容易伪造，但与滞后指标结合，它们通常可以为我们提供我们可能走对了方向的早期迹象。
- en: Figure 11.2 shows a sample structure and ideas for lagging and leading indicators
    you can use in your organization. You can find a high-resolution image with color
    at [https://pipelinedriven.org/article/a-metrics-framework-for-continuous-delivery](https://pipelinedriven.org/article/a-metrics-framework-for-continuous-delivery).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.2展示了你可以在组织中使用的滞后和领先指标的结构和想法示例。你可以在[https://pipelinedriven.org/article/a-metrics-framework-for-continuous-delivery](https://pipelinedriven.org/article/a-metrics-framework-for-continuous-delivery)找到高分辨率的彩色图像。
- en: '![11-02](../Images/11-02.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![11-02](../Images/11-02.png)'
- en: Figure 11.2 An example of a metrics framework for use in continuous delivery
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.2 用于持续交付的指标框架示例
- en: Indicator categories and groups
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 指标类别和组
- en: 'I usually break up leading indicators into two groups:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 我通常将领先指标分为两组：
- en: '*Team level*—Metrics that an individual team can control'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*团队级别*—单个团队可以控制的指标'
- en: '*Engineering management level*—Metrics that require cross-team collaboration
    or aggregate metrics across multiple teams'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*工程管理级别*—需要跨团队协作或跨多个团队汇总的指标'
- en: 'I also like to categorize them based on what they will be used to solve:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 我还喜欢根据它们将用于解决的问题来分类：
- en: '*Progress*—Used to solve visibility and decision making on the plan'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*进步*—用于解决计划的可视化和决策'
- en: '*Bottlenecks and feedback*—As the name implies'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*瓶颈和反馈*—正如其名所示'
- en: '*Quality*—Escaped bugs in production'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*质量*—生产中的逃逸虫子'
- en: '*Skills*—Track that we are slowly removing knowledge barriers inside teams
    or across teams'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*技能*—跟踪我们在团队内部或跨团队中逐渐消除知识障碍'
- en: '*Learning*—Acting like we’re a learning organization'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*学习*—表现得像我们是一个学习型组织'
- en: Qualitative metrics
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 定性指标
- en: The metrics are mostly quantitative (i.e., they are numbers that can be measured),
    but a few are qualitative, in that you ask people how they feel or think about
    something. The ones I use are
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 这些指标大多是定量的（即，它们是可以测量的数字），但其中一些是定性的，即你询问人们他们对某事的感受或看法。我使用的是
- en: How confident you are that the tests can and will find bugs in the code if they
    arise (from 1 to 5)? Take the average of the responses from the team members or
    across multiple teams.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你对测试能否以及会找到代码中出现的虫子（从1到5）有多自信？取团队成员或多个团队的平均响应。
- en: Does the code do what it is supposed to do (from 1 to 5)?
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代码是否做了它应该做的事情（从1到5）？
- en: These are surveys you can ask at each retrospective meeting, and they take five
    minutes to answer.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是在每次回顾会议中可以询问的调查，回答它们只需要五分钟。
- en: Trend lines are your friend
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 趋势线是你的朋友
- en: For all leading and lagging indicators, you want to see *trend lines*, not just
    snapshots of numbers. Lines over time is how you see if you’re getting better
    or worse.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 对于所有领先和滞后指标，你希望看到的是趋势线，而不仅仅是数字的快照。随着时间的推移，线条是如何显示你是否在变得更好或更差的。
- en: Don’t fall into the trap of having a nice dashboard with large numbers on it.
    Numbers without context are not good or bad. Trend lines tell you if you’re better
    this week than you were last week.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 不要陷入拥有一个漂亮的仪表板，上面有大量数字的陷阱。没有背景的数字并不好或坏。趋势线会告诉你这周是否比上周做得更好。
- en: 11.2.7 Realize that there will be hurdles
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.2.7 认识到会有障碍
- en: There are always hurdles. Most will come from within the organizational structure,
    and some will be technical. The technical ones are easier to fix, because it’s
    a matter of finding the right solution. The organizational ones need care and
    attention and a psychological approach.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 总是会有障碍。大多数障碍来自组织结构内部，其中一些将是技术性的。技术性的障碍更容易解决，因为这是一个找到正确解决方案的问题。组织性的障碍需要关注和注意，以及心理上的方法。
- en: It’s important not to surrender to a feeling of temporary failure when an iteration
    goes bad, tests go slower than expected, and so on. It’s sometimes hard to get
    going, and you’ll need to persist for at least a couple of months to start feeling
    comfortable with the new process and to iron out all the kinks. Have management
    commit to continuing for at least three months even if things don’t go as planned.
    It’s important to get their agreement up front. You don’t want to be running around
    trying to convince people in the middle of a stressful first month.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 当迭代失败、测试速度比预期慢等情况发生时，不要屈服于暂时失败的感受。有时很难开始，你可能需要坚持至少几个月才能对新流程感到舒适，并消除所有问题。即使事情没有按计划进行，管理层也承诺至少持续三个月。重要的是要事先获得他们的同意。你不想在压力重重的一个月中四处奔波，试图说服人们。
- en: 'Also, absorb this short realization, shared by Tim Ottinger on Twitter (@Tottinge):
    “If your tests don’t catch all defects, they still make it easier to fix the defects
    they didn’t catch. It is a profound truth.”'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，吸收这个由Twitter上的Tim Ottinger（@Tottinge）分享的简短认识：“如果你的测试没有捕捉到所有缺陷，它们仍然使未捕捉到的缺陷更容易修复。这是一个深刻的真理。”
- en: Now that we’ve looked at ways of ensuring things go right, let’s look at some
    things that can lead to failure.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经探讨了确保事情顺利进行的方法，让我们看看可能导致失败的一些事情。
- en: 11.3 Ways to fail
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.3 失败的方式
- en: In the preface to this book, I talked about one project I was involved with
    that failed, partly because unit testing wasn’t implemented correctly. That’s
    one way a project can fail. I’ll discuss several others here, along with one that
    cost me that project, and some things that can be done about them.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书的序言中，我谈到了一个我参与过的失败项目，部分原因是因为单元测试没有正确实施。这是项目可能失败的一种方式。我将在下面讨论几个其他方面，包括一个让我失去那个项目的方面，以及可以采取的一些措施。
- en: 11.3.1 Lack of a driving force
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.3.1 缺乏推动力
- en: In the places where I’ve seen change fail, the lack of a driving force was the
    most powerful factor in play. Being a consistent driving force of change has its
    price. It will take time away from your normal job to teach others, help them,
    and wage internal political wars for change. You need to be willing to surrender
    time for these tasks, or the change won’t happen. Bringing in an outside person,
    as mentioned in section 11.2.4, will help you in your quest for a consistent driving
    force.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在我看到变革失败的地方，缺乏推动力是起决定性作用的因素。成为一个持续的变革推动者是有代价的。这需要你从正常工作中抽出时间来教导他人，帮助他们，以及进行内部政治斗争以推动变革。你需要愿意为这些任务牺牲时间，否则变革就不会发生。正如11.2.4节中提到的，引入外部人员将有助于你在寻找持续推动力的过程中。
- en: 11.3.2 Lack of political support
  id: totrans-125
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.3.2 缺乏政治支持
- en: If your boss explicitly tells you not to make the change, there isn’t a whole
    lot you can do, besides trying to convince management to see what you see. But
    sometimes the lack of support is much more subtle than that, and the trick is
    to realize that you’re facing opposition.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的老板明确告诉你不要进行变革，除了试图说服管理层看到你所看到的东西之外，你几乎无能为力。但有时缺乏支持比这更微妙，关键是意识到你正在面对反对。
- en: For example, you may be told, “Sure, go ahead and implement those tests. We’re
    adding 10% to your time to do this.” Anything below 30% isn’t realistic for beginning
    a unit testing effort. This is one way a manager may try to stop a trend—by choking
    it out of existence.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可能会被告知，“当然，继续实施这些测试。我们增加10%的时间来做这件事。”低于30%的增幅对于开始单元测试工作来说并不现实。这是管理者可能试图阻止趋势的一种方式——通过扼杀它来使其消失。
- en: You need to recognize that you’re facing opposition, but once you know what
    to look for, it’s easy to identify. When you tell them that their limitations
    aren’t realistic, you’ll be told, “So don’t do it.”
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要认识到你正在面临反对，但一旦你知道要寻找什么，识别起来就很容易。当你告诉他们他们的限制不现实时，你会被告知，“那么就别做了。”
- en: 11.3.3 Ad hoc implementations and first impressions
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.3.3 临时实施和第一印象
- en: 'If you’re planning to implement unit testing without prior knowledge of how
    to write good unit tests, do yourself one big favor: involve someone who has experience
    and follow good practices (such as those outlined in this book).'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你计划在不了解如何编写好的单元测试的情况下实施单元测试，那么请给自己一个很大的恩惠：找一个有经验的人并遵循良好的实践（如本书中概述的那样）。
- en: I’ve seen developers jump into the deep water without a proper understanding
    of what to do or where to start, and that’s not a good place to be. Not only will
    it take a huge amount of time to learn how to make changes that are acceptable
    for your situation, but you’ll also lose a lot of credibility along the way for
    starting out with a bad implementation. This can lead to the pilot project being
    shut down.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 我看到开发者在没有正确理解要做什么或从哪里开始的情况下跳入深水区，这不是一个好地方。这不仅需要花费大量时间来学习如何进行可接受的改变，而且你还会在过程中失去很多信誉，因为你的实施方式不好。这可能导致试点项目被关闭。
- en: If you read this book’s preface, you’ll know that this happened to me. You have
    only a couple of months to get things up to speed and convince the higher-ups
    that you’re achieving results with experiments. Make that time count, and remove
    any risks that you can. If you don’t know how to write good tests, read a book
    or get a consultant. If you don’t know how to make your code testable, do the
    same. Don’t waste time reinventing testing methods.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你阅读这本书的序言，你会知道这发生在我身上。你只有几个月的时间来提高效率，并说服上级你通过实验取得了成果。让这段时间变得有意义，并消除你能消除的所有风险。如果你不知道如何编写好的测试，就阅读一本书或者找一个顾问。如果你不知道如何使你的代码可测试，就做同样的事情。不要浪费时间重新发明测试方法。
- en: 11.3.4 Lack of team support
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.3.4 团队支持不足
- en: If your team doesn’t support your efforts, it will be nearly impossible to succeed,
    because you’ll have a hard time consolidating your extra work on the new process
    with your regular work. You should strive to have your team be part of the new
    process or at least not interfere with it.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的团队不支持你的努力，你几乎不可能成功，因为你很难将你在新流程上的额外工作与你的日常工作结合起来。你应该努力让团队成为新流程的一部分，或者至少不要干扰它。
- en: Talk to your team members about the changes. Getting their support one by one
    is sometimes a good way to start, but talking to them as a group about your efforts—and
    answering their hard questions—can also prove valuable. Whatever you do, don’t
    take the team’s support for granted. Make sure you know what you’re getting into;
    these are the people you have to work with on a daily basis.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 与你的团队成员讨论这些变化。逐个获得他们的支持有时是一个好的开始，但作为一组与他们讨论你的努力——并回答他们棘手的问题——也可能非常有价值。无论你做什么，不要理所当然地认为团队会支持你。确保你知道你要面对什么；这些人是你每天都要与之共事的人。
- en: 11.4 Influence factors
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.4 影响因素
- en: I’ve written and covered influencing behaviors as a full chapter in my book
    *Elastic Leadership* (Manning, 2016). If you find this topic interesting, I recommend
    picking that one up, or reading more about it at [5whys.com](http://5whys.com).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我在我的书《弹性领导》（Manning，2016）中专门用了一章来讨论影响行为。如果你对这个主题感兴趣，我建议你阅读那本书，或者更多关于这个主题的信息可以在[5whys.com](http://5whys.com)上找到。
- en: One of the things I find even more fascinating than unit tests is people and
    why they behave the way they do. It can be very frustrating to try to get someone
    to start doing something (like TDD, for example), and regardless of your best
    efforts, they just won’t do it. You may have already tried reasoning with them,
    but you see they don’t do anything in response to your little talk.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我发现，除了单元测试之外，我甚至对人们以及他们为什么以这种方式行事更感兴趣。试图让某人开始做某事（比如TDD，例如）可能会非常令人沮丧，无论你付出多大的努力，他们就是不会做。你可能已经尝试过与他们进行推理，但你看到他们对你的小谈话没有任何反应。
- en: 'In the book *Influencer: The Power to Change Anything* (McGraw-Hill, 2007)
    by Kerry Patterson, Joseph Grenny, David Maxfield, Ron McMillan, and Al Switzler,
    you’ll find the following mantra (paraphrased):'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在凯瑞·帕特森、约瑟夫·格伦尼、大卫·马克斯菲尔德、罗恩·麦克米伦和阿尔·斯威策勒合著的《影响力：改变一切的力量》（麦格劳-希尔，2007年）一书中，你会发现以下咒语（释义）：
- en: For every behavior that you see, the world is perfectly designed for that behavior
    to happen. That means that there are other factors besides the person wanting
    to do something or being able to do it that influence their behavior. Yet we rarely
    look beyond those two factors.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 对于你看到的每一个行为，世界都完美地设计好了让这种行为发生。这意味着除了个人想要做某事或能够做到之外，还有其他因素会影响他们的行为。然而，我们很少超越这两个因素。
- en: 'The book exposes us to six influence factors:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书让我们了解到六个影响因素：
- en: '*Personal ability*—Does the person have all the skills or knowledge to perform
    what is required?'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*个人能力*—这个人是否具备完成所需任务的所有技能或知识？'
- en: '*Personal motivation*—Does the person take satisfaction from the right behavior
    or dislike the wrong behavior? Do they have the self-control to engage in the
    behavior when it’s hardest to do so?'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*个人动机*—这个人是否从正确的行为中获得满足感或不喜欢错误的行为？他们在最难做到的时候是否具备自我控制力去参与这种行为？'
- en: '*Social ability*—Do you or others provide the help, information, and resources
    required by that person, particularly at critical times?'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*社会能力*—你或其他人是否提供了那个人在关键时刻所需的帮助、信息和资源？'
- en: '*Social motivation*—Are the people around them actively encouraging the right
    behavior and discouraging the wrong behavior? Are you or others modeling the right
    behavior in an effective way?'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*社会动机*—他们周围的人是否积极鼓励正确的行为并阻止错误的行为？你或其他人是否以有效的方式树立了正确的榜样？'
- en: '*Structural (environmental) ability*—Are there aspects in the environment (building,
    budget, and so on) that make the behavior convenient, easy, and safe? Are there
    enough cues and reminders to stay on course?'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*结构性（环境）能力*—环境中（建筑、预算等）是否有使行为变得方便、容易和安全方面的因素？是否有足够的提示和提醒来保持正确的方向？'
- en: '*Structural motivation*—Are there clear and meaningful rewards (such as pay,
    bonuses, or incentives) when you or others behave the right or wrong way? Do short-term
    rewards match the desired long-term results and behaviors you want to reinforce
    or want to avoid?'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*结构性动机*—当你或他人表现出正确或错误的行为时，是否有明确且有意义的结果（如工资、奖金或激励）？短期奖励是否与期望的长期结果和行为相匹配，你想要加强或避免的行为？'
- en: 'Consider this a short checklist for starting to understand why things aren’t
    going your way. Then consider another important fact: there might be more than
    one factor in play. For the behavior to change, you should change all the factors
    in play. If you change just one, the behavior won’t change.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 将此视为一个简短的清单，以了解为什么事情没有按照你的意愿进行。然后考虑另一个重要的事实：可能存在多个影响因素。为了改变行为，你应该改变所有在起作用的影响因素。如果你只改变一个，行为就不会改变。
- en: Table 11.1 is an example of an imaginary checklist about someone not performing
    TDD. (Keep in mind that this will differ for each person in each organization.)
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 表11.1是一个关于某人没有进行TDD的假设清单示例。（请记住，这将在每个组织中的每个人中有所不同。）
- en: Table 11.1 Influence factors checklist
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 表11.1 影响因素清单
- en: '| Influence factor | Question to ask | Example answer |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| 影响因素 | 需要提出的问题 | 示例回答 |'
- en: '| Personal ability | Does the person have all the skills or knowledge to perform
    what is required? | Yes. They went through a three-day TDD course with Roy Osherove.
    |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| 个人能力 | 这个人是否具备完成所需任务的所有技能或知识？ | 是的。他们参加了由罗伊·奥斯霍夫主持的三天TDD课程。 |'
- en: '| Personal motivation | Does the person take satisfaction from the right behavior
    or dislike the wrong behavior? Do they have the self-control to engage in the
    behavior when it’s hardest to do so? | I spoke with them, and they like doing
    TDD. |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 个人动机 | 这个人是否从正确的行为中获得满足感或不喜欢错误的行为？他们在最难做到的时候是否具备自我控制力去参与这种行为？ | 我和他们谈过，他们喜欢做TDD。
    |'
- en: '| Social ability | Do you or others provide the help, information, and resources
    required by that person, particularly at critical times? | Yes. |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 社会能力 | 你或其他人是否提供了那个人在关键时刻所需的帮助、信息和资源？ | 是的。 |'
- en: '| Social motivation | Are the people around them actively encouraging the right
    behavior and discouraging the wrong behavior?Are you or others modeling the right
    behavior in an effective way? | As much as possible. |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 社会动机 | 他们周围的人是否积极鼓励正确的行为并阻止错误的行为？你或其他人是否以有效的方式树立了正确的榜样？ | 尽可能地。 |'
- en: '| Structural (environmental) ability | Are there aspects in the environment
    (building, budget, and so on) that make the behavior convenient, easy, and safe?Are
    there enough cues and reminders to stay on course? | They don’t have a budget
    for a build machine.* |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 结构性（环境）能力 | 环境中（建筑、预算等）是否有使行为方便、容易和安全方面的因素？是否有足够的提示和提醒来保持方向？ | 他们没有为构建机器预留预算。*
    |'
- en: '| Structural motivation | Are there clear and meaningful rewards (such as pay,
    bonuses, or incentives) when you or others behave the right or wrong way?Do short-term
    rewards match the desired long-term results and behaviors you want to reinforce
    or want to avoid? | When they try to spend time unit testing, their managers tell
    them they’re wasting time. If they ship early and crappy, they get a bonus.* |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 结构性动机 | 当你或他人行为正确或错误时，是否有明确和有意义的奖励（如工资、奖金或激励）？短期奖励是否与你想加强或避免的长期结果和行为相匹配？
    | 当他们试图进行单元测试时，他们的经理告诉他们这是浪费时间。如果他们提前交付质量低劣的产品，他们就能得到奖金。* |'
- en: I put asterisks next to the items in the right column that require work. Here
    I’ve identified two issues that need to be resolved. Solving only the build machine
    budget problem won’t change the behavior. They have to get a build machine *and*
    deter their managers from giving a bonus on shipping crappy stuff quickly.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 我在右侧列出的需要工作的项目旁边加上了星号。在这里，我已经确定了需要解决的两个问题。仅仅解决构建机器预算问题不会改变行为。他们必须获得构建机器*并且*阻止他们的经理在快速交付质量低劣的产品时给予奖金。
- en: I write much more on this in *Notes to a Software Team Leader* (*Team Agile
    Publishing, 2014)*, a book about running a technical team. You can find it at
    [5whys.com](http://5whys.com).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我在《*软件团队领导笔记*》（*Team Agile Publishing, 2014*）这本书中对此有更详细的阐述，这是一本关于如何管理技术团队的书籍。您可以在[5whys.com](http://5whys.com)找到它。
- en: 11.5 Tough questions and answers
  id: totrans-160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.5 困难的问题和答案
- en: This section covers some questions I’ve come across in various places. They
    usually arise from the premise that implementing unit testing can hurt someone
    personally—a manager concerned about their deadlines or a QA employee concerned
    about their relevance. Once you understand where a question is coming from, it’s
    important to address the issue, directly or indirectly. Otherwise, there will
    always be subtle resistance.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 本节涵盖了一些我在不同地方遇到的问题。它们通常源于这样一个前提，即实施单元测试可能会伤害到某个人——一个担心截止日期的经理或一个担心自己相关性的QA员工。一旦你了解了问题的来源，直接或间接地解决问题就很重要。否则，总会存在微妙的阻力。
- en: 11.5.1 How much time will unit testing add to the current process?
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.1 单元测试将增加当前过程多少时间？
- en: Team leaders, project managers, and clients are the ones who usually ask how
    much time unit testing will add to the process. They’re the people at the front
    lines in terms of timing.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 团队领导、项目经理和客户通常是询问单元测试将增加多少时间到过程中的人。他们在时间方面处于最前线。
- en: Let’s begin with some facts. Studies have shown that raising the overall code
    quality in a project can increase productivity and shorten schedules. How does
    this match up with the fact that writing tests makes coding slower? Through maintainability
    and the ease of fixing bugs, mostly.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从一些事实开始。研究表明，提高项目中的整体代码质量可以提高生产力和缩短时间表。这与编写测试使编码变慢的事实如何相符？主要通过可维护性和修复错误的便利性。
- en: Note For studies on code quality and productivity, see *Programming Productivity*
    *(*McGraw-Hill College, 1986) and *Software Assessments, Benchmarks, and Best
    Practices* *(*Addison-Wesley Professional, 2000), both by Capers Jones.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：关于代码质量和生产力的研究，请参阅*《编程生产力》*（*McGraw-Hill College, 1986*）和*《软件评估、基准和最佳实践》*（*Addison-Wesley
    Professional, 2000*），这两本书都是由Capers Jones所著。
- en: When asking about time, team leaders may really be asking, “What should I tell
    my project manager when we go way past our due date?” They may actually think
    the process is useful but be looking for ammunition for the upcoming battle. They
    may also be asking the question not in terms of the whole product but in terms
    of specific feature sets or functionality. A project manager or customer who asks
    about timing, on the other hand, will usually be talking in terms of full product
    releases.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 当询问时间时，团队领导可能实际上是在问：“当我们远远超出截止日期时，我应该告诉项目经理什么？”他们可能实际上认为这个过程是有用的，但正在寻找即将到来的战斗的弹药。他们也可能不是从整个产品的角度，而是从特定的功能集或功能的角度来提问。另一方面，询问时间表的项目经理或客户通常会谈论完整产品的发布。
- en: Because different people care about different scopes, your answers may vary.
    For example, unit testing can double the time it takes to implement a specific
    feature, but the overall release date for the product may actually be reduced.
    To understand this, let’s look at a real example I was involved with.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 由于不同的人关心不同的范围，你的答案可能会有所不同。例如，单元测试可以将实现特定功能所需的时间加倍，但产品的整体发布日期实际上可能会减少。为了理解这一点，让我们看看我参与的一个真实例子。
- en: A tale of two features
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 两个功能的对比故事
- en: A large company I consulted with wanted to implement unit testing in their process,
    beginning with a pilot project. The pilot consisted of a group of developers adding
    a new feature to a large existing application. The company’s main livelihood was
    in creating this large billing application and customizing parts of it for various
    clients. The company had thousands of developers around the world.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我咨询的一家大公司希望在其流程中实施单元测试，从试点项目开始。试点项目包括一组开发者为一个大型的现有应用程序添加新功能。该公司的主要收入来源是创建这个大型计费应用程序，并为各种客户定制其部分。该公司在全球有数千名开发者。
- en: 'The following measures were taken to test the pilot’s success:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试试点的成功，采取了以下措施：
- en: The time the team spent on each of the development stages
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 团队在各个开发阶段花费的时间
- en: The overall time for the project to be released to the client
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 项目发布给客户的总时间
- en: The number of bugs found by the client after the release
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发布后客户发现的错误数量
- en: The same statistics were collected for a similar feature created by a different
    team for a different client. The two features were nearly the same size, and the
    teams were roughly at the same skill and experience level. Both tasks were customization
    efforts—one with unit tests, the other without. Table 11.2 shows the differences
    in time.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 为不同客户创建的类似功能收集了相同的统计数据。这两个功能的大小几乎相同，团队的技术和经验水平大致相同。两个任务都是定制工作——一个有单元测试，另一个没有。表11.2显示了时间上的差异。
- en: Table 11.2 Team progress and output measured with and without tests
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 表11.2 带测试和不带测试的团队进度和产出
- en: '| Stage | Team without tests | Team with tests |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| 阶段 | 无测试的团队 | 有测试的团队 |'
- en: '| Implementation (coding) | 7 days | 14 days |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| 实施（编码） | 7天 | 14天 |'
- en: '| Integration | 7 days | 2 days |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| 集成 | 7天 | 2天 |'
- en: '| Testing and bug fixing | Testing, 3 days Fixing, 3 days Testing, 3 days Fixing,
    2 days Testing, 1 dayTotal: 12 days | Testing, 3 days Fixing, 1 dayTesting, 1
    dayFixing, 1 dayTesting, 1 dayTotal: 7 days |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 测试和错误修复 | 测试，3天 修复，3天 测试，3天 修复，2天 测试，1天 总计：12天 | 测试，3天 修复，1天 测试，1天 修复，1天
    测试，1天 总计：7天 |'
- en: '| Overall release time | 26 days | 23 days |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| 总体发布时间 | 26天 | 23天 |'
- en: '| Bugs found in production | 71 | 11 |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| 生产中发现的错误 | 71 | 11 |'
- en: Overall, the time it took to release with tests was less than without tests.
    Still, the managers on the team with unit tests didn’t initially believe the pilot
    would be a success, because they only looked at the implementation (coding) statistic
    (the first row in table 11.2) as the criteria for success, instead of the bottom
    line. It took twice the amount of time to code the feature (because unit tests
    require you to write more code). Despite this, the extra time was more than compensated
    for when the QA team found fewer bugs to deal with.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 总体而言，带有测试的发布所需时间少于不带测试的发布。尽管如此，拥有单元测试的团队的管理人员最初并不相信试点项目会成功，因为他们只把实施（编码）统计数据（表11.2中的第一行）作为成功的标准，而不是底线。编码功能所需的时间是两倍（因为单元测试要求你编写更多的代码）。尽管如此，当QA团队发现需要处理的错误更少时，额外的时间得到了充分的补偿。
- en: That’s why it’s important to emphasize that although unit testing can increase
    the amount of time it takes to implement a feature, the overall time requirements
    balance out over the product’s release cycle because of increased quality and
    maintainability.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，强调虽然单元测试可能会增加实现一个功能所需的时间，但由于质量和可维护性的提高，总体时间需求在产品的发布周期中会得到平衡。
- en: 11.5.2 Will my QA job be at risk because of unit testing?
  id: totrans-184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.2 单元测试会让我在QA的工作岗位有风险吗？
- en: Unit testing doesn’t eliminate QA-related jobs. QA engineers will receive the
    application with full unit test suites, which means they can make sure all the
    unit tests pass before they start their own testing process. Having unit tests
    in place will actually make their job more interesting. Instead of doing UI debugging
    (where every second button click results in an exception of some sort), they’ll
    be able to focus on finding more logical (applicative) bugs in real-world scenarios.
    Unit tests provide the first layer of defense against bugs, and QA work provides
    the second layer—the user acceptance layer. As with security, the application
    always needs to have more than one layer of protection. Allowing the QA process
    to focus on the larger issues can produce better applications.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 单元测试并不能消除与 QA 相关的工作。QA 工程师将收到包含完整单元测试套件的程序，这意味着他们可以在开始自己的测试过程之前确保所有单元测试都通过。有单元测试实际上会使他们的工作更有趣。他们不再需要做
    UI 调试（每次按钮点击都可能导致某种异常），他们能够专注于在现实场景中找到更多逻辑（应用）错误。单元测试为错误提供了第一层防御，而 QA 工作提供了第二层——用户接受层。就像安全一样，应用程序始终需要有多层保护。让
    QA 流程专注于更大的问题可以产生更好的应用程序。
- en: In some places, QA engineers write code, and they can help write unit tests
    for the application. That happens in conjunction with the work of the application
    developers and not instead of it. Both developers and QA engineers can write unit
    tests.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些地方，QA 工程师编写代码，他们可以帮助编写应用程序的单元测试。这与应用程序开发人员的工作是同时进行的，而不是替代它。开发人员和 QA 工程师都可以编写单元测试。
- en: 11.5.3 Is there proof that unit testing helps?
  id: totrans-187
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.3 有证据表明单元测试有帮助吗？
- en: 'There aren’t any specific studies on whether unit testing helps achieve better
    code quality that I can point to. Most related studies talk about adopting specific
    agile methods, with unit testing being just one of them. Some empirical evidence
    can be gleaned from the web, of companies and colleagues having great results
    and never wanting to go back to a codebase without tests. A few studies on TDD
    can be found at The QA Lead here: [http://mng.bz/dddo](http://mng.bz/dddo).'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 我无法指出任何具体的研究来证明单元测试有助于提高代码质量。大多数相关研究都讨论了采用特定的敏捷方法，其中单元测试只是其中之一。可以从网络上找到一些经验证据，例如一些公司和同事取得了很好的成果，并且再也不想回到没有测试的代码库。在
    The QA Lead 这里可以找到一些关于 TDD 的研究：[http://mng.bz/dddo](http://mng.bz/dddo)。
- en: 11.5.4 Why is the QA department still finding bugs?
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.4 为什么 QA 部门仍在发现错误？
- en: You may not have a QA department anymore, but this is still a very prevalent
    practice. Either way, you’ll still be finding bugs. Please use tests at multiple
    levels, as described in chapter 10, to gain confidence across many layers of your
    application. Unit tests give you fast feedback and easy maintainability, but they
    leave some confidence behind, which can only be gained through some levels of
    integration tests.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经没有 QA 部门了，但这仍然是一个非常普遍的做法。无论如何，你仍然会发现错误。请使用第 10 章中描述的多个级别的测试来增强你对应用程序多个层次的信心。单元测试为你提供快速反馈和易于维护，但它们留下了一些信心，这只能通过某些级别的集成测试来获得。
- en: '11.5.5 We have lots of code without tests: Where do we start?'
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.5 我们有很多没有测试的代码：我们从哪里开始？
- en: Studies conducted in the 1970s and 1980s showed that, typically, 80% of bugs
    are found in 20% of the code. The trick is to find the code that has the most
    problems. More often than not, any team can tell you which components are the
    most problematic. Start there. You can always add some metrics related to the
    number of bugs per class.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 20 世纪 70 年代和 80 年代进行的研究表明，通常 80% 的错误都出现在 20% 的代码中。关键是找到问题最多的代码。通常情况下，任何团队都可以告诉你哪些组件是最有问题的。从这里开始。你总是可以添加一些与每个类中错误数量相关的指标。
- en: Sources for the 80/20 figure
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 80/20 比例的数据来源
- en: 'Studies that show 80% of the bugs are in 20% of the code include the following:
    Albert Endres, “An analysis of errors and their causes in system programs,” *IEEE
    Transactions on Software Engineering* 2 (June 1975), 140-49; Lee L. Gremillion,
    “Determinants of program repair maintenance requirements,” *Communications of
    the ACM* 27, no. 8 (August 1984), 826-32; Barry W. Boehm, “Industrial software
    metrics top 10 list,” *IEEE Software* 4, no. 9 (September 1987), 84-85 (reprinted
    in an IEEE newsletter and available online at [http://mng.bz/rjjJ](http://mng.bz/rjjJ));
    and Shull and others, “What we have learned about fighting defects,” *Proceedings
    of the 8th International Symposium on Software Metrics* (2002), 249-58.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 显示80%的错误出现在20%的代码中的研究表明：Albert Endres，“系统程序中错误及其原因的分析”，*IEEE软件工程杂志* 2 (1975年6月)，140-49；Lee
    L. Gremillion，“程序修复维护需求的决定因素”，*ACM通讯* 27，第8期 (1984年8月)，826-32；Barry W. Boehm，“工业软件度量十大列表”，*IEEE软件*
    4，第9期 (1987年9月)，84-85（在IEEE通讯中重印，并在[http://mng.bz/rjjJ](http://mng.bz/rjjJ)上在线提供）；以及Shull等人，“我们关于对抗缺陷所学到的东西”，*第8届国际软件度量研讨会论文集*
    (2002年)，249-58。
- en: Testing legacy code requires a different approach than when writing new code
    with tests. See chapter 12 for more details.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 测试遗留代码需要与编写带测试的新代码时采取不同的方法。参见第12章以获取更多详细信息。
- en: 11.5.6 What if we develop a combination of software and hardware?
  id: totrans-196
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.6 如果我们开发一个软硬件结合的组合会怎样？
- en: You can use unit tests even if you develop a combination of software and hardware.
    Look into the test layers mentioned in the previous chapter to make sure you cover
    both software and hardware. Hardware testing usually requires the use of simulators
    and emulators at various levels, but it is a common practice to have a suite of
    tests both for low-level embedded and high-level code.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 你即使在开发软硬件结合的组合时也可以使用单元测试。查看前一章中提到的测试层，以确保你涵盖了软件和硬件。硬件测试通常需要在不同级别使用模拟器和仿真器，但为低级嵌入式代码和高级代码都有一套测试是常见的做法。
- en: 11.5.7 How can we know we don’t have bugs in our tests?
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.7 我们如何知道我们的测试中没有错误？
- en: You need to make sure your tests fail when they should and pass when they should.
    TDD is a great way to make sure you don’t forget to check those things. See chapter
    1 for a short walk-through of TDD.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要确保测试在应该失败的时候失败，在应该通过的时候通过。TDD是一种确保你不会忘记检查这些事情的好方法。参见第1章，了解TDD的简要概述。
- en: 11.5.8 Why do I need tests if my debugger shows that my code works?
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.8 如果我的调试器显示我的代码工作正常，我还需要测试吗？
- en: Debuggers don’t help much with multithreaded code. Also, you may be sure your
    code works fine, but what about other people’s code? How do you know it works?
    How do they know your code works and that they haven’t broken anything when they
    make changes? Remember that coding is the first step in the life of the code.
    Most of its life, the code will be in maintenance mode. You need to make sure
    it will tell people when it breaks, using unit tests.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 调试器在处理多线程代码时帮助不大。此外，你可能确信你的代码工作正常，但其他人的代码呢？你怎么知道它也工作正常？他们怎么知道你的代码工作正常，并且在他们进行更改时没有破坏任何东西？记住，编码是代码生命周期的第一步。在其大部分生命周期中，代码将处于维护模式。你需要确保它会在出现问题时通知人们，使用单元测试。
- en: A study held by Curtis, Krasner, and Iscoe (“A field study of the software design
    process for large systems,” *Communications of the ACM* 31, no. 11 (November 1988),
    1268-87) showed that most defects don’t come from the code itself but result from
    miscommunication between people, requirements that keep changing, and a lack of
    application domain knowledge. Even if you’re the world’s greatest coder, chances
    are that if someone tells you to code the wrong thing, you’ll do it. When you
    need to change it, you’ll be glad you have tests for everything else, to make
    sure you don’t break it.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: Curtis，Krasner和Iscroe进行的一项研究（“大型系统软件设计过程现场研究”，*ACM通讯* 31，第11期 (1988年11月)，1268-87）表明，大多数缺陷不是来自代码本身，而是源于人们之间的误解、不断变化的需求以及缺乏应用领域知识。即使你是世界上最伟大的程序员，如果你被告知编写错误的东西，你很可能会这么做。当你需要更改它时，你会很高兴你有其他所有东西的测试，以确保你不会破坏它。
- en: 11.5.9 What about TDD?
  id: totrans-203
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.5.9 关于TDD呢？
- en: TDD is a style choice. I personally see a lot of value in TDD, and many people
    find it productive and beneficial, but others find that writing tests after the
    code is good enough for them. You can make your own choice.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: TDD是一种风格选择。我个人认为TDD有很多价值，很多人发现它既高效又有益，但也有人认为在代码之后编写测试对他们来说已经足够好。你可以自己做出选择。
- en: Summary
  id: totrans-205
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Implementing unit testing in their organization is something that many readers
    of this book will have to face at one time or another.
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在他们的组织中实施单元测试是这本书的许多读者迟早都要面对的事情。
- en: Make sure that you don’t alienate the people who can help you. Recognize champions
    and blockers inside the organization. Make both groups part of the change process.
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你不要疏远了那些可以帮助你的人。识别组织内的倡导者和阻碍者。让这两组人都成为变革过程的一部分。
- en: Identify possible starting points. Start with a small team or project with a
    limited scope to get a quick win and minimize project duration risks.
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定可能的起点。从一个规模较小、范围有限的小团队或项目开始，以快速取得胜利并最小化项目持续时间风险。
- en: Make the progress visible to everyone. Aim for specific goals, metrics, and
    KPIs.
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让每个人的进步都变得可见。设定具体的目标、指标和关键绩效指标（KPI）。
- en: Take note of potential causes of failure, such as the lack of a driving force
    and lack of political or team support.
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注意潜在失败原因，例如缺乏驱动力和缺乏政治或团队支持。
- en: Be prepared to have good answers to the questions you’re likely to be asked.
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备好回答你可能会被问到的问题。
