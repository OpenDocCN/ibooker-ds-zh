- en: 11 Intermediate graphs
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 11 中级图表
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Visualizing bivariate and multivariate relationships
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可视化双变量和多变量关系
- en: Working with scatter and line plots
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用散点和折线图进行工作
- en: Understanding corrgrams
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解corrgrams
- en: Using mosaic plots
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用马赛克图
- en: In chapter 6 (basic graphs), we considered a wide range of graph types for displaying
    the distribution of single categorical or continuous variables. Chapter 8 (regression)
    reviewed graphical methods that are useful when predicting a continuous outcome
    variable from a set of predictor variables. In chapter 9 (analysis of variance),
    we considered techniques that are particularly useful for visualizing how groups
    differ on a continuous outcome variable. In many ways, this chapter is a continuation
    and extension of the topics we’ve covered so far.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在第6章（基本图表）中，我们考虑了广泛的各种图表类型，用于显示单个分类或连续变量的分布。第8章（回归）回顾了在从一组预测变量预测连续结果变量时有用的图形方法。在第9章（方差分析）中，我们考虑了特别适用于可视化组在连续结果变量上的差异的技术。在许多方面，本章是我们之前讨论主题的延续和扩展。
- en: 'In this chapter, we’ll focus on graphical methods for displaying relationships
    between two variables (bivariate relationships) and between many variables (multivariate
    relationships). For example:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将专注于显示两个变量（双变量关系）和多个变量（多变量关系）之间关系的图形方法。例如：
- en: What’s the relationship between automobile mileage and car weight? Does it vary
    by the number of cylinders the car has?
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 汽车油耗与汽车重量之间有什么关系？这是否会因汽车气缸数量而变化？
- en: How can you picture the relationships among an automobile’s mileage, weight,
    displacement, and rear axle ratio in a single graph?
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您如何在一张图上展示汽车的油耗、重量、排量和后轴比之间的关系？
- en: When plotting the relationship between two variables drawn from a large dataset
    (say, 10,000 observations), how can you deal with the massive overlap of data
    points you’re likely to see? In other words, what do you do when your graph is
    one big smudge?
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当绘制来自大型数据集（例如，10,000个观测值）的两个变量的关系图时，您如何处理您可能会看到的巨大数据点重叠？换句话说，当您的图表变成一大团模糊时，您该怎么办？
- en: How can you visualize the multivariate relationships among three variables at
    once (given a 2D computer screen or sheet of paper, and a budget slightly less
    than the latest *Star Wars* movie)?
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您如何在一次可视化中同时展示三个变量之间的多变量关系（给定一个2D计算机屏幕或一张纸，以及略低于最新《星球大战》电影的预算）？
- en: How can you display the growth of several trees over time?
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您如何显示几棵树随时间增长的情况？
- en: How can you visualize the correlations among a dozen variables in a single graph?
    How does it help you to understand the structure of your data?
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您如何在一张图上可视化十几个变量之间的相关性？这如何帮助您理解数据的结构？
- en: How can you visualize the relationship of class, gender, and age with passenger
    survival on the *Titanic*? What can you learn from such a graph?
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您如何可视化“泰坦尼克号”乘客生存与阶级、性别和年龄之间的关系？从这样的图表中您可以学到什么？
- en: These are the types of questions that can be answered with the methods described
    in this chapter. The datasets we’ll use are examples of what’s possible. The general
    techniques are what’s most important. If the topic of automobile characteristics
    or tree growth isn’t interesting to you, plug in your own data.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是本章描述的方法可以回答的问题类型。我们将使用的数据集是可能性的示例。一般技术是最重要的。如果您对汽车特性或树木生长不感兴趣，请插入您自己的数据。
- en: We’ll start with scatter plots and scatter plot matrices. Then we’ll explore
    line charts of various types. These approaches are well known and widely used
    in research. Next, we’ll review the use of corrgrams for visualizing correlations
    and mosaic plots for visualizing multivariate relationships among categorical
    variables. These approaches are also useful but much less known among researchers
    and data analysts. You’ll see examples of how you can use each of these approaches
    to gain a better understanding of your data and communicate these findings to
    others.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从散点图和散点图矩阵开始。然后我们将探索各种类型的折线图。这些方法在研究中是众所周知的，并且被广泛使用。接下来，我们将回顾corrgrams在可视化相关性以及马赛克图在可视化分类变量间的多变量关系中的应用。这些方法也很有用，但在研究人员和数据分析师中却知之甚少。您将看到如何使用这些方法中的每一个来更好地理解您的数据，并将这些发现传达给他人。
- en: 11.1 Scatter plots
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.1 散点图
- en: As you’ve seen, scatter plots describe the relationship between two continuous
    variables. In this section, we’ll start with a depiction of a single bivariate
    relationship (*x* versus *y*). We’ll then explore ways to enhance this plot by
    superimposing additional information. Next, you’ll learn how to combine several
    scatter plots into a scatter plot matrix so you can view many bivariate relationships
    at once. We’ll also review the special case where many data points overlap, limiting
    your ability to picture the data, and we’ll discuss several ways around this difficulty.
    Finally, we’ll extend the two-dimensional graph to three dimensions with the addition
    of a third continuous variable. This will include 3D scatter plots and bubble
    plots. Each can help you understand the multivariate relationship among three
    variables at once.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，散点图描述了两个连续变量之间的关系。在本节中，我们将从一个双变量关系的描述开始（*x*与*y*）。然后，我们将探讨通过叠加额外信息来增强此图的方法。接下来，你将学习如何将多个散点图组合成散点图矩阵，以便一次查看多个双变量关系。我们还将回顾许多数据点重叠的特殊情况，这限制了你对数据的描绘能力，并讨论几种克服这种困难的方法。最后，我们将通过添加第三个连续变量将二维图扩展到三维，这将包括3D散点图和气泡图。每种都可以帮助你一次理解三个变量之间的多变量关系。
- en: We’ll start by visualizing the relationship between automobile weight and fuel
    efficiency. The following listing presents an example.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先可视化汽车重量与燃油效率之间的关系。以下列表提供了一个示例。
- en: Listing 11.1 A scatter plot with best-fit lines
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 列表11.1 一个带有最佳拟合线的散点图
- en: '[PRE0]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: ❶ Loads data
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 加载数据
- en: ❷ Creates scatter plot
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 创建散点图
- en: ❸ Adds linear fit
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 添加线性拟合
- en: ❹ Adds loess fit
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 添加局部加权回归拟合
- en: ❺ Adds annotations
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 添加注释
- en: Figure 11.1 shows the resulting graph.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.1显示了结果图。
- en: '![](Images/CH11_F01_Kabacoff3.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F01_Kabacoff3.png)'
- en: Figure 11.1 Scatter plot of car mileage vs. weight, with superimposed linear
    and loess fit lines
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.1 汽车里程与重量的散点图，叠加线性拟合和loess拟合线
- en: The code in listing 11.1 loads a fresh copy of the built-in data frame `mtcars`
    ❶ and creates a basic scatter plot using filled circles for the plotting symbol
    ❷. As expected, as car weight increases, miles per gallon decreases, although
    the relationship isn’t perfectly linear. The first `geom_smooth()` function adds
    a linear fit line (solid red) ❸. The `se=FALSE` option suppresses the 95% confidence
    interval for the line. The second `geom_smooth()` function adds a *loess* fit
    (dashed blue line) ❹. The loess line is a nonparametric fit line based on locally
    weighted polynomial regression and provides a smoothed trend line for the data.
    See Cleveland (1981) for technical details on the algorithm. Josh Starmer provides
    a highly intuitive explanation of loess fit lines on YouTube ([www.youtube.com/watch?v=Vf7oJ6z2LCc](http://www.youtube.com/watch?v=Vf7oJ6z2LCc)).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 列表11.1中的代码加载了内置数据框`mtcars`的新副本 ❶，并使用填充圆圈作为绘图符号创建了一个基本的散点图 ❷。正如预期的那样，随着汽车重量的增加，每加仑英里数减少，尽管这种关系并不完全线性。第一个`geom_smooth()`函数添加了一条线性拟合线（实线红色）
    ❸。`se=FALSE`选项抑制了线的95%置信区间。第二个`geom_smooth()`函数添加了一条*局部加权回归（loess）*拟合线（虚线蓝色） ❹。loess线是一种基于局部加权多项式回归的非参数拟合线，为数据提供了一个平滑的趋势线。有关算法的技术细节，请参阅Cleveland
    (1981)。Josh Starmer在YouTube上提供了一个高度直观的loess拟合线解释([www.youtube.com/watch?v=Vf7oJ6z2LCc](http://www.youtube.com/watch?v=Vf7oJ6z2LCc))。
- en: What if we want to look at the relationship between car weight and fuel efficiency
    separately for 4-, 6-, and 8-cylinder cars? This is easy to do with `ggplot2`
    and a few simple modifications of the previous code. Figure 11.2 provides the
    graph.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想分别查看4、6和8缸汽车的重量与燃油效率之间的关系，这可以通过`ggplot2`和少量对先前代码的简单修改轻松完成。图11.2提供了该图。
- en: Listing 11.2 A scatter plot with separate best-fit lines
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 列表11.2 一个带有单独最佳拟合线的散点图
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](Images/CH11_F02_Kabacoff3.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F02_Kabacoff3.png)'
- en: Figure 11.2 Scatter plot with subgroups and separately estimated fit lines
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.2 带有子组和单独估计拟合线的散点图
- en: By mapping the number of cylinders to color and shape in the `aes()` function,
    the three groups (4, 6, or 8 cylinders) are differentiated by color and plotting
    symbol and separate linear and loess lines. Since the `cyl` variable is numeric,
    `factor(cyl)` is used to convert the variable into discrete categories.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在`aes()`函数中将气缸数映射到颜色和形状，三个组（4、6或8个气缸）通过颜色和绘图符号以及单独的线性拟合和loess拟合线进行区分。由于`cyl`变量是数值型的，因此使用`factor(cyl)`将变量转换为离散类别。
- en: You can control the smoothness of the loess lines using the `span` parameter.
    The default is `geom_smooth(method="loess",` `span=0.75)` Larger values lead to
    smoother fits. In this example, the loess lines overfit the data (follow the points
    too closely). A value of `span=4` (not shown) provides a much smoother fit.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`span`参数控制loess线的平滑度。默认值为`geom_smooth(method="loess", span=0.75)`。较大的值会导致更平滑的拟合。在本例中，loess线过度拟合了数据（过于紧密地跟随点）。`span=4`（未显示）的值提供了一个更平滑的拟合。
- en: Scatter plots help you visualize relationships between quantitative variables
    two at a time, but what if you wanted to look at the bivariate relationships between
    automobile mileage, weight, displacement (cubic inch), and rear axle ratio? When
    there are several quantitative variables, you can represent their relationships
    using a scatter plot matrix.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 散点图有助于您一次可视化两个定量变量之间的关系，但如果你想要查看汽车油耗、重量、排量（立方英寸）和后轴比之间的双变量关系呢？当存在多个定量变量时，您可以使用散点图矩阵来表示它们之间的关系。
- en: 11.1.1 Scatter plot matrices
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.1 散点图矩阵
- en: There are many useful functions for creating scatter plot matrices in R. Base
    R provides the `pairs()` function for creating simple scatter plot matrices. Section
    8.2.4 (multiple linear regression) demonstrates the creation of scatter plot matrices
    using the `scatterplotMatrix` function from the `car` package.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: R中提供了许多用于创建散点图矩阵的有用函数。基础R提供了`pairs()`函数来创建简单的散点图矩阵。第8.2.4节（多重线性回归）展示了使用`scatterplotMatrix`函数从`car`包创建散点图矩阵的方法。
- en: In this section, we’ll use the `ggpairs()` function in the `GGally` package
    to create a `ggplot2` version of a scatter plot matrix. As you’ll see, this approach
    provides options for creating highly customized graphs. Be sure to install the
    `GGally` package (`install.packages("GGally"))` before proceeding.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用`GGally`包中的`ggpairs()`函数创建散点图矩阵的`ggplot2`版本。正如您将看到的，这种方法提供了创建高度定制图形的选项。在继续之前，请确保安装`GGally`包（`install.packages("GGally")`）。
- en: 'First, let’s create a default scatter plot matrix for the `mpg`, `disp`, `drat`,
    and `wt` variables in the `mtcars` data frame:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们为`mtcars`数据框中的`mpg`、`disp`、`drat`和`wt`变量创建一个默认的散点图矩阵：
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Figure 11.3 shows the resulting graph.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.3显示了生成的图形。
- en: By default, the principal diagonal of the matrix contains the kernel density
    curve for each variable (see section 6.5 for details). Miles per gallon is right
    skewed (there are a few high values), and the rear axle ratio appears to be bimodal.
    The six scatter plots are placed below the principal diagonal. The scatter plot
    between miles per gallon and engine displace lies at the intersection of these
    two variables (second row, first column) and indicates a negative relationship.
    The Pearson correlation coefficients between each pair of variables is above the
    principal diagonal. The correlation between miles per gallon and engine displacement
    is –0.848 (first row, second column) and supports our conclusion that as engine
    displacement increases, gas mileage decreases.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，矩阵的主对角线包含每个变量的核密度曲线（详细信息请参阅第6.5节）。每加仑英里数呈右偏态（有几个高值），后轴比似乎呈双峰分布。六个散点图位于主对角线下方。每加仑英里数与发动机排量的散点图位于这两个变量的交叉点（第二行，第一列），表明存在负相关关系。每对变量之间的皮尔逊相关系数位于主对角线上方。每加仑英里数与发动机排量之间的相关系数为-0.848（第一行，第二列），支持我们的结论：随着发动机排量的增加，油耗会降低。
- en: '![](Images/CH11_F03_Kabacoff3.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/CH11_F03_Kabacoff3.png)'
- en: Figure 11.3 Scatter plot matrix created by the `ggpairs()` function
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.3 由`ggpairs()`函数创建的散点图矩阵
- en: Next, we’ll create a highly customized scatter plot matrix, adding fit lines,
    histograms, and a personalized theme. The `ggpairs()` function lets you specify
    separate functions for creating plots on, below, and above the principal diagonal.
    The following listing provides the code.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将创建一个高度定制的散点图矩阵，添加拟合线、直方图和个性化主题。`ggpairs()`函数允许您为创建主对角线、主对角线下方和主对角线上方的绘图指定单独的函数。以下列表提供了代码。
- en: Listing 11.3 A scatter plot matrix with fit lines, histograms, and correlation
    coefficients
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 列表11.3 带拟合线、直方图和相关性系数的散点图矩阵
- en: '[PRE3]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: ❶ Function for plots on principal diagonal
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 主对角线上的绘图函数
- en: ❷ Function for plots below diagonal
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 主对角线下方的绘图函数
- en: ❸ Function for plots above diagonal
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ❸ 主对角线上方的绘图函数
- en: ❹ Customized theme
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: ❹ 定制主题
- en: ❺ Generates scatter plot matrix
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ❺ 生成散点图矩阵
- en: First, a function is defined for creating a histogram using light blue bars
    with black borders ❶. Next, a function is created for generating a scatter plot
    with dark grey points, a steel blue line of best fit, and a dashed red loess smoothed
    line. Confidence intervals are suppressed (`se=FALSE`) ❷. A third function is
    specified for displaying correlation coefficients ❸. This function uses the `ggally_cor()`
    function to obtain and print the coefficient, while the size and color option
    affect the appearance, and the `displayGrid` option suppresses grid lines. A customized
    theme has also been added ❹. This optional step eliminates facet strips and grid
    lines and surrounds each cell with a grey box.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，定义了一个函数用于使用浅蓝色条带和黑色边框创建直方图 ❶。接下来，创建了一个函数用于生成带有深灰色点的散点图，最佳拟合线为钢蓝色，以及一条虚线红色洛伦兹平滑线。置信区间被抑制（`se=FALSE`）
    ❷。指定了第三个函数用于显示相关系数 ❸。此函数使用 `ggally_cor()` 函数获取并打印系数，而大小和颜色选项影响外观，`displayGrid`
    选项抑制网格线。还添加了一个自定义主题 ❹。此可选步骤消除了面元条和网格线，并将每个单元格包围在一个灰色框中。
- en: Finally, the `ggpairs()` function ❺ uses these functions to create the customized
    graph in figure 11.4\. The `columns` option specifies the variables, and the `columnLabels`
    option provides descriptive names. The `lower`, `diag`, and `upper` options specify
    the functions that will be used to create the cell plots in each portion of the
    matrix. This approach gives you a great deal of flexibility in designing the finished
    graph.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，`ggpairs()` 函数 ❺ 使用这些函数在图11.4中创建自定义图形。`columns` 选项指定变量，`columnLabels` 选项提供描述性名称。`lower`、`diag`
    和 `upper` 选项指定用于创建矩阵每个部分的单元格图的函数。这种方法在设计最终图形时提供了很大的灵活性。
- en: R provides many other ways to create scatter plot matrices. You may want to
    explore the `splom()` function in the `lattice` package, the `pairs2()` function
    in the `TeachingDemos` package, the `xysplom()` function in the `HH` package,
    the `kdepairs()` function in the `ResourceSelection` package, and `pairs.mod()`
    in the `SMPracticals` package. Each adds its own unique twist. Analysts must love
    scatter plot matrices!
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: R提供了许多创建散点图矩阵的其他方法。你可能想探索 `lattice` 包中的 `splom()` 函数，`TeachingDemos` 包中的 `pairs2()`
    函数，`HH` 包中的 `xysplom()` 函数，`ResourceSelection` 包中的 `kdepairs()` 函数，以及 `SMPracticals`
    包中的 `pairs.mod()`。每个都添加了自己的独特风格。分析师们一定喜欢散点图矩阵！
- en: '![](Images/CH11_F04_Kabacoff3.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F04_Kabacoff3.png)'
- en: Figure 11.4 A scatter plot matrix created with the `ggpairs()` function and
    user-supplied functions for the scatter plots, histograms, and correlations
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.4 使用 `ggpairs()` 函数创建的散点图矩阵和用户提供的散点图、直方图和相关性函数
- en: 11.1.2 High-density scatter plots
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.2 高密度散点图
- en: 'When there’s a significant overlap among data points, scatter plots become
    less useful for observing relationships. Consider the following contrived example
    with 10,000 observations falling into two overlapping clusters of data:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 当数据点之间存在显著重叠时，散点图在观察关系方面变得不那么有用。考虑以下虚构的例子，其中10,000个观测值落入两个重叠的数据点集群：
- en: '[PRE4]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: If you generate a standard scatter plot between these variables using the following
    code
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用以下代码在这些变量之间生成一个标准的散点图
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: you’ll obtain a graph like the one in figure 11.5.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 你将获得图11.5中的图形。
- en: '![](Images/CH11_F05_Kabacoff3.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F05_Kabacoff3.png)'
- en: Figure 11.5 Scatter plot with 10,000 observations and significant overlap of
    data points. Note that the overlap of data points makes it difficult to discern
    where the concentration of data is greatest.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.5 包含10,000个观测值和显著重叠数据点的散点图。请注意，数据点的重叠使得难以辨别数据浓度最大的地方。
- en: The overlap of data points in figure 11.5 makes it difficult to discern the
    relationship between *x* and *y*. R provides several graphical approaches that
    can be used when this occurs, including binning, color, and transparency to indicate
    the number of overprinted data points at any point on the graph.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.5中数据点的重叠使得难以辨别 *x* 和 *y* 之间的关系。R提供了几种图形方法，当这种情况发生时可以使用，包括分箱、颜色和透明度来指示图上任何点的重叠数据点的数量。
- en: The `smoothScatter()` function uses a kernel density estimate to produce smoothed
    color density representations of the scatter plot. The code
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '`smoothScatter()` 函数使用核密度估计来生成散点图的平滑颜色密度表示。代码'
- en: '[PRE6]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: produces the graph in figure 11.6.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 生成了图11.6中的图形。
- en: '![](Images/CH11_F06_Kabacoff3.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F06_Kabacoff3.png)'
- en: Figure 11.6 Scatter plot using `smoothScatter()` to plot smoothed density estimates.
    Densities are easy to read from the graph.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.6 使用 `smoothScatter()` 绘制平滑密度估计的散点图。密度很容易从图中读取。
- en: Using an alternative approach, the `geom_hex()` function in the `ggplot2` package
    provides bivariate binning into hexagonal cells (it looks better than it sounds).
    Basically, the plot area is divided into a grid of hexagonal cells, and the number
    of points in each cell is displayed using color or shading. Applying this function
    to the dataset
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 使用另一种方法，`ggplot2` 包中的 `geom_hex()` 函数提供了双变量分箱到六边形单元格（听起来比看起来好）。基本上，绘图区域被分成一个六边形网格，每个单元格中的点数使用颜色或阴影显示。将此函数应用于数据集
- en: '[PRE7]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: gives you the scatter plot in figure 11.7.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 给出图11.7中的散点图。
- en: By default, `geom_hex()` uses lighter colors to indicate greater density. In
    your code, the function `scale_fill_continuous(trans` `=` `'reverse')` ensures
    that darker colors are used to indicate areas of greater density. I think that
    this is more intuitive and matches the approach of other R functions used to visualize
    large datasets.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，`geom_hex()` 使用较浅的颜色来表示更高的密度。在您的代码中，函数 `scale_fill_continuous(trans` `=`
    `'reverse')` 确保使用较深的颜色来表示密度更高的区域。我认为这更直观，并且与用于可视化大型数据集的其他R函数的方法相匹配。
- en: Note that the `hexbin()` function in the `hexbin` package, along with the `iplot()`
    function in the `IDPmisc` package, can be used to create readable scatter plot
    matrices for large datasets as well. See `?hexbin` and `?iplot` for examples.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，`hexbin` 包中的 `hexbin()` 函数以及 `IDPmisc` 包中的 `iplot()` 函数可以用来为大型数据集创建可读的散点图矩阵。请参阅
    `?hexbin` 和 `?iplot` 以获取示例。
- en: '![](Images/CH11_F07_Kabacoff3.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![图像](Images/CH11_F07_Kabacoff3.png)'
- en: Figure 11.7 Scatter plot using hexagonal binning to display the number of observations
    at each point. Data concentrations are easy to see, and counts can be read from
    the legend.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.7 使用六边形分箱显示每个点的观测数。数据集中度容易看出，并且可以从图例中读取计数。
- en: 11.1.3 3D scatter plots
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.3 3D散点图
- en: Scatter plots and scatter plot matrices display bivariate relationships. What
    if you want to visualize the interaction of three quantitative variables at once?
    You can use a 3D scatter plot.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 散点图和散点图矩阵显示双变量关系。如果您想同时可视化三个定量变量的交互作用，可以使用3D散点图。
- en: For example, say that you’re interested in the relationship between automobile
    mileage, weight, and displacement. You can use the `scatterplot3d()` function
    in the `scatterplot3d` package to picture their relationship. The format is
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设你对汽车油耗、重量和排量之间的关系感兴趣。您可以使用 `scatterplot3d` 包中的 `scatterplot3d()` 函数来描绘它们之间的关系。格式如下
- en: '[PRE8]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: where *`x`* is plotted on the horizontal axis, *`y`* is plotted on the vertical
    axis, and *`z`* is plotted in perspective. Continuing the example,
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`x`* 在水平轴上绘制，*`y`* 在垂直轴上绘制，*`z`* 以透视方式绘制。继续上述示例，
- en: '[PRE9]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: produces the 3D scatter plot in figure 11.8.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 生成图11.8中的3D散点图。
- en: '![](Images/CH11_F08_Kabacoff3.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图像](Images/CH11_F08_Kabacoff3.png)'
- en: Figure 11.8 3D scatter plot of miles per gallon, auto weight, and displacement
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.8 3D散点图：每加仑英里数、汽车重量和排量
- en: The `scatterplot3d()` function offers many options, including the ability to
    specify symbols, axes, colors, lines, grids, highlighting, and angles. For example,
    the code
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '`scatterplot3d()` 函数提供了许多选项，包括指定符号、坐标轴、颜色、线条、网格、突出显示和角度。例如，以下代码'
- en: '[PRE10]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: produces a 3D scatter plot with highlighting that enhances the impression of
    depth and vertical lines connecting points to the horizontal plane (see figure
    11.9).
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 生成一个带有突出显示的3D散点图，增强了深度印象，并且有垂直线将点连接到水平平面（见图11.9）。
- en: '![](Images/CH11_F09_Kabacoff3.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![图像](Images/CH11_F09_Kabacoff3.png)'
- en: Figure 11.9 3D scatter plot with vertical lines and shading
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.9 带有垂直线和阴影的3D散点图
- en: As a final example, let’s take the previous graph and add a regression plane.
    The code is
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 作为最后的例子，让我们将之前的图形添加一个回归平面。代码如下
- en: '[PRE11]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Figure 11.10 shows the resulting graph.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.10显示了结果图形。
- en: '![](Images/CH11_F10_Kabacoff3.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图像](Images/CH11_F10_Kabacoff3.png)'
- en: Figure 11.10 3D scatter plot with vertical lines, shading, and overlaid regression
    plane
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.10 带有垂直线、阴影和叠加回归平面的3D散点图
- en: The graph allows you to visualize the prediction of miles per gallon from automobile
    weight and displacement using a multiple regression equation. The plane represents
    the predicted values, and the points are the actual values. The vertical distances
    from the plane to the points are the residuals. Points that lie above the plane
    are underpredicted, whereas points that lie below the line are overpredicted.
    Chapter 8 covers multiple regression.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 该图表允许您通过多重回归方程从汽车重量和排量来可视化每加仑英里数的预测。平面代表预测值，点代表实际值。平面到点的垂直距离是残差。位于平面以上的点是预测不足，而位于线以下的点是预测过度。第
    8 章介绍了多重回归。
- en: 11.1.4 Spinning 3D scatter plots
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.4 旋转 3D 散点图
- en: Three-dimensional scatter plots are much easier to interpret if you can interact
    with them. R provides several mechanisms for rotating graphs so you can see the
    plotted points from more than one angle.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您能够与三维散点图进行交互，那么三维散点图就更容易解释。R 提供了多种机制来旋转图表，这样您就可以从多个角度看到绘制的点。
- en: For example, you can create an interactive 3D scatter plot using the `plot3d()`
    function in the `rgl` package. It creates a spinning 3D scatter plot that can
    be rotated with the mouse. The format is
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以使用 `rgl` 包中的 `plot3d()` 函数创建一个交互式 3D 散点图。它创建了一个可以鼠标旋转的旋转 3D 散点图。其格式为
- en: '[PRE12]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'where *`x`*, *`y`*, and *`z`* are numeric vectors representing points. You
    can also add options like `col` and `size` to control the color and size of the
    points, respectively. Continuing the example, try this code:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`x`*、*`y`* 和 *`z`* 是表示点的数值向量。您还可以添加 `col` 和 `size` 等选项来分别控制点的颜色和大小。继续上面的例子，尝试以下代码：
- en: '[PRE13]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: You should get a graph like the one depicted in figure 11.11\. Use the mouse
    to rotate the axes. I think you’ll find that being able to rotate the scatter
    plot in three dimensions makes the graph much easier to understand.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该得到图 11.11 中描述的图表。使用鼠标旋转坐标轴。我认为您会发现能够在三维空间中旋转散点图使得图表更容易理解。
- en: '![](Images/CH11_F11_Kabacoff3.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F11_Kabacoff3.png)'
- en: Figure 11.11 Rotating 3D scatter plot produced by the `plot3d()` function in
    the `rgl` package
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.11 由 `rgl` 包中的 `plot3d()` 函数生成的旋转 3D 散点图
- en: 'You can perform a similar function with `scatter3d()` in the `car` package:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 `car` 包中的 `scatter3d()` 函数执行类似的功能：
- en: '[PRE14]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Figure 11.12 displays the results.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.12 显示了结果。
- en: The `scatter3d()` function can include a variety of regression surfaces, such
    as linear, quadratic, smooth, and additive. The linear surface is the default.
    Additionally, there are options for interactively identifying points. See `help(scatter3d)`
    for more details.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '`scatter3d()` 函数可以包括各种回归曲面，如线性、二次、平滑和加性。线性曲面是默认选项。此外，还有交互式识别点的选项。有关更多详细信息，请参阅
    `help(scatter3d)`。'
- en: '![](Images/CH11_F12_Kabacoff3.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F12_Kabacoff3.png)'
- en: Figure 11.12 Spinning 3D scatter plot produced by the `scatter3d()` function
    in the `car` package
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.12 由 `car` 包中的 `scatter3d()` 函数生成的旋转 3D 散点图
- en: 11.1.5 Bubble plots
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11.1.5 气泡图
- en: In the previous section, we displayed the relationship between three quantitative
    variables using a 3D scatter plot. Another approach is to create a 2D scatter
    plot and use the size of the plotted point to represent the value of the third
    variable. This approach is called a *bubble plot*.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们使用三维散点图显示了三个定量变量之间的关系。另一种方法是创建一个二维散点图，并使用绘制点的尺寸来表示第三个变量的值。这种方法称为 *气泡图*。
- en: 'A simple example of a bubble plot is given here:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 这里给出了气泡图的一个简单示例：
- en: '[PRE15]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The resulting scatter plot shows the relationship between car weight and fuel
    efficiency, where point size is proportional to each car’s engine displacement.
    Figure 11.13 shows the graph.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的散点图显示了汽车重量与燃油效率之间的关系，其中点的大小与每辆车的发动机排量成比例。图 11.13 展示了该图表。
- en: '![](Images/CH11_F13_Kabacoff3.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F13_Kabacoff3.png)'
- en: Figure 11.13 Bubble plot of car weight vs. mpg, where point size is proportional
    to engine displacement
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.13 汽车重量与每加仑英里数的气泡图，其中点的大小与发动机排量成比例
- en: We can improve the default appearance by choosing a different point shape and
    color and adding transparency to deal with point overlaps. We’ll also increase
    the possible range of bubble sizes to make discrimination easier. Finally, we’ll
    use color to add the number of cylinders as a fourth variable. The following listing
    gives the code, and figure 11.14 shows the graph. The colors are difficult to
    distinguish in greyscale, but readily apparent in color.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过选择不同的点形状和颜色，并添加透明度来处理点重叠，来改善默认的外观。我们还将增加气泡大小的可能范围，以便更容易区分。最后，我们将使用颜色来添加气缸数作为第四个变量。以下列表给出了代码，图
    11.14 显示了图表。在灰度图中颜色难以区分，但在彩色图中很容易辨认。
- en: Listing 11.4 An enhanced bubble plot
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 11.4 改进的气泡图
- en: '[PRE16]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '![](Images/CH11_F14_Kabacoff3.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F14_Kabacoff3.png)'
- en: Figure 11.14 Enhanced bubble plot. Automobiles with more engine cylinders tend
    to have increased weight and engine displacement and poorer fuel efficiency.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.14 改进的气泡图。拥有更多发动机气缸的汽车往往重量更大，发动机排量更大，燃油效率更差。
- en: 'In general, statisticians who use R tend to avoid bubble plots for the same
    reason they avoid pie charts: humans typically have a harder time making judgments
    about volume than distance. But bubble charts are popular in the business world,
    so I’m including them here.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，使用 R 的统计学家倾向于避免气泡图，原因与避免饼图相同：人类通常在判断体积方面比距离更困难。但气泡图在商业界很受欢迎，所以我在这里包括它们。
- en: l’ve certainly had a lot to say about scatter plots. This attention to detail
    is due, in part, to the central place that scatter plots hold in data analysis.
    Although simple, they can help you visualize your data in an immediate and straightforward
    manner, uncovering relationships that might otherwise be missed.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我确实有很多关于散点图要说的。这种对细节的关注部分原因是散点图在数据分析中的核心地位。尽管简单，但它们可以帮助你立即以直接的方式可视化数据，揭示可能被忽视的关系。
- en: 11.2 Line charts
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.2 折线图
- en: If you connect the points in a scatter plot moving from left to right, you have
    a line plot. The dataset `Orange` that comes with the base installation contains
    age and circumference data for five orange trees. Consider the growth of the first
    orange tree, depicted in figure 11.15\. The plot on the left is a scatter plot,
    and the plot on the right is a line chart. As you can see, line charts are particularly
    good vehicles for conveying change. The graphs in figure 11.15 were created with
    the code in the listing 11.5..
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你从左到右连接散点图中的点，你就得到了一个折线图。随基础安装提供的 `Orange` 数据集包含五棵橙树的年龄和周长数据。考虑第一棵橙树的生长情况，如图
    11.15 所示。左边的图是散点图，右边的图是折线图。正如你所见，折线图特别适合传达变化。图 11.15 中的图表是用列表 11.5 中的代码创建的。
- en: '![](Images/CH11_F15_Kabacoff3.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F15_Kabacoff3.png)'
- en: Figure 11.15 Comparison of a scatter plot and a line plot. A line chart helps
    the reader see growth and trends in the data.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.15 散点图与折线图比较。折线图有助于读者看到数据中的增长和趋势。
- en: Listing 11.5 Scatter plots vs. line plots
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 11.5 散点图与折线图
- en: '[PRE17]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The only difference between the code for the two plots is the addition of the
    `geom_line()` function. Table 11.1 gives common options for this function. Each
    can be assigned a value or mapped to a categorical variable.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 两个图表的代码之间唯一的区别是添加了 `geom_line()` 函数。表 11.1 给出了该函数的常见选项。每个选项都可以分配一个值或映射到一个分类变量。
- en: Table 11.1 `geom_line()` options
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11.1 `geom_line()` 选项
- en: '| Option | Effect |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| 选项 | 影响 |'
- en: '| `size` | Thickness of the line |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| `size` | 线条厚度 |'
- en: '| `color` | Line color |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| `color` | 线条颜色 |'
- en: '| `linetype` | Line pattern (e.g., dashed) |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| `linetype` | 线型模式（例如，虚线）|'
- en: Figure 11.16 shows possible line types.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.16 显示了可能的线型。
- en: '![](Images/CH11_F16_Kabacoff3.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F16_Kabacoff3.png)'
- en: Figure 11.16 `ggplot2` line types. You can specify either the name or the number.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.16 `ggplot2` 线型。你可以指定名称或编号。
- en: To demonstrate the creation of a more complex line chart, let’s plot the growth
    of all five orange trees over time. Each tree will have its own distinctive line
    and color. The code is shown in the next listing, and the results in figure 11.17.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示创建更复杂的折线图，让我们绘制五棵橙树随时间增长的情况。每棵树将有自己的独特线条和颜色。代码在下一列表中显示，结果在图 11.17 中。
- en: Listing 11.6 Line chart displaying the growth of five orange trees over time
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 11.6 显示五棵橙树随时间增长的折线图
- en: '[PRE18]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '![](Images/CH11_F17_Kabacoff3.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F17_Kabacoff3.png)'
- en: Figure 11.17 Line chart displaying the growth of five orange trees
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.17 显示五棵橙树随时间增长的折线图
- en: In listing 11.6, the `aes()` function maps the tree number to both line type
    and color. The `scale_color_brewer()` function is used to select a color palette.
    Since I am chromatically challenged (i.e., I’m awful at choosing good colors),
    I rely heavily on predefined color palettes like those provided by the `RColorBrewer`
    package. Chapter 19 (advanced graphs) describes color palettes in great detail.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在列表11.6中，`aes()`函数将树编号映射到线型和颜色。`scale_color_brewer()`函数用于选择调色板。由于我在色彩选择上存在困难（即，我非常擅长选择好的颜色），我严重依赖预定义的调色板，如`RColorBrewer`包提供的那些。第19章（高级图形）详细描述了调色板。
- en: You can see in the figure that tree 4 and tree 2 demonstrated the greatest growth
    across the range of days measured and that tree 4 overtakes tree 2 at around 664
    days. By default, the legend lists the lines in the opposite order that they appear
    on the chart (top to bottom in the legend is bottom to top in the graph). To make
    the orders match top to bottom, add
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从图中看到，树4和树2在测量的整个范围内表现出最大的增长，并且树4在大约664天时超过了树2。默认情况下，图例列出的线条顺序与图表中出现的顺序相反（图例中从上到下是图表中从下到上）。为了使顺序从上到下匹配，请添加
- en: '[PRE19]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: to the code in listing 11.6\. In the next section, you’ll explore ways of examining
    a number of correlation coefficients at once.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 列表11.6中的代码。在下一节中，你将探索一次性检查多个相关系数的方法。
- en: 11.3 Corrgrams
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.3 相关图
- en: Correlation matrices are a fundamental aspect of multivariate statistics. Which
    variables are strongly related to each other, and which aren’t? Are some clusters
    of variables related in specific ways? As the number of variables grows, such
    questions can be harder to answer. *Corrgrams* are a relatively recent tool for
    visualizing the data in correlation matrices.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 相关矩阵是多变量统计的一个基本方面。哪些变量彼此强烈相关，哪些不相关？某些变量簇是否以特定方式相关？随着变量数量的增加，这些问题可能更难回答。"相关图"是用于可视化相关矩阵数据的一个相对较新的工具。
- en: 'It’s easier to explain a corrgram once you’ve seen one. Consider the correlations
    among the variables in the `mtcars` data frame. Here you have 11 variables, each
    measuring some aspect of 32 automobiles. You can get the correlations using the
    following code:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你看过一次相关图，解释它就会变得容易。考虑`mtcars`数据框中变量的相关性。这里有11个变量，每个变量测量32辆汽车的一些方面。你可以使用以下代码获取相关性：
- en: '[PRE20]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Which variables are most related? Which variables are relatively independent?
    Are there any patterns? It isn’t that easy to tell from the correlation matrix
    without significant time and effort (and probably a set of colored pens to make
    notations).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 哪些变量最相关？哪些变量相对独立？是否存在任何模式？没有显著的时间和精力（以及可能还需要一套彩色笔来标注），仅从相关矩阵中是无法轻易判断的。
- en: You can display that same correlation matrix using the `corrgram()` function
    in the `corrgram` package (see figure 11.18). The code is
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`corrgram`包中的`corrgram()`函数显示相同的相关矩阵（见图11.18）。代码如下：
- en: '[PRE21]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![](Images/CH11_F18_Kabacoff3.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图片](Images/CH11_F18_Kabacoff3.png)'
- en: Figure 11.18 Corrgram of the correlations among the variables in the `mtcars`
    data frame. Rows and columns have been reordered using principal components analysis.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.18 `mtcars`数据框中变量之间的相关图。行和列已使用主成分分析重新排序。
- en: To interpret this graph, start with the lower triangle of cells (the cells below
    the principal diagonal). By default, a blue color and hashing that goes from lower
    left to upper right represent a positive correlation between the two variables
    that meet at that cell. Conversely, a red color and hashing that goes from the
    upper left to lower right represent a negative correlation. The darker and more
    saturated the color, the greater the magnitude of the correlation. Weak correlations,
    near zero, appear washed out. In the current graph, the rows and columns have
    been reordered (using principal components analysis that we’ll discuss in chapter
    14) to cluster variables together that have similar correlation patterns.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 要解释这个图表，首先从单元格的下半部分（主对角线以下的单元格）开始。默认情况下，蓝色和从左下到右上的网格表示两个在该单元格相遇的变量之间的正相关。相反，红色和从左上到右下的网格表示负相关。颜色越深、饱和度越高，相关性的幅度就越大。接近零的弱相关性看起来较淡。在当前图表中，行和列已重新排序（使用第14章将要讨论的主成分分析）以将具有相似相关模式的变量聚集在一起。
- en: You can see from the shaded cells that `gear`, `am`, `drat`, and `mpg` are positively
    correlated with one another. You can also see that `wt`, `disp`, `cyl`, `hp`,
    and `carb` are positively correlated with one another. But the first group of
    variables is negatively correlated with the second group. You can also see that
    the correlation between `carb` and `am` is weak, as is the correlation between
    `vs` and `gear`, `vs` and `am`, and `drat` and `qsec`.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从阴影单元格中看到，`gear`、`am`、`drat`和`mpg`彼此之间呈正相关。您还可以看到，`wt`、`disp`、`cyl`、`hp`和`carb`彼此之间呈正相关。但第一组变量与第二组变量呈负相关。您还可以看到，`carb`与`am`之间的相关性较弱，`vs`与`gear`、`vs`与`am`以及`drat`与`qsec`之间的相关性也较弱。
- en: The upper triangle of cells displays the same information using pies. Here,
    color plays the same role, but the strength of the correlation is indicated by
    the size of the filled pie slice. Positive correlations fill the pie starting
    at 12 o’clock and moving clockwise. Negative correlations fill the pie by moving
    counterclockwise.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 单元格的上三角使用饼图显示相同的信息。在这里，颜色扮演着同样的角色，但相关性的强度由填充饼图的切片大小表示。正相关从12点开始顺时针填充饼图。负相关逆时针填充饼图。
- en: The format of the `corrgram()` function is
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '`corrgram()`函数的格式是'
- en: '[PRE22]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: where *`x`* is a data frame with one observation per row. When `order=TRUE`,
    the variables are reordered using a principal component analysis of the correlation
    matrix. Reordering can help make patterns of bivariate relationships more obvious.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 其中*`x`*是一个数据框，每行有一个观测值。当`order=TRUE`时，使用相关矩阵的主成分分析对变量进行重新排序。重新排序可以帮助使双变量关系的模式更加明显。
- en: The option `panel` specifies the type of off-diagonal panels to use. Alternatively,
    you can use the options `lower.panel` and `upper.panel` to choose different options
    below and above the main diagonal. The `text.panel` and `diag.panel` options refer
    to the main diagonal. Table 11.2 describes allowable values.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 选项`panel`指定要使用的非对角面板类型。或者，您可以使用`lower.panel`和`upper.panel`选项来选择主对角线以上和以下的不同选项。`text.panel`和`diag.panel`选项指的是主对角线。表11.2描述了允许的值。
- en: Table 11.2 Panel options for the `corrgram()` function
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 表11.2 `corrgram()`函数的面板选项
- en: '| Placement | Panel option | Description |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| 放置 | 面板选项 | 描述 |'
- en: '| Off diagonal | `panel.pie` | The filled portion of the pie indicates the
    magnitude of the correlation. |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| 非对角线 | `panel.pie` | 饼图的填充部分表示相关性的大小。 |'
- en: '|  | `panel.shade` | The depth of the shading indicates the magnitude of the
    correlation. |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.shade` | 阴影的深度表示相关性的大小。 |'
- en: '|  | `panel.ellipse` | Plots a confidence ellipse and smoothed line |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.ellipse` | 绘制置信椭圆和光滑线 |'
- en: '|  | `panel.pts` | Plots a scatter plot |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.pts` | 绘制散点图 |'
- en: '|  | `panel.conf` | Prints correlations and their confidence intervals |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.conf` | 打印相关系数及其置信区间 |'
- en: '|  | `panel.cor` | Prints correlations without their confidence intervals |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.cor` | 打印相关系数，但不包括其置信区间 |'
- en: '| Main diagonal | `panel.txt` | Prints the variable name |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 主对角线 | `panel.txt` | 打印变量名 |'
- en: '|  | `panel.minmax` | Prints the minimum and maximum value and variable name
    |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.minmax` | 打印最小值、最大值和变量名 |'
- en: '|  | `panel.density` | Prints the kernel density plot and variable name |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '|  | `panel.density` | 打印核密度图和变量名 |'
- en: Let’s try a second example. The code
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试第二个例子。代码
- en: '[PRE23]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: produces the graph in figure 11.19\. Here, you’re using smoothed fit lines and
    confidence ellipses in the lower triangle and scatter plots in the upper triangle.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 生成图11.19中的图形。在这里，您在下半三角使用光滑拟合线和使用置信椭圆，在上半三角使用散点图。
- en: '![](Images/CH11_F19_Kabacoff3.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F19_Kabacoff3.png)'
- en: Figure 11.19 Corrgram of the correlations among the variables in the `mtcars`
    data frame. The lower triangle contains smoothed best-fit lines and confidence
    ellipses, and the upper triangle contains scatter plots. The diagonal panel contains
    minimum and maximum values. Rows and columns have been reordered using principal
    components analysis.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.19 `mtcars`数据框中变量之间的相关性的Corrgram。下三角包含光滑的最佳拟合线和置信椭圆，上三角包含散点图。对角面板包含最小值和最大值。行和列已使用主成分分析重新排序。
- en: Why do the scatter plots look odd?
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么散点图看起来很奇怪？
- en: Several of the variables plotted in figure 11.19 have limited allowable values.
    For example, the number of gears is 3, 4, or 5\. The number of cylinders is 4,
    6, or 8\. Both `am` (transmission type) and `vs` (V/S) are dichotomous. This explains
    the odd-looking scatter plots in the upper diagonal.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.19中绘制的几个变量具有有限的允许值。例如，齿轮的数量是3、4或5。汽缸的数量是4、6或8。`am`（变速器类型）和`vs`（V/S）都是二元的。这解释了上对角线中看起来奇怪的散点图。
- en: Always be careful that the statistical methods you choose are appropriate to
    the form of the data. Specifying these variables as ordered or unordered factors
    can serve as a useful check. When R knows that a variable is categorical or ordinal,
    it attempts to apply statistical methods that are appropriate to that level of
    measurement.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 总是小心选择适合数据形式的统计方法。将这些变量指定为有序或无序因素可以作为有用的检查。当R知道一个变量是分类或有序的，它会尝试应用适合该测量水平的统计方法。
- en: We’ll finish with one more example. The code
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将以另一个示例结束。以下代码
- en: '[PRE24]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: produces the graph in figure 11.20\. Here you’re using shading in the lower
    triangle and order variables to emphasize correlation patterns, and you’re printing
    the correlation values in the upper triangle.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 产生图11.20中的图形。在这里，你使用下三角的着色和变量顺序来强调相关性模式，并在上三角打印相关值。
- en: '![](Images/CH11_F20_Kabacoff3.png)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F20_Kabacoff3.png)'
- en: Figure 11.20 Corrgram of the correlations among the variables in the `mtcars`
    data frame. The lower triangle is shaded to represent the magnitude and direction
    of the correlations. Rows and columns have been reordered using principal components
    analysis. Correlation coefficients are printed in the upper triangle.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.20 `mtcars`数据框中变量的相关性的Corrgram。下三角被着色以表示相关性的大小和方向。行和列已使用主成分分析重新排序。相关系数打印在上三角。
- en: 'Before moving on, I should point out that you can control the colors used by
    the `corrgram()` function. To do so, specify four colors in the `colorRampPalette()`
    function and include the results using the `col.regions` option. Here’s an example:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，我应该指出，你可以通过`corrgram()`函数控制使用的颜色。为此，在`colorRampPalette()`函数中指定四种颜色，并使用`col.regions`选项包含结果。以下是一个示例：
- en: '[PRE25]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Try it and see what you get.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试一下，看看你得到什么结果。
- en: 'Corrgrams can be useful for examining large numbers of bivariate relationships
    among quantitative variables. Because they’re relatively new, the greatest challenge
    is to educate the recipient on how to interpret them. To learn more, see Michael
    Friendly, “Corrgrams: Exploratory Displays for Correlation Matrices,” [https://www.datavis.ca/papers/corrgram.pdf](https://www.datavis.ca/papers/corrgram.pdf).'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 'Corrgrams可以用来检查大量定量变量之间的双变量关系。由于它们相对较新，最大的挑战是教育接收者如何解释它们。了解更多信息，请参阅Michael
    Friendly的“Corrgrams: Exploratory Displays for Correlation Matrices”，[https://www.datavis.ca/papers/corrgram.pdf](https://www.datavis.ca/papers/corrgram.pdf)。'
- en: 11.4 Mosaic plots
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 11.4 网状图
- en: Up to this point, we’ve been exploring methods of visualizing relationships
    among quantitative/continuous variables. But what if your variables are categorical?
    When you’re looking at a single categorical variable, you can use a bar or pie
    chart. If there are two categorical variables, you can use a stacked bar chart
    (section 6.1.2). But what do you do if there are more than two categorical variables?
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们一直在探索可视化定量/连续变量之间关系的方法。但如果你的变量是分类的呢？当你查看单个分类变量时，你可以使用条形图或饼图。如果有两个分类变量，你可以使用堆叠条形图（第6.1.2节）。但如果有超过两个分类变量，你该怎么办呢？
- en: One approach is to use *mosaic plots*, in which the frequencies in a multidimensional
    contingency table are represented by nested rectangular regions that are proportional
    to their cell frequency. Color and/or shading can be used to represent residuals
    from a fitted model. For details, see Meyer, Zeileis, and Hornick (2006) or Michael
    Friendly’s excellent tutorial ([https://cran.r-project.org/web/packages/vcdExtra/vignettes/vcd-tutorial.pdf](https://cran.r-project.org/web/packages/vcdExtra/vignettes/vcd-tutorial.pdf)).
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 一种方法是使用*网状图*，其中多维列联表中的频率由与其单元格频率成比例的嵌套矩形区域表示。可以使用颜色和/或阴影来表示拟合模型的残差。有关详细信息，请参阅Meyer、Zeileis和Hornick（2006）或Michael
    Friendly的优秀教程([https://cran.r-project.org/web/packages/vcdExtra/vignettes/vcd-tutorial.pdf](https://cran.r-project.org/web/packages/vcdExtra/vignettes/vcd-tutorial.pdf))。
- en: 'Mosaic plots can be created with the `mosaic()` function from the `vcd` library
    (there’s a `mosaicplot()` function in the basic installation of R, but I recommend
    you use the `vcd` package for its more extensive features). As an example, consider
    the `Titanic` dataset available in the base installation. It describes the number
    of passengers who survived or died, cross-classified by their class (1st, 2nd,
    3rd, Crew), sex (Male, Female), and age (Child, Adult). This is a well-studied
    dataset. You can see the cross-classification using the following code:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 马赛克图可以使用 `vcd` 库中的 `mosaic()` 函数创建（R 的基本安装中有一个 `mosaicplot()` 函数，但我推荐使用 `vcd`
    包，因为它具有更丰富的功能）。作为一个例子，考虑基本安装中可用的 `Titanic` 数据集。它描述了乘客的生存或死亡数量，按舱位（1 级、2 级、3 级、船员）、性别（男性、女性）和年龄（儿童、成人）进行交叉分类。这是一个经过充分研究的数据集。你可以使用以下代码查看交叉分类：
- en: '[PRE26]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The `mosaic()` function can be invoked as
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '`mosaic()` 函数可以调用如下'
- en: '[PRE27]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: where *`table`* is a contingency table in array form, or
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`表格`* 是以数组形式表示的列联表，
- en: '[PRE28]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: where *`formula`* is a standard R formula and *`data`* specifies either a data
    frame or a table. Adding the option `shade=TRUE` colors the figure based on Pearson
    residuals from a fitted model (independence by default), and the option `legend=TRUE`
    displays a legend for these residuals.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *`公式`* 是标准的 R 公式，而 *`数据`* 指定了一个数据框或表格。添加选项 `shade=TRUE` 会根据拟合模型的 Pearson
    残差（默认为独立性）给图形着色，而选项 `legend=TRUE` 会显示这些残差的图例。
- en: For example, both
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，两者都
- en: '[PRE29]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: and
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 和
- en: '[PRE30]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: will produce the graph shown in figure 11.21\. The formula version gives you
    greater control over the selection and placement of variables in the graph.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 将生成图 11.21 中所示的图形。公式版本让你对图中变量选择和位置的控制能力更强。
- en: '![](Images/CH11_F21_Kabacoff3.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/CH11_F21_Kabacoff3.png)'
- en: Figure 11.21 Mosaic plot describing Titanic survivors by class, sex, and age
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.21 描述了根据舱位、性别和年龄划分的泰坦尼克号幸存者马赛克图
- en: A great deal of information is packed into this one picture. For example, as
    a person moves from crew to first class, the survival rate increases precipitously.
    Most children were in third and second class. Most females in first class survived,
    whereas only about half the females in third class survived. There were few females
    in the crew, causing the Survived labels (No, Yes at the bottom of the chart)
    to overlap for this group. Keep looking, and you’ll see many more interesting
    facts. Remember to look at the relative widths and heights of the rectangles.
    What else can you learn about that night?
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 这张图片中包含了大量的信息。例如，当一个人从经济舱升到头等舱时，生存率急剧上升。大多数孩子都在三等舱和二等舱。头等舱中的大多数女性都幸存了下来，而只有大约一半的三等舱女性幸存。船员中的女性很少，导致图表底部的“Survived”（否，是）标签在这个群体中重叠。继续观察，你会看到更多有趣的事实。记得要观察矩形的相对宽度和高度。你还能从那个夜晚学到什么？
- en: Extended mosaic plots add color and shading to represent the residuals from
    a fitted model. In this example, the blue shading indicates cross-classifications
    that occur more often than expected, assuming that survival is unrelated to class,
    gender, and age. Red shading indicates cross-classifications that occur less often
    than expected under the independence model. Be sure to run the example so that
    you can see the results in color. The graph indicates that more first-class women
    survived and more male crew members died than would be expected under an independence
    model. Fewer third-class men survived than would be expected if survival was independent
    of class, gender, and age. If you’d like to explore mosaic plots in greater detail,
    try running `example(mosaic)`.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展马赛克图通过颜色和阴影来表示拟合模型的残差。在这个例子中，蓝色阴影表示比预期更频繁发生的交叉分类，假设生存与舱位、性别和年龄无关。红色阴影表示在独立性模型下比预期更少发生的交叉分类。务必运行示例，以便你可以看到彩色结果。该图表明，与独立性模型相比，头等舱女性幸存者更多，男性船员死亡者更多。与舱位、性别和年龄独立的情况下相比，三等舱男性幸存者更少。如果你想更详细地探索马赛克图，尝试运行
    `example(mosaic)`。
- en: In this chapter, we considered a wide range of techniques for displaying relationships
    among two or more variables, including 2D and 3D scatter plots, scatter plot matrices,
    bubble plots, line plots, corrgrams, and mosaic plots. Some of these methods are
    standard techniques, where others are less well known.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们考虑了多种显示两个或多个变量之间关系的技巧，包括二维和三维散点图、散点图矩阵、气泡图、折线图、corrgrams 和马赛克图。其中一些方法是标准技术，而其他方法则不太为人所知。
- en: Taken together with methods for displaying univariate distributions (chapter
    6), exploring regression models (chapter 8), and visualizing group differences
    (chapter 9), you now have a comprehensive toolbox for visualizing and extracting
    meaning from your data (and fame and fortune is surely near at hand)! In later
    chapters, you’ll expand your skills with additional specialized techniques, including
    graphics for latent variable models (chapter 14), time series (chapter 15), clustered
    data (chapter 16), missing data (chapter 18), and techniques for creating graphs
    that are conditioned on one or more variables (chapter 19).
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 结合展示单变量分布（第6章）、探索回归模型（第8章）和可视化组间差异（第9章）的方法，你现在拥有了一个全面的工具箱，用于可视化和从你的数据中提取意义（而且
    fame and fortune is surely near at hand！）。在后面的章节中，你将通过额外的专业技巧来扩展你的技能，包括潜在变量模型的图形（第14章）、时间序列（第15章）、聚类数据（第16章）、缺失数据（第18章）以及创建基于一个或多个变量的图形的技术（第19章）。
- en: Summary
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Scatter plots and scatter plot matrices allow you to visualize relationships
    between quantitative variables two at a time. The plots can be enhanced with linear
    and loess fit lines showing trends.
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 散点图和散点图矩阵允许你一次可视化两个定量变量之间的关系。这些图可以通过显示趋势的线性拟合线和局部加权回归拟合线来增强。
- en: When you’re creating a scatter plot based on a large volume of data, methods
    that plot densities rather than points are particularly useful.
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你基于大量数据创建散点图时，那些绘制密度而不是点的绘图方法尤其有用。
- en: The relationships among three quantitative variables can be explored using 3D
    scatter plots or 2D bubble charts.
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用3D散点图或2D气泡图来探索三个定量变量之间的关系。
- en: Change over time can be described effectively with line charts.
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间变化可以通过折线图有效地描述。
- en: Large correlation matrices are difficult to understand in table form, but easily
    explored via corrgrams—visual plots of correlation matrices.
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大型相关系数矩阵以表格形式表示难以理解，但通过corrgrams——相关系数矩阵的视觉图示，则易于探索。
- en: The relationships between two or more categorical variables can be visualized
    with mosaic charts.
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用马赛克图来可视化两个或更多分类变量之间的关系。
