- en: 1 Understanding time series forecasting
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1 理解时间序列预测
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Introducing time series
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍时间序列
- en: Understanding the three main components of a time series
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解时间序列的三个主要组成部分
- en: The steps necessary for a successful forecasting project
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 成功预测项目所需的步骤
- en: How forecasting time series is different from other regression tasks
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测时间序列与其他回归任务的不同之处
- en: Time series exist in a variety of fields from meteorology to finance, econometrics,
    and marketing. By recording data and analyzing it, we can study time series to
    analyze industrial processes or track business metrics, such as sales or engagement.
    Also, with large amounts of data available, data scientists can apply their expertise
    to techniques for time series forecasting.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列存在于气象学、金融、计量经济学和市场营销等多个领域。通过记录和分析数据，我们可以研究时间序列，以分析工业流程或跟踪业务指标，例如销售额或参与度。此外，随着大量数据的可用性，数据科学家可以将他们的专业知识应用于时间序列预测的技术。
- en: You might have come across other courses, books, or articles on time series
    that implement their solutions in R, a programming language specifically made
    for statistical computing. Many forecasting techniques make use of statistical
    models, as you will learn in chapter 3 and onwards. Thus, a lot of work was done
    to develop packages to make time series analysis and forecasting seamless using
    R. However, most data scientists are required to be proficient with Python, as
    it is the most widespread language in the field of machine learning. In recent
    years, the community and large companies have developed powerful libraries that
    leverage Python to perform statistical computing and machine learning tasks, develop
    websites, and much more. While Python is far from being a perfect programming
    language, its versatility is a strong benefit to its users, as we can develop
    models, perform statistical tests, and possibly serve our models through an API
    or develop a web interface, all while using the same programming language. This
    book will show you how to implement both statistical learning techniques and machine
    learning techniques for time series forecasting using only Python.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能已经遇到过其他关于时间序列的课程、书籍或文章，它们使用R语言实现解决方案，R语言是一种专门为统计计算而设计的编程语言。许多预测技术都利用了统计模型，正如您将在第3章及以后章节中学习的那样。因此，为了使时间序列分析和预测在R语言中使用无缝，已经做了大量工作来开发包。然而，大多数数据科学家都需要精通Python，因为它是机器学习领域最广泛使用的语言。近年来，社区和大型公司开发了强大的库，利用Python执行统计计算和机器学习任务，开发网站等等。虽然Python远非一种完美的编程语言，但其多功能性对用户来说是一个强大的优势，因为我们可以在使用同一编程语言的同时开发模型、执行统计测试，并通过API提供模型服务或开发Web界面。本书将向您展示如何仅使用Python实现时间序列预测的统计学习技术和机器学习技术。
- en: This book will focus entirely on time series forecasting. You will first learn
    how to make simple forecasts that will serve as benchmarks for more complex models.
    Then we will use two statistical learning techniques, the moving average model
    and the autoregressive model, to make forecasts. These will serve as the foundation
    for the more complex modeling techniques we will cover that will allow us to account
    for non-stationarity, seasonality effects, and the impact of exogenous variables.
    Afterwards, we’ll switch from statistical learning techniques to deep learning
    methods, in order to forecast very large time series with a high dimensionality,
    a scenario in which statistical learning often does not perform as well as its
    deep learning counterpart.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将完全专注于时间序列预测。您将首先学习如何进行简单的预测，这些预测将作为更复杂模型的基准。然后我们将使用两种统计学习技术，即移动平均模型和自回归模型，来进行预测。这些将作为我们接下来要介绍的更复杂建模技术的基础，这些技术将使我们能够考虑非平稳性、季节性效应和外生变量的影响。之后，我们将从统计学习技术转向深度学习方法，以预测具有高维度的非常大的时间序列，在这种情况下，统计学习通常不如其深度学习对应者表现得好。
- en: For now, this chapter will examine the basic concepts of time series forecasting.
    I’ll start by defining time series so that you can recognize one. Then, we will
    move on and discuss the purpose of time series forecasting. Finally, you will
    learn why forecasting a time series is different from other regression problems,
    and thus why the subject deserves its own book.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，本章将探讨时间序列预测的基本概念。我将首先定义时间序列，以便您能够识别它。然后，我们将继续讨论时间序列预测的目的。最后，您将了解为什么预测时间序列与其他回归问题不同，以及为什么这个主题值得拥有自己的书籍。
- en: 1.1 Introducing time series
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1 介绍时间序列
- en: The first step in understanding and performing time series forecasting is learning
    what a time series is. In short, a *time series* is simply a set of data points
    ordered in time. Furthermore, the data is often equally spaced in time, meaning
    that equal intervals separate each data point. In simpler terms, the data can
    be recorded at every hour or every minute, or it could be averaged over every
    month or year. Some typical examples of time series include the closing value
    of a particular stock, a household’s electricity consumption, or the temperature
    outside.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 理解和执行时间序列预测的第一步是学习什么是时间序列。简而言之，*时间序列*就是一组按时间顺序排列的数据点。此外，数据通常在时间上等间隔分布，这意味着每个数据点之间有相等的间隔。用更简单的说法，数据可以每小时或每分钟记录，也可以每月或每年平均。一些典型的时间序列例子包括特定股票的收盘价、家庭的电力消耗或外面的温度。
- en: Time series
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列
- en: A time series is a set of data points ordered in time.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列是一组按时间顺序排列的数据点。
- en: The data is equally spaced in time, meaning that it was recorded at every hour,
    minute, month, or quarter. Typical examples of time series include the closing
    value of a stock, a household’s electricity consumption, or the temperature outside.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 数据在时间上等间隔分布，这意味着它每小时、每分钟、每月或每季度都被记录。典型的时间序列例子包括股票的收盘价、家庭的电力消耗或外面的温度。
- en: Let’s consider a dataset representing the quarterly earnings per share in US
    dollars of Johnson & Johnson stock from 1960 to 1980, shown in figure 1.1\. We
    will use this dataset often throughout this book, as it has many interesting properties
    that will help you learn advanced techniques for more complex forecasting problems.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑一个代表1960年至1980年Johnson & Johnson股票每股季度收益（美元）的数据集，如图1.1所示。我们将在这个书中经常使用这个数据集，因为它具有许多有趣的特性，这将帮助您学习更复杂预测问题的先进技术。
- en: As you can see, figure 1.1 clearly represents a time series. The data is indexed
    by time, as marked on the horizontal axis. Also, the data is equally spaced in
    time, since it was recorded at the end of every quarter of each year. We can see
    that the data has a trend, since the values are increasing over time. We also
    see the earnings going up and down over the course of each year, and the pattern
    repeats every year.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，图1.1清楚地表示了一个时间序列。数据按时间索引，如水平轴上所示。此外，数据在时间上等间隔分布，因为它是在每年每个季度的末尾记录的。我们可以看到数据有趋势，因为随着时间的推移，数值在增加。我们还看到收益在一年中的上下波动，并且这种模式每年都会重复。
- en: '![](../../OEBPS/Images/01-01.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-01.png)'
- en: Figure 1.1 Quarterly earnings of Johnson & Johnson in USD from 1960 to 1980
    showing a positive trend and a cyclical behavior
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1：1960年至1980年Johnson & Johnson的季度收益（美元）显示正向趋势和周期性行为
- en: 1.1.1 Components of a time series
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.1 时间序列的组成部分
- en: 'We can further our understanding of time series by looking at their three components:
    a trend, a seasonal component, and residuals. In fact, all time series can be
    decomposed into these three elements.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 通过观察时间序列的三个组成部分：趋势、季节性成分和残差，我们可以进一步理解时间序列。实际上，所有的时间序列都可以分解成这三个元素。
- en: Visualizing the components of a time series is known as decomposition. *Decomposition*
    is defined as a statistical task that separates a time series into its different
    components. We can visualize each individual component, which will help us identify
    the trend and seasonal pattern in the data, which is not always straightforward
    just by looking at a dataset.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化时间序列的组成部分称为分解。*分解*被定义为一种统计任务，它将时间序列分解为其不同的组成部分。我们可以可视化每个单独的组成部分，这将帮助我们识别数据中的趋势和季节性模式，而这并不总是通过查看数据集就能直接看出的。
- en: Let’s take a closer look at the decomposition of Johnson & Johnson quarterly
    earnings per share, shown in figure 1.2\. You can see how the Observed data was
    split into Trend, Seasonal, and Residuals. Let’s study each piece of the graph
    in more detail.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更仔细地看看图1.2中显示的Johnson & Johnson季度每股收益的分解。您可以看到观测数据是如何被分成趋势、季节性和残差的。让我们更详细地研究图表的每一部分。
- en: '![](../../OEBPS/Images/01-02.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-02.png)'
- en: Figure 1.2 Decomposition of quarterly earnings of Johnson & Johnson from 1960
    to 1980
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2：1960年至1980年Johnson & Johnson季度收益分解
- en: First, the top graph, labeled as Observed, simply shows the time series as it
    was recorded (figure 1.3). The *y*-axis displays the value of the quarterly earnings
    per share for Johnson & Johnson in US dollars, while the *x*-axis represents time.
    It is basically a recreation of figure 1.1, and it shows the result of combining
    the Trend, Seasonal, and Residuals graphs from figure 1.2.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，顶部的图表，标记为观测，简单地显示了记录的时间序列（图1.3）。*Y*轴显示的是强生公司每股季度收益的美元价值，而*x*轴代表时间。这基本上是图1.1的再现，它显示了将图1.2中的趋势、季节性和残差图表组合的结果。
- en: '![](../../OEBPS/Images/01-03.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-03.png)'
- en: Figure 1.3 Focusing on the Observed plot
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3 关注观测图
- en: Then we have the trend component, as shown in figure 1.4\. Again, keep in mind
    that the *y*-axis represents the value, while the *x*-axis still refers to time.
    The trend is defined as the slow-moving changes in a time series. We can see that
    it starts out flat and then steeply goes up, meaning that we have an increasing,
    or positive, trend in our data. The trend component is sometimes referred to as
    the *level*. We can think of the trend component as trying to draw a line through
    most of the data points to show the general direction of a time series.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们看到了图1.4中的趋势成分。再次提醒，*Y*轴表示值，而*X*轴仍然指的是时间。趋势被定义为时间序列中的缓慢变化。我们可以看到，它最初是平的，然后急剧上升，这意味着我们的数据中存在增加的或正的趋势。趋势成分有时被称为*水平*。我们可以将趋势成分视为试图通过大多数数据点来绘制一条线，以显示时间序列的一般方向。
- en: '![](../../OEBPS/Images/01-04.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-04.png)'
- en: Figure 1.4 Focusing on the trend component. We have a trend in our series, since
    the component is not flat. It indicates that we have increasing values over time.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4 关注趋势成分。在我们的序列中存在趋势，因为成分不是平的。这表明随着时间的推移，我们的值在增加。
- en: Next we see the seasonal component in figure 1.5\. The seasonal component captures
    the seasonal variation, which is a cycle that occurs over a fixed period of time.
    We can see that over the course of a year, or four quarters, the earnings per
    share start low, increase, and decrease again at the end of the year.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们在图1.5中看到季节性成分。季节性成分捕捉到季节性变化，这是一个在固定时间段内发生的周期。我们可以看到，在一年或四个季度内，每股收益从低到高，然后在年底再次下降。
- en: '![](../../OEBPS/Images/01-05.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-05.png)'
- en: Figure 1.5 Focusing on the seasonal component. Here we have periodic fluctuations
    in our time series, which indicates that earnings go up and down every year.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5 关注季节性成分。在这里，我们的时间序列存在周期性波动，这表明收益每年都会上下波动。
- en: Notice how the *y*-axis shows negative values. Does this mean that the earnings
    per share are negative? Clearly, that cannot be, since our dataset strictly has
    positive values. Therefore, we can say that the seasonal component shows how we
    deviate from the trend. Sometimes we have a positive deviation, and we get a peak
    in the Observed graph. Other times, we have a negative deviation, and we see a
    trough in Observed.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 注意*Y*轴显示的是负值。这难道意味着每股收益是负数吗？显然不是，因为我们的数据集严格来说都是正值。因此，我们可以说季节性成分显示了我们是如何偏离趋势的。有时我们会有正值偏离，在观测图中会出现峰值。其他时候，我们会有负值偏离，在观测图中会看到谷值。
- en: Finally, the last graph in figure 1.2 shows the residuals, which is what cannot
    be explained by either the trend or the seasonal components. We can think of the
    residuals as adding the Trend and Seasonal graphs together and comparing the value
    at each point in time to the Observed graph. For certain points, we might get
    the exact same value as in Observed, in which case the residual will be zero.
    In other cases, the value is different from the one in Observed, so the Residuals
    graph shows what value must be added to Trend and Seasonal in order to adjust
    the result and get the same value as in Observed. Residuals usually correspond
    to random errors, also termed *white noise*, as we will discuss in chapter 3\.
    They represent information that we cannot model or predict, since it is completely
    random, as shown in figure 1.6.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，图1.2中的最后一个图表显示了残差，这是趋势或季节性成分都无法解释的部分。我们可以将残差视为将趋势和季节性图表相加，并将每个时间点的值与观测图进行比较。对于某些点，我们可能会得到与观测图完全相同的值，在这种情况下，残差将为零。在其他情况下，值与观测图中的值不同，因此残差图显示了必须添加到趋势和季节性中才能调整结果并得到与观测图相同的值。残差通常对应于随机误差，也称为*白噪声*，我们将在第3章中讨论。它们代表我们无法建模或预测的信息，因为它是完全随机的，如图1.6所示。
- en: '![](../../OEBPS/Images/01-06.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图1.6](../../OEBPS/Images/01-06.png)'
- en: Figure 1.6 Focusing on the residuals. The residuals are what cannot be explained
    by the trend and seasonal components.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 关注残差。残差是无法由趋势和季节性成分解释的部分。
- en: Time series decomposition
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列分解
- en: 'Time series decomposition is a process by which we separate a time series into
    its components: trend, seasonality, and residuals.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列分解是一个将时间序列分解为其组成部分的过程：趋势、季节性和残差。
- en: The trend represents the slow-moving changes in a time series. It is responsible
    for making the series gradually increase or decrease over time.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 趋势代表时间序列中的缓慢变化。它负责使序列随时间逐渐增加或减少。
- en: The seasonality component represents the seasonal pattern in the series. The
    cycles occur repeatedly over a fixed period of time.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 季节性成分表示序列中的季节性模式。周期在固定的时间段内反复发生。
- en: The residuals represent the behavior that cannot be explained by the trend and
    seasonality components. They correspond to random errors, also termed white noise.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 残差代表无法由趋势和季节性成分解释的行为。它们对应于随机误差，也称为白噪声。
- en: Already we can intuitively see how each component affects our work when forecasting.
    If a time series exposes a certain trend, then we’ll expect it to continue in
    the future. Similarly, if we observe a strong seasonality effect, this is likely
    going to continue, and our forecasts must reflect that. Later in the book, you’ll
    see how to account for these components and include them in your models to forecast
    more complex time series.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行预测时，我们已能直观地看到每个组成部分是如何影响我们的工作的。如果一个时间序列显示出某种趋势，那么我们预计它将在未来继续。同样，如果我们观察到强烈的季节性影响，这很可能会持续下去，我们的预测必须反映这一点。在本书的后面部分，您将看到如何考虑这些组成部分并将它们包含在您的模型中，以预测更复杂的时间序列。
- en: 1.2 Bird’s-eye view of time series forecasting
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2 时间序列预测的鸟瞰图
- en: '*Forecasting* is predicting the future using historical data and knowledge
    of future events that might affect our forecasts. This definition is full of promises
    and, as data scientists, we are often very eager to start forecasting by using
    our scientific knowledge to showcase an incredible model with a near-perfect forecast
    accuracy. However, there are important steps that must be covered before reaching
    the point of forecasting.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '*预测*是使用历史数据和未来可能影响我们预测的知识来预测未来。这个定义充满了承诺，作为数据科学家，我们常常非常渴望开始预测，利用我们的科学知识展示一个几乎完美的预测准确性的惊人模型。然而，在达到预测点之前，还有一些重要的步骤必须完成。'
- en: Figure 1.7 is a simplified diagram of what a complete forecasting project might
    look like in a professional setting. Note that these steps are not universal,
    and they may or may not be followed, depending on the organization and its maturity.
    These steps are nonetheless essential to ensure good cohesion between the data
    team and the business team, hence providing business value and avoiding friction
    and frustration between the teams.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7是一个在专业环境中一个完整的预测项目可能看起来像的简化图。请注意，这些步骤并非普遍适用，它们可能或可能不被遵循，这取决于组织及其成熟度。尽管如此，这些步骤对于确保数据团队和业务团队之间良好的协同作用至关重要，从而提供商业价值，避免团队之间的摩擦和挫败感。
- en: '![](../../OEBPS/Images/01-07.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图1.7](../../OEBPS/Images/01-07.png)'
- en: Figure 1.7 Forecasting project roadmap. The first step is naturally to set a
    goal that justifies the need for forecasting. Then you must determine what needs
    to be forecast in order to achieve that goal. Then you set the horizon of the
    forecast. Once that’s done, you can gather the data and develop a forecasting
    model. Then the model is deployed to production, its performance is monitored,
    and new data is collected in order to retrain the forecasting model and make sure
    it is still relevant.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7 预测项目路线图。第一步自然是设定一个目标，以证明预测的必要性。然后你必须确定为了实现这个目标需要预测什么。然后你设定预测的范围。一旦完成，你就可以收集数据并开发一个预测模型。然后模型部署到生产环境中，其性能得到监控，并收集新的数据以重新训练预测模型，确保其仍然相关。
- en: Let’s dive into a scenario that covers each step of a forecasting project roadmap
    in detail. Imagine you are planning a one-week camping trip one month from now,
    and you want to know which sleeping bag to bring with you so you can sleep comfortably
    at night.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入一个场景，详细涵盖预测项目路线图中的每个步骤。想象一下，你计划一个月后进行一次为期一周的露营旅行，你想要知道带哪个睡袋，以便你可以在夜间舒适地睡觉。
- en: 1.2.1 Setting a goal
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.1 设定目标
- en: 'The very first step in any project roadmap is to set a goal. Here it is explicit
    in the scenario: you want to know which sleeping bag to bring to sleep comfortably
    at night. If the nights will be cold, a warm sleeping bag is the best choice.
    Of course, if nights are expected to be warm, then a light sleeping bag would
    be the better option.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 任何项目路线图的第一步是设定目标。在这里，场景中明确指出：你想要知道要携带哪种睡袋以便在夜晚舒适地入睡。如果夜晚会很冷，暖和的睡袋是最好的选择。当然，如果预计夜晚会温暖，那么轻便的睡袋会是更好的选择。
- en: 1.2.2 Determining what must be forecast to achieve your goal
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.2 确定需要预测的内容以实现目标
- en: Then you move to determining what must be forecast in order for you to decide
    which sleeping bag to bring. In this case, you need to predict the temperature
    at night. To simplify things, let’s consider that predicting the minimum temperature
    is sufficient to make a decision, and that the minimum temperature occurs at night.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 然后你需要确定必须预测哪些内容，以便你决定要携带哪种睡袋。在这种情况下，你需要预测夜晚的温度。为了简化问题，让我们考虑预测最低温度就足以做出决定，并且最低温度出现在夜晚。
- en: 1.2.3 Setting the horizon of the forecast
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.3 设置预测的范围
- en: Now you can set the horizon of your forecast. In this case, your camping trip
    is one month from now, and it will last for one week. Therefore, you have a horizon
    of one week, since you are only interested in predicting the minimum temperature
    during the camping trip.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以设置预测的范围。在这种情况下，你的露营之旅将在一个月后开始，并将持续一周。因此，你的预测范围是一周，因为你只对预测露营期间的最小温度感兴趣。
- en: 1.2.4 Gathering the data
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.4 收集数据
- en: You can now start gathering your data. For example, you could collect historical
    daily minimum temperature data. You could also gather data on possible factors
    that can influence temperature, such as humidity and wind speed.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以开始收集数据了。例如，你可以收集历史每日最低温度数据。你也可以收集可能影响温度的因素的数据，例如湿度和风速。
- en: This is when the question of how much data is enough data arises. Ideally, you
    would collect more than 1 year of data. That way, you could determine if there
    is a yearly seasonal pattern or a trend. In the case of temperature, you can of
    course expect some seasonal pattern over the year, since different seasons bring
    different minimum temperatures.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这时，关于多少数据足够的问题就出现了。理想情况下，你会收集超过一年的数据。这样，你可以确定是否存在年度季节性模式或趋势。在温度的情况下，你当然可以期待一年中存在一些季节性模式，因为不同的季节会带来不同的最低温度。
- en: However, 1 year of data is not the ultimate answer to how much data is sufficient.
    It highly depends on the frequency of the forecasts. In this case, you will be
    creating daily forecasts, so 1 year of data should be enough.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，一年的数据并不是关于多少数据足够的最終答案。它高度依赖于预测的频率。在这种情况下，你将创建每日预测，因此一年的数据应该足够。
- en: If you wanted to create hourly forecasts, a few months of training data would
    be enough, as it would contain a lot of data points. If you were creating monthly
    or yearly forecasts, you would need a much larger historical period to have enough
    data points to train with.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要创建每小时预测，几个月的训练数据就足够了，因为它会包含大量的数据点。如果你正在创建月度或年度预测，你需要一个更长的时间段的历史数据，以便有足够的数据点进行训练。
- en: In the end, there is no clear answer regarding the quantity of data required
    to train a model. Determining this is part of the experimentation process of building
    a model, assessing its performance, and testing whether more data improves the
    model’s performance.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，关于需要多少数据来训练模型并没有明确的答案。确定这一点是构建模型、评估其性能以及测试更多数据是否可以提高模型性能的实验过程的一部分。
- en: 1.2.5 Developing a forecasting model
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.5 开发预测模型
- en: With your historical data in hand, you are ready to develop a forecasting model.
    This part of the project roadmap is the focus of this entire book. This is when
    you get to study the data and determine whether there is a trend or a seasonal
    pattern.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有你的历史数据后，你就可以开始开发预测模型了。这个项目路线图的部分是本书的重点。这是你研究数据并确定是否存在趋势或季节性模式的时候。
- en: If you observe seasonality, then a SARIMA model would be relevant, because this
    model uses seasonal effects to produce forecasts. If you have information on wind
    speed and humidity, you could take that into account using the SARIMAX model,
    because you can feed it with information from exogenous variables, such as wind
    speed and humidity. We will explore these models in detail in chapters 8 and 9.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你观察到季节性，那么SARIMA模型就相关了，因为这个模型使用季节性效应来产生预测。如果你有风速和湿度的信息，你可以使用SARIMAX模型来考虑这些因素，因为你可以向它提供来自外生变量的信息，如风速和湿度。我们将在第8章和第9章中详细探讨这些模型。
- en: If you managed to collect a large amount of data, such as the daily minimum
    temperature of the last 20 years, you could use neural networks to leverage this
    very large amount of training data. Unlike statistical learning methods, deep
    learning tends to produce better models, as more data is used for training.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你成功收集了大量数据，例如过去20年的每日最低温度，你可以使用神经网络来利用这大量训练数据。与统计学习方法不同，深度学习往往能产生更好的模型，因为使用了更多数据进行训练。
- en: Whichever model you develop, you will use part of the training data as a test
    set to evaluate your model’s performance. The test set will always be the most
    recent data points, and it must be representative of the forecasting horizon.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你开发哪种模型，你都会使用部分训练数据作为测试集来评估你的模型性能。测试集将始终是最新的数据点，并且它必须代表预测范围。
- en: In this case, since your horizon is one week, you can remove the last seven
    data points from your training set to place them in a test set. Then, when each
    model is trained, you can produce one-week forecasts and compare the results to
    the test set. The model’s performance can be assessed by computing an error metric,
    such as the mean squared error (MSE). This is a way to evaluate how far your predictions
    are from the real values. The model with the lowest MSE will be your best-performing
    model, and it is the one that will move on to the next step.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，由于你的预测范围是一周，你可以从训练集中移除最后七个数据点，将它们放入测试集中。然后，当每个模型被训练时，你可以产生一周的预测，并将结果与测试集进行比较。可以通过计算误差指标，如均方误差（MSE）来评估模型的表现。这是评估你的预测与真实值之间距离的一种方法。均方误差最低的模型将是表现最好的模型，它将进入下一步。
- en: 1.2.6 Deploying to production
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.6 部署到生产环境
- en: Once you have your champion model, you must deploy it to production. This means
    that your model can take in data and return a prediction for the minimum daily
    temperature for the next 7 days. There are many ways to deploy a model to production,
    and this could be the subject of an entire book. Your model could be served as
    an API or integrated in a web application, or you could define your own Excel
    function to run your model. Ultimately, your model is considered deployed when
    you can feed in data and have forecasts returned without any manual manipulation
    of the data. At this point, your model can be monitored.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你有了最佳模型，你必须将其部署到生产环境。这意味着你的模型可以接收数据并返回未来7天的最低日温度预测。部署模型到生产环境有许多方法，这可能是整本书的主题。你的模型可以作为API提供服务，或集成到Web应用程序中，或者你可以定义自己的Excel函数来运行你的模型。最终，当你可以输入数据并获得预测，而不需要任何手动数据操作时，你的模型就被认为是部署了。在这个阶段，你的模型可以被监控。
- en: 1.2.7 Monitoring
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.7 监控
- en: Since the camping trip is 1 month from now, you can see how well your model
    performs. Every day, you can compare your model’s forecast to the actual minimum
    temperature recorded for the day. This allows you to determine the quality of
    the model’s forecasts.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 由于露营之旅还有1个月，你可以看到你的模型表现如何。每天，你可以将你的模型预测与当天记录的实际最低温度进行比较。这让你能够确定模型预测的质量。
- en: You can also look for unexpected events. For example, a heat wave can arise,
    degrading the quality of your model’s forecasts. Closely monitoring your model
    and current events allows you to determine if the unexpected event results from
    a temporary situation, or if it will last for the next 2 months, in which case
    it could impact your decision for the camping trip.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以寻找意外事件。例如，热浪可能会出现，降低你模型预测的质量。密切监控你的模型和当前事件，可以帮助你确定意外事件是由于暂时情况引起的，还是将持续2个月，在这种情况下，它可能会影响你的露营之旅决策。
- en: 1.2.8 Collecting new data
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.8 收集新数据
- en: By monitoring your model, you necessarily collect new data as you compare the
    model’s forecasts to the observed minimum temperature for the day. This new, more
    recent, data can then be used in retraining your model. That way, you have up-to-date
    data you can use to forecast the minimum temperature for the next 7 days.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 通过监控您的模型，您在将模型的预测与当天的观测最低温度进行比较时，必然会收集到新的数据。然后，这些最新、最近的数据可以用于重新训练您的模型。这样，您就有了一组最新的数据，可以用来预测未来7天的最低温度。
- en: This cycle is repeated over the next month until you reach the day of the camping
    trip, as shown in figure 1.8\. By that point, you will have made many forecasts,
    assessed their quality against newly observed data, and retrained your model with
    new daily minimum temperatures as you recorded them. That way, you make sure that
    your model is still performant and uses relevant data to forecast the temperature
    for your camping trip.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这个周期将在下一个月内重复，直到你达到露营旅行的日子，如图1.8所示。到那时，你将已经做出了许多预测，根据新观察到的数据评估了它们的质量，并在记录新的每日最低温度时重新训练了你的模型。这样，你确保你的模型仍然表现良好，并使用相关数据来预测你的露营旅行温度。
- en: '![](../../OEBPS/Images/01-08.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-08.png)'
- en: Figure 1.8 Visualizing the production loop. Once the model is in production,
    you enter a cycle where you monitor it, collect new data, and use that data to
    adjust the forecasting model before deploying it again.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8 可视化生产循环。一旦模型投入生产，你将进入一个周期，在这个周期中，你监控它，收集新数据，并使用这些数据在再次部署之前调整预测模型。
- en: Finally, based on your model’s predictions, you can decide which sleeping bag
    to bring with you.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，根据您的模型预测，您可以决定携带哪种睡袋。
- en: 1.3 How time series forecasting is different from other regression tasks
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.3 时间序列预测与其他回归任务的不同之处
- en: 'You probably have encountered regression tasks where you must predict some
    continuous target given a certain set of features. At first glance, time series
    forecasting seems like a typical regression problem: we have some historical data,
    and we wish to build a mathematical expression that will express future values
    as a function of past values. However, there are some key differences between
    time series forecasting and regression for time-independent scenarios that deserve
    to be addressed before we look at our very first forecasting technique.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能遇到过回归任务，在这些任务中，您必须根据一组特定的特征预测某些连续的目标。乍一看，时间序列预测似乎是一个典型的回归问题：我们有一些历史数据，我们希望构建一个数学表达式，将未来的值表示为过去值的函数。然而，在时间序列预测和时间独立场景的回归之间有一些关键的区别，在我们查看我们的第一个预测技术之前，这些问题值得解决。
- en: 1.3.1 Time series have an order
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.1 时间序列具有顺序
- en: The first concept to keep in mind is that time series have an order, and we
    cannot change that order when modeling. In time series forecasting, we express
    future values as a function of past values. Therefore, we must keep the data in
    order, so as to not violate this relationship.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 需要记住的第一个概念是时间序列具有顺序，我们在建模时不能改变这个顺序。在时间序列预测中，我们表达未来的值作为过去值的函数。因此，我们必须保持数据的顺序，以避免违反这种关系。
- en: Also, it makes sense to keep the data in order because your model can only use
    information from the past up until the present—it will not know what will be observed
    in the future. Recall your camping trip. If you want to predict the temperature
    for Tuesday, you cannot possibly use the information from Wednesday, since it
    is in the future from the model’s point of view. You would only be able to use
    the data from Monday and before. That is why the order of the data must remain
    the same throughout the modeling process.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，保持数据顺序是有意义的，因为您的模型只能使用过去直到现在的信息——它将不知道未来将观察到什么。回想一下你的露营旅行。如果你想预测星期二的温度，你不可能使用星期三的信息，因为从模型的角度来看，它是在未来的。你只能使用星期一及以前的数据。这就是为什么在整个建模过程中，数据的顺序必须保持一致。
- en: Other regression tasks in machine learning often do not have an order. For example,
    if you are tasked to predict revenue based on ad spend, it does not matter when
    a certain amount was spent on ads. Instead, you simply want to relate the amount
    of ad spend to the revenue. In fact, you might even randomly shuffle the data
    to make your model more robust. Here the regression task is to simply derive a
    function such that given an amount on ad spend, an estimate of revenue is returned.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习中的其他回归任务通常没有顺序。例如，如果你被要求根据广告支出预测收入，那么在何时支出一定金额的广告并不重要。相反，你只是想将广告支出的金额与收入联系起来。实际上，你甚至可能随机打乱数据以使你的模型更稳健。这里的回归任务是简单地推导出一个函数，给定广告支出的金额，返回收入的一个估计值。
- en: On the other hand, time series are indexed by time, and that order must be kept.
    Otherwise, you would be training your model with future information that it would
    not have at prediction time. This is called *look-ahead bias* in more formal terms.
    The resulting model would therefore not be reliable and would most probably perform
    poorly when you make future forecasts.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，时序数据是按时间顺序索引的，这种顺序必须保持。否则，你将使用预测时模型所不具备的未来信息来训练模型。这在更正式的术语中被称为*前瞻偏差*。因此，生成的模型将不可靠，并且在你进行未来预测时很可能会表现不佳。
- en: 1.3.2 Time series sometimes do not have features
  id: totrans-86
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.2 时序数据有时没有特征
- en: It is possible to forecast time series without the use of features other than
    the time series itself.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 没有使用除了时序本身以外的特征，也可以预测时序。
- en: As data scientists, we are used to having datasets with many columns, each representing
    a potential predictor for our target. For example, consider the task of predicting
    revenue based on ad spend, where the revenue is the target variable. As features,
    we could have the amount spent on Google ads, Facebook ads, and television ads.
    Using these three features, we would build a regression model to estimate revenue.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 作为数据科学家，我们习惯于拥有具有许多列的数据集，每一列都代表我们目标变量的潜在预测因子。例如，考虑基于广告支出预测收入的任务，其中收入是目标变量。作为特征，我们可以有在谷歌广告、Facebook广告和电视广告上的支出金额。使用这三个特征，我们将构建一个回归模型来估计收入。
- en: However, with time series, it is quite common to be given a simple dataset with
    a time column and a value at that point in time. Without any other features, we
    must learn ways of using past values of the time series to forecast future values.
    This is when the moving average model (chapter 4) or autoregressive model (chapter
    5) come into play, as they are ways to express future values as a function of
    past values. These models are foundational to the more complex models that then
    allow you to consider seasonal patterns and trends in time series. Starting in
    chapter 6, we will gradually build on those basic models to forecast more complex
    time series.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，对于时序数据，通常只给出一个包含时间列和该时间点的值的简单数据集。在没有其他特征的情况下，我们必须学习使用时序的过去值来预测未来值的方法。这就是移动平均模型（第4章）或自回归模型（第5章）发挥作用的时候，因为它们是将未来值表达为过去值的函数的方法。这些模型是更复杂模型的基础，这些模型允许你考虑时序中的季节性模式和趋势。从第6章开始，我们将逐步构建这些基本模型来预测更复杂的时序数据。
- en: 1.4 Next steps
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.4 下一步
- en: This book will cover different forecasting techniques in detail. We’ll start
    with some very basic methods, such as the moving average model and autoregressive
    model, and we will gradually account for more factors in order to forecast time
    series with trends and seasonal patterns using the ARIMA, SARIMA, and SARIMAX
    models. We will also work with time series with high dimensionality, which will
    require us to use deep learning techniques for sequential data. Therefore, we
    will have to build neural networks using CNN (convolutional neural network) and
    LSTM (long short-term memory). Finally, you will learn how to automate the work
    of forecasting time series. As mentioned, all implementations throughout the book
    will be done in Python.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将详细介绍不同的预测技术。我们将从一些非常基础的方法开始，例如移动平均模型和自回归模型，然后我们将逐步考虑更多因素，以便使用ARIMA、SARIMA和SARIMAX模型来预测具有趋势和季节性模式的时序数据。我们还将处理高维时序数据，这将需要我们使用深度学习技术来处理序列数据。因此，我们将不得不使用CNN（卷积神经网络）和LSTM（长短期记忆）来构建神经网络。最后，你将学习如何自动化预测时序的工作。正如之前提到的，本书中的所有实现都将使用Python完成。
- en: Now that you have learned what a time series is and how forecasting will be
    different than any traditional regression tasks you might have seen before, we
    are ready to move on and start forecasting. However, our first attempt at forecasting
    will focus on naive methods that will serve as baseline models.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了什么是时间序列以及预测将如何不同于你之前可能看到的任何传统回归任务，我们准备继续前进并开始预测。然而，我们第一次尝试预测将专注于作为基线模型的朴素方法。
- en: Summary
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: A time series is a set of data points ordered in time.
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间序列是一组按时间顺序排列的数据点。
- en: Examples of time series are the closing price of a stock or the temperature
    outside.
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间序列的例子包括股票的收盘价或外界的温度。
- en: 'Time series can be decomposed into three components: a trend, a seasonal component,
    and residuals.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间序列可以被分解为三个组成部分：趋势、季节性成分和残差。
- en: It is important to have a goal when forecasting and to monitor the model once
    it’s deployed. This will ensure the success and longevity of the project.
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在进行预测时设定一个目标很重要，一旦模型部署后要对其进行监控。这将确保项目的成功和持久性。
- en: Never change the order of a time series when modeling. Shuffling the data is
    not allowed.
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在建模时，切勿改变时间序列的顺序。不允许对数据进行洗牌。
