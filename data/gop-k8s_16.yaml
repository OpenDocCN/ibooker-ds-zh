- en: appendix A. Setting up a test Kubernetes cluster
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录A. 设置测试Kubernetes集群
- en: A full production-capable Kubernetes cluster is a very complex system consisting
    of multiple components that must be installed and configured based on your particular
    needs. How to deploy and maintain Kubernetes in production goes way beyond the
    focus of this book and is covered elsewhere.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 一个完全具备生产能力的Kubernetes集群是一个非常复杂的系统，由多个组件组成，这些组件必须根据你的特定需求进行安装和配置。如何在生产中部署和维护Kubernetes远远超出了本书的焦点，并在其他地方进行了介绍。
- en: Luckily for us, there are several projects that handle the configuration complexity
    and allow running Kubernetes locally with a single CLI command. Running Kubernetes
    locally on your laptop is useful to get your hands dirty with Kubernetes and prepare
    you for completing the exercises in this book. To the extent possible, all the
    exercises will utilize a cluster running on your laptop using an application called
    minikube. However, if you prefer to use your own cluster running on a cloud provider
    (or even on premises), the exercises will work there as well.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，有几个项目可以处理配置复杂性，并允许使用单个CLI命令在本地运行Kubernetes。在笔记本电脑上本地运行Kubernetes对于熟悉Kubernetes并为你完成本书中的练习做好准备非常有用。尽可能多的练习都将利用在笔记本电脑上运行的minikube集群。然而，如果你更喜欢使用自己运行的集群（无论是在云服务提供商上还是在本地），练习同样可以在那里进行。
- en: minikube Minikube is an official tool maintained by the Kubernetes community
    to create a single-node Kubernetes cluster inside a VM on your laptop. It supports
    macOS, Linux, and Windows. In addition to actually running the cluster, minikube
    provides features that simplify accessing services inside Kubernetes, volume management,
    and much more.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: minikube Minikube是Kubernetes社区维护的官方工具，可以在你的笔记本电脑上的虚拟机内部创建单个节点的Kubernetes集群。它支持macOS、Linux和Windows。除了实际运行集群外，minikube还提供简化访问Kubernetes内部服务、卷管理等功能。
- en: Other projects you can consider using are
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以考虑使用的其他项目
- en: '*Docker for desktop*—If you are using Docker on your laptop, you might already
    have Kubernetes installed! Starting with version 18.6.0, both Windows and Docker
    Desktop for Mac come with bundled Kubernetes binaries and developer productivity
    features.'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Docker for desktop*—如果你在你的笔记本电脑上使用Docker，你可能已经安装了Kubernetes！从版本18.6.0开始，Windows和Docker
    Desktop for Mac都自带了捆绑的Kubernetes二进制文件和开发者生产力功能。'
- en: '*K3s*—As the name implies, K3s is a lightweight Kubernetes deployment. According
    to its authors, K3s is five less than eight, so K8s minus five is K3s. Besides
    the funny name, K3s is indeed extremely lightweight, fast, and a great choice
    if you need to run Kubernetes as part of a CI job or on hardware with limited
    resources. Installation instructions are available at [https://k3s.io.](https://k3s.io/)'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*K3s*—正如其名所示，K3s是一个轻量级的Kubernetes部署。根据其作者的描述，K3s比八少五，所以K8s减去五就是K3s。除了有趣的名字外，K3s确实非常轻量级、快速，如果你需要将Kubernetes作为CI作业的一部分或在资源有限的硬件上运行，它是一个很好的选择。安装说明可在[https://k3s.io.](https://k3s.io/)找到。'
- en: '*Kind*—Another tool developed by the Kubernetes community, kind was developed
    by maintainers for Kubernetes v1.11+ conformance testing. Installation instructions
    are available at [https://kind.sigs.k8s.io/.](https://kind.sigs.k8s.io/)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Kind*—另一个由Kubernetes社区开发的工具，kind是为Kubernetes v1.11+兼容性测试而开发的。安装说明可在[https://kind.sigs.k8s.io/](https://kind.sigs.k8s.io/)找到。'
- en: While these tools simplify Kubernetes deployment to a single CLI command and
    provide great experience, minikube is still the safest choice to get started with
    Kubernetes. With all-platforms support, thanks to virtualization, and a great
    set of developer productivity features, this is a great tool for both beginners
    and experts. All exercises and samples in this book rely on minikube.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些工具简化了Kubernetes的部署到一个CLI命令，并提供了很好的体验，但minikube仍然是开始使用Kubernetes的最安全选择。得益于虚拟化支持的所有平台，以及一套出色的开发者生产力功能，这是一个适合初学者和专家的出色工具。本书中的所有练习和示例都依赖于minikube。
- en: A.1 Prerequisites for working with Kubernetes
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 与Kubernetes一起工作的先决条件
- en: The following tools and utilities are needed to work with Kubernetes.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 与Kubernetes一起工作所需的工具和实用程序。
- en: In addition to Kubernetes itself, you need to install kubectl. Kubectl is a
    command-line utility that allows interacting with the Kubernetes control plane
    and doing virtually anything with Kubernetes.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 除了Kubernetes本身，你还需要安装kubectl。kubectl是一个命令行工具，允许与Kubernetes控制平面交互，并几乎可以执行与Kubernetes相关的任何操作。
- en: A.1.1 Configure kubectl
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1.1 配置kubectl
- en: 'To get started, go ahead and install minikube as described at [https://kubernetes.io/docs/tasks/tools/install-kubectl/](https://kubernetes.io/docs/tasks/tools/install-kubectl/).
    If you are a macOS or Linux user, you can complete the installation process in
    one step using the Homebrew package manager along with the following command:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请按照 [https://kubernetes.io/docs/tasks/tools/install-kubectl/](https://kubernetes.io/docs/tasks/tools/install-kubectl/)
    中的说明安装 minikube。如果你是 macOS 或 Linux 用户，你可以使用 Homebrew 软件包管理器和以下命令一步完成安装过程：
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Homebrew Homebrew is a free and open source software package management system
    that simplifies the installation of software on Apple’s macOS operating system
    and Linux. More information is available at [https://brew.sh/.](https://brew.sh/)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Homebrew Homebrew 是一个免费的开源软件包管理系统，它简化了在 Apple 的 macOS 操作系统和 Linux 上的软件安装。更多信息可在
    [https://brew.sh/](https://brew.sh/) 找到。
- en: A.2 Installing minikube and creating a cluster
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.2 安装 minikube 和创建集群
- en: Minikube is an application that allows you to run a single-node Kubernetes cluster
    on your desktop or laptop machine. Installation instructions are available at
    [https://kubernetes.io/docs/tasks/tools/install-minikube/.](https://kubernetes.io/docs/tasks/tools/install-minikube/)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Minikube 是一个应用程序，允许你在桌面或笔记本电脑上运行单个节点的 Kubernetes 集群。安装说明可在 [https://kubernetes.io/docs/tasks/tools/install-minikube/](https://kubernetes.io/docs/tasks/tools/install-minikube/)
    找到。
- en: Most (but not all) exercises in this book can be completed using a local minikube
    cluster.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的大多数（但并非全部）练习都可以使用本地 minikube 集群完成。
- en: A.2.1 Configuring minikube
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2.1 配置 minikube
- en: 'The next step is to install and start the minikube cluster. The installation
    process is described at [https://minikube.sigs.k8s.io/docs/start/](https://minikube.sigs.k8s.io/docs/start/).
    The minikube package is also available via Homebrew:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是安装并启动 minikube 集群。安装过程在 [https://minikube.sigs.k8s.io/docs/start/](https://minikube.sigs.k8s.io/docs/start/)
    中描述。minikube 软件包也通过 Homebrew 提供：
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'If everything goes smoothly so far, we are ready to start minikube and configure
    our first deployment:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果到目前为止一切顺利，我们就准备好启动 minikube 并配置我们的第一个部署：
- en: '[PRE2]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: A.3 Creating a GKE cluster in GCP
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.3 在 GCP 中创建 GKE 集群
- en: 'The Google Cloud Platform (GCP) offers the Google Kubernetes Engine (GKE) as
    part of its free tier:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Platform (GCP) 提供了 Google Kubernetes Engine (GKE) 作为其免费层的一部分：
- en: '[https://cloud.google.com/free/](https://cloud.google.com/free/)'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://cloud.google.com/free/](https://cloud.google.com/free/)'
- en: 'You can create a Kubernetes GKE cluster to run the exercises in this book:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以创建一个 Kubernetes GKE 集群来运行本书中的练习：
- en: '[https://cloud.google.com/kubernetes-engine/](https://cloud.google.com/kubernetes-engine/)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://cloud.google.com/kubernetes-engine/](https://cloud.google.com/kubernetes-engine/)'
- en: Keep in mind that while GKE itself is free, you may be charged for other GCP
    resources that are created by Kubernetes. It is recommended that you delete your
    test cluster after completing each exercise in order to avoid unexpected costs.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，尽管 GKE 本身是免费的，但你可能会因为 Kubernetes 创建的其他 GCP 资源而被收费。建议你在完成每个练习后删除测试集群，以避免意外费用。
- en: A.4 Creating an EKS cluster in AWS
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.4 在 AWS 中创建 EKS 集群
- en: Amazon Web Services (AWS) offers a managed Kubernetes service called Elastic
    Kubernetes Service (EKS). You can create a free AWS account and create an EKS
    cluster to run the exercises in this book. However, while relatively inexpensive,
    EKS is not a free service (it costs $0.20/hour at the time of this writing) and
    you may also be charged for other resources created by Kubernetes. It is recommended
    that you delete your test cluster after completing each exercise in order to avoid
    unexpected costs.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon Web Services (AWS) 提供了一个名为 Elastic Kubernetes Service (EKS) 的托管 Kubernetes
    服务。你可以创建一个免费的 AWS 账户并创建一个 EKS 集群来运行本书中的练习。然而，尽管相对便宜，EKS 并非免费服务（在撰写本文时每小时收费 0.20
    美元），你可能会因为 Kubernetes 创建的其他资源而被收费。建议你在完成每个练习后删除测试集群，以避免意外费用。
- en: 'There is a tool called `eksctl` by Weaveworks that allows you to easily create
    an EKS Kubernetes cluster in your AWS account:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: Weaveworks 有一个名为 `eksctl` 的工具，允许你轻松地在 AWS 账户中创建 EKS Kubernetes 集群：
- en: '[https://github.com/weaveworks/eksctl/blob/master/README.md](https://github.com/weaveworks/eksctl/blob/master/README.md)'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://github.com/weaveworks/eksctl/blob/master/README.md](https://github.com/weaveworks/eksctl/blob/master/README.md)'
