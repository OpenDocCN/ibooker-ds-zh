- en: front matter
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前置内容
- en: foreword
  id: totrans-1
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 前言
- en: I’ve written dozens of forewords and prefaces over the years, but this might
    be the first time I’ve been annoyed having to write one. Why? I’m a sore loser!
    I am sore that I didn’t write this book. I am sore because I wonder if I even
    *could* write it.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我多年来写了数十篇前言和序言，但这次可能是第一次我感到不得不写一篇前言感到烦恼。为什么？我是一个输不起的人！我感到难过，因为我没有写这本书。我感到难过，因为我怀疑我甚至*能否*写这本书。
- en: This book is *fantastic*. Its pages are brimming with valuable ideas couched
    in evident, profound experience. I have always wanted to see all these concepts
    put in one place, and I will be pointing people to this book for the foreseeable
    future.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书*非常棒*。它的每一页都充满了基于明显、深刻经验的有价值想法。我一直想看到所有这些概念都放在一个地方，我将在可预见的未来向人们推荐这本书。
- en: Building production-worthy applications, where production is mostly Kubernetes
    these days, *and* building out production itself? That’s a hefty lift, just like
    this book, which clocks in at more than 600 pages! But don’t let my prattling
    about size dissuade you from buying this book. It’s a big book for an even bigger
    topic.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 构建生产级别的应用程序，其中生产环境大多是 Kubernetes，*并且*构建生产环境本身？这无疑是一项艰巨的任务，就像这本书一样，篇幅超过 600 页！但别让我对这本书的篇幅描述让你却步。对于这样一个庞大的主题，这本书实在是大得惊人。
- en: 'This book covers the usual suspects: how to build services and microservices,
    how to handle persistence, messaging, instrumenting for observability, configuration,
    and security. In addition, there are whole chapters dedicated to some of these
    concepts.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书涵盖了常见的主题：如何构建服务和微服务，如何处理持久化、消息传递、为可观察性进行仪表化、配置和安全。此外，书中还专门用整章内容来介绍这些概念中的某些部分。
- en: Your Spring Boot application is the crowning jewel of this book’s ambitions
    (a storefront system, ’natch), but it’s by no means the only thing on which the
    book focuses. The book is as deep as it is broad in focus—a stunning achievement!
    I suppose I should list some specifics, so you can begin to appreciate just how
    nuanced this book’s coverage is. Before I do, remember, you *must* read this book.
    The following list is by no means exhaustive, but it includes stuff that I found
    myself stunned to be reading about. It’s stuff that should be in a book about
    Spring Boot and Spring Cloud but, unfortunately, rarely is.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 你的 Spring Boot 应用程序是本书雄心壮志的巅峰之作（一个店面系统，当然），但这绝不是本书关注的唯一事物。本书在关注点上既深入又广泛——这是一个惊人的成就！我想我应该列出一些具体内容，这样你就可以开始欣赏这本书的覆盖范围是多么细腻。在我这样做之前，请记住，你*必须*阅读这本书。以下列表绝非详尽无遗，但它包括了我发现自己对阅读内容感到震惊的东西。这些都是关于
    Spring Boot 和 Spring Cloud 的书中应该包含的内容，但不幸的是，很少见。
- en: There’s a fantastic treatment of logging with Loki, FluentBit, and Grafana.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对 Loki、FluentBit 和 Grafana 的日志处理非常出色。
- en: This book takes you well beyond just “up and running” in Kubernetes. By the
    end of the book, you’ll be wielding Kubernetes Deployments with ease. You’ll go
    serverless with Knative and Spring Cloud Function. Next, you’ll build pipelines
    with tools like GitHub Actions, Kustomize, and Kubeval. Finally, you’ll develop
    locally with tools like Tilt and Docker Compose.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本书不仅带你进入 Kubernetes 的“上手”阶段，而且带你深入到 Kubernetes 部署的各个方面。你将轻松使用 Knative 和 Spring
    Cloud Function 实现无服务器架构。接下来，你将使用 GitHub Actions、Kustomize 和 Kubeval 等工具构建管道。最后，你将使用
    Tilt 和 Docker Compose 等工具在本地进行开发。
- en: The discussion of security in the context of a single-page application (SPA)
    could be its own excellent book. It’s competent, iterative, quick, and production
    minded. Do *not* miss this chapter.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在单页应用（SPA）的背景下讨论安全可能是一本优秀的书籍。它是有能力的、迭代的、快速的，并且注重生产。*不要*错过这一章节。
- en: Everything is done with tests in mind. Spring’s got complementary test modules
    for various projects, which are elegantly on display here.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有的工作都是以测试为前提的。Spring 为各种项目提供了互补的测试模块，在这里它们被优雅地展示出来。
- en: This book introduces GraalVM’s native-image compiler and the Spring Native project.
    Spring Native is a relatively recent addition to the ecosystem, so nobody would
    blame Thomas for not including it. But he did. What a legend!
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本书介绍了 GraalVM 的原生图像编译器和 Spring Native 项目。Spring Native 是生态系统中相对较新的成员，所以没有人会责怪托马斯没有包括它。但他确实包括了。真是个传奇人物！
- en: Thomas introduces much of why we do the things described in this book, in line
    with the new technical concepts. I particularly enjoyed the treatment of Agile
    and GitOps.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 托马斯介绍了本书中描述的许多做法背后的原因，这与新的技术概念相一致。我特别欣赏对敏捷和 GitOps 的处理。
- en: Spring Boot has changed the world, and Thomas’s book is the best map for this
    brave, “bootiful” new world. Buy it. Read it. Act on it. Build something amazing
    and enjoy your journey to production!
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Boot改变了世界，托马斯的这本书是探索这个勇敢的、“bootiful”新世界的最佳地图。买下它。阅读它。付诸行动。构建一些令人惊叹的东西，并享受你通往生产的旅程！
- en: —Josh Long
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ——Josh Long
- en: Spring Developer Advocate
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Spring开发者倡导者
- en: VMware Tanzu
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: VMware Tanzu
- en: '@starbuxman'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '@starbuxman'
- en: preface
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 前言
- en: I clearly remember the first time I went on a field trip to see how nurses and
    practitioners used the software developed by the company I work with in their
    daily jobs. Witnessing how our applications improved the way they take care of
    their patients was an incredible moment. Software can make a difference. That’s
    why we build it. We solve problems through technology with the goal of delivering
    value to our users, our customers, and the business itself.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我清楚地记得第一次我参加实地考察，去了解我和我工作的公司开发的软件是如何在日常工作中被护士和从业者使用的。目睹我们的应用程序如何改善他们照顾患者的方式是一个难以置信的时刻。软件可以产生影响。这就是我们构建它的原因。我们通过技术解决问题，目标是向我们的用户、客户以及企业本身提供价值。
- en: Another moment I can’t forget was when I learned about Spring Boot. Until then,
    I enjoyed working with the core Spring Framework very much. I was particularly
    fond of the code I wrote to manage aspects like security, data persistence, HTTP
    communications, and integrations. It was a lot of hard work, but it was worth
    it, especially considering the alternatives at that time in the Java landscape.
    Spring Boot changed everything. Suddenly the platform itself was taking care of
    all those aspects for me. All the code that handled infrastructural concerns and
    integrations wasn’t needed anymore.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个我难以忘记的时刻是我了解到Spring Boot。在此之前，我非常喜欢使用核心Spring框架。我特别喜爱我编写的用于管理安全、数据持久化、HTTP通信和集成的代码。这是一项艰巨的工作，但值得，尤其是在当时Java生态系统的替代方案中。Spring
    Boot改变了这一切。突然间，平台本身开始为我处理所有这些方面。所有处理基础设施问题和集成的代码都不再需要了。
- en: 'But then it occurred to me: all the code that handled infrastructural concerns
    and integrations wasn’t needed anymore! When I started deleting all that code,
    I realized how much time I had spent on it, compared to the business logic of
    the application, the part producing value. And I realized how little code was
    actually part of the business logic, compared to all the boilerplate code. It
    was a pivotal moment!'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 但随后我意识到：所有处理基础设施问题和集成的代码都不再需要了！当我开始删除所有这些代码时，我意识到我在这上面花费了这么多时间，与应用程序的业务逻辑相比，这部分是产生价值的。我还意识到，与所有样板代码相比，真正属于业务逻辑的代码其实很少。这是一个转折点！
- en: After many years, Spring Boot is still the leading platform for building enterprise-grade
    software products in the Java landscape, and one of the reasons for its popularity
    is its focus on developer productivity. What makes each application special is
    its business logic, not how it exposes its data or connects to a database. And
    it’s that business logic that ultimately delivers value to users, customers, and
    businesses. Leveraging a broad ecosystem of frameworks, libraries, and integrations,
    Spring Boot enables developers to focus on the business logic while taking care
    of the plumbing and boilerplate code.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 经过多年，Spring Boot仍然是Java领域中构建企业级软件产品的领先平台之一，其受欢迎的原因之一就是它对开发者生产力的关注。使每个应用程序变得特殊的是其业务逻辑，而不是它如何暴露数据或连接到数据库。正是这种业务逻辑最终为用户、客户和业务带来了价值。利用广泛的框架、库和集成生态系统，Spring
    Boot使开发者能够专注于业务逻辑，同时处理管道和样板代码。
- en: The cloud was another game-changer in our field, as well as Kubernetes, which
    quickly imposed itself as the “operating system” of the cloud. Leveraging the
    features of the cloud computing model, we can build cloud native applications
    and achieve better scalability, resilience, speed, and cost optimizations for
    our projects. Ultimately, we have an opportunity to increase the value we produce
    via our software and solve new types of problems in a way that was not possible
    before.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 云计算以及Kubernetes（它迅速成为云的“操作系统”）也是我们领域中的另一个颠覆者。利用云计算模型的功能，我们可以构建云原生应用程序，并为我们的项目实现更好的可扩展性、弹性、速度和成本优化。最终，我们有通过我们的软件增加我们产生价值的机会，并以一种以前不可能的方式解决新类型的问题。
- en: The idea for this book came from my wish to help software engineers in their
    journey to deliver value. I’m glad you decided to join me in this adventure from
    code to production. Spring Boot, and the Spring ecosystem in general, represent
    the backbone of such a journey. The cloud native principles and patterns will
    guide us through our implementation of various applications. The continuous delivery
    practices will support us in delivering high-quality software safely, quickly,
    and reliably. Kubernetes and its ecosystem will provide a platform for deploying
    and releasing our applications to their users.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书的想法源于我帮助软件工程师在创造价值的过程中取得成功的愿望。我很高兴您决定加入我从代码到生产的这次冒险。Spring Boot以及Spring生态系统在整体上代表了这样的旅程的骨干。云原生原则和模式将指导我们实现各种应用。持续交付实践将支持我们安全、快速、可靠地交付高质量的软件。Kubernetes及其生态系统将为将我们的应用部署和发布给用户提供一个平台。
- en: When structuring and writing this book, my guiding principle was to provide
    relevant, real-world examples that you can immediately apply to your daily job.
    All the technologies and patterns covered in the book aim to deliver high-quality
    software in production, within the limits of what can be included in a book with
    limited space. I hope I succeeded in meeting that goal.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建和撰写这本书时，我的指导原则是提供相关、真实的示例，您可以直接将其应用到日常工作中。书中涵盖的所有技术和模式都旨在在有限的空间内，在生产的限制范围内，交付高质量的软件。我希望我成功地达到了这个目标。
- en: Thanks again for joining me on this cloud native journey from code to production.
    I wish you an enjoyable and educational experience reading this book, and I hope
    it will help you deliver more value with your software and make a difference.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 再次感谢您与我一起踏上从代码到生产的云原生之旅。希望您阅读这本书时能有一个愉快且富有教育性的体验，并希望它能帮助您通过软件创造更多价值，并产生积极影响。
- en: acknowledgments
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 致谢
- en: Writing a book is hard, and it wouldn’t have been possible without the support
    of many people who helped me throughout the development process. First, I want
    to thank my family and friends who continuously encouraged me and supported me
    along the way. Special thanks to my parents Sabrina and Plinio, my sister Alissa,
    and my grandfather Antonio for their constant support and for believing in me.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 写一本书很困难，没有许多人在整个开发过程中给予我支持，这是不可能完成的。首先，我要感谢我的家人和朋友，他们一直在鼓励我，支持我。特别感谢我的父母Sabrina和Plinio，我的姐姐Alissa，以及我的祖父Antonio，他们始终如一的支持和对我充满信心。
- en: I want to thank my friends and fellow engineers Filippo, Luciano, Luca, and
    Marco, who were there for me from the initial proposal and always available to
    provide feedback and advice to improve this book. I want to thank my coworkers
    and friends from Systematic, who encouraged me throughout this period. I feel
    lucky to work with you.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我要感谢我的朋友和同行工程师Filippo、Luciano、Luca和Marco，他们在从最初的建议阶段就一直在支持我，并始终愿意提供反馈和建议来改进这本书。我要感谢Systematic的同事和朋友，他们在整个过程中一直给予我鼓励。能与你们一起工作，我感到非常幸运。
- en: I want to thank Professor Giovanni Malnati from the Polytechnic University of
    Turin for introducing me to the Spring ecosystem in the first place and changing
    the course of my career. Big thanks to the Spring team for creating such a productive
    and valuable ecosystem. Special thanks to Josh Long for his incredible work that
    taught me so much and for writing the foreword to this book. It means a lot to
    me!
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我要感谢都灵理工大学Giovanni Malnati教授，是他首先向我介绍了Spring生态系统，并改变了我职业生涯的轨迹。对Spring团队创建如此高效且宝贵的生态系统表示衷心的感谢。特别感谢Josh
    Long，他的杰出工作让我受益匪浅，并为这本书写了序言。这对我的意义非常重大！
- en: I want to thank the entire Manning team for their huge help in making this book
    a valuable resource. I especially want to thank Michael Stephens (acquisition
    editor), Susan Ethridge (development editor), Jennifer Stout (development editor),
    Nickie Buckner (technical development editor), and Niek Palm (technical proofreader).
    Their feedback, advice, and encouragement brought great value to this book. Thanks
    also go to Mihaela Batinic´ (review editor), Andy Marinkovich (production editor),
    Andy Carroll (copy editor), Keri Hales (proofreader), and Paul Wells (production
    manager).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我要感谢整个Manning团队在将这本书打造成宝贵资源方面提供的巨大帮助。我特别想感谢Michael Stephens（收购编辑）、Susan Ethridge（开发编辑）、Jennifer
    Stout（开发编辑）、Nickie Buckner（技术开发编辑）和Niek Palm（技术校对）。他们的反馈、建议和鼓励为这本书增添了巨大价值。还要感谢Mihaela
    Batinic´（审稿编辑）、Andy Marinkovich（生产编辑）、Andy Carroll（校对）、Keri Hales（校对）和Paul Wells（生产经理）。
- en: 'To all the reviewers: Aaron Makin, Alexandros Dallas, Andres Sacco, Conor Redmond,
    Domingo Sebastian, Eddú Meléndez Gonzales, Fatih Mehmet Ucar, François-David Lessard,
    George Thomas, Gilberto Taccari, Gustavo Gomes, Harinath Kuntamukkala, Javid Asgarov,
    João Miguel, Pires Dias, John Guthrie, Kerry E. Koitzsch, Michał Rutka, Mladen
    Knežić, Mohamed Sanaulla, Najeeb Arif, Nathan B. Crocker, Neil Croll, Özay Duman,
    Raffaella Ventaglio, Sani Sudhakaran Subhadra, Simeon Leyzerzon, Steve Rogers,
    Tan Wee, Tony Sweets, Yogesh Shetty, and Zorodzayi Mukuya, your suggestions helped
    make this a better book.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 致所有审稿人：Aaron Makin、Alexandros Dallas、Andres Sacco、Conor Redmond、Domingo Sebastian、Eddú
    Meléndez Gonzales、Fatih Mehmet Ucar、François-David Lessard、George Thomas、Gilberto
    Taccari、Gustavo Gomes、Harinath Kuntamukkala、Javid Asgarov、João Miguel Pires Dias、John
    Guthrie、Kerry E. Koitzsch、Michał Rutka、Mladen Knežić、Mohamed Sanaulla、Najeeb Arif、Nathan
    B. Crocker、Neil Croll、Özay Duman、Raffaella Ventaglio、Sani Sudhakaran Subhadra、Simeon
    Leyzerzon、Steve Rogers、Tan Wee、Tony Sweets、Yogesh Shetty和Zorodzayi Mukuya，你们的建议帮助使这本书变得更好。
- en: 'Finally, I want to thank the Java community and all the fantastic people I
    met there over the years: open source contributors, fellow speakers, conference
    organizers, and everyone who contributes to making this community so special.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我想感谢Java社区以及这些年来我在那里遇到的所有了不起的人：开源贡献者、同行演讲者、会议组织者，以及为使这个社区如此特别而做出贡献的每一个人。
- en: about this book
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于本书
- en: '*Cloud Native Spring in Action* was written to help you design, build, and
    deploy cloud native applications using Spring Boot and Kubernetes. It defines
    a curated path to production and teaches effective techniques that you can immediately
    apply to enterprise-grade applications. It also takes you step by step from your
    first idea through to production, showing how cloud native development can add
    business value at every stage of the software development lifecycle. As you develop
    an online bookshop system, you’ll learn how to build and test cloud native applications
    using the powerful libraries available in the Spring and Java ecosystems. Chapter
    by chapter, you’ll work with REST APIs, data persistence, reactive programming,
    API gateways, functions, event-driven architectures, resilience, security, testing,
    and observability. The book then expands on how to package applications for the
    cloud as container images, how to configure deployments for cloud environments
    like Kubernetes, how to make your applications production-ready, and how to design
    your path from code to production using continuous delivery and continuous deployment.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 《云原生Spring实战》旨在帮助你使用Spring Boot和Kubernetes设计和部署云原生应用。它定义了一条通往生产的精选路径，并教授你可以立即应用于企业级应用的有效技术。它还逐步引导你从最初的想法到生产，展示云原生开发如何在软件开发生命周期的每个阶段增加商业价值。当你开发在线书店系统时，你将学习如何使用Spring和Java生态系统中的强大库来构建和测试云原生应用。逐章阅读，你将使用REST
    API、数据持久化、响应式编程、API网关、函数、事件驱动架构、弹性、安全、测试和可观察性。然后，本书扩展了如何将应用程序打包为容器镜像，如何为Kubernetes等云环境配置部署，如何使你的应用程序准备好生产，以及如何使用持续交付和持续部署设计从代码到生产的路径。
- en: This book provides a hands-on, project-driven guide to help you navigate the
    increasingly complex cloud landscape and learn how to bring patterns and technologies
    together to build a real cloud native system and bring it to production.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 本书提供了一本动手、项目驱动的指南，帮助你导航日益复杂的云环境，并学习如何将模式和科技结合起来构建一个真正的云原生系统并将其投入生产。
- en: Who should read this book?
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 适合阅读本书的人群？
- en: This book is aimed at developers and architects who want to learn more about
    designing, building, and deploying production-ready cloud native applications
    using Spring Boot and Kubernetes.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向希望了解更多关于使用Spring Boot和Kubernetes设计和部署生产级云原生应用的的开发者和架构师。
- en: To get the most benefit from this book, you’ll want to have established Java
    programming skills, experience building web applications, and basic knowledge
    of the Spring core features. I’ll assume you’re familiar with Git, object-oriented
    programming, distributed systems, databases, and testing. Experience with Docker
    and Kubernetes is not required.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 为了从这本书中获得最大收益，你需要具备Java编程技能、构建Web应用的经验，以及Spring核心功能的基本知识。我将假设你熟悉Git、面向对象编程、分布式系统、数据库和测试。不需要有Docker和Kubernetes的经验。
- en: 'How this book is organized: A road map'
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本书组织结构：路线图
- en: The book has 4 parts that cover 16 chapters. Part 1 sets the stage for your
    cloud native journey from code to production and helps you better understand the
    topics covered in the rest of the book and place them correctly in the overall
    cloud native picture.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 本书分为4部分，共涵盖16章。第1部分为你的云原生之旅从代码到生产奠定基础，并帮助你更好地理解本书中涵盖的主题，并将它们正确地放置在整体云原生图中。
- en: Chapter 1 is an introduction to the cloud native landscape. It defines what
    cloud native means, the fundamental properties of cloud native applications, and
    the processes supporting them.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第1章是云原生景观的介绍。它定义了云原生的含义，云原生应用程序的基本特性以及支持它们的流程。
- en: Chapter 2 covers the principles of cloud native development and guides you through
    a first hands-on experience building a minimal Spring Boot application and deploying
    that to Kubernetes as a container.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第2章涵盖了云原生开发的原则，并指导你通过首次动手实践构建一个最小化的Spring Boot应用程序，并将其作为容器部署到Kubernetes。
- en: Part 2 introduces you to the main practices and patterns for building production-ready
    cloud native applications using Spring Boot and Kubernetes.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 第2部分介绍了使用Spring Boot和Kubernetes构建生产就绪云原生应用程序的主要实践和模式。
- en: Chapter 3 covers the fundamentals of starting a new cloud native project, including
    strategies for organizing the codebase, managing dependencies, and defining the
    commit stage of a deployment pipeline. You’ll learn how to implement and test
    a REST API using Spring MVC and Spring Boot Test.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第3章涵盖了启动新云原生项目的基本知识，包括组织代码库、管理依赖项和定义部署管道的提交阶段策略。你将学习如何使用Spring MVC和Spring Boot
    Test实现和测试REST API。
- en: Chapter 4 discusses the importance of externalized configuration and covers
    some options available for Spring Boot applications, including property files,
    environment variables, and configuration services with Spring Cloud Config.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第4章讨论了外部化配置的重要性，并涵盖了Spring Boot应用程序可用的某些选项，包括属性文件、环境变量和Spring Cloud Config配置服务。
- en: Chapter 5 presents the main aspects of data services in the cloud and shows
    you how to add data persistence to a Spring Boot application using Spring Data
    JDBC. You’ll learn production options for managing data using Flyway and strategies
    for testing using Testcontainers.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第5章介绍了云中数据服务的主要方面，并展示了如何使用Spring Data JDBC将数据持久性添加到Spring Boot应用程序中。你将了解使用Flyway管理数据的生产选项以及使用Testcontainers进行测试的策略。
- en: Chapter 6 is about containers; you’ll learn more about Docker and how to package
    Spring Boot applications as container images using Dockerfiles and Cloud Native
    Buildpacks.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第6章是关于容器的；你将了解更多关于Docker的知识，以及如何使用Dockerfile和Cloud Native Buildpacks将Spring
    Boot应用程序打包成容器镜像。
- en: Chapter 7 discusses Kubernetes and covers service discovery, load balancing,
    scalability, and local development workflows. You’ll also learn more about how
    to deploy Spring Boot applications to a Kubernetes cluster.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第7章讨论了Kubernetes，涵盖了服务发现、负载均衡、可伸缩性和本地开发工作流程。你还将了解如何将Spring Boot应用程序部署到Kubernetes集群。
- en: Part 3 covers the fundamental properties and patterns of distributed systems
    in the cloud, including resilience, security, scalability, and API gateways. It
    also describes reactive programming and event-driven architectures.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 第3部分涵盖了云原生系统中分布式系统的基本特性和模式，包括弹性、安全性、可伸缩性和API网关。它还描述了响应式编程和事件驱动架构。
- en: Chapter 8 introduces reactive programming and the main features of the Spring
    reactive stack, including Spring WebFlux and Spring Data R2DBC. It also teaches
    you how to make an application more resilient using Project Reactor.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第8章介绍了响应式编程和Spring响应式堆栈的主要功能，包括Spring WebFlux和Spring Data R2DBC。它还教你如何使用Project
    Reactor使应用程序更具弹性。
- en: Chapter 9 covers the API gateway pattern and how to build edge services with
    Spring Cloud Gateway. You’ll learn how to build resilient applications with Spring
    Cloud and Resilience4J, using patterns like retries, timeouts, fallbacks, circuit
    breakers, and rate limiters.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第9章涵盖了API网关模式以及如何使用Spring Cloud Gateway构建边缘服务。你将学习如何使用Spring Cloud和Resilience4J构建具有弹性的应用程序，使用诸如重试、超时、回退、断路器和速率限制器等模式。
- en: Chapter 10 describes event-driven architectures and teaches you how to implement
    them with Spring Cloud Function, Spring Cloud Stream, and RabbitMQ.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第10章描述了事件驱动架构，并教你如何使用Spring Cloud Function、Spring Cloud Stream和RabbitMQ来实现它们。
- en: Chapter 11 is all about security and shows you how to implement authentication
    in a cloud native system using Spring Security, OAuth2, OpenID Connect, and Keycloak.
    It also describes how to address security concerns like CORS and CSRF when single-page
    applications are part of the system.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第11章全部关于安全性，展示了如何使用Spring Security、OAuth2、OpenID Connect和Keycloak在云原生系统中实现身份验证。它还描述了当单页应用程序是系统的一部分时，如何解决CORS和CSRF等安全担忧。
- en: Chapter 12 continues the security journey and covers how to use OAuth2 and Spring
    Security to delegate access within a distributed system, protect APIs and data,
    and authorize users based on their roles.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第12章继续安全之旅，涵盖了如何使用OAuth2和Spring Security在分布式系统中委派访问、保护API和数据以及根据用户的角色授权用户。
- en: Part 4 guides you through the last few steps to make your cloud native applications
    production-ready, addressing concerns like observability, configuration management,
    secrets management, and deployment strategies. It also covers serverless and native
    images.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 第4部分指导您完成最后几步，使您的云原生应用程序准备好生产环境，解决可观察性、配置管理、秘密管理和部署策略等问题。它还涵盖了无服务器和原生镜像。
- en: Chapter 13 describes how to make your cloud native applications observable using
    Spring Boot Actuator, OpenTelemetry, and the Grafana observability stack. You’ll
    learn how to configure Spring Boot applications to produce relevant telemetry
    data, such as logs, health, metrics, traces, and more.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第13章介绍了如何使用Spring Boot Actuator、OpenTelemetry和Grafana可观察性堆栈使您的云原生应用程序可观察。您将学习如何配置Spring
    Boot应用程序以生成相关的遥测数据，例如日志、健康、指标、跟踪等。
- en: Chapter 14 covers advanced configuration and secrets management strategies,
    including Kubernetes-native options like ConfigMaps, Secrets, and Kustomize.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第14章涵盖了高级配置和秘密管理策略，包括Kubernetes原生选项，如ConfigMaps、Secrets和Kustomize。
- en: Chapter 15 guides you through the final steps of your cloud native journey and
    teaches you how to configure Spring Boot for production. You’ll then set up continuous
    deployment for your applications and deploy them to a Kubernetes cluster in the
    public cloud, adopting a GitOps strategy.
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第15章指导您完成云原生之旅的最后几步，并教您如何为生产环境配置Spring Boot。然后，您将为应用程序设置持续部署并将它们部署到公共云中的Kubernetes集群，采用GitOps策略。
- en: Chapter 16 covers serverless architectures and functions with Spring Native
    and Spring Cloud Function. You’ll also learn about Knative and its powerful features
    that provide a superior developer experience on top of Kubernetes.
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第16章涵盖了使用Spring Native和Spring Cloud Function的无服务器架构和函数。您还将了解Knative及其强大的功能，这些功能在Kubernetes之上提供了卓越的开发者体验。
- en: In general, I recommend starting with chapter 1 and working through each chapter
    sequentially. If you prefer reading the chapters in a different order based on
    your particular interests, make sure you read chapters 1 through 3 first to better
    understand the terminology, patterns, and strategies used throughout the book.
    Even so, each chapter builds on the previous one, so some context might be missing
    if you decide to do that.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，我建议从第1章开始，按顺序逐章阅读。如果您根据您的特定兴趣选择不同的阅读顺序，请确保您首先阅读第1章到第3章，以便更好地理解书中使用的术语、模式和策略。即便如此，每一章都是基于前一章的，所以如果您那样做，可能会缺少一些上下文。
- en: About the code
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关于代码
- en: This book provides a hands-on and project-driven experience. Starting from chapter
    2, you’ll build a system composed of several cloud native applications for a fictitious
    online bookshop.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 本书提供了一种动手和以项目为导向的体验。从第2章开始，您将为一个虚构的在线书店构建由几个云原生应用程序组成的系统。
- en: You can get executable snippets of code from the liveBook (online) version of
    this book at [https://livebook.manning.com/book/cloud-native-spring-in-action](https://livebook.manning.com/book/cloud-native-spring-in-action).
    All the source code for the project developed throughout the book is available
    on GitHub and licensed under the Apache License 2.0 ([https://github.com/ThomasVitale/cloud-native-spring-in-action](https://github.com/ThomasVitale/cloud-native-spring-in-action)).
    For each chapter, you’ll find a “begin” and an “end” folder. Each chapter builds
    on the previous one, but you can always use the “begin” folder for a given chapter
    as a starting point, even if you haven’t followed the previous chapters. The “end”
    folder contains the final result after completing the steps for that chapter,
    and you can compare it against your own solution. For example, you can find the
    source code for chapter 3 in the Chapter03 folder, which contains 03-begin and
    03-end folders.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从本书的 liveBook（在线）版本中获取可执行的代码片段，网址为 [https://livebook.manning.com/book/cloud-native-spring-in-action](https://livebook.manning.com/book/cloud-native-spring-in-action)。本书中开发的所有项目的所有源代码都可在
    GitHub 上找到，并受 Apache License 2.0 许可 ([https://github.com/ThomasVitale/cloud-native-spring-in-action](https://github.com/ThomasVitale/cloud-native-spring-in-action))。对于每一章，您都会找到一个“开始”文件夹和一个“结束”文件夹。每一章都是基于前一章构建的，但您始终可以使用给定章节的“开始”文件夹作为起点，即使您没有跟随前面的章节。而“结束”文件夹包含完成该章节步骤后的最终结果，您可以将其与自己的解决方案进行比较。例如，您可以在
    Chapter03 文件夹中找到第 3 章的源代码，其中包含 03-begin 和 03-end 文件夹。
- en: All the applications developed throughout the book are based on Java 17 and
    Spring Boot 2.7, and they are built with Gradle. The projects can be imported
    into any IDE with support for Java, Gradle, and Spring Boot, such as Visual Studio
    Code, IntelliJ IDEA, or Eclipse. You’ll also need Docker installed. Chapter 2
    and appendix A will provide more information to help you set up your local environment.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 本书开发的所有应用程序都是基于 Java 17 和 Spring Boot 2.7，并使用 Gradle 构建。这些项目可以导入任何支持 Java、Gradle
    和 Spring Boot 的 IDE 中，例如 Visual Studio Code、IntelliJ IDEA 或 Eclipse。您还需要安装 Docker。第
    2 章和附录 A 将提供更多信息，以帮助您设置本地环境。
- en: The examples have been tested on macOS, Ubuntu, and Windows. On Windows, I recommend
    using the Windows Subsystem for Linux to complete the deployment and configuration
    tasks described throughout the book. On macOS, if you use an Apple Silicon computer,
    you can run all the examples, but you might experience performance issues from
    some tools that don’t provide native support for ARM64 architectures at the time
    of writing. The chapters will include additional contextual information when relevant.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这些示例已在 macOS、Ubuntu 和 Windows 上进行了测试。在 Windows 上，我建议使用 Windows Subsystem for
    Linux 来完成书中描述的部署和配置任务。在 macOS 上，如果您使用的是 Apple Silicon 计算机运行所有示例，但您可能会遇到一些工具的性能问题，因为当时它们没有为
    ARM64 架构提供原生支持。当相关时，章节将包含额外的上下文信息。
- en: The GitHub repository mentioned earlier ([https://github.com/ThomasVitale/cloud-native-spring-in-action](https://github.com/ThomasVitale/cloud-native-spring-in-action))
    contains all the source code for this book in the main branch. Besides that, I
    plan to maintain an sb-2-main branch, where I’ll keep the source code up to date
    with future releases of Spring Boot 2.x, and an sb-3-main branch where I’ll evolve
    the source code based on future releases of Spring Boot 3.x.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 之前提到的 GitHub 仓库 ([https://github.com/ThomasVitale/cloud-native-spring-in-action](https://github.com/ThomasVitale/cloud-native-spring-in-action))
    包含本书主分支上的所有源代码。除此之外，我计划维护一个 sb-2-main 分支，其中我将保持与 Spring Boot 2.x 未来版本发布的源代码同步更新，以及一个
    sb-3-main 分支，其中我将根据 Spring Boot 3.x 的未来版本发布来更新源代码。
- en: This book contains many examples of source code, both in numbered listings and
    inline with normal text. In both cases, source code is formatted in a fixed-width
    font like this to separate it from ordinary text. Sometimes code is also in bold
    to highlight code that has changed from previous steps in the chapter, such as
    when a new feature adds to an existing line of code.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书包含了许多源代码示例，既有编号列表中的，也有与普通文本内联的。在两种情况下，源代码都以固定宽度字体格式化，如这样，以将其与普通文本区分开来。有时代码也会加粗，以突出显示章节中从先前步骤中更改的代码，例如，当新功能添加到现有代码行时。
- en: In many cases, the original source code has been reformatted; we’ve added line
    breaks and reworked indentation to accommodate the available page space in the
    book. In rare cases, even this was not enough, and listings include line-continuation
    markers (➥). Additionally, comments in the source code have often been removed
    from the listings when the code is described in the text. Code annotations accompany
    many of the listings, highlighting important concepts.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，原始源代码已被重新格式化；我们添加了换行并重新调整了缩进，以适应书籍中的可用页面空间。在极少数情况下，即使这样也不够，列表中还包括了行续接标记（➥）。此外，当代码在文本中描述时，源代码中的注释通常已从列表中删除。许多列表旁边都有代码注释，突出显示重要概念。
- en: liveBook discussion forum
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: liveBook 讨论论坛
- en: Purchase of *Cloud Native Spring in Action* includes free access to liveBook,
    Manning’s online reading platform. Using liveBook’s exclusive discussion features,
    you can attach comments to the book globally or to specific sections or paragraphs.
    It’s a snap to make notes for yourself, ask and answer technical questions, and
    receive help from the author and other users. To access the forum, go to [https://livebook.manning.com/book/cloud-native-spring-in-action/discussion](https://livebook.manning.com/book/cloud-native-spring-in-action/discussion).
    You can also learn more about Manning’s forums and the rules of conduct at [https://livebook.manning.com/discussion](https://livebook.manning.com/discussion).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 购买 *《云原生Spring实战》* 包括免费访问liveBook，Manning的在线阅读平台。使用liveBook的独家讨论功能，您可以在全球范围内或针对特定章节或段落附加评论。为自己做笔记、提问和回答技术问题，以及从作者和其他用户那里获得帮助都非常简单。要访问论坛，请访问
    [https://livebook.manning.com/book/cloud-native-spring-in-action/discussion](https://livebook.manning.com/book/cloud-native-spring-in-action/discussion)。您还可以在
    [https://livebook.manning.com/discussion](https://livebook.manning.com/discussion)
    了解更多关于Manning的论坛和行为准则。
- en: Manning’s commitment to our readers is to provide a venue where a meaningful
    dialogue between individual readers and between readers and the author can take
    place. It is not a commitment to any specific amount of participation on the part
    of the author, whose contribution to the forum remains voluntary (and unpaid).
    We suggest you try asking the author some challenging questions lest his interest
    stray! The forum and the archives of previous discussions will be accessible from
    the publisher’s website as long as the book is in print.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Manning对我们读者的承诺是提供一个场所，在那里个人读者之间以及读者与作者之间可以进行有意义的对话。这不是对作者参与特定数量承诺的承诺，作者对论坛的贡献仍然是自愿的（且未付费）。我们建议您尝试向作者提出一些挑战性的问题，以免他的兴趣转移！只要书籍在印刷中，论坛和先前讨论的存档将从出版社的网站提供访问。
- en: Other online resources
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他在线资源
- en: You can find me online through Twitter (@vitalethomas), LinkedIn ([www.linkedin.com/in/vitalethomas](http://www.linkedin.com/in/vitalethomas)),
    or my blog at [https://thomasvitale.com](https://thomasvitale.com).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过Twitter (@vitalethomas)、LinkedIn ([www.linkedin.com/in/vitalethomas](http://www.linkedin.com/in/vitalethomas))
    或我的博客 [https://thomasvitale.com](https://thomasvitale.com) 在线找到我。
- en: If you’d like to learn more about the Spring ecosystem, I maintain a list of
    educational resources with books, videos, podcasts, courses, and events at [https://github.com/ThomasVitale/awesome-spring](https://github.com/ThomasVitale/awesome-spring).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想了解更多关于Spring生态系统的内容，我维护了一个包含书籍、视频、播客、课程和活动的教育资源列表，可在 [https://github.com/ThomasVitale/awesome-spring](https://github.com/ThomasVitale/awesome-spring)
    找到。
- en: about the author
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于作者
- en: '![Vitale_FM_Author-Photo](../Images/Vitale_FM_Author-Photo.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![Vitale_FM_Author-Photo](../Images/Vitale_FM_Author-Photo.png)'
- en: Thomas Vitale is a software engineer and architect specialized in building cloud
    native, resilient, and secure enterprise applications. He designs and develops
    software solutions at Systematic, Denmark, where he’s been working on modernizing
    platforms and applications for the cloud native world, focusing on developer experience
    and security.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 托马斯·维塔莱（Thomas Vitale）是一位专注于构建云原生、弹性且安全的企业应用的软件工程师和架构师。他在丹麦的Systematic公司设计和开发软件解决方案，在那里他一直在为云原生世界现代化平台和应用，重点关注开发体验和安全。
- en: Some of his main interests and focus areas are Java, Spring Boot, Kubernetes,
    Knative, and cloud native technologies in general. Thomas supports continuous
    delivery practices and believes in a collaboration culture aimed at working together
    to deliver value to users, customers, and businesses. He likes contributing to
    open source projects like Spring Security and Spring Cloud, and sharing knowledge
    with the community.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 他的主要兴趣和关注领域包括Java、Spring Boot、Kubernetes、Knative以及云原生技术。托马斯支持持续交付实践，并相信一种旨在共同为用户、客户和业务创造价值的协作文化。他喜欢为Spring
    Security和Spring Cloud等开源项目做出贡献，并与社区分享知识。
- en: Thomas has an MSc in Computer Engineering, specializing in software from the
    Polytechnic University of Turin (Italy). He is a CNCF Certified Kubernetes Application
    Developer, Pivotal Certified Spring Professional, and RedHat Certified Enterprise
    Application Developer. His speaking engagements include those for SpringOne, Spring
    I/O, KubeCon+CloudNativeCon, Devoxx, GOTO, JBCNConf, DevTalks, and J4K.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 托马斯拥有都灵理工大学（意大利）计算机工程硕士学位，专攻软件。他是CNCF认证的Kubernetes应用程序开发者、Pivotal认证的Spring专业人员和RedHat认证的企业应用程序开发者。他的演讲活动包括SpringOne、Spring
    I/O、KubeCon+CloudNativeCon、Devoxx、GOTO、JBCNConf、DevTalks和J4K。
- en: about the cover illustration
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于封面插图
- en: The figure on the cover of *Cloud Native Spring in Action* is captioned “Paisan
    Dequito”, or “Peasant from Quito”, taken from a collection by Jacques Grasset
    de Saint-Sauveur, published in 1797\. Each illustration is finely drawn and colored
    by hand.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 《云原生Spring实战》封面上的插图被标注为“Paisan Dequito”，或“基多农民”，取自雅克·格拉塞·德·圣索沃尔（Jacques Grasset
    de Saint-Sauveur）的作品集，该作品集于1797年出版。每一幅插图都是手工精细绘制和着色的。
- en: In those days, it was easy to identify where people lived and what their trade
    or station in life was just by their dress. Manning celebrates the inventiveness
    and initiative of the computer business with book covers based on the rich diversity
    of regional culture centuries ago, brought back to life by pictures from collections
    such as this one.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在那些日子里，人们通过他们的服饰就能轻易地识别出他们居住的地方以及他们的职业或社会地位。曼宁通过基于几个世纪前丰富多样的地区文化的书封面来庆祝计算机行业的创新精神和主动性，这些文化通过像这一系列这样的图片被重新带回生活。
