- en: '6 Main menu: Next customer!'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 6 主菜单：下一位顾客！
- en: In this chapter
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中
- en: Erik creates a main menu to serve many customers
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 艾瑞克创建了一个主菜单来服务众多顾客
- en: Erik learns about Python dictionaries
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 艾瑞克学习了Python字典
- en: Simon explains the top-down development approach
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西蒙解释了自顶向下的开发方法
- en: “Yesterday, we decided that we wanted to create a main menu,” Simon reminded
    Erik.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: “昨天，我们决定要创建一个主菜单，”西蒙提醒艾瑞克。
- en: “Yes, you said if I wanted to use this program to serve many customers, I’d
    have to repeat the menus for each customer—ask their name and what they want to
    order.”
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，你说如果我想用这个程序服务众多顾客，我就必须为每个顾客重复菜单——询问他们的名字和想要点的东西。”
- en: “Exactly right!” Simon said. “And what are you going to use to do that?”
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: “完全正确！”西蒙说。“你打算用什么来做这件事？”
- en: “A loop, maybe? Like we did with menus. Repeat until the customer types the
    right numbers or types `x`.”
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: “一个循环，也许？就像我们处理菜单一样。重复直到顾客输入正确的数字或输入`x`。”
- en: “You’re absolutely right!” Simon was really glad that his brother caught on
    to this programming idea so quickly. “We’ll ask the customer their name, like
    in our first program. Then we’ll get their order with all the flavors and toppings.”
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: “你完全正确！”西蒙非常高兴他的兄弟这么快就明白了这个编程想法。“我们将询问顾客的名字，就像我们第一个程序一样。然后我们将获取他们的订单，包括所有口味和配料。”
- en: “Yes,” Erik continued, “and then we’ll give them the choice to order or cancel?
    I saw that on some websites.”
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，”艾瑞克继续说，“然后我们会给他们选择下单或取消的选项？我看到一些网站上都有这个。”
- en: “Right. When they click Order, we save the order and print it for the barista.
    If they cancel, we just forget about it. In both cases, we go back to the beginning
    of the main menu and ask the next customer their name.”
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: “对。当顾客点击下单时，我们保存订单并打印给咖啡师。如果他们取消，我们就忽略它。在两种情况下，我们都回到主菜单的开始处，询问下一个顾客的名字。”
- en: Simon took a piece of paper and started drawing. “We should first plan this
    algorithm visually. When we both agree how it should behave, you can start writing
    the code. It’s always a good practice to describe a program in plain words and
    diagrams before you start writing any code.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙拿了一张纸，开始画图。“我们首先应该可视化地规划这个算法。当我们都同意它应该如何表现时，你就可以开始编写代码了。在开始编写任何代码之前，用平实的语言和图表描述程序总是一个好习惯。”
- en: “The first thing we do here is get an order,” Simon said. “You see, I put it
    here as ‘Get order’.”
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: “我们在这里做的第一件事是获取订单，”西蒙说。“你看，我把这个设置为‘获取订单’。”
- en: '![](../Images/06-01-main-menu.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![主菜单](../Images/06-01-main-menu.png)'
- en: “And where are all our menus with flavors and toppings? Why didn’t you put them
    in there?” Erik asked.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: “我们的所有菜单和口味、配料在哪里？为什么你没有把它们放进去？”艾瑞克问道。
- en: “I decided to use a block called ‘Get order’ that *contains* all the menus.
    It’s common to think in big blocks first and then work on each block’s details
    separately. This is another reason why programmers use functions. They think about
    the program in big blocks first and then describe each block in a separate diagram.
    Imagine if we included every minor detail of our program in a single diagram.
    It would be impossible to understand the main algorithm!
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: “我决定使用一个名为‘获取订单’的块，它*包含*所有菜单。首先考虑大块，然后分别处理每个块的细节是很常见的。这也是程序员使用函数的另一个原因。他们首先在大块中思考程序，然后分别用单独的图表描述每个块。想象一下，如果我们把程序的所有细节都包含在一个图表中，那将是不可能理解的算法！”
- en: '“Let’s continue,” Simon said. “We get the order, and we ask the customer to
    confirm it. If they cancel, we return to the very first menu: ‘Welcome to Erik’s
    Coffee Shop’. But if the customer confirms the order, then we should save and
    print it.”'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们继续，”西蒙说。“我们获取订单，并要求顾客确认。如果他们取消，我们就回到第一个菜单：‘欢迎光临艾瑞克的咖啡店’。但如果顾客确认订单，那么我们应该保存并打印它。”
- en: “Okay, I understand that we should print it to prepare the drinks,” Erik said.
    “But why should we save it? And what do you mean by *saving* the order?”
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: “好的，我明白了，我们应该打印出来准备饮料，”艾瑞克说。“但为什么我们要保存它？你说的*保存*订单是什么意思？”
- en: “First of all, it would be good at the end of the day to check how many of your
    friends you served in your coffee shop, don’t you think?”
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: “首先，在一天结束时检查你在咖啡店为多少朋友服务，你不觉得这很好吗？”
- en: “But I know already,” Erik said. “I prepared five drinks that day.”
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: “但我知道了，”艾瑞克说。“那天我准备了五种饮料。”
- en: “But we’re talking about a *real* coffee shop, don’t forget. They work every
    day, and they serve tens and hundreds of customers. A couple of my friends worked
    in different coffee shops, and I can assure you, they know very well how many
    customers they serve each day.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: “但我们谈论的是一个*真正的*咖啡店，别忘了。他们每天都在工作，为成百上千的顾客服务。我的几个朋友在不同的咖啡店工作过，我可以向你保证，他们非常清楚每天为多少顾客服务。
- en: “The other reason,” Simon continued, “is that the coffee shop manager should
    know what they have in the shop and what they need to order for their inventory.
    Remember we talked about changing menus? Suppose they didn’t order the caramel
    flavor in time, and they had to remove it from the menu. Why didn’t they order
    it? Because they didn’t count how many portions of caramel flavor their customers
    ordered. If we save all the orders and analyze them, we can order flavors and
    toppings before we don’t have enough.”
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: “另一个原因是，”西蒙继续说，“咖啡店经理应该知道店里有什么，以及他们需要为库存订购什么。记得我们讨论过更改菜单吗？假设他们没有及时订购焦糖口味，不得不从菜单中删除它。为什么他们没有订购它？因为他们没有计算顾客订购了多少份焦糖口味。如果我们保存所有订单并分析它们，我们就可以在我们没有足够库存之前订购口味和配料。”
- en: “I didn’t think about that,” Erik said. “Yes, it’s a good idea to save the orders.
    But how can we do that?”
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “我没有想过这一点，”埃里克说，“是的，保存订单是个好主意。但我们怎么做到呢？”
- en: “There are several ways,” Simon said. “We can use files, or we can use databases.
    Of course, all serious applications use databases. I think we should start with
    files, and then, if you’re brave enough, we can use databases too.”
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: “有几种方法，”西蒙说，“我们可以使用文件，或者我们可以使用数据库。当然，所有严肃的应用程序都使用数据库。我认为我们应该从文件开始，然后，如果你足够勇敢，我们也可以使用数据库。”
- en: “Yes, I want my program to be like those *serious* applications!” Erik said.
    “I want to try databases too!”
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，我想我的程序像那些*严肃的*应用程序一样！”埃里克说，“我还想尝试数据库！”
- en: “Good,” Simon said, “but for now let’s finish with the main menu. We’ll get
    to saving orders soon. Speaking of orders,” Simon said as he took another piece
    of paper, “here is what’s inside that ‘Get order’ block.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: “好，”西蒙说，“但现在让我们先完成主菜单。我们很快就会保存订单。说到订单，”西蒙说着又拿了一张纸，“这就是‘获取订单’块里面的内容。
- en: '![](../Images/06-02-get-order-flow.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-02-get-order-flow.png)'
- en: '*Your Turn!* Create your own diagram'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*你的机会来了!* 创建你自己的图表'
- en: If you decided to work on a different kind of shop, create a diagram for your
    `get_order()` function.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你决定经营不同类型的商店，为你的`get_order()`函数创建一个图表。
- en: “We have written this function already. We just didn’t call it a function. You
    see, we already created these dialogues to ask the customer’s name, drink, flavor,
    and topping. There’s only one thing that we haven’t done yet. Do you see it?”
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: “我们已经编写了这个函数。我们只是没有称它为函数。你看，我们已经在这些对话中创建，以询问顾客的名字、饮料、口味和配料。我们还没有做的事情只有一件。你看到了吗？”
- en: “Return order?” Erik asked. “We didn’t do it, but I don’t know what it means
    here.”
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: “返回订单？”埃里克问道，“我们没有做，但我不确定这里是什么意思。”
- en: “Here’s what your order looks like, agreed?
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: “这就是你的订单看起来像的，同意吗？”
- en: '![](../Images/06-03-get-order-output.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-03-get-order-output.png)'
- en: “We use the function `get_order()` to collect all this information, but instead
    of returning four separate values for name, drink, flavor, and topping, I want
    to return a single *thing* that I would call an order. And that single thing contains
    several values that go together as a whole.”
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: “我们使用`get_order()`函数收集所有这些信息，但不是返回四个单独的值，如名字、饮料、口味和配料，我想返回一个单一的东西，我会称之为订单。而这个单一的东西包含几个作为整体一起的值。”
- en: “I know, you want to use a list here!” Erik shared his insight.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: “我知道，你在这里想用列表！”埃里克分享了他的洞察。
- en: “That’s one of the options, but I have something better in mind. In Python,
    we have *dictionaries*. What is a normal dictionary?”
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: “这是一个选项，但我心里想的是更好的东西。在Python中，我们有*字典*。什么是正常的字典？”
- en: “It’s a book with words and their meanings,” Erik answered. “Or translations,
    if it’s an English-German dictionary.”
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: “这是一本包含单词及其含义的书，”埃里克回答，“或者如果是一本英德词典，就是翻译。”
- en: “Right!” Simon said. “You have a word, and a value that’s related to the word.
    It could be a word and its meaning or translation, like this,” and he draw a diagram.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: “没错！”西蒙说，“你有一个词，以及与这个词相关的值。这可能是一个词及其含义或翻译，就像这样，”然后他画了一个图表。
- en: '![](../Images/06-04-dictionary.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-04-dictionary.png)'
- en: “In Python, a dictionary uses words that we call *keys* to get the *values*
    that are related to them. Let’s look at your order. You have a key called `name`,
    and its value is `Erik`. You have another key called `drink`, and its value is
    `decaf`, and so on. The whole dictionary is called `order`, and this is what we’re
    going to return as a result from this function.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: “在Python中，字典使用我们称之为*键*的单词来获取与它们相关的*值*。让我们看看你的订单。你有一个名为`name`的键，其值是`Erik`。你还有一个名为`drink`的键，其值是`decaf`，等等。整个字典被称为`order`，这就是我们将从这个函数中返回的结果。
- en: '![](../Images/06-05-dictionary-python.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![Python字典](../Images/06-05-dictionary-python.png)'
- en: “Let’s practice with REPL again,” Simon suggested. “Click REPL to get to the
    interactive session.”
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们再次用REPL练习，”西蒙建议。“点击REPL进入交互会话。”
- en: 'Erik clicked the REPL icon and switched to the window with an interactive session.
    Erik’s looked like this, but your version might look a little different—that’s
    okay:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克点击了REPL图标，切换到了包含交互会话的窗口。艾瑞克的看起来是这样的，但你的版本可能看起来略有不同——这是正常的：
- en: '[PRE0]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: “We’ll start by creating an empty dictionary called `order`. To create a dictionary
    in Python, we use curly braces, `{}`, to make them look different from lists,
    which use square brackets, `[]`. Type `order = {}` and then press Enter. This
    will be your order.”
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: “我们将从创建一个名为`order`的空字典开始。在Python中创建字典时，我们使用花括号`{}`，使它们看起来与使用方括号`[]`的列表不同。输入`order
    = {}`然后按Enter。这将是你订单的内容。”
- en: 'Erik typed:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克输入了：
- en: '[PRE1]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: “Now we can add items to your order. Let’s start with the name. Type `order['name']
    = 'Erik'`. Then try to print the order with a simple `print()` function.”
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们可以向你的订单中添加项目。让我们从名字开始。输入`order['name'] = 'Erik'`。然后尝试使用简单的`print()`函数打印订单。”
- en: 'Erik typed:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克输入了：
- en: '[PRE2]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: “But you said that dictionaries should use curly braces. Why do we use square
    brackets here?” Erik asked.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: “但你说过字典应该使用花括号。为什么这里我们使用方括号？”艾瑞克问。
- en: “Good question.” Simon was so used to this Python feature that he couldn’t find
    a good way to explain it right away. He started, “Well, we use curly braces to
    *create* a dictionary. But we use square brackets to *access* the dictionary when
    we want to get an item from it. In this sense, it’s similar to lists—when you
    want to get an item from a list, you use square brackets. The difference is that
    with lists you use *indices* that are integer numbers. With dictionaries you use
    *keys* that are usually strings. If you had a normal dictionary, and you used
    its index—like 546—to get a word’s meaning or translation, that would be inconvenient,
    wouldn’t it? Instead, you use the word itself, like ‘dog,’ and finding it is fast.”
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: “好问题。”西蒙对这个Python特性太熟悉了，以至于他找不到一个很好的方法立即解释。他开始说：“嗯，我们使用花括号来*创建*字典。但当我们想要从字典中获取一个项目时，我们使用方括号来*访问*它。在这方面，它与列表相似——当你想要从列表中获取一个项目时，你使用方括号。区别在于，对于列表，你使用*索引*，它们是整数。对于字典，你使用*键*，通常是字符串。如果你有一个普通的字典，并且使用它的索引——比如546——来获取一个单词的意义或翻译，那会不方便，不是吗？相反，你使用单词本身，比如‘dog’，找到它会很快。”
- en: “Yes, right,” Erik said. “Should I add the drink, flavor, and topping now?”
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，没错，”艾瑞克说。“我现在应该添加饮料、口味和配料吗？”
- en: “Great idea, go ahead!” Simon said.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: “好主意，继续！”西蒙说。
- en: 'Erik continued in his interactive session:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克在他的交互会话中继续：
- en: '[PRE3]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: “Notice here,” Simon said, “that your keys and values always go in pairs with
    a colon, `:`, between them.”
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: “注意这里，”西蒙说，“你的键和值总是以冒号`:`分隔成对出现。”
- en: '*Your Turn!* Learn dictionaries with REPL'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '*轮到你了！* 使用REPL学习字典'
- en: Open REPL and work with dictionaries. You can repeat Erik’s commands or create
    your own dictionaries. Try using different keys. Try to store a number instead
    of a string. Does it work?
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 打开REPL并处理字典。你可以重复艾瑞克的命令或创建你自己的字典。尝试使用不同的键。尝试存储一个数字而不是一个字符串。它工作吗？
- en: “This is cool, I like it!” Erik said. “But can I print it in a better way, like
    I printed it before?”
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: “这很酷，我喜欢！”艾瑞克说。“但我能以更好的方式打印它，就像我之前打印的那样吗？”
- en: “Of course,” Simon said. “I think you should write a new function for that.
    But we’d better switch back to the editor.”
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，”西蒙说。“我认为你应该为这个写一个新的函数。但我们最好还是回到编辑器。”
- en: “That will be my third function,” Erik said.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: “那将是我的第三个函数，”艾瑞克说。
- en: “Are you still counting?” Simon smiled. “I’m sure you’ll soon lose count of
    the functions you’ve written.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: “你还在计数吗？”西蒙微笑着说。“我相信你很快就会忘记你写了多少个函数。”
- en: “Now let’s start writing the main menu program in your editor,” Simon continued.
    “We’ll use a *top-down* design approach here.”
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: “现在让我们在你的编辑器中开始编写主菜单程序，”西蒙继续说。“我们将在这里使用自顶向下的设计方法。”
- en: “What’s that?” Erik asked.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: “那是什么？”艾瑞克问。
- en: '“It’s like what I just showed you: first, we develop the algorithm for the
    whole program. We decide what the big blocks are and how we’ll go from one to
    another. That usually includes decisions like whether you’ll let users confirm
    or cancel the order.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: “就像我刚才给你展示的那样：首先，我们为整个程序开发算法。我们决定大块是什么以及我们将如何从一个转到另一个。这通常包括像是否让用户确认或取消订单这样的决定。”
- en: “We can develop the main program and use functions like `get_order()` or `print_order()`.
    It doesn’t matter if we don’t have those functions yet. Until we write the real
    ones, we can write very simple functions that just print a message like ‘I am
    a function print_order().’ Some people call them *placeholders*. Then, when we
    see that the main menu works well and calls the right functions, we can write
    the real functions.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: “我们可以开发主程序并使用像`get_order()`或`print_order()`这样的函数。即使我们还没有这些函数也无关紧要。在我们编写真正的函数之前，我们可以编写非常简单的函数，比如只打印一条消息，比如‘我是一个print_order()函数。’有些人把它们称为*占位符*。然后，当我们看到主菜单工作得很好并且调用了正确的函数时，我们可以编写真正的函数。”
- en: “Let me help you.” Simon took the keyboard. “First, we’ll create a new file
    and save it as `main_menu.py`. Then we’ll create a new function called `main_menu()`
    with the `def` keyword and parentheses.”
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: “让我来帮你。”西蒙拿起键盘，“首先，我们将创建一个新文件并将其保存为`main_menu.py`。然后我们将使用`def`关键字和括号创建一个名为`main_menu()`的新函数。”
- en: “Another function?” Erik asked.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: “另一个函数？”埃里克问道。
- en: “Yes, in programming we usually create functions for everything. The main program
    is usually very short, and it calls one of those functions. Then that function
    calls other functions, and so on. It’s a good practice to write even your main
    menu as a function.”
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，在编程中我们通常为每件事创建函数。主程序通常非常短，它调用那些函数之一。然后那个函数调用其他函数，依此类推。将主菜单也写成函数是一个好习惯。”
- en: Simon continued, “Look at the diagram again. Do you see these arrows that go
    back to the ‘Start’? They usually mean that in your algorithm you’re going to
    *repeat* something. As soon as we return to the ‘Start’, we’re going through the
    same algorithm again and again. And to repeat something in a program, we use .
    . . what?”
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙继续说，“再看看图表。你看到那些指向‘开始’的箭头了吗？它们通常意味着在你的算法中你将*重复*某些操作。一旦我们回到‘开始’，我们就会一遍又一遍地通过相同的算法。要在程序中重复某些操作，我们使用……什么？”
- en: '![](../Images/06-06-main-menu.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-06-main-menu.png)'
- en: “A loop!” Erik answered.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: “一个循环！”埃里克回答。
- en: '“Exactly right!” Simon confirmed. “We used two types of loops already: a `for`
    loop and a `while` loop. Which one are you going to use here?”'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: “完全正确！”西蒙确认，“我们已经使用了两种类型的循环：`for`循环和`while`循环。你打算在这里使用哪一种？”
- en: '“I think it should be a `while` loop,” Erik said. “This main menu looks similar
    to what we did in the drinks menu: repeat questions and check what the user answered.”'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: “我认为应该是一个`while`循环，”埃里克说，“这个主菜单看起来和我们在饮料菜单中做的一样：重复问题并检查用户的回答。”
- en: '“I agree,” Simon said. “Look at the code where you wrote the menu as a function.
    Remember, we used `while True:` there, and we checked what the user entered. What
    do you think we should check here? I’ll give you a hint: on diagrams, these places
    where we have to make a decision are usually drawn as a diamond shape.”'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: “我同意，”西蒙说，“看看你把菜单作为函数写的代码。记住，我们那里用了`while True:`，并且检查了用户输入的内容。你认为我们应该在这里检查什么？给你一个提示：在图表中，我们不得不做决定的地方通常画成菱形形状。”
- en: '![](../Images/06-07-main-menu-rhombus.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-07-main-menu-rhombus.png)'
- en: “I see it!” Erik said. “It’s where we ask the user if they want to confirm or
    cancel the order.”
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: “我看到了！”埃里克说，“这就是我们询问用户是否要确认或取消订单的地方。”
- en: “Okay, let’s start writing it,” Simon suggested.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: “好的，让我们开始写它，”西蒙建议。
- en: 'Erik wrote:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克写道：
- en: '[PRE4]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: “What’s next?” he asked.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: “接下来是什么？”他问道。
- en: “Look at the diagram,” Simon said.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: “看看图表，”西蒙说。
- en: “Get order?” Erik said.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: “获取订单？”埃里克说。
- en: '“Right! And remember that the `get_order()` function will return a dictionary
    with the order. The dictionary will contain the customer’s name, drink, flavor,
    and all that. We’ll put that dictionary into a variable called `order` in our
    main menu.” Simon added a line to Erik’s code:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: “对！记住，`get_order()`函数将返回一个包含订单的字典。这个字典将包含顾客的名字、饮料、口味等等。我们将把这个字典放入主菜单中的`order`变量。”西蒙在埃里克的代码中添加了一行：
- en: '[PRE5]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: “What’s next?” he asked his brother.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: “接下来是什么？”他问他的兄弟。
- en: “Now we have to ask the customer if they confirm the order,” Erik said.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们必须询问顾客是否确认订单，”埃里克说。
- en: '“Good. But we have to show them the order before asking, I think,” and Simon
    added a few more lines:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: “很好。但我认为在询问之前我们必须显示订单，”西蒙又添加了几行代码：
- en: '[PRE6]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '“Look here,” Simon said to Erik, “I used the `order` variable that I received
    from `get_order()` as an argument for the next function, `print_order()`. This
    is very common in programming: we call one function to do something, it returns
    a result, and then we use that result as an input for another function.”'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: “看这里，”西蒙对埃里克说，“我使用了从`get_order()`接收到的`order`变量作为下一个函数`print_order()`的参数。这在编程中非常常见：我们调用一个函数来做某事，它返回一个结果，然后我们使用那个结果作为另一个函数的输入。”
- en: '![](../Images/06-08-call-return.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-08-call-return.png)'
- en: '“I see,” Erik said. “Like in a movie theater: the cashier prints a ticket and
    gives it to you. Then you take the ticket, go to the entrance, give the ticket
    to the attendants at the entrance, and they check it.”'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: “我明白了，”埃里克说。“就像在电影院里：收银员打印一张票并给你。然后你拿着票，去入口，把票给入口处的检票员，他们会检查。”
- en: '“Yes, good analogy, Erik! Let’s continue it: we just received an answer to
    the question about whether the customer wants to confirm the order. Now, as you
    just said, we have to *check* the answer and decide what to do next. Like in a
    movie theater, they check if your ticket is correct and decide whether to let
    you in or not. Let’s add these lines. Look at the diagram. If the user answers
    ‘Yes’, what should we do?”'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，很好的类比，埃里克！让我们继续：我们刚刚收到了关于客户是否想要确认订单的答案。现在，正如你刚才说的，我们必须*检查*这个答案并决定下一步做什么。就像在电影院里，他们会检查你的票是否正确，并决定是否让你进去。让我们添加这些行。看看这个图。如果用户回答‘是’，我们应该做什么？”
- en: '![](../Images/06-09-main-menu.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-09-main-menu.png)'
- en: “Save and print the order,” Erik answered, looking at Simon’s drawing.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: “保存并打印订单，”埃里克看着西蒙的草图回答。
- en: “Okay, and if the user wants to cancel and responds ‘No’?”
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: “好的，如果用户想要取消并回答‘不’呢？”
- en: “We should do nothing, just return to the beginning. But I don’t know how to
    do it. You just have an arrow there.”
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: “我们应该什么都不做，只是返回到开始处。但我不知道怎么做到。你那里只有一个箭头。”
- en: '“There is a simple word for this arrow in Python—`continue`. It means, ‘Don’t
    execute the rest of the loop, and continue the loop from the beginning.’ Pretty
    easy, huh?” and Simon added these lines to the function:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: “Python中有一个简单的词来表示这个箭头——`continue`。它的意思是，‘不要执行循环的其余部分，并从循环的开始处继续。’很简单，对吧？”西蒙补充了这些行到函数中：
- en: '[PRE7]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '“I see that you’ve added two more functions: `save_order()` and `print_order()`,”
    Erik said. “But we haven’t written them yet.”'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: “我注意到你添加了两个额外的函数：`save_order()`和`print_order()`，”埃里克说。“但我们还没有写它们。”
- en: “Let’s write them!” Simon exclaimed. “We’ll write very simple functions for
    now. They will just print something like ‘saving order . . . ,’ so we can see
    that they were called. Later, we’ll improve them so they do more useful things.”
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们写它们！”西蒙兴奋地说。“我们现在将写非常简单的函数。它们将只打印类似‘保存订单...’的东西，这样我们就可以看到它们被调用了。稍后，我们会改进它们，让它们做更有用的事情。”
- en: 'Simon added the functions below the `main_menu()` function:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙在`main_menu()`函数下方添加了以下函数：
- en: '[PRE8]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: He explained it to Erik, “The `get_order()` function is what you have written
    already. We’ll transfer your code here soon, but for now it does nothing. There
    are no menus and no dialogue, but it has to return the order. Remember, the order
    will be a dictionary with keys like ‘name’ and ‘drink’, but for now the function
    just returns an empty dictionary, which is a pair of curly braces. So far, so
    good?”
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 他向埃里克解释说，“`get_order()`函数就是你已经写好的。我们很快就会把你的代码转到这里，但现在它什么也不做。没有菜单和对话框，但它必须返回订单。记住，订单将是一个包含像‘name’和‘drink’这样的键的字典，但现在函数只返回一个空字典，即一对大括号。到目前为止，一切顺利？”
- en: “Yes,” Erik answered. “So you mean we’ll copy my previous functions from that
    previous file into this one, right?”
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，”埃里克回答道。“那么你的意思是，我们将从那个旧文件中复制我的先前函数到这个文件中，对吗？”
- en: “Right,” Simon said. “Sometimes when a program becomes larger, it’s a good idea
    to group functions in separate files. But in our case, it’s easier to keep everything
    in one file.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: “没错，”西蒙说。“有时候当程序变得更大时，将函数分组到单独的文件中是个好主意。但在这个案例中，把所有东西都放在一个文件里更容易。
- en: “The `print_order()` function,” Simon continued, “just prints the order that
    it gets from the argument. In this case, we’ll use the standard Python `print()`
    function, but we’ll make it prettier later. You’ve done that already, remember?”
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: “`print_order()`函数，”西蒙继续说，“只是打印它从参数中获取的订单。在这种情况下，我们将使用标准的Python `print()`函数，但稍后我们会让它更漂亮。你已经做到了，记得吗？”
- en: “Sure!” Erik said. “I think we can make it look like a real coffee shop receipt.”
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: “当然！”埃里克说。“我认为我们可以让它看起来像一张真正的咖啡店收据。”
- en: “Good idea,” Simon said. “The `save_order()` function does nothing except print
    ‘Saving order . . .’. That’s okay for now—we’ll write it later.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: “好主意，”西蒙说。“`save_order()`函数除了打印‘保存订单...’之外什么都不做。现在还过得去——我们稍后会写它。”
- en: “Now we’re ready to call the `main_menu()` function and test our algorithm.
    Go ahead and add the call for `main_menu()` at the end and run it. Your main program
    will consist of only this function call.”
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们准备好调用`main_menu()`函数并测试我们的算法了。请将`main_menu()`的调用添加到末尾并运行它。你的主程序将只包含这个函数调用。”
- en: 'Erik added the function call, so the whole program now looked like this:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克添加了函数调用，所以整个程序现在看起来是这样的：
- en: Listing 6.1 A main menu with simple functions
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 列表6.1 带有简单函数的主菜单
- en: '[PRE9]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '*Your Turn!* Create a main menu'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '*轮到你了!* 创建一个主菜单'
- en: Write a main menu function similar to the one Erik just created. Feel free to
    change the dialogue messages.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: “编写一个类似于埃里克刚刚创建的主菜单函数。你可以随意更改对话框消息。”
- en: 'He clicked Run and saw this output:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 他点击了运行，看到了这个输出：
- en: '[PRE10]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'He typed `y` and got this:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 他输入了`y`并得到了这个输出：
- en: '[PRE11]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: “Why does it give me the ‘Check your order’ again?” Erik asked.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: “为什么它又给我‘检查你的订单’？”埃里克问道。
- en: “Because it’s a loop!” Simon said. “After you answered `y` to the confirmation
    question, it returns to the beginning of the loop. And because we haven’t added
    your menu dialogue yet, it prints an empty order. Everything works as expected.
    Now try answering `n` to the question.”
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: “因为这是一个循环！”西蒙说。“在你回答确认问题`y`之后，它返回到循环的开始。因为我们还没有添加你的菜单对话框，所以它打印了一个空的订单。一切按预期工作。现在尝试回答问题`n`。”
- en: 'Erik typed `n` and got this output:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克输入了`n`并得到了这个输出：
- en: '[PRE12]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: “Do you see the difference?” Simon asked.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: “你看到区别了吗？”西蒙问道。
- en: “I see that it didn’t print ‘Saving order . . .’ this time. That means it followed
    the short arrow on the right side of your diagram.”
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: “我看到这次没有打印‘保存订单...’，这意味着它遵循了你图示右侧的短箭头。”
- en: '![](../Images/06-10-main-menu.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06-10-main-menu.png)'
- en: “Excellent!” Simon was glad to see that Erik really understood his algorithm
    diagram.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: “太棒了！”西蒙很高兴看到埃里克真的理解了他的算法图。
- en: “I think we made good progress today—our main menu is working. Tomorrow we’ll
    write the actual functions that will do what we want. For now, let’s wrap up and
    review what you learned today.”
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: “我认为我们今天取得了很好的进展——我们的主菜单正在工作。明天我们将编写实际执行我们想要的功能的函数。现在，让我们总结一下今天所学的内容。”
- en: “We used the `while` loop again!” Erik said.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: “我们又使用了`while`循环！”埃里克说。
- en: “Right! And you used what you’ve learned while working on menus,” Simon confirmed.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: “对！而且你在制作菜单时使用了你所学的知识，”西蒙确认说。
- en: “Also, we learned about dictionaries. They are like normal dictionaries, but
    you can store anything there, not just word descriptions.”
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: “此外，我们还学习了字典。它们就像普通的字典一样，但你可以存储任何东西，而不仅仅是单词描述。”
- en: “Yes, exactly! In our simple `order` dictionary, we keep names, drinks, and
    flavors. But in a more complex dictionary, you can keep numbers—prices, for example—and
    even lists and other dictionaries. Dictionaries are really useful in Python, and
    you’ll use them all the time.”
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，正是这样！在我们的简单`order`字典中，我们保存名称、饮料和口味。但在一个更复杂的字典中，你可以保存数字——例如价格——甚至列表和其他字典。字典在Python中非常有用，你将经常使用它们。”
- en: “Also, I liked how you created simple functions just to test the main menu,”
    Erik said. “You said it’s called ‘top-down,’ right?”
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: “此外，我也喜欢你创建简单函数来测试主菜单的方式，”埃里克说。“你说这是‘自顶向下’的，对吗？”
- en: “Exactly,” Simon said. “There is also a ‘bottom-up’ approach, as you could guess.
    In that case, people create functions first, test them properly, and then combine
    them into a large program. In some sense, we used this approach too, when you
    created and tested your first `menu()` function. Now we’re going to use your function
    in our large program.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: “正是这样，”西蒙说。“还有另一种‘自底向上的’方法，正如你所猜测的。在这种情况下，人们首先创建函数，正确测试它们，然后将它们组合成一个大的程序。在某种程度上，我们在你创建和测试你的第一个`menu()`函数时也使用了这种方法。现在我们将使用你的函数在我们的大型程序中。”
- en: “Time to take a rest now,” Simon continued. “Tomorrow, we’ll work on the functions
    we put in our main menu.”
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: “现在是休息的时候了，”西蒙继续说，“明天，我们将处理我们放在主菜单中的函数。”
- en: New things you have learned today
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 今天你学到的新知识
- en: '*Top-down approach*—First you develop the “big picture” of your application
    and use simple functions that just print something instead of doing real work.
    When the main algorithm works properly, you develop the actual functions.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*自顶向下的方法*——首先，你开发你应用程序的“大图景”，并使用仅打印一些东西的简单函数，而不是做实际的工作。当主算法正常工作时，你开发实际的函数。'
- en: '*Dictionary*—In Python, dictionaries can store pairs of keys and values. You
    can assign values to keys, and you can quickly find them with their keys.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*字典*—在Python中，字典可以存储键值对的组合。您可以为键分配值，并且可以通过它们的键快速找到它们。'
- en: '*Flowchart diagram symbols*—Programmers usually use diagrams to discuss their
    algorithms before they start writing code. Usually, a rectangle means some process,
    and a diamond shape means a decision point with a Yes/No question. There are also
    symbols for input, using documents, using databases, and others. We’ll introduce
    them later.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*流程图符号*—程序员通常在开始编写代码之前使用图表来讨论他们的算法。通常，一个矩形表示某个过程，而菱形形状表示一个带有是/否问题的决策点。还有表示输入、使用文档、使用数据库等符号。我们将在后面介绍它们。'
- en: Code for this chapter
  id: totrans-141
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本章代码
- en: 'You can find the code for this chapter here: [https://github.com/pavelanni/pythonicadventure-code/tree/main/ch06](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch06).'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在此处找到本章的代码：[https://github.com/pavelanni/pythonicadventure-code/tree/main/ch06](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch06).
