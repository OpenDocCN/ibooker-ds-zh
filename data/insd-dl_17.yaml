- en: Appendix. Setting up Colab
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录。设置Colab
- en: All of the code in this book is written using Python 3 as a Jupyter notebook.
    While you can set up Jupyter and the software libraries on your own computer using
    Anaconda ([www.anaconda.com/products/individual](https://www.anaconda.com/products/individual)),
    this book takes the approach of using Google’s Colab service ([https://colab.research.google.com](https://colab.research.google.com)).
    Google Colab has all the needed software libraries preinstalled and provides access
    to a free graphics processing unit (GPU) for limited periods. This is enough for
    you to get started learning without having to invest hundreds or thousands of
    dollars in a computing setup. This appendix walks through how to get set up with
    Google Colab; I encourage you to get the Pro version, which is currently only
    a few dollars a month. This is not a sponsored recommendation—I don’t get a kickback,
    and I’ve never worked for Google. It’s just a product I like that I think is making
    deep learning more accessible.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的所有代码都是使用Python 3作为Jupyter笔记本编写的。虽然你可以使用Anaconda（[www.anaconda.com/products/individual](https://www.anaconda.com/products/individual)）在你的电脑上自行设置Jupyter和软件库，但本书采用的方法是使用Google的Colab服务（[https://colab.research.google.com](https://colab.research.google.com)）。Google
    Colab预先安装了所有需要的软件库，并提供有限期限内的免费图形处理单元（GPU）。这足以让你开始学习，而无需投资数百或数千美元的计算机配置。本附录将指导你如何设置Google
    Colab；我鼓励你获取专业版，目前每月只需几美元。这不是一个赞助推荐——我不会得到任何回扣，我从未为Google工作。这只是我喜欢的一个产品，我认为它使深度学习更容易获得。
- en: A.1 Creating a Colab session
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: A.1 创建Colab会话
- en: Go to [https://colab.research.google.com/notebooks/intro.ipynb](https://colab.research.google.com/notebooks/intro.ipynb),
    which gives you a default introductory notebook, as shown in figure A.1\. Click
    the Sign In button in the top-right corner to sign in to Colab so you can save
    your work and use the GPUs.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 前往[https://colab.research.google.com/notebooks/intro.ipynb](https://colab.research.google.com/notebooks/intro.ipynb)，它提供了一个默认的入门笔记本，如图A.1所示。点击右上角的登录按钮登录到Colab，这样你就可以保存你的工作并使用GPU。
- en: '![](../Images/APPA_F01_Raff.png)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/APPA_F01_Raff.png)'
- en: Figure A.1 The first screen you should see when you go to Colab for the first
    time. The Sign In button is in the top-right corner.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.1 当你第一次访问Colab时应该看到的第一个屏幕。登录按钮位于右上角。
- en: When you click Sign In, you’ll be presented with Google’s standard login screen
    (figure A.2). If you already have a Google account, you can log in with that;
    otherwise, click the Create Account button, and you will be guided through the
    account creation process.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 点击登录后，你会看到Google的标准登录屏幕（图A.2）。如果你已经有了一个Google账户，你可以用那个账户登录；否则，点击创建账户按钮，系统会引导你完成账户创建过程。
- en: '![](../Images/APPA_F02_Raff.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/APPA_F02_Raff.png)'
- en: Figure A.2 Google’s standard sign-in page is used for Colab. Use your current
    Google account if you have one, or click Create Account to be guided through creating
    an account.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.2 Colab使用的是Google的标准登录页面。如果你有一个当前的Google账户，请使用它；否则，点击创建账户按钮，系统会引导你创建账户。
- en: Once signed in, you’ll go back to the first screen in figure A.1\. This first
    notebook Colab shows you is also a mini-tutorial about Colab and Jupyter, if you
    aren’t familiar with them.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 登录后，你会回到图A.1中的第一个屏幕。这个Colab显示的第一个笔记本也是一个关于Colab和Jupyter的迷你教程，如果你不熟悉它们的话。
- en: Adding a GPU
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加GPU
- en: Now let’s talk about the free GPU. Colab does not *guarantee* you a GPU, and
    no GPU is provided by default. You must explicitly request that a GPU be attached
    to your notebook. To access a GPU with Colab, choose Runtime > Change Runtime
    Type from the menu at the top of the web page (figure A.3).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来谈谈免费的GPU。Colab不保证你一定能获得GPU，默认情况下也不提供GPU。你必须明确请求将GPU附加到你的笔记本上。要使用Colab访问GPU，请从网页顶部的菜单中选择运行
    > 更改运行类型（图A.3）。
- en: '![](../Images/APPA_F03_Raff.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/APPA_F03_Raff.png)'
- en: Figure A.3 To attach a GPU to your notebook, choose Runtime > Change Runtime
    Type.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.3 要将GPU附加到你的笔记本上，请选择运行 > 更改运行类型。
- en: In the next window, the Hardware Accelerator list gives you the options None,
    GPU, and TPU, as shown in figure A.4\. The None option means CPU-only and is the
    default. GPU and TPU add resources on top of the existing CPU. Both GPUs and TPUs
    are called *co-processors* and provide more specialized functionality. Currently,
    TPU support in PyTorch is very new, so I recommend selecting the GPU option (as
    I’ve done for this entire book). Doing so restarts the notebook (you’ll lose any
    work you’ve done, so do this early), and it should return with a GPU present and
    ready to use.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个窗口中，硬件加速器列表提供了以下选项：None、GPU 和 TPU，如图 A.4 所示。None 选项表示仅 CPU，这是默认设置。GPU 和
    TPU 在现有的 CPU 之上增加了资源。GPU 和 TPU 都被称为**协处理器**，并提供更专业的功能。目前，PyTorch 中的 TPU 支持非常新，所以我建议选择
    GPU 选项（正如我在整本书中所做的那样）。这样做将重新启动笔记本（您将丢失所有已完成的工作，因此请尽早这样做），并且应该返回一个带有 GPU 并准备使用的笔记本。
- en: '![](../Images/APPA_F04_Raff.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/APPA_F04_Raff.png)'
- en: Figure A.4 The None option means CPU-only. Both other options also have a CPU.
    Select the GPU option to add a GPU to your notebook.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.4 None 选项表示仅 CPU。其他两个选项也包含 CPU。选择 GPU 选项以将 GPU 添加到您的笔记本中。
- en: GPUs are expensive and in-demand commodities, so you do not have *unlimited*
    access to this GPU. There is no public formula, but current demand for GPUs and
    how much you personally are using GPUs will impact the quality of the GPU you
    get. Colab has a priority queue system to even out the resources for everyone—if
    demand is very high, you may not be able to get a GPU when you request one. If
    you can’t get a GPU (or one that is as fast as you would like), wait a few hours
    (or potentially a day, depending on your usage and Colab’s demand) and try again.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: GPU 是昂贵且需求量大的商品，因此您并不能**无限**地访问这个 GPU。没有公开的公式，但当前对 GPU 的需求以及您个人使用 GPU 的程度将影响您获得的
    GPU 质量。
- en: 'As I mentioned earlier, while doing so is not required, I encourage you to
    sign up for Colab Pro to make your life easier ([https://colab.research.google.com/signup](https://colab.research.google.com/signup)).
    The Pro version does not fundamentally change how Colab works, but it gives you
    higher priority for GPU access and longer runtimes when using Colab. Colab Pro
    is only $10 a month: it’s a pretty good deal for portable GPU access and far cheaper
    than diving into new hardware. In my experience, I found Colab Pro has always
    meant that I got a GPU without issue.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如我之前提到的，虽然这样做不是必需的，但我鼓励您注册 Colab Pro 以简化您的生活([https://colab.research.google.com/signup](https://colab.research.google.com/signup))。专业版
    Colab 并没有从根本上改变 Colab 的工作方式，但它为您提供了更高的 GPU 访问优先级和更长的运行时间。Colab Pro 每月仅需 10 美元：对于便携式
    GPU 访问来说，这是一个相当不错的交易，而且比购买新硬件便宜得多。根据我的经验，我发现 Colab Pro 总是意味着我可以无问题地获得 GPU。
- en: Testing your GPU
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试您的 GPU
- en: 'Click the Save button in the Notebook Settings window, and you’ll have access
    to an Nvidia GPU in your Colab session! You can double-check this by running the
    following command:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在笔记本设置窗口中点击“保存”按钮，您将在 Colab 会话中访问到 Nvidia GPU！您可以通过运行以下命令来双重检查：
- en: '[PRE0]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `!` is a special function of a Jupyter notebook. Instead of running Python
    code, it runs the code on the command line of the host computer. `nvidia-smi`
    is a program that gives you information about all the GPUs running in your computer
    and their current utilization. I ran this command and got the output shown in
    figure A.5, indicating that a Tesla P4 with 7.6 GB of RAM was allocated for my
    use. You may get different results when you run this, and that’s OK. Not having
    exact control is the price we pay for a free GPU.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '`!` 是 Jupyter 笔记本的一个特殊功能。它不是运行 Python 代码，而是在主机计算机的命令行上运行代码。`nvidia-smi` 是一个程序，它提供了您计算机上所有
    GPU 的信息以及它们的当前利用率。我运行了这个命令，并得到了图 A.5 中所示的输出，表明为我的使用分配了一个带有 7.6 GB RAM 的 Tesla
    P4。您运行时可能会得到不同的结果，这是正常的。没有精确控制是我们为免费 GPU 支付的代价。'
- en: '![](../Images/APPA_F05_Raff.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/APPA_F05_Raff.png)'
- en: Figure A.5 Example output of the `nvidia-smi` command. If you see something
    similar to this, everything is ready to use.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.5 `nvidia-smi` 命令的示例输出。如果您看到类似的内容，那么一切准备就绪，可以使用了。
- en: That’s all you need to do to get ready to run code with Colab. It comes with
    most machine learning libraries preinstalled and ready to go. For example, this
    book uses seaborn and Matplotlib for easy plotting/visualization of our results,
    NumPy for initial data loading and to work with arrays, and pandas to examine
    our results. The `tqdm` library is another useful utility that provides easy access
    to progress bars with an estimated completion time, as shown in figure A.6.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是你需要做的，以便准备好在 Colab 中运行代码。它预装了大多数机器学习库，并已准备好使用。例如，这本书使用 seaborn 和 Matplotlib
    来轻松绘制/可视化我们的结果，使用 NumPy 进行初始数据加载和处理数组，以及使用 pandas 来检查我们的结果。`tqdm` 库是另一个有用的实用工具，它提供了带有估计完成时间的进度条，如图
    A.6 所示。
- en: '![](../Images/APPA_F06_Raff.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/APPA_F06_Raff.png)'
- en: Figure A.6 The training code in this book creates progress bars like this for
    every call. This is useful because training a neural network can take a while,
    and you can judge how long you have left. Five minutes? Grab a coffee. An hour?
    Read another chapter of a riveting book about a man with a hat and cool outfit
    espousing tidbits of learning wisdom.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.6 本书中的训练代码为每次调用创建这样的进度条。这很有用，因为训练神经网络可能需要一段时间，你可以判断你还有多少时间。五分钟？来杯咖啡。一小时？阅读一本关于一个戴帽子和酷炫装扮的人的引人入胜的书籍的另一章，他分享了一些学习智慧的小贴士。
- en: We can simply import these libraries, and they are ready to go. On occasion,
    you may need to install a package, which can be done with the standard `pip` command
    using the same `!` trick. The command is shown when needed through the book. All
    the libraries I’ve mentioned are common tools in a machine learning practitioner’s
    toolbelt, and you should have at least some familiarity with them before diving
    into this book.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以简单地导入这些库，它们就准备好了。有时，你可能需要安装一个包，这可以通过使用相同的 `!` 小技巧的标准 `pip` 命令来完成。当需要时，书中会显示该命令。我提到的所有库都是机器学习从业者工具箱中的常用工具，在深入本书之前，你应该至少对它们有所了解。
