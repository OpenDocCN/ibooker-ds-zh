- en: Chapter 1\. The Data Quality Imperative
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 数据质量的重要性
- en: In March 2022, Equifax was migrating its data from on-premises systems to a
    new cloud infrastructure, a notoriously tricky process. Somewhere along the way,
    [an error was introduced](https://oreil.ly/5QLPJ) impacting how credit scores
    were calculated. Roughly 12% of all the company’s credit score data was affected,
    and hundreds of thousands of people ended up with scores that were off by [25
    points or more](https://oreil.ly/l5Zw8). Unaware of the error, lending institutions
    that consumed Equifax’s data altered the rates they offered custofmers and even
    rejected loan and mortgage applications that should have been approved.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 2022年3月，Equifax正在将其数据从本地系统迁移到新的云基础设施，这是一个众所周知的棘手过程。在此过程中，[引入了一个错误](https://oreil.ly/5QLPJ)，影响了信用评分的计算方式。大约12%的公司信用评分数据受到影响，成千上万的人最终得到了与实际情况相差[25分或更多](https://oreil.ly/l5Zw8)的评分。由于不知道错误的存在，消费Equifax数据的贷款机构改变了他们提供给客户的利率，甚至拒绝了本应被批准的贷款和抵押贷款申请。
- en: 'Unfortunately, this isn’t the only data quality mess that’s made the news recently:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，这并不是最近在新闻中曝光的唯一数据质量问题。
- en: In 2020, a [data error](https://oreil.ly/LzkkB) caused the loss of nearly 16,000
    positive COVID-19 test results in the United Kingdom, possibly resulting in 50,000
    people not being told to self-isolate.
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在2020年，[数据错误](https://oreil.ly/LzkkB)导致英国近16000例COVID-19阳性检测结果丢失，可能导致50000人未被告知自我隔离。
- en: So-called airline [“mistake fares,”](https://oreil.ly/GDR8a) which are sometimes
    unintentionally discounted by more than 90%, have forced airlines to either lose
    money or injure their reputations by [failing to honor](https://oreil.ly/bWrv2)
    these “glitch prices.”
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所谓的航空公司[“错误票价”](https://oreil.ly/GDR8a)，有时会无意中打折超过90%，迫使航空公司要么亏损，要么因为[无法兑现](https://oreil.ly/bWrv2)这些“故障价格”而损害他们的声誉。
- en: Facebook provided [a dataset](https://oreil.ly/h25bk) to a group of social scientists
    that left out half of all its US users, affecting the findings in academic work
    studying the impact of social media on elections and democracy.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Facebook向一群社会科学家提供了[一个数据集](https://oreil.ly/h25bk)，其中遗漏了其所有美国用户的一半，影响了研究社交媒体对选举和民主影响的学术工作的结果。
- en: The video game company Unity [lost $110 million](https://oreil.ly/sy8OB) on
    their AI advertising system after ingesting bad training data from a third party.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视频游戏公司Unity在从第三方获取的糟糕训练数据后，其AI广告系统损失了1.1亿美元。
- en: These news stories show the impact that particularly bad data quality issues
    can have—but that’s not the whole picture. The vast majority of data quality issues
    are never caught and are sneakily destroying value for companies as you read this.
    Of those that are caught, few are publicly disclosed.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 这些新闻报道展示了特别严重的数据质量问题可能带来的影响，但这并不是全部。绝大多数数据质量问题从未被发现，正在偷偷地损害公司的价值，就像你现在阅读这些内容一样。而那些被发现的问题中，很少有公开披露的。
- en: 'Here are two anecdotes you might find relatable if you’ve ever worked on a
    data team:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你曾经在数据团队工作过，下面这两个轶事可能会让你感同身受：
- en: One day, one of the product dashboards of a large tech company indicated a sudden
    drop in net promoter score (NPS) survey results. This most likely meant that customers
    were frustrated about a change in the product, so it set off alarm bells up and
    down the organization. Senior leadership became involved, and a task force was
    created. Engineers and analysts evaluated every code change from the past month
    and combed through all their user data to figure out what could have caused the
    plummeting scores.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有一天，一家大型科技公司的产品仪表盘显示出净推荐者分数（NPS）调查结果的突然下降。这很可能意味着客户对产品变更感到不满，因此在整个组织中引发了警报。高级领导层介入，并成立了一个工作组。工程师和分析师评估了过去一个月内的所有代码更改，并彻底检查了他们的所有用户数据，以找出可能导致分数暴跌的原因。
- en: The root cause was finally uncovered by the data scientist analyzing the NPS
    data. In their analysis, they discovered that any scores of 9 or 10 (out of 10)
    had stopped appearing entirely in the latest results. This led to an investigation
    by the engineering team, who discovered that the NPS survey was embedded in an
    iframe that had *cropped off the highest NPS response values*—so that it was physically
    (or, should we say, digitally?) impossible for a customer to choose 9 or 10.
  id: totrans-10
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 数据科学家分析NPS数据最终揭示了根本原因。在他们的分析中，他们发现最新结果中评分为9或10（满分为10）的数据完全消失了。这导致工程团队进行了调查，他们发现NPS调查嵌入的iframe*裁剪了最高的NPS响应值*，因此顾客在物理上（或者我们应该说，在数字上？）无法选择9或10。
- en: A ride-sharing company had built an ML model to detect potentially fraudulent
    new rider accounts and automatically block them from signing up. Their model relied
    on third-party credit card data. Among other things, the model learned that when
    the data from the third party was NULL, the likelihood of fraud was higher; it
    was a sign that the person was signing up with a card that might not be legitimate.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个顺风车公司建立了一个机器学习模型，用于检测潜在的欺诈新乘客账户，并自动阻止它们注册。他们的模型依赖于第三方信用卡数据。在其他事情之间，模型发现当来自第三方的数据为空时，欺诈可能性更高；这表明这些人使用的信用卡可能不合法。
- en: Everything was working well until one day the third party had a data quality
    issue that caused it to send NULL data much more often than it had before. No
    one noticed the error, and the company continued using the ML model to make fraud
    predictions. This led to many new users being denied their ability to sign up
    for the company’s services, as they were incorrectly classified as fraudulent
    accounts.
  id: totrans-12
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一切都很顺利，直到有一天，第三方出现了数据质量问题，导致它发送NULL数据的频率比以往更高。没有人注意到这个错误，公司继续使用机器学习模型进行欺诈预测。这导致许多新用户被拒绝注册公司的服务，因为他们被错误地分类为欺诈账户。
- en: We bet every reader who works with data has had similar experiences. When data’s
    done right, it unlocks incredible value. But when you have no quality assurance
    about your data, it’s like trying to run a restaurant with ingredients that may
    or may not be contaminated. You might get lucky and no one will get sick—but some
    of the time, your customers and your business are liable to suffer, and you can
    bet they won’t look at your food the same way again. One study found that [91%
    of IT decision makers](https://oreil.ly/60PWo) think they need to improve data
    quality at their company; 77% said they lack trust in their organization’s business
    data.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们打赌，每位与数据打交道的读者都有过类似的经历。当数据处理得当时，它会释放出令人难以置信的价值。但如果你的数据没有经过质量保证，就像试图用可能被污染的食材经营餐厅一样。你可能会幸运地不会有人生病，但有时候，你的顾客和你的业务可能会遭受损失，可以肯定他们不会再以同样的眼光看待你的食物了。一项研究发现，[91%的IT决策者](https://oreil.ly/60PWo)认为他们需要改善公司的数据质量；77%的人表示他们不信任公司的业务数据。
- en: Is there a way to bring back trust in data? And can you ensure that the kinds
    of issues we’ve just mentioned are detected immediately and resolved quickly,
    before anyone else is impacted, even (and especially) when you work with large
    volumes of complex data?
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 是否有办法恢复对数据的信任？您能否确保我们刚提到的这些问题能够立即被检测出来并迅速解决，避免任何其他人（尤其是当您处理大量复杂数据时）受到影响？
- en: We believe the answer is yes, and the solution is to *automate your data quality
    monitoring with machine learning*. This book will help you discover the power
    of automated data quality monitoring. You’ll learn how to implement a platform
    that will help ensure high-quality, trustworthy data for your business.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们相信答案是肯定的，并且解决方法是*通过机器学习自动化您的数据质量监控*。本书将帮助您发现自动化数据质量监控的力量。您将学习如何实施一个平台，以确保高质量、可信赖的业务数据。
- en: High-Quality Data Is the New Gold
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高质量的数据成为新的黄金
- en: It feels like only yesterday that businesses were struggling to get data out
    of isolated databases. Apache Hadoop made it possible to run more advanced queries
    on large and complex datasets (if you knew what you were doing). Despite this,
    in the recent past, data was generally limited to a small set of transactional
    systems—a “walled garden” of critical resources, tightly controlled, with limited
    access.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 感觉像是昨天，企业还在努力从孤立的数据库中提取数据。Apache Hadoop使得可以在大规模和复杂数据集上运行更高级的查询（如果你知道该如何操作）。尽管如此，在不久的过去，数据通常局限于一小部分事务系统——一个“围墙花园”中的关键资源，受到严格控制，访问受到限制。
- en: In a matter of years, cloud data warehouses/lakehouses and data transformation
    tools rapidly transformed how we work with data. Now, every scrap of information
    an organization touches is logged and stored. Any decision maker in the organization
    can either (a) pull up an interactive dashboard or report to answer questions
    with data or (b) directly query the data themselves. Machine learning systems,
    built on data, are informing or automating business decisions and powering new
    products.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 几年间，云数据仓库/湖和数据转换工具迅速改变了我们处理数据的方式。现在，组织接触的每一片信息都被记录并存储。组织中的任何决策者都可以（a）查看交互式仪表板或报告来用数据回答问题，或者（b）直接查询数据。建立在数据基础上的机器学习系统正在为业务决策提供信息或自动化，并推动新产品的发展。
- en: '“We firmly believe the next 10 years will be the decade of data,” wrote Silicon
    Valley investment firm [Andreessen Horowitz in 2022](https://oreil.ly/u4mX3).
    The media loves to call data both the new oil and the new gold. We think there
    should be a major caveat on these kinds of statements: they’re only right *if
    the data itself is high quality*. Bad data is worse than no data at all.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: “我们坚信未来的10年将是数据的十年，”2022年硅谷投资公司[安德森·霍洛维茨](https://oreil.ly/u4mX3)如是写道。媒体喜欢称数据为新石油和新黄金。我们认为这类说法应该有一个重要的注解：*只有数据本身是高质量的时候才是正确的*。坏数据比根本没有数据更糟糕。
- en: To see why, let’s examine some of the trends happening around data and why quality
    is the make-or-break factor in each case.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解为什么会这样，让我们来看看围绕数据发生的一些趋势以及为什么质量在每种情况下都是成败的关键因素。
- en: Data-Driven Companies Are Today’s Disrupters
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据驱动的公司是今天的颠覆者。
- en: The common storyline is that the fastest-growing, most successful companies
    today are software companies. But on closer examination, they’re really *data*
    companies.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 常见的说法是，今天增长最快、最成功的公司都是软件公司。但仔细观察，它们实际上是*数据*公司。
- en: Consider Amazon. They didn’t just build the world’s largest retail platform
    by having world-class software engineering talent. They did it by figuring out
    how to harness data for personalized recommendations, real-time pricing, and optimized
    logistics. To pick an example from another industry, Capital One is one of the
    first US banks to move its data from on-premises systems to the cloud. They’ve
    been able to differentiate and accelerate their growth by using data to ​personalize
    marketing and make smarter underwriting decisions.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 以亚马逊为例。他们不仅仅是通过拥有世界一流的软件工程人才建立了全球最大的零售平台。他们通过找到如何利用数据进行个性化推荐、实时定价和优化物流来实现的。再举一个行业的例子，Capital
    One是美国第一批将其数据从本地系统迁移到云端的银行之一。他们通过使用数据来个性化营销和做出更智能的信贷决策，成功区分并加速了他们的增长。
- en: Whether you look at financial services, commerce, digital media, or healthcare,
    the intersection of data and software is the competitive frontier. However, businesses
    can’t make good decisions, much less revolutionize an industry, if they’re working
    with low-quality data that their own employees struggle to trust. It would be
    a mistake to invest in new data science, machine learning, and generative AI projects
    when your data quality foundation is rotten.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您看金融服务、商业、数字媒体还是医疗保健，数据和软件的交汇处是竞争的前沿。然而，如果企业使用的是低质量的数据，员工自己都难以信任，那么他们将无法做出好的决策，更不用说彻底改革一个行业了。如果您的数据质量基础不牢固，那么投资新的数据科学、机器学习和生成式AI项目就会是一个错误。
- en: Data Analytics Is Democratized
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据分析已经民主化。
- en: 'Eager to keep up with the disrupters—or to become one—companies are asking
    every team to become more data driven. They’ve embedded analytics experts into
    functional units (marketing, growth, finance, product teams, etc.) to drive more
    sophisticated uses of data for decision making: Can we pull the stats on our customers’
    past browsing and purchase activity so that we write more tailored emails? Can
    we look at how our power users are adopting the latest feature to see if our launch
    was successful?'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 渴望跟上颠覆者的步伐——或者成为颠覆者的一员——公司正在要求每个团队更加数据驱动。他们已经将分析专家嵌入功能单元（营销、增长、财务、产品团队等），以推动更复杂的数据使用来进行决策：我们能否拉取客户过去的浏览和购买活动统计数据，以便我们编写更贴合的电子邮件？我们能否查看我们的高级用户如何接受最新功能，以确定我们的发布是否成功？
- en: There are now a plethora of tools that let analysts—or truly anyone on a cross-functional
    team—self-serve the answers to data-related questions without writing any code.
    In seconds, they can spin up a dashboard or report that would have taken an engineer
    a month to build not so long ago. To support these analytics needs, data is no
    longer maintained by a small, centralized team or available as a consolidated
    fact table for the entire business. Instead, data is dispersed and managed by
    a wider group of people that sit closer to the business lines.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 现在有大量的工具让分析师——或者说是跨职能团队中的任何人——能够自助回答与数据相关的问题，而无需编写任何代码。他们可以在几秒钟内启动一个仪表板或报告，这在不久之前可能需要工程师一个月的时间来构建。为了支持这些分析需求，数据不再由一个小而集中的团队维护，也不再作为整个业务的统一事实表可用。相反，数据分散并由更广泛的人群管理，这些人更接近业务线。
- en: Without high-quality data, what we’ve seen is that democratization becomes a
    nightmare for data engineering teams. They’re overwhelmed with a backlog of questions
    and always on edge for the next fire drill. Meanwhile, the rest of the organization
    grows more and more suspicious of the data the more they try to work with it.
    Heuristics and hunches become the norm once again. Ultimately, if there isn’t
    trust in the data, democratizing analytics is a waste of time.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有高质量的数据，我们所见到的是，民主化对数据工程团队来说会成为一场噩梦。他们被积压的问题淹没，并时刻警惕着下一个紧急事件。与此同时，组织的其他部门越来越怀疑数据。启发式和直觉再次成为常态。最终，如果数据缺乏信任，民主化分析就是在浪费时间。
- en: AI and Machine Learning Are Differentiators
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AI与机器学习的差异化
- en: Many companies have AI/ML on their road map because it can create incredible
    value in the form of personalized and automated interactions. Machine learning
    (or ML, which we will use interchangeably with AI) relies on advanced statistical
    models to predict the future based on historical signals in the data called *features*.
    With enough feature data and the right modeling techniques, AI can optimize or
    personalize any frequent interaction with an entity the business cares about (consumers,
    content, transactions, etc.).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 许多公司将AI/ML列入他们的路线图，因为它能够以个性化和自动化交互的形式创造令人难以置信的价值。机器学习（ML，我们将其与AI互换使用）依赖于先进的统计模型，根据数据中称为*特征*的历史信号来预测未来。凭借足够的特征数据和合适的建模技术，AI可以优化或个性化与业务关心的任何实体（消费者、内容、交易等）的频繁交互。
- en: Data quality makes or breaks ML models. You must ensure you have high-quality
    datasets for both training and inference. Models are quite good at performing
    well if the data they see in production matches the distribution of data they
    were trained upon. But models will tend to fail miserably when presented with
    data that is far outside of the distribution they have seen before. (Contrast
    this to humans, who can use higher-order intelligence to generalize from one domain
    or distribution to another and account for significant departures from the norm.)
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 数据质量决定了ML模型的成败。您必须确保自己拥有用于训练和推理的高质量数据集。如果生产中使用的数据与它们训练时看到的数据分布相匹配，模型通常表现良好。但是，当出现远远超出它们以前看到的数据分布的数据时，模型往往会彻底失败。（与人类相比，人类可以使用更高级的智能从一个领域或分布泛化到另一个，并考虑到与常规显著偏离的情况。）
- en: Generative AI and data quality
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 生成式AI与数据质量
- en: 'Speaking of differentiators: What about generative AI? These models don’t work
    like traditional ML. Rather than making predictions based on features that are
    engineered from structured data, they ingest raw, unstructured data directly—it’s
    like drinking from the fire hose.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 谈到差异化：生成式AI又如何？这些模型与传统ML不同。它们不是基于从结构化数据中提取的特征进行预测，而是直接摄取原始的非结构化数据——就像从消防水龙头中饮水一样。
- en: Is data quality still relevant if businesses are increasingly reliant on generative
    AI? The answer is a definitive yes. Prompts will need to incorporate structured
    data from the business (such as customer information). If you automate parts of
    your business with these models, you need ways to track that automation and ensure
    that things are working as expected through high-quality logs. And ultimately,
    even if generative AI lives up to or surpasses the hype, we’re always going to
    need to be able to trust the data we aggregate, count, and analyze—like time and
    money.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果企业越来越依赖生成式AI，数据质量仍然重要吗？答案明确是肯定的。提示需要整合来自业务的结构化数据（例如客户信息）。如果您使用这些模型自动化业务的部分流程，您需要追踪该自动化并确保通过高质量的日志一切如预期般运行。而且，即使生成式AI达到或超越了期望，我们始终需要能够信任我们聚合、计数和分析的数据，就像时间和金钱一样。
- en: Furthermore, there will still be data quality issues in the unstructured data
    organizations feed to these generative AI models. These will be even harder to
    find with traditional data quality monitoring approaches and will require automated
    ML or AI to identify them. This makes the techniques covered in this book all
    the more relevant as a foundation for ensuring that new generative AI applications
    are working with high-quality inputs.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，组织提供给这些生成式AI模型的非结构化数据仍然存在数据质量问题。这些问题使用传统的数据质量监控方法更难找到，需要自动化的ML或AI来识别。这使得本书中涵盖的技术作为确保新生成式AI应用程序使用高质量输入的基础显得更加重要。
- en: Companies Are Investing in a Modern Data Stack
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 公司正在投资现代数据堆栈
- en: No summary of data trends today would be complete without a mention of the modern
    data stack (even though we can’t wait for this term to go out of style, to be
    completely honest!). Today, the right set of software as a service (SaaS) vendors
    can accomplish what a 100-person team of full-time data engineers would have done
    10 years ago. Businesses are migrating from legacy on-prem storage to cloud systems
    that let them leverage more data more easily than ever before.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 没有提及现代数据堆栈的数据趋势概述就不完整（尽管我们真的等不及这个术语被淘汰，坦率地说！）。如今，一套正确的软件即服务（SaaS）供应商可以完成10年前一支100人的全职数据工程师团队可以完成的工作。企业正在从传统的本地存储迁移到云系统，这些系统让它们比以往更轻松地利用更多的数据。
- en: '![The modern data stack](assets/adqm_0101.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![现代数据堆栈](assets/adqm_0101.png)'
- en: Figure 1-1\. The modern data stack.
  id: totrans-39
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-1\. 现代数据堆栈。
- en: The modern data stack is a major investment. This investment is undermined when
    tools for data quality are left out of the picture (as in [Figure 1-1](#the_modern_data_stack)).
    Especially because migrations can be a major source of data quality issues, organizations
    often end up with data that’s in a bad state post-upgrade (see the section [“Data
    Migrations”](#data_migrations)). Tracing the root cause of problems is even harder
    in a brand-new system where everyone is learning the ropes.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 现代数据堆栈是一项重要的投资。当数据质量工具被忽视（如[图1-1](#the_modern_data_stack)所示）时，这项投资就会受到损害。特别是因为迁移经常是数据质量问题的主要来源，组织在升级后常常面临数据状况不佳的情况（见章节[“数据迁移”](#data_migrations)）。在每个人都在学习新系统的绳索的情况下，问题的根本原因更难追踪。
- en: More Data, More Problems
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据越多，问题越多
- en: 'In the previous section, we explained the trends driving businesses to depend
    on high-quality data more than ever. Unfortunately, high-quality data is harder
    than ever to achieve. There’s more complexity, happening faster, and with fewer
    guardrails. It’s two sides of the same coin: progress and pain. In this section,
    we’ll examine some of the biggest factors driving data quality degradation.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一节中，我们解释了推动企业比以往任何时候更依赖高质量数据的趋势。不幸的是，如今要获得高质量数据比以往任何时候都更加困难。复杂性更高，发生得更快，而且缺乏有效的防护措施。这是同一硬币的两面：进步与痛苦。在本节中，我们将探讨导致数据质量下降的一些最重要因素。
- en: For a taxonomy of the specific types of data quality issues that can occur,
    see the [Appendix A](app01.html#types_of_data_quality_issues).
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解可能发生的具体数据质量问题类型的分类，请参阅[附录A](app01.html#types_of_data_quality_issues)。
- en: Issues Inside the Data Factory
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据工厂内部的问题
- en: 'Traditionally, the warehouse has been the metaphor of choice for how data systems
    operate inside a company, emphasizing the storage and transportation of goods.
    But with the rise of the modern data stack, and the new ways companies are working
    with data, that metaphor is no longer complete.  Instead, we suggest that companies
    today are operating what more closely resembles a data *factory*: a complex environment
    that serves to transform raw materials into useful products.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，仓库一直是公司内部数据系统运作方式的比喻，强调货物的存储和运输。但随着现代数据堆栈的兴起和公司处理数据的新方式，这个比喻已经不再完整。相反，我们建议如今的公司正在操作更接近数据*工厂*的环境：一个复杂的环境，用于将原材料转化为有用的产品。
- en: Instead of steel, rubber, and electronics, we are ingesting streaming datasets,
    replicas of databases, API extracts from SaaS apps, and raw files from data feeds.
    The factory is built on a foundation, but instead of cement, the foundation here
    is the cloud data warehouses and data lakes. The machines that are operated on
    the factory floor, in this case, are extract, transform, and load (ETL) tools
    like Matillion and Fivetran, orchestration platforms like Apache Airflow, and
    transformations happening in dbt, Apache Spark, and SQL. The folks on the floor
    operating the machines are the data engineers and analytics engineers of the modern
    data team. And the products produced, instead of consumer or industrial goods,
    are curated data products that power the decisions made by business users and
    data professionals, the training and prediction of ML algorithms, and the direct
    feeds that pipe into other data systems.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们摄入的是流式数据集、数据库的副本、SaaS应用程序的API提取以及数据源的原始文件，而不是钢铁、橡胶和电子产品。工厂建立在云数据仓库和数据湖的基础上，而不是水泥。在这种情况下，在工厂楼层操作的机器是像Matillion和Fivetran这样的ETL工具，像Apache
    Airflow这样的编排平台，以及在dbt、Apache Spark和SQL中进行的转换。操作这些机器的人员是现代数据团队的数据工程师和分析工程师。而生产的产品，不是消费品或工业品，而是支持业务用户和数据专业人员决策的精选数据产品，支持ML算法的训练和预测，以及直接输入其他数据系统的数据流。
- en: All of the same kinds of things that can go wrong in a physical factory can
    go wrong in a data factory. [Figure 1-2](#the_data_factory_and_what_can_go_wrong)
    provides an overview.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 物理工厂中可能出现的所有问题在数据工厂中也可能出现。[Figure 1-2](#the_data_factory_and_what_can_go_wrong)
    提供了一个概述。
- en: '![The data factory and what can go wrong on the factory floor](assets/adqm_0102.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![数据工厂及可能出现的问题](assets/adqm_0102.png)'
- en: Figure 1-2\. The data factory and what can go wrong on the factory floor.
  id: totrans-49
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-2. 数据工厂及工厂楼层可能出现的问题。
- en: Broken machines
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 机器故障
- en: Data processing or orchestration tools can break down entirely, stopping or
    degrading the flow of data.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 数据处理或编排工具可能完全崩溃，停止或降低数据的流动。
- en: Scheduling errors
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 调度错误
- en: Data processing jobs can run out of order or with the wrong cadence, causing
    missing data, incorrect computations, or duplicate data.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 数据处理作业可能以错误的顺序运行或以错误的节奏运行，导致数据丢失、计算不正确或重复数据。
- en: Poor raw materials
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 原材料质量差
- en: Raw data fed into the factory can be of poor quality due to upstream issues,
    and the adverse effects can propagate throughout the rest of the warehouse.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 由于上游问题，输入工厂的原始数据质量可能较差，其不良影响可能在整个数据仓库中传播。
- en: Incorrect parts
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 部件错误
- en: Errors can be introduced into the SQL, Spark, or other code that is processing
    and manipulating the data, causing invalid joins, transformations, or aggregations.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: SQL、Spark或其他处理和操作数据的代码可能会引入错误，导致无效的连接、转换或聚合。
- en: Incorrect settings
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 设置不正确
- en: Engineers can make mistakes in the configuration of complex data processing
    jobs, which can lead to a wide variety of issues.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 工程师可能在配置复杂数据处理作业时出错，这可能导致各种问题。
- en: Botched upgrades
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 升级失败
- en: Attempts to upgrade code, application versions, or entire subsystems can introduce
    subtle but pervasive differences in how data is encoded or transformed.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试升级代码、应用程序版本或整个子系统可能会引入微妙但普遍存在的数据编码或转换方式的差异。
- en: Communication failures
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 通信失败
- en: Well-intentioned changes to add new features or functionality can be communicated
    poorly to other affected teams, leading to inconsistencies in data processing
    logic that create quality issues.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 为添加新功能或功能而进行的善意更改可能与其他受影响团队的沟通不畅，导致数据处理逻辑不一致，从而产生质量问题。
- en: Issues inside the data factory are often the most common sources of data quality
    incidents, as they directly affect the flow and contents of the data (and can
    be very difficult to test outside of a production data environment).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 数据工厂内部的问题通常是数据质量问题的最常见源头，因为它们直接影响数据的流动和内容（而且在生产数据环境外部很难进行测试）。
- en: Data Migrations
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据迁移
- en: Data migrations are occurring more frequently as companies seek to keep up with
    the latest and greatest infrastructure.  This includes moving from an on-premises
    data warehouse to a cloud provider (e.g., Teradata to Snowflake), from one cloud
    provider to another (e.g., Amazon Web Services [AWS] to Google Cloud Platform
    [GCP] or vice versa), from one database to another (e.g., PostgreSQL to AWS Aurora),
    or from one database version to another (e.g., Elasticsearch cluster migrations).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 随着公司寻求跟上最新和最伟大的基础设施，数据迁移越来越频繁。这包括从本地数据仓库到云提供商（例如从Teradata到Snowflake），从一个云提供商到另一个（例如从亚马逊网络服务
    [AWS] 到谷歌云平台 [GCP] 或反之），从一个数据库到另一个数据库（例如从PostgreSQL到AWS Aurora），或从一个数据库版本到另一个数据库版本（例如Elasticsearch集群迁移）。
- en: All of these migrations are prone to data quality issues. Let’s take a look
    at migrating from on-premises data warehouses to cloud/SaaS providers. Many companies
    have very complex data pipelines originating from mainframe legacy systems that
    were transferred into increasingly legacy on-prem data warehouses. These legacy
    systems have been in place for decades and have accumulated a tremendous amount
    of incremental complexity as new features have been added, teams have come and
    gone, and business requirements have changed.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些迁移都容易出现数据质量问题。让我们来看看从本地数据仓库迁移到云/SaaS提供商的情况。许多公司有非常复杂的数据管道，源自传统的主机遗留系统，这些系统被转移到日益陈旧的本地数据仓库中。这些传统系统已经存在数十年，并且随着增加新功能、团队的变动和业务需求的变化，累积了大量的增量复杂性。
- en: When moving this tangled web of data processing and storage into the cloud,
    companies seek to replicate what was done in their on-prem environment. But there
    can be very subtle issues introduced in re-creating the on-prem flows in the cloud,
    leading to major data quality consequences.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 当将这些错综复杂的数据处理和存储迁移到云端时，公司试图复制在本地环境中所做的工作。但是在云端重新创建本地流程可能引入非常微妙的问题，导致重大的数据质量后果。
- en: For example, one company we work with mentioned that their customers’ dates
    of birth were mangled badly by such a migration (visualized in [Figure 1-3](#when_data_stored_in_an_on_prem_data_war)).
    In their legacy mainframe, birthdates were stored as integers offset from a certain
    reference date, such as January 1, 1900\. Upon export, those integers were then
    converted into dates in the new cloud warehouse. This seemed easy enough, except
    that unbeknownst to anyone, the cloud data warehouse automatically used the Unix
    timestamp reference of 1970 as the offset. All the birthdates were pushed far
    into the future.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们与一家公司合作时提到，他们客户的出生日期在这样的迁移中被严重破坏（在[图1-3](#when_data_stored_in_an_on_prem_data_war)中可视化）。在他们的传统主机上，出生日期存储为从某个参考日期（如1900年1月1日）偏移的整数。在导出时，这些整数然后被转换为新的云数据仓库中的日期。这看起来很简单，除了无人知晓的是，云数据仓库自动使用了Unix时间戳参考的1970年作为偏移量。所有的出生日期都被推到了遥远的未来。
- en: As with many data quality issues, the repercussions happened later, and silently.
    The company had a marketing application that would send emails to customers based
    on their age. Once this app was pointed to the new cloud data warehouse, *no*
    customers received *any* emails until someone noticed the problem. (Marketing
    teams often end up bearing a significant amount of pain from poor data quality.
    [One survey found](https://oreil.ly/idW6e) that marketers were wasting 21% of
    their total budget on data issues.)
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 与许多数据质量问题一样，后果是在后来默默发生的。公司有一个市场应用程序，根据客户的年龄发送电子邮件。一旦这个应用程序指向新的云数据仓库，直到有人注意到问题之前，*没有*客户收到*任何*电子邮件。（市场团队经常因为数据质量差而承受很大的痛苦。[一项调查发现](https://oreil.ly/idW6e)，营销人员在数据问题上浪费了其总预算的21%。）
- en: '![When data stored in an on-prem data warehouse is migrated to a cloud data
    warehouse, discrepancies can arise, such as this example involving different reference
    dates for calculating customers’ birthdates.](assets/adqm_0103.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![当存储在本地数据仓库中的数据迁移到云数据仓库时，可能会出现不一致的情况，比如涉及计算客户出生日期的不同参考日期的例子。](assets/adqm_0103.png)'
- en: Figure 1-3\. When data stored in an on-prem data warehouse is migrated to a
    cloud data warehouse, discrepancies can arise, such as in this example involving
    different reference dates for calculating customers’ birthdates.
  id: totrans-72
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-3\. 当存储在本地数据仓库中的数据迁移到云数据仓库时，可能会出现不一致的情况，例如在计算客户出生日期时涉及不同的参考日期。
- en: Third-Party Data Sources
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第三方数据源
- en: 'Using third-party data—that is, data that comes from outside the company—is
    easier and more common than ever. To give some examples, while Jeremy was at Instacart,
    third-party data regularly collected included:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 使用第三方数据——即来自公司外部的数据——比以往任何时候都更容易和更普遍。举例来说，当Jeremy在Instacart时，定期收集的第三方数据包括：
- en: Weather data for demand forecasting/scheduling
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 天气数据用于需求预测/调度
- en: Third-party services for maps information for routing
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于路由的地图信息第三方服务
- en: Consumer packaged goods (CPG) product catalog data for enriching the user search
    and shopping experience
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 消费品包装（CPG）产品目录数据，用于丰富用户搜索和购物体验
- en: Fraud propensity scoring data for avoiding charge-backs
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欺诈倾向评分数据，以避免退款
- en: Retailer inventory data for determining what’s on the shelf at each store location
    at a given time
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 零售商库存数据，用于确定每个店铺在特定时间内货架上的商品情况
- en: 'Frequently, third-party data is codified as a data relationship between two
    partners: company A and company B have to work together to service customer X
    or achieve operation Y, and that requires exchanging data. Sometimes, this is
    called *second-party data*.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 经常情况下，第三方数据被编码为两个合作伙伴之间的数据关系：公司A和公司B必须共同合作为客户X提供服务或实现操作Y，并且需要交换数据。有时，这被称为*第二方数据*。
- en: In other cases, you are consuming public data or data packaged by a third-party
    service provider to be resold in a one-to-many relationship, often to make decisions
    about entities (customers, companies, locations) about which you have limited
    information. If you browse the publicly available feeds on the online catalog
    [Demyst](https://oreil.ly/2g4vc), you’ll see that it’s possible to leverage comprehensive
    tax, property, and business data all with just a few clicks.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他情况下，您正在使用公共数据或由第三方服务提供商打包的数据，以在一对多的关系中重新销售，通常用于对您了解有限的实体（客户、公司、位置）做出决策。如果您浏览在线目录[Demyst](https://oreil.ly/2g4vc)上的公开可用信息源，您会发现只需点击几下即可利用全面的税收、财产和商业数据。
- en: Third-party data is a common source of data quality problems. That’s not only
    because providers make mistakes, but also because they often make changes, for
    example, to their APIs or data formats. Unless you have a very clear data contract
    in place, third parties won’t necessarily be thinking about how their updates
    might affect your specific use case, nor will they be beholden to provide notice
    or mitigations.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 第三方数据是数据质量问题的常见来源。这不仅因为提供者可能会出错，还因为他们经常对其API或数据格式进行更改。除非您已经明确制定了数据合同，否则第三方不一定会考虑到他们的更新可能会如何影响您的具体用例，也不一定有义务提供通知或减轻措施。
- en: Company Growth and Change
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 公司的增长和变化
- en: We’d argue that *almost all data begins as high quality*. When a product is
    first built and instrumented, the data captured about that product by the engineer
    who built it is usually very closely aligned with their intention and the product’s
    function.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们认为*几乎所有数据最初都是高质量的*。当产品首次构建和装配时，由构建它的工程师捕获的关于该产品的数据通常与他们的意图和产品功能非常一致。
- en: 'But data does not exist in a vacuum. In the real world, a company is constantly
    adapting and improving its products, which in turn affects the data emitted by
    those products. It’s like the second law of thermodynamics: the entropy of the
    data will always increase over time. As time passes, the following factors cause
    the data quality to degrade:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 但数据并不孤立存在。在现实世界中，公司不断调整和改进其产品，这反过来影响这些产品所产生的数据。这就像热力学第二定律一样：数据的熵随时间总是增加的。随着时间的推移，以下因素导致数据质量下降：
- en: New features
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 新功能
- en: New features often expand the scope of the data the system is capturing. Insofar
    as this is an “add additional columns” type of change, the data quality risk isn’t
    high. However, in some cases, new features may replace existing functionality,
    which tends to have a sudden impact on the data emitted by the system. In many
    cases, the new features may change the shape of the data. The granularity level
    might increase—such as data now being captured at the level of an item rather
    than the level of the entire product. Or what was previously a single message
    may be broken apart and restructured into many messages.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 新功能经常扩展系统捕获的数据范围。在这种情况下，“添加额外列”的风险不大。但是，在某些情况下，新功能可能会替换现有功能，这通常会对系统产生的数据产生突然的影响。在许多情况下，新功能可能会改变数据的形状。粒度级别可能会增加——例如，数据现在可能在项目级别而不是整个产品级别进行捕获。或者以前的单一消息可能会被分解并重构为多条消息。
- en: Bug fixes
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: Bug修复
- en: The average piece of commercial software [contains 20–30 bugs for every 1,000
    lines of code](https://oreil.ly/YeuIZ), according to Carnegie Mellon University’s
    CyLab Sustainable Computing Consortium. Bug fixes can have the same impact as
    new features. They can also genuinely improve data quality—but when that sudden
    improvement comes as a “shock” to the systems that depend on the data, there may
    be negative consequences (see the section [“Data Shocks”](#data_shocks)).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 根据卡耐基梅隆大学CyLab可持续计算联盟的数据，商业软件的平均每1000行代码中包含20-30个错误。Bug修复可能会与新功能产生相同的影响。它们也可以真正改善数据质量，但当这种突然的改善对依赖数据的系统造成“冲击”时，可能会产生负面后果（请参见“数据冲击”部分）。
- en: Refactors
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 重构
- en: Refactoring happens when teams want to improve the structure of the code or
    systems behind an application without changing the functionality. However, refactors
    often present the risk of unintended changes—especially to things like data capture
    that may not be robustly tested in the application code.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 重构发生在团队希望改进应用程序背后代码或系统结构而不改变功能时。然而，重构往往会带来意外的变化风险，尤其是对于像数据捕获这样在应用程序代码中可能没有经过严格测试的东西。
- en: Optimizations
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 优化
- en: Frequently, changes are made simply to improve the speed or efficiency of an
    application.  In many cases, how data is being captured can be a performance issue,
    and changes can affect the reliability, temporal granularity, or uniqueness of
    the data emitted by the system.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 经常情况下，简单地为了提高应用程序的速度或效率而进行更改。在许多情况下，数据捕获方式可能会成为性能问题，而更改可能会影响系统发出的数据的可靠性、时间粒度或唯一性。
- en: New teams
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 新团队
- en: New teams often inherit a legacy application and arrive with a limited understanding
    of how it interacts with other systems or how the data it produces is consumed.
    They may unintentionally break with existing expectations from other teams as
    they make changes to their product, introducing data quality issues.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 新团队经常继承一个旧应用，并且对其与其他系统的交互方式或者所产生的数据如何被消费的理解有限。当他们对产品进行更改时，他们可能会无意中打破其他团队对其现有期望，引入数据质量问题。
- en: Outages
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 停机
- en: In addition to intentional changes, many systems will simply have outages where
    they stop functioning or function in a degraded level of service. Data capture
    is often lost entirely during these outages. This is often not a data quality
    issue per se, as the lack of data is a reflection of the lack of activity due
    to the outage. But in many cases, the outage may affect the data being emitted
    without affecting the service itself, which *is* a data quality issue.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 除了有意的变更，许多系统会简单地发生停机，即它们停止正常运行或者在服务水平下降的情况下运行。在这些停机期间，数据捕获通常完全丢失。这通常并非是数据质量问题本身，因为数据缺失反映了停机期间活动的缺乏。但在许多情况下，停机可能会影响正在发出的数据，而不影响服务本身，这是一个数据质量问题。
- en: Exogenous Factors
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 外生因素
- en: When you leverage data to make decisions or build products, there will always
    be factors that affect the data that are outside of your control, such as user
    behavior, global events, competitor actions, and supplier and market forces. Note
    that these aren’t data quality issues per se, but they often look and feel like
    data quality issues and may need to be handled in a similar way.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当您利用数据进行决策或构建产品时，总会有影响数据的因素是您无法控制的，例如用户行为、全球事件、竞争对手行动以及供应商和市场力量。请注意，这些并不是数据质量问题本身，但它们通常看起来和感觉起来像是数据质量问题，并且可能需要类似的处理方式。
- en: For example, in some industries, companies make automated decisions based on
    real-time data about what competitors are doing. Ecommerce companies monitor competitor
    price data and, in response, adjust their prices almost instantaneously. Airlines
    do the same. In these scenarios, if a competitor changes their behavior in a sudden,
    drastic manner, the business will immediately do the same—and end up with a large
    shift in their data. It’s important for companies to be notified about these changes,
    as they may not always be desirable or intended.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在某些行业中，公司根据竞争对手的实时数据做出自动化决策。电子商务公司监控竞争对手的价格数据，并且几乎可以立即调整其价格。航空公司也是如此。在这些情景中，如果竞争对手突然、急剧地改变了他们的行为，该业务也会立即做出相同的改变，并且在其数据中出现大幅度的变化。对公司来说，及时了解这些变化非常重要，因为这些变化并不总是期望的或者故意的。
- en: Any discussion about exogenous factors would be remiss not to mention the COVID-19
    pandemic. Everyone had to treat the beginning months of COVID-19 as a special
    case when analyzing user behavior. For example, [Figure 1-4](#the_average_length_of_a_taxi_trip_in_ch)
    shows how data about the number of miles logged for Chicago taxi trips changed
    dramatically in March 2020.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 任何关于外生因素的讨论都不应忽略 COVID-19 疫情。在分析用户行为时，每个人都不得不将 COVID-19 的前几个月视为特殊情况。例如，[图 1-4](#the_average_length_of_a_taxi_trip_in_ch)
    展示了有关芝加哥出租车行程里程数的数据在 2020 年 3 月份发生了显著变化。
- en: '![The average length of a taxi trip in Chicago plummeted in March 2020\. The
    taxi data is publicly available from the city of Chicago.](assets/adqm_0104.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![芝加哥出租车行程的平均长度在 2020 年 3 月份急剧下降。出租车数据可以从芝加哥市公开获取。](assets/adqm_0104.png)'
- en: Figure 1-4\. The average length of a taxi trip in Chicago plummeted in March
    2020\. The taxi data is [publicly available from the city of Chicago website](https://oreil.ly/mQDTq).
    See a full-sized version of this image at [*https://oreil.ly/adqm_1_4*](https://oreil.ly/adqm_1_4).
  id: totrans-103
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-4\. 芝加哥出租车行程的平均长度在 2020 年 3 月份急剧下降。出租车数据可以从[芝加哥市官网公开获取](https://oreil.ly/mQDTq)。请查看此图的完整版本[*https://oreil.ly/adqm_1_4*](https://oreil.ly/adqm_1_4)。
- en: During COVID-19, machine learning models had to be quickly retrained on fresh
    data, since their assumptions based on historical trends no longer applied. In
    one well-known case, Zillow’s model for predicting housing prices—which was powering
    a new business arm, Zillow Offers—couldn’t adapt fast enough. The automated service
    overpaid for homes that it didn’t end up being able to sell in the changing market,
    and sadly Zillow had to [lay off almost a quarter of its workforce as a result](https://oreil.ly/oncgk).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在 COVID-19 期间，机器学习模型必须快速重新训练以应用新的数据，因为基于历史趋势的假设不再适用。在一个著名案例中，Zillow 用于预测房价的模型——这个模型支持
    Zillow Offers 的新业务部门——无法及时适应变化的市场。这项自动化服务为未能在变化的市场中出售的房屋支付了过高的价格，导致 Zillow 不得不[裁减员工数达其总数四分之一](https://oreil.ly/oncgk)。
- en: 'Teams typically find themselves in one of two situations regarding external
    factors:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 团队通常发现自己处于以下两种情况之一，涉及外部因素：
- en: In some cases, like with COVID-19, external changes are dramatic enough that
    you need to put your decision-making processes on notice and possibly retrain
    your ML models. It’s almost like a data quality issue—it’s a change that you want
    to be immediately notified about so that you can do damage control.
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下，例如 COVID-19，外部变化足够剧烈，以至于您需要提醒决策流程，并可能重新训练您的 ML 模型。这几乎就像数据质量问题——这是一个您希望立即被通知的变化，以便您可以进行损害控制。
- en: In other cases, external factors have a more subtle influence, such as a supply-chain
    issue affecting your order processing times. You need to quickly understand the
    context of these changes and rule out any data quality problems, which can often
    look like real external trends.
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在其他情况下，外部因素对您的决策有更微妙的影响，例如供应链问题影响您的订单处理时间。您需要快速理解这些变化的背景，并排除任何可能看起来像真正外部趋势的数据质量问题。
- en: Why We Need Data Quality Monitoring
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为何我们需要数据质量监控
- en: With the ever-increasing importance of high-quality data, and the fact that
    data quality problems are more prolific than ever, you might already be convinced
    that improving data quality is important. But how should you think about such
    an initiative? Is it as a one-time fix—getting your data into shape over a period
    of months or quarters, and letting things run smoothly from there?
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 随着高质量数据的日益重要，以及数据质量问题比以往任何时候都更加普遍，您可能已经被说服改善数据质量的重要性。但是，您应该如何考虑这样的举措呢？它是否作为一次性修复——在几个月或几个季度内将您的数据整理到位，并让事情顺利进行？
- en: This kind of approach often makes sense for software, but much less so for data.
    Code is the same today as it is tomorrow, barring a deliberate update. You can
    test it in a controlled QA environment and also run unit tests that isolate just
    one part of the system. Once your tests pass, you’re essentially done.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法通常适用于软件，但对数据来说则不然。代码今天和明天一样，除非有意进行更新。您可以在受控的 QA 环境中进行测试，并运行仅隔离系统的单元测试。一旦测试通过，您基本上就完成了。
- en: Data, on the other hand, is chaotic and constantly changing. It’s dependent
    on external factors you don’t control, such as how users interact with your product
    in real time, so you can really only test it holistically in production. Your
    tests have to be able to filter out all the noise—and there’s a lot of noise—from
    the true data quality signal.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，数据是混乱且不断变化的。它依赖于您无法控制的外部因素，比如用户实时与产品的交互方式，因此您真正只能在生产环境中进行整体测试。您的测试必须能够过滤掉所有噪音——而真正的数据质量信号中有很多噪音。
- en: For this reason, while software bugs are often quickly detected and fixed through
    automated testing and user feedback, *we strongly believe that the vast majority
    of data quality issues are never caught.* Because teams lack the right continuous
    monitoring tools for data, problems happen silently and go unnoticed.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 出于这个原因，虽然软件错误通常通过自动化测试和用户反馈很快被检测和修复，*我们坚信大多数数据质量问题从未被捕捉到*。因为团队缺乏适合数据的正确持续监控工具，问题会默默发生并被忽视。
- en: 'Making matters worse, the cost of fixing a data quality issue increases dramatically
    the more time has passed since the issue occurred:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 更糟糕的是，随着问题发生后经过的时间增加，修复数据质量问题的成本急剧增加：
- en: The number of potential changes that could have caused the issue goes up linearly
    with the length of time over which you are evaluating.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能导致问题的潜在变化数量随着评估时间的增长呈线性增加。
- en: The amount of context the team has on why a change was made, or what the implications
    of that change could be, goes down with the time since the change.
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 团队对为何进行变更或该变更可能带来的影响的背景了解数量随着变更时间的增长而减少。
- en: The cost to “fix” the issue (including backfilling the data) goes up with the
    amount of time since the issue was first introduced.
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “修复”问题的成本（包括回填数据）随着问题首次出现以来的时间增加而增加。
- en: Issues that persist for long periods of time end up becoming “normal behavior”
    to other downstream systems, so fixing them may cause new incidents.
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 长时间存在的问题最终会变成其他下游系统的“正常行为”，因此修复它们可能会导致新的事件。
- en: When an incident is introduced and then fixed later, it really has two different
    types of impact. We call these data scars and data shocks.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 当引入一个事件然后稍后修复时，它实际上有两种不同类型的影响。我们称之为数据疤痕和数据冲击。
- en: Data Scars
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据疤痕
- en: After an incident happens, unless the data is painstakingly repaired (which
    is often impossible or expensive to do), it will leave a *scar* in the data. We
    first heard this term used by Daniele Perito, chief data officer and cofounder
    of Faire. A scar is a period of time for a given set of data where a subset of
    records are invalid or anomalous and cannot be trusted by any systems operating
    on those records in the future.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 事件发生后，除非数据被极其细致地修复（通常不可能或昂贵），否则它将在数据中留下一个*疤痕*。我们最早听到这个术语是由Faire的首席数据官兼联合创始人Daniele
    Perito使用的。疤痕是指一段时间内给定数据集的一部分记录是无效的或异常的，并且在未来对这些记录进行操作的任何系统中都无法信任。
- en: Data scars will impact ML models, as those models will have to adapt to learn
    different relationships in the data during the period of the scar. This will weaken
    their performance and limit their ability to learn from all the data captured
    during the scar. It will also dampen the model’s belief in the importance of the
    features affected by the scar—the model will underweight these inputs, wrongly
    believing they’re less prevalent in the dataset. Even if you manage to go back
    in time and repair the scar, it’s easy to introduce what’s known as *data leakage*
    into downstream ML applications by inadvertently including some current state
    information in your fix. This leads to the model performing very well in offline
    evaluations (since it has access to “time-traveled” information from the future)
    but acting erratically in production (where it no longer has this information).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 数据疤痕将影响机器学习模型，因为这些模型必须适应在疤痕期间学习数据中不同的关系。这将削弱它们的性能，并限制它们从疤痕期间捕获的所有数据中学习的能力。它还会削弱模型对受疤痕影响的特征重要性的信任—模型会低估这些输入的权重，错误地认为它们在数据集中的普遍性较低。即使您设法回到过去修复疤痕，也很容易在下游的机器学习应用中引入所谓的*数据泄露*，因为无意中在修复过程中包含了当前状态信息。这会导致模型在离线评估中表现非常好（因为它可以访问来自未来的“时光旅行”信息），但在生产环境中表现不稳定。
- en: Data scars will also greatly impact any future analytics or data science work
    done on this dataset. They may lead to more complex data pipelines that are harder
    to write and maintain, as data users have to add a lot of exception handling to
    avoid biases introduced by the scar. These exceptions may need to be noted and
    addressed in any reporting or visualizations that include data from the time of
    the scar, increasing cognitive overhead on anyone trying to interpret the data
    or make decisions from it. Or, scars may need to be removed entirely from the
    dataset, leading to “data amnesia” from that period, which can affect trend analysis
    or time-based comparisons (e.g., what was our year-over-year result for this statistic?).
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 数据创伤还会严重影响此数据集上进行的任何未来分析或数据科学工作。它们可能导致更复杂的数据流水线，难以编写和维护，因为数据用户必须添加大量的异常处理以避免由创伤引入的偏见。这些异常可能需要在包括来自创伤时段数据的任何报告或可视化中予以记录和解决，从而增加任何试图解释数据或从中做出决策的人的认知负担。或者，创伤可能需要从数据集中完全移除，导致该时期的“数据健忘症”，这可能会影响趋势分析或基于时间的比较（例如，这个统计数据的年度对比结果是多少？）。
- en: Data Shocks
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据震荡
- en: In addition to the scarring effect, there are also effects in production that
    occur both when the data quality issue was introduced *and* when the data issue
    is fixed. This is what we call a data quality *shock*, and it can also affect
    AI/ML and decision making.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 除了造成的创伤效应外，在生产中还会出现数据质量问题引入时以及数据问题修复时的效应。这就是我们所说的数据质量“震荡”，它还会影响到人工智能/机器学习和决策制定。
- en: When the data quality issue first occurs, any ML models that use features derived
    from the data will suddenly be presented with data that is entirely different
    from what they were trained on. This will cause them to be “shocked” by the new
    data, and they will produce predictions that are often wildly inaccurate for any
    observations affected by the data quality incident. This shock will last until
    the models are retrained using new data, which often happens automatically in
    a continuous deployment model.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 当数据质量问题首次出现时，任何使用从数据派生特征的机器学习模型都将突然面对完全不同于它们训练过的数据。这将导致它们被新数据“震惊”，它们为受数据质量事件影响的任何观察结果常常产生极不准确的预测。此震荡会持续到模型使用新数据重新训练为止，而这在持续部署模型中通常会自动发生。
- en: Then, once the data quality is fixed, that actually introduces yet another shock
    to the model (unless the data is repaired historically, which often isn’t possible).
    The shock from the fix can often be as bad as the initial shock from the introduction
    of the data quality issue!
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，一旦数据质量问题得到修复，实际上这将给模型带来另一种震荡（除非数据在历史上得到修复，这通常是不可能的）。修复带来的震荡往往与数据质量问题引入时的初始震荡一样严重！
- en: For analytics/reporting use cases, these shocks often manifest as metrics or
    analyses that have sudden unexpected changes. When these are observed, they are
    often mistaken for real-world changes (the whole purpose of these reports is to
    reflect what’s happening in reality), so operations are changed or other decisions
    are made to respond to the data quality issue as though it were real. Again, the
    same thing can happen in reverse when the fix is released.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 对于分析/报告用例，这些震荡通常表现为指标或分析突然发生意外变化。当观察到这些变化时，它们常常被误认为是真实世界的变化（这些报告的整个目的是反映现实情况），因此会改变运营或者做出其他决策，以应对数据质量问题，就像它们是真实的一样。而当修复发布后，同样的情况可能会反向发生。
- en: The longer the data quality issue goes unfixed, the deeper the scar, and the
    greater the shock from fixing it.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 数据质量问题修复的时间越长，创伤越深，修复时的冲击也越大。
- en: '![How incidents accumulate to erode data quality and trust over time. Each
    bar is a data scar left by the incident. Each X (marking when the incident first
    occurred) is a data shock. Notably, each checkmark (when the incident was resolved)
    is also a data shock.](assets/adqm_0105.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![随着时间累积，如何侵蚀数据质量和信任。每个条是事件留下的数据创伤。每个X（标记事件首次发生时）代表一个数据震荡。值得注意的是，每个对号（解决事件2时）也是一个数据震荡。](assets/adqm_0105.png)'
- en: Figure 1-5\. How incidents accumulate to erode data quality and trust over time.
    Each bar is a data scar left by the incident. Each X (marking when the incident
    first occurred) is a data shock. Notably, the checkmark (when Incident 2 was resolved)
    is also a data shock.
  id: totrans-130
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-5\. 演示随着时间累积，如何侵蚀数据质量和信任。每个条是事件留下的数据创伤。每个X（标记事件首次发生时）代表一个数据震荡。值得注意的是，每个对号（解决事件2时）也是一个数据震荡。
- en: The implication of allowing scars and shocks to continue accumulating is that
    slowly, over time, the objective quality of the data erodes. [Figure 1-5](#how_incidents_accumulate_to_erode_data)
    illustrates how incidents pile up such that everyone becomes convinced that the
    data quality is low and the data itself is untrustworthy. And as hard as it is
    to backfill data, it’s even harder to backfill trust.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 允许伤疤和冲击继续积累的后果是，随着时间的推移，数据的客观质量逐渐下降。[图 1-5](#how_incidents_accumulate_to_erode_data)说明了事件如何堆积，以至于每个人都确信数据质量低且数据本身不可信任。填充数据已经很难，而建立信任更加困难。
- en: Therefore, there’s a framing change needed in how organizations think about
    combating poor data quality. It shouldn’t be a one-off project to go in and fix
    data quality for a given data source. It needs to instead be a continuous data
    quality monitoring initiative, where data quality issues are found as they occur
    and resolved as quickly as possible.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，组织在思考如何应对数据质量不佳时需要进行框架变革。这不应该是一个一次性的项目，只是为了处理给定数据源的数据质量问题。相反，它应该是一个持续的数据质量监控倡议，可以在发生数据质量问题时及时发现并尽快解决。
- en: Without data quality monitoring, issues will go uncaught until a business user,
    data professional, or customer of the ML algorithm or other systems notices. Operating
    a data factory in this way is akin to running a factory making a consumer good
    without any quality control processes.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 没有数据质量监控，问题将不会被发现，直到业务用户、数据专业人员或机器学习算法或其他系统的客户注意到为止。以这种方式运行数据工厂，相当于在没有任何质量控制过程的情况下运行生产消费品的工厂。
- en: 'Automating Data Quality Monitoring: The New Frontier'
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化数据质量监控：新的前沿
- en: Data professionals today are experiencing exciting, downright astonishing changes
    in the field. Whether it’s investing in generative AI, democratizing analytics
    across the business, or migrating from a legacy database to the cloud, almost
    every company out there is in the middle of doing something new with data that
    they’ve never done before.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 当今的数据专业人员正在经历领域内令人兴奋、令人惊讶的变化。无论是投资于生成式人工智能，还是在整个企业中实现分析民主化，或者从传统数据库迁移到云端，几乎每家公司都在尝试一些前所未有的数据处理方式。
- en: For most enterprises, therefore, the best time to invest in data quality is
    now. As your use of data grows, so do the risks and the negative impact of data
    quality issues. Data quality is something that needs to be monitored constantly
    and maintained diligently by fixing problems as soon as they arise.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，对于大多数企业来说，现在是投资于数据质量的最佳时机。随着数据使用的增长，数据质量问题的风险和负面影响也在增加。数据质量是需要不断监控并通过尽快解决问题来维护的事项。
- en: Effective data quality monitoring is no easy task—especially at the scale of
    thousands of tables and billions of records, which is common for a large enterprise.
    While it might be obvious that it doesn’t work to have humans manually inspect
    your data, it also doesn’t work to use legacy solutions like writing tests for
    your data and tracking key metrics. You may want to do this for your most important
    tables, but implementing it for your entire data warehouse simply isn’t feasible.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 有效的数据质量监控并非易事，特别是对于大型企业来说，拥有成千上万张表和数十亿条记录是很常见的。虽然人工手动检查数据行不通是显而易见的，但使用像为数据编写测试和跟踪关键指标这样的传统解决方案也不适用。你可能希望为最重要的表格做这些工作，但对整个数据仓库实施这些工作是不可行的。
- en: In this book, we’ll introduce you to the concept of automating data quality
    monitoring with unsupervised ML. This is a new technique with many benefits. It
    requires hardly any manual setup and scales easily across your data warehouse.
    With the right implementation, it automatically learns the appropriate thresholds
    for whether a data change is big enough to signal a quality issue. It can detect
    a broad range of problems, including *unknown unknowns* that no one has ever thought
    to write a test for.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将向您介绍使用无监督机器学习自动化数据质量监控的概念。这是一种具有多种好处的新技术。它几乎不需要手动设置，并且可以轻松扩展到您的数据仓库中。通过正确的实施，它可以自动学习数据变化是否足够大以信号质量问题的适当阈值。它可以检测到广泛的问题，包括那些没有人想过要为其编写测试的*未知未知*。
- en: Using ML comes with its own challenges. Building the model is a complicated
    task on its own, but you’ll also need to ensure it works on a wide variety of
    real-world data without over- or under-alerting. You’ll want to build out notifications
    that help your team effectively triage issues, and integrations with your data
    toolkit that bring data quality front and center for your organization. And you’ll
    need to have a plan in place to deploy and manage your monitoring platform in
    the long term.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ML也带来了自己的挑战。构建模型本身就是一项复杂的任务，但你还需要确保它能在各种真实世界的数据上运行，而不会过度或不足报警。您将需要建立通知系统，帮助您的团队有效地处理问题，并与您的数据工具包集成，使数据质量成为组织的重中之重。您还需要制定长期部署和管理监控平台的计划。
- en: Don’t worry—we’re here to help with the advice and tools you’ll need along the
    way. We think automating data quality monitoring with ML is just as exciting as
    any data innovation that has happened in the past several years and one of the
    most important breakthroughs in the modern data stack. By the end of this book,
    we hope you’ll agree.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 不用担心——我们将在你前行的道路上提供所需的建议和工具。我们认为利用ML自动化数据质量监控与过去几年发生的任何数据创新一样令人兴奋，也是现代数据堆栈中最重要的突破之一。希望通过本书的学习，您也能认同这一观点。
