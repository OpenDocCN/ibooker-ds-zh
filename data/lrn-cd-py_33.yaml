- en: Lesson 27\. Dictionaries as maps between objects
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第27课。字典作为对象之间的映射
- en: After reading [lesson 27](#ch27), you’ll be able to
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读第27课[（#ch27）]，你将能够
- en: Understand what a dictionary object data type is
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解字典对象数据类型是什么
- en: Add to, remove from, and look up objects in dictionaries
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在字典中添加、删除和查找对象
- en: Understand when to use a dictionary object
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解何时使用字典对象
- en: Understand the difference between a dictionary and a list
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解字典和列表之间的区别
- en: 'In the previous lesson, you learned about lists as collections of data with
    elements at a certain position in the list. Lists are useful when you want to
    store one group of objects; you saw that you could store a group of names or a
    group of numbers. But in real life, you often have pairs of data: a word and its
    meaning, a word and a list of synonyms, a person and their phone number, a movie
    and its rating, a song and its artist, and many others.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一课中，你学习了列表作为具有列表中特定位置元素的数据集合。列表在你想要存储一组对象时很有用；你看到你可以存储一组名字或一组数字。但在现实生活中，你经常有数据对：一个单词及其含义、一个单词及其同义词列表、一个人及其电话号码、一部电影及其评分、一首歌及其艺术家，等等。
- en: '[Figure 27.1](#ch27fig01) takes the grocery list metaphor from the previous
    lesson and shows you one way to apply it to dictionaries. In a list, your grocery
    items are enumerated; the first item is on the first line, and so on. You can
    think of a list as mapping the numbers 0, 1, 2, and so on, in that order, to each
    item in your list. With a dictionary, you get additional flexibility in what you
    can map, and to what. In [figure 27.1](#ch27fig01), the grocery dictionary now
    maps an item to its quantity.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[图27.1](#ch27fig01)从上一课的购物清单隐喻中汲取灵感，并展示了将其应用于字典的一种方法。在列表中，你的购物项目是按顺序列举的；第一个项目在第一行，以此类推。你可以将列表视为将数字0、1、2等按顺序映射到列表中的每个项目。使用字典，你可以获得更多的灵活性，可以映射什么以及映射到什么。在[图27.1](#ch27fig01)中，购物字典现在将一个项目映射到其数量。'
- en: Figure 27.1\. A list puts the first item at position 0, the second item at position
    1, and the third at position 2\. A dictionary doesn’t have positions, but rather
    maps one object to another; here it maps a grocery item to its quantity.
  id: totrans-8
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图27.1。列表将第一个项目放在位置0，第二个项目放在位置1，第三个项目放在位置2。字典没有位置，而是将一个对象映射到另一个对象；在这里，它将购物项目映射到其数量。
- en: '![](images/27fig01.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![图片](images/27fig01.jpg)'
- en: You can think of a list as a structure that maps an integer (index 0, 1, 2,
    3 ...) to an object; a list can be indexed only by an integer. A dictionary is
    a data structure that can map any object, not just an integer, to any other object;
    indexing using any object is more useful in situations when you have pairs of
    data. Like lists, dictionaries are mutable so that when you make a change to a
    dictionary object, the object itself changes without having to make a copy of
    it.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以将列表视为一种结构，它将整数（索引0、1、2、3等）映射到对象；列表只能通过整数索引。字典是一种可以将任何对象（而不仅仅是整数）映射到任何其他对象的数据结构；使用任何对象进行索引在具有数据对的情况下更有用。像列表一样，字典是可变的，这意味着当你对字典对象进行更改时，对象本身会发生变化，而不必复制它。
- en: '|  |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Consider this**'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '**考虑这一点**'
- en: A word dictionary maps words from one language to their equivalent in another
    language. For each of the following scenarios, are you able to map one thing to
    another?
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 词典将一种语言中的单词映射到另一种语言中的对应词。对于以下每个场景，你能否将一个事物映射到另一个事物？
- en: Your friends and their phone numbers
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的朋友及其电话号码
- en: All the movies you’ve seen
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你看过的所有电影
- en: The number of times each word occurs in your favorite song
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你最喜欢的歌曲中每个单词出现的次数
- en: Each coffee shop in the area and its Wi-Fi availability
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该地区每个咖啡馆及其Wi-Fi可用性
- en: All the names of the paints available at the hardware store
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 家具店中所有可用的油漆名称
- en: Your coworkers and their arrival and leave times
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的同事及其上下班时间
- en: 'Answer:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 答案：
- en: 'Yes'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是
- en: 'No'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 否
- en: 'Yes'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是
- en: 'Yes'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是
- en: 'No'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 否
- en: 'Yes'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是
- en: '|  |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 27.1\. Creating dictionaries, keys, and values
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.1. 创建字典、键和值
- en: Many programming languages have a way to map objects to each other or to look
    up one object using another. In Python, such an object is called a *dictionary*
    with the object type `dict`.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 许多编程语言都有一种将对象映射到彼此或使用另一个对象查找一个对象的方法。在Python中，这样的对象被称为具有对象类型`dict`的*字典*。
- en: A dictionary maps one object to another; we can also say that you look up one
    object by using another object. If you think of a traditional word dictionary,
    you look up a word to find its meaning. In programming, the item you look up (in
    a traditional dictionary, the *word*) is called the *key*, and what the item lookup
    returns (in a traditional dictionary, the *meaning*) is called the *value*. In
    programming, a dictionary stores entries, and each entry is a key-value pair.
    You use one object (the key) to look up another object (the value).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 字典将一个对象映射到另一个对象；我们也可以说，你使用另一个对象查找一个对象。如果你想到一个传统的单词字典，你查找一个词来找到它的意思。在编程中，你查找的项目（在传统字典中，是
    *词*）被称为 *键*，项目查找返回的内容（在传统字典中，是 *意思*）被称为 *值*。在编程中，字典存储条目，每个条目都是一个键值对。你使用一个对象（键）来查找另一个对象（值）。
- en: 'You create an empty Python dictionary with curly braces:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用花括号创建一个空的 Python 字典：
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This command creates an empty dictionary with no entries and binds the dictionary
    object to a variable named `grocery`.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这条命令创建了一个没有条目且绑定到名为 `grocery` 的变量的空字典。
- en: 'You can also create a dictionary with items already in it. In your grocery
    list, you map a grocery item to its quantity. In other words, the keys to `grocery`
    will be strings representing the grocery items, and the values to `grocery` will
    be integers representing the quantity:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以创建一个已经包含条目的字典。在你的购物清单中，你将一个购物项目映射到其数量。换句话说，`grocery` 的键将是表示购物项目的字符串，`grocery`
    的值将是表示数量的整数：
- en: '[PRE1]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This line creates a dictionary with three items, as shown in [figure 27.2](#ch27fig02).
    Each item in a dictionary is separated by a comma. The keys and values for an
    item are separated by a colon. The key is to the left of the colon, and the value
    for that key is to the right of the colon.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这行代码创建了一个包含三个条目的字典，如图 27.2 所示。字典中的每个条目都由逗号分隔。一个条目的键和值由冒号分隔。键在冒号的左边，该键的值在冒号的右边。
- en: Figure 27.2\. A dictionary initialized with three entries. Entries are separated
    by commas. Each entry has a key to the left of a colon, and the key’s corresponding
    value to the right of the colon.
  id: totrans-37
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 27.2\. 初始化了三个条目的字典。条目由逗号分隔。每个条目的键在冒号的左边，键对应的值在冒号的右边。
- en: '![](images/27fig02.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](images/27fig02.jpg)'
- en: Both keys and values to a dictionary are single objects. A dictionary entry
    can’t have more than one object as its key or more than one object as its value.
    If you’d like to store more than one object as the value, you could store all
    the objects inside a tuple, because a tuple is one object. For example, your grocery
    list could have the string key `"eggs"` and the tuple value `(1, "carton")` or
    `(12, "individual")`. Notice that the values in both situations are one Python
    object, a tuple.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 字典的键和值都是单个对象。一个字典条目不能有多个对象作为其键或多个对象作为其值。如果你想存储多个对象作为值，你可以将所有对象存储在一个元组中，因为元组是一个对象。例如，你的购物清单可以有字符串键
    `"eggs"` 和元组值 `(1, "carton")` 或 `(12, "individual")`。注意，在两种情况下，值都是单个 Python 对象，一个元组。
- en: '|  |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 27.1**'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 27.1**'
- en: 'For each of the following situations, write a line of code that creates a dictionary
    and binds it to a variable with an appropriate name. For each, also indicate the
    keys and values:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 对于以下每种情况，编写一行代码创建一个字典并将其绑定到具有适当名称的变量。对于每个，也指出键和值：
- en: '**[1](kindle_split_056.html#app01qa108q0a1)**'
  id: totrans-43
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](kindle_split_056.html#app01qa108q0a1)**'
- en: ''
  id: totrans-44
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Empty dictionary of employee names and their phone numbers and addresses
  id: totrans-45
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 员工姓名及其电话号码和地址的空字典
- en: '**[2](kindle_split_056.html#app01qa108q0a2)**'
  id: totrans-46
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](kindle_split_056.html#app01qa108q0a2)**'
- en: ''
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Empty dictionary of cities and the number of inches of snow each city got in
    1990 and 2000
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 1990 年和 2000 年每个城市得到的英寸数的空字典
- en: '**[3](kindle_split_056.html#app01qa108q0a3)**'
  id: totrans-49
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](kindle_split_056.html#app01qa108q0a3)**'
- en: ''
  id: totrans-50
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Dictionary of items in a house and their value: a TV worth $2,000 and a sofa
    worth $1,500'
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 房屋物品及其价值的字典：一台价值 2,000 美元的电视和一台价值 1,500 美元的沙发
- en: '|  |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '|  |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 27.2**'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 27.2**'
- en: For each of the following, how many entries are in the dictionary? What’s the
    type of the keys, and what’s the type of the values?
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 对于以下每个情况，字典中有多少条条目？键的类型是什么，值的类型是什么？
- en: '**[1](kindle_split_056.html#app01qa109q0a1)**'
  id: totrans-56
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](kindle_split_056.html#app01qa109q0a1)**'
- en: ''
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`d = {1:-1, 2:-2, 3:-3}`'
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`d = {1:-1, 2:-2, 3:-3}`'
- en: '**[2](kindle_split_056.html#app01qa109q0a2)**'
  id: totrans-59
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](kindle_split_056.html#app01qa109q0a2)**'
- en: ''
  id: totrans-60
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`d = {"1":1, "2":2, "3":3}`'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`d = {"1":1, "2":2, "3":3}`'
- en: '**[3](kindle_split_056.html#app01qa109q0a3)**'
  id: totrans-62
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](kindle_split_056.html#app01qa109q0a3)**'
- en: ''
  id: totrans-63
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`d = {2:[0,2], 5:[1,1,1,1,1], 3:[2,1,0]}`'
  id: totrans-64
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`d = {2:[0,2], 5:[1,1,1,1,1], 3:[2,1,0]}`'
- en: '|  |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 27.2\. Adding key-value pairs to a dictionary
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.2. 向字典中添加键值对
- en: 'Empty dictionaries or dictionaries with a fixed number of entries aren’t useful.
    You’ll want to add more entries to store more information. To add a new key-value
    pair, you use square brackets, much as with lists:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 空字典或具有固定数量的条目的字典没有用。你想要添加更多的条目来存储更多信息。要添加一个新的键值对，你使用方括号，就像使用列表一样：
- en: '[PRE2]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This command adds the key `k` and its associated value `v` into the dictionary
    `d`. If you try to add to the same key again, the previous value associated with
    that key will be overwritten.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这个命令将键 `k` 和其关联的值 `v` 添加到字典 `d` 中。如果你尝试向相同的键再次添加，与该键关联的先前值将被覆盖。
- en: At any point, you can use the `len()` function to tell you the number of entries
    in the dictionary. The following listing adds items to a dictionary.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何时候，你都可以使用 `len()` 函数来告诉你字典中的条目数量。以下列表向字典中添加项。
- en: Listing 27.1\. Adding pairs to a dictionary
  id: totrans-71
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 27.1. 向字典中添加对
- en: '[PRE3]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Empty dictionary**'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 空字典**'
- en: '***2* Adds key “human” with value 2**'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 添加键 “human” 并将其值设为 2**'
- en: '***3* Adds key “cat” with value 4**'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 添加键 “cat” 并将其值设为 4**'
- en: '***4* Adds key “snake” with value 0**'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 添加键 “snake” 并将其值设为 0**'
- en: '***5* Prints 3 because there are three entries in the dictionary**'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 打印 3，因为字典中有三个条目**'
- en: '***6* Changes key “cat” to value 3**'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 将键 “cat” 的值更改为 3**'
- en: '***7* Prints 3 because you modified only the entry for “cat”**'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***7* 打印 3，因为你只修改了 “cat” 的条目**'
- en: '***8* Prints {‘human’: 2, ‘snake’: 0, ‘cat’: 3}**'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***8* 打印 `{‘human’: 2, ‘snake’: 0, ‘cat’: 3}`**'
- en: The preceding code shows the output using Python 3.5\. If you use a different
    version of Python, you may see a different order in the dictionary. Using the
    output from Python 3.5, you may have noticed that the items you added to the dictionary
    were a human, then a cat, and then a snake. But when you printed the dictionary
    in [listing 27.1](#ch27ex01), the dictionary printed a different order. This is
    normal behavior with dictionaries, and [section 27.4.1](#ch27lev2sec2) discusses
    this further.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 上一段代码展示了使用 Python 3.5 的输出。如果你使用的是 Python 的不同版本，你可能会看到字典中的不同顺序。使用 Python 3.5
    的输出，你可能已经注意到你添加到字典中的项是一个人，然后是一只猫，然后是一条蛇。但是当你打印 [列表 27.1](#ch27ex01) 中的字典时，字典打印出了不同的顺序。这是字典的正常行为，[第
    27.4.1 节](#ch27lev2sec2)将进一步讨论这一点。
- en: 27.2.1\. Short diversion into restrictions on keys
  id: totrans-82
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.2.1. 对键的限制的简短偏离
- en: When you try to insert an object key into a dictionary that already contains
    that key, the value for the existing key is overwritten. This leads to an interesting
    point about the kinds of objects you can store as keys in a dictionary.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 当你尝试将一个对象键插入到一个已经包含该键的字典中时，现有键的值会被覆盖。这引出了一个关于你可以将哪些类型的对象存储为字典键的有趣观点。
- en: You can’t have the same key multiple times in a dictionary; if you did, Python
    wouldn’t know which key you’re referring to when you want to retrieve a value.
    For example, if you have the word `box` as a key that maps to `container`, and
    the word `box` that also maps to `fight`, then which definition do you give to
    someone who wants the definition of `box`? The first one you find? The last one?
    Both? The answer isn’t so clear. Instead of dealing with this situation, Python
    guarantees that all keys in a dictionary are unique objects.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在字典中不能有相同的键多次出现；如果你这样做，当你要检索值时，Python 就不知道你指的是哪个键。例如，如果你有一个 `box` 作为键，它映射到 `container`，还有一个
    `box` 也映射到 `fight`，那么你给想要 `box` 定义的人提供哪个定义？第一个你找到的？最后一个？两个都给？答案并不明确。Python 保证字典中的所有键都是唯一的对象，而不是处理这种情况。
- en: How and why does the Python language make this guarantee? Python enforces that
    a key is an immutable object. This decision is because of the way that Python
    implements the dictionary object.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Python 语言是如何以及为什么做出这样的保证的？Python 强制要求键是一个不可变对象。这个决定是因为 Python 实现字典对象的方式。
- en: Given a key, Python uses a formula based on the key value to calculate the location
    to store the value. The formula is called a *hash function*. This method is used
    so that when you want to look up a value, you can quickly retrieve the value by
    running the formula instead of iterating through all the keys to find the one
    you want. Because the result of the hash function should be the same when inserting
    or when looking up an item, the location where the value is stored is fixed. Using
    an immutable object, you’ll get the same location value because the immutable
    object’s value doesn’t change. But if you used a mutable object, it’s possible
    (and likely) that the hash function would give a different location value when
    applied to the mutated key value, as opposed to the original key value.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 给定一个键，Python 使用基于键值的公式来计算存储值的存储位置。这个公式被称为 *散列函数*。使用这种方法是为了当你想要查找一个值时，你可以通过运行公式而不是遍历所有键来快速检索值。因为散列函数的结果在插入或查找项时应该是相同的，所以值的存储位置是固定的。使用不可变对象，你会得到相同的存储位置值，因为不可变对象的价值不会改变。但是，如果你使用了一个可变对象，那么在应用于已更改的键值时，散列函数可能会给出不同的存储位置值，而不是原始的键值。
- en: '|  |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Quick check 27.3**'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 27.3**'
- en: '**[Q1:](kindle_split_056.html#app01qa110q0a1)**'
  id: totrans-89
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa110q0a1)**'
- en: ''
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: What’s the value of the dictionary after each line is executed?
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 执行每行后字典的值是多少？
- en: ''
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '|  |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 27.3\. Removing key-value pairs from a dictionary
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.3. 从字典中删除键值对
- en: As with lists, you can remove items after you put them into a dictionary by
    using the `pop()` operation. The command `d.pop(k)` will remove the key-value
    entry in the dictionary `d` corresponding to the key `k`. This operation is like
    a function and returns the value from the dictionary associated with the key `k`.
    After the pop operation in the next listing, the dictionary `household` will have
    the value `{"person":4, "cat":2, "dog":1}`.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 与列表一样，你可以在将项目放入字典后使用 `pop()` 操作来删除项目。命令 `d.pop(k)` 将删除字典 `d` 中与键 `k` 对应的键值条目。这个操作就像一个函数，并返回与键
    `k` 关联的字典中的值。在下一条列表中的 pop 操作之后，字典 `household` 将具有值 `{"person":4, "cat":2, "dog":1}`。
- en: Listing 27.2\. Removing pairs from a dictionary
  id: totrans-97
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 27.2. 从字典中删除配对
- en: '[PRE5]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '***1* Fills a dictionary**'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 填充字典**'
- en: '***2* Removes entry whose key is “fish” and saves the value associated with
    the key “fish” in a variable**'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 删除键为“fish”的条目，并将与键“fish”关联的值保存到变量中**'
- en: '***3* Prints value of removed entry**'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 打印已删除条目的值**'
- en: '|  |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Quick check 27.4**'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 27.4**'
- en: '**[Q1:](kindle_split_056.html#app01qa111q0a1)**'
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa111q0a1)**'
- en: ''
  id: totrans-105
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'What’s printed by the following code? If there’s an error, write error:'
  id: totrans-106
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 以下代码打印了什么？如果有错误，请写错误：
- en: ''
  id: totrans-107
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '|  |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 27.4\. Getting all the keys and values in a dictionary
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.4. 获取字典中的所有键和值
- en: Python has two operations that allow you to get all the keys in the dictionary
    and all the values in the dictionary. This is useful if you need to look through
    all the pairs to find entries that match certain criteria. For example, if you
    have a dictionary that maps a song name to its rating, you may want to retrieve
    all the pairs, and keep only the ones whose rating is 4 or 5.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: Python 有两个操作允许你获取字典中的所有键和所有值。这在你需要遍历所有键值对以找到符合某些标准的条目时非常有用。例如，如果你有一个将歌曲名称映射到其评分的字典，你可能想检索所有键值对，并仅保留评分是4或5的条目。
- en: 'If a dictionary named `songs` contains pairs of songs and ratings, you can
    use `songs.keys()` to get all the keys in the dictionary. The following code prints
    `dict_keys([''believe'', ''roar'', ''let it be''])`:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个名为 `songs` 的字典包含歌曲和评分的配对，你可以使用 `songs.keys()` 来获取字典中的所有键。以下代码打印 `dict_keys(['believe',
    'roar', 'let it be'])`：
- en: '[PRE7]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The expression `dict_keys(['believe', 'roar', 'let it be'])` is a Python object
    that contains all the keys in the dictionary.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 表达式 `dict_keys(['believe', 'roar', 'let it be'])` 是一个包含字典中所有键的 Python 对象。
- en: 'You can iterate over the returned keys directly by using a `for` loop, as in
    this line:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以直接使用 `for` 循环遍历返回的键，如下所示：
- en: '[PRE8]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Alternatively, you can save the keys in a list by casting the returned keys
    into a list via this command:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，你也可以通过将返回的键转换为列表来保存键，如下命令所示：
- en: '[PRE9]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Similarly, the command `songs.values()` gives you all the values in the dictionary
    `songs`. You can either iterate over them directly or cast them into a list if
    you need to use them later in your code. It’s most often useful to iterate over
    the keys in a dictionary because after you know a key, you can always look up
    the value corresponding to that key.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，命令`songs.values()`给你字典`songs`中的所有值。你可以直接遍历它们，或者如果你需要在代码的后面使用它们，可以将它们转换为列表。通常，遍历字典中的键最有用，因为在你知道一个键之后，你总是可以查找与该键对应的值。
- en: 'Let’s look at a different example. Suppose you have data for the following
    students in your class:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看另一个例子。假设你班上有以下学生的数据：
- en: '[PRE10]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[Listing 27.3](#ch27ex03) shows an example of how to use dictionary commands
    to keep track of students and their grades in your class. First, you create a
    dictionary that maps student names to their grades on exams. Assuming each student
    took two exams, the value in the dictionary for each student will be a list containing
    two elements. Using the dictionary, you can print all the names of the students
    in the class by iterating through all the keys, and you can also iterate through
    all the values and print all the averages for the quizzes. Lastly, you can even
    modify the values for each key by adding to the end of the list the average of
    the two quizzes.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '[列表27.3](#ch27ex03)展示了如何使用字典命令来跟踪班级中的学生和他们的成绩。首先，你创建一个字典，将学生姓名映射到他们在考试中的成绩。假设每个学生参加了两次考试，字典中每个学生的值将是一个包含两个元素的列表。使用字典，你可以通过遍历所有键来打印班级中所有学生的姓名，你也可以遍历所有值并打印所有测验的平均分。最后，你甚至可以修改每个键的值，通过将两个测验的平均值添加到列表的末尾。'
- en: Listing 27.3\. Keeping track of student grades by using a dictionary
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表27.3\. 使用字典跟踪学生成绩
- en: '[PRE11]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '***1* Sets up the dictionary mapping a string to a list of the two quiz scores**'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 设置字典，将字符串映射到包含两个测验分数的列表**'
- en: '***2* Iterates through keys and prints them**'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 遍历键并打印它们**'
- en: '***3* Iterates through values and prints their average**'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 遍历值并打印它们的平均值**'
- en: '***4* Iterates through all keys**'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 遍历所有键**'
- en: '***5* Takes scores of each student and assigns them to the scores variable
    for average calculation in the next line**'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 获取每个学生的分数并将它们分配给scores变量，以便在下一条线中进行平均计算**'
- en: '***6* Takes the average of the elements and appends it to the end of the list**'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 计算元素的平均值并将它追加到列表的末尾**'
- en: '***7* Prints {‘Bruce’: [80, 40, 60.0], ‘Stacey’: [70, 70, 70.0], ‘Angela’:
    [90, 100, 95.0], ‘Chris’: [100, 70, 85.0]}**'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***7* 打印{‘Bruce’: [80, 40, 60.0], ‘Stacey’: [70, 70, 70.0], ‘Angela’: [90,
    100, 95.0], ‘Chris’: [100, 70, 85.0]}**'
- en: '|  |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 27.5**'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查27.5**'
- en: '**[Q1:](kindle_split_056.html#app01qa112q0a1)**'
  id: totrans-134
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa112q0a1)**'
- en: ''
  id: totrans-135
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: You have the following lines of code that perform operations on an employee
    database by incrementing everyone’s age by 1. What does the code print?
  id: totrans-136
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 你有以下代码行，通过将每个人的年龄增加1来对员工数据库进行操作。这段代码会打印什么？
- en: ''
  id: totrans-137
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-138
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '|  |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 27.4.1\. No ordering to dictionary pairs
  id: totrans-140
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.4.1\. 字典对没有排序
- en: 'In this lesson, I mentioned that you may see different results depending on
    the version of Python you’re using. If you use Python 3.5 to run the code in [listing
    27.3](#ch27ex03), you may notice something odd. The output from printing all the
    keys is as follows:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在本课中，我提到你可能根据你使用的Python版本看到不同的结果。如果你使用Python 3.5来运行[列表27.3](#ch27ex03)中的代码，你可能会注意到一些奇怪的事情。打印所有键的输出如下：
- en: '[PRE13]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'But when you added items to the dictionary, you added Chris, then Angela, then
    Bruce, then Stacey. These orders don’t seem to match. Unlike lists, a Python dictionary
    forgets the order in which items were added to the dictionary. When you ask for
    keys or values, you have no guarantee about the order in which they’re returned.
    You can see this by typing in the following code that checks for equality between
    two dictionaries and then between two lists:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 但当你向字典中添加项目时，你添加了Chris，然后是Angela，然后是Bruce，然后是Stacey。这些顺序似乎不匹配。与列表不同，Python字典忘记了项目添加到字典中的顺序。当你请求键或值时，你无法保证它们返回的顺序。你可以通过输入以下代码来查看这一点，该代码检查两个字典之间的相等性，然后是两个列表之间的相等性：
- en: '[PRE14]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The two dictionaries are equal, even though the order that the entries are put
    in aren’t the same. In contrast, a list of the two names must be in the same order
    to be considered equal.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管条目放入的顺序不同，这两个字典是相等的。相比之下，两个名字的列表必须以相同的顺序排列才能被认为是相等的。
- en: 27.5\. Why should you use a dictionary?
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 27.5\. 为什么你应该使用字典？
- en: 'By now, it should be clear that dictionaries can be fairly useful objects because
    they map objects (keys) to other objects (values), and you can later look up values
    given a key. Dictionaries have two common uses: keeping count of the number of
    times something occurs, and using dictionaries to map items to functions.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 到现在为止，应该很清楚，字典是非常有用的对象，因为它们将对象（键）映射到其他对象（值），并且你可以根据键来查找值。字典有两个常见的用途：跟踪某物出现的次数，以及使用字典将项目映射到函数。
- en: 27.5.1\. Keeping count with frequency dictionaries
  id: totrans-148
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.5.1\. 使用频率字典进行计数
- en: 'Possibly one of the most common uses of dictionaries is to keep track of the
    quantity of a certain item. For example, if you’re writing a Scrabble game, you
    may use a dictionary to keep track of the quantity of each letter in your hand.
    If you have a text document, you may want to keep track of the number of times
    you use each word. In [listing 27.4](#ch27ex04), you’ll build a frequency dictionary
    that maps a word to the number of times it occurs in a song. The code takes a
    string and makes a list of words by splitting on the space. With an initially
    empty dictionary, you go through all the words in the list and do one of two things:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 可能字典最常见的用途之一是跟踪某种物品的数量。例如，如果你在编写Scrabble游戏，你可能使用字典来跟踪手中每个字母的数量。如果你有一个文本文档，你可能想跟踪你使用每个单词的次数。在[列表
    27.4](#ch27ex04)中，你将构建一个频率字典，将单词映射到它在歌曲中出现的次数。该代码通过在空格处拆分字符串来创建单词列表。使用最初为空的字典，你遍历列表中的所有单词并执行以下两项之一：
- en: If you haven’t added the word to the dictionary yet, add it with a count of
    1.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你还没有将单词添加到字典中，则将其添加为键，并设置其计数为1。
- en: If you’ve already added the word to the dictionary, increase its count by 1.
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你已经将单词添加到字典中，则将其计数增加1。
- en: Listing 27.4\. Building a frequency dictionary
  id: totrans-152
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 27.4\. 构建频率字典
- en: '[PRE15]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '***1* String with song lyrics**'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 包含歌词的字符串**'
- en: '***2* Empty frequency dictionary**'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 空频率字典**'
- en: '***3* Gets a list of all words in the string by splitting the string on the
    space character**'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 通过在空格字符上拆分字符串来获取字符串中的所有单词列表**'
- en: '***4* Iterates through each word in the list from the preceding line**'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 遍历上一行中的列表中的每个单词**'
- en: '***5* Converts to lowercase**'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 转换为小写**'
- en: '***6* Word isn’t in the dictionary yet, so add it as the key and set its value
    to 1**'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 单词尚未在字典中，因此将其作为键添加，并设置其值为1**'
- en: '***7* Word is already in the dictionary, so increment its count by 1**'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***7* 单词已在字典中，因此将其计数增加1**'
- en: '***8* Prints {‘happy’: 4, ‘to’: 3, ‘dear’: 1, ‘you’: 3, ‘birthday’: 4}**'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***8* 打印 {‘happy’: 4, ‘to’: 3, ‘dear’: 1, ‘you’: 3, ‘birthday’: 4}**'
- en: A frequency dictionary is a useful application of Python dictionaries, and you’ll
    write a function to build a frequency dictionary in the capstone project in [lesson
    29](kindle_split_044.html#ch29).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 频率字典是Python字典的有用应用，你将在[课程 29](kindle_split_044.html#ch29)的顶石项目中编写一个函数来构建频率字典。
- en: 27.5.2\. Building unconventional dictionaries
  id: totrans-163
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 27.5.2\. 构建非传统字典
- en: 'A Python dictionary is a useful data structure. It allows easy access to one
    object’s value by looking it up using another object’s value. Anytime you need
    to map two items and access them later, a dictionary should be the first thing
    you try to use. But there are some less obvious scenarios for using a dictionary.
    One use is to map common names to functions. In [listing 27.5](#ch27ex05), you
    define three functions that, given an input variable, find the area of three common
    shapes: a square, circle, and equilateral triangle.'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: Python字典是一种有用的数据结构。它允许通过使用另一个对象的值来查找另一个对象的值来轻松访问一个对象的值。任何你需要映射两个项目并在以后访问它们的时候，字典应该是你首先尝试使用的东西。但是，有一些不太明显的使用字典的场景。一种用途是将常用名称映射到函数。在[列表
    27.5](#ch27ex05)中，你定义了三个函数，给定一个输入变量，可以找到三个常见形状的面积：正方形、圆形和等边三角形。
- en: You can build a dictionary that maps a string to the function itself, referenced
    by the function name. When you look up each string, you’ll get back the function
    object. Then, using the function object, you can call it using a parameter. In
    [listing 27.5](#ch27ex05), when you access the dictionary using `"sq"` in the
    line `print(areas["sq"](n))`, the value retrieved by `areas["sq"]` is the function
    named `square`. The function is then called on the number `n = 2` when you use
    `areas["sq"](n)`.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以构建一个将字符串映射到函数本身的字典，该函数通过函数名引用。当你查找每个字符串时，你会得到函数对象。然后，使用函数对象，你可以使用参数来调用它。在[列表
    27.5](#ch27ex05)中，当你使用`print(areas["sq"](n))`行中的`"sq"`访问字典时，`areas["sq"]`检索到的值是名为`square`的函数。然后，当你使用`areas["sq"](n)`时，该函数在数字`n
    = 2`上被调用。
- en: Listing 27.5\. Dictionaries and functions
  id: totrans-166
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 27.5\. 字典和函数
- en: '[PRE16]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '***1* Known function to calculate area of a square**'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 已知计算正方形面积的函数**'
- en: '***2* Known function to calculate area of a circle**'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 已知计算圆面积的函数**'
- en: '***3* Known function to calculate area of an equilateral triangle**'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 已知计算等边三角形面积的函数**'
- en: '***4* Dictionary maps string to function**'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 字典将字符串映射到函数**'
- en: '***5* Calls function mapped in dictionary by key “sq” on n where n is 2**'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 在 n（n 为 2）上通过键“sq”调用字典中映射的函数**'
- en: '***6* Calls function mapped in dictionary by key “ci” on n where n is 2**'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 通过键“ci”在 n（n 为 2）上调用字典中映射的函数**'
- en: '***7* Calls function mapped in dictionary by key “eqtri” on n where n is 2**'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***7* 在 n（n 为 2）上通过键“eqtri”调用字典中映射的函数**'
- en: Summary
  id: totrans-175
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this lesson, my objective was to teach you a new data type, the Python dictionary.
    A dictionary maps one object to another. Like lists, dictionaries are mutable
    objects in which you can add to, remove from, and change elements. Unlike lists,
    dictionaries don’t have an order, and they allow only certain object types to
    be the keys. Here are the major takeaways:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在本课中，我的目标是教你一个新的数据类型，Python 字典。字典将一个对象映射到另一个对象。像列表一样，字典是可变对象，你可以向其中添加、从其中删除和更改元素。与列表不同，字典没有顺序，并且只允许某些对象类型作为键。以下是主要收获：
- en: Dictionaries are mutable.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字典是可变的。
- en: Dictionary keys must be immutable objects.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字典键必须是不可变对象。
- en: Dictionary values can be mutable or immutable.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字典值可以是可变的或不可变的。
- en: A dictionary doesn’t have an order.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字典没有顺序。
- en: Let’s see if you got this...
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看你是否掌握了这个...
- en: '**[Q27.1](kindle_split_056.html#app01qa113q0a1)**'
  id: totrans-182
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q27.1](kindle_split_056.html#app01qa113q0a1)**'
- en: ''
  id: totrans-183
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a program that uses dictionaries to accomplish the following task. Given
    a dictionary of song names (strings) mapped to ratings (integers), print the song
    names of all songs that are rated exactly 5.
  id: totrans-184
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个程序，使用字典来完成以下任务。给定一个歌曲名称（字符串）映射到评分（整数）的字典，打印所有评分正好为 5 的歌曲名称。
- en: '**[Q27.2](kindle_split_056.html#app01qa113q0a2)**'
  id: totrans-185
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q27.2](kindle_split_056.html#app01qa113q0a2)**'
- en: ''
  id: totrans-186
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a function named `replace`. It takes in one dictionary, `d`, and two values,
    `v` and `e`. The function doesn’t return anything. It mutates `d` such that all
    the values `v` in `d` are replaced with `e`. For example,
  id: totrans-187
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个名为 `replace` 的函数。它接受一个字典 `d` 和两个值 `v` 和 `e`。该函数不返回任何内容。它修改 `d`，使得 `d` 中所有的值
    `v` 都被 `e` 替换。例如，
- en: ''
  id: totrans-188
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`replace({1:2, 3:4, 4:2}, 2, 7)` mutates `d` to `{1: 7, 3: 4, 4: 7}`.'
  id: totrans-189
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`replace({1:2, 3:4, 4:2}, 2, 7)` 修改 `d` 为 `{1: 7, 3: 4, 4: 7}`.'
- en: '`replace({1:2, 3:1, 4:2}, 1, 2)` mutates `d` to `{1: 2, 3: 2, 4: 2}`.'
  id: totrans-190
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`replace({1:2, 3:1, 4:2}, 1, 2)` 修改 `d` 为 `{1: 2, 3: 2, 4: 2}`.'
- en: '**[Q27.3](kindle_split_056.html#app01qa113q0a3)**'
  id: totrans-191
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q27.3](kindle_split_056.html#app01qa113q0a3)**'
- en: ''
  id: totrans-192
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a function named `invert`. It takes in one dictionary, `d`. The function
    returns a new dictionary, `d_inv`. The keys in `d_inv` are the unique values in
    `d`. The value corresponding to a key in `d_inv` is a list. The list contains
    all the keys in `d` that mapped to the same value in `d`. For example,
  id: totrans-193
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 编写一个名为 `invert` 的函数。它接受一个字典 `d`。该函数返回一个新的字典 `d_inv`。`d_inv` 中的键是 `d` 中的唯一值。`d_inv`
    中对应键的值是一个列表。该列表包含所有在 `d` 中映射到相同值的键。例如，
- en: ''
  id: totrans-194
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`invert({1:2, 3:4, 5:6})` returns `{2: [1], 4: [3], 6: [5]}`.'
  id: totrans-195
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`invert({1:2, 3:4, 5:6})` 返回 `{2: [1], 4: [3], 6: [5]}`.'
- en: '`invert({1:2, 2:1, 3:3})` returns `{1: [2], 2: [1], 3: [3]}`.'
  id: totrans-196
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`invert({1:2, 2:1, 3:3})` 返回 `{1: [2], 2: [1], 3: [3]}`.'
- en: '`invert({1:1, 3:1, 5:1})` returns `{1: [1, 3, 5]}`.'
  id: totrans-197
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`invert({1:1, 3:1, 5:1})` 返回 `{1: [1, 3, 5]}`.'
