- en: Chapter 4\. Correlation and Regression
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四章。相关性与回归
- en: Have you heard that ice cream consumption is linked to shark attacks? Apparently
    Jaws has a lethal appetite for mint chocolate chip. [Figure 4-1](#ice-cream-shark-attack)
    visualizes this proposed relationship.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 你听说过冰淇淋消费与鲨鱼袭击有关吗？显然，大白鲨对薄荷巧克力片有致命的喜好。[图 4-1](#ice-cream-shark-attack)可视化了这种假设关系。
- en: '![Ice cream versus shark attacks](assets/aina_0401.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![冰淇淋与鲨鱼袭击](assets/aina_0401.png)'
- en: Figure 4-1\. The proposed relationship between ice cream consumption and shark
    attacks
  id: totrans-3
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-1。冰淇淋消费与鲨鱼袭击之间的假设关系
- en: “Not so,” you may retort. “This does not necessarily mean that shark attacks
    are triggered by ice cream consumption.”
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: “不尽然，”你可能会反驳。“这并不一定意味着鲨鱼袭击是由冰淇淋消费引发的。”
- en: “It could be,” you reason, “that as the outside temperature increases, more
    ice cream is consumed. People also spend more time near the ocean when the weather
    is warm, and *that* coincidence leads to more shark attacks.”
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: “你推断说，”随着室外温度的升高，消费的冰淇淋会增加。当天气变暖时，人们也会更多地在海边活动，*这*巧合导致更多的鲨鱼袭击。
- en: “Correlation Does Not Imply Causation”
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: “相关性不意味着因果关系”
- en: You’ve likely heard repeatedly that “correlation does not imply causation.”
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经多次听到“相关性不意味着因果关系”的说法。
- en: In [Chapter 3](ch03.html#foundations-of-inference), you learned that *causation*
    is a fraught expression in statistics. We really only reject the null hypothesis
    because we simply don’t have all the data to claim causality for sure. That semantic
    difference aside, does correlation have *anything* to do with causation? The standard
    expression somewhat oversimplifies their relationship; you’ll see why in this
    chapter using the tools of inferential statistics you picked up earlier.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第三章](ch03.html#foundations-of-inference)中，你学到了*因果关系*在统计学中是一个棘手的表达。我们之所以只是拒绝零假设，是因为我们根本没有足够的数据来确定地声称因果关系。除了这种语义差异，相关性与因果关系有*任何*关系吗？标准表达有些过于简化了它们的关系；在本章中，你将会看到为什么使用你之前学到的推断统计学工具。
- en: This will be our final chapter conducted primarily in Excel. After that, you
    will have sufficiently grasped the framework of analytics to be ready to be move
    into R and Python.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '这将是我们主要在Excel中进行的最后一章。之后，你将已经足够掌握了分析框架，准备好进入R和Python。 '
- en: Introducing Correlation
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引入相关性
- en: 'So far, we’ve mostly been analyzing statistics one variable at a time: we’ve
    found the average reading score or the variance in housing prices, for example.
    This is known as *univariate* analysis.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们主要是一次分析一个变量的统计数据：我们发现了平均阅读成绩或房价方差，例如。这被称为*单变量*分析。
- en: We’ve also done a bit of *bivariate* analysis. For example, we compared the
    frequencies of two categorical variables using a two-way frequency table. We also
    analyzed a continuous variable when grouped by multiple levels of a categorical
    variable, finding descriptive statistics for each group.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还进行了一些*双变量*分析。例如，我们使用两向频率表比较了两个分类变量的频率。我们还分析了一个连续变量，当被分为多个水平的分类变量时，为每个组找到了描述统计数据。
- en: We will now calculate a bivariate measure of two continuous variables using
    correlation. More specifically, we will use the *Pearson correlation coefficient*
    to measure the strength of the *linear relationship* between two variables. Without
    a linear relationship, the Pearson correlation is unsuitable.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用相关性计算两个连续变量的双变量度量。更具体地说，我们将使用*皮尔逊相关系数*来衡量两个变量之间的*线性关系*的强度。如果没有线性关系，那么皮尔逊相关系数是不合适的。
- en: So, how do we know our data is linear? There are more rigorous ways to check,
    but, as usual, a visualization is a great start. In particular, we will use a
    *scatterplot* to depict all observations based on their x and y coordinates.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们如何知道我们的数据是线性的呢？有更严格的检查方法，但通常情况下，可视化是一个很好的开始。特别是，我们将使用*散点图*根据它们的x和y坐标来描述所有观测。
- en: If it appears a line could be drawn through the scatterplot that summarizes
    the overall pattern, then it’s a linear relationship and the Pearson correlation
    can be used. If you would need a curve or some other shape to summarize the pattern,
    then the opposite holds. [Figure 4-2](#linear-vs-non-linear) depicts one linear
    and two nonlinear relationships.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如果看起来可以画一条穿过散点图总结整体模式的线，那么这就是线性关系，可以使用皮尔逊相关系数。如果你需要一条曲线或其他形状来总结模式，那么情况就相反。[图 4-2](#linear-vs-non-linear)描述了一个线性和两个非线性关系。
- en: '![Linear versus non-linear scatterplot relationships](assets/aina_0402.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![线性与非线性散点图关系](assets/aina_0402.png)'
- en: Figure 4-2\. Linear versus nonlinear relationships
  id: totrans-17
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图4-2\. 线性与非线性关系
- en: 'In particular, [Figure 4-2](#linear-vs-non-linear) gives an example of a *positive*
    linear relationship: as values on the x-axis increase, so do the values on the
    y-axis (at a linear rate).'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 特别是，[图4-2](#linear-vs-non-linear)给出了一个*正*线性关系的例子：随着x轴上的值增加，y轴上的值也会增加（呈线性速率）。
- en: It’s also possible to have a *negative* correlation, where a negative line summarizes
    the relationship, or no correlation at all, in which a flat line summarizes it.
    These different types of linear relationships are shown in [Figure 4-3](#negative-positive-no-correlation).
    Remember, these all must be linear relationships for correlation to apply.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 也可能存在*负*相关，其中负斜线总结了关系，或者根本没有相关性，在这种情况下，一条水平线总结了它。这些不同类型的线性关系在[图4-3](#negative-positive-no-correlation)中显示。请记住，这些都必须是线性关系才能应用相关性。
- en: '![Correlation types](assets/aina_0403.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![相关类型](assets/aina_0403.png)'
- en: Figure 4-3\. Negative, zero, and positive correlations
  id: totrans-21
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图4-3\. 负相关、零相关和正相关
- en: Once we’ve established that the data is linear, we can find the correlation
    coefficient. It always takes a value between –1 and 1, with –1 indicating a perfect
    negative linear relationship, 1 a perfect positive linear relationship, and 0
    no linear relationship at all. [Table 4-1](#correlation-interpretation) shows
    some rules of thumb for evaluating the strength of a correlation coefficient.
    These are not official standards by any means, but a useful jumping-off point
    for interpretation.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们确定数据是线性的，就可以找到相关系数。它始终在–1和1之间取值，–1表示完全负线性关系，1表示完全正线性关系，0表示根本没有线性关系。[表4-1](#correlation-interpretation)显示了评估相关系数强度的一些经验法则。这些绝不是官方标准，但是是解释的一个有用出发点。
- en: Table 4-1\. Interpretation of correlation coefficients
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 表4-1\. 相关系数的解释
- en: '| Correlation coefficient | Interpretation |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| 相关系数 | 解释 |'
- en: '| --- | --- |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| –1.0 | Perfect negative linear relationship |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| –1.0 | 完全的负线性关系 |'
- en: '| –0.7 | Strong negative relationship |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| –0.7 | 强烈的负相关关系 |'
- en: '| –0.5 | Moderate negative relationship |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| –0.5 | 适度的负相关关系 |'
- en: '| –0.3 | Weak negative relationship |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| –0.3 | 弱负相关关系 |'
- en: '| 0 | No linear relationship |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 无线性关系 |'
- en: '| +0.3 | Weak positive relationship |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| +0.3 | 弱正相关关系 |'
- en: '| +0.5 | Moderate positive relationship |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| +0.5 | 适度的正相关关系 |'
- en: '| +0.7 | Strong positive relationship |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| +0.7 | 强烈的正相关关系 |'
- en: '| +1.0 | Perfect positive linear relationship |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| +1.0 | 完全的正线性关系 |'
- en: 'With the basic conceptual framework for correlations in mind, let’s do some
    analysis in Excel. We will be using a vehicle mileage dataset; you can find *mpg.xlsx*
    in the *mpg* subfolder of the book repository’s [*datasets* folder](https://oreil.ly/ygWQn).
    This is a new dataset, so take some time to learn about it: what types of variables
    are we working with? Summarize and visualize them using the tools covered in [Chapter 1](ch01.html#foundations-of-eda).
    To help with subsequent analysis, don’t forget to add an index column and convert
    the dataset into a table, which I will call *mpg*.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在心中牢记相关性的基本概念框架后，让我们在Excel中进行一些分析。我们将使用一个车辆里程数据集；你可以在书籍存储库的[*数据集*文件夹](https://oreil.ly/ygWQn)中的*mpg*子文件夹中找到*mpg.xlsx*。这是一个新的数据集，所以花点时间了解一下它：我们正在处理什么类型的变量？使用[第1章](ch01.html#foundations-of-eda)中介绍的工具对它们进行总结和可视化。为了帮助后续分析，请不要忘记添加索引列并将数据集转换为表格，我将其称为*mpg*。
- en: 'Excel includes the `CORREL()` function to calculate the correlation coefficient
    between two arrays:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: Excel包含`CORREL()`函数，用于计算两个数组之间的相关系数：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Let’s use this function to find the correlation between `weight` and `mpg`
    in our dataset:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用这个函数找到我们数据集中`weight`和`mpg`之间的相关性：
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'This indeed returns a value between –1 and 1: –0.832\. (Do you remember how
    to interpret this?)'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '这的确返回了一个介于–1和1之间的值: –0.832\. (你还记得如何解释这个值吗?)'
- en: A *correlation matrix* presents the correlations across all pairs of variables.
    Let’s build one using the Data Analysis ToolPak. From the ribbon, head to Data
    → Data Analysis → Correlation.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '*相关矩阵*呈现了所有变量对之间的相关性。让我们使用数据分析工具包来构建一个。从功能区中，前往数据 → 数据分析 → 相关性。'
- en: Remember that this is a measure of linear relationship between two *continuous*
    variables, so we should exclude categorical variables like *origin* and be judicious
    about including discrete variables like *cylinders* or *model.year*. The ToolPak
    insists on all variables being in a contiguous range, so I will cautiously include
    *cylinders*. [Figure 4-4](#insert-correlation-matrix-excel) shows what the ToolPak
    source menu should look like.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，这是两个*连续*变量之间线性关系的度量，因此我们应该排除像*origin*这样的分类变量，并审慎地考虑包含像*cylinders*或*model.year*这样的离散变量。工具包要求所有变量都在一个连续的范围内，因此我将谨慎地包括
    *cylinders*。[图 4-4](#insert-correlation-matrix-excel) 显示了工具包源菜单的样子。
- en: '![Insert correlation matrix](assets/aina_0404.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![插入相关矩阵](assets/aina_0404.png)'
- en: Figure 4-4\. Inserting a correlation matrix in Excel
  id: totrans-44
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-4\. 在 Excel 中插入相关矩阵
- en: This results in a correlation matrix as shown in [Figure 4-5](#correlation-matrix-excel).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了如 [图 4-5](#correlation-matrix-excel) 所示的相关矩阵。
- en: '![Correlation matrix](assets/aina_0405.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![相关矩阵](assets/aina_0405.png)'
- en: Figure 4-5\. Correlation matrix in Excel
  id: totrans-47
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-5\. Excel 中的相关矩阵
- en: 'We can see the –0.83 in cell `B6`: it’s the intersection of *weight* and *mpg*.
    We would also see the same value in cell `F2`, but Excel left this half of the
    matrix blank, as it’s redundant information. All values along the diagonal are
    1, as any variable is perfectly correlated with itself.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在单元格`B6`中看到 `-0.83`，这是*重量*和*mpg*的交叉点。同样的数值也会在单元格`F2`中看到，但Excel将矩阵的这一半留空，因为这是冗余信息。对角线上的所有数值都是1，因为任何变量与自身完全相关。
- en: Warning
  id: totrans-49
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: The Pearson correlation coefficient is only a suitable measure when the relationship
    between the two variables is linear.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 当两个变量之间的关系是线性的时，皮尔逊相关系数才是一个合适的度量。
- en: We’ve made a big leap in our assumptions about our variables by analyzing their
    correlations. Can you think of what that is? *We assumed their relationship is
    linear.* Let’s check that assumption with scatterplots. Unfortunately, there is
    no way in basic Excel to generate scatterplots of each pair of variables at once.
    For practice, consider plotting them all, but let’s try it with the *weight* and
    *mpg* variables. Highlight this data, then head to the ribbon and click Insert
    → Scatter.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析它们的相关性，我们对变量的关系做出了重大假设。你能想到是什么吗？*我们假设它们的关系是线性的。* 让我们通过散点图来验证这个假设。不幸的是，在基本的
    Excel 中没有办法同时生成每对变量的散点图。练习时，考虑将它们全部绘制，但让我们先尝试一下 *重量* 和 *mpg* 变量。选中这些数据，然后转到功能区，点击插入
    → 散点图。
- en: I will add a custom chart title and relabel the axes to aid in interpretation.
    To change the chart title, double-click on it. To relabel the axes, click the
    perimeter of the chart and then select the plus sign that appears to expand the
    Chart Elements menu. (On Mac, click inside the chart and then Chart Design → Add
    Chart Element.) Select Axis Titles from the menu. [Figure 4-6](#weight-mileage-scatter)
    shows the resulting scatterplot. It’s not a bad idea to include units of measurement
    on the axes to help outsiders make sense of the data.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 我将添加一个自定义的图表标题，并重新标记轴线以帮助解释。要更改图表标题，双击它。要重新标记轴线，点击图表的边缘，然后选择出现的加号以展开图表元素菜单（在
    Mac 上，点击图表内部，然后选择图表设计 → 添加图表元素）。从菜单中选择轴标题。[图 4-6](#weight-mileage-scatter) 显示了结果散点图。在轴上包含测量单位是一个不错的主意，以帮助外部人员理解数据。
- en: '[Figure 4-6](#weight-mileage-scatter) looks basically like a negative linear
    relationship, with a greater spread given lower weights and higher mileages. By
    default, Excel plotted the first variable in our data selection along the x-axis
    and the second along the y-axis. But why not the other way around? Try switching
    the order of these columns in your worksheet so that *weight* is in column `E`
    and *mpg* in column `F`, then insert a new scatterplot.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 4-6](#weight-mileage-scatter) 基本上显示了一个负线性关系，随着重量减轻和里程增加而扩展。默认情况下，Excel 将我们数据选择中的第一个变量绘制在
    x 轴上，第二个变量绘制在 y 轴上。但为什么不尝试反过来呢？尝试在工作表中切换这些列的顺序，使 *重量* 在列 `E` 中，*mpg* 在列 `F` 中，然后插入一个新的散点图。'
- en: '![scatterplot of weight and mileage](assets/aina_0406.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![重量和里程的散点图](assets/aina_0406.png)'
- en: Figure 4-6\. Scatterplot of weight and mileage
  id: totrans-55
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-6\. 重量和里程的散点图
- en: '[Figure 4-7](#mileage-weight-scatter) shows a mirror image of the relationship.
    Excel is a great tool, but as with any tool, you have to tell it what to do. Excel
    will calculate correlations regardless of whether the relationship is linear.
    It will also make you a scatterplot without concern for which variable should
    go on which axis.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 4-7](#mileage-weight-scatter)展示了关系的镜像。Excel 是一个很棒的工具，但与任何工具一样，你必须告诉它该做什么。Excel
    会计算相关性，无论关系是否线性。它还会制作散点图，而不用担心哪个变量应该放在哪个轴上。'
- en: So, which scatterplot is “right?” Does it matter? By convention, the independent
    variable goes on the x-axis, and dependent on the y-axis. Take a moment to consider
    which is which. If you’re not sure, remember that the independent variable is
    generally the one measured first.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，哪个散点图是“正确的”？这有关系吗？按照惯例，自变量放在 x 轴上，因变量放在 y 轴上。花点时间考虑哪个是哪个。如果不确定，记住自变量通常是首先测量的那个。
- en: Our independent variable is *weight* because it was determined by the design
    and building of the car. *mpg* is the *dependent* variable because we assume it’s
    affected by the car’s weight. This puts *weight* on the x-axis and *mpg* on the
    y-axis.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的自变量是 *weight*，因为它是由汽车的设计和建造确定的。*mpg* 是*因变量*，因为我们假设它受汽车重量的影响。这将*weight*放在
    x 轴上，*mpg*放在 y 轴上。
- en: In business analytics, it is uncommon to have collected data just for the sake
    of statistical analysis; for example, the cars in our *mpg* dataset were built
    to generate revenue, not for a research study on the impact of weight on mileage.
    Because there are not always clear independent and dependent variables, we need
    to be all the more aware of *what* these variables are measuring, and *how* they
    are measured. This is why having some knowledge of the domain you are studying,
    or at least descriptions of your variables and how your observations were collected,
    is so valuable.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在商业分析中，罕见只为统计分析而收集数据；例如，我们的 *mpg* 数据集中的汽车是为了创造收入而建造的，并非用于研究重量对里程影响的研究。由于不总能明确自变量和因变量，我们需要更加注意这些变量在衡量什么以及它们如何被测量。这就是为什么了解你研究的领域或至少了解变量描述及观察数据的方式如此重要。
- en: '![scatterplot of mileage and weight](assets/aina_0407.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![里程和重量的散点图](assets/aina_0407.png)'
- en: Figure 4-7\. Scatterplot of mileage and weight
  id: totrans-61
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-7\. 里程和重量的散点图
- en: From Correlation to Regression
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从相关性到回归
- en: 'Though it’s conventional to place the independent variable on the x-axis, it
    makes no difference to the related correlation coefficient. However, there is
    a big caveat here, and it relates to the earlier idea of using a line to summarize
    the relationship found by the scatterplot. This practice begins to diverge from
    correlation, and it’s one you may have heard of: *linear regression*.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然按照惯例将自变量放在 x 轴上，但这不影响相关系数。然而，这里有一个重要的警告，它与早期使用直线总结散点图中找到的关系的想法相关联。这一做法开始偏离相关性，你可能听说过：*线性回归*。
- en: Correlation is agnostic to which variable you call independent and which you
    call dependent; that doesn’t factor into its definition as “the extent to which
    two variables move together linearly.”
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 相关性不关心你称哪个变量为自变量或因变量；这不影响其定义为“两个变量在线性移动程度”的因素。
- en: On the other hand, linear regression is inherently affected by this relationship
    as “the estimated impact of a unit change of the independent variable *X* on the
    dependent variable *Y*.”
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，线性回归本质上受到这种关系的影响，“自变量 *X* 的单位变化对因变量 *Y* 的估计影响”。
- en: You are going to see that the line we fit through our scatterplot can be expressed
    as an equation; unlike the correlation coefficient, this equation depends on how
    we define our independent and dependent variables.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到我们通过散点图拟合的直线可以表示为一个方程；与相关系数不同，这个方程取决于我们如何定义自变量和因变量。
- en: Like correlation, linear regression assumes that a linear relationship exists
    between the two variables. Other assumptions do exist and are important to consider
    when modeling data. For example, we do not want to have extreme observations that
    may disproportionately affect the overall trend of the linear relationship.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 像相关性一样，线性回归假设两个变量之间存在线性关系。还存在其他假设，对建模数据时很重要。例如，我们不希望有极端观察值，这可能会不成比例地影响线性关系的总体趋势。
- en: For the purposes of our demonstration, we will overlook this and other assumptions
    for now. These assumptions are often difficult to test using Excel; your knowledge
    of statistical programming will serve you well when looking into the deeper points
    of linear regression.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 出于演示目的，我们暂时忽略这个和其他假设。这些假设在使用Excel进行测试时通常很难。当您深入研究线性回归的深层次问题时，您对统计编程的了解将对您大有裨益。
- en: 'Take a deep breath; it’s time for another equation:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 深呼吸一下；是时候看另一个方程了：
- en: Equation 4-1\. The equation for linear regression
  id: totrans-70
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 4-1\. 线性回归方程
- en: <math alttext="upper Y equals beta 0 plus beta 1 times upper X plus epsilon"
    display="block"><mrow><mi>Y</mi> <mo>=</mo> <msub><mi>β</mi> <mn>0</mn></msub>
    <mo>+</mo> <msub><mi>β</mi> <mn>1</mn></msub> <mo>×</mo> <mi>X</mi> <mo>+</mo>
    <mi>ϵ</mi></mrow></math>
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="upper Y equals beta 0 plus beta 1 times upper X plus epsilon"
    display="block"><mrow><mi>Y</mi> <mo>=</mo> <msub><mi>β</mi> <mn>0</mn></msub>
    <mo>+</mo> <msub><mi>β</mi> <mn>1</mn></msub> <mo>×</mo> <mi>X</mi> <mo>+</mo>
    <mi>ϵ</mi></mrow></math>
- en: The goal of [Equation 4-1](#linear-regression-equation) is to predict our dependent
    variable *Y*. That’s the left side. You may remember from school that a line can
    be broken into its *intercept* and *slope*. That’s where <math alttext="beta 0"><msub><mi>β</mi>
    <mn>0</mn></msub></math> and <math alttext="beta 1 times upper X Subscript i"><mrow><msub><mi>β</mi>
    <mn>1</mn></msub> <mo>×</mo> <msub><mi>X</mi> <mi>i</mi></msub></mrow></math>
    , respectively, come in. In the second term, we multiply our independent variable
    by a slope *coefficient*.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '[方程 4-1](#linear-regression-equation) 的目标是预测我们的因变量*Y*。这是左侧。你可能还记得从学校里学过，一条线可以分解为其*截距*和*斜率*。这就是<math
    alttext="beta 0"><msub><mi>β</mi> <mn>0</mn></msub></math>和<math alttext="beta
    1 times upper X Subscript i"><mrow><msub><mi>β</mi> <mn>1</mn></msub> <mo>×</mo>
    <msub><mi>X</mi> <mi>i</mi></msub></mrow></math>在哪里发挥作用。在第二项中，我们通过斜率*系数*乘以我们的自变量。'
- en: Finally, there will be a part of the relationship between our independent and
    dependent variable that can be explained not by the model per se but by some external
    influence. This is known as the model’s *error* and is indicated by <math alttext="epsilon
    Subscript i"><msub><mi>ε</mi> <mi>i</mi></msub></math> .
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们的自变量和因变量之间的关系中可能有一部分是模型本身无法解释的，而是由某些外部影响所致。这被称为模型的*误差*，并由<math alttext="epsilon
    Subscript i"><msub><mi>ε</mi> <mi>i</mi></msub></math>表示。
- en: 'Earlier we used the independent samples t-test to examine a significant difference
    in means between two groups. Here, we are measuring the linear influence of one
    continuous variable on another. We will do this by examining whether the *slope*
    of the fit regression line is statistically different than zero. That means our
    hypothesis test will work something like this:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 早些时候，我们使用独立样本t检验来检验两组之间平均值的显著差异。在这里，我们正在测量一个连续变量对另一个连续变量的线性影响。我们将通过检验回归线的*斜率*是否与零在统计上有显著差异来进行。这意味着我们的假设检验将类似于这样进行：
- en: 'H0: There is no linear influence of our independent variable on our dependent
    variable. (The slope of the regression line equals zero.)'
  id: totrans-75
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'H0: 我们的自变量对因变量没有线性影响。（回归线的斜率等于零。）'
- en: ''
  id: totrans-76
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Ha: There is a linear influence of our independent variable on our dependent
    variable. (The slope of the regression line does not equal zero.)'
  id: totrans-77
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'Ha: 我们的自变量对因变量有线性影响。（回归线的斜率不等于零。）'
- en: '[Figure 4-8](#hypothesis-test) shows some examples of what significant and
    insignificant slopes might look like.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 4-8](#hypothesis-test) 展示了显著和不显著斜率的一些例子。'
- en: Remember, we don’t have *all* the data, so we don’t know what the “true” slope
    would be for the population. Instead, we are inferring whether, given our sample,
    this slope would be statistically different from zero. We can use the same p-value
    methodology to estimate the slope’s significance that we did to find the difference
    in means of two groups. We will continue to conduct two-tailed tests at the 95%
    confidence interval. Let’s jump into finding the results using Excel.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，我们没有*所有*的数据，因此我们不知道人群的“真实”斜率会是多少。相反，我们在推断，考虑到我们的样本，这个斜率是否在统计上与零有显著差异。我们可以使用相同的p值方法来估计斜率的显著性，就像我们之前用来找出两组平均数差异的方法一样。我们将继续在95%置信区间进行双尾检验。让我们开始使用Excel找出结果。
- en: '![Regression slope hypothesis](assets/aina_0408.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![回归斜率假设](assets/aina_0408.png)'
- en: Figure 4-8\. Regression models with significant and insignificant slopes
  id: totrans-81
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-8\. 具有显著和不显著斜率的回归模型
- en: Linear Regression in Excel
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Excel中进行线性回归
- en: 'In this demo of linear regression on the *mpg* dataset in Excel, we test whether
    a car’s weight (*weight*) has a significant influence on its mileage (*mpg*).
    That means our hypotheses will be:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个Excel中*mpg*数据集的线性回归演示中，我们测试一辆汽车的重量（*weight*）是否对其行驶里程（*mpg*）有显著影响。这意味着我们的假设将是：
- en: 'H0: There is no linear influence of weight on mileage.'
  id: totrans-84
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'H0: 重量对里程没有线性影响。'
- en: ''
  id: totrans-85
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Ha: There is a linear influence of weight on mileage.'
  id: totrans-86
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'Ha: 重量对里程的线性影响是存在的。'
- en: 'Before getting started, it’s a good idea to write out the regression equation
    using the specific variables of interest, which I’ve done in [Equation 4-2](#mpg-regression-equation):'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，建议使用感兴趣的具体变量写出回归方程，我已在[方程式 4-2](#mpg-regression-equation)中完成了这一点：
- en: Equation 4-2\. Our regression equation for estimating mileage
  id: totrans-88
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程式 4-2\. 用于估计里程的回归方程
- en: <math alttext="m p g equals beta 0 plus beta 1 times w e i g h t plus epsilon"
    display="block"><mrow><mi>m</mi> <mi>p</mi> <mi>g</mi> <mo>=</mo> <msub><mi>β</mi>
    <mn>0</mn></msub> <mo>+</mo> <msub><mi>β</mi> <mn>1</mn></msub> <mo>×</mo> <mi>w</mi>
    <mi>e</mi> <mi>i</mi> <mi>g</mi> <mi>h</mi> <mi>t</mi> <mo>+</mo> <mi>ϵ</mi></mrow></math>
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="m p g equals beta 0 plus beta 1 times w e i g h t plus epsilon"
    display="block"><mrow><mi>m</mi> <mi>p</mi> <mi>g</mi> <mo>=</mo> <msub><mi>β</mi>
    <mn>0</mn></msub> <mo>+</mo> <msub><mi>β</mi> <mn>1</mn></msub> <mo>×</mo> <mi>w</mi>
    <mi>e</mi> <mi>i</mi> <mi>g</mi> <mi>h</mi> <mi>t</mi> <mo>+</mo> <mi>ϵ</mi></mrow></math>
- en: 'Let’s start with visualizing the results of the regression: we already have
    the scatterplot from [Figure 4-6](#weight-mileage-scatter), now it’s just a matter
    of overlaying or “fitting” the regression line onto it. Click on the perimeter
    of the plot to launch the “Chart Elements” menu. Click on “Trendline,” then “More
    Options” to the side. Click the radio button at the bottom of the “Format Trendline”
    screen reading “Display Equation on chart.”'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从可视化回归结果开始：我们已经有了来自[图 4-6](#weight-mileage-scatter)的散点图，现在只需将回归线覆盖或“拟合”到上面。点击图的周边以启动“图表元素”菜单。点击“趋势线”，然后点击侧边的“更多选项”。点击“在图表上显示方程式”屏幕底部的单选按钮。
- en: Now let’s click on the resulting equation on the graph to add bold formatting
    and increase its font size to 14\. We’ll make the trendline solid black and give
    it a 2.5-point width by clicking on it in the graph, then going to the paint bucket
    icon at the top of the Format Trendline menu. We now have the making of linear
    regression. Our scatterplot with trendline looks like [Figure 4-9](#scatter-plot-trendline).
    Excel also includes the *regression* equation we are looking for from [Equation
    4-2](#mpg-regression-equation) to estimate a car’s mileage based on its weight.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们点击图表中的结果方程式，添加粗体格式并将其字体大小增加到14号。我们将趋势线设为纯黑色，并通过点击图表中的它，然后转到Format Trendline菜单顶部的油漆桶图标。我们现在拥有了线性回归的基础。我们的散点图与趋势线看起来像[图
    4-9](#scatter-plot-trendline)。Excel还包括了我们根据其重量估计汽车里程的*回归*方程，如[方程式 4-2](#mpg-regression-equation)所示。
- en: '![scatterplot regression equation in Excel](assets/aina_0409.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![Excel中的散点图回归方程](assets/aina_0409.png)'
- en: Figure 4-9\. Scatterplot with trendline and regression equation for the effect
    of weight on mileage
  id: totrans-93
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-9\. 带有权重对里程影响的散点图和趋势线及回归方程
- en: We can place the intercept before the slope in our equation to get [Equation
    4-3](#excel-fit-regression-equation).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在我们的方程中将截距放在斜率之前，以获得[方程式 4-3](#excel-fit-regression-equation)。
- en: Equation 4-3\. Equation 4-3\. Our fit regression equation for estimating mileage
  id: totrans-95
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程式 4-3\. 方程式 4-3\. 用于估计里程的我们的拟合回归方程
- en: <math alttext="m p g equals 46.217 minus 0.0076 times w e i g h t" display="block"><mrow><mi>m</mi>
    <mi>p</mi> <mi>g</mi> <mo>=</mo> <mn>46.217</mn> <mo>-</mo> <mn>0.0076</mn> <mo>×</mo>
    <mi>w</mi> <mi>e</mi> <mi>i</mi> <mi>g</mi> <mi>h</mi> <mi>t</mi></mrow></math>
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="m p g equals 46.217 minus 0.0076 times w e i g h t" display="block"><mrow><mi>m</mi>
    <mi>p</mi> <mi>g</mi> <mo>=</mo> <mn>46.217</mn> <mo>-</mo> <mn>0.0076</mn> <mo>×</mo>
    <mi>w</mi> <mi>e</mi> <mi>i</mi> <mi>g</mi> <mi>h</mi> <mi>t</mi></mrow></math>
- en: 'Notice that Excel does not include the error term as part of the regression
    equation. Now that we’ve fit the regression line, we’ve quantified the difference
    between what values we expect from the equation and what values are found in the
    data. This difference is known as the *residual*, and we’ll come back to it later
    in this chapter. First, we’ll get back to what we set out to do: establish statistical
    significance.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，Excel未将误差项作为回归方程的一部分。现在我们已经拟合了回归线，我们量化了期望从方程中得到的值与数据中实际值之间的差异。这种差异称为*残差*，我们稍后会在本章回来讨论它。首先，我们将回到我们的目标：建立统计显著性。
- en: 'It’s great that Excel fit the line for us and gave us the resulting equation.
    But this does *not* give us enough information to conduct the hypothesis test:
    we still don’t know whether the line’s slope is statistically different than zero.
    To get this information, we will again use the Analysis ToolPak. From the ribbon,
    go to Data → Data Analysis → Regression. You’ll be asked to select your Y and
    X ranges; these are your dependent and independent variables, respectively. Make
    sure to indicate that your inputs include labels, as shown in [Figure 4-10](#regression-settings).'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 很棒，Excel为我们拟合了线并给出了结果方程式。但这并不足以进行假设检验：我们仍然不知道线的斜率是否在统计上与零有显著差异。为了获取这些信息，我们将再次使用Analysis
    ToolPak。从菜单栏，转到数据 → 数据分析 → 回归。您将被要求选择您的Y和X范围；这些是您的因变量和自变量，分别。确保指示您的输入包括标签，如[图
    4-10](#regression-settings)所示。
- en: '![ToolPak regression setup](assets/aina_0410.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![ToolPak regression setup](assets/aina_0410.png)'
- en: Figure 4-10\. Menu settings for deriving a regression with the ToolPak
  id: totrans-100
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-10\. 使用ToolPak导出回归设置的菜单
- en: This results in quite a lot of information, which is shown in [Figure 4-11](#regression-output-excel).
    Let’s step through it.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这带来了大量信息，显示在[图 4-11](#regression-output-excel)中。让我们逐步进行解释。
- en: Ignore the first section in cells `A3:B8` for now; we will return to it later.
    Our second section in `A10:F14` is labeled ANOVA (short for *analysis of variance*).
    This tells us whether our regression performs significantly better with the coefficient
    of the slope included versus one with just the intercept.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 暂时忽略单元格 `A3:B8` 中的第一部分；我们稍后会回到它。我们的第二部分在 `A10:F14` 中标记为方差分析（简称 *ANOVA*）。这告诉我们我们的回归是否与仅有截距的回归相比显著更好。
- en: '![Regression results](assets/aina_0411.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![回归结果](assets/aina_0411.png)'
- en: Figure 4-11\. Regression output
  id: totrans-104
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-11\. 回归输出
- en: '[Table 4-2](#intercept-vs-full) spells out what the competing equations are
    here.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 4-2](#intercept-vs-full) 阐明了这里的竞争方程。'
- en: Table 4-2\. Intercept-only versus full regression model
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 表 4-2\. 仅截距模型与完整回归模型
- en: '| Incercept-only model | Model with coefficients |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 仅截距模型 | 带系数的模型 |'
- en: '| --- | --- |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| *mpg* = 46.217 | *mpg* = 46.217 − 0.0076 × *weight* |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| *mpg* = 46.217 | *mpg* = 46.217 − 0.0076 × *weight* |'
- en: 'A statistically significant result indicates that our coefficients do improve
    the model. We can determine the results of the test from the p-value found in
    cell `F12` of [Figure 4-11](#regression-output-excel). Remember, this is scientific
    notation, so read the p-value as 6.01 times 10 to the power of –102: much smaller
    than 0.05\. We can conclude that *weight* is worth keeping as a coefficient in
    the regression model.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 统计上显著的结果表明我们的系数确实改善了模型。我们可以从[图 4-11](#regression-output-excel)的单元格 `F12` 中找到的
    p 值来确定测试结果。请记住，这是科学记数法，因此将 p 值读作为 $6.01 \times 10^{-102}$：远小于 0.05。我们可以得出结论，*重量*
    值得作为回归模型中的系数保留。
- en: That brings us to the third section in cells `A16:I18`; here is where we find
    what we were originally looking for. This range contains a lot of information,
    so let’s go column by column starting with the coefficients in cells `B17:B18`.
    These should look familiar as the intercept and slope of the line that were given
    in [Equation 4-3](#excel-fit-regression-equation).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 这将我们带到了第三部分，在单元格 `A16:I18` 中；这里是我们最初寻找的信息。这个范围包含了大量的信息，所以让我们从列开始逐列解释，从系数开始，单元格
    `B17:B18`。这些应该看起来很熟悉，因为它们是在[方程式 4-3](#excel-fit-regression-equation)中给出的线的截距和斜率。
- en: 'Next, the standard error in `C17:C18`. We talked about this in [Chapter 3](ch03.html#foundations-of-inference):
    it’s a measure of variability across repeated samples and in this case can be
    thought of as a measure of our coefficients’ precision.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是标准误差，在 `C17:C18` 中。我们在[第 3 章](ch03.html#foundations-of-inference)中已经讨论过这个：它是在重复样本中变异性的度量，而在这种情况下可以看作是我们系数精度的度量。
- en: We then have what Excel calls the “t Stat,” otherwise known as the t-statistic
    or test statistic, in `D17:D18`; this can be derived by dividing the coefficient
    by the standard error. We can compare it to our critical value of 1.96 to establish
    statistical significance at 95% confidence.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是 Excel 称之为 “t 统计量”的内容，又称 t 统计量或检验统计量，在 `D17:D18` 中；这可以通过将系数除以标准误差来获得。我们可以将其与
    1.96 的临界值进行比较，以在 95% 置信水平下建立统计显著性。
- en: It’s more common, however, to interpret and report on the p-value, which gives
    the same information. We have two p-values to interpret. First, the intercept’s
    coefficient in `E17`. This tells us whether the intercept is significantly different
    than zero. The significance of the intercept is *not* part of our hypothesis test,
    so this information is irrelevant. (This is another good example of why we can’t
    always take Excel’s output at face value.)
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，更常见的是解释和报告 p 值，它提供了相同的信息。我们有两个 p 值要解释。首先，截距的系数在 `E17` 中。这告诉我们截距是否与零显著不同。截距的显著性
    *不* 是我们假设检验的一部分，因此此信息是无关的。（这是另一个说明我们不能仅仅以 Excel 输出为准的好例子。）
- en: Warning
  id: totrans-115
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: While most statistical packages (including Excel) report the p-value of the
    intercept, it’s usually not relevant information.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管大多数统计软件（包括 Excel）报告截距的 p 值，但通常这不是相关信息。
- en: 'Instead, we want the p-value of *weight* in cell `E18`: this is related to
    the line’s slope. The p-value is well under 0.05, so we fail to reject the null
    and conclude that weight does likely influence mileage. In other words, the line’s
    slope is significantly different than zero. Just like with our earlier hypothesis
    tests, we will shy away from concluding that we’ve “proven” a relationship, or
    that more weight *causes* lower mileage. Again, we are making inferences about
    a population based on a sample, so uncertainty is inherent.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，我们想要单元格 `E18` 中*重量*的 p 值：这与线的斜率有关。p 值远低于 0.05，因此我们未能拒绝零假设，并得出结论称重量可能确实影响里程数。换句话说，该线的斜率明显不同于零。就像我们早期的假设检验一样，我们不会得出我们已经“证明”了一种关系的结论，或者更重的重量*导致*较低的里程数。再次强调，我们是基于样本对总体进行推断，因此不确定性是固有的。
- en: 'The output also gives us the 95% confidence interval for our intercept and
    slope in cells `F17:I18`. By default, this is stated twice: had we asked for a
    different confidence interval in the input menu, we’d have received both here.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 输出还给出了我们截距和斜率的 95% 置信区间，分别在单元格 `F17:I18` 中。默认情况下，这个信息被重复了：如果我们在输入菜单中要求不同的置信区间，那么这里也会得到相应的输出。
- en: 'Now that you’re getting the hang of interpreting the regression output, let’s
    try making a *point estimate* based on the equation line: what would we expect
    the mileage to be for a car weighing 3,021 pounds? Let’s plug it into our regression
    equation in [Equation 4-4](#regression-point-estimate):'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经掌握了解释回归输出的要诀，让我们尝试根据方程线进行*点估计*：如果一辆重 3,021 磅的汽车，我们预期它的里程数会是多少？让我们把它代入我们在[方程
    4-4](#regression-point-estimate)中的回归方程：
- en: Equation 4-4\. Equation 4-4\. Making a point estimate based on our equation
  id: totrans-120
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 4-4\. 基于我们的方程进行点估计
- en: <math alttext="m p g equals 46.217 minus 0.0076 times 3021" display="block"><mrow><mi>m</mi>
    <mi>p</mi> <mi>g</mi> <mo>=</mo> <mn>46.217</mn> <mo>-</mo> <mn>0.0076</mn> <mo>×</mo>
    <mn>3021</mn></mrow></math>
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="m p g equals 46.217 minus 0.0076 times 3021" display="block"><mrow><mi>m</mi>
    <mi>p</mi> <mi>g</mi> <mo>=</mo> <mn>46.217</mn> <mo>-</mo> <mn>0.0076</mn> <mo>×</mo>
    <mn>3021</mn></mrow></math>
- en: 'Based on [Equation 4-4](#regression-point-estimate), we expect a car weighing
    3,021 pounds to get 23.26 miles per gallon. Take a look at the source dataset:
    there *is* an observation weighing 3,021 pounds (Ford Maverick, row `101` in the
    dataset) and it gets 18 miles per gallon, not 23.26\. *What gives?*'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 基于[方程 4-4](#regression-point-estimate)，我们预计一辆重 3,021 磅的汽车能行驶 23.26 英里每加仑。看看源数据集：数据中有一条重
    3,021 磅的观察结果（福特麦弗里克，数据集中的第 `101` 行），但它每加仑只能行驶 18 英里，而不是 23.26。*怎么回事？*
- en: 'This discrepancy is the *residual* that was mentioned earlier: it’s the difference
    between the values we estimated in the regression equation and those that are
    found in the actual data. I’ve included this and some other observations in [Figure 4-12](#residuals-labeled).
    The scatterpoints represent what values are actually found in the dataset, and
    the line represents what values we predicted with the regression.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这种差异就是之前提到的*残差*：它是我们在回归方程中估计的值与实际数据中找到的值之间的差异。我已在[图 4-12](#residuals-labeled)中包括了这些以及其他一些观察结果。散点代表数据集中实际找到的值，而直线则代表我们用回归预测的值。
- en: It stands to reason that we’d be motivated to minimize the difference between
    these values. Excel and most regression applications use *ordinary least squares*
    (OLS) to do this. Our goal in OLS is to minimize residuals, specifically, the
    *sum of squared residuals*, so that both negative and positive residuals are measured
    equally. The lower the sum of squared residuals, the less of a difference there
    is between our actual and expected values, and the better our regression equation
    is at making estimates.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 合理推测我们会受到激励以尽量减少这些值之间的差异。Excel 和大多数回归应用程序使用*普通最小二乘法*（OLS）来实现这一点。在OLS中，我们的目标是最小化残差，特别是*残差平方和*，以便负值和正值的残差都能平等衡量。残差平方和越低，我们的实际值和预期值之间的差异就越小，我们的回归方程在估计方面就越好。
- en: '![Residuals shown in Excel](assets/aina_0412.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![在 Excel 中显示的残差](assets/aina_0412.png)'
- en: Figure 4-12\. Residuals as the differences between actual and predicted values
  id: totrans-126
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-12\. 残差即实际值与预测值之间的差异
- en: We learned from the p-value of our slope that there is a significant relationship
    between independent and dependent variables. But this does not tell us how *much*
    of the variability in our dependent variable is explained by our independent variable.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从斜率的 p 值中得知，独立变量和因变量之间存在显著关系。但这并不告诉我们因变量的变异性有多少是由独立变量解释的。
- en: Remember that variability is at the heart of what we study as analysts; variables
    vary, and we want to study *why* they vary. Experiments let us do that, by understanding
    the relationship between an independent and dependent variable. But we won’t be
    able to explain everything about our dependent variable with our independent variable.
    There will always be some unexplained error.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，变异性是我们作为分析师研究的核心；变量会变化，我们想研究 *为什么* 它们变化。实验让我们做到了这一点，通过理解自变量和因变量之间的关系。但我们不能用自变量来解释关于我们的因变量的一切。总会有一些无法解释的误差。
- en: '*R-squared*, or the coefficient of determination (which Excel refers to as
    *R-square*), expresses as a percentage how much variability in the dependent variable
    is explained by our regression model. For example, an R-squared of 0.4 indicates
    that 40% of variability in Y can be explained by the model. This means that 1
    minus R-squared is what variability *can’t* be explained by the model. If R-squared
    is 0.4, then 60% of Y’s variability is unaccounted for.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '*R 平方*，或称决定系数（Excel 称为 *R 平方*），表示回归模型解释了因变量变异性的百分比。例如，R 平方为 0.4 表示模型可以解释 Y
    变异性的 40%。这意味着 1 减去 R 平方就是模型无法解释的变异性。如果 R 平方为 0.4，那么 60% 的 Y 的变异性是无法解释的。'
- en: Excel calculates R-squared for us in the first box of regression output; take
    a look back to cell `B5` in [Figure 4-11](#regression-output-excel). The square
    root of R-squared is multiple R, which is also seen in cell `B4` of the output.
    Adjusted R-square (cell `B6`) is used as a more conservative estimate of R-squared
    for a model with multiple independent variables. This measure is of interest when
    conducting *multiple* linear regression, which is beyond the scope of this book.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: Excel 为我们计算了 R 平方在回归输出的第一个框中；回顾一下[图 4-11](#regression-output-excel)中的 B5 单元格。R
    平方的平方根是多重 R，也可以在输出的 B4 单元格中看到。调整后的 R 平方（B6 单元格）被用作对具有多个自变量的模型的 R 平方的更保守估计。这个指标在进行
    *多元* 线性回归时是有用的，这超出了本书的范围。
- en: 'There are other ways than R-squared to measure the performance of regression:
    Excel includes one of them, the standard error of the regression, in its output
    (cell `B7` in [Figure 4-11](#regression-output-excel)). This measure tells us
    the average distance that observed values deviate from the regression line. Some
    analysts prefer this or other measures to R-squared for evaluating regression
    models, although R-squared remains a dominant choice. Regardless of preferences,
    the best evaluation often comes from evaluating multiple figures in their proper
    context, so there’s no need to swear by or swear off any one measure.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 除了 R 平方之外，还有其他衡量回归性能的方法：Excel 在其输出中包括其中一个，即回归标准误差（在[图 4-11](#regression-output-excel)的
    B7 单元格）。这个指标告诉我们观察值偏离回归线的平均距离。一些分析师更喜欢这个或其他指标来评估回归模型，尽管 R 平方仍然是一个主要选择。无论偏好如何，最好的评估通常来自于在适当背景下评估多个图表，所以没有必要盲目追随或拒绝任何一个指标。
- en: 'Congratulations: you conducted and interpreted a complete regression analysis.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜：你进行了并解释了完整的回归分析。
- en: 'Rethinking Our Results: Spurious Relationships'
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重新思考我们的结果：虚假关系
- en: Based on their temporal ordering and our own logic, it’s nearly absolute in
    our mileage example that *weight* should be the independent variable and *mpg*
    the dependent. But what happens if we fit the regression line with these variables
    reversed? Go ahead and give it a try using the ToolPak. The resulting regression
    equation is shown in [Equation 4-5](#weight-mpg-regression-equation).
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 根据它们的时间顺序和我们自己的逻辑，在我们的里程示例中，*重量*应该是自变量，*mpg*应该是因变量，这几乎是绝对的。但是如果我们将这些变量颠倒来拟合回归线会发生什么呢？试试使用
    ToolPak。得到的回归方程显示在[方程 4-5](#weight-mpg-regression-equation)中。
- en: Equation 4-5\. Equation 4-5\. A regression equation to estimate weight based
    on mileage
  id: totrans-135
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 方程 4-5。方程 4-5。一个根据里程估计重量的回归方程
- en: <math alttext="w e i g h t equals 5101.1 minus 90.571 times m p g" display="block"><mrow><mi>w</mi>
    <mi>e</mi> <mi>i</mi> <mi>g</mi> <mi>h</mi> <mi>t</mi> <mo>=</mo> <mn>5101.1</mn>
    <mo>-</mo> <mn>90.571</mn> <mo>×</mo> <mi>m</mi> <mi>p</mi> <mi>g</mi></mrow></math>
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="w e i g h t equals 5101.1 minus 90.571 times m p g" display="block"><mrow><mi>w</mi>
    <mi>e</mi> <mi>i</mi> <mi>g</mi> <mi>h</mi> <mi>t</mi> <mo>=</mo> <mn>5101.1</mn>
    <mo>-</mo> <mn>90.571</mn> <mo>×</mo> <mi>m</mi> <mi>p</mi> <mi>g</mi></mrow></math>
- en: We can flip our independent and dependent variables and get the same correlation
    coefficient. But when we change them for regression, *our coefficients change*.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以颠倒我们的自变量和因变量，并获得相同的相关系数。但当我们将它们改变用于回归时，*我们的系数会改变*。
- en: Were we to find out that *mpg* and *weight* were both influenced simultaneously
    by some outside variable, then neither of these models would be correct. And this
    is the same scenario that we’re faced with in ice cream consumption and shark
    attacks. It’s silly to say that ice cream consumption has any influence on shark
    attacks, because both of these are influenced by temperature, as [Figure 4-13](#ice-cream-shark-attack-confound)
    depicts.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们发现*mpg*和*weight*同时受到某个外部变量的影响，那么这两个模型都不会是正确的。这与我们在冰淇淋消费和鲨鱼袭击中面临的情况是相同的。说冰淇淋消费会影响鲨鱼袭击是愚蠢的，因为这两者都受到温度的影响，正如[图 4-13](#ice-cream-shark-attack-confound)所示。
- en: '![Ice cream versus shark attacks spurious relationship](assets/aina_0413.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![冰淇淋与鲨鱼袭击之间的虚假关系](assets/aina_0413.png)'
- en: 'Figure 4-13\. Ice cream consumption and shark attacks: a spurious relationship'
  id: totrans-140
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 4-13\. 冰淇淋消费和鲨鱼袭击：一种虚假关系
- en: This is called a *spurious* relationship. It’s frequently found in data, and
    it may not be as obvious as this example. Having some domain knowledge of the
    data you are studying can be invaluable for detecting spurious relationships.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这被称为*虚假*关系。它经常出现在数据中，而且可能并不像这个例子那么明显。对你正在研究的数据具有一定领域知识可能对检测虚假关系非常有价值。
- en: Warning
  id: totrans-142
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 警告
- en: Variables can be correlated; there could even be evidence of a causal relationship.
    But the relationship might be driven by some variable you’ve not even accounted
    for.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 变量可能存在相关性；甚至可能有因果关系的证据。但这种关系可能是由一些你甚至没有考虑过的变量驱动的。
- en: Conclusion
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: Remember this old phrase?
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 还记得这句老话吗？
- en: Correlation doesn’t imply causation.
  id: totrans-146
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 相关性不意味着因果关系。
- en: 'Analytics is highly incremental: we usually layer one concept on top of the
    next to build increasingly complex analyses. For example, we’ll always start with
    descriptive statistics of the sample before attemping to infer parameters of the
    population. While correlation may not imply causation, causation is built on the
    foundations of correlation. That means a better way to summarize the relationship
    might be:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 分析是高度渐进的：我们通常会将一个概念叠加在另一个概念之上，以构建越来越复杂的分析。例如，我们总是从样本的描述统计开始，然后再尝试推断出总体的参数。虽然相关性不意味着因果关系，但因果关系是建立在相关性基础之上的。这意味着更好地总结这种关系的方式可能是：
- en: Correlation is a necessary but not sufficient condition for causation.
  id: totrans-148
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 相关性是因果关系的必要条件但不是充分条件。
- en: We’ve just scratched the surface of inferential statistics in this and previous
    chapters. A whole world of tests exists, but all of them use the same framework
    of *hypothesis testing* that we’ve used here. Get this process down, and you’ll
    be able to test for all sorts of different data relationships.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章和之前的章节中，我们只是初步涉及了推论统计学的表面。有很多种测试存在，但它们都使用了与我们在这里使用的*假设检验*相同的框架。掌握这个过程，你就能够测试各种不同的数据关系。
- en: Advancing into Programming
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进入编程领域
- en: I hope you’ve seen and agree that Excel is a fantastic tool for learning statistics
    and analytics. You got a hands-on look at the statistical principles that power
    much of this work, and learned how to explore and test for relationships in real
    datasets.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望你已经看到并同意Excel是学习统计学和分析的一种绝佳工具。你亲身了解了支持这项工作的统计原理，并学会了如何在真实数据集中探索和测试关系。
- en: That said, Excel can have diminishing returns when it comes to more advanced
    analytics. For example, we’ve been checking for properties like normality and
    linearity using visualizations; this is a good start, but there are more robust
    ways to test them (often, in fact, using statistical inference). These techniques
    often rely on matrix algebra and other computationally intensive operations that
    can be tedious to derive in Excel. While add-ins are available to make up for
    these shortcomings, they can be expensive and lack particular features. On the
    other hand, as open source tools R and Python are free, and include many app-like
    features called *packages* that serve nearly any use case. This environment will
    allow you to focus on the conceptual analysis of your data rather than raw computation,
    but you will need to learn how to program. These tools, and the analytics toolkit
    in general, will be the focus of [Chapter 5](ch05.html#data-analytics-stack).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，Excel 在进行更高级分析时可能会有收益递减的情况。例如，我们一直在使用可视化工具检查正态性和线性性等特性；这是一个良好的起点，但还有更为稳健的测试方法（通常使用统计推断）。这些技术通常依赖于矩阵代数和其他计算密集型操作，这些在
    Excel 中推导可能很繁琐。虽然可以使用插件来弥补这些不足，但它们可能昂贵且缺乏特定功能。另一方面，作为开源工具，R 和 Python 是免费的，并且包含许多称为*包*的应用程序式功能，几乎可以满足任何用例。这种环境将允许你专注于数据的概念分析，而不是原始计算，但你需要学习如何编程。这些工具以及分析工具包总体将是[第五章](ch05.html#data-analytics-stack)的重点。
- en: Exercises
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 练习
- en: Practice your correlation and regression chops by analyzing the *ais* dataset
    found in the book repository’s [*datasets* folder](https://oreil.ly/hazKQ). This
    dataset includes height, weight, and blood readings from male and female Australian
    athletes of different sports.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析书库存储的[*数据集*文件夹](https://oreil.ly/hazKQ)中的*ais*数据集，练习你的相关性和回归技能。该数据集包括来自不同体育项目的澳大利亚男女运动员的身高、体重和血液读数。
- en: 'With the dataset, try the following:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 使用数据集，尝试以下操作：
- en: Produce a correlation matrix of the relevant variables in this dataset.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成该数据集中相关变量的相关矩阵。
- en: Visualize the relationship of *ht* and *wt*. Is this a linear relationship?
    If so, it is negative or positive?
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可视化*ht*和*wt*的关系。这是线性关系吗？如果是，是正相关还是负相关？
- en: Of *ht* and *wt*, which do you presume is the independent and dependent variable?
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*ht*和*wt*中，你认为哪个是自变量，哪个是因变量？
- en: Is there a significant influence of the independent variable on the dependent
    variable?
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自变量对因变量有显著影响吗？
- en: What is the slope of your fit regression line?
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你拟合的回归线的斜率是多少？
- en: What percentage of the variance in the dependent variable is explained by the
    independent variable?
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自变量解释因变量方差的百分比是多少？
- en: This dataset contains a variable for body mass index, *bmi*. If you are not
    familiar with this metric, take a moment to research how it’s calculated. Knowing
    this, would you want to analyze the relationship between *ht* and *bmi*? Don’t
    hesitate to lean on common sense here rather than just statistical reasoning.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该数据集包含一个变量，即身体质量指数*bmi*。如果你对这个指标不熟悉，请花些时间了解它是如何计算的。了解了这一点，你想分析*ht*和*bmi*之间的关系吗？在这里不要只依赖统计推理，也要倾向于常识。
