- en: 3 Building a blog
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3 构建博客
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Using a static site generator to build a blog
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用静态站点生成器构建博客
- en: How to install and make use of Jekyll
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何安装和使用 Jekyll
- en: Creating a basic blog with Jekyll
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Jekyll 创建基本博客
- en: Blogs are one of the most popular forms of websites on the internet, with over
    75 million people alone using the WordPress platform. A blog is typically fairly
    simple in structure but highly personal in nature. Much like a diary, a blog lists
    posts in chronological order, typically presented with the newest first on the
    home page. Blogs will often have categories and tags as a way to categorize and
    organize content, letting readers quickly find related content to a particular
    post.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 博客是互联网上最受欢迎的网站形式之一，仅 WordPress 平台就有超过 7500 万人使用。博客在结构上通常相当简单，但在本质上非常个性化。就像日记一样，博客按时间顺序列出帖子，通常在主页上以最新帖子为首选。博客通常会使用类别和标签来分类和组织内容，让读者能够快速找到与特定帖子相关的相关内容。
- en: In this chapter, we will focus on building a blog with the Jamstack. The static
    site generator we will use builds a blog by default, so a lot of work will be
    done for us, which leaves us more time to focus on customization of the blog theme
    (how it looks) and other aspects.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将专注于使用 Jamstack 构建博客。我们将使用的静态站点生成器默认构建博客，因此我们将为我们完成大量工作，这让我们有更多时间专注于博客主题（外观）和其他方面的定制。
- en: 3.1 Blogging with Jekyll
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1 使用 Jekyll 进行博客写作
- en: Jekyll ([jekyllrb.com](https://jekyllrb.com/)) is a static site generator that
    is specifically tailored toward blogs (figure 3.1). While you can definitely build
    other types of sites with Jekyll (and build blogs with other generators), you’ll
    find Jekyll really shines when building a Jamstack blog. Jekyll is what powers
    GitHub Pages web pages, which can be incredibly useful for people already using
    GitHub for their projects.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll ([jekyllrb.com](https://jekyllrb.com/)) 是一个专门针对博客的静态站点生成器（如图 3.1）。虽然您当然可以使用
    Jekyll 构建其他类型的网站（以及使用其他生成器构建博客），但您会发现 Jekyll 在构建 Jamstack 博客时特别出色。Jekyll 是 GitHub
    Pages 网页的驱动程序，这对于已经在 GitHub 上使用项目的人来说可能非常有用。
- en: '![CH03_F01_Camden2](Images/CH03_F01_Camden2.png)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F01_Camden2](Images/CH03_F01_Camden2.png)'
- en: Figure 3.1 The Jekyll website ([jekyllrb.com](http://jekyllrb.com/))
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.1 Jekyll 网站 ([jekyllrb.com](http://jekyllrb.com/))
- en: Installation of Jekyll is somewhat more complex than most static site generators
    and can be a bit problematic on Windows. (For detailed operating system-specific
    instructions, see the online documentation at [https://jekyllrb.com/docs/installation/](https://jekyllrb.com/docs/installation/).)
    At this time, Jekyll isn’t officially supported on Windows. Personally, I’ve used
    Jekyll on Windows for some time, and it works fine, but the lack of support is
    something to consider before you commit to Jekyll. Modern Windows machines support
    WSL (Windows subsystem for Linux), which may provide a much smoother experience
    with Ruby if you have trouble.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll 的安装比大多数静态站点生成器要复杂一些，在 Windows 上可能会有一些问题。（有关特定操作系统的详细说明，请参阅在线文档[https://jekyllrb.com/docs/installation/](https://jekyllrb.com/docs/installation/)。）目前，Jekyll
    在 Windows 上尚未官方支持。我个人已经使用 Jekyll 在 Windows 上了一段时间，它运行良好，但在您决定使用 Jekyll 之前，缺乏支持是一个需要考虑的因素。现代
    Windows 机器支持 WSL（Windows 子系统 for Linux），如果您在使用 Ruby 时遇到问题，这可能会提供更平滑的体验。
- en: Installing Jekyll requires installing Ruby first. Instructions for that can
    be found at [https://www.ruby-lang.org/en/downloads/](https://www.ruby-lang.org/en/downloads/).
    You’ll then need RubyGems ([https:// rubygems.org/pages/download](https://rubygems.org/pages/download)).
    Don’t worry if you’ve never used Ruby before, as it won’t be required to create
    websites with Jekyll. While Jekyll itself runs on Ruby, you will not need to write
    a line of Ruby unless you start to customize the Jekyll engine itself.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Jekyll 需要先安装 Ruby。有关说明，请参阅[https://www.ruby-lang.org/en/downloads/](https://www.ruby-lang.org/en/downloads/)。然后您需要
    RubyGems ([https:// rubygems.org/pages/download](https://rubygems.org/pages/download))。如果您以前从未使用过
    Ruby，请不要担心，因为使用 Jekyll 创建网站时不需要 Ruby。虽然 Jekyll 本身运行在 Ruby 上，但除非您开始自定义 Jekyll 引擎本身，否则您不需要编写任何
    Ruby 代码。
- en: 'Once you’ve gotten the prerequisites installed, you can install Jekyll itself
    with the command:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了先决条件，您可以使用以下命令安装 Jekyll 本身：
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note that there are installation guides ([https://jekyllrb.com/docs/installation/#guides](https://jekyllrb.com/docs/installation/#guides))
    for multiple operating systems with more details.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，有针对多个操作系统的安装指南（[https://jekyllrb.com/docs/installation/#guides](https://jekyllrb.com/docs/installation/#guides)），其中包含更多详细信息。
- en: As a final step, ensure Jekyll installed correctly by running jekyll in your
    terminal, as shown in figure 3.2.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 作为最后一步，确保 Jekyll 正确安装，请在终端中运行 jekyll，如图 3.2 所示。
- en: '![CH03_F02_Camden2](Images/CH03_F02_Camden2.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F02_Camden2](Images/CH03_F02_Camden2.png)'
- en: Figure 3.2 Default output from running the jekyll command in your terminal
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.2 在您的终端中运行 jekyll 命令的默认输出
- en: Jekyll supports creating content in HTML and Markdown, but also supports Liquid
    templates. If you read the previous chapter, you have an introduction to Liquid
    already, but at a minimum in this chapter, you’ll learn how to embed Liquid tags
    to add logic and dynamic aspects to your templates. Jekyll, like most static site
    generators, also makes use of front matter as a way to define metadata about a
    particular page.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll 支持在 HTML 和 Markdown 中创建内容，但也支持 Liquid 模板。如果您已经阅读了上一章，您已经对 Liquid 有了一定的了解，但至少在本章中，您将学习如何嵌入
    Liquid 标签以向模板添加逻辑和动态特性。Jekyll，像大多数静态网站生成器一样，也使用元数据作为定义特定页面元数据的方式。
- en: 3.2 Your first Jekyll site
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2 您的第一个 Jekyll 网站
- en: Jekyll’s command line program can help you start development by scaffolding
    an entire, but small, blog for you out of the box. This includes a layout (with
    minimal design), a home page (that lists the blog posts), and one sample post.
    Scaffolding is done by using the command jekyll new sitename, where sitename should
    be the name of your site. The value you use for sitename will also be used to
    name the folder for your site. (Note that Jekyll seems to have an issue with spaces
    in folders, so avoid that when creating your new project.) After you execute the
    command, Jekyll will create the directory, create some files, and then install
    various dependencies and other such items needed for it to operate. Figure 3.3
    demonstrates how this should look.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll 的命令行程序可以通过为您搭建一个完整但小巧的博客来帮助您开始开发。这包括布局（具有最小设计）、主页（列出博客文章）和一个示例文章。通过使用命令
    jekyll new sitename 来搭建，其中 sitename 应该是您网站的名称。您为 sitename 使用的值也将用于命名您的网站文件夹。（请注意，Jekyll
    似乎在文件夹中存在空间问题，因此在创建新项目时请避免使用空格。）执行命令后，Jekyll 将创建目录，创建一些文件，然后安装它运行所需的各种依赖项和其他项目。图
    3.3 展示了这应该看起来是什么样子。
- en: '![CH03_F03_Camden2](Images/CH03_F03_Camden2.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F03_Camden2](Images/CH03_F03_Camden2.png)'
- en: Figure 3.3 The output from scaffolding a new blog with the jekyll new command
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.3 使用 jekyll new 命令搭建新博客的输出
- en: Once the command is done running, change directories to the newly created directory.
    You can test your new Jekyll blog by using the serve command jekyll serve. This
    will start a local application server to process your files and make them available
    on a local web server. Figure 3.4 demonstrates the output you should see in your
    terminal.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 命令运行完成后，切换到新创建的目录。您可以通过使用 serve 命令 jekyll serve 测试您的新 Jekyll 博客。这将启动一个本地应用程序服务器来处理您的文件，并在本地
    web 服务器上提供它们。图 3.4 展示了您在终端中应看到的输出。
- en: '![CH03_F04_Camden2](Images/CH03_F04_Camden2.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F04_Camden2](Images/CH03_F04_Camden2.png)'
- en: Figure 3.4 Example output from running jekyll serve
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.4 运行 jekyll serve 命令的示例输出
- en: Note that the output from the Jekyll CLI provided a server address and port.
    If you run jekyll serve --help you’ll see many different options you can pass
    to the CLI, including ways to modify the port if you wish. Opening that address
    in your browser will show you the blog’s home page, as seen in figure 3.5.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，Jekyll CLI 的输出提供了一个服务器地址和端口号。如果您运行 jekyll serve --help，您将看到可以传递给 CLI 的许多不同选项，包括如果您愿意修改端口的选项。在浏览器中打开该地址将显示博客的主页，如图
    3.5 所示。
- en: '![CH03_F05_Camden2](Images/CH03_F05_Camden2.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F05_Camden2](Images/CH03_F05_Camden2.png)'
- en: Figure 3.5 The default blog home page
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.5 默认博客主页
- en: Note that what you are seeing here is a *default* user interface. You are absolutely
    allowed to change what you see here, and we’ll cover this in detail as we continue.
    To see an example post, click the “Welcome to Jekyll!” link, and you’ll see a
    post, as demonstrated in figure 3.6.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，您在这里看到的是默认用户界面。您绝对可以更改这里看到的内容，我们将在继续的过程中详细说明。要查看示例文章，请点击“欢迎使用 Jekyll！”链接，您将看到一个文章，如图
    3.6 所示。
- en: '![CH03_F06_Camden2](Images/CH03_F06_Camden2.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F06_Camden2](Images/CH03_F06_Camden2.png)'
- en: Figure 3.6 A default welcome blog post for your new Jekyll site
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.6 新建 Jekyll 网站默认欢迎博客文章
- en: Note that you are not required to scaffold a new site using the jekyll new command.
    You can also simply run jekyll serve in a directory with existing HTML files,
    and Jekyll will run its server from there. The nice thing about the new command
    is that by giving you some common defaults out of the box (a home page, a post,
    even an RSS feed), you’ll save yourself some grunt work.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，你不需要使用 jekyll new 命令来创建一个新的网站。你也可以简单地在一个包含现有 HTML 文件的目录中运行 jekyll serve，Jekyll
    将从那里运行其服务器。新命令的好处是，它为你提供了一些常见的默认设置（一个主页、一篇文章，甚至一个 RSS 源），这将为你节省一些繁琐的工作。
- en: 'If you look at your scaffolded folder (the directory created by the CLI you
    just used), you’ll see a set of files and folders that define the default blog.
    While the particulars may change in the future, here’s what you can typically
    expect to see:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看你用 CLI 创建的骨架文件夹（由你刚刚使用的 CLI 创建的目录），你会看到一组文件和文件夹，它们定义了默认的博客。虽然具体细节可能会在未来发生变化，但以下是你通常可以期待看到的内容：
- en: _posts is the directory for your blog posts.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: _posts 是你的博客文章的目录。
- en: _site is where the static version of your Jekyll blog is stored.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: _site 是你的 Jekyll 博客的静态版本存储的地方。
- en: _config.yml is a YAML-based configuration file. We’ll look into this more later.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: _config.yml 是一个基于 YAML 的配置文件。我们稍后会深入了解。
- en: 404.html, about.markdown, and index.markdown are files representing a 404 handler
    (missing file), a simple About page, and the home page for the blog, respectively.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 404.html、about.markdown 和 index.markdown 是表示 404 处理程序（缺失文件）、简单的关于页面和博客主页的文件。
- en: There are more files Jekyll uses that you can ignore for now.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jekyll 还使用了一些你可以现在忽略的文件。
- en: As you continue learning about Jekyll in this chapter, you’ll work with new
    directories that have special meaning for Jekyll.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章继续学习 Jekyll 的过程中，你将使用具有特殊意义的 Jekyll 的新目录。
- en: One thing you *won’t* see are files that handle the layout of the site. Jekyll’s
    default blog uses a “gem-based” theme where the files are stored in your file
    system outside of the blog itself. When we start customizing the blog later in
    the chapter we’ll work with files *in* the directory instead. You don’t have to
    worry about the location of the gem-based theme, as all its code and assets are
    copied into the generated folder when you build a Jekyll site.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 你不会看到处理网站布局的文件。Jekyll 的默认博客使用基于“gem”的主题，其中文件存储在博客本身的文件系统之外。当我们在本章的后面开始自定义博客时，我们将与目录中的文件一起工作。你不必担心基于
    gem 的主题的位置，因为当你构建 Jekyll 网站时，所有代码和资源都会复制到生成的文件夹中。
- en: 3.3 Writing a Jekyll post
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3 编写 Jekyll 文章
- en: Your new blog has one simple post, so let’s add a new one and see how it reacts.
    Inside the _posts folder you will see one file named something like 2020-08-22-welcome-to-jekyll.markdown.
    The reason I say “something like” is that Jekyll will use the current date when
    generating the file, so the date values in the filename should be values for your
    current date and time. The format Jekyll expects for blog posts is YEAR-MONTH-DAY-TITLE.
    Note that both MONTH and DAY should be two-digit numbers, so for numbers less
    than 10, include the 0 in front.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 你的新博客有一篇简单的文章，所以让我们添加一篇新的文章并看看它的反应。在 _posts 文件夹中，你会看到一个名为类似 2020-08-22-welcome-to-jekyll.markdown
    的文件。我之所以说“类似”，是因为 Jekyll 会在生成文件时使用当前日期，所以文件名中的日期值应该是你的当前日期和时间。Jekyll 预期博客文章的格式是
    YEAR-MONTH-DAY-TITLE。请注意，月份和日期都应该是两位数字，所以对于小于 10 的数字，包括前面的 0。
- en: Create a new file with the current year, month, and date, but with a title of
    helloworld, for example, 2020-08-22-helloworld.markdown. Jekyll posts require
    front matter on top, and to start, you can copy the front matter from the first
    file. Here’s a complete file you could use, but remember to update the date for
    your current time.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个包含当前年份、月份和日期的新文件，但标题为 helloworld，例如，2020-08-22-helloworld.markdown。Jekyll
    文章需要在顶部包含前导内容，最初，你可以从第一个文件复制前导内容。这里是一个你可以使用的完整文件，但请记住更新日期为你的当前时间。
- en: Listing 3.1 A new blog post
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.1 一篇新的博客文章
- en: '[PRE1]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Note that the title is completely up to you, and the contents of the post are
    arbitrary. However, pay special attention to the time. In my test, the first post
    Jekyll created had this time stamp: 2020-08-22 08:44:29 -0500. I wanted my post
    to be newer, so I used a time a few hours later. However, Jekyll was smart enough
    to recognize that the date value was in the future and therefore didn’t publish
    the blog post. That’s a great feature, but one you could accidentally run into
    when testing. You can, if you want, also use a date in the past. Jekyll will sort
    your posts based on this value automatically. Finally, why do we have date-based
    filenames if the front matter has a date value as well? First, having the filenames
    be date-based will give you a visual cue when looking at your directory in terms
    of what content was written when. Second, if you leave off the date value in the
    front matter, Jekyll will use the date from the filename for the post. When making
    posts, you can decide if you care about the time value of posts, as Jekyll will
    be fine with either way of specifying the date.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，标题完全由你决定，帖子的内容是任意的。然而，请注意时间。在我的测试中，Jekyll创建的第一个帖子的时间戳是：2020-08-22 08:44:29
    -0500。我想让我的帖子更新一些，所以我使用了几个小时后的时间。但是，Jekyll足够聪明，能够识别出日期值是未来的，因此没有发布博客帖子。这是一个很棒的功能，但你在测试时可能会意外遇到。如果你想，你也可以使用过去的时间。Jekyll会根据这个值自动排序你的帖子。最后，为什么我们有基于日期的文件名，而原稿部分也有日期值呢？首先，让文件名基于日期将给你一个视觉提示，当你查看目录时，可以知道什么内容是在什么时候写的。其次，如果你在原稿部分省略了日期值，Jekyll将使用文件名中的日期为帖子。在制作帖子时，你可以决定你是否关心帖子的时间值，因为Jekyll对这两种指定日期的方式都可以接受。
- en: Note Jekyll has a command-line flag to show future posts when working locally.
    You can enable the feature by running jekyll serve --future.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 注意Jekyll有一个命令行标志，可以在本地工作时显示未来的帖子。你可以通过运行jekyll serve --future来启用此功能。
- en: The value for layout specifies how to render the post. Remember that the default
    theme “hides” the details for us, but later when we start building our own layout
    we will be able to customize this. Finally, categories is—you guessed it—a way
    to categorize posts. Many blogs will have category pages that let you browse posts
    from one category. Jekyll supports this as well, but not out of the box with the
    default theme.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 布局的值指定了如何渲染帖子。记住，默认主题“隐藏”了这些细节，但当我们开始构建自己的布局时，我们将能够自定义这些。最后，分类——正如你所猜到的——是一种对帖子进行分类的方式。许多博客都会有分类页面，让你可以浏览来自一个分类的帖子。Jekyll也支持这一点，但默认主题并不是直接支持。
- en: Once you’ve saved your file, go back to your browser and reload. You should
    see the new post on the home page, as demonstrated in figure 3.7.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 保存你的文件后，回到浏览器并重新加载。你应该能在主页上看到新帖子，如图3.7所示。
- en: '![CH03_F07_Camden2](Images/CH03_F07_Camden2.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F07_Camden2](Images/CH03_F07_Camden2.png)'
- en: Figure 3.7 After adding a new post, it will show up on the home page.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.7 添加新帖子后，它将显示在主页上。
- en: If you click on the post, you’ll see it rendered. Figure 3.8 shows how Jekyll
    rendered the Markdown into HTML and automatically applied the theme’s layout.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你点击帖子，你会看到它被渲染。图3.8展示了Jekyll如何将Markdown渲染成HTML并自动应用主题布局。
- en: '![CH03_F08_Camden2](Images/CH03_F08_Camden2.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F08_Camden2](Images/CH03_F08_Camden2.png)'
- en: Figure 3.8 Your new blog post rendered by Jekyll
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.8 Jekyll渲染的新博客帖子
- en: 'Make note of the URL for your new post. Again, remember that the dates will
    differ; it should look something like this: http://localhost:4000/general/2020/08/
    22/helloworld.html. Notice how Jekyll parsed your initial filename and created
    a path based on it while also including the category of the post as well. Personally,
    I don’t care for this format, but luckily Jekyll lets you customize this format.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 记下你新帖子的URL。再次提醒，记住日期会有所不同；它应该看起来像这样：http://localhost:4000/general/2020/08/22/helloworld.html。注意Jekyll如何解析你的初始文件名，并基于它创建路径，同时还包括帖子的分类。我个人并不喜欢这种格式，但幸运的是，Jekyll允许你自定义这种格式。
- en: 3.3.1 A liquid refresher
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.3.1 液体模板语言复习
- en: Jekyll uses the Liquid template language to allow for dynamic code while generating
    static pages. In the previous chapter, we covered the basics of using Liquid in
    section 2.1.2, but in case you skipped that chapter, let’s cover some quick basics.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll使用Liquid模板语言来允许在生成静态页面时使用动态代码。在前一章中，我们在2.1.2节中介绍了使用Liquid的基础知识，但如果你跳过了那一章，让我们快速回顾一下。
- en: 'First, Liquid code uses two kinds of markup. To output a simple value, you
    would use {{ variable }}, where variable is the value you want to output. To execute
    a line of code, a slightly different form is used: {% %}. This command will assign
    a value to a variable: {% assign foo = "cat" %}. Liquid has support for both conditionals
    and looping. Next, we modify the blog post you just created to include the same
    sample code from the previous chapter.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，Liquid 代码使用两种类型的标记。要输出一个简单的值，你会使用 {{ variable }}，其中 variable 是你想要输出的值。要执行一行代码，使用稍有不同的形式：{%
    %}。这个命令将给一个变量赋值：{% assign foo = "cat" %}。Liquid 支持条件语句和循环。接下来，我们修改你刚刚创建的博客文章，以包含上一章中的相同示例代码。
- en: Listing 3.2 Blog post with Liquid commands
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.2 带有 Liquid 命令的博客文章
- en: '[PRE2]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: If you save this and reload, you’ll see the result in figure 3.9; feel free
    to modify the values and play around to see the changes in action.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你保存并重新加载，你将在图 3.9 中看到结果；请随意修改值并尝试查看实际的变化。
- en: '![CH03_F09_Camden2](Images/CH03_F09_Camden2.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F09_Camden2](Images/CH03_F09_Camden2.png)'
- en: Figure 3.9 A Jekyll blog post with Liquid code adding dynamic aspects to the
    static page
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.9 一个带有 Liquid 代码的 Jekyll 博客文章，为静态页面添加动态特性
- en: Jekyll will parse your Liquid in blog posts and in regular pages on your site.
    This feature also works if you use HTML files instead of Markdown.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll 将解析你的博客文章和网站上常规页面的 Liquid。如果你使用 HTML 文件而不是 Markdown，这个功能同样适用。
- en: 3.4 Working with layouts and includes
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.4 与布局和包含文件一起工作
- en: 'So far, the particulars of how content is displayed have been abstracted. We
    explained that Jekyll is using a default theme and that the theme files themselves
    are stored “elsewhere,” but how do they actually work, and how would you modify
    them? Let’s start by creating a new blog using the CLI again: jekyll new blog1.
    (The listings in this section can all be found in the GitHub repository for this
    book in the chapter3/blog1 folder.) When it’s done scaffolding the new site, start
    the server with jekyll serve. To begin working with layouts, create a new directory
    named _layouts. By default, Jekyll will look in this folder for layout files.
    (You can customize the name of this folder, if you wish.) If you open the index.html
    file scaffolded by the CLI you’ll notice that it specifies a layout named home
    (note that I’ve removed the comments):'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，内容显示的细节已经被抽象化。我们解释了 Jekyll 使用默认主题，并且主题文件本身存储在“其他地方”，但它们实际上是如何工作的，以及你将如何修改它们？让我们再次使用
    CLI 创建一个新的博客：jekyll new blog1。（本节中的所有列表都可以在本书的 GitHub 仓库的 chapter3/blog1 文件夹中找到。）当它完成新站点的脚手架搭建后，使用
    jekyll serve 启动服务器。要开始使用布局，创建一个名为 _layouts 的新目录。默认情况下，Jekyll 将在此文件夹中查找布局文件。（如果你愿意，可以自定义此文件夹的名称。）如果你打开
    CLI 生成的 index.html 文件，你会注意到它指定了一个名为 home 的布局（注意，我已经移除了注释）：
- en: '[PRE3]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Let’s change this value to default. The Jekyll docs suggest using a layout
    named default and then extending it when you have different layouts. You’ll see
    an example of this in a moment. But for now, change the value in the front matter
    to default:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将此值更改为默认。Jekyll 文档建议使用名为 default 的布局，并在你有不同的布局时扩展它。你将在稍后看到这个示例。但就目前而言，将前导内容中的值更改为
    default：
- en: '[PRE4]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now let’s create a layout file. Listing 3.3 demonstrates a very minimal but
    custom layout. Since we specified default as the layout, the filename must match,
    so name this file default.html.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们创建一个布局文件。列表 3.3 展示了一个非常简单但定制的布局。由于我们指定了默认布局，文件名必须匹配，因此将此文件命名为 default.html。
- en: Listing 3.3 The new layout file (_layouts/default.html)
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.3 新的布局文件 (_layouts/default.html)
- en: '[PRE5]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: ❶ The page.title variable will come from pages using the layout.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 页面.title 变量将来自使用该布局的页面。
- en: ❷ The content variable is the page content itself that uses the layout.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: ❷ 内容变量是使用布局的页面内容本身。
- en: This template is about as simple as you can get. There’s no CSS or layout at
    all really, just a few HTML tags. There are two variables being used here. The
    first, page.title, will be replaced with the title of the page using the layout.
    The second, content, will be replaced by the content of the page itself. If you
    reload your blog now you’ll see ... nothing! Why? The logic you saw earlier (creating
    a list of blog posts) was done by the default theme. With that removed, your home
    page is unfortunately empty. Let’s fix that by adding the posts back in.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这个模板可以说是最简单的了。实际上没有任何 CSS 或布局，只是几个 HTML 标签。这里使用了两个变量。第一个，page.title，将被使用该布局的页面的标题所替换。第二个，content，将被页面本身的内容所替换。如果你现在重新加载你的博客，你会看到...什么都没有！为什么？你之前看到的逻辑（创建博客文章列表）是由默认主题完成的。移除它后，你的主页不幸地变成了空白的。让我们通过添加文章来修复这个问题。
- en: Listing 3.4 The new home page (/index.markdown)
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.4 新的首页 (/index.markdown)
- en: '[PRE6]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The first thing we’ve added here is a title in the front matter. The layout
    file will notice this and use it in the page’s header. Next, we use Liquid to
    iterate over a variable, site.posts. Jekyll provides this variable automatically,
    based on the files within your _posts directory. Each post has a url and title
    value that can be used to render links and titles for the posts. Finally, you
    can also display the date from the post. Using an unordered list to display posts
    isn’t terribly pretty, but it gets the job done, as shown in figure 3.10.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里我们首先添加了页眉部分的一个标题。布局文件会注意到这一点，并将其用于页面标题。接下来，我们使用 Liquid 语句遍历一个变量，site.posts。Jekyll
    会自动提供这个变量，基于你 _posts 目录中的文件。每篇帖子都有一个 url 和标题值，可以用来渲染帖子的链接和标题。最后，你还可以显示帖子的日期。使用无序列表来显示帖子并不十分美观，但能完成任务，如图
    3.10 所示。
- en: '![CH03_F10_Camden2](Images/CH03_F10_Camden2.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F10_Camden2](Images/CH03_F10_Camden2.png)'
- en: Figure 3.10 Our new, boring, home page
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.10 我们的新、无聊的首页
- en: 3.4.1 Layout inheritance
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.4.1 布局继承
- en: Jekyll supports the idea of *layout inheritance*, which is just a fancy way
    of saying one layout that wraps another layout. Let’s build a simple example of
    this by customizing how blog posts are displayed. If you open the default blog
    post that the CLI scaffolded, you’ll see it’s already specifying a unique layout,
    post. In your _layouts folder, create a new file named post.html.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: Jekyll 支持布局继承的概念，这只是一个更华丽的说法，即一个布局包裹另一个布局。让我们通过自定义博客文章的显示来构建一个简单的例子。如果你打开 CLI
    生成的默认博客帖子，你会看到它已经指定了一个独特的布局，post。在你的 _layouts 文件夹中，创建一个名为 post.html 的新文件。
- en: Listing 3.5 The post layout (_layouts/post.html)
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.5 帖子布局 (_layouts/post.html)
- en: '[PRE7]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Again, this is a rather boring layout, but make note of how it specifies a layout
    itself. This means that the post layout will display its contents and then pass
    them on to the next layout. In this case, our post layout simply includes an h1
    tag on top with the title of the post. Figure 3.11 demonstrates our new post layout.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，这是一个相当无聊的布局，但请注意它如何指定一个布局本身。这意味着帖子布局将显示其内容，然后将它们传递给下一个布局。在这种情况下，我们的帖子布局只是在顶部包含一个带有帖子标题的
    h1 标签。图 3.11 展示了我们的新帖子布局。
- en: '![CH03_F11_Camden2](Images/CH03_F11_Camden2.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F11_Camden2](Images/CH03_F11_Camden2.png)'
- en: Figure 3.11 A post using the new customized layout
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.11 使用新自定义布局的帖子
- en: 3.4.2 Using includes
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.4.2 使用 includes
- en: 'Now let’s look at includes. Unlike layouts, which wrap content, an include
    is simply content that is inserted into a file. The format for including files
    is this Liquid code: {% include file %}. Jekyll will look for these files in a
    new folder, _includes. Let’s test this by adding a copyright notice to our site.
    First, make the new _includes directory, and then use the following code for the
    contents.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看看 includes。与包裹内容的布局不同，include 只是将内容插入到文件中的简单内容。包含文件的格式是以下 Liquid 代码：{%
    include file %}。Jekyll 将在这些文件的新文件夹 _includes 中查找这些文件。让我们通过向我们的网站添加版权声明来测试这一点。首先，创建新的
    _includes 目录，然后使用以下代码作为内容。
- en: Listing 3.6 The copyright file (_includes/copyright.html)
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.6 版权文件 (_includes/copyright.html)
- en: '[PRE8]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The Liquid code used here displays the current year based on when the site was
    last built. The filter, date, is passed a formatting string, which in this case
    just asks for the year. The value "now" represents the current time. Remember
    that static sites are static, so your statically generated website won’t magically
    show a new value a second after the ball drops for New Year’s Eve in New York
    City, but once you rebuild the site, every template using this include will have
    the right value. To use this value, modify the default layout file.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 这里使用的 Liquid 代码显示的是基于网站上次构建时的当前年份。过滤器 date 接收一个格式化字符串，在这种情况下，只是请求年份。值 "now"
    代表当前时间。记住，静态网站是静态的，所以你的静态生成网站不会在纽约市新年钟声敲响后的第二秒神奇地显示新的值，但一旦你重建网站，每个使用此 include
    的模板都将具有正确的值。要使用此值，修改默认布局文件。
- en: Listing 3.7 Updated default layout file (_layouts/default.html)
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.7 更新的默认布局文件 (_layouts/default.html)
- en: '[PRE9]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: ❶ The include here specifies that the content will come right before the closing
    body tag.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 此 include 指定内容将直接在关闭 body 标签之前。
- en: If you reload your blog now, you’ll see a copyright notice on every page, as
    seen in figure 3.12.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你现在重新加载你的博客，你会在每个页面上看到版权声明，如图 3.12 所示。
- en: '![CH03_F12_Camden2](Images/CH03_F12_Camden2.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F12_Camden2](Images/CH03_F12_Camden2.png)'
- en: Figure 3.12 The all-important copyright notice, now displayed on our site
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.12 非常重要的版权声明，现在显示在我们的网站上
- en: 3.5 Creating additional files
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.5 创建附加文件
- en: When you used the Jekyll CLI to scaffold a blog, it created an additional file
    named about.html. When working on pages that aren’t blog posts, you can simply
    create any HTML or Markdown file in the root directory of your site, and Jekyll
    will include it in the final build. While that’s pretty much all there is to it,
    let’s add a new page to the blog to ensure the process sinks in. Listing 3.8 displays
    the contents of a Contact Us page that is common on websites.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用 Jekyll CLI 搭建一个博客时，它会创建一个名为 about.html 的附加文件。当你在不是博客文章的页面上工作时，你可以在你网站的根目录中简单地创建任何
    HTML 或 Markdown 文件，Jekyll 会将其包含在最终的构建中。虽然这基本上就是全部内容，但让我们向博客添加一个新页面以确保这个过程深入人心。列表
    3.8 显示了一个在网站上常见的联系我们页面的内容。
- en: Listing 3.8 The new contact page (/contact.md)
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.8 新的联系方式页面 (/contact.md)
- en: '[PRE10]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: First, notice that while Jekyll used .markdown you can also use .md as an extension,
    if you prefer. Once saved, Jekyll automatically makes the page available at /contact
    .html. If you open the About page (about.markdown) that Jekyll generated, you’ll
    notice it uses a permalink value in the front matter to specify another path,
    /about/. If you prefer that style of naming your file, you can add it to the front
    matter of the contact page as well.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，请注意，虽然 Jekyll 使用 .markdown 扩展名，但如果你更喜欢，你也可以使用 .md。一旦保存，Jekyll 会自动使页面在 /contact.html
    路径下可用。如果你打开 Jekyll 生成的关于页面（about.markdown），你会注意到它在前置部分使用了一个 permalink 值来指定另一个路径，/about/。如果你喜欢这种文件命名风格，你还可以将其添加到联系页面的前置部分。
- en: Tip If you encounter issues with Jekyll, errors, or warnings about Gemfiles,
    a common solution is to run a bundle update or use bundle exec jekyll serve.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 提示：如果你遇到与 Jekyll 相关的问题、错误或关于 Gemfiles 的警告，一个常见的解决方案是运行 bundle update 或使用 bundle
    exec jekyll serve。
- en: 3.6 Working with data
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.6 与数据一起工作
- en: 'You’ve seen how to work with blog posts and simple pages in Jekyll, but Jekyll
    also allows you to work with data. This data could be anything: perhaps a list
    of authors for a blog and their contact information. Your site pages can read
    this data and then display it in templates.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经看到了如何在 Jekyll 中处理博客文章和简单页面，但 Jekyll 还允许你处理数据。这些数据可以是任何东西：可能是一份博客作者的列表及其联系信息。你的网站页面可以读取这些数据，然后在模板中显示它。
- en: To start, you’ll need to create a _data folder. Inside this folder you can create
    files in either JSON, CSV, TSV, or YAML formats. The name of the file will control
    how it’s available later in templates. Let’s consider a simple example. (The listings
    in this section can all be found in the GitHub repository for this book in the
    chapter3/blog2 folder.)
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，你需要创建一个 _data 文件夹。在这个文件夹中，你可以创建 JSON、CSV、TSV 或 YAML 格式的文件。文件的名称将控制它在模板中如何可用。让我们考虑一个简单的例子。（本节中的所有列表都可以在本书的
    GitHub 仓库的 chapter3/blog2 文件夹中找到。）
- en: Listing 3.9 Our blog authors (/_data/authors.json)
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.9 我们的博客作者 (/_data/authors.json)
- en: '[PRE11]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The data here is arbitrary and can be anything that makes sense for your site.
    To access this data, Jekyll will make it available in templates as site.data.authors.
    You can also use subdirectories in your data folder, and if you do, the name of
    the subdirectory will be added to the variable structure. If our authors.json
    file was in a subdirectory named people, the new variable to access that data
    would be site.data.people.authors. Now let’s edit the blog’s home page to list
    our authors.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的数据是任意的，可以是任何对你网站有意义的任何内容。要访问这些数据，Jekyll 将使其在模板中可用，作为 site.data.authors。你还可以在数据文件夹中使用子目录，如果你这样做，子目录的名称将被添加到变量结构中。如果我们的
    authors.json 文件在一个名为 people 的子目录中，那么访问该数据的新的变量将是 site.data.people.authors。现在让我们编辑博客的主页以列出我们的作者。
- en: Listing 3.10 An updated home page with authors (/index.markdown)
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 列表 3.10 更新后的主页，包含作者 (/index.markdown)
- en: '[PRE12]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: ❶ Looping over the array of authors
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 遍历作者数组
- en: The changes begin after the list of posts. You can see the Liquid tag being
    used to iterate over the site data. For each author, we display their name with
    a link to their website as well as linking to their Twitter profile. Figure 3.13
    shows how this is displayed.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 变化从帖子列表之后开始。你可以看到正在使用 Liquid 标签遍历站点数据。对于每个作者，我们显示他们的名字，并提供链接到他们的网站以及他们的 Twitter
    个人资料。图 3.13 展示了这是如何显示的。
- en: '![CH03_F13_Camden2](Images/CH03_F13_Camden2.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F13_Camden2](Images/CH03_F13_Camden2.png)'
- en: Figure 3.13 The authors displayed are driven by a JSON file.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.13 显示的作者是由一个 JSON 文件驱动的。
- en: 3.7 Configuring your Jekyll blog
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.7 配置你的 Jekyll 博客
- en: As mentioned earlier in the chapter, the Jekyll CLI creates a file that configures
    how Jekyll works. This file is named _config.yml, and as you can tell by the extension,
    it uses YAML for formatting.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 如本章前面所述，Jekyll CLI 创建了一个配置 Jekyll 如何工作的文件。这个文件名为 _config.yml，正如你可以通过扩展名看到的，它使用
    YAML 进行格式化。
- en: NOTE YAML is a “simple” text-based format but can sometimes be a bit confusing.
    To learn more about the syntax, see the official website at [https://yaml.org/](https://yaml.org/).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：YAML 是一种“简单”的基于文本的格式，但有时可能会有些令人困惑。要了解更多关于语法的知识，请参阅官方网站[https://yaml.org/](https://yaml.org/)。
- en: 'There are numerous values you can configure, so for a complete list of settings,
    be sure to see the Jekyll docs at [https://jekyllrb.com/docs/configuration/options/](https://jekyllrb.com/docs/configuration/options/),
    but here are a few values you may want to know right away:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以配置许多值，所以为了获得设置的全列表，请确保查看 Jekyll 文档[https://jekyllrb.com/docs/configuration/options/](https://jekyllrb.com/docs/configuration/options/)，但以下是一些你可能立即想要了解的值：
- en: title—You can specify a site-wide title for a site by specifying a value in
    your config file. This will be available in templates as site.title. Note that
    any and all values specified in the config file are available as site variables.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: title—你可以通过在配置文件中指定一个值来为网站指定一个全局标题。这将在模板中作为 site.title 可用。请注意，配置文件中指定的任何值都可作为
    site 变量使用。
- en: exclude and include—Specifies files and folders to either ignore or to be forcibly
    included. Dotfiles are not included by default, so this lets you include them
    when specified. The exclude feature is good when working with very large sites,
    as it lets you ignore sets of files in development but not production.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: exclude 和 include—指定要忽略或强制包含的文件和文件夹。默认情况下，点文件（Dotfiles）不会被包含，因此当指定时，这允许你将它们包含在内。当与非常大的站点一起工作时，排除功能非常好，因为它允许你在开发中忽略某些文件集，但在生产中不忽略。
- en: 'Permalink—Earlier in the chapter, we demonstrated how Jekyll blog posts will
    include the category in the URL. This is because of the default value for permalinks:
    /:categories/:year/:month/:day/:title:output_ext. To “fix” this, you can specify
    a permalink value that removes the :categories: portion. There are multiple tokens
    you can use in your permalink string, and you can find them documented at [https://jekyllrb.com/docs/permalinks/#placeholders](https://jekyllrb.com/docs/permalinks/#placeholders).'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '永久链接—在本章前面，我们演示了 Jekyll 博客文章如何在 URL 中包含分类。这是因为永久链接的默认值：/:categories/:year/:month/:day/:title:output_ext。为了“修复”这个问题，你可以指定一个永久链接值，移除
    :categories: 部分。你可以在你的永久链接字符串中使用多个标记，并且你可以在[https://jekyllrb.com/docs/permalinks/#placeholders](https://jekyllrb.com/docs/permalinks/#placeholders)找到它们的文档。'
- en: 3.8 Generating your site
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.8 生成你的网站
- en: While working with the Jekyll server running, you may have noticed it outputting
    the results to a directory named _site. This is the default output directory for
    your Jekyll builds. You can generate a build at the command line manually by running
    jekyll build. You’ll get a report of the operation, as seen in figure 3.14.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在运行 Jekyll 服务器时，你可能已经注意到它将结果输出到名为 _site 的目录。这是你的 Jekyll 构建默认输出目录。你可以通过在命令行中运行
    jekyll build 来手动生成构建。你将获得操作报告，如图 3.14 所示。
- en: '![CH03_F14_Camden2](Images/CH03_F14_Camden2.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F14_Camden2](Images/CH03_F14_Camden2.png)'
- en: Figure 3.14 The output from requesting that Jekyll build your site
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.14 请求 Jekyll 构建你的网站的输出
- en: You can configure the output directory by using the --destination flag, for
    example, jekyll build --destination output. Figure 3.15 demonstrates what this
    looks like for the blog from the previous section.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过使用 --destination 标志来配置输出目录，例如，jekyll build --destination output。图 3.15
    展示了上一节博客的这种外观。
- en: '![CH03_F15_Camden2](Images/CH03_F15_Camden2.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F15_Camden2](Images/CH03_F15_Camden2.png)'
- en: Figure 3.15 HTML output generated by the Jekyll build command
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.15 由 Jekyll 构建命令生成的 HTML 输出
- en: 3.9 Building a Jekyll blog
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.9 构建 Jekyll 博客
- en: Since Jekyll can scaffold a blog out of the box, technically there isn’t much
    we need to discuss here, but it would be nice to demonstrate the process someone
    goes through in modifying the blog with a different look and feel. You saw earlier
    how to build a custom layout, but there are many themes out there that give you
    a complete look and feel with little to no work on your part.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Jekyll 可以直接搭建一个博客，技术上我们在这里没有太多需要讨论的，但演示某人如何通过修改外观和感觉来修改博客的过程会很好。你之前已经看到了如何构建自定义布局，但有许多主题可以给你一个完整的视觉和感觉，而你几乎不需要做任何工作。
- en: A great example of this is the “Clean Blog Jekyll” theme from Start Bootstrap
    ([https://startbootstrap.com/themes/clean-blog-jekyll/](https://startbootstrap.com/themes/clean-blog-jekyll/)).
    This is a free blogging theme that you can use to start your own projects, and,
    of course, you can use the theme as a starting point, modifying small things here
    and there to get it just right.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 这的一个很好的例子是Start Bootstrap的“Clean Blog Jekyll”主题（[https://startbootstrap.com/themes/clean-blog-jekyll/](https://startbootstrap.com/themes/clean-blog-jekyll/)）。这是一个免费的博客主题，你可以用它来开始你的项目，当然，你也可以将主题作为起点，在这里那里做一些小的修改，使其恰到好处。
- en: You can find install directions at the theme’s GitHub repository, both for adding
    the theme to a blog scaffolded by the CLI as well as for using a copy of the repository
    itself. That option is somewhat easier, so download a zip of the repository and
    extract it.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在主题的GitHub仓库中找到安装说明，包括将主题添加到由CLI构建的博客以及使用仓库副本。这个选项相对容易一些，所以下载一个仓库的zip文件并解压它。
- en: Once extracted, change to the directory in your terminal and run Jekyll with
    bundle exec jekyll serve. This will fire up the blog locally, as seen in figure
    3.16.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 解压后，切换到你的终端中的目录并使用bundle exec jekyll serve运行Jekyll。这将启动本地博客，如图3.16所示。
- en: '![CH03_F16_Camden2](Images/CH03_F16_Camden2.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F16_Camden2](Images/CH03_F16_Camden2.png)'
- en: Figure 3.16 Output from running the downloaded Jekyll theme
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.16 运行下载的Jekyll主题的输出
- en: Pay special attention to the server address. Unlike earlier examples that started
    in the root of a web server, this one starts in a subdirectory. We’ll fix that
    in a moment, but to be sure everything is okay, open the URL in your browser,
    and you should see the theme in use with some default blog posts (figure 3.17).
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 特别注意服务器地址。与之前从网络服务器根目录开始的示例不同，这个是从子目录开始的。我们稍后会解决这个问题，但为了确保一切正常，请在浏览器中打开URL，你应该会看到使用默认博客文章的主题（图3.17）。
- en: '![CH03_F17_Camden2](Images/CH03_F17_Camden2.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F17_Camden2](Images/CH03_F17_Camden2.png)'
- en: Figure 3.17 The Clean Blog running locally
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.17 本地运行的Clean Blog
- en: Now it’s time to start customizing this blog and making it your own. Use ctrl+c
    to shut down the current running server and open _config.yml. The following code
    shows the top half of the config file after changing it to make it personal for
    the author.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候开始定制这个博客并使其成为你自己的了。使用ctrl+c关闭当前运行的服务器并打开_config.yml文件。以下代码显示了更改后以作者个人化为目的的配置文件上半部分。
- en: Listing 3.11 New configuration values (/_config.yml)
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 列表3.11 新的配置值（/_config.yml）
- en: '[PRE13]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The first four values were changed to match my information, but you should absolutely
    type something else here instead. I commented out both baseurl and url since they
    aren’t needed for our test, and we can accept defaults Jekyll will use. Under
    Social Profiles, I specified a few of the values I felt like sharing. The blog
    theme is going to look for these values and render itself differently based on
    them. Save your changes and run the server again. Now when you view it (make note
    of the new URL), you’ll see custom values, as seen in figure 3.18.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 前四个值已被更改为与我的信息匹配，但你应该绝对在这里输入其他内容。由于baseurl和url在我们的测试中不需要，所以我将它们都注释掉了，我们可以接受Jekyll将使用的默认值。在社交资料中，我指定了一些我想分享的值。博客主题将根据这些值进行不同的渲染。保存你的更改并再次运行服务器。现在当你查看它时（注意新的URL），你会看到自定义的值，如图3.18所示。
- en: '![CH03_F18_Camden2](Images/CH03_F18_Camden2.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F18_Camden2](Images/CH03_F18_Camden2.png)'
- en: Figure 3.18 The blog now has a custom title and other values. Yours will look
    different.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.18 博客现在有自定义的标题和其他值。你的将看起来不同。
- en: That was easy, right? What you’re seeing here is the theme exposing values in
    the configuration that are then picked up and used in the display. Let’s make
    another change. While that header picture is pretty, we can pick another. There
    is a wonderful website, [Unsplash.com](https://unsplash.com/), that provides beautiful
    stock photography free of charge. In figure 3.19, you can see a picture I selected
    ([https://unsplash.com/photos/V705bwrTnQI](https://unsplash.com/photos/V705bwrTnQI))
    by Annie Spratt ([https://unsplash.com/@anniespratt](https://unsplash.com/@anniespratt)).
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这很简单，对吧？你在这里看到的是主题在配置中暴露的值，然后被选中并用于显示。让我们再进行一个更改。虽然那个头部图片很漂亮，但我们可以选择另一个。有一个很棒的网站，[Unsplash.com](https://unsplash.com/)，它提供免费的美丽股票摄影。如图3.19所示，你可以看到我选择的图片（[https://unsplash.com/photos/V705bwrTnQI](https://unsplash.com/photos/V705bwrTnQI)）由Annie
    Spratt ([https://unsplash.com/@anniespratt](https://unsplash.com/@anniespratt)）提供。
- en: '![CH03_F19_Camden2](Images/CH03_F19_Camden2.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F19_Camden2](Images/CH03_F19_Camden2.png)'
- en: Figure 3.19 Free stock photography from the [Unsplash.com](https://unsplash.com/)
    site
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.19 来自[Unsplash.com](https://unsplash.com/)网站的免费股票摄影
- en: After downloading the image, rename it to xmastree.jpg and save it in the blog’s
    img folder. The default images from Unsplash can be rather large, so the copy
    you’ll find in the book’s repository has been resized. The blog’s home page can
    be found in the index.html file. Open it and you’ll see it’s rather short.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 下载图片后，将其重命名为xmastree.jpg，并保存在博客的img文件夹中。Unsplash的默认图片可能相当大，所以书中仓库中的副本已经被调整大小。博客的主页可以在index.html文件中找到。打开它，你会看到它相当简短。
- en: Listing 3.12 The blog home page (/index.html)
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 列表3.12 博客主页 (/index.html)
- en: '[PRE14]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: In this case, the blog’s theme handles the logic of getting blog posts and rendering
    them, so to update the large image on top, you can simply edit the background
    value.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，博客的主题处理获取博客文章和渲染它们的逻辑，所以为了更新顶部的较大图片，你只需简单地编辑背景值。
- en: Listing 3.13 Update blog home page (/index.html)
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 列表3.13 更新博客主页 (/index.html)
- en: '[PRE15]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Save this change and reload the blog (figure 3.20).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 保存此更改并重新加载博客（图3.20）。
- en: '![CH03_F20_Camden2](Images/CH03_F20_Camden2.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F20_Camden2](Images/CH03_F20_Camden2.png)'
- en: Figure 3.20 Our new blog header (and again, you can pick anything!)
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.20 我们的新博客标题（而且，你可以选择任何东西！）
- en: The last thing we’ll do is a bit of cleanup. The blog comes with six blog posts.
    Normally when working with a new blog theme, I’ll delete all but one I keep as
    a template for further blog posts. Delete all but one, for example, 2020-01-26-dinosaurs.html.
    Open it, remove the sample content, and change the title and date values.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最后要做的就是做一些清理工作。博客自带六篇博客文章。通常在处理一个新的博客主题时，我会删除除了保留作为后续博客文章模板的那一篇之外的所有文章。例如，删除2020-01-26-dinosaurs.html。打开它，移除示例内容，并更改标题和日期值。
- en: Listing 3.14 The updated blog post
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 列表3.14 更新的博客文章
- en: '[PRE16]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: As stated many times before, feel free to use your own title, subtitle, and
    content. The date should also be something more appropriate for when you are reading
    this book. You can also change the image, if you wish, to something you like.
    Lastly, while not required, you should rename the file. Remember that the date
    in the front matter will take priority over the date in the filename. But for
    housekeeping in general, the filename should better represent the content, for
    example, 2020-08-24-welcome.html. After saving your changes, you can reload the
    blog and click on your remaining blog title to see it in all its glory (figure
    3.21).
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述多次，请随意使用你自己的标题、副标题和内容。日期也应该更适合你阅读这本书的时候。你也可以更改图片，如果你愿意，换成你喜欢的。最后，虽然不是必需的，你应该重命名文件。记住，在front
    matter中的日期将优先于文件名中的日期。但为了维护，文件名应该更好地代表内容，例如，2020-08-24-welcome.html。保存你的更改后，你可以重新加载博客并点击你剩余的博客标题，以欣赏它的全部风采（图3.21）。
- en: '![CH03_F21_Camden2](Images/CH03_F21_Camden2.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![CH03_F21_Camden2](Images/CH03_F21_Camden2.png)'
- en: Figure 3.21 The newly edited blog entry
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.21 新编辑的博客条目
- en: To go forward with this blog, you would simply continue adding new blog posts,
    and the theme will take care of adding them for you automatically.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 要继续这个博客，你只需继续添加新的博客文章，主题会自动为你添加它们。
- en: 3.10 Going further with Jekyll
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.10 进一步使用Jekyll
- en: 'While we demonstrated some of the cool features of Jekyll, there’s a lot we
    didn’t have space to cover. Some of these topics include the following:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们展示了Jekyll的一些酷炫功能，但还有很多我们没有空间涵盖。以下是一些这些主题：
- en: While Jekyll is focused on building blogs, it has a feature called Collections
    ([https://jekyllrb.com/docs/collections/](https://jekyllrb.com/docs/collections/))
    that allows you to define your own lists/sets of data in whatever form you desire.
    This can be useful for documentation sites or other related content.
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虽然Jekyll专注于构建博客，但它有一个名为Collections ([https://jekyllrb.com/docs/collections/](https://jekyllrb.com/docs/collections/))的功能，允许你以你想要的任何形式定义自己的数据列表/集合。这对于文档网站或其他相关内容可能很有用。
- en: Jekyll also has built-in support for pagination ([https://jekyllrb.com/docs/pagination/](https://jekyllrb.com/docs/pagination/)),
    providing a quick way to set up how many items would be on a page as well as creating
    variables your code can use for creating links to previous and forthcoming pages
    of content.
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jekyll还内置了对分页的支持([https://jekyllrb.com/docs/pagination/](https://jekyllrb.com/docs/pagination/))，提供了一种快速设置每页有多少项以及创建代码可以用来创建链接到内容的前一页和下一页的变量的方法。
- en: For cases where Jekyll doesn’t do enough, it has a plug-in system ([https://jekyllrb.com/docs/plugins/](https://jekyllrb.com/docs/plugins/))
    that lets you extend its functionality. This will require you to write Ruby, though.
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 Jekyll 无法满足的情况，它有一个插件系统 ([https://jekyllrb.com/docs/plugins/](https://jekyllrb.com/docs/plugins/))，允许您扩展其功能。但这将需要您编写
    Ruby。
- en: Finally, don’t forget that GitHub has native support for running Jekyll-based
    sites for repositories with content (like documentation).
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，别忘了 GitHub 对基于 Jekyll 的网站有原生支持，适用于包含内容（如文档）的仓库。
- en: For more information, including links to support, see the Jekyll Community page
    at [https://jekyllrb.com/docs/community/](https://jekyllrb.com/docs/community/).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 如需更多信息，包括支持链接，请参阅 Jekyll 社区页面 [https://jekyllrb.com/docs/community/](https://jekyllrb.com/docs/community/).
- en: In the next chapter, you’ll see how to build a site focused on providing documentation.
    You’ll look at the Hugo static site generator, easily one of the fastest ones
    available (which makes it great for large sites).
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，您将了解如何构建一个专注于提供文档的网站。您将查看 Hugo 静态网站生成器，它可能是目前最快的生成器之一（这使得它非常适合大型网站）。
- en: Summary
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Jekyll is static site generator with a special focus on building blogs.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jekyll 是一个专注于构建博客的静态网站生成器。
- en: Jekyll uses Liquid as a template language and lets you write other pages in
    Markdown or HTML.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jekyll 使用 Liquid 作为模板语言，并允许您使用 Markdown 或 HTML 编写其他页面。
- en: Jekyll uses Ruby for installation, so be prepared for (possibly) a harder time
    under Windows.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jekyll 使用 Ruby 进行安装，因此在 Windows 下可能（可能）会遇到更困难的情况。
- en: Jekyll supports global data files written in JSON, CSV, TSV, and YAML.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jekyll 支持使用 JSON、CSV、TSV 和 YAML 编写的全局数据文件。
