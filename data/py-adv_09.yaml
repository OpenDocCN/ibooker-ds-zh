- en: '9 Complete the menu: A real program'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9 完成菜单：一个真正的程序
- en: In this chapter
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中
- en: Erik and Simon create load and save functions in the main program
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 埃里克和西蒙在主程序中创建了加载和保存函数
- en: Simon adds exit functions to the main menu and `get_order()` function
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西蒙为主菜单和`get_order()`函数添加退出函数
- en: Simon explains why he thinks Erik just created a real program
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西蒙解释为什么他认为埃里克刚刚创建了一个真正的程序
- en: The brothers discuss future plans
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 兄弟俩讨论未来的计划
- en: “Now let’s get real,” Simon said. “Yesterday, we played with sample orders and
    simple programs. Today, it’s time to use what you learned in your real program.”
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: “现在让我们来点实际的，”西蒙说。“昨天，我们玩了一些样本订单和简单的程序。今天，是时候在你的实际程序中使用你学到的知识了。”
- en: “Yes, let’s do it!” Erik said.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，让我们这么做！”埃里克说。
- en: “Open your `main_menu.py` file, where you wrote the main menu. We should add
    a couple of functions there to work with the JSON file. Let’s recall what we have
    to do first.” Simon pulled out his diagram from yesterday.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: “打开你写的`main_menu.py`文件，那里是主菜单。我们应该在那里添加一些函数来处理JSON文件。让我们先回顾一下我们首先需要做什么。”西蒙拿出了昨天的图表。
- en: '![](../Images/09-01-load-orders.png)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/09-01-load-orders.png)'
- en: “We have to write a function that will load the list of orders from a JSON file.
    But first, it has to check if the file exists. If the file doesn’t exist, we’ll
    create an empty list and return it from this function. If the file exists, we’ll
    read from it, convert the JSON file to a Python list, and return that list.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: “我们必须编写一个函数，该函数将从JSON文件中加载订单列表。但首先，它必须检查该文件是否存在。如果文件不存在，我们将创建一个空列表并从该函数返回它。如果文件存在，我们将从中读取，将JSON文件转换为Python列表，并返回该列表。
- en: '“Let me help you.” Simon felt that it might be a bit confusing for Erik. “Usually,
    in functions that work with files, we pass the filename as an argument.” Simon
    started the function at the bottom of the file, right before the last line with
    `main_menu()`:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: “让我帮你。”西蒙觉得这可能对埃里克来说有点困惑。“通常，在处理文件的函数中，我们传递文件名作为参数。”西蒙在文件的底部开始编写函数，就在带有`main_menu()`的最后一行之前：
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: “Now we have to check if the file exists. There is a special function for that,
    and we can find it in the `os` module.”
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: “现在我们必须检查文件是否存在。有一个特殊的功能来做这件事，我们可以在`os`模块中找到它。”
- en: “What is ‘os’?” Erik asked.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: “‘os’是什么？”埃里克问。
- en: “OS stands for ‘operating system.’ The operating system in the computer manages
    all the files and programs. It works with your screen, your keyboard, your speakers,
    and your video camera. On a typical computer, the OS can be Windows, macOS, or
    Linux.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: “OS代表‘操作系统’。计算机中的操作系统管理所有文件和程序。它与你的屏幕、键盘、扬声器和你的摄像头一起工作。在典型的计算机上，操作系统可以是Windows、macOS或Linux。
- en: '“We’re going to ask the operating system if a file with such a name exists
    on this computer.” Simon added a line:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: “我们将向操作系统询问是否在这个计算机上存在一个具有该名称的文件。”西蒙添加了一行：
- en: '[PRE1]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: “Look, we used the `os` module here. That means we have to import it the same
    way you imported the `json` module in your sample program yesterday. In this program,
    we haven’t imported the `json` or `os` modules yet, so let’s import them both.”
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: “看，我们在这里使用了`os`模块。这意味着我们必须以与你在昨天的样本程序中导入`json`模块相同的方式导入它。在这个程序中，我们还没有导入`json`或`os`模块，所以让我们都导入它们。”
- en: 'Simon moved the cursor to the very beginning of the file and added two lines:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙将光标移到文件的起始位置，并添加了两行：
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'He returned the cursor to the `load_orders()` function at the end of the file
    and continued his explanation. “If the file exists, we open it for reading. Then
    we use the `json.load()` function to read from the file to the list `orders` and
    return the list.” He added three lines to the function:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 他将光标返回到文件末尾的`load_orders()`函数，并继续解释。“如果文件存在，我们将其打开以供读取。然后我们使用`json.load()`函数从文件读取到`orders`列表，并返回该列表。”他向该函数添加了三行：
- en: '[PRE3]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: “If it doesn’t exist, we just create an empty list and return it:”
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “如果它不存在，我们只需创建一个空列表并返回它：”
- en: '[PRE4]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: “Now the load function is ready!” he said and looked at Erik.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: “现在加载函数已经准备好了！”他说，并看着埃里克。
- en: “I don’t think I could write it myself,” Erik said.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: “我认为我自己写不出来，”埃里克说。
- en: “Of course, it looks complicated when you do it the first time. But look, you
    can read it as if it was plain English, can’t you?”
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，第一次做的时候看起来很复杂。但是看，你可以把它当作普通英语来读，不是吗？”
- en: Erik looked at the function again and tried to read it. “If the file with `filename`
    exists, then open the file. Save it in the object called `f`. Then load the previous
    orders from that `f` file into `orders`. Hmmm, yes, I can read it.” He was surprised.
    He could read Python now and understand it!
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克再次查看函数，并试图阅读它。“如果包含`filename`的文件存在，那么就打开文件。将其保存在名为`f`的对象中。然后从那个`f`文件中加载之前的订单到`orders`中。嗯，是的，我可以读取它了。”他感到惊讶。他现在可以阅读Python并理解它了！
- en: “The next function is easier,” Simon continued. “I think you can write it yourself
    if you look at the file where you practiced with sample orders. Look, right after
    the two `append()` operations, there are three lines that we need here. We already
    have a function called `save_order()` that does nothing except print ‘Saving order
    . . .’. Let’s replace it with a real function. I think it should be called `save_orders()`—plural,
    because now we know how to save a list of orders in a JSON file, right?”
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: “下一个函数比较简单，”西蒙继续说。“如果你看看你练习样本订单的文件，我想你可以自己写出来。看，在两个`append()`操作之后，有三行是我们需要的。我们已经有了一个名为`save_order()`的函数，它除了打印“保存订单……”之外什么都不做。让我们用真正的函数替换它。我认为它应该被称为`save_orders()`——复数形式，因为我们现在知道如何将订单列表保存到JSON文件中，对吧？”
- en: 'Simon wrote the beginning of the function:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙写出了函数的开始部分：
- en: '[PRE5]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: He explained, “We pass the list of orders as a first argument. Then we pass
    the name of the file where we want to store it. Now you can add those three lines
    from yesterday’s program.”
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 他解释说：“我们将订单列表作为第一个参数传递。然后我们传递我们想要存储它的文件名。现在你可以添加昨天程序中的这三行。”
- en: 'Erik looked at the `dict_json.py` file and copied three lines from it. Now
    the function looked like this:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克查看了`dict_json.py`文件，并从中复制了三行。现在函数看起来是这样的：
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: “Can we test it now?” he asked Simon.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: “我们现在可以测试它了吗？”他问西蒙。
- en: “We’re almost ready,” Simon answered. “Look at the bottom of our file—we just
    call the `main_menu()` function. Here’s what we have to do in this function,”
    and he quickly drew a picture.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: “我们几乎准备好了，”西蒙回答。“看看我们的文件底部——我们只是调用`main_menu()`函数。这就是在这个函数中我们要做的事情，”他迅速画了一张图。
- en: '![](../Images/09-02-get-orders.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/09-02-get-orders.png)'
- en: “This is what we do in the `main_menu()` function. We just have to edit it a
    little bit to serve several customers and save their orders in the `orders` list.
    We have to pass that list into the `main_menu()` function, where there is a place
    to save the orders as they are entered.”
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: “这就是我们在`main_menu()`函数中要做的。我们只需要稍作编辑，以便为多个客户服务并将他们的订单保存到`orders`列表中。我们必须将这个列表传递到`main_menu()`函数中，那里有一个地方可以保存输入的订单。”
- en: 'He moved the cursor to the beginning of the file and added the `orders` argument
    to the `main_menu()` definition:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 他将光标移到文件的开头，并将`orders`参数添加到`main_menu()`定义中：
- en: '[PRE7]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: “Now,” he continued, “each time the customer enters a new order, it will be
    appended to the `orders` list. Before we added the list as an argument, `main_menu()`
    didn’t know where to add the new order. Now we can use the `append()` method and
    add it to `orders` right after the customer confirms the order.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: “现在，”他继续说，“每次客户下新的订单时，它将被添加到`orders`列表中。在我们将列表作为参数添加之前，`main_menu()`不知道在哪里添加新的订单。现在我们可以使用`append()`方法，在客户确认订单后立即将其添加到`orders`中。
- en: '“We won’t use the `save_order()` function here. We’ll save all the orders when
    you close the program.” Simon changed the `main_menu()` function to this:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: “我们不会在这里使用`save_order()`函数。当您关闭程序时，我们将保存所有订单。”西蒙将`main_menu()`函数更改为如下：
- en: '[PRE8]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: ❶ Appends the new order to the list
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 将新订单添加到列表中
- en: '“We’ll also change the main program to perform three steps: load the previous
    orders, get the new orders (main menu), and save all the orders.” Simon added
    those three lines to the bottom of the file, so it looked like this:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: “我们还将更改主程序以执行三个步骤：加载之前的订单，获取新订单（主菜单），并保存所有订单。”西蒙在文件底部添加了这三行，看起来是这样的：
- en: '[PRE9]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: “Can I try it now?” Erik asked.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: “我现在可以试一下吗？”艾瑞克问。
- en: “Sure, go ahead!” Simon said.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，开始吧！”西蒙说。
- en: Erik ran the program. He entered his name at the first prompt and then selected
    his drink components. When the program asked him to confirm the order, he typed
    `Y`. The program returned to the “What’s your name:” prompt.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 艾瑞克运行了程序。他在第一个提示符下输入了他的名字，然后选择了他的饮料成分。当程序要求他确认订单时，他输入了`Y`。程序返回到“你的名字是什么：”提示符。
- en: “Okay,” Erik said, “it works. But how can I check my orders? Are they saved
    in the file?”
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: “好的，”艾瑞克说，“它工作了。但我怎么检查我的订单？它们是否保存在文件中？”
- en: “Let’s check,” Simon said.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们检查一下，”西蒙说。
- en: The brothers opened the `orders.json` file and were surprised to see that it
    still contained the old orders from yesterday’s experiments—even Simon was confused.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 兄弟俩打开`orders.json`文件，惊讶地发现它仍然包含昨天实验中的旧订单——甚至西蒙也感到困惑。
- en: “Let’s see,” he said. “We open the file, we read from it, we get the order .
    . . but we never write to the file because we’re still in the main menu taking
    orders! We never reach that `save_orders()` function! Hmmm, let me think how to
    fix it.”
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: “让我们看看，”他说。“我们打开文件，我们从它那里读取，我们获取订单……但我们从未写入文件，因为我们还在主菜单接收订单！我们从未达到那个`save_orders()`函数！嗯，让我想想怎么修复它。”
- en: Erik smiled. His know-it-all brother didn’t know what to do. But that lasted
    only a moment.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克微笑了。他那个无所不知的哥哥不知道该怎么办。但这种情况只持续了一瞬间。
- en: Simon said, “I see. We didn’t give the user a way to exit the main menu. We
    keep asking the user their name, but what if we want to end the program?”
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙说，“我明白了。我们没有给用户提供退出主菜单的方式。我们不断询问用户的姓名，但如果我们想结束程序怎么办？”
- en: “I saw that you pressed Control-C when you wanted to stop my program,” Erik
    said.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: “我看到你按下Control-C想要停止我的程序，”埃里克说。
- en: “Yes, I did, but that’s not a *normal* way of ending programs. When I did that,
    the program was *interrupted*. Usually, Python gives you an error message when
    you do that. When a program is interrupted, it doesn’t do anything else—it just
    stops wherever it is. It won’t write our orders to the file, and it won’t close
    the file. Pressing Control-C is a bad way to end a program.”
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，我确实这样做了，但这不是结束程序的*正常*方式。当我这样做时，程序被*中断*了。通常，当你这样做时，Python会给你一个错误信息。当程序被中断时，它不会做任何其他事情——它只是停止在它所在的地方。它不会将我们的命令写入文件，也不会关闭文件。按Control-C是一个结束程序的不良方式。”
- en: Simon paused for bit and then continued, “We should give the user a *normal*
    way of ending our program.”
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙停顿了一下，然后继续说，“我们应该给用户提供一个*正常*的结束程序的方式。”
- en: “Like Quit in the menu in Word?”
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: “就像Word菜单中的退出一样？”
- en: '“Yes, like that. Let’s tell the user that if they want to exit, they should
    enter `X` and only `X` when asked for their name. The probability that we’ll have
    a customer whose real full name is ‘X’ is very low–almost zero, actually. So let’s
    do this: if the customer enters the name `X` in the `get_order()` function, we
    won’t ask any other questions and will return an empty order, like this: `order`
    `=` `{}`. This order then goes to the `main_menu()` function, and it decides what
    happens next: If the order is empty, it will save the order into the file and
    exit. If it’s not empty, it will add the order to the list and continue working.
    Let’s draw a diagram.”'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，就像这样。让我们告诉用户，如果他们想要退出，他们应该在询问他们名字时输入`X`，并且只输入`X`。我们有一个客户真实全名是‘X’的概率非常低——实际上几乎为零。所以让我们这样做：如果客户在`get_order()`函数中输入名字`X`，我们不会询问任何其他问题，并将返回一个空订单，就像这样：`order`
    `=` `{}`。这个订单然后传递到`main_menu()`函数，它决定接下来发生什么：如果订单为空，它将订单保存到文件中并退出。如果它不为空，它将订单添加到列表中并继续工作。让我们画一个图。”
- en: '![](../Images/09-03-get-order-exit.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/09-03-get-order-exit.png)'
- en: '“This will be our updated `get_order()` function. Let me help you write it,”
    Simon said. He took Erik’s keyboard and started editing the `get_order()` function:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: “这将是我们更新的`get_order()`函数。让我帮你写它，”西蒙说。他拿起埃里克的键盘，开始编辑`get_order()`函数：
- en: '[PRE10]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: ❶ Checks both 'X' and 'x'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 同时检查 'X' 和 'x'
- en: “In this function, I just followed the diagram we created together.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: “在这个函数中，我只是遵循了我们共同创建的图。”
- en: “Now for the main menu,” Simon continued. “Here is another diagram.” He started
    drawing.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: “现在轮到主菜单了，”西蒙继续说。“这里还有一个图。”他开始画图。
- en: '![](../Images/09-04-main-menu-exit.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/09-04-main-menu-exit.png)'
- en: '“As we discussed, if `get_order()` returns an empty order, we exit from the
    main menu. After that, our program saves the orders in the file.” Simon edited
    the `main_menu()` function to the following:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: “正如我们讨论的那样，如果`get_order()`返回一个空订单，我们就从主菜单退出。之后，我们的程序将订单保存到文件中。”西蒙将`main_menu()`函数编辑成以下内容：
- en: '[PRE11]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: ❶ If the order is empty, we have to exit.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ❶ 如果订单为空，我们必须退出。
- en: '*Your Turn!* Edit the main menu function'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '*你的回合！* 编辑主菜单函数'
- en: 'Edit your main menu function like Simon did. If you need help, the full program
    code for this chapter is here: [https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09).'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 按照西蒙的方式编辑你的主菜单函数。如果你需要帮助，本章的完整程序代码在这里：[https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09)。
- en: “And that’s it,” Simon said. “Let’s test it. Just enter a different name this
    time, so you can easily see that it was added to the JSON file.”
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: “就这样了，”西蒙说。“让我们测试一下。这次输入一个不同的名字，这样你就可以很容易地看到它被添加到了JSON文件中。”
- en: Erik started the program. He answered “Jason” when the program asked for his
    name. He entered the rest of his order and typed `Y` to confirm the order. The
    program asked for his name again.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克启动了程序。当程序询问他的名字时，他回答了“Jason”。他输入了其余的订单，并键入`Y`以确认订单。程序再次询问他的名字。
- en: “Now let’s enter `x` and see if it exits properly,” Simon suggested.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: “现在让我们输入`x`看看它是否正确退出，”西蒙建议。
- en: Erik typed `x` and pressed Enter.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克键入`x`并按下了Enter键。
- en: '`You entered ''x'', exiting .` `.` `.` the program said. It then returned to
    the familiar `>>>` Python prompt.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 程序说：“你输入了'x'，正在退出。”。“。”。“。”然后它返回到熟悉的`>>>` Python提示符。
- en: “Now check the `orders.json` file,” Simon said.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: “现在检查一下`orders.json`文件，”西蒙说。
- en: Erik started his text editor and opened the JSON file. Right at the bottom of
    the file, he found his recent order from ‘Jason.’
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 埃里克启动了他的文本编辑器并打开了JSON文件。就在文件的底部，他找到了他最近的来自“Jason”的订单。
- en: “It worked!” he said. “It saved all the orders in the file, and now I can see
    them all!”
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: “它工作了！”他说。“它将所有订单都保存在文件中，现在我可以看到它们了！”
- en: “Yes, you can,” Simon said and smiled. He was happy to see a complete working
    program that took orders and stored them in the file. And it was written by his
    little brother!
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，你可以，”西蒙说，他笑了。他很高兴看到这个完整的、可以接收订单并将其存储在文件中的程序。而且这是他弟弟写的！
- en: “Congratulations, Erik!” Simon said. “I think now you can say that you created
    a real application. Look, it has input and output. It has data structures and
    algorithms. It checks for errors. It has data storage. And most importantly, it
    works and it’s very useful—it collects orders. I’m absolutely serious—it’s a good
    program. I’m very proud of you.”
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: “恭喜，埃里克！”西蒙说。“我想你现在可以说你已经创建了一个真正的应用程序。看，它有输入和输出。它有数据结构和算法。它检查错误。它有数据存储。最重要的是，它工作得很好，非常有用——它收集订单。我绝对是认真的——这是一个好程序。我为你感到非常骄傲。”
- en: As usual, Simon drew a diagram. This time, it was of what he called a *real*
    program.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 和往常一样，西蒙画了一个图表。这次，是他所说的“真实”程序。
- en: '![](../Images/09-05-real-program.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../Images/09-05-real-program.png)'
- en: “Yes, I like my program too,” Erik said. “It does what I want, and it looks
    good. It prints orders almost the same way I saw in Starbucks. Yes, almost . .
    . maybe I can add a couple of lines or stars to make it better. I have some other
    ideas about what to add to this program.”
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，我也喜欢我的程序，”埃里克说。“它做我想做的事，看起来也不错。它打印订单的方式几乎和我看到星巴克的一样。是的，几乎……也许我可以添加几行或星星来让它更好。我还有一些关于要添加到这个程序中的其他想法。”
- en: “What else do you want to add?” Simon asked.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: “你还想添加什么？”西蒙问。
- en: “First of all, I want to make it a web application—with menus and buttons. It
    should be online, so I can take my iPad with me and use it.”
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: “首先，我想让它成为一个网络应用程序——带有菜单和按钮。它应该在线，这样我就可以带着我的iPad使用它。”
- en: “Great idea!” Simon said. “Let’s start working on it next week. I have a couple
    of ideas too,” he said and smiled.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: “好主意！”西蒙说。“我们下周开始工作。我也有一些想法，”他说着笑了。
- en: “Why are you smiling?” Erik asked.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: “你为什么笑？”埃里克问。
- en: “I remembered how you thought you were done with the program after our first
    day.”
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: “我记得你第一天认为你已经完成了程序。”
- en: “Ha, yes, I remember that too,” Erik said. “Of course, the program wasn’t quite
    ready then. What are your other ideas?”
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: “哈，是的，我也记得那件事，”埃里克说。“当然，那时候程序还没有完全准备好。你还有其他什么想法？”
- en: Simon said, “I’d add a couple of things to our data structure. For example,
    we can add the date and time when the order was made. That way, we’ll be able
    to see how many customers we served each day or each month.”
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 西蒙说：“我想在我们的数据结构中添加一些东西。例如，我们可以添加订单创建的日期和时间。这样，我们就能看到我们每天或每月服务了多少客户。”
- en: “Yes, that would be good,” Erik agreed.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: “是的，那会很好，”埃里克同意了。
- en: “Then, maybe we should save orders in the data storage right after they are
    entered. That will make sure we keep all the previous orders even if the program
    fails and crashes.”
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: “那么，也许我们应该在订单输入后立即将其保存在数据存储中。这样，即使程序失败并崩溃，我们也能确保保留所有之前的订单。”
- en: “But you said it will make it slower,” Erik remembered.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: “但你说过这会让它变慢，”埃里克记得。
- en: “Just a tiny bit. But it’s worth it—otherwise, we risk losing all our orders.
    I’m thinking about using a database for that.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: “只是有一点小问题。但这是值得的——否则，我们可能会丢失所有订单。我在考虑使用数据库来做这件事。”
- en: “Also,” Simon continued, “we need functions like ‘print all orders’ and ‘count
    how many portions of vanilla flavor we used’ if we want to make your program a
    real business application.”
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: “还有，”西蒙继续说，“如果我们想让你这个程序成为一个真正的商业应用，我们需要像‘打印所有订单’和‘统计我们使用了多少份香草口味’这样的功能。”
- en: “Of course, I want it,” Erik said. “But first I want to make it a web application
    and make it beautiful.”
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，我想要它，”埃里克说，“但首先我想把它做成一个网络应用，让它变得美观。”
- en: “Sure, we can start working on that next week.”
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，我们可以下周开始工作。”
- en: New things you have learned today
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 你今天学到的新知识
- en: '*How to check if a file exists*—We used the `os` Python module and the `os.path
    .exists()` method to do this. You pass the filename, and it returns `True` or
    `False`.'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如何检查文件是否存在*——我们使用了`os` Python模块和`os.path.exists()`方法来完成这个操作。你传递文件名，它返回`True`或`False`。'
- en: '*Pressing Control-C is not a good way to end a program*—We use Control-C when
    we want to stop a program that behaves abnormally. Good programs should always
    give you a way to end them normally.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*按住Control-C并不是结束程序的好方法*——当我们想要停止表现异常的程序时，我们会使用Control-C。好的程序应该始终给你一个正常结束它们的方法。'
- en: '*What a real program is*—We learned that real programs have input and output,
    data structures and algorithms, data storage, and error checking.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*什么是真正的程序*——我们了解到真正的程序有输入和输出、数据结构和算法、数据存储和错误检查。'
- en: Code for this chapter
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本章的代码
- en: 'You can find the code for this chapter here: [https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09).'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在这里找到本章的代码：[https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09](https://github.com/pavelanni/pythonicadventure-code/tree/main/ch09)。
