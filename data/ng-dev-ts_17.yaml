- en: Appendix C. Using the npm package manager
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 C. 使用 npm 包管理器
- en: This appendix is an overview of the tools we use to install Angular and its
    dependencies using the npm package manager.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本附录概述了我们使用 npm 包管理器安装 Angular 及其依赖项所使用的工具。
- en: 'For most of this book, we use Node.js for installing software. Node.js (or
    simply *Node*) isn’t just a framework or a library: it’s a JavaScript runtime
    environment as well. We use the Node runtime for running various utilities like
    npm or launching JavaScript code without a browser. We also use npm scripts to
    automate building, testing, and deploying Angular apps.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的大部分内容中，我们使用 Node.js 来安装软件。Node.js（或简称 *Node*）不仅仅是一个框架或库：它也是一个 JavaScript
    运行时环境。我们使用 Node 运行时来运行各种工具，如 npm 或在没有浏览器的情况下启动 JavaScript 代码。我们还使用 npm 脚本来自动化构建、测试和部署
    Angular 应用。
- en: 'To get started, download and install the current version of Node.js from [https://nodejs.org](https://nodejs.org).
    After installation is complete, open your terminal or command window and enter
    the following command:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请从 [https://nodejs.org](https://nodejs.org) 下载并安装当前版本的 Node.js。安装完成后，打开你的终端或命令窗口，并输入以下命令：
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This command should print the version of Node installed, for example, 10.3.0\.
    Node comes with the package manager npm, which we use to install Angular and other
    packages from the npm registry located at [www.npmjs.com](http://www.npmjs.com).
    This repository hosts Angular as well as more than 400,000 other JavaScript packages.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令应打印出已安装的 Node 版本，例如，10.3.0。Node 包含包管理器 npm，我们使用它从位于 [www.npmjs.com](http://www.npmjs.com)
    的 npm 注册处安装 Angular 和其他包。此存储库托管 Angular 以及超过 400,000 个其他 JavaScript 包。
- en: '|  |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**The Node.js framework**'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**Node.js 框架**'
- en: Node.js is also a framework that can be used to develop JavaScript programs
    that run outside the browser. You can develop the server-side layer of a web application
    in JavaScript or Typescript. We write a web server using Node in [chapter 12](kindle_split_021.xhtml#ch12)
    by using Node.js and Express frameworks. Google developed a high-performance V8
    JavaScript engine for the Chrome browser, and it can also be used to run code
    written using the Node.js API. The Node.js framework includes an API to work with
    the filesystem, access databases, listen to HTTP requests, and more.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Node.js 也是一个可以用来开发在浏览器外运行的 JavaScript 程序的框架。你可以在 JavaScript 或 Typescript 中开发
    Web 应用的服务器端。我们使用 Node.js 和 Express 框架在 [第 12 章](kindle_split_021.xhtml#ch12) 中编写了一个
    Web 服务器。Google 为 Chrome 浏览器开发了一个高性能的 V8 JavaScript 引擎，它也可以用来运行使用 Node.js API 编写的代码。Node.js
    框架包括用于与文件系统交互、访问数据库、监听 HTTP 请求等的 API。
- en: '|  |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'To install a JavaScript library, run the command `npm install`, or `npm i`
    for short. Say you want to install the TypeScript compiler locally. Open the Terminal
    in any directory and run the following command:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装一个 JavaScript 库，运行命令 `npm install`，或简写为 `npm i`。假设你想本地安装 TypeScript 编译器。在任何目录中打开终端，并运行以下命令：
- en: '[PRE1]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: After this command completes, you’ll see a new subdirectory named node_modules,
    where the TypeScript compiler has been installed. npm always installs packages
    in the node_modules directory. If such a directory doesn’t exist, npm will create
    it.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在此命令完成后，你将看到一个名为 node_modules 的新子目录，其中安装了 TypeScript 编译器。npm 总是在 node_modules
    目录中安装包。如果不存在这样的目录，npm 将创建它。
- en: 'If you want to install a package globally, add the `-g` option:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想全局安装一个包，请添加 `-g` 选项：
- en: '[PRE2]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This time the TypeScript compiler will be installed not in the current directory,
    but globally in the lib/node_modules subdirectory of your Node.js installation.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这次 TypeScript 编译器将不会安装到当前目录，而是安装到 Node.js 安装目录的 lib/node_modules 子目录中。
- en: 'If you want to install a specific version of the package, add the version number
    to the package name after the `@` sign. For example, to install Typescript 2.9.0
    globally, use the following command:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要安装特定版本的包，请将版本号添加到 `@` 符号之后的包名中。例如，要全局安装 Typescript 2.9.0，请使用以下命令：
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: All available options of the `npm install` command are described at [https://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 所有 `npm install` 命令的可用选项都描述在 [https://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install)。
- en: 'In some cases, you may want to have the same package installed both locally
    and globally. As a example, you may have the TypeScript compiler 2.7 installed
    locally, and TypeScript 2.9 installed globally. To run the global version of this
    compiler, you enter the `tsc` command in your terminal or command window, and
    to run the locally installed compiler, you could use the following command from
    your project directory:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，您可能希望在本地和全局范围内安装相同的包。例如，您可能已经在本地安装了 TypeScript 编译器 2.7，并在全局范围内安装了 TypeScript
    2.9。要运行此编译器的全局版本，您可以在终端或命令窗口中输入 `tsc` 命令，要运行本地安装的编译器，您可以从项目目录使用以下命令：
- en: '[PRE4]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: A typical Node-based project may have multiple dependencies, and we don’t want
    to keep running separate `npm i` commands to install each package. Creating a
    package .json file is a better way to specify all project dependencies.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 一个基于 Node 的典型项目可能有多重依赖项，我们不希望每次都运行单独的 `npm i` 命令来安装每个包。创建一个 package.json 文件是指定所有项目依赖项的更好方式。
- en: C.1\. Specifying project dependencies in package.json
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.1\. 在 package.json 中指定项目依赖项
- en: 'To start a new Node-based project, create a new directory (for example, my-node-project),
    open your terminal or command window, and change the current working directory
    to the newly created one. Then run the `npm init -y` command, which will create
    the initial version of the package.json configuration file. Normally, `npm init`
    asks several questions while creating the file, but the `-y` flag makes it accept
    the default values for all options. The following example shows this command running
    in the empty my-node-project directory:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动一个新的基于 Node 的项目，创建一个新的目录（例如，my-node-project），打开您的终端或命令窗口，并将当前工作目录更改为新创建的目录。然后运行
    `npm init -y` 命令，这将创建 package.json 配置文件的初始版本。通常，`npm init` 在创建文件时会询问几个问题，但 `-y`
    标志使其接受所有选项的默认值。以下示例显示了在空的 my-node-project 目录中运行此命令：
- en: '[PRE5]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Most of the generated configuration is needed either for publishing the project
    into the npm registry or while installing the package as a dependency for another
    project. We’ll use npm only for managing project dependencies and automating development
    and build processes.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数生成的配置要么是为了将项目发布到 npm 注册表，要么是在将包作为另一个项目的依赖项安装时使用。我们只会使用 npm 来管理项目依赖项并自动化开发和构建过程。
- en: 'Because we’re not going to publish it into the npm registry, remove all the
    properties except `name`, `description`, and `scripts`. Also, add a `"private":
    true` property, because it’s not created by default. That will prevent the package
    from being accidentally published to the npm registry. The package.json file should
    look like this:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '因为我们不会将其发布到 npm 注册表，所以请移除除 `name`、`description` 和 `scripts` 之外的所有属性。还要添加一个
    `"private": true` 属性，因为它不是默认创建的。这将防止包意外发布到 npm 注册表。package.json 文件应如下所示：'
- en: '[PRE6]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The `scripts` configuration allows you to specify command aliases that you
    can run in your command window. By default, `npm init` creates the `test` alias,
    which can be run like this: `npm test`. The generated script command include double
    ampersands, `&&`, which are used as a separator between commands. When you run
    `npm test`, it runs two commands: `echo \"Error: no test specified\"` and `exit
    -1`. npm scripts support about a dozen command names like `test`, `start`, and
    others. A list of these commands is at [https://docs.npmjs.com/misc/scripts](https://docs.npmjs.com/misc/scripts).'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '`scripts` 配置允许您指定可以在命令窗口中运行的命令别名。默认情况下，`npm init` 创建了 `test` 别名，可以像这样运行：`npm
    test`。生成的脚本命令包括双 ampersands，`&&`，它们用作命令之间的分隔符。当您运行 `npm test` 时，它将运行两个命令：`echo
    "Error: no test specified"` 和 `exit -1`。npm 脚本支持大约一打命令名称，如 `test`、`start` 等。这些命令的列表可以在
    [https://docs.npmjs.com/misc/scripts](https://docs.npmjs.com/misc/scripts) 找到。'
- en: 'You can create your own command aliases with any names:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用任何名称创建自己的命令别名：
- en: '[PRE7]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Because `deploy` is a custom alias name, you need to run this command by adding
    the keyword `run`:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 `deploy` 是一个自定义别名名称，您需要通过添加关键字 `run` 来运行此命令：
- en: '[PRE8]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: In section 12.3.6 in [chapter 12](kindle_split_021.xhtml#ch12), we discuss how
    to write npm scripts for building and deploying an app on the web server.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在第 12 章的 12.3.6 节中，我们讨论了如何编写 npm 脚本来在 Web 服务器上构建和部署应用程序。
- en: 'If you generate package.json using the `npm init` command, it’ll be missing
    two important sections: `dependencies` and `devDependencies`. Let’s see how dependencies
    of an Angular project are specified. [Figure C.1](#app03fig01) shows a fragment
    from a package.json file of a typical Angular project.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用`npm init`命令生成package.json，它将缺少两个重要的部分：`dependencies`和`devDependencies`。让我们看看Angular项目的依赖项是如何指定的。[图C.1](#app03fig01)显示了典型Angular项目package.json文件的一个片段。
- en: Figure C.1\. Angular dependencies in package.json
  id: totrans-35
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图C.1\. package.json中的Angular依赖项
- en: '![](Images/cfig01_alt.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![cfig01_alt.jpg](Images/cfig01_alt.jpg)'
- en: It looks intimidating, but the good news is that you don’t need to remember
    all these packages and their versions, because you’ll be generating projects with
    Angular CLI, which will create the file package.json with the proper content.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 它看起来可能令人畏惧，但好消息是，你不需要记住所有这些软件包及其版本，因为你会使用Angular CLI生成项目，它将创建包含正确内容的package.json文件。
- en: The `dependencies` section lists all the packages required for your application
    to run. As you can see, the Angular framework comes in several packages with names
    starting with `@angular`. You may not need to install all of them. If your app
    doesn’t use forms, for example, there’s no need to include `@angular/forms` in
    your package.json.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '`dependencies`部分列出了运行你的应用程序所需的所有软件包。正如你所见，Angular框架以以`@angular`开头的几个软件包的形式出现。你可能不需要安装所有这些软件包。例如，如果你的应用程序不使用表单，那么就没有必要在package.json中包含`@angular/forms`。'
- en: The `devDependencies` section lists all the packages required to be installed
    on a developer’s computer. It includes several packages, and none of them is needed
    on the production server. There’s no need to have testing frameworks or a TypeScript
    compiler on the production machine, right?
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '`devDependencies`部分列出了需要在开发者的计算机上安装的所有软件包。它包括几个软件包，但在生产服务器上不需要任何这些软件包。在生产机器上不需要测试框架或TypeScript编译器，对吧？'
- en: 'To install a single package with npm, list the name of this package. For example,
    to add the Lodash library to your node_modules directory, run the following command:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用npm安装单个软件包，列出该软件包的名称。例如，要将Lodash库添加到你的node_modules目录，运行以下命令：
- en: '[PRE9]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'To add the package to node_modules and add the corresponding dependency to
    the `dependencies` section of your package.json file, you can explicitly specify
    the `--save-prod` option:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 要将软件包添加到node_modules并添加相应的依赖项到你的package.json文件的`dependencies`部分，你可以明确指定`--save-prod`选项：
- en: '[PRE10]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: You can also use the abbreviation `-P` for `--save-prod`. If no options are
    specified, the `npm i lodash` command updates the `dependencies` section of the
    package.json file.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以使用缩写`-P`代替`--save-prod`。如果没有指定任何选项，`npm i lodash`命令将更新package.json文件的`dependencies`部分。
- en: 'To add the package to node_modules and add the corresponding dependency to
    the `devDependencies` section of your package.json file, use the `--save-dev`
    option:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 要将软件包添加到node_modules并添加相应的依赖项到你的package.json文件的`devDependencies`部分，使用`--save-dev`选项：
- en: '[PRE11]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You can also use the abbreviation `-D` for `--save-dev`.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以使用缩写`-D`代替`--save-dev`。
- en: 'Sometimes the GitHub version of a package has an important bug fix that hasn’t
    been released yet on npmjs.org. If you want install such a package from GitHub,
    you need to replace the version number in package.json dependencies with its location
    on GitHub. Changing the dependency to include the name of the GitHub organization
    and repository should allow you to install the latest builds from GitHub versions
    of this library. For example:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，GitHub上的一个软件包可能包含一个重要的错误修复，而这个修复尚未在npmjs.org上发布。如果你想要从GitHub安装这样的软件包，你需要将package.json依赖项中的版本号替换为其在GitHub上的位置。将依赖项改为包含GitHub组织名称和存储库名称应该允许你安装此库的GitHub版本的最新构建。例如：
- en: '[PRE12]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The preceding configuration will work, assuming that the master branch of the
    Flex Layout library has no code issues preventing npm from installing it.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的配置将有效，假设Flex Layout库的master分支没有代码问题阻止npm安装它。
- en: C.2\. Semantic versioning
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.2\. 语义版本控制
- en: Numbering of Angular releases uses a set of rules known as *semantic versioning*.
    The version of a package consists of three digits—for example, 6.1.2\. The first
    digit denotes a major release that includes new features and potentially breaking
    changes in the API. The second digit represents a minor release, which introduces
    new backward-compatible APIs but has no breaking changes. The third digit represents
    backward-compatible patches with bug fixes.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: Angular版本编号使用一组称为*语义版本控制*的规则。包的版本由三个数字组成——例如，6.1.2。第一个数字表示一个主要版本，它包括新功能和API中的潜在破坏性更改。第二个数字代表一个次要版本，它引入了向后兼容的API但没有破坏性更改。第三个数字表示向后兼容的补丁，包含错误修复。
- en: 'Take another look at [figure C.1](#app03fig01) in the previous section. Every
    package has a three-digit version, and many of them have additional symbols: `^`
    or `~`. If the specified version has just the three digits, that means you instruct
    npm to install exactly that version. For example, the following line in package.json
    tells npm to install Angular CLI version 6.0.5, ignoring the newer versions even
    if they’re available:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 再看看上一节中的[图C.1](#app03fig01)。每个包都有一个三位数的版本号，其中许多还有额外的符号：`^` 或 `~`。如果指定的版本只有三位数字，这意味着你指示npm安装确切的那个版本。例如，package.json中的以下行告诉npm安装Angular
    CLI版本6.0.5，即使有更新的版本也不安装：
- en: '[PRE13]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Many packages in that package.json file have the hat sign `^` in front of the
    version. For example:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在那个package.json文件中的许多包版本前都有一个帽子符号 `^`。例如：
- en: '[PRE14]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: This means you’ll allow npm to install the latest minor release of version 6
    if available. If the latest version of the Angular Core package is 6.2.1, it will
    be installed.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着如果你允许npm安装6版本的最新次要版本，如果可用。如果Angular Core包的最新版本是6.2.1，它将被安装。
- en: 'The tilde `~` means you want to install the latest patch for the given major
    and minor version:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 波浪号 `~` 表示你想要安装给定主版本和次要版本的最新补丁：
- en: '[PRE15]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: There are many other symbols you can use with version numbers with npm—see [http://mng.bz/YnyW](http://mng.bz/YnyW)
    for details.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在版本号中使用许多其他符号与npm一起使用——有关详细信息，请参阅[http://mng.bz/YnyW](http://mng.bz/YnyW)。
- en: C.3\. Yarn as an alternative to npm
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.3. Yarn作为npm的替代品
- en: Yarn (see [https://yarnpkg.com](https://yarnpkg.com)) is another package manager
    that can be used as an alternative to npm. Prior to version 5, npm was slow, which
    was one reason we started using the faster Yarn.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Yarn（请参阅[https://yarnpkg.com](https://yarnpkg.com)）是另一个可以作为npm替代使用的包管理器。在版本5之前，npm速度较慢，这是我们开始使用更快的Yarn的原因之一。
- en: 'Now npm is fast too, but Yarn has an additional benefit: it creates the file
    yarn.lock that keeps track of exact versions of packages that were installed in
    your project. Let’s say your package.json file has a `"@angular/core": "^6.0.0"`
    dependency, and your project has no yarn.lock file. If version 6.1.0 is available,
    it’ll be installed, and yarn.lock is created with a record about the version 6.1.0\.
    If you run `yarn install` in a month, and if yarn.lock exists in your project,
    Yarn will use it and install version 6.1.0, even if version 6.2.0 is available.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '现在npm也很快了，但Yarn还有一个额外的优势：它创建了一个yarn.lock文件，该文件跟踪项目中安装的包的确切版本。假设你的package.json文件有一个`"@angular/core":
    "^6.0.0"`依赖项，并且你的项目中没有yarn.lock文件。如果6.1.0版本可用，它将被安装，并且会创建一个包含关于6.1.0版本记录的yarn.lock文件。如果你一个月后运行`yarn
    install`，并且如果项目中存在yarn.lock文件，Yarn将使用它并安装6.1.0版本，即使6.2.0版本可用。'
- en: 'The following fragment from yarn.lock shows that although the dependency in
    package.json for the `@angular/core` package was set as `^6.0.0`, version `6.0.2`
    was installed:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是从yarn.lock中摘录的片段，显示尽管package.json中对`@angular/core`包的依赖项设置为`^6.0.0`，但安装了`6.0.2`版本：
- en: '[PRE16]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: In a team setup, you should check the yarn.lock file into the version control
    repository so every member of your team has the same versions of packages.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在团队设置中，你应该将yarn.lock文件提交到版本控制仓库，以确保团队中的每个成员都有相同版本的包。
- en: npm also creates the package-lock.json file, but npm isn’t designed to install
    exact package version(s) listed in this file if you run `npm install` (see [https://github.com/npm/npm/issues/17979](https://github.com/npm/npm/issues/17979)).
    The good news is that starting from version 5.7, npm supports the `npm ci` command,
    which ignores the versions listed in package.json, but installs the versions listed
    in the package-lock.json file.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: npm也会创建package-lock.json文件，但如果运行`npm install`，npm并不是设计为安装此文件中列出的确切包版本（参见[https://github.com/npm/npm/issues/17979](https://github.com/npm/npm/issues/17979)）。好消息是，从版本5.7开始，npm支持`npm
    ci`命令，该命令忽略package.json中列出的版本，但安装package-lock.json文件中列出的版本。
- en: If at some point you decide to upgrade packages, overriding the versions stored
    in yarn.lock, run the `yarn upgrade-interactive` command, as shown in [figure
    C.2](#app03fig02).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在某个时候你决定升级包，并覆盖yarn.lock中存储的版本，请运行`yarn upgrade-interactive`命令，如图C.2所示。[图C.2](#app03fig02)。
- en: Figure C.2\. Upgrading package versions with Yarn
  id: totrans-69
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图C.2\. 使用Yarn升级包版本
- en: '![](Images/cfig02_alt.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图片C.2的替代文本](Images/cfig02_alt.jpg)'
- en: Yarn works with your project’s package.json file, so there’s no need for any
    additional configuration. You can read more about using Yarn at [https://yarnpkg.com/en/docs](https://yarnpkg.com/en/docs).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: Yarn与你的项目package.json文件协同工作，因此无需任何额外的配置。你可以在[https://yarnpkg.com/en/docs](https://yarnpkg.com/en/docs)了解更多关于使用Yarn的信息。
- en: '|  |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Tip
  id: totrans-73
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 小贴士
- en: 'You can ask Angular CLI to use Yarn instead of npm while installing dependencies
    of the newly generated project. Starting with Angular CLI 6, you can do this by
    using the following command:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以要求Angular CLI在安装新生成项目的依赖项时使用Yarn而不是npm。从Angular CLI 6开始，你可以通过以下命令来完成：
- en: '[PRE17]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'If you use older versions of Angular CLI, use the following command:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用较旧的Angular CLI版本，请使用以下命令：
- en: '[PRE18]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '|  |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '|'
