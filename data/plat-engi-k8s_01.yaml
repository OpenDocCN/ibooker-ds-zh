- en: 1 (The rise of) platforms on top of Kubernetes
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1 （在Kubernetes之上的）平台兴起
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Understanding platforms and why we need them
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解平台及其必要性
- en: Building a platform on top of Kubernetes
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Kubernetes之上构建平台
- en: Introducing a “walking skeleton” application
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍一个“行走骨架”应用程序
- en: Platform engineering is not a new term in the tech industry. But it is quite
    new in the cloud-native space and the context of Kubernetes. We were not using
    the term in the cloud-native communities when I started writing this book back
    in 2020\. However, by the time of writing this book (2023), platform engineering
    had become the new hot topic in cloud-native and Kubernetes communities. This
    book aims to go on a journey to explore what platforms are and why you would use
    Kubernetes, and more specifically, the Kubernetes APIs at the core, to build a
    platform and enable your internal teams to deliver software more efficiently.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 平台工程在技术行业中不是一个新术语。但在云原生空间和Kubernetes的背景下，它相当新颖。当我2020年开始写这本书时，我们并没有在云原生社区中使用这个术语。然而，到撰写这本书的时候（2023年），平台工程已经成为云原生和Kubernetes社区中的新热点。本书旨在进行一次探索之旅，了解平台是什么，为什么你会使用Kubernetes，以及更具体地说，使用核心的Kubernetes
    API来构建平台，并使你的内部团队能够更高效地交付软件。
- en: To understand why platform engineering became a trend in the industry, you first
    need to understand the cloud native and Kubernetes ecosystems. Because this book
    assumes that you are already familiar with Kubernetes, containers, and cloud-native
    applications, we will focus on describing the challenges you will face when architecting,
    building, and running these applications on top of Kubernetes and cloud providers.
    We will take a developer-focused approach, meaning that most of the topics covered
    are tackled in a way that relates to developers’ day-to-day tasks and how a myriad
    of tools and frameworks in the cloud-native space will affect them.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解为什么平台工程成为行业趋势，你首先需要了解云原生和Kubernetes生态系统。由于本书假设你已经熟悉Kubernetes、容器和云原生应用程序，我们将专注于描述你在基于Kubernetes和云提供商构建和运行这些应用程序时将面临的挑战。我们将采取以开发者为中心的方法，这意味着大多数涵盖的主题都是以与开发者的日常任务相关的方式处理的，以及云原生空间中的无数工具和框架将如何影响他们。
- en: The ultimate goal for every software development team is to deliver new features
    and bug/security fixes to their customers. New features and more stable applications
    translate directly to competitive business advantages and happy customers. To
    deliver more software efficiently, development teams must have access to the tools
    they need to do their work. The main objective of the platform and platform engineering
    teams is to enable developers to deliver software more efficiently. This requires
    a different technological approach and a cultural shift towards treating development
    teams as internal customers of the platforms we will be building.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 每个软件开发团队的最高目标是向客户交付新的功能和错误/安全修复。新的功能和更稳定的应用程序直接转化为竞争优势和满意的客户。为了更高效地交付更多软件，开发团队必须能够访问他们完成工作所需的工具。平台和平台工程团队的主要目标是使开发者能够更高效地交付软件。这需要一种不同的技术方法，以及一种文化转变，将我们即将构建的平台视为内部客户。
- en: We will use a simple application (composed of multiple services) as an example
    throughout the chapters to build a platform that supports the teams building,
    releasing, and managing this application by using all open source tools in the
    cloud-native space.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在整个章节中使用一个简单的应用程序（由多个服务组成）作为示例，以构建一个平台，该平台通过使用云原生空间中的所有开源工具，支持团队构建、发布和管理此应用程序。
- en: 1.1 What is a platform, and why do I need one?
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1 什么是平台，为什么我需要一个？
- en: Platforms are a collection of services that help companies get their software
    running in front of their customers (internal or external). Platforms aim to be
    a one-stop shop for teams to have all the tools that they need to be productive
    and continuously deliver business value—with the rise in popularity and with the
    growing demand to improve development cycles, platforms that once used to provide
    us only with computing resources had leveled up the stack to provide more and
    more services.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 平台是一组服务，帮助公司让他们的软件在客户面前运行（内部或外部）。平台旨在成为团队的一站式商店，拥有所有他们需要的工具，以保持高效并持续交付业务价值——随着流行度的上升和日益增长的提高开发周期的需求，曾经只提供计算资源的平台已经升级了堆栈，提供了越来越多的服务。
- en: Platforms are not new, and neither are cloud platforms. Cloud providers like
    AWS, Google, Microsoft, Alibaba, and IBM have provided us platforms for years.
    These cloud providers offer teams many tools to build, run, and monitor their
    business-critical applications using a pay-as-you-go model. From a business agility
    perspective, these platforms offered by cloud providers have fundamentally shifted
    the expectations for teams consuming their services. This allows companies and
    teams to start fast and create applications that can scale globally without a
    significant initial investment. If no one uses the applications they are building,
    their bills will not be large at the end of the month. On the other side of the
    spectrum, if you are successful and your applications are popular, you must get
    ready for a large bill at the end of the month. The more resources (storage, network
    traffic, services, etc.) you use, the more you pay. Another aspect to consider
    is that if you rely on the tools provided by your cloud provider, it is harder
    to move away from them as your entire organization gets used to that cloud provider’s
    tools, workflows, and services. It becomes a painful experience to plan and migrate
    applications across different providers.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 平台并不新鲜，云平台也是如此。像AWS、Google、Microsoft、Alibaba和IBM这样的云服务提供商已经为我们提供了多年的平台。这些云服务提供商为团队提供了许多工具，让他们可以使用按需付费的模式来构建、运行和监控他们的业务关键型应用程序。从业务敏捷性的角度来看，这些云服务提供商提供的平台从根本上改变了使用其服务的团队对期望的设定。这使得公司和团队能够快速启动并创建可以全球扩展的应用程序，而无需进行大量初始投资。如果没有人使用他们正在构建的应用程序，他们的账单在月底时不会很大。在光谱的另一端，如果你成功了，你的应用程序很受欢迎，你必须为月底的大额账单做好准备。你使用的资源（存储、网络流量、服务等）越多，你支付的金额就越多。另一个需要考虑的方面是，如果你依赖云服务提供商提供的工具，随着整个组织习惯了该云服务提供商的工具、工作流程和服务，你将更难离开他们。在不同提供商之间规划和迁移应用程序将变成一种痛苦的经历。
- en: In the following sections, we will cover the current state of cloud platforms
    and what kind of platforms we will discuss in this book. Lately, as always happens
    in our industry, terms that can be useful to describe very concrete tools and
    practices tend to be abused by marketing teams and become buzzwords. We must set
    the context for the rest of the book to avoid confusion.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将介绍云平台当前的状况以及本书将讨论哪些类型的平台。最近，正如我们行业经常发生的那样，那些可以用来描述非常具体工具和实践的术语往往被营销团队滥用，变成了流行语。我们必须为本书的其余部分设定上下文，以避免混淆。
- en: 1.1.1 Cloud services and domain-specific needs
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.1 云服务和特定领域需求
- en: We can organize cloud services into different layers, something that we need
    to do to understand where the industry is today and where it is heading. The following
    diagram shows a set of categories of the services provided by cloud providers,
    starting from low-level infrastructure services, such as provisioning hardware
    on demand to high-level application services, where developers can interact with
    machine-learning models without worrying where these models are running. Figure
    1.1 shows these layers, starting at the bottom with low-level computing resources
    and going up the stack with application-level and industry-specific services.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将云服务组织成不同的层次，这是我们为了了解行业目前处于何种状态以及它将走向何方所必须做的。以下图表显示了云服务提供商提供的服务的一系列类别，从低级基础设施服务，如按需提供硬件，到高级应用程序服务，开发者可以与机器学习模型交互，而无需担心这些模型运行在哪里。图1.1显示了这些层次，从底层的低级计算资源开始，向上层扩展到应用层和行业特定服务。
- en: '![](../../OEBPS/Images/01-01.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-01.png)'
- en: Figure 1.1 Cloud provider’s services categories
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1 云服务提供商的服务类别
- en: The higher the category, the more you will need to pay for the service, because
    these services usually take care of all the underlying layers and operational
    costs for you. For example, suppose you provision a new highly available PostgreSQL
    database in a managed service offered by a cloud provider. Figure 1.2 shows an
    example of a relational database such as PostgreSQL.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 类别越高，你为服务支付的费用就越高，因为这些服务通常为你处理所有底层层和运营成本。例如，假设你在云服务提供商提供的托管服务中配置了一个新的高可用性PostgreSQL数据库。图1.2显示了一个关系型数据库，如PostgreSQL的示例。
- en: '![](../../OEBPS/Images/01-02.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-02.png)'
- en: Figure 1.2 Provisioning a PostgreSQL database instance in the cloud
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2 在云中配置PostgreSQL数据库实例
- en: 'In that case, the service cost includes the cost and management of the database
    software needed, the operating system where the database runs, and the hardware
    needed to run it. Because you might want to monitor and get metrics on how the
    database performs when your application is under heavy load, the cloud provider
    also wires up all the monitoring tools available for the service. Then it is up
    to you to do the math: is it worth paying a cloud provider to make all these decisions
    for us, or can you build an internal team with enough knowledge to run and operate
    all these software and hardware on-premises? Sometimes, money is not a problem;
    you must deal with company or industry policies and regulations. In such cases,
    can you run your workloads and host your data in a cloud provider?'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，服务成本包括所需数据库软件的成本和管理、数据库运行的操作系统以及运行所需的硬件。因为您可能希望监控并获取数据库在应用承受重负载时的性能指标，云服务提供商也会为服务配置所有可用的监控工具。然后，您需要自己进行计算：是否值得支付云服务提供商为我们做出所有这些决定，或者您能否组建一个拥有足够知识、能够本地运行和操作所有这些软件和硬件的内部团队？有时，金钱可能不是问题；您必须处理公司或行业的政策法规。在这种情况下，您是否可以在云服务提供商处运行工作负载和托管数据？
- en: 1.1.2 Your job as an organization
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.2 您作为组织的职责
- en: Keeping up to date with all the provided services, libraries, frameworks, and
    tools is a full-time job. Operating and maintaining the wide range of software
    and hardware that companies need to run their applications requires you to have
    the right teams in place, and at the end of the day, if you are not a large and
    mature organization in terms of your software delivery practices, or if you are
    not getting any competitive advantage by managing your own hardware/software stack,
    adopting a cloud provider is usually the right way to go.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 跟踪所有提供的服务、库、框架和工具是一项全职工作。运营和维护公司运行应用所需的广泛软件和硬件需要您拥有合适的团队，最终，如果您在软件交付实践中不是一个大型的成熟组织，或者您通过管理自己的硬件/软件堆栈没有获得任何竞争优势，采用云服务提供商通常是正确的选择。
- en: It is still the job of each company and developer to look at the available services
    and choose what they will use and how they will mix and match these services to
    build new features. It is common to find cloud architects (experts on a specific
    cloud provider, or on-premises experts) in each organization defining how and
    which services will be used to build core applications. It is also common to engage
    with the cloud provider’s consulting services to get advice and guidance on specific
    use cases and best practices.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 每个公司和开发人员的职责仍然是查看可用的服务，并选择他们将使用什么以及如何混合匹配这些服务来构建新功能。在组织中发现云架构师（特定云服务提供商的专家或本地专家）定义如何以及使用哪些服务来构建核心应用是很常见的。与云服务提供商的咨询服务合作以获得特定用例和最佳实践的咨询和指导也是很常见的。
- en: Cloud providers might suggest tools and workflows to create applications. Still,
    each organization needs to go through a learning curve and mature its practices
    around applying these tools to solve its specific challenges. Staffing cloud provider
    experts is always a good idea, because they bring knowledge from previous experiences,
    saving time for less-experienced teams.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 云服务提供商可能会建议工具和工作流程来创建应用程序。然而，每个组织都需要经历一个学习曲线，并成熟其应用这些工具以解决特定挑战的实践。聘请云服务专家始终是一个好主意，因为他们从以往的经验中带来知识，为经验较少的团队节省时间。
- en: In this book, we will focus on organization-specific platforms, not generic
    cloud platforms that you can buy off the shelf, like those offered by cloud providers.
    We also want to focus on platforms that can work on-premises on our organization’s
    hardware. This is important for more regulated industries that cannot run on public
    clouds. This forces us to have a broader view of tools, standards, and workflows
    that can be applied outside the realm of a cloud provider. Consuming services
    from more than one cloud provider is also becoming increasingly popular. This
    can result from working for a company that acquired or became acquired by another
    company using a different provider, ending up in a situation where multiple providers
    must coexist, and there should be a shared strategy for both. In other situations,
    in more regulated industries, organizations are forced to run workloads on different
    providers (including on-prem workloads) to guarantee resiliency in situations
    where an entire cloud provider can go down.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将专注于组织特定的平台，而不是那些可以直接购买的通用云平台，例如云服务提供商所提供的那些。我们还希望关注可以在我们组织硬件上本地运行的平台。这对于不能在公共云上运行的更多受监管行业来说非常重要。这迫使我们拥有更广泛的视角，考虑可以应用于云服务提供商领域之外的工具、标准和工作流程。从多个云服务提供商那里消费服务也越来越受欢迎。这可能是由于为一家收购了或被另一家使用不同提供商的公司工作，最终导致多个提供商必须共存，并且应该有一个共享策略。在其他情况下，在更多受监管的行业中，组织被迫在不同的提供商（包括本地工作负载）上运行工作负载，以确保在整个云服务提供商可能崩溃的情况下保持弹性。
- en: The kind of platforms we will be looking at extends the layers of customer behavior
    mentioned before to include company-specific services, company-specific standards,
    and developer experiences that allow the organization’s development teams to build
    complex systems for the organization and their customers. Figure 1.3 shows how,
    no matter whether we are consuming cloud services, third-party services, or internal
    services, organizations must mix and match these services by building layers on
    top that are focused on solving business-specific challenges.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将要探讨的平台类型将之前提到的客户行为层扩展到包括公司特定的服务、公司特定的标准和开发体验，这些体验允许组织的开发团队为组织和他们的客户构建复杂系统。图
    1.3 展示了无论我们是在消费云服务、第三方服务还是内部服务，组织都必须通过在顶部构建专注于解决特定业务挑战的层来混合和匹配这些服务。
- en: '![](../../OEBPS/Images/01-03.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.3](../../OEBPS/Images/01-03.png)'
- en: Figure 1.3 Organization-specific layers
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.3 组织特定层
- en: These extra layers are, most of the time, “glue” between existing services,
    data, and event sources combined to solve particular challenges the business faces
    or to implement new features for their customers. It is common to rely on third-party
    service providers for more business-specific tools, for example, industry-specific
    or generic CRM (Customer Relationship Management) systems, such as Salesforce.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这些额外的层大多数情况下是现有服务、数据和事件源之间的“胶水”，它们结合在一起解决业务面临的特定挑战或为他们的客户提供新功能。依赖于第三方服务提供商提供更多特定于业务的工具是很常见的，例如行业特定的或通用的客户关系管理（CRM）系统，如
    Salesforce。
- en: For the customers, the platform, the cloud provider, and where the services
    are running are entirely irrelevant. Internally, for development teams, the platform
    acts as an enabler for development teams to do their work. Platforms are not static,
    and their main objective is to help the organization improve and excel at continuously
    delivering high-quality software to its customers.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 对于客户来说，平台、云服务提供商以及服务运行的位置完全无关紧要。在内部，对于开发团队来说，平台作为开发团队完成工作的推动者。平台不是静态的，它们的主要目标是帮助组织改进并擅长持续向客户提供高质量的软件。
- en: No matter the industry where your company operates and whether you choose to
    use a cloud provider, your company’s combinations of tools and workflows to deliver
    new features to its customers can be described as your platform. Technically,
    platforms are all about system integrations, best practices, and composable services
    that we can combine to build more complex systems. This book will look at standard
    practices, tools, and behaviors that make platforms successful and how you can
    build your cloud-native platforms, whether running on one or more cloud providers
    or on-premises.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您的公司在哪个行业运营，无论您是否选择使用云服务提供商，您的公司用于向客户交付新功能的工具和工作流程的组合都可以描述为您的平台。从技术角度来看，平台全部关于系统集成、最佳实践和可组合服务，我们可以将它们组合起来构建更复杂的系统。本书将探讨使平台成功的标准实践、工具和行为，以及您如何构建云原生平台，无论是在一个或多个云服务提供商上运行还是在本地运行。
- en: We will use cloud providers as a reference to compare the services and tools
    they provide and learn how we can achieve similar results in a multi-cloud provider
    and on-premises way by using open-source tools. But before looking into concrete
    tools, it is essential to understand what kind of experiences we can get from
    cloud providers.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用云服务提供商作为参考，比较它们提供的服务和工具，并学习如何通过使用开源工具，在多云服务和本地环境中实现类似的结果。但在探讨具体工具之前，了解我们可以从云服务提供商那里获得什么样的体验是至关重要的。
- en: 1.1.3 Working with cloud platforms
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.3 与云平台合作
- en: One common denominator between all cloud providers is that they provide services
    using an API-first approach. This means that to access any of their services,
    an API will be available to the users to request and interact with this service.
    These APIs expose all the service functionality, such as which resources can be
    created, with which configuration parameters, where (in which region of the world)
    we want the resource to run, etc. Another important aspect of these APIs is that
    they require a team to own these API definitions; this means that a team will
    be in charge of identifying how these APIs are going to be used and how they are
    going to evolve and have clear definitions of what these APIs are not responsible
    for.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 所有云服务提供商的共同特点是它们都采用以API为首要的方法来提供服务。这意味着要访问它们提供的任何服务，用户都将有一个API可供请求和交互。这些API暴露了所有服务功能，例如可以创建哪些资源，使用哪些配置参数，资源在哪里（在世界的哪个地区）运行等。这些API的另一个重要方面是它们要求一个团队拥有这些API定义；这意味着一个团队将负责确定这些API将如何被使用，以及它们将如何演变，并明确定义这些API不负责的内容。
- en: Each cloud provider can be analyzed by looking at their APIs, because there
    will usually be one API for each offered service. It is common to see services
    in the beta or alpha stage only offered through the APIs for early users to experiment,
    test, and provide feedback before the service is officially announced. While the
    structure, format, and style tend to be similar for all the services provided
    by a cloud provider, there are no standards across cloud providers to define how
    these services should be exposed and which features they need to support.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过查看它们的API来分析每个云服务提供商，因为通常每个提供的服务都会有一个API。常见的情况是，服务仅在测试阶段通过API提供给早期用户进行实验、测试和提供反馈，直到服务正式发布。虽然云服务提供商提供的所有服务的结构、格式和风格通常相似，但云服务提供商之间没有标准来定义这些服务应该如何公开以及它们需要支持哪些功能。
- en: Manually crafting complex requests against the cloud provider services, APIs
    is complex and error prone. It is a common practice by cloud providers to simplify
    the developer’s life by providing SDKs (software development kits) that consume
    the services APIs implemented in different programming languages. This means developers
    can programmatically connect and use a cloud provider’s services by including
    a dependency (library, the cloud provider SDK) for their applications. While this
    is handy, it introduces some strong dependencies between the application’s code
    and the cloud provider, sometimes requiring us to release our application code
    to upgrade these dependencies.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 手动针对云服务提供商的服务和API构建复杂请求是复杂且容易出错的。云服务提供商通常通过提供SDK（软件开发工具包）来简化开发者的生活，这些SDK消耗了用不同编程语言实现的API服务。这意味着开发者可以通过在应用程序中包含一个依赖项（库、云服务提供商SDK）来程序化地连接和使用云服务提供商的服务。虽然这很方便，但它引入了应用程序代码和云服务提供商之间的一些强烈依赖，有时甚至需要我们发布应用程序代码来升级这些依赖。
- en: In the same way that with APIs, with SDKs, there are no standards, and each
    SDK heavily depends on the programming language ecosystem’s best practices and
    tools. There are cases where the SDKs don’t play nice with frameworks or tools
    that are popular in the programming language that you are using. Examples where
    SDKs/Clients can go wrong, include database drivers that don’t align with the
    version provided by the cloud provider or languages and ecosystems that the Cloud
    Provider does not yet support. In such cases, going directly to the API is possible
    but hard and usually discouraged, because your teams will maintain all the code
    required to connect to the cloud provider services.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 与 API 一样，SDKs 没有标准，每个 SDK 都严重依赖于编程语言生态系统中的最佳实践和工具。有些情况下，SDKs/客户端与您所使用的编程语言中流行的框架或工具不兼容。SDKs/客户端可能出错的情况包括与云服务提供商提供的版本不匹配的数据库驱动程序，或者云服务提供商尚未支持的编程语言和生态系统。在这种情况下，直接访问
    API 是可能的，但很困难，通常不鼓励这样做，因为您的团队将维护连接到云服务提供商服务的所有代码。
- en: Cloud providers also provide CLIs (command-line interfaces), tools for operations
    teams and some developers’ workflows. CLIs are binaries you can download, install,
    and use from your operating system terminal. CLIs interact directly with the cloud
    providers’ APIs but don’t require you to know how to create a new application
    to interact with the services as with SDKs. CLIs are particularly useful for continuous
    integration and automation pipelines, where resources might need to be created
    on demand, for example, to run our integration tests.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 云服务提供商还提供 CLIs（命令行界面），这些界面是操作团队和一些开发者工作流程的工具。CLIs 是您可以从操作系统终端下载、安装和使用的二进制文件。CLIs
    直接与云服务提供商的 API 交互，但不需要您知道如何创建新应用程序来与 SDKs 交互的服务。CLIs 对于持续集成和自动化管道特别有用，在这些管道中，可能需要按需创建资源，例如运行我们的集成测试。
- en: Figure 1.4 shows applications and automation such as CI/CD pipelines and integration
    tests consuming the same APIs but using different tools designed by the cloud
    provider to simplify these scenarios. The figure also shows the Dashboard component,
    usually running inside the cloud provider, which provides visual access to all
    the services and resources being created.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 展示了应用程序和自动化，例如 CI/CD 管道和集成测试，它们消耗相同的 API，但使用由云服务提供商设计的不同工具来简化这些场景。该图还显示了仪表板组件，通常在云服务提供商内部运行，它提供了对所有创建的服务和资源的可视化访问。
- en: '![](../../OEBPS/Images/01-04.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-04.png)'
- en: Figure 1.4 Cloud providers’ SDKs, CLIs, and Dashboard clients
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 云服务提供商的 SDKs、CLIs 和仪表板客户端
- en: Finally, due to the number of services provided and the interconnections between
    the services, cloud providers offer dashboards and user interfaces to access and
    interact with all the offered services. These dashboards also offer reporting,
    billing, and other functions that are hard to visualize using the CLIs or directly
    via the APIs. By using these dashboards, users can access most of the standard
    features provided by the services and real-time access to see what is being created
    inside the cloud provider.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，由于提供的服务数量和服务之间的相互连接，云服务提供商提供仪表板和用户界面，以便访问和交互所有提供的服务。这些仪表板还提供报告、计费和其他难以使用
    CLIs 或直接通过 API 可视化的功能。通过使用这些仪表板，用户可以访问大多数由服务提供的标准功能，并实时查看云服务提供商内部正在创建的内容。
- en: As mentioned, dashboards, CLIs, and SDKs require your teams to learn about many
    cloud provider-specific flows, tools, and nomenclature. Because of the number
    of services provided by each cloud provider, it is no wonder why finding experts
    that can cover more than a single provider is challenging.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 正如之前提到的，仪表板、CLIs 和 SDKs 需要您的团队了解许多云服务提供商特定的流程、工具和术语。由于每个云服务提供商提供的服务数量，难怪找到能够覆盖多个服务提供商的专家具有挑战性。
- en: Because this is a Kubernetes-focused book, I wanted to show the experience provided
    by a cloud provider to create a Kubernetes cluster, which demonstrates the dashboard,
    CLI, and API exposed by the Google Cloud Platform. Some cloud providers provide
    a better experience than others, but overall, you should be able to achieve the
    same with all the major ones.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是一本以 Kubernetes 为重点的书，我想展示云服务提供商创建 Kubernetes 集群所提供的服务体验，这展示了 Google Cloud
    Platform 提供的仪表板、CLI 和 API。一些云服务提供商提供的体验比其他提供商更好，但总体而言，您应该能够使用所有主要的服务提供商实现相同的效果。
- en: 1.1.4 GCP dashboard, CLIs, and APIs
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.4 GCP 仪表板、CLIs 和 API
- en: Look at the Google Kubernetes Engine dashboard in figure 1.5 to create new Kubernetes
    clusters. As soon as you click Create a New Cluster, you are presented with a
    form asking you to fill in a few required fields, such as the name of the cluster.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 查看图1.5中的Google Kubernetes Engine仪表板以创建新的Kubernetes集群。一旦你点击创建新集群，就会弹出一个表单，要求你填写一些必填字段，例如集群的名称。
- en: '![](../../OEBPS/Images/01-05.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-05.png)'
- en: Figure 1.5 Google Kubernetes Engine creation form
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5 Google Kubernetes Engine创建表单
- en: Cloud providers do a fantastic job at having sensible defaults to avoid asking
    you to fill in 200 parameters before creating the needed resource. Once you have
    filled in all the required fields, the form offers a quick way to start the provisioning
    process by just clicking the Create button down the bottom. It is pretty interesting
    to see that, in this case, the Google Cloud Platform offers you an estimated cost
    per hour of the resource that you have configured. This highlights the difference
    between providing features for technical teams and providing a full service, covering
    the needs of technical teams and clarifying how these decisions can affect the
    business as a whole. You can start tweaking parameters to see how this cost changes
    (usually, it goes up).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 云服务提供商在提供合理的默认值方面做得非常出色，以避免在创建所需资源之前让你填写200个参数。一旦你填写了所有必填字段，表单就提供了一个快速启动配置过程的方法，只需点击底部的创建按钮即可。在这种情况下，Google
    Cloud Platform为你提供了你配置的资源每小时的预估成本，这突出了为技术团队提供功能和提供全面服务之间的差异，全面服务涵盖了技术团队的需求，并阐明了这些决策如何影响整个业务。你可以开始调整参数以查看成本如何变化（通常，它会增加）。
- en: '![](../../OEBPS/Images/01-06.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-06.png)'
- en: Figure 1.6 Create via a dashboard, REST, or using a Command Line Interface (CLI)
    tool
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 通过仪表板、REST或使用命令行界面（CLI）工具创建
- en: As shown in figure 1.6, right beside the Create button, you can see the REST
    option. The cloud provider here helps you by crafting the REST request to their
    APIs needed to create the resource you can configure using the forms. This is
    quite handy if you don’t want to spend hours looking at their API documents to
    find the shape of the payload and properties needed to create the request; see
    figure 1.7.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如图1.6所示，在创建按钮旁边，你可以看到REST选项。这里的云服务提供商通过构建REST请求到它们的API，帮助你创建可以配置的资源，使用表单即可完成。如果你不想花费数小时查看它们的API文档来找到负载的形状和创建请求所需的属性，这将非常方便；参见图1.7。
- en: '![](../../OEBPS/Images/01-07.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-07.png)'
- en: Figure 1.7 Create via Kubernetes cluster using a REST request
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7 使用REST请求通过Kubernetes集群创建
- en: Finally, the CLI command option, using the cloud provider CLI, in this case,
    `gcloud`, is once again crafted to contain all the parameters the CLI command
    needs based on what you have configured in the form, as shown in figure 1.8.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，CLI命令选项，使用云服务提供商的CLI，在本例中是`gcloud`，再次被构建以包含CLI命令所需的全部参数，这些参数基于你在表单中配置的内容，如图1.8所示。
- en: '![](../../OEBPS/Images/01-08.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-08.png)'
- en: Figure 1.8 Create via Kubernetes cluster using the `gcloud` CLI
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8 使用`gcloud` CLI通过Kubernetes集群创建
- en: Notice the horizontal scroll in figure 1.8; this command can become extremely
    complex. The Google Cloud Platform’s user experience team has done a wonderful
    job simplifying how teams can set all these parameters by relying on sensible
    defaults. There are no differences between these approaches regarding the expected
    behavior, but you need to consider that when you use the cloud provider’s dashboard,
    your account credentials are being used from your current session. If you are
    crafting a request or using the CLI from outside the cloud provider’s network,
    you must first authenticate with the cloud provider before issuing the request
    or executing the command to create the resource(s). It is essential to notice
    that these interactions will differ from cloud provider to cloud provider. You
    cannot expect the commands to be similar in AWS or Azure, the dashboard interactions,
    or how the security mechanism works to authenticate the CLIs or REST requests.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 注意图 1.8 中的水平滚动；这个命令可以变得极其复杂。Google Cloud Platform的用户体验团队已经做了出色的工作，通过依靠合理的默认值来简化团队设置所有这些参数的方式。在这些方法之间，预期的行为没有差异，但您需要考虑的是，当您使用云服务提供商的仪表板时，您的账户凭证正在当前会话中使用。如果您在云服务提供商的网络之外构建请求或使用CLI，您必须在发出请求或执行创建资源（s）的命令之前先与云服务提供商进行身份验证。重要的是要注意，这些交互将因云服务提供商而异。您不能期望AWS或Azure中的命令、仪表板交互或安全机制如何验证CLI或REST请求的方式相似。
- en: 1.1.5 Why do cloud providers work?
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.5 为什么云服务提供商能工作？
- en: 'While one can argue that dashboards, CLIs, APIs, and SDKs are the primary artifacts
    we will consume from cloud providers, but the big question is: how will we combine
    these tools to deliver software? Suppose you analyze why organizations worldwide
    trust AWS, Google Cloud Platform, and Microsoft Azure. You will likely find that
    by adopting an API-first approach and offering dashboards, CLIs, SDKs, and a myriad
    of services, these platforms provide teams with three main features that define
    platforms today (figure 1.9):'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然可以争论仪表板、CLI、API和SDK是我们将从云服务提供商那里消费的主要工件，但最大的问题是：我们将如何结合这些工具来交付软件？假设您分析为什么全球的组织信任AWS、Google
    Cloud Platform和Microsoft Azure。您可能会发现，通过采用API优先的方法并提供仪表板、CLI、SDK和众多服务，这些平台为团队提供了三个主要特性，这些特性定义了当今的平台（图
    1.9）：
- en: '*APIs (contracts):* No matter which tools you use, the platform must expose
    a set of APIs enabling teams to consume or provision the resources needed to do
    their work. These APIs are the responsibility of the platform engineering teams
    to maintain and evolve'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*APIs (合约):* 无论您使用哪种工具，平台都必须公开一组API，使团队能够消费或配置他们完成工作所需的资源。这些API是平台工程团队负责维护和发展的责任。'
- en: '*Golden paths to production:* The platform codifies and automates workflows
    required by teams to get their changes into production environments where live
    customers/users can access them.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*黄金路径到生产环境:* 平台将团队将更改推送到生产环境所需的流程编码和自动化，这些生产环境允许真实客户/用户访问。'
- en: '*Visibility:* At all times, by looking at the cloud provider dashboard, the
    organization can monitor which resources are being used, how much each service
    costs, deal with incidents, and have a complete picture of how the organization
    delivers software.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可见性:* 在任何时候，通过查看云服务提供商的仪表板，组织可以监控正在使用的资源，每个服务的成本，处理事件，并全面了解组织如何交付软件。'
- en: '![](../../OEBPS/Images/01-09.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-09.png)'
- en: Figure 1.9 Cloud provider platforms’ advantages
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.9 云服务提供商平台的优势
- en: These key features are provided using a competitive pay-as-you-go model that
    heavily relies on demand (traffic), at a global scale (not for all services),
    allowing the organization to externalize all the operation and infrastructure
    costs.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这些关键特性是通过一种具有竞争力的按需付费模式提供的，该模式高度依赖需求（流量），在全球范围内（并非所有服务），允许组织将所有运营和基础设施成本外部化。
- en: While cloud providers are going higher and higher up the stack (providing high-level
    services, not just provisioning hardware and application infrastructure such as
    databases), your teams still need to learn and glue these services together to
    solve their business challenges.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 当云服务提供商不断向更高层次发展（提供高级服务，而不仅仅是提供硬件和应用基础设施，如数据库），您的团队仍然需要学习和整合这些服务来解决他们的业务挑战。
- en: This is where Kubernetes and the CNCF landscape (Cloud-Native Computing Foundation,
    [https://www.cncf.io/](https://www.cncf.io/)) become key areas to explore for
    learning how to build platforms that are cloud-provider agnostic and allow us
    to pick and choose from a big pool of vibrant projects. Let’s move on to that
    next.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是为什么Kubernetes和CNCF景观（云原生计算基金会，[https://www.cncf.io/](https://www.cncf.io/))成为探索如何构建云服务提供商无关的平台的关键领域，这些平台允许我们从众多充满活力的项目中挑选和选择。让我们继续探讨下一个话题。
- en: 1.2 Platforms built on top of Kubernetes
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2 基于Kubernetes构建的平台
- en: We have briefly discussed what platforms are and how cloud providers are driving
    the way forward to define what these platforms can do for organizations and development
    teams in charge of delivering software. But how does this map to Kubernetes? Isn’t
    Kubernetes a platform?
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我们简要讨论了平台是什么以及云服务提供商如何推动前进，以定义这些平台可以为负责交付软件的组织和开发团队做什么。但这与Kubernetes如何对应？Kubernetes不是一个平台吗？
- en: Kubernetes was designed to be a declarative system for our cloud-native applications.
    Kubernetes defines a set of building blocks that allows us to run and deploy our
    workloads. Nowadays, every major cloud provider offers Kubernetes-managed services,
    which enables us with a standardized way of packaging (containers) and deploying
    workloads across cloud providers. Because Kubernetes comes with its tools and
    ecosystem (the CNCF landscape, [https://landscape.cncf.io/](https://landscape.cncf.io/)),
    you can create cloud-agnostic workflows to build, run, and monitor your applications.
    But learning Kubernetes is just the starting point, because the building blocks
    provided by Kubernetes are very low level and designed to be composed to build
    tools and systems that solve more concrete scenarios. Combining these low-level
    building blocks provided by Kubernetes to build more complex tools to solve more
    specific challenges is a natural evolutionary step.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes被设计成我们云原生应用的声明式系统。Kubernetes定义了一系列构建块，使我们能够运行和部署我们的工作负载。如今，每个主要的云服务提供商都提供Kubernetes管理的服务，这使我们能够以标准化的方式（容器）打包和部署工作负载到云服务提供商。因为Kubernetes自带工具和生态系统（CNCF景观，[https://landscape.cncf.io/](https://landscape.cncf.io/))），你可以创建云无关的工作流程来构建、运行和监控你的应用程序。但学习Kubernetes只是起点，因为Kubernetes提供的构建块非常底层，旨在组合构建工具和系统，以解决更具体的场景。将Kubernetes提供的这些底层构建块结合起来，构建更复杂的工具来解决更具体的问题，是一个自然的进化步骤。
- en: While Kubernetes provides us with APIs (the Kubernetes APIs), a CLI (kubectl),
    and a dashboard (Kubernetes Dashboard, [https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/](https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/)),
    Kubernetes is not a platform. Kubernetes is a meta-platform or a platform to build
    platforms, because it provides all the building blocks you need to build concrete
    platforms that will solve domain-specific challenges.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然Kubernetes为我们提供了API（Kubernetes API）、CLI（kubectl）和仪表板（Kubernetes仪表板，[https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/](https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/))），但Kubernetes不是一个平台。Kubernetes是一个元平台或构建平台的平台，因为它提供了构建具体平台所需的所有构建块，这些平台将解决特定领域的挑战。
- en: Figure 1.10 shows how Kubernetes tools and components map to what we have discussed
    about platforms and cloud providers.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.10展示了Kubernetes工具和组件如何映射到我们讨论的平台和云服务提供商。
- en: '![](../../OEBPS/Images/01-10.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/01-10.png)'
- en: Figure 1.10 Kubernetes offer us a CLI, SDKs and dashboards, is it a platform?
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.10 Kubernetes为我们提供了CLI、SDK和仪表板，它是平台吗？
- en: Kubernetes can be extended, and that’s why this book will look into specific
    projects using the Kubernetes APIs, tools, or internal mechanisms to solve generic
    challenges like continuous integration, continuous delivery, provisioning cloud
    resources, monitoring and observability, and developer experience, among others.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes可以扩展，这也是为什么这本书将探讨使用Kubernetes API、工具或内部机制来解决通用挑战（如持续集成、持续交付、云资源配置、监控和可观察性、开发者体验等）的具体项目。
- en: 1.2.1 The Kubernetes adoption journey
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.1 Kubernetes采用之旅
- en: It is fundamental that, no matter which tools platform teams choose, we abstract
    all the complexity and all the glue code we write to make these tools work together
    from the teams consuming these tools. Remember that application development teams,
    testing teams, and operations teams, among others, have different priorities and
    concerns. As part of the Kubernetes adoption journey, we must be we must be aware
    that not all the teams consuming these tools to be experts on Kubernetes.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，平台团队选择哪些工具，我们都必须抽象出所有复杂性以及我们编写的粘合代码，以便使这些工具协同工作。请记住，应用程序开发团队、测试团队和运维团队等，都有不同的优先级和关注点。作为
    Kubernetes 采用之旅的一部分，我们必须意识到，并非所有使用这些工具的团队都是 Kubernetes 的专家。
- en: Extending Kubernetes with your custom extensions is one way to make Kubernetes
    work for your organization-specific challenges. Remember that no matter which
    tools you write or install in your Kubernetes clusters, the operations teams will
    need to run them in your production environments and keep them running at scale.
    Each new tool or extension you write will require training the consumer teams
    to understand how these tools work and for which scenarios they were designed.
    It is quite easy to end up in a situation where you have chosen 10 different tools
    that need to be integrated, and glue code needs to be written. Platform teams
    always evaluate the trade-offs between writing glue code, rewriting a more tailored
    solution for their use case, or extending existing tools. I strongly recommend
    you get familiar with the tools in the CNCF landscape ([https://landscape.cncf.io](https://landscape.cncf.io))
    to avoid going in a direction where every tool you use is custom-made for your
    organization, meaning that you will need to maintain internally all these tools
    in the long run.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 使用您自定义的扩展来扩展 Kubernetes 是使其适应您组织特定挑战的一种方法。请记住，无论您在您的 Kubernetes 集群中编写或安装哪些工具，运维团队都需要在您的生产环境中运行它们，并保持其大规模运行。您编写的每个新工具或扩展都将需要培训消费者团队了解这些工具的工作原理以及它们是为哪些场景设计的。很容易陷入这样的情况：您选择了10个不同的工具需要集成，并且需要编写粘合代码。平台团队通常会评估编写粘合代码、为他们的用例重写更定制化的解决方案或扩展现有工具之间的权衡。我强烈建议您熟悉
    CNCF 生态系统中的工具([https://landscape.cncf.io](https://landscape.cncf.io))，以避免走向每个工具都是为您的组织量身定制的方向，这意味着您最终需要长期内部维护所有这些工具。
- en: Abstracting away complexity is a key part of building platforms. A clear contract
    with your teams specifying what the platform can do for them is crucial to successful
    platform engineering initiatives. These contracts are exposed as APIs that teams
    can interact with programmatically, using a dashboard, or via automation.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 抽象复杂性是构建平台的关键部分。与您的团队明确说明平台能为他们做什么的清晰合同对于成功的平台工程举措至关重要。这些合同作为 API 公开，团队可以通过编程方式、使用仪表板或通过自动化与之交互。
- en: Figure 1.11 shows a typical Kubernetes adoption journey toward platform engineering.
    The journey starts by adopting Kubernetes as the target platform to run your workloads,
    followed by researching and selecting tools, usually from the CNCF Landscape.
    When initial tools are selected, your platform starts to shape up, and some investment
    is needed to configure and make these tools work for your teams. Finally, all
    these configurations and tools selected can be hidden behind a friendlier platform
    API, allowing end users to focus on their workflows instead of trying to understand
    every detail about the tools and glue code forming the platform.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.11 展示了典型的 Kubernetes 采用之旅，旨在实现平台工程。旅程从采用 Kubernetes 作为运行工作负载的目标平台开始，然后研究和选择工具，通常来自
    CNCF 生态系统。当初始工具被选中时，您的平台开始成形，并且需要一些投资来配置这些工具，并使它们为您的团队工作。最后，所有这些配置和选定的工具都可以隐藏在更友好的平台
    API 后面，使用户能够专注于他们的工作流程，而不是试图了解构成平台的工具和粘合代码的每个细节。
- en: '![](../../OEBPS/Images/01-11.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-11.png)'
- en: Figure 1.11 Platform journey on Kubernetes
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.11 Kubernetes 平台之旅
- en: Going through this journey, we can define platforms as how we encode the knowledge
    it takes to provide our development teams with all the workflows they need to
    be productive. The operational knowledge and the decisions on the tools used to
    implement these workflows are encapsulated behind a contract materialized as the
    platform APIs. These APIs can use the Kubernetes APIs to provide a declarative
    approach, but this is optional. Some platforms hide that the platform uses Kubernetes,
    which can also reduce the cognitive load from teams interacting with it.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在这段旅程中，我们可以将平台定义为如何编码提供给我们开发团队所需的所有工作流程所需的知识。操作知识以及关于实现这些工作流程所使用的工具的决定被封装在作为平台
    API 的合同中。这些 API 可以使用 Kubernetes API 提供声明式方法，但这不是必需的。一些平台隐藏了平台使用 Kubernetes 的信息，这也可以减少与平台交互的团队的认知负荷。
- en: While I’ve tried to cover from a very high level what a platform is, I prefer
    to delegate all the formal definitions to working groups in the cloud-native space
    that are in charge of defining and keeping terms updated. I strongly suggest you
    check the App Delivery TAG - Platform Working Group from the CNCF white paper
    on platforms ([https://tag-app-delivery.cncf.io/whitepapers/platforms/](https://tag-app-delivery.cncf.io/whitepapers/platforms/)),
    which takes on the work of trying to define what platforms are.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我已经尝试从非常高的层面来解释什么是平台，但我更倾向于将所有正式的定义委托给负责定义和更新术语的云原生空间的工作组。我强烈建议您查看 CNCF 关于平台的白皮书中的
    App Delivery TAG - 平台工作组（[https://tag-app-delivery.cncf.io/whitepapers/platforms/](https://tag-app-delivery.cncf.io/whitepapers/platforms/)），该工作组承担了尝试定义平台是什么的工作。
- en: 'Their current definition, at the time of writing this book, reads as follows:
    “A platform for cloud-native computing is an integrated collection of capabilities
    defined and presented according to the needs of the platform’s users. It is a
    cross-cutting layer that ensures a consistent experience for acquiring and integrating
    typical capabilities and services for a broad set of applications and use cases.
    A good platform provides consistent user experiences for using and managing its
    capabilities and services, such as web portals, project templates, and self-service
    APIs.”'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 他们目前的定义，在撰写本书时，如下所示：“云原生计算平台是一组集成能力，这些能力是根据平台用户的需要定义和展示的。它是一个横切层，确保为广泛的应用程序和用例获取和集成典型能力和服务的持续体验。一个好的平台为使用和管理其能力和服务提供一致的用户体验，例如网络门户、项目模板和自助服务
    API。”
- en: In this book, we will embark on this journey of building an example platform
    by looking at the available cloud-native tools to see how they can provide different
    platform capabilities. But where do we find these tools? Do these tools work together?
    How do we choose between different alternatives? Let’s take a quick look at the
    CNCF Landscape.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们将通过查看可用的云原生工具来开始构建示例平台的旅程，看看它们如何提供不同的平台能力。但我们从哪里找到这些工具？这些工具是否可以协同工作？我们如何在不同选择之间进行选择？让我们快速看一下
    CNCF 景观。
- en: 1.2.2 The CNCF Landscape puzzle
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.2 CNCF 景观拼图
- en: Keeping up with cloud provider services is a full-time job, and each cloud provider
    hosts a yearly conference and minor events to announce what is new and shiny.
    In the Kubernetes and cloud native space, you can expect the same. The CNCF landscape
    is continuously expanding and evolving. As you can see in figure 1.12, the landscape
    is huge and very difficult to read at first sight.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 跟踪云服务提供商的服务是一项全职工作，每个云服务提供商都会举办年度会议和较小规模的活动来宣布新事物和亮点。在 Kubernetes 和云原生空间中，您也可以期待同样的情况。CNCF
    景观持续扩展和演变。正如您在图 1.12 中可以看到的，景观非常庞大，一开始看起来很难阅读。
- en: '![](../../OEBPS/Images/01-12.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-12.png)'
- en: 'Figure 1.12 The CNCF landscape (Source: https://landscape.cncf.io)'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.12 CNCF 景观（来源：https://landscape.cncf.io）
- en: A significant difference compared to cloud provider-offered services is the
    public and community-driven maturity model that each project in the CNCF must
    follow to obtain the graduated status. Each project’s maturity journey is independent
    of any cloud provider, and you, as an individual or as an organization, can influence
    where the project is going or how fast it gets there.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 与云服务提供商提供的服务相比，一个显著的不同点是 CNCF 中每个项目都必须遵循的公开和社区驱动的成熟度模型，以获得毕业状态。每个项目的成熟度之旅独立于任何云服务提供商，作为个人或组织，您都可以影响项目的发展方向或其达到该方向的速度。
- en: While cloud providers have defined the cloud’s shape, most are now involved
    in CNCF projects pushing for these open initiatives to succeed. They are working
    on tools that can be used across cloud providers, removing barriers and allowing
    innovation in the open instead of behind each cloud provider’s door. Figure 1.13
    shows how Kubernetes enabled the cloud native innovation ecosystem to flourish
    outside cloud providers. Cloud providers haven’t stopped offering new, more specialized
    services, but in the last five years, we have seen a shift toward improved collaborations
    across cloud providers and software vendors to develop new tools and innovation
    in the open.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然云服务提供商已经定义了云的形状，但现在大多数都参与了CNCF项目，推动这些开放倡议的成功。他们正在开发可以在云服务提供商之间使用的工具，消除障碍，并在开放环境中而不是在每一个云服务提供商的门后进行创新。图1.13显示了Kubernetes如何使云原生创新生态系统在云服务提供商之外繁荣发展。云服务提供商没有停止提供新的、更专业的服务，但在过去五年中，我们看到了云服务提供商和软件供应商之间合作改进的转向，以开发新的工具和开放创新。
- en: '![](../../OEBPS/Images/01-13.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-13.png)'
- en: Figure 1.13 Kubernetes enabling a multi-cloud cloud-native ecosystem
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.13 Kubernetes使多云云原生生态系统得以实现
- en: A common denominator from most CNCF-hosted projects is that they all work with
    Kubernetes, extending it and solving high-level challenges closer to development
    teams. The CNCF has reached a point where more and more tools are being created
    to simplify development tools and workflows. Interestingly, most of these tools
    don’t focus just on developers. They also enable operation teams and system integrators
    to glue projects together and define new developer experiences native to Kubernetes.
    Development teams don’t need to worry about the tooling and integrations required
    for their day-to-day workflows. The increased maturity level of the communities
    involved in the CNCF landscape and this push to simplify how development teams
    interact with all these tools gave birth to the conversations around platform
    engineering. The next section will explore these conversations, why you can’t
    buy a platform, and how we will explore this large ecosystem in the rest of this
    book.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数由CNCF托管的项目的一个共同特点是它们都使用Kubernetes，扩展其功能并解决更接近开发团队的挑战。CNCF已经达到一个阶段，越来越多的工具被创建出来以简化开发工具和工作流程。有趣的是，这些工具并不仅仅关注开发者。它们还使运维团队和系统集成商能够将项目粘合在一起，并定义原生于Kubernetes的新开发者体验。开发团队无需担心日常工作流程所需的工具和集成。CNCF生态系统中参与社区的成熟度提高以及推动简化开发团队与所有这些工具交互的方式，催生了关于平台工程的讨论。下一节将探讨这些讨论，为什么你不能购买一个平台，以及我们将在本书的其余部分如何探索这个庞大的生态系统。
- en: 1.3 Platform engineering
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.3 平台工程
- en: In the same way that cloud providers have internal teams defining which new
    services will be offered, how these services are going to scale, and which tools
    and APIs need to be exposed to their customers, it became clear that organizations
    can benefit from having their internal platform engineering teams. These teams
    help enable development teams by deciding the tool selection that makes sense
    to best solve software delivery problems and speed up the process.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 与云服务提供商拥有内部团队定义将提供哪些新服务、这些服务将如何扩展以及需要向客户公开哪些工具和API一样，很明显，组织可以从拥有自己的内部平台工程团队中受益。这些团队通过决定最佳解决软件交付问题和加快流程的工具选择，帮助使开发团队能够启用。
- en: A common trend is having a dedicated platform engineering team to define these
    APIs and make platform-wide decisions. The platform team collaborates with development
    teams, operations teams, and cloud provider experts to implement tools that meet
    the needs of the workflows application teams. Besides having a dedicated platform
    engineering team, a key cultural change promoted by the book *Team Topologies*
    ([https://teamtopologies.com/](https://teamtopologies.com/)) is to treat the platform
    itself as an internal product and your development teams as customers. This is
    not new, but it pushes the platform team to focus on these internal development
    teams’ satisfaction while using the platform’s tools.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 一个常见的趋势是拥有一个专门的平台工程团队来定义这些API并做出平台级决策。平台团队与开发团队、运维团队和云服务提供商专家合作，实施满足工作流程应用团队需求的技术。除了拥有专门的平台工程团队外，书籍《团队拓扑学》（[https://teamtopologies.com/](https://teamtopologies.com/））所倡导的关键文化变革是将平台本身视为一个内部产品，并将你的开发团队视为客户。这并不新鲜，但它促使平台团队在利用平台工具的同时，关注这些内部开发团队的满意度。
- en: Figure 1.14 shows how application development teams (App Dev Teams) can focus
    on working on new features using their preferred tools while the Platform Team
    creates Golden Paths (to production), which all the work produced by these teams
    to validate the functionality and deliver these changes to our organization customers/end
    users.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.14 展示了应用开发团队（App Dev Teams）如何专注于使用他们偏好的工具开发新功能，同时平台团队创建黄金路径（到生产），这些团队产生的所有工作都用于验证功能并将这些更改交付给我们的组织客户/最终用户。
- en: '![](../../OEBPS/Images/01-14.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.14](../../OEBPS/Images/01-14.png)'
- en: Figure 1.14 Platform teams take the work done by developers safely to production.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.14 平台团队安全地将开发者的工作带到生产中。
- en: This relationship between the platform and development teams creates synergy,
    focusing on improving the entire organization’s software delivery practices. By
    creating Golden Paths, the platform doesn’t stop on the day-to-day development
    tasks. Still, it also aims to automate how the changes made by development teams
    reach our organization’s end customers/consumers.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 平台团队与开发团队之间的关系创造了协同效应，专注于提高整个组织的软件交付实践。通过创建黄金路径，平台不仅关注日常开发任务，还旨在自动化开发团队所做的更改如何到达我们组织的最终客户/消费者。
- en: By adding visibility to the whole process, you can help the entire organization
    understand and see how teams produce new features and when those features will
    be available to our end users. This can be very valuable business decisions, marketing,
    and for planning in general.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在整个过程中增加可见性，你可以帮助整个组织理解和看到团队如何产生新功能，以及这些功能何时将可供我们的最终用户使用。这可以是非常有价值的商业决策、市场营销以及一般规划。
- en: 1.3.1 Why can’t I just buy a platform?
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.1 为什么我不能只是购买一个平台？
- en: Unfortunately, you can’t buy an off-the-shelf platform to solve all your organization’s
    needs. As we discussed, you can buy one or more cloud provider services, but your
    internal teams will need to figure out which services and how they must be combined
    to solve specific problems. The exercise of figuring out which tools and services
    fit your organization’s needs and compliance requirements and how to encapsulate
    these decisions behind interfaces that teams can consume using a self-service
    approach is usually something you can’t buy.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，你无法购买现成的平台来解决你组织的所有需求。正如我们讨论的，你可以购买一个或多个云服务提供商的服务，但你的内部团队需要弄清楚哪些服务以及如何组合它们来解决特定问题。确定哪些工具和服务符合你组织的需要和合规要求，以及如何将这些决策封装在团队可以通过自助方式使用的接口后面，通常是一件你无法购买的事情。
- en: There are tools designed with this situation in mind that try to enable platform
    teams to do less gluing by implementing a set of out-of-the-box workflows or having
    a very opinionated set of tools they support. Tools in this category that are
    also heavily using and extending Kubernetes are Red Hat OpenShift ([https://www.redhat.com/en/technologies/cloud-computing/openshift](https://www.redhat.com/en/technologies/cloud-computing/openshift))
    and VMware Tanzu ([https://tanzu.vmware.com/tanzu](https://tanzu.vmware.com/tanzu)).
    These tools are very attractive to Chief Technology Officers (CTOs) and architects
    because they cover most topics they need solutions for, such as CI/CD, operations,
    developer tooling, and frameworks. Based on my experience, while these tools are
    helpful in many scenarios, platform teams require flexibility in their chosen
    tools to fit their existing practices. At the end of the day, if you buy these
    tools, your teams will also need to spend time learning them, which is why these
    tools like Red Hat OpenShift and VMware Tanzu are sold with consulting services,
    which is another cost to factor into the equation. For medium and large organizations,
    adopting and adapting these opinionated off-the-shelf tools might require changes
    in well-defined workflows and practices that are already well-known to your teams.
    For smaller and less-mature organizations, these tools can save a lot of time
    by reducing the number of choices that teams will face when getting started with
    new initiatives, but the cost of these tools and services might be too high for
    a young organization.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些工具是针对这种情况设计的，旨在通过实施一系列开箱即用的流程或提供一套他们支持的非常具有观点的工具来减少平台团队的工作量。这类工具中，同时大量使用和扩展Kubernetes的包括Red
    Hat OpenShift ([https://www.redhat.com/en/technologies/cloud-computing/openshift](https://www.redhat.com/en/technologies/cloud-computing/openshift))
    和 VMware Tanzu ([https://tanzu.vmware.com/tanzu](https://tanzu.vmware.com/tanzu))。这些工具对首席技术官（CTO）和架构师来说非常吸引人，因为它们涵盖了他们需要解决方案的大部分主题，如CI/CD、运维、开发者工具和框架。根据我的经验，虽然这些工具有助于许多场景，但平台团队在选择工具时需要灵活性，以适应他们现有的实践。最终，如果你购买了这些工具，你的团队也需要花时间学习它们，这就是为什么像Red
    Hat OpenShift和VMware Tanzu这样的工具会附带咨询服务，这也是需要考虑在内的额外成本。对于中等和大型组织，采用和适应这些具有观点的现成工具可能需要改变已经为团队所熟知的明确的工作流程和实践。对于较小且不够成熟的组织，这些工具可以通过减少团队在启动新项目时面临的选择数量来节省大量时间，但这些工具和服务的成本可能对于一个年轻组织来说太高。
- en: Figure 1.15 shows how the journey changes depending on which tools the platform
    team chooses. These Kubernetes distributions (OpenShift, Tanzu, among others)
    can limit the number of choices the platform teams can make, but they can also
    save time and come with services such as training and consulting that your teams
    can rely on.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.15展示了平台团队选择不同工具时旅程的变化。这些Kubernetes发行版（OpenShift、Tanzu等）可以限制平台团队可以做出的选择数量，但它们也可以节省时间，并附带培训和服务等支持，你的团队可以依赖这些服务。
- en: '![](../../OEBPS/Images/01-15.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![图1.15](../../OEBPS/Images/01-15.png)'
- en: Figure 1.15 Building platforms on top of Kubernetes distributions
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.15 在Kubernetes发行版上构建平台
- en: No matter if you are already a customer of these tools, you will still be in
    charge of building a platform on top of these tools. If you have Red Hat OpenShift
    or VMware Tanzu available to your teams, I strongly encourage you to familiarize
    yourself with the tools they support and their design choices and decisions. Aligning
    with the tools you have and consulting with their architects might help you find
    shortcuts to build your layers on top of these tools.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是否已经是这些工具的客户，你仍然需要负责在这些工具之上构建平台。如果你有Red Hat OpenShift或VMware Tanzu可供你的团队使用，我强烈建议你熟悉他们支持的工具及其设计选择和决策。与你的工具保持一致并咨询其架构师可能会帮助你找到在工具之上构建层的捷径。
- en: '*A word of caution:* It is crucial to notice that these tools can be considered
    Kubernetes distributions. Distributions in the same sense as Linux distributions
    mean that I expect more and more distributions to appear, tackling different challenges
    and use cases. Tools like K0s and MicroK8s for IoT and edge cases are other examples.
    While you can adopt any of these distributions, ensure they align with your organization’s
    goals.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '*注意事项：* 注意，这些工具可以被视为Kubernetes发行版。与Linux发行版相同的发行版意味着我预计会有越来越多的发行版出现，解决不同的挑战和用例。例如，用于物联网和边缘情况的K0s和MicroK8s等工具。虽然你可以采用这些发行版中的任何一个，但请确保它们与你的组织目标一致。'
- en: Because I want to keep this book as practical as possible, we will look at a
    simple application we will use to go on our journey in the next section. We will
    not build a generic platform for a generic use case. We will build an example
    platform demonstrating the concepts covered in the previous sections. Having a
    concrete example you can run, experiment with, and change should help you map
    the topics discussed to your day-to-day challenges. The application introduced
    in the next section highlights the challenges you will face while creating, building,
    and maintaining distributed applications in most business domains. Hence, the
    example platform we will build to support this application should map to the challenges
    you will face in your business domain.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我想让这本书尽可能实用，所以我们将查看一个简单的应用程序，我们将在下一节中使用它来继续我们的旅程。我们不会为通用用例构建一个通用的平台。我们将构建一个示例平台，展示上一节中涵盖的概念。拥有一个你可以运行、实验和更改的具体示例应该有助于你将讨论的主题映射到你的日常挑战中。下一节中介绍的应用程序突出了你在大多数商业领域中创建、构建和维护分布式应用程序时将面临的挑战。因此，我们将构建的示例平台应该映射到你业务领域中的挑战。
- en: 1.4 The need for a walking skeleton
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.4 需要一个行走骨架
- en: In the Kubernetes ecosystem, it is common to need to integrate at least 10 or
    more projects or frameworks to deliver a simple PoC (proof of concept). This work
    can cover topics such as building projects into containers that can run inside
    Kubernetes and routing traffic to the REST endpoints provided by each service.
    If you want to experiment with new projects to see if they fit into your ecosystem,
    build a PoC to validate your understanding of how this new project/framework works
    and how it will save you and your team time.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在Kubernetes生态系统中，通常需要集成至少10个或更多的项目或框架来交付一个简单的PoC（概念验证）。这项工作可能包括将项目构建到可以在Kubernetes内部运行的容器中，以及将流量路由到每个服务提供的REST端点。如果你想尝试新项目以查看它们是否适合你的生态系统，可以构建一个PoC来验证你对这个新项目/框架的工作原理以及它将如何为你和你的团队节省时间的理解。
- en: For this book, I have created a simple “walking skeleton.” This cloud-native
    application goes beyond being a simple PoC and allows you to explore how different
    architectural patterns can be applied. It also lets you test how different tools
    and frameworks can be integrated without changing your projects for experimentation.
    I’ve preferred the term “walking skeleton” instead of “proof of concept” or “demo
    application”, as the term walking skeleton reflects more closely the intention
    of the application introduced in this section.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这本书，我创建了一个简单的“行走骨架”。这个云原生应用不仅仅是一个简单的PoC（Proof of Concept），它还允许你探索如何应用不同的架构模式。它还让你测试如何将不同的工具和框架集成，而无需为实验改变你的项目。我更喜欢使用“行走骨架”这个术语，而不是“概念验证”或“演示应用”，因为“行走骨架”这个术语更接近于本节中引入的应用程序的意图。
- en: The primary purpose of this walking skeleton is to highlight how to solve very
    specific challenges from an architectural point of view, the requirements that
    your applications will need, and the delivery practices’ angle. You should be
    able to map how these challenges are solved in the sample cloud-native application
    to your specific domain. Challenges will not always be the same, but I want to
    highlight the principles behind each proposed solution and the approach taken
    to guide your decisions.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这个行走骨架的主要目的是突出从架构角度解决非常具体的挑战，你的应用程序将需要的需求，以及交付实践的角度。你应该能够将样本云原生应用程序中解决这些挑战的方式映射到你的特定领域。挑战可能不会总是相同，但我希望突出每个建议解决方案背后的原则以及引导你决策的方法。
- en: With this walking skeleton, you can also figure out the minimum viable product
    you need and deploy it quickly to a production environment where you can improve
    it. By taking the walking skeleton to a production environment, you can gain valuable
    insights into what you will need for other services and from an infrastructure
    perspective. It can also help your teams understand what it takes to work with
    these projects and how and where things can go wrong.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这个行走骨架，你还可以确定你需要的最小可行产品，并快速将其部署到生产环境中，在那里你可以对其进行改进。通过将行走骨架带入生产环境，你可以获得关于你需要为其他服务以及从基础设施角度所需的有价值见解。它还可以帮助你的团队了解与这些项目合作需要什么，以及事情可能出错的地方和方式。
- en: The technology stack used to build the walking skeleton is unimportant. It is
    more important to understand how the pieces fit together and what tools and practices
    can enable each team behind a service (or a set of services) to evolve safely
    and efficiently.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 构建步行骨架所使用的技术栈并不重要。更重要的是理解各个部分是如何组合在一起的，以及哪些工具和实践可以使得每个服务（或一组服务）背后的团队能够安全且高效地演进。
- en: 1.4.1 Building a Conference application
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.1 构建会议应用
- en: Throughout this book, you will be working with a Conference application. This
    Conference application can be deployed in different environments to serve different
    events. This application relies on containers, Kubernetes, and tools that will
    work across any major cloud providers and on-prem Kubernetes installations.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的整个过程中，你将使用一个会议应用。这个会议应用可以部署在不同的环境中，以服务于不同的活动。此应用依赖于容器、Kubernetes 以及将在任何主要云提供商和本地
    Kubernetes 安装上工作的工具。
- en: Figure 1.16 shows what the application’s main page looks like.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.16 展示了应用主页面看起来是什么样子。
- en: '![](../../OEBPS/Images/01-16.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/01-16.png)'
- en: Figure 1.16 Conference application home page
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.16 会议应用主页
- en: The Conference application allows users to manage conference events, and it
    provides a basic landing page, an Agenda page where all the approved talks will
    be listed, and a Call for Proposals form where potential speakers can submit their
    talk proposals. The application also allows conference organizers to do admin
    tasks, such as reviewing submitted proposals and approving or rejecting them (see
    figure 1.17).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 会议应用允许用户管理会议活动，并提供了一个基本着陆页、一个议程页，其中将列出所有批准的演讲，以及一个提案征集表单，潜在演讲者可以在此提交他们的演讲提案。应用还允许会议组织者执行管理任务，例如审查提交的提案以及批准或拒绝它们（见图
    1.17）。
- en: '![](../../OEBPS/Images/01-17.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/01-17.png)'
- en: Figure 1.17 Conference application Back Office page
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.17 会议应用后台页面
- en: This application is composed of a set of services that have different responsibilities.
    Figure 1.18 shows the main components of the application that you control—in other
    words, the services that you and your team will be changing and delivering.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 此应用由一组具有不同职责的服务组成。图 1.18 展示了你所控制的应用的主要组件——换句话说，就是你和你团队将更改和交付的服务。
- en: '![](../../OEBPS/Images/01-18.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/01-18.png)'
- en: Figure 1.18 Conference application services. The end user interacts with the
    frontend that routes requests to all the backend services.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.18 会议应用服务。最终用户与前端交互，前端将请求路由到所有后端服务。
- en: 'The team has created these services to implement a basic walking skeleton with
    functionality that demonstrates business value. Here is a brief description of
    each service:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 团队创建了这些服务来实现一个具有展示业务价值的功能的基本步行骨架。以下是每个服务的简要描述：
- en: '*Frontend:* This service is the main entry point for your users to access the
    application. For this reason, the service hosts a NextJS application (HTML, JavaScript,
    and CSS files) that the client’s browser will download. The client-side application
    interacts with a backend service that accepts the requests from the browser and
    routes each request to one or more backend services.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*前端:* 该服务是用户访问应用的主要入口点。因此，该服务托管了一个 NextJS 应用（HTML、JavaScript 和 CSS 文件），客户端浏览器将下载这些文件。客户端应用与后端服务交互，该服务接受来自浏览器的请求并将每个请求路由到一个或多个后端服务。'
- en: '*Agenda service:* This service deals with listing all the talks that were approved
    for the conference. This service needs to be highly available during the conference
    dates, because the attendees will be hitting this service several times during
    the day to move between sessions.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*议程服务:* 该服务负责列出所有获得会议批准的演讲。在会议期间，该服务需要高度可用，因为与会者将在一天中多次访问此服务以在会议之间移动。'
- en: '*Call for Proposals (C4P):* This service contains the logic to deal with Call
    for Proposals use case (C4P for short) when the conference is being organized.
    This functionality allows potential speakers to submit talk proposals that the
    conference organizers will review and decide which ones to include in the conference
    agenda.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*提案征集 (C4P):* 该服务包含处理会议组织期间提案征集用例（简称 C4P）的逻辑。此功能允许潜在演讲者提交演讲提案，会议组织者将对其进行审查并决定哪些提案包含在会议议程中。'
- en: '*Notifications service:* This service enables the conference organizers to
    send notifications to attendees and speakers.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*通知服务:* 该服务使会议组织者能够向与会者和演讲者发送通知。'
- en: Figure 1.19 shows the Call for Proposals flow that was selected by the team
    to build the walking skeleton and validate their assumptions about how the Conference
    application will work. By implementing this use case end to end, the team can
    validate its chosen technology stack and architectural assumptions.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.19显示了团队选择的提案征集流程，用于构建行走骨架并验证他们对会议应用程序工作方式的假设。通过端到端实现此用例，团队可以验证其选择的技术堆栈和架构假设。
- en: '![](../../OEBPS/Images/01-19.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/01-19.png)'
- en: Figure 1.19 Call for Proposals use case
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.19 提案征集用例
- en: After implementing the basics of the Call for Proposals use case, the team can
    decide what use case to implement next. Do the conference organizers need to manage
    sponsors? Do the speakers need a dedicated profile page? Adding new features or
    services should be straightforward because the base building blocks are in place.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在实现提案征集用例的基本功能之后，团队可以决定接下来实现哪个用例。会议组织者是否需要管理赞助商？演讲者是否需要一个专门的个人资料页面？添加新功能或服务应该是直接的，因为基础构建块已经就位。
- en: While looking at how these use cases are implemented, you need to consider also
    how to coordinate across teams when new use cases will be implemented or when
    changes need to be introduced. To improve collaboration, you need visibility,
    and you need to understand how the application is working.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当查看这些用例的实现方式时，你还需要考虑当新的用例将被实施或需要引入变更时，如何跨团队进行协调。为了提高协作效率，你需要有可见性，并且需要了解应用程序是如何工作的。
- en: You also need to consider the operation side of this cloud-native application.
    You can imagine there will be a period when the application will open the Call
    for Proposals request for potential speakers to submit proposals, then closer
    to the conference date, open the attendee registration page, etc.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 你还需要考虑这个云原生应用程序的运营方面。你可以想象，在一段时间内，应用程序将打开提案征集请求，供潜在演讲者提交提案，然后接近会议日期时，打开参会者注册页面等。
- en: Throughout this book, I will encourage you to experiment by adding new services
    and implementing new use cases. In chapter 2, when you deploy the application
    to a Kubernetes cluster, you will inspect how these services are configured to
    work, how the data flows between the different services, and how to scale the
    services.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在整本书中，我将鼓励你通过添加新服务和实现新用例进行实验。在第2章中，当你将应用程序部署到Kubernetes集群时，你将检查这些服务的配置方式，不同服务之间的数据流，以及如何扩展服务。
- en: By playing around with a fictional application, you are free to change each
    service’s internals, use different tools and compare results or even have different
    versions of each service to try in parallel. Each service provides all the resources
    needed to deploy these services to your environment. In chapters 3 and 4, we will
    go deeper into each service to understand how to build and deploy each service
    so teams can change the current behavior and create and deploy new releases.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用一个虚构的应用程序进行实验，你可以自由地更改每个服务的内部结构，使用不同的工具，比较结果，甚至可以并行尝试每个服务的不同版本。每个服务都提供了部署这些服务到你的环境所需的所有资源。在第3章和第4章中，我们将更深入地探讨每个服务，了解如何构建和部署每个服务，以便团队可以更改当前的行为并创建和部署新的版本。
- en: Before deploying this cloud-native conference application, it is important to
    mention some of the main differences with bundling all these functionalities in
    a single monolithic application.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在部署这个云原生会议应用程序之前，重要的是要提到与将这些功能捆绑在一个单体应用程序中的主要区别。
- en: But what about if the Conference application was created using a monolith approach?
    Let’s briefly discuss what the main differences would be.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 但如果会议应用程序是使用单体方法创建的呢？让我们简要讨论一下主要会有哪些区别。
- en: 1.4.2 Differences between a monolith and a distributed set of services
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.2 单体与分布式服务集之间的差异
- en: Understanding the differences between having a single monolithic application
    and a fully distributed set of services is critical to grasping why the increased
    complexity is worth the effort. If you are still working with monolithic applications
    that you want to split up to use a distributed approach, this section highlights
    the main differences you will encounter.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 理解单一单体应用程序与完全分布式服务集之间的区别对于理解为什么增加的复杂性是值得努力的关键。如果你仍在使用你想要拆分以采用分布式方法的单体应用程序，本节将突出你将遇到的主要区别。
- en: Figure 1.20 shows a monolithic application implementing the same use case discussed
    before, but in this scenario, different teams working on different features will
    share the same codebase. There are no explicit requirements for strong interfaces
    between internal services when developing a monolithic application. It’s optional
    to separate the logic of different functionalities in well-encapsulated modules.
    The lack of interfaces and overlap between functionality pushes the teams making
    changes on the application to have complex coordination strategies to ensure that
    features don’t conflict and that changes can be merged in the codebase.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.20显示了实现之前讨论过的相同用例的单体应用，但在这种情况下，不同团队在开发不同功能时将共享相同的代码库。在开发单体应用时，没有明确要求内部服务之间有强接口。将不同功能的逻辑分离到封装良好的模块中是可选的。接口的缺乏和功能重叠迫使对应用程序进行更改的团队拥有复杂的协调策略，以确保功能不会冲突，并且更改可以合并到代码库中。
- en: '![](../../OEBPS/Images/01-20.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图1.20](../../OEBPS/Images/01-20.png)'
- en: Figure 1.20 In a monolith application, all the logic to implement different
    use cases are bundled together. This push different teams to work on the same
    codebase and requires them to have complex coordination practices to avoid conflicting
    changes.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.20 在单体应用中，实现不同用例的所有逻辑都捆绑在一起。这促使不同团队在相同的代码库上工作，并需要他们拥有复杂的协调实践来避免冲突的更改。
- en: 'Functionally wise, they are the same and you can do the same amount of use
    cases, but the monolith application presented some drawbacks that you might be
    experiencing with your monolith applications already. The following points highlight
    the benefits of the cloud-native application that we will use in this book and
    some disadvantages associated with a parallel-universe alternative monolithic
    implementation:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 从功能上讲，它们是相同的，你可以做同样数量的用例，但单体应用已经显示出一些你可能已经在单体应用中遇到的缺点。以下要点突出了我们将在这本书中使用的云原生应用的优点以及与平行宇宙中的替代单体实现相关的某些缺点：
- en: '*Now services can evolve independently, teams are empowered to go faster, and
    there is no bottleneck at the codebase level:* In the monolithic application,
    there is a single source code repository for different teams to work on, there
    was a single continuous integration pipeline for the project which was slow, and
    teams were using feature branches that caused problems with complex merges.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*现在服务可以独立演进，团队被赋予了加快速度的权力，并且在代码库级别上没有瓶颈：* 在单体应用中，不同团队共同工作有一个单一源代码仓库，项目有一个单一的持续集成管道，这很慢，团队使用特性分支，这会导致复杂合并时出现问题。'
- en: '*Now the application can scale differently for different scenarios:* From a
    scalability perspective, each service can be scaled depending on the load level
    it experiences. With the monolith application, the operations team can only create
    new instances of the entire application if it need to scale just a single functionality.
    Fine-grained control over how different functionalities are scaled can be a significant
    differentiator for your use case, but you must do your due diligence.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*现在应用程序可以根据不同场景进行不同的扩展：* 从可扩展性的角度来看，每个服务可以根据其经历的负载级别进行扩展。在单体应用中，如果只需要扩展单个功能，运维团队只能创建整个应用程序的新实例。对如何扩展不同功能进行精细控制可以成为您用例的一个显著差异化因素，但您必须做好尽职调查。'
- en: '*The cloud-native version is much more complex, because it is a distributed
    system:* It uses the flexibility and characteristics of the cloud infrastructure
    much better, allowing the operation teams to use tools to manage this complexity
    and the day-to-day operations. Creating your in-house mechanism to operate large
    applications was much more common when building monolithic applications. In cloud-native
    environments, there are a lot of tools provided by cloud providers and open-source
    projects that can be used to operate and monitor cloud-native applications.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*云原生版本要复杂得多，因为它是一个分布式系统：* 它更好地利用了云基础设施的灵活性和特性，允许运维团队使用工具来管理这种复杂性以及日常运营。在构建单体应用时，创建内部机制来操作大型应用要普遍得多。在云原生环境中，云提供商和开源项目提供了大量工具，可用于操作和监控云原生应用。'
- en: '*Welcome polyglotism**:* Each service can be built using a different programming
    language or different frameworks. With the monolith, application developers were
    stuck in old versions of libraries, because changing or upgrading a library usually
    involved large refactoring, and the whole application needed to be tested to guarantee
    that the application will not break. In a cloud-native approach, services are
    not forced to use a single technology stack. This allowed teams to be more autonomous
    in choosing their tools, which can speed up delivery times in some situations.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*欢迎多语言：* 每个服务都可以使用不同的编程语言或不同的框架来构建。在单体应用中，应用开发者被束缚在旧版本的库中，因为更改或升级库通常涉及大量的重构，整个应用程序都需要经过测试以确保应用程序不会崩溃。在云原生方法中，服务没有被强制使用单一的技术栈。这允许团队在选择工具时更加自主，在某些情况下可以加快交付时间。'
- en: '*All or nothing with the monolith:* If the monolith application went down,
    the entire application is down, and users couldn’t access anything. With the cloud-native
    version, users can still access the application even if services are down. The
    example walking skeleton shows how to support degraded services by adopting popular
    tools. By using Kubernetes, which was designed to monitor your services and take
    action in case a service is misbehaving, the platform will try to self-heal your
    applications.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*单体应用的全有或全无：* 如果单体应用程序崩溃，整个应用程序都会崩溃，用户将无法访问任何内容。在云原生版本中，即使服务中断，用户仍然可以访问应用程序。示例中的“行走骨架”展示了如何通过采用流行的工具来支持降级服务。通过使用Kubernetes，它被设计用来监控您的服务并在服务出现异常时采取行动，平台将尝试自我修复您的应用程序。'
- en: '*Each conference event required a different version of the monolith:* When
    dealing with different events, each conference required a version of the monolith
    slightly different from the other events. This causes divergent codebases and
    duplication of the entire project. Most of the changes done for a conference were
    lost when the event was done. In the cloud-native approach, we promote reusability
    by having fine-grained services that can be swapped, avoiding duplication of the
    whole application.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*每次会议活动都需要单体应用的不同版本：* 在处理不同事件时，每次会议都需要一个与其它事件略有不同的单体应用版本。这导致了代码库的分歧和整个项目的重复。大多数为会议所做的更改在活动结束后都丢失了。在云原生方法中，我们通过拥有可以互换的细粒度服务来促进可重用性，避免了整个应用程序的重复。'
- en: While the monolith application is much more straightforward to operate and develop
    than the cloud-native application, the remainder of the book focuses on understanding
    and reducing the complexity of building a distributed application. We’ll do that
    by adopting the right tools and practices, which will unlock your teams to be
    more independent and efficient while promoting resiliency and robustness to your
    applications.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然单体应用程序在操作和开发方面比云原生应用程序简单得多，但本书的其余部分将专注于理解和减少构建分布式应用程序的复杂性。我们将通过采用正确的工具和实践来实现这一点，这将使你的团队能够更加独立和高效，同时促进应用程序的弹性和健壮性。
- en: If you are currently working with a monolith application, I hope this book helps
    you to compare different approaches and introduces you to the tools and practices
    that are required for building distributed applications.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你目前正在使用单体应用程序，我希望这本书能帮助你比较不同的方法，并介绍构建分布式应用程序所需的工具和实践。
- en: 1.4.3 Our walking skeleton and building platforms
  id: totrans-160
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.3 我们的“行走骨架”和构建平台
- en: Now that we have a simple application that our customers will be using, we can
    focus on understanding all the tools our teams will need to improve these services
    continuously. The platforms we will cover in this book are those organizations
    that will build for domain-specific purposes, not generic ones. By creating our
    walking skeleton for a specific scenario, we can mimic a platform that optimizes
    tools and workflows to improve how software gets delivered for those teams. Our
    walking skeleton is not a simple “Hello World” application, so it allows for more
    experimentation, writing more complex features, and using tools to make the application
    more robust.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有一个简单的应用程序，我们的客户将会使用，我们可以专注于理解我们的团队需要所有工具来持续改进这些服务。本书中我们将涵盖的平台是那些为特定领域目的而构建的组织，而不是通用的。通过为特定场景创建我们的“行走骨架”，我们可以模拟一个优化工具和工作流程的平台，以改善这些团队软件交付的方式。我们的“行走骨架”不是一个简单的“Hello
    World”应用程序，因此它允许进行更多实验，编写更复杂的功能，并使用工具使应用程序更加健壮。
- en: We will now embark on a cloud-native journey. First, we will look into how distributed
    applications run on top of Kubernetes, what Kubernetes provides, and its challenges.
    Right after that, we will start looking into tools that will extend the basic
    Kubernetes features to assist us in building, deploying, and running our cloud-native
    applications.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将开始一段云原生之旅。首先，我们将探讨分布式应用如何在Kubernetes上运行，Kubernetes提供了什么，以及其挑战。紧接着，我们将开始探讨扩展基本Kubernetes功能的工具，以帮助我们构建、部署和运行我们的云原生应用。
- en: Later on, in chapter 6, after evaluating some of the challenges of building
    and delivering distributed applications, we will build our *platform walking skeleton*
    that will help teams create new features to work with the existing application
    in a safe environment, where they can do their day-to-day work without conflicting
    with other teams. Once we have our platform walking skeleton, we will build and
    offer higher-level platform capabilities to enable our teams to be more productive
    and reduce their need to understand the complexity of Kubernetes and all the tools
    we will discuss in this book.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在第6章中，在评估构建和交付分布式应用的一些挑战之后，我们将构建我们的*平台原型*，这将帮助团队在安全的环境中创建新功能，与现有应用一起工作，而不会与其他团队冲突。一旦我们有了平台原型，我们将构建和提供更高级别的平台功能，以使我们的团队能够更高效地工作，并减少他们理解Kubernetes以及本书中将要讨论的所有工具的复杂性。
- en: Finally, to close the book, we will look at how to measure how good the platforms
    that we are building are. As with any software, we need to measure it to ensure
    that new tools or changes we introduce make things better and not worse.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，为了结束这本书，我们将探讨如何衡量我们所构建的平台的好坏。就像任何软件一样，我们需要对其进行衡量，以确保我们引入的新工具或更改使事情变得更好，而不是更糟。
- en: This journey will push us to make hard decisions and choices that will become
    critical for our platform engineering practices. The following list covers the
    main milestones in this journey without going into the details of the specific
    tools covered in each chapter.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这段旅程将迫使我们做出艰难的决定和选择，这些决定和选择将对我们平台工程实践至关重要。以下列表概述了这段旅程中的主要里程碑，而不涉及每个章节中涵盖的具体工具的细节。
- en: '*Chapter 2: Cloud-native application challenges:* After getting the Conference
    application up and running in a Kubernetes cluster, we will analyze the main and
    most common challenges you will face when working on and running cloud-native
    applications on top of Kubernetes. In this chapter, you will inspect the application
    from a runtime perspective and try to break it in different ways to see how it
    behaves when things go wrong.'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第二章：云原生应用挑战*：在Kubernetes集群中使会议应用运行起来后，我们将分析你在Kubernetes上开发和运行云原生应用时将面临的主要和最常见的挑战。在本章中，你将从运行时角度检查应用，并尝试以不同的方式破坏它，以了解事情出错时它的行为。'
- en: '*Chapter 3: Service pipelines: Building cloud-native applications:* Once the
    application is up and running, you and your teams will change the application’s
    services to add new features or fix bugs. This chapter covers what it takes to
    build these application services, including the latest changes using service pipelines
    to create a release of the artifacts needed to deploy these new versions into
    live environments.'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第三章：服务管道：构建云原生应用*：一旦应用运行起来，你和你的团队将更改应用的服务以添加新功能或修复错误。本章涵盖了构建这些应用服务所需的内容，包括使用服务管道创建部署这些新版本到生产环境所需的工件发布的最新更改。'
- en: '*Chapter 4: Environment pipelines: Deploying cloud-native applications:* If
    we sort out how to package and release new versions of our services, then we need
    to have a clear strategy on how to promote these new versions to different environments
    so they can be tested and validated before facing real customers. This chapter
    covers the concept of environment pipelines and a popular trend in the cloud-native
    community called GitOps to configure and deploy applications across different
    environments.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第四章：环境管道：部署云原生应用*：如果我们解决了如何打包和发布服务的新版本，那么我们需要有一个明确的策略来将这些新版本推广到不同的环境，以便在面临真实客户之前进行测试和验证。本章涵盖了环境管道的概念，以及在云原生社区中流行的GitOps趋势，用于在不同环境中配置和部署应用。'
- en: '*Chapter 5: Multi-cloud (app) infrastructure:* Your applications can’t run
    in isolation. Application services need application infrastructure components,
    such as databases, message brokers, identity services, etc., to work. This chapter
    focuses on how to provision the components that our application’s services need
    using a multi-cloud and Kubernetes-native approach.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第五章：多云（应用）基础设施：* 您的应用程序不能孤立运行。应用程序服务需要应用程序基础设施组件，如数据库、消息代理、身份服务等，才能工作。本章重点介绍如何使用多云和Kubernetes原生方法来配置我们应用程序服务所需的组件。'
- en: '*Chapter 6: Let’s build a platform on top of Kubernetes:* Once we understand
    how the application runs, how it is built and deployed, and how it connects to
    cloud infrastructure, we will focus our attention on abstracting the complexity
    introduced by all the tools that we are using from the teams making changes to
    the application. We don’t want our development teams to get distracted setting
    up cloud-provider accounts, configuring the servers where the build pipelines
    will run, or worrying about where their environment is running. Welcome to the
    platform engineering team!'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第六章：在 Kubernetes 上构建平台：* 一旦我们了解了应用程序的运行方式、构建和部署方式以及它与云基础设施的连接方式，我们将把注意力集中在从对应用程序进行更改的团队中抽象出我们使用所有工具引入的复杂性。我们不希望我们的开发团队在设置云提供商账户、配置构建管道将运行的服务器或担心他们的环境在哪里运行时分心。欢迎加入平台工程团队！'
- en: '*Chapter 7: Platform capabilities I: Shared application concerns:* How can
    we reduce friction and dependencies between application and operation teams? How
    can we decouple even further the logic of our applications from the components
    that these applications need to run? This chapter covers a set of platform capabilities
    that enable application developers to focus on writing code. The platform team
    can concentrate on deciding how to wire all the components required by the application
    and then expose simple and standardized APIs that developers can consume.'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第七章：平台功能 I：共享应用程序关注点：* 我们如何减少应用程序和运维团队之间的摩擦和依赖？我们如何进一步解耦我们应用程序的逻辑与这些应用程序需要运行的组件？本章介绍了一系列平台功能，使应用程序开发者能够专注于编写代码。平台团队可以专注于决定如何连接应用程序所需的所有组件，然后向开发者提供简单且标准化的API。'
- en: '*Chapter 8: Platform capabilities II: Enabling teams to experiment:* Now that
    we have a platform that takes care of provisioning environments for our teams
    to do their work, what else can the platform do for the application development
    teams? If you enable your teams to run more than a single version of your application’s
    services simultaneously, new features or fixes can be rolled out incrementally.
    Having room for experimentation allows the organization to find issues sooner
    and reduces each release’s associated stress. This chapter covers how to implement
    different release strategies for your cloud-native applications.'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第八章：平台功能 II：使团队能够进行实验：* 现在我们有一个平台，可以为我们团队提供工作环境，那么平台还能为应用程序开发团队做些什么呢？如果您允许您的团队同时运行多个版本的应用程序服务，新功能或修复可以逐步推出。有空间进行实验可以让组织更快地发现问题，并减少每次发布相关的压力。本章介绍如何为您的云原生应用程序实施不同的发布策略。'
- en: '*Chapter 9: Measuring your platforms:* Platforms are as good as the improvements
    they bring to the organization. We need to measure our platform performance to
    see how well it’s doing, because we should use a continuous improvement approach
    to ensure that the tools we use are helping our teams deliver faster and more
    efficiently. This chapter focuses on using the DORA metrics to understand how
    well the organization is delivering software and how platform changes can improve
    the throughput of our delivery pipelines.'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*第九章：衡量您的平台：* 平台的价值在于它为组织带来的改进。我们需要衡量平台性能，以了解其表现如何，因为我们应采用持续改进的方法来确保我们使用的工具正在帮助我们的团队更快、更有效地交付。本章重点介绍使用DORA指标来了解组织交付软件的情况以及平台变更如何提高我们的交付管道吞吐量。'
- en: Now that you know what is coming, let’s deploy our cloud-native Conference application.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经知道了即将发生的事情，让我们部署我们的云原生会议应用程序。
- en: Summary
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: (Cloud) platforms provide a set of services for teams to build their domain-specific
    applications.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: （云）平台为团队提供了一套服务，以构建他们特定的应用程序。
- en: 'Platforms usually offer three main features: APIs, dashboards, and SDKs for
    different teams to use whatever fits their workflows.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平台通常提供三个主要功能：API、仪表板和SDK，供不同团队使用，以适应他们的工作流程。
- en: Cloud platforms provide a pay-as-you-go model to consume hardware and software.
    The higher you go up the stack, the more expensive the service will be.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云平台提供按需付费的模式来消费硬件和软件。你越往上层走，服务费用就越高。
- en: Kubernetes offers the basic building blocks to build platforms on top in a way
    that we can remain independent of the underlying cloud provider and even deploy
    our platforms on-premises.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kubernetes提供了基本的构建块，以便以独立于底层云提供商的方式构建平台，甚至可以在本地部署我们的平台。
- en: The Cloud Native and Computing Foundation promotes and fosters collaborations
    between open-source projects in the cloud-native space. Keeping track of what
    is going on in these communities is a full-time job.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云原生计算基金会促进和培养云原生空间中开源项目之间的合作。跟踪这些社区中的动态是一项全职工作。
- en: Platform engineering on Kubernetes (specifically for this book) helps manage
    the complexity of choosing which tools and practices teams need to adopt to be
    more efficient at delivering software that will run on top of Kubernetes.
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Kubernetes上进行的平台工程（特别是针对本书）有助于管理选择哪些工具和实践以使团队更高效地交付将在Kubernetes上运行的软件的复杂性。
