- en: 4 Pods
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4 个 Pod
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: An introduction to pods
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pod 简介
- en: Managing multiple containers within a pod
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 pod 内管理多个容器
- en: Using volumes with pods
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Pod 与卷
- en: '*Podman* is short for *Pod Manager*. A *pod* is a concept popularized by the
    Kubernetes project; it is a group of one or more containers working together for
    a common purpose and sharing the same namespaces and cgroups (resource constraints).
    Additionally, Podman ensures that on SELinux machines, all container processes
    within a pod share the same SELinux labels. This means they can all work together
    from an SELinux point of view.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '*Podman* 是 *Pod Manager* 的简称。*pod* 是 Kubernetes 项目推广的一个概念；它是一组一个或多个容器，为了共同目的而协同工作，并共享相同的命名空间和
    cgroups（资源限制）。此外，Podman 确保在 SELinux 机器上，pod 内的所有容器进程共享相同的 SELinux 标签。这意味着它们可以从
    SELinux 角度协同工作。'
- en: 4.1 Running pods
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1 运行 pod
- en: Podman pods (see figure 4.1), just like Kubernetes Pods, always include a container
    called the *infra* container—sometimes called the *pause* container (not to be
    confused with the rootless pause container mentioned in section 5.2). The infra
    container only holds open the namespaces and cgroups from the kernel, allowing
    containers to come and go within the pod. When Podman adds a container to a pod,
    it adds the container process to the cgroups and namespaces. Notice that the infra
    container has a container monitor process, `conmon`, monitoring it. Every container
    within a pod has its own `conmon`.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Podman pod（见图 4.1），就像 Kubernetes Pods 一样，始终包含一个名为 *infra* 的容器——有时称为 *pause*
    容器（不要与第 5.2 节中提到的无根暂停容器混淆）。infra 容器仅保留内核中的命名空间和 cgroups，允许容器在 pod 内来去。当 Podman
    向 pod 添加容器时，它会将容器进程添加到 cgroups 和命名空间中。注意 infra 容器有一个容器监控进程 `conmon` 在监控它。pod 内的每个容器都有自己的
    `conmon`。
- en: 'Conmon is a lightweight C program that monitors the container until it exits,
    allowing the Podman executable to exit and reconnect to the container. Conmon
    does the following when monitoring the container:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Conmon 是一个轻量级的 C 程序，监控容器直到其退出，允许 Podman 可执行文件退出并重新连接到容器。当监控容器时，Conmon 执行以下操作：
- en: Conmon executes the OCI runtime, handing it the path to the OCI spec file as
    well as pointing to the container layer mount point in containers/storage. The
    mount point is called the rootfs.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Conmon 执行 OCI 运行时，将其指向 OCI 规范文件的路径以及指向 containers/storage 中的容器层挂载点。挂载点称为 rootfs。
- en: Conmon monitors the container until it exits and reports its exit code back.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Conmon 监控容器直到其退出，并将退出代码返回。
- en: Conmon handles when the user attaches to the container, providing a socket to
    stream the container’s `STDOUT` and `STDERR`.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当用户连接到容器时，Conmon 处理这种情况，提供一个套接字以流式传输容器的 `STDOUT` 和 `STDERR`。
- en: The `STDOUT` and `STDERR` are also logged to a file for Podman logs.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`STDOUT` 和 `STDERR` 也被记录到 Podman 日志文件中。'
- en: Note The infra container (pause container; see figure 4.1) is similar to the
    rootless pause container; its only purpose is to hold open the namespaces and
    cgroups, while containers come and go. However, each pod will have a different
    infra container.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：infra 容器（暂停容器；见图 4.1）类似于无根暂停容器；它的唯一目的是保持命名空间和 cgroups 打开，同时容器来去。然而，每个 pod
    将有一个不同的 infra 容器。
- en: '![](../../OEBPS/Images/04-01.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/04-01.png)'
- en: Figure 4.1 The Podman pod launches conmon with the infra container, which will
    hold cgroups and Linux namespaces.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.1 Podman pod 使用 infra 容器启动 conmon，该容器将保留 cgroups 和 Linux 命名空间。
- en: 'Podman pods also support init containers, as seen in figure 4.2\. These containers
    run before the primary containers in the pods are executed. An example of an init
    container is a database initialization on a volume. This would allow the primary
    container to use the database. Podman supports the following two classes of init
    containers:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Podman pod 也支持 init 容器，如图 4.2 所示。这些容器在 pod 中的主要容器执行之前运行。init 容器的一个例子是在卷上进行的数据库初始化。这将允许主要容器使用数据库。Podman
    支持以下两类 init 容器：
- en: '*Once*—Only runs the first time the pod is created'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*一次*——仅在 pod 首次创建时运行'
- en: '*Always*—Runs every time the pod is started'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*总是*——每次启动 pod 时都会运行'
- en: The primary container runs the application.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 主要容器运行应用程序。
- en: '![](../../OEBPS/Images/04-02.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/04-02.png)'
- en: Figure 4.2 Podman next launches any init containers with conmon. The init containers
    examine the infra container and join its cgroups and namespaces.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.2 Podman 接着使用 conmon 启动任何 init 容器。这些 init 容器检查 infra 容器并加入其 cgroups 和命名空间。
- en: 'Pods also support additional containers, which are often called *sidecar* containers
    (see figure 4.4). Sidecar containers often monitor the primary container, as seen
    in figure 4.3, or the environment where the primary container runs. The Kubernetes
    documentation ([https://kubernetes.io/docs/concepts/workloads/pods](https://kubernetes.io/docs/concepts/workloads/pods))
    describes pods with sidecar containers as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Pods还支持额外的容器，这些容器通常被称为*sidecar*容器（见图4.4）。Sidecar容器通常监控主容器，如图4.3所示，或者主容器运行的环境。Kubernetes文档([https://kubernetes.io/docs/concepts/workloads/pods](https://kubernetes.io/docs/concepts/workloads/pods))将带有sidecar容器的pods描述如下：
- en: '![](../../OEBPS/Images/04-03.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/04-03.png)'
- en: Figure 4.3 Podman waits until the init containers complete before launching
    the primary containers with their `conmon` into the pod.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.3 Podman在将带有`conmon`的主容器启动到pod中之前，会等待init容器完成。
- en: A Pod can encapsulate an application composed of multiple co-located containers
    that are tightly coupled and need to share resources. These co-located containers
    form a single cohesive unit of service—for example, one container serving data
    stored in a shared volume to the public, while a separate sidecar container refreshes
    or updates those files. The Pod wraps these containers, storage resources, and
    an ephemeral network identity together as a single unit.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一个Pod可以封装由多个紧密耦合且需要共享资源的容器组成的应用程序。这些紧密耦合的容器形成一个单一的服务单元——例如，一个容器向公众提供存储在共享卷中的数据，而另一个sidecar容器刷新或更新这些文件。Pod将这些容器、存储资源和短暂的网络标识符作为一个单一单元封装起来。
- en: 'If you want to dive deeper into sidecar containers, there are several good
    articles on the following website: [https://www.magalix.com/blog/the-sidecar-pattern](https://www.magalix.com/blog/the-sidecar-pattern).'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要深入了解sidecar容器，以下网站上有多篇优秀的文章：[https://www.magalix.com/blog/the-sidecar-pattern](https://www.magalix.com/blog/the-sidecar-pattern)。
- en: '![](../../OEBPS/Images/04-04.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/04-04.png)'
- en: Figure 4.4 Podman can launch additional containers called sidecar containers.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.4 Podman可以启动额外的称为sidecar容器的容器。
- en: Note While pods can support more than one sidecar container, I recommend you
    only use one. There is a real temptation for people to abuse this capability,
    especially in Kubernetes, but it can use up more resources and become unwieldy.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：虽然pods可以支持多个sidecar容器，但我建议你只使用一个。人们滥用这种能力的诱惑是真实的，尤其是在Kubernetes中，但它可能会消耗更多资源并变得难以控制。
- en: A big advantage of using pods is that you can manage them as discrete units.
    Starting a pod starts all of the containers within it, and stopping the pod stops
    all of the containers.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 使用pods的一个大优点是你可以将它们作为独立的单元进行管理。启动pod将启动其中的所有容器，停止pod将停止所有容器。
- en: 4.2 Creating a pod
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.2 创建pod
- en: In this section, you will create a pod in which you have the myimage application
    as the primary container within the pod. You will also add a second container
    to the pod, a sidecar container, which will update the web content used by your
    application to show two containers working together within a pod.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将创建一个包含myimage应用程序作为pod中主容器的pod。你还将向pod添加第二个容器，一个sidecar容器，该容器将更新应用程序使用的web内容，以显示在pod内一起工作的两个容器。
- en: 'You can create a pod named `mypod` using the `podman` `pod` `create` command,
    as demonstrated in the following command:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`podman` `pod` `create`命令创建一个名为`mypod`的pod，如下面的命令所示：
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `podman` `pod` `create` command has many of the same options as the `podman`
    `container` `create` command. When you create a container within a pod, the container
    inherits these options as its default (see figure 4.5).
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`podman`的`pod` `create`命令具有与`podman`的`container` `create`命令许多相同的选项。当你在一个pod中创建容器时，该容器会继承这些选项作为其默认设置（见图4.5）。'
- en: '![](../../OEBPS/Images/04-05.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/04-05.png)'
- en: Figure 4.5 Podman creates a network namespace and binds port `8080` within the
    container to port `8080` on the host. Podman creates the infra container with
    the /var/www/html directory from the host in the container and joins the cgroups
    and network namespace.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.5 Podman创建一个网络命名空间，并在容器中将主机的`/var/www/html`目录绑定到容器的端口`8080`。Podman在容器中创建基础设施容器，并加入cgroups和网络命名空间。
- en: 'Notice that, like the previous examples, you are binding the pod to port `-p`
    `8080:8080`:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，与前面的例子一样，你正在将pod绑定到端口`-p` `8080:8080`：
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Because the containers within the pod share the same network namespace, this
    port binding is shared by all of the containers. The kernel allows only one process
    to listen on port `8080`. Lastly, notice that the ./html directory was volume
    mounted, `--volume` `./html:/var/www/html:z`, into the pod:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 因为Pod内的容器共享相同的网络命名空间，所以这个端口绑定被所有容器共享。内核只允许一个进程监听端口`8080`。最后，请注意，./html目录被挂载到Pod中，`--volume`
    `./html:/var/www/html:z`：
- en: '[PRE2]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The `:z` parameter causes Podman to relabel the content of the directory. Podman
    will automatically volume mount this directory into every container that joins
    the pod. Containers in pods share the same SELinux label, which means they can
    share the same volumes.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '`:z`参数导致Podman重新标记目录的内容。Podman会自动将此目录挂载到加入Pod的每个容器中。Pod内的容器共享相同的SELinux标签，这意味着它们可以共享相同的卷。'
- en: 4.3 Adding a container to a pod
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.3 将容器添加到Pod
- en: 'You create a container within a pod using the `podman` `create` command (see
    figure 4.6). Add the quay.io/rhatdan/myimage container to the pod with the `--pod`
    `mypod` option:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`podman` `create`命令在Pod内创建一个容器（见图4.6）。使用`--pod` `mypod`选项将quay.io/rhatdan/myimage容器添加到Pod中：
- en: '[PRE3]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../../OEBPS/Images/04-06.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/04-06.png)'
- en: Figure 4.6 Because the pod does not have any init containers, the first `myapp`
    container is launched into the pod.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.6 因为Pod没有初始化容器，所以第一个`myapp`容器被启动到Pod中。
- en: When you add the first container to the pod, Podman reads the information associated
    with the infra container and adds the volume mount to the `myapp` container and
    then joins it to the namespaces held by the infra container. The next step is
    adding the sidecar container to the pod. The sidecar container will be updating
    the index.xhtml file in the /var/www/html volume, adding a new time stamp every
    second.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 当您将第一个容器添加到Pod时，Podman读取与基础设施容器相关联的信息，并将卷挂载添加到`myapp`容器中，然后将其加入到基础设施容器持有的命名空间中。下一步是将侧边容器添加到Pod中。侧边容器将更新/var/www/html卷中的index.xhtml文件，每秒添加一个新时间戳。
- en: 'Create a simple Bash script to update the index.xhtml used by the `myapp` container,
    called html/time.sh. You can create it in the ./html directory, so it will be
    available to processes within the pod:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个简单的Bash脚本来更新`myapp`容器使用的index.xhtml，命名为html/time.sh。您可以在./html目录中创建它，这样它就会在Pod内的进程可用：
- en: '[PRE4]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Make sure it is executable. You can do this on Linux with the `chmod` command:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 确保它是可执行的。您可以在Linux上使用`chmod`命令来完成此操作：
- en: '[PRE5]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Now create the second container (`--name` `time`), this time using a different
    image: ubi8\. Containers within pods can use totally different images, even images
    from different distributions. Recall that container images only share the host
    kernel by default:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 现在创建第二个容器（`--name` `time`），这次使用不同的镜像：ubi8。Pod内的容器可以使用完全不同的镜像，甚至是来自不同发行版的镜像。回想一下，容器镜像默认情况下只共享主机内核：
- en: '[PRE6]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Remember the concept of short names covered in chapter 2\. You can type the
    long name, registry.access.redhat.com/ubi8, but that is a lot of typing. Luckily
    for us, the short name, ubi8, already had an alias map to its long name, meaning
    you do not need to select it from the list of registries. Podman shows you where
    it found the alias for the long name in the output:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 记住第2章中提到的短名概念。您可以输入长名，registry.access.redhat.com/ubi8，但这需要很多输入。幸运的是，短名，ubi8，已经映射到其长名，这意味着您不需要从注册表列表中选择它。Podman在输出中显示了它找到长名别名的位置：
- en: '[PRE7]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'You also used the `--workdir` command option to set the default directory for
    the container to /var/www/html. When the container starts, the ./time.sh will
    run in the `workdir` and is actually /var/www/html/time.sh (see figure 4.7):'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 您还使用了`--workdir`命令选项来设置容器的默认目录为/var/www/html。当容器启动时，./time.sh将在`workdir`中运行，实际上是/var/www/html/time.sh（见图4.7）：
- en: '[PRE8]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Because this container will be run within the `mypod` pod, it will inherit the
    `-v` ./html:/var/www/html option from the pod, meaning the ./html/time.sh command
    in the host directory is available to every container within the pod.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 因为这个容器将在`mypod` Pod内运行，所以它会继承Pod的`-v` ./html:/var/www/html选项，这意味着主机目录中的./html/time.sh命令对Pod内的每个容器都是可用的。
- en: '![](../../OEBPS/Images/04-07.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../../OEBPS/Images/04-07.png)'
- en: Figure 4.7 Finally, Podman launches the sidecar container named `time`.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.7 最后，Podman启动了名为`time`的侧边容器。
- en: Podman examines the infra container, mounts the /var/www/html volume, and joins
    the namespaces when it launches the sidecar container. Now it is time to start
    the pod and see what happens.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Podman检查基础设施容器，在启动侧边容器时挂载了/var/www/html卷，并加入了命名空间。现在，是时候启动Pod并看看会发生什么了。
- en: 4.4 Starting a pod
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.4 启动pod
- en: 'You can start the pod with the `podman` `pod` `start` command:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`podman` `pod` `start`命令启动pod：
- en: '[PRE9]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Use the `podman` `ps` command to see which containers the pod started:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`podman` `ps`命令查看pod启动了哪些容器：
- en: '[PRE10]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Notice now that three containers have started. The infra container is based
    on the k8s.gcr.io/pause image, your application is based on quay.io/rhatdan/myimage:latest,
    and the update container is based on the registry.access.redhat.com/ubi8:latest
    image.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 注意现在已启动了三个容器。基础容器基于k8s.gcr.io/pause镜像，您的应用程序基于quay.io/rhatdan/myimage:latest镜像，更新容器基于registry.access.redhat.com/ubi8:latest镜像。
- en: When the ubi8 sidecar container starts, it begins modifying the index.xhtml
    via the time.sh script. Since the `myapp` container shares the volume mount, /var/www/html,
    it can see the changes in the /var/www/html/index.xhtml file. Launch your favorite
    web browser, and navigate to http://localhost:8080 to verify the application is
    working, as seen in figure 4.8.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当ubi8侧边容器启动时，它开始通过time.sh脚本来修改index.xhtml索引文件。由于`myapp`容器共享卷挂载，/var/www/html，因此它可以看到/var/www/html/index.xhtml文件中的更改。启动您喜欢的网页浏览器，导航到http://localhost:8080以验证应用程序是否正在运行，如图4.8所示。
- en: '![](../../OEBPS/Images/04-08.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/04-08.png)'
- en: Figure 4.8 The web browser communicates with `myapp` running in a pod.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.8 网页浏览器与pod中运行的`myapp`进行通信。
- en: A couple of seconds later, press the Refresh button. Notice the date changes,
    indicating the sidecar container is running and updating the data used by the
    `myapp` web server running within the primary container, as seen in figure 4.9.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 几秒钟后，按刷新按钮。注意日期变化，表明侧边容器正在运行并更新主容器内运行的`myapp`网络服务器使用的数据，如图4.9所示。
- en: '![](../../OEBPS/Images/04-09.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../../OEBPS/Images/04-09.png)'
- en: Figure 4.9 The web browser shows that the content in `myapp` has been changed
    by the second container running in the pod.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.9 网页浏览器显示`myapp`的内容已被pod中运行的第二个容器更改。
- en: 'Some notable `podman` `pod` `start` options include the following:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 一些显著的`podman` `pod` `start`选项包括以下内容：
- en: '`--all`—This tells Podman to start all pods.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--all`—这告诉Podman启动所有pod。'
- en: '`--latest`—The `-l` tells Podman to start the last pod created. (This is not
    available on Mac and Windows.)'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--latest`—`-l`告诉Podman启动最后创建的pod。（在Mac和Windows上不可用。）'
- en: Now that you have run the application within a pod, you might want to stop the
    application.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经在pod内运行了应用程序，您可能想要停止应用程序。
- en: 4.5 Stopping a pod
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.5 停止pod
- en: 'Now that you see the application ran successfully, you can stop the pod with
    the `podman` `pod` `stop` command, as follows:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您看到应用程序运行成功，您可以使用`podman` `pod` `stop`命令停止pod，如下所示：
- en: '[PRE11]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Use the `podman` `ps` command to make sure Podman stopped all the containers
    within the pod:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`podman` `ps`命令确保Podman已停止pod内的所有容器：
- en: '[PRE12]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Some notable `podman` `pod` `stop` options include the following:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 一些显著的`podman` `pod` `stop`选项包括以下内容：
- en: '`--all`—This tells Podman to stop all pods.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--all`—这告诉Podman停止所有pod。'
- en: '`--latest`—The `-l` tells Podman to stop the most recently started pod.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--latest`—`-l`告诉Podman停止最近启动的pod。'
- en: '`--timeout`—The `-t` tells Podman to set the timeout when attempting to stop
    the containers within a pod.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--timeout`—`-t`告诉Podman在尝试停止pod内的容器时设置超时。'
- en: Now that you have created, run, and stopped the pod, you can start examining
    it. First, list all the pods on your system.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经创建了、运行并停止了pod，您可以开始检查它。首先，列出您系统上的所有pod。
- en: 4.6 Listing pods
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.6 列出pod
- en: 'You can list pods with the `podman` `pod` `list` command:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`podman` `pod` `list`命令列出pod：
- en: '[PRE13]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Some notable `podman` `pod` `list` options include the following:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 一些显著的`podman` `pod` `list`选项包括以下内容：
- en: '`--ctr*`—This tells Podman to list container information within pods.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--ctr*`—这告诉Podman列出pod内的容器信息。'
- en: '`--format`—This tells Podman to change the output of pods.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--format`—这告诉Podman更改pod的输出。'
- en: Now that you are done with the demonstration, time to clean up the pods and
    containers.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经完成了演示，是时候清理pod和容器了。
- en: 4.7 Removing pods
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.7 删除pod
- en: In a chapter 8, I discuss how you can generate Kubernetes YAML files to allow
    you to launch your pod on other systems using Podman or within Kubernetes. But
    for now, you can remove a pod with the `podman` `pod` `rm` command.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在第8章中，我讨论了您如何生成Kubernetes YAML文件，以便您可以使用Podman或其他系统或Kubernetes内部启动您的pod。但到目前为止，您可以使用`podman`
    `pod` `rm`命令删除pod。
- en: 'Before you do this, list `--all` the containers on the system. Using the `--format`
    option to show only the ID, image, and pod ID, you will see three containers that
    make up your pod:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行此操作之前，列出系统上的所有容器`--all`。使用`--format`选项仅显示ID、镜像和pod ID，您将看到组成您的pod的三个容器：
- en: '[PRE14]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Now you can remove the pod with the following command:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以使用以下命令删除pod：
- en: '[PRE15]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Make sure it is gone:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 确保它已消失：
- en: '[PRE16]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Good! It looks like your pod is gone. Verify that Podman removed all of the
    containers by running the following command:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 太好了！看起来您的pod已经消失了。通过运行以下命令验证Podman是否删除了所有容器：
- en: '[PRE17]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The system is fully cleaned up.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 系统已完全清理。
- en: 'Some notable `podman` `pod` `rm` options include the following (also see table
    4.1):'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 一些显著的`podman` `pod` `rm`选项包括以下内容（也请参阅表4.1）：
- en: '`--all`—This tells Podman to remove all the pods.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--all`—这告诉Podman删除所有pod。'
- en: '`--force`—This tells Podman to first stop all running containers before attempting
    to remove them. Otherwise, Podman will only remove non-running pods.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--force`—这告诉Podman在尝试删除容器之前先停止所有正在运行的容器。否则，Podman只会删除非运行的pod。'
- en: Table 4.1 `podman` `pod` commands
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 表4.1 `podman` `pod`命令
- en: '| Command | Man page | Description |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| 命令 | 手册页 | 描述 |'
- en: '| `create` | `podman-pod-create(1)` | Create a new pod. |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| `create` | `podman-pod-create(1)` | 创建一个新的pod。 |'
- en: '| `exists` | `podman-pod-exists(1)` | Check if a pod exists. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| `exists` | `podman-pod-exists(1)` | 检查pod是否存在。 |'
- en: '| `inspect` | `podman-pod-inspect(1)` | Display detailed information on a pod.
    |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| `inspect` | `podman-pod-inspect(1)` | 显示pod的详细信息。 |'
- en: '| `kill` | `podman-pod-kill(1)` | Send a signal to the primary processes of
    the containers in the pod. |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| `kill` | `podman-pod-kill(1)` | 向pod中容器的首要进程发送信号。 |'
- en: '| `list` | `podman-pod-list(1)` | List all of the pods. |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| `list` | `podman-pod-list(1)` | 列出所有pod。 |'
- en: '| `logs` | `podman-pod-logs(1)` | Fetch logs for the pod with one or more containers.
    |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| `logs` | `podman-pod-logs(1)` | 获取包含一个或多个容器的pod的日志。 |'
- en: '| `pause` | `podman-pod-pause(1)` | Pause all the containers in a pod. |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| `pause` | `podman-pod-pause(1)` | 暂停pod中的所有容器。 |'
- en: '| `prune` | `podman-pod-prune(1)` | Remove all stopped pods and their containers.
    |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| `prune` | `podman-pod-prune(1)` | 删除所有停止的pod及其容器。 |'
- en: '| `restart` | `podman-pod-restart(1)` | Restart a pod. |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| `restart` | `podman-pod-restart(1)` | 重新启动一个pod。 |'
- en: '| `rm` | `podman-pod-rm(1)` | Remove one or more pods. |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| `rm` | `podman-pod-rm(1)` | 删除一个或多个pod。 |'
- en: '| `stats` | `podman-pod-stats(1)` | Display statistics for the containers in
    a pod. |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| `stats` | `podman-pod-stats(1)` | 显示pod中容器的统计信息。 |'
- en: '| `start` | `podman-pod-start(1)` | Start a pod. |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| `start` | `podman-pod-start(1)` | 启动一个pod。 |'
- en: '| `stop` | `podman-pod-stop(1)` | Stop a pod. |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| `stop` | `podman-pod-stop(1)` | 停止一个pod。 |'
- en: '| `top` | `podman-pod-top(1)` | Display running process in the pod. |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| `top` | `podman-pod-top(1)` | 显示pod中的运行进程。 |'
- en: '| `unpause` | `podman-pod-unpause(1)` | Unpause all the containers in a pod.
    |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| `unpause` | `podman-pod-unpause(1)` | 取消暂停pod中的所有容器。 |'
- en: Summary
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Pods are a way of grouping containers together into more complex applications,
    sharing namespaces, and sharing resource constraints.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pod是将容器组合在一起形成更复杂应用的一种方式，共享命名空间和资源限制。
- en: Pods share most of the options containers use, and when you add a container
    to a pod, it shares these options with all containers in the pod.
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pod与容器使用的多数选项相同，当您将容器添加到pod中时，它会与pod中的所有容器共享这些选项。
