- en: Appendix B. Logging and using Node.js global objects
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 B. 日志和 Node.js 全局对象的使用
- en: B.1\. Logging
  id: totrans-1
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.1\. 日志
- en: Logging helps you understand what functions and middleware are being run, shows
    you what errors your application is producing, and provides better insight into
    what’s going on in your application.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日志可以帮助你了解正在运行哪些函数和中间件，显示你的应用程序正在产生哪些错误，并为你提供更深入的了解应用程序中正在发生的事情。
- en: The `console` module is a core Node.js module and a global object, which means
    that you can access the console keyword anywhere in your application code. When
    you run `console.log()`, passing some message as a string of text, the output
    typically is printed in a terminal window or a file. For the purposes of this
    book, the `console` module offers the right logging tools for dissecting your
    application code. Aside from the logging tips in [lesson 2](../Text/kindle_split_013.html#ch02),
    a few logging commands are important to keep in mind.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '`console` 模块是 Node.js 的核心模块和全局对象，这意味着你可以在应用程序代码的任何地方访问 console 关键字。当你运行 `console.log()`，传递一些文本字符串作为消息时，输出通常会在终端窗口或文件中打印出来。为了本书的目的，`console`
    模块提供了剖析应用程序代码的正确日志工具。除了 [第 2 节](../Text/kindle_split_013.html#ch02) 中的日志提示外，还有一些日志命令需要记住。'
- en: 'The `console` module has two outputs: standard and error. Although both of
    these outputs show text in your terminal window, they behave differently in a
    browser console. The next listing shows some of the other logging functions you
    can use with `console`.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`console` 模块有两个输出：标准输出和错误输出。尽管这两个输出都在你的终端窗口中显示文本，但在浏览器控制台中它们的行为不同。下一列表展示了你可以与
    `console` 一起使用的其他日志记录函数。'
- en: Listing B.1\. Using logging functions
  id: totrans-5
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 B.1\. 使用日志函数
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '***1*** **Prints a log message to your console**'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1*** **将日志消息打印到你的控制台**'
- en: '***2*** **Prints a log message using the error output**'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2*** **使用错误输出打印日志消息**'
- en: '***3*** **Prints a log message as an alias for console.log**'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3*** **将日志消息作为 console.log 的别名打印**'
- en: '***4*** **Prints a log message as an alias for console.error**'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4*** **将日志消息作为 console.error 的别名打印**'
- en: In a Node.js application, these four functions behave similarly on the server.
    When you use these logging functions in client-side JavaScript, you’ll notice
    that your browser’s console window prints your log messages in formats that correspond
    to the message type. Warning messages have an orange background, for example,
    and error messages appear in red.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Node.js 应用程序中，这四个函数在服务器上的行为相似。当你使用这些日志函数在客户端 JavaScript 中时，你会注意到你的浏览器控制台以与消息类型相对应的格式打印你的日志消息。例如，警告消息有橙色背景，错误消息则显示为红色。
- en: Two other functions that you may find useful are `console.time` and `console.timeEnd`.
    These two functions can be used in tandem to log the time it takes between the
    beginning and end of certain operations in your code. The text within these functions
    needs to match for the timer to work. In the next listing, function `xyz` takes
    one second and then logs a message. The resulting time for this operation logs
    slightly more than one second.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能还会发现两个有用的函数：`console.time` 和 `console.timeEnd`。这两个函数可以一起使用，以记录代码中某些操作开始和结束之间所花费的时间。这些函数内的文本需要匹配，才能使计时器正常工作。在下一列表中，函数
    `xyz` 花费了一秒钟，然后记录了一条消息。这个操作的记录时间略多于一秒。
- en: Listing B.2\. Logging time of an operation
  id: totrans-13
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 B.2\. 记录操作的时间
- en: '[PRE1]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '***1*** **Starts the console timer**'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1*** **开始控制台计时器**'
- en: '***2*** **Prints the console.log message as part of the function operation**'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2*** **将 console.log 消息作为函数操作的一部分打印**'
- en: '***3*** **Records time at the end**'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3*** **记录结束时的计时**'
- en: '`console.log` will become one of your best friends in web development, as log
    notes help you find bugs. Get to know your new friend with a little practice and
    variation.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '`console.log` 将成为你在网络开发中最好的朋友之一，因为日志注释帮助你找到错误。通过一点实践和变化，了解你的新朋友。'
- en: B.2\. Global objects
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: B.2\. 全局对象
- en: 'In Node.js, global objects are accessible throughout any application. You can
    use these objects at any point in a Node.js application. These objects can contain
    information about the application or filesystem. The following global objects
    are used most often in Node.js applications:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Node.js 中，全局对象可以在任何应用程序中访问。你可以在 Node.js 应用程序的任何位置使用这些对象。这些对象可以包含有关应用程序或文件系统的信息。以下全局对象在
    Node.js 应用程序中使用得最为频繁：
- en: '`console` prints to the console or standard output wherever your application
    is running.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`console` 将输出到控制台或标准输出，无论你的应用程序在哪里运行。'
- en: '`__dirname` returns the absolute path to the directory location on your machine,
    as follows:'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`__dirname` 返回你机器上目录位置的绝对路径，如下所示：'
- en: '[PRE2]'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '`__filename` provides the absolute path to the application directory on your
    machine, as follows:'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`__filename` 提供了您机器上应用程序目录的绝对路径，如下所示：'
- en: '[PRE3]'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '`process` references the process (thread) on which your application is running.
    This object is the main source of your application’s resources and connections
    to the filesystem.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`process` 指的是应用程序运行在其上的进程（线程）。此对象是应用程序资源的主要来源，以及与文件系统的连接。'
- en: 'Some objects appear to be similar to the Node.js global objects but come from
    other libraries required into your project. These objects are available in most
    Node.js applications. As you learn to work with the following objects, their use
    cases will make more sense:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一些对象看起来与 Node.js 的全局对象相似，但它们来自您项目中引入的其他库。这些对象在大多数 Node.js 应用程序中都是可用的。随着您学习如何使用以下对象，它们的使用案例将变得更加清晰：
- en: '`module` references the current module (JavaScript file) in which you’re working
    and allows you to access other variables within that file.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`module` 指的是您正在工作的当前模块（JavaScript 文件），并允许您访问该文件中的其他变量。'
- en: '`exports` references a key/value pairing object to store a module’s functions
    or objects so they can be shared across other modules. Using this object is mostly
    the same as using `module.exports`. In the following example, `acces``sibleFunction`
    is exported for use in other modules:'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exports` 指的是一个键/值对对象，用于存储模块的函数或对象，以便它们可以在其他模块之间共享。使用此对象的方式与使用 `module.exports`
    类似。在以下示例中，`accessibleFunction` 被导出以供其他模块使用：'
- en: '[PRE4]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '`require` allows you to import other modules’ code into a current module and
    gives you access to code written outside the current working file. The `require`
    keyword is used as follows:'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`require` 允许您将其他模块的代码导入到当前模块中，并让您访问当前工作文件外的代码。`require` 关键字的使用方法如下：'
- en: '[PRE5]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/ifc01_alt.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![图片描述](../Images/ifc01_alt.jpg)'
- en: '![](../Images/ibc01_alt.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![图片描述](../Images/ibc01_alt.jpg)'
