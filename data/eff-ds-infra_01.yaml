- en: 1 Introducing data science infrastructure
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1 介绍数据科学基础设施
- en: This chapter covers
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: Why companies need data science infrastructure in the first place
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么公司首先需要数据科学基础设施
- en: Introducing the infrastructure stack for data science and machine learning
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍数据科学和机器学习的基础设施堆栈
- en: Elements of successful data science infrastructure
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 成功数据科学基础设施的要素
- en: Machine learning and artificial intelligence were born in academia in the 1950s.
    Technically, everything presented in this book has been possible to implement
    for decades, if time and cost were not a concern. However, for the past seven
    decades, nothing in this problem domain has been easy.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习和人工智能诞生于20世纪50年代的学术界。从技术上讲，如果时间成本不是问题，本书中展示的所有内容在几十年前就已经可以实施。然而，在过去七十年里，这个领域中的任何事物都不容易。
- en: As many companies have experienced, building applications powered by machine
    learning has required large teams of engineers with specialized knowledge, often
    working for years to deliver a well-tuned solution. If you look back on the history
    of computing, most society-wide shifts have happened not when impossible things
    have become possible but when possible things have become easy. Bridging the gap
    between possible and easy requires effective infrastructure, which is the topic
    of this book.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 正如许多公司所经历的，构建由机器学习驱动的应用程序需要由具有专业知识的大型工程师团队，他们通常需要数年才能交付一个调优良好的解决方案。如果你回顾计算机的历史，大多数社会性的转变并不是在不可能的事情变得可能的时候发生的，而是在可能的事情变得容易的时候发生的。在可能和容易之间架起桥梁需要有效的基础设施，这正是本书的主题。
- en: A dictionary defines infrastructure as “the basic equipment and structures (such
    as roads and bridges) that are needed for a country, region, or organization to
    function properly.” This book covers the basic stack of equipment and structures
    needed for data science applications to function properly. After reading this
    book, you will be able to set up and customize an infrastructure that helps your
    organization to develop and deliver data science applications faster and more
    easily than ever before.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 词典将基础设施定义为“一个国家、地区或组织正常运作所需的基本设备和结构（如道路和桥梁）。”本书涵盖了数据科学应用程序正常运作所需的基本设备和结构堆栈。阅读本书后，你将能够设置和定制一个基础设施，帮助你的组织比以往任何时候都更快、更容易地开发和交付数据科学应用程序。
- en: A word about terminology
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 关于术语的一些话
- en: The phrase *data science* in its modern form was coined in the early 2000s.
    As noted earlier, the terms *machine learning* and *artificial intelligence* have
    been used for decades prior to this, alongside other related terms such as *data
    minin*g or *expert systems*, which was trendy at one time.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 现代形式的“数据科学”这个短语是在21世纪初提出的。正如之前所提到的，“机器学习”和“人工智能”这些术语在此之前的几十年里就已经被使用，同时还有其他相关术语，如“数据挖掘”或“专家系统”，这些在某个时期曾经很流行。
- en: No consensus exists on what these terms mean exactly, which is a challenge.
    Professionals in these fields recognize nuanced differences between data science,
    machine learning, and artificial intelligence, but the boundaries between these
    terms are contentious and fuzzy, which must delight those who were excited about
    the term *fuzzy logic* in the 1970s and ’80s!
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这些术语的确切含义没有共识，这是一个挑战。这些领域的专业人士认识到数据科学、机器学习和人工智能之间的细微差别，但这些术语之间的界限是争议性和模糊的，这一定让那些在20世纪70年代和80年代对“模糊逻辑”这个术语感到兴奋的人感到高兴！
- en: 'This book is targeted at the union of the modern fields of data science, machine
    learning, and artificial intelligence. For brevity, we have chosen to use the
    term data science to describe the union. The choice of term is meant to be inclusive:
    we are not excluding any particular approach or set of methods.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本书针对的是数据科学、机器学习和人工智能等现代领域的结合。为了简洁起见，我们选择使用“数据科学”这个术语来描述这种结合。术语的选择旨在包容性：我们不排除任何特定的方法或方法集。
- en: For the purposes of this book, the differences between these fields are not
    significant. In a few specific cases where we want to emphasize the differences,
    we will use more specific terms, such as *deep neural networks*. To summarize,
    whenever this book uses the term, you can substitute it with your preferred term
    if it makes the text more meaningful to you.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 为了本书的目的，这些领域之间的差异并不显著。在少数几个我们想要强调差异的具体案例中，我们将使用更具体的术语，例如“深度神经网络”。总之，每当本书使用这个术语时，如果你认为替换成你更喜欢的术语会使文本更有意义，你可以这样做。
- en: 'If you ask someone in the field what the job of a data scientist is, you might
    get a quick answer: their job is to build models. Although that answer is not
    incorrect, it is a bit narrow. Increasingly, data scientists and engineers are
    expected to build end-to-end solutions to business problems, of which models are
    a small but important part. Because this book focuses on end-to-end solutions,
    we say that the data scientist’s job is to build *data science applications*.
    Hence, when you see the phrase used in this book, consider that it means “models
    and everything else required by an end-to-end solution.”'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你问一个领域内的人数据科学家的工作是什么，你可能会得到一个快速的回答：他们的工作是建立模型。尽管这个回答并不错误，但它有点狭隘。越来越多人期望数据科学家和工程师能够构建解决商业问题的端到端解决方案，其中模型只是一个小但重要的部分。因为这本书专注于端到端解决方案，所以我们说数据科学家的工作是构建*数据科学应用*。因此，当你在这本书中看到这个短语时，请考虑它意味着“模型以及端到端解决方案所需的任何其他东西。”
- en: 1.1 Why data science infrastructure?
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1 为什么需要数据科学基础设施？
- en: Many great books have been written about what data science is, why it is beneficial,
    and how to apply it in various contexts. This book focuses on questions related
    to *infrastructure*. Before we go into details on why we need infrastructure specifically
    for data science, let’s discuss briefly why any infrastructure exists at all.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 关于数据科学是什么，为什么它有益，以及如何在各种环境中应用它的许多伟大书籍已经被写出来了。这本书专注于与*基础设施*相关的问题。在我们深入探讨为什么我们需要专门为数据科学建立基础设施之前，让我们简要地讨论一下为什么任何基础设施都存在。
- en: Consider how milk has been produced and consumed for millennia prior to the
    advent of industrial-scale farming in the 20th century. Many households had a
    cow or two, producing milk for the immediate needs of the family. Sustaining a
    cow required some expertise but not much technical infrastructure. If the family
    wanted to expand their dairy operation, it would have been challenging without
    investing in larger-scale feed production, head count, and storage mechanisms.
    In short, they were able to operate a small-scale dairy business with minimal
    infrastructure, but scaling up the *volume* of production would have required
    deeper investments than just acquiring another cow.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一下在20世纪工业规模农业出现之前，牛奶是如何生产和消费的。许多家庭有一到两头奶牛，为家庭的直接需求生产牛奶。维持一头奶牛需要一些专业知识，但不需要太多的技术基础设施。如果家庭想要扩大他们的乳品业务，没有投资于更大规模的饲料生产、人员数量和储存机制，这将是一项挑战。简而言之，他们能够以最少的设施运营一个小规模的乳品业务，但扩大生产*规模*则需要比仅仅再买一头奶牛更深的投资。
- en: 'Even if the farm could have supported a larger number of cows, they would have
    needed to distribute the extra milk outside the household for sale. This presents
    a *velocity* problem: if the farmer can’t move the milk fast enough, other farmers
    may sell their produce first, saturating the market. Worse, the milk may spoil,
    which undermines the *validity* of the product.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 即使农场可以支持更多的奶牛，他们也需要将额外的牛奶分发到家庭以外的地方去销售。这提出了一个*速度*问题：如果农民不能足够快地移动牛奶，其他农民可能会先卖出他们的产品，使市场饱和。更糟糕的是，牛奶可能会变质，这会损害产品的*有效性*。
- en: Maybe a friendly neighbor is able to help with distribution and transports the
    milk to a nearby town. Our enterprising farmer may find that the local marketplace
    has an oversupply of raw milk. Instead, customers demand a *variety* of refined
    dairy products, such as yogurt, cheese, or maybe even ice cream. The farmer would
    very much like to serve the customers (and get their money), but it is clear that
    their operation isn’t set up to deal with this level of complexity.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 也许一个友好的邻居能够帮助分销并将牛奶运送到附近的城镇。我们的有事业心的农民可能会发现当地市场对原奶的供应过剩。相反，顾客需要的是*多样性*的精炼乳制品，比如酸奶、奶酪，甚至可能是冰淇淋。农民非常愿意服务顾客（并得到他们的钱），但很明显，他们的运营并没有准备好处理这种复杂程度。
- en: 'Over time, a set of interrelated systems emerged to address these needs, which
    today form the modern dairy infrastructure: industrial-scale farms are optimized
    for volume. Refrigeration, pasteurization, and logistics provide the velocity
    needed to deliver high-quality milk to dairy factories, which then churn out a
    wide variety of products that are distributed to grocery markets. Note that the
    dairy infrastructure didn’t displace all small-scale farmers: there is still a
    sizable market for specialized produce from organic, artisanal, family farms,
    but it wouldn’t be feasible to satisfy all demand in this labor-intensive manner.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 随着时间的推移，一系列相互关联的系统应运而生，以满足这些需求，这些系统如今构成了现代乳制品基础设施：工业规模的农场优化了产量。制冷、巴氏杀菌和物流提供了将高质量牛奶运送到乳制品工厂所需的速度，然后这些工厂生产出各种产品，并分发到杂货市场。请注意，乳制品基础设施并没有取代所有小规模农民：有机、手工艺家庭农场的专业产品仍有一个相当大的市场，但以这种劳动密集型的方式满足所有需求并不可行。
- en: The three Vs—volume, velocity, and variety—were originally used by Professor
    Michael Stonebraker to classify database systems for big data. We added validity
    as the fourth dimension because it is highly relevant for data science. As a thought
    exercise, consider which of these dimensions matter the most in your business
    context. In most cases, the effective data science infrastructure should strike
    a healthy balance between the four dimensions.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 三个“V”——体积、速度和多样性——最初由迈克尔·斯坦布瑞克教授用来对大数据数据库系统进行分类。我们添加了有效性作为第四个维度，因为它与数据科学高度相关。作为一个思维练习，考虑在你的业务环境中哪个维度最重要。在大多数情况下，有效的数据科学基础设施应在四个维度之间保持健康平衡。
- en: 1.1.1 The life cycle of a data science project
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1.1 数据科学项目生命周期
- en: For the past seven decades, most data science applications have been produced
    in a manner that can be described as artisanal, by having a team of senior software
    engineers to build the whole application from the ground up. As with dairy products,
    artisanal doesn’t imply “bad”—often quite the opposite. The artisanal way is often
    the right way to experiment with bleeding-edge innovations or to produce highly
    specialized applications.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的七十年里，大多数数据科学应用都是以一种可以描述为手工艺的方式产生的，即由一个高级软件工程师团队从头开始构建整个应用。与乳制品产品一样，手工艺并不意味着“不好”——通常恰恰相反。手工艺方式通常是实验前沿创新或生产高度专业化的应用的正确方式。
- en: However, as with dairy, as the industry matures and needs to support a higher
    volume, velocity, validity, and variety of products, it becomes rational to build
    many, if not most, applications on a common infrastructure. You may have a rough
    idea of how raw milk turns into cheese and what infrastructure is required to
    support industrial-scale cheese production, but what about data science? Figure
    1.1 illustrates a typical data science project.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，正如乳制品行业一样，随着行业的成熟和需要支持更高产量、速度、有效性和多样化的产品，在共同基础设施上构建许多，如果不是大多数应用，变得合理。你可能对如何将生奶转化为奶酪以及支持工业规模奶酪生产所需的基础设施有一个大致的了解，但数据科学又是如何呢？图1.1展示了典型的数据科学项目。
- en: '![CH01_F01_Tuulos](../../OEBPS/Images/CH01_F01_Tuulos.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F01_Tuulos](../../OEBPS/Images/CH01_F01_Tuulos.png)'
- en: Figure 1.1 Life cycle of a data science project
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1 数据科学项目生命周期
- en: At the center, we have a data scientist who is asked to solve a business problem,
    for instance, to create a model to estimate the lifetime value of a customer or
    to create a system that generates personalized product recommendations in an email
    newsletter.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在中心，我们有一个数据科学家，他被要求解决一个商业问题，例如，创建一个模型来估计客户的终身价值，或者创建一个在电子邮件通讯中生成个性化产品推荐的系统。
- en: 'The data scientist starts the project by coming up with hypotheses and experiments.
    They can start testing ideas using their favorite tools of the trade: Jupyter
    notebooks, specialized languages like R or Julia, or software packages like MATLAB
    or Mathematica.'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据科学家通过提出假设和实验来启动项目。他们可以使用他们最喜欢的工具来测试想法：Jupyter笔记本、专门的编程语言如R或Julia，或者软件包如MATLAB或Mathematica。
- en: When it comes to prototyping machine learning or statistical models, excellent
    open source packages are available, such as Scikit-Learn, PyTorch, TensorFlow,
    Stan, and many others. Thanks to excellent documentation and tutorials available
    online, in many cases it doesn’t take long to put together an initial prototype
    using these packages.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当涉及到原型设计机器学习或统计模型时，有出色的开源软件包可用，例如Scikit-Learn、PyTorch、TensorFlow、Stan以及许多其他软件包。得益于在线上可用的出色文档和教程，在许多情况下，使用这些软件包构建初始原型并不需要很长时间。
- en: However, every model needs data. Maybe suitable data exists in a database. Extracting
    a static sample of data for a prototype is often quite straightforward, but handling
    a larger dataset, say, tens of gigabytes, may get more complicated. At this point,
    the data scientist is not even worrying how to get the data to update automatically,
    which would require more architecture and engineering.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然而，每个模型都需要数据。可能合适的数据存在于数据库中。为原型提取静态数据样本通常相当直接，但处理更大的数据集，比如数十吉字节，可能会更复杂。在这种情况下，数据科学家甚至还没有担心如何自动更新数据，这需要更多的架构和工程。
- en: Where does the data scientist run the notebook? Maybe they can run it on a laptop,
    but how are they going to share the results? What if their colleagues want to
    test the prototype, but they don’t have a sufficiently powerful laptop? It might
    be convenient to execute the experiment on a shared server—in the cloud—where
    all collaborators can access it easily. However, someone needs to set up this
    environment first and make sure that the required tools and libraries, as well
    as data, are available on the server.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据科学家在哪里运行笔记本？也许他们可以在笔记本电脑上运行它，但他们如何分享结果？如果他们的同事想测试原型，但他们没有足够强大的笔记本电脑怎么办？在共享服务器上执行实验可能会更方便——在云端——所有合作者都可以轻松访问。然而，有人需要首先设置这个环境，并确保服务器上可用的工具、库以及数据。
- en: The data scientist was asked to solve a business problem. Very few companies
    conduct their business in notebooks or other data science tools. To prove the
    value of the prototype, it is not sufficient that the prototype exists in a notebook
    or other data science environment. It needs to be integrated into the surrounding
    business infrastructure. Maybe those systems are organized as microservices, so
    it would be beneficial if the new model could be deployed as a microservice, too.
    Doing this may require quite a bit of experience and knowledge in infrastructure
    engineering.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据科学家被要求解决一个商业问题。很少有公司在笔记本或其他数据科学工具上进行业务操作。为了证明原型的价值，仅仅原型存在于笔记本或其他数据科学环境中是不够的。它需要集成到周围的业务基础设施中。也许那些系统是以微服务组织的，因此如果新的模型可以作为微服务部署，那将是有益的。这样做可能需要相当多的基础设施工程经验和知识。
- en: 'Finally, after the prototype has been integrated to surrounding systems, stakeholders—product
    managers and business owners—evaluate the results and give feedback to the data
    scientist. Two outcomes can occur: either the stakeholders are optimistic with
    the results and shower the data scientist with further requests for improvement,
    or they deem that the scientist’s time is better spent on other, more promising
    business problems. Remarkably, both outcomes lead to the same next step: the whole
    cycle starts again from the beginning, either focusing on refining the results
    or working on a new problem.'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，原型集成到周围系统后，利益相关者——产品经理和业务所有者——评估结果并向数据科学家提供反馈。可能出现两种结果：要么利益相关者对结果持乐观态度，并要求数据科学家进一步改进，要么他们认为科学家的时间最好花在其他更有希望的业务问题上。值得注意的是，两种结果都导致相同的下一步：整个周期从开始再次开始，要么专注于改进结果，要么解决新的问题。
- en: 'Details of the life cycle will naturally vary between companies and projects:
    How you develop a predictive model for customer lifetime value differs greatly
    from building self-driving cars. However, all data science and machine learning
    projects have the following key elements in common:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 生命周期细节在公司和项目之间自然会发生变化：如何为顾客终身价值开发预测模型与构建自动驾驶汽车有很大不同。然而，所有数据科学和机器学习项目都有以下共同的关键要素：
- en: In the technical point of view, all projects involve *data and computation*
    at their foundation.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从技术角度来看，所有项目在其基础都涉及*数据和计算*。
- en: This book focuses on practical applications of these techniques instead of pure
    research, so we expect that all projects will eventually need to address the question
    of *integrating results into production systems,* which typically involves a great
    deal of software engineering.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本书侧重于这些技术的实际应用，而不是纯粹的研究，所以我们期望所有项目最终都需要解决将结果*集成到生产系统*的问题，这通常涉及大量的软件工程。
- en: Finally, from the human point of view, all projects involve *experimentation
    and iteration*, which many consider to be the central activity of data science.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，从人类的角度来看，所有项目都涉及*实验和迭代*，许多人认为这是数据科学的核心活动。
- en: Although it is certainly possible for individuals, companies, or teams to come
    up with their own bespoke processes and practices to conduct data science projects,
    a common infrastructure can help to increase the number of projects that can be
    executed simultaneously (*volume*), speed up the time to market (*velocity*),
    ensure that the results are robust (*validity*), and make it possible to support
    a larger *variety* of projects.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然个人、公司或团队当然可以提出他们自己的定制流程和实践来执行数据科学项目，但一个共同的基础设施可以帮助增加可以同时执行的项目数量（*体积*），加快上市时间（*速度*），确保结果稳健（*有效性*），并使支持更多样化的项目成为可能。
- en: Note that the scale of the project, that is, the size of the data set or model,
    is an orthogonal concern. In particular, it would be a mistake to think that only
    large-scale projects require infrastructure. Often the situation is quite the
    opposite.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，项目的规模，即数据集或模型的大小，是一个正交的关注点。特别是，认为只有大规模项目需要基础设施是错误的。通常情况正好相反。
- en: Is this book for me?
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书适合我吗？
- en: If the questions and potential solutions related to the life cycle of a data
    science project resonate with you, you should find this book useful. If you are
    a data scientist, you may have experienced some of the challenges firsthand. If
    you are an infrastructure engineer looking to design and build systems to help
    data scientists, you probably want to find scalable, robust solutions to these
    questions, so you don’t have to wake up at night when something breaks.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果与数据科学项目生命周期相关的问题和潜在解决方案与您产生共鸣，您应该会发现这本书很有用。如果您是一位数据科学家，您可能已经亲身体验了一些挑战。如果您是一位希望设计和构建系统以帮助数据科学家的基础设施工程师，您可能希望找到可扩展、稳健的解决方案来应对这些问题，这样您就不必在夜间因某些故障而醒来。
- en: We will systematically go through the stack of systems that make a modern, effective
    infrastructure for data science. The principles covered in this book are not specific
    to any particular implementation, but we will use an open source framework, *Metaflow*,
    to show how the ideas can be put into practice. Alternatively, you can customize
    your own solution by using other off-the-shelf libraries. This book will help
    you to choose the right set of tools for the job.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将系统地介绍构建现代、有效数据科学基础设施的系统。本书涵盖的原则并不特定于任何特定的实现，但我们将使用开源框架*Metaflow*来展示这些想法如何付诸实践。或者，您也可以通过使用其他现成的库来自定义自己的解决方案。这本书将帮助您选择适合工作的正确工具集。
- en: 'It is worth noting that perfectly valid, important scenarios exist where this
    book does not apply. This book, and data science infrastructure in general, is
    probably not relevant for you if you are in the following situations:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，存在一些完全有效且重要的场景，这本书并不适用。如果您处于以下情况，这本书以及一般的数据科学基础设施可能对您并不相关：
- en: You are focusing on theoretical research and not applying the methods and results
    in practical use cases.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您专注于理论研究，并没有将方法和结果应用于实际案例中。
- en: You are in the early phases (steps 1-4 as described earlier) of your first applied
    data science project, and everything is going smoothly.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您处于第一个应用数据科学项目的早期阶段（如前所述的步骤1-4），一切进展顺利。
- en: You are working on a very specific, mature application, so optimizing the volume,
    velocity, and variety of projects doesn’t concern you.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您正在从事一个非常具体、成熟的特定应用，因此优化项目的体积、速度和多样性并不重要。
- en: In these cases, you can return to this book later when more projects start coming
    up or you start hitting tough questions like the ones faced by our data scientist
    earlier. Otherwise, keep on reading! In the next section, we introduce an infrastructure
    stack that provides the overall scaffolding for everything that we will discuss
    in the later chapters.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些情况下，您可以在有更多项目开始出现或您开始遇到像我们之前的数据科学家所面临的难题时再回到这本书。否则，继续阅读！在下一节中，我们将介绍一个基础设施栈，为我们在后续章节中讨论的所有内容提供整体框架。
- en: 1.2 What is data science infrastructure?
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2 什么是数据科学基础设施？
- en: How does new infrastructure emerge? In the early days of the World Wide Web
    in the 1990s, no infrastructure existed besides primordial web browsers and servers.
    During the dot-com boom, setting up an e-commerce store was a major technical
    feat, involving teams of people, lots of custom C or C++ code, and a deep-pocketed
    venture capitalist.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 新基础设施是如何出现的？在20世纪90年代互联网的早期，除了原始的网页浏览器和服务器之外，没有其他基础设施。在互联网泡沫时期，建立一个电子商务商店是一项重大的技术壮举，涉及众多人员、大量的定制C或C++代码，以及财力雄厚的风险投资家。
- en: Over the next decade, a Cambrian explosion of web frameworks started to converge
    to common infrastructure stacks like LAMP (Linux, Apache, MySQL, PHP/ Perl/Python).
    By 2020, a number of components, such as the operating system, the web server,
    and databases, have become commodities that few people have to worry about, allowing
    most developers to focus on the user-facing application layer using polished high-level
    frameworks like ReactJS.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的十年里，一场类似于寒武纪大爆发的网络框架开始汇聚到常见的基础设施栈，如LAMP（Linux，Apache，MySQL，PHP/Perl/Python）。到2020年，操作系统、网络服务器和数据库等组件已经变成了少数人需要担心的问题，使得大多数开发者能够专注于使用如ReactJS这样的高级框架来构建面向用户的软件层。
- en: The infrastructure for data science is going through a similar evolution. Primordial
    machine learning and optimization libraries have existed for decades without much
    other infrastructure. Now, in the early 2020s, we are experiencing an explosion
    of data science libraries, frameworks, and infrastructures, often driven by commercial
    interests, similar to what happened during and immediately after the dot-com boom.
    If history is any proof, widely shared patterns will emerge from this fragmented
    landscape that will form the basis of a common, open source infrastructure stack
    for data science.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 数据科学的基础设施正在经历类似的演变。原始的机器学习和优化库已经存在了几十年，而没有太多的其他基础设施。现在，在2020年代初，我们正经历数据科学库、框架和基础设施的爆炸式增长，这通常是由商业利益驱动的，类似于在互联网泡沫期间及其之后发生的情况。如果历史可以作为证明，那么从这种碎片化的景观中将会出现广泛共享的模式，这将形成数据科学通用开源基础设施栈的基础。
- en: When building any infrastructure, it is good to remember that infrastructure
    is just a means to an end, not an end in itself. In our case, we want to build
    infrastructure to make data science projects—and data scientists who are responsible
    for them, more successful—as illustrated in figure 1.2.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建任何基础设施时，记住基础设施只是达到目的的手段，而不是目的本身是很好的。在我们的案例中，我们想要构建基础设施，以便使数据科学项目——以及负责这些项目的数据科学家——更加成功，如图1.2所示。
- en: '![CH01_F02_Tuulos](../../OEBPS/Images/CH01_F02_Tuulos.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F02_Tuulos](../../OEBPS/Images/CH01_F02_Tuulos.png)'
- en: Figure 1.2 Summarizing the key concerns of this book
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2 总结本书的关键关注点
- en: 'The goal of the stack, which is introduced in the next section, is to unlock
    the four Vs: it should enable a greater volume and variety of projects, delivered
    with a higher velocity, without compromising validity of results. However, the
    stack doesn’t deliver projects by itself—successful projects are delivered by
    data scientists whose productivity is hopefully greatly improved by the stack.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个章节中介绍的这个栈的目标是解锁四个“V”：它应该能够支持更大规模和更多样化的项目，以更高的速度交付，同时不牺牲结果的有效性。然而，栈本身并不能交付项目——成功的项目是由数据科学家交付的，他们的生产力有望通过栈得到极大的提升。
- en: 1.2.1 The infrastructure stack for data science
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.1 数据科学的基础设施栈
- en: What exactly are the elements of the infrastructure stack for data science?
    Thanks to the culture of open source and relatively free technical information
    sharing between companies in Silicon Valley and globally, we have been able to
    observe and collect common patterns in data science projects and infrastructure
    components. Though implementation details vary, the major infrastructural layers
    are relatively uniform across a large number of projects. The purpose of this
    book is to distill and describe these layers and the infrastructure stack that
    they form for data science.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 数据科学基础设施栈的元素究竟是什么？得益于开源文化和硅谷以及全球范围内公司之间相对自由的技术信息共享，我们已经能够观察和收集数据科学项目和基础设施组件中的常见模式。尽管实现细节各异，但主要的基础设施层在大量项目中相对统一。本书的目的是提炼和描述这些层以及它们为数据科学形成的基础设施栈。
- en: 'The stack presented in figure 1.3 is not the only valid way to build infrastructure
    for data science. However, it should be a well-justified one: if you start from
    first principles, it is rather hard to see how you could execute data science
    projects successfully without addressing all layers of the stack somehow. As an
    exercise, you can challenge any layer of the stack and ask what would happen if
    that layer didn’t exist.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3中展示的栈并不是构建数据科学基础设施的唯一有效方式。然而，它应该是一个有充分理由的方案：如果你从第一原理开始，很难想象在不解决栈的每一层的情况下如何成功执行数据科学项目。作为一个练习，你可以挑战栈的任何一层，并思考如果那一层不存在会发生什么。
- en: Each layer can be implemented in various ways, driven by the specific needs
    of its environment and use cases but the big picture is remarkably consistent.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 每一层都可以以各种方式实现，由其环境和用例的具体需求驱动，但整体图景却非常一致。
- en: '![CH01_F03_Tuulos](../../OEBPS/Images/CH01_F03_Tuulos.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F03_Tuulos](../../OEBPS/Images/CH01_F03_Tuulos.png)'
- en: Figure 1.3 The infrastructure stack for data science
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3 数据科学基础设施栈
- en: This infrastructure stack for data science is organized so that the most fundamental,
    generic components are at the bottom of the stack. The layers become more specific
    to data science toward the top of the stack.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数据科学基础设施栈的组织方式是，最基本、最通用的组件位于栈的底部。随着向栈顶的移动，层变得更加针对数据科学。
- en: The stack is the key mental model that binds together the chapters of this book.
    By the time you get to the last chapter, you will be able to answer questions
    like why the stack is needed, what purpose each layer serves, and how to make
    appropriate technical choices at each layer of the stack. Because you will be
    able to build infrastructure with a coherent vision and architecture, it will
    provide a seamless, delightful experience to data scientists using it. To give
    you a high-level idea what the layers mean, let’s go through them one by one from
    the bottom up.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 栈是这本书各章节之间的关键思维模型，将它们联系在一起。当你读到最后一章时，你将能够回答为什么需要栈，每一层的作用是什么，以及如何在栈的每一层做出适当的技术选择。因为你将能够以一致的观点和架构构建基础设施，这将为使用它的数据科学家提供无缝、愉悦的体验。为了给你一个关于层含义的高层次概念，让我们从底部开始逐一介绍。
- en: Data Warehouse
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 数据仓库
- en: The data warehouse stores input data used by applications. In general, it is
    beneficial to rely on a single centralized data warehouse that acts as a common
    source of truth, instead of building a separate warehouse specifically for data
    science, which can easily lead to diverging data and definitions. Chapter 7 is
    dedicated to this broad and deep topic.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 数据仓库存储应用程序使用的输入数据。一般来说，依赖一个单一集中的数据仓库作为事实的共同来源是有益的，而不是为数据科学构建一个专门的数据仓库，这很容易导致数据定义的分歧。第7章专门讨论这个广泛而深入的主题。
- en: Compute Resources
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 计算资源
- en: Raw data doesn’t do anything by itself—you need to run computations, such as
    data transformations or model training, to turn it into something more valuable.
    Compared to other fields of software engineering, data science tends to be particularly
    compute-hungry. Algorithms used by data scientists come in many shapes and sizes.
    Some need many CPU cores, some GPUs, and some a lot of memory. We need a compute
    layer that can smoothly scale to handle many different types of workloads. We
    cover these topics in chapters 4 and 5.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 原始数据本身并不能做什么——你需要运行计算，例如数据转换或模型训练，才能将其转化为更有价值的东西。与软件工程的其它领域相比，数据科学往往特别需要计算资源。数据科学家使用的算法形状和大小各异。有些需要许多CPU核心，有些需要GPU，还有些需要大量内存。我们需要一个能够平滑扩展以处理多种不同类型工作负载的计算层。我们将在第4章和第5章中介绍这些主题。
- en: Job Scheduler
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 任务调度器
- en: 'Arguably, nothing in data science is a one-time operation: models should be
    retrained regularly and predictions produced on demand. Consider a data science
    application as a continuously humming engine that pushes a never-ending stream
    of data through models. It is the job of the scheduling layer to keep the machine
    running at the desired cadence. Also, the scheduler helps to structure and execute
    applications as workflows of interrelated steps of computation. The topics of
    job scheduling and workflow orchestration are discussed in chapters 2, 3, and
    6.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 不可否认，数据科学中没有什么是一次性的操作：模型应该定期重新训练，预测应根据需求生成。将数据科学应用视为一个持续嗡嗡作响的引擎，不断将数据流通过模型。调度层的任务是保持机器以期望的节奏运行。此外，调度器有助于将应用程序结构化和执行为计算步骤的相互关联的工作流。任务调度和工作流编排的主题在第2章、第3章和第6章中讨论。
- en: Versioning
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 版本控制
- en: Experimentation and iteration are defining features of data science projects.
    As a result, applications are always subject to change. However, progress is seldom
    linear. Often, we don’t know upfront which version of the application is an improvement
    over others. To judge the versions properly, you need to run multiple versions
    side by side, as an A/B experiment. To enable rapid but disciplined development
    and experimentation, we need a robust versioning layer to keep the work organized.
    Topics related to versioning are discussed in chapters 3 and 6.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 实验和迭代是数据科学项目的定义特征。因此，应用程序总是处于变化之中。然而，进步很少是线性的。通常，我们事先不知道哪个版本的应用程序比其他版本有所改进。为了正确判断版本，你需要并行运行多个版本，作为一个A/B实验。为了实现快速但有序的开发和实验，我们需要一个强大的版本控制层来组织工作。与版本控制相关的话题在第3章和第6章中进行了讨论。
- en: Architecture
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 架构
- en: In addition to core data science work, it takes a good amount of software engineering
    to build a robust, production-ready data science application. Increasingly many
    companies find it beneficial to empower data scientists, who are not software
    engineers by training, to build these applications autonomously while supporting
    them with a robust infrastructure. The infrastructure stack must provide software
    scaffolding and guide rails for data scientists, ensuring that the code they produce
    follows architectural best practices. We introduce Metaflow, an open source framework
    that codifies many such practices, in chapter 3.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 除了核心数据科学工作之外，构建一个健壮、可投入生产的数据科学应用程序还需要大量的软件工程。越来越多的公司发现，让那些并非软件工程师出身的数据科学家自主构建这些应用程序，同时提供强大的基础设施支持，是有益的。基础设施堆栈必须为数据科学家提供软件脚手架和指导轨道，确保他们产生的代码遵循架构最佳实践。我们在第3章中介绍了Metaflow，这是一个开源框架，它规范了许多这样的实践。
- en: Model Operations
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 模型操作
- en: Data science applications don’t have inherent value—they become valuable only
    when connected to other systems, such as product UIs or decision support systems.
    Once the application is deployed, to be a critical part of a product experience
    or business operations, it is expected to stay up and deliver correct results
    under varying conditions. If and when the application fails, as all production
    systems occasionally do, systems must be in place to allow quick detection, troubleshooting,
    and fixing of errors. We can learn a lot from the best practices of traditional
    software engineering, but the changing nature of data and probabilistic models
    give data science operations a special flavor, which we discuss in chapters 6
    and 8.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 数据科学应用程序本身没有固有的价值——只有当它们连接到其他系统，如产品UI或决策支持系统时，它们才变得有价值。一旦应用程序部署，为了成为产品体验或业务运营的关键部分，它预计能够在各种条件下保持运行并输出正确的结果。如果应用程序失败，就像所有生产系统偶尔会发生的那样，必须建立系统以允许快速检测、故障排除和修复错误。我们可以从传统软件工程的最佳实践中学习很多，但数据和概率模型的变化性质给数据科学操作带来了特殊的味道，我们在第6章和第8章中讨论了这一点。
- en: Feature Engineering
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 特征工程
- en: On top of the engineering-oriented layers sit the core concerns of data science.
    First, the data scientist must discover suitable raw data, determine desirable
    subsets of it, develop transformations, and decide how to feed the resulting features
    into models. Designing pipelines like this is a major part of the data scientist’s
    daily work. We should strive to make the process as efficient as possible, both
    in the point of view of human productivity as well as computational complexity.
    Effective solutions are often quite specific to each problem domain, so our infrastructure
    should be capable of supporting various approaches to feature engineering as discussed
    in chapters 7 and 9.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在面向工程的层之上，是数据科学的核心关注点。首先，数据科学家必须发现合适的原始数据，确定其所需的子集，开发转换，并决定如何将生成的特征输入到模型中。设计这样的管道是数据科学家日常工作的主要部分。我们应该努力使这个过程尽可能高效，无论是在人类生产力的角度还是在计算复杂性的角度。有效的解决方案通常非常具体于每个问题域，因此我们的基础设施应该能够支持第7章和第9章中讨论的各种特征工程方法。
- en: Model development
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 模型开发
- en: 'Finally, at the very top of the stack is the layer of model development: the
    quest for finding and describing a mathematical model that transforms features
    into desired outputs. We expect this layer to be solidly in the domain of expertise
    of a data scientist, so the infrastructure doesn’t need to get too opinionated
    about the modeling approach. We should be able to support a wide variety of off-the-shelf
    libraries, so the scientist has the flexibility to choose the best tool for the
    job.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在堆栈的顶部是模型开发层：寻找并描述一个将特征转换为期望输出的数学模型。我们期望这一层将稳固地位于数据科学家的专业知识领域，因此基础设施不需要对建模方法有太多的偏见。我们应该能够支持广泛的现成库，以便科学家能够灵活地选择最适合工作的工具。
- en: If you are new to the field, it may come as a surprise to many that model development
    occupies only a tiny part of the end-to-end machinery that makes an effective
    data science application. Compare the model development layer to the human brain,
    which makes up only 2-3% of one’s total body weight.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你对这个领域是新手，可能会让很多人感到惊讶，模型开发只占整个端到端机器中构建有效数据科学应用的极小部分。将模型开发层与人类大脑进行比较，大脑只占一个人总体体重的2-3%。
- en: 1.2.2 Supporting the full life cycle of a data science project
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.2 支持数据科学项目的完整生命周期
- en: The goal of the infrastructure stack is to support a typical data science project
    throughout its life cycle, from its inception and initial deployment to countless
    iterations of incremental improvement. Earlier, we identified the following three
    common themes that are common to most data science projects. Figure 1.4 shows
    how the themes map to the stack.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 基础设施堆栈的目标是在数据科学项目的整个生命周期中支持典型的数据科学项目，从其构思和初始部署到无数次的增量改进迭代。之前，我们确定了以下三个在大多数数据科学项目中都常见的主题。图1.4显示了这些主题如何映射到堆栈上。
- en: '![CH01_F04_Tuulos](../../OEBPS/Images/CH01_F04_Tuulos.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F04_Tuulos](../../OEBPS/Images/CH01_F04_Tuulos.png)'
- en: Figure 1.4 Concerns of a data science project mapped to the infrastructure layers
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4 数据科学项目的关注点映射到基础设施层
- en: It is easy to see that every data science project regardless of the problem
    domain needs to deal with data and compute, so these layers form *the foundational
    infrastructure*. These layers are agnostic of what exactly gets executed.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 很容易看出，无论问题领域如何，每个数据科学项目都需要处理数据和计算，因此这些层形成了**基础架构**。这些层对具体执行的内容是中立的。
- en: 'The middle layers define *the software architecture* of an individual data
    science application: what gets executed and how—the algorithms, data pipelines,
    deployment strategies, and distribution of the results. Much about the work is
    about integrating existing software components.'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 中间层定义了单个数据科学应用的**软件架构**：执行什么以及如何执行——算法、数据处理管道、部署策略以及结果的分发。关于这项工作的很多内容都是关于整合现有的软件组件。
- en: 'The top of the stack is the realm of *data science* : defining a mathematical
    model and how to transform raw input to something that the model can process.
    In a typical data science project, these layers can evolve quickly as the data
    scientist experiments with different approaches.'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 堆栈的顶部是**数据科学**的领域：定义数学模型以及如何将原始输入转换为模型可以处理的内容。在一个典型的数据科学项目中，这些层可以随着数据科学家尝试不同的方法而快速演变。
- en: Note that there isn’t a one-to-one mapping between the layers and the themes.
    The concerns overlap. We use the stack as a blueprint for designing and building
    the infrastructure, but the user shouldn’t have to care about it. In particular,
    they shouldn’t hit the seams between the layers, but they should use the stack
    as one effective data science infrastructure.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，层与主题之间并不是一对一的映射。关注点是重叠的。我们使用堆栈作为设计和构建基础设施的蓝图，但用户不需要关心它。特别是，他们不应该遇到层之间的缝隙，而应该将堆栈作为有效的数据科学基础设施来使用。
- en: In the next chapter, we will introduce Metaflow, a framework that provides an
    example of how this can be achieved in practice. Alternatively, you can customize
    your own solution by combining frameworks that address different parts of the
    stack by following the general principles laid out in the coming chapters.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍Metaflow，这是一个框架，它提供了一个如何在实践中实现这一点的例子。或者，你可以通过遵循即将到来的章节中阐述的通用原则，结合解决堆栈不同部分的框架来自定义自己的解决方案。
- en: 1.2.3 One size doesn’t fit all
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2.3 一劳永逸的解决方案并不适用
- en: What if your company needs a highly specialized data science application—a self-driving
    car, a high-frequency trading system, or a miniaturized model that can be deployed
    on resource constrained Internet of Things devices? Surely the infrastructure
    stack would need to look very different for such applications. In many such cases,
    the answer is yes—at least initially.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果贵公司需要一款高度专业化的数据科学应用——比如自动驾驶汽车、高频交易系统，或者可以部署在资源受限的物联网设备上的微型模型？当然，这样的应用基础设施堆栈可能需要看起来非常不同。在许多这样的情况下，答案是肯定的——至少最初是这样的。
- en: 'Let’s say your company wants to deliver the most advanced self-flying drone
    to the market. The whole company is rallied around developing one data science
    application: a drone. Naturally, such a complex project involves many subsystems,
    but ultimately the end result is to produce one application, and hence, volume
    or variety are not the top concerns. Unquestionably, velocity and validity matter,
    but the company may feel that a core business concern requires a highly customized
    solution.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 假设贵公司希望将最先进的自主飞行无人机推向市场。整个公司都团结起来开发一个数据科学应用：无人机。自然，这样一个复杂的项目涉及许多子系统，但最终的目标是生产一个应用，因此，数量或多样性不是首要关注的问题。毫无疑问，速度和有效性很重要，但公司可能认为核心业务问题需要高度定制的解决方案。
- en: You can use the quadrants depicted in figure 1.5 to evaluate whether your company
    needs a highly customized solution or a generalized infrastructure.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用图1.5中所示的四象限来评估贵公司是否需要高度定制化的解决方案或通用基础设施。
- en: '![CH01_F05_Tuulos](../../OEBPS/Images/CH01_F05_Tuulos.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F05_Tuulos](../../OEBPS/Images/CH01_F05_Tuulos.png)'
- en: Figure 1.5 Types of infrastructure
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5 基础设施类型
- en: A drone company has one special application, so they may focus on building a
    single *custom application* because they don’t have the variety and the volume
    that would necessitate a generalized infrastructure. Likewise, a small startup
    pricing used cars using a predictive model can quickly put together *a basic application*
    to get the job done—again, no need to invest in infrastructure initially.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 一家无人机公司有一个特殊应用，因此他们可能专注于构建一个单一的**定制应用**，因为他们没有需要通用基础设施的多样性和数量。同样，一家小型初创公司使用预测模型来定价二手车，可以快速组装一个**基本应用**来完成工作——再次，最初不需要投资基础设施。
- en: In contrast, a large multinational bank has hundreds of data science applications
    from credit rating to risk analysis and trading, each of which can be solved using
    well-understood (albeit sophisticated—“common” doesn’t imply simple or unadvanced
    in this context) models, so a *generalized infrastructure* is well justified.
    A research institute for bioinformatics may have many highly specialized applications,
    which require very *custom infrastructure*.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，一家大型跨国银行有数百个数据科学应用，从信用评级到风险评估和交易，每个都可以使用被广泛理解（尽管复杂——“常见”在此语境中并不表示简单或不先进）的模型来解决，因此通用基础设施是合理的。一个生物信息学研究机构可能有许多高度专业化的应用，这些应用需要非常**定制化的基础设施**。
- en: Over time, companies tend to gravitate toward *generalized infrastructure*,
    no matter where they start. A drone company that initially had a custom application
    will eventually need other data science applications to support sales, marketing,
    customer service, or maybe another line of products. They may keep a specialized
    application or even custom infrastructure for their core technology while employing
    generalized infrastructure for the rest of the business.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 随着时间的推移，公司往往会倾向于选择**通用基础设施**，无论他们最初从哪里开始。一家最初有定制应用的无人机公司最终可能需要其他数据科学应用来支持销售、营销、客户服务，或者可能是另一条产品线。他们可能保留专门的应用或甚至定制的基础设施来支持他们的核心技术，同时使用通用基础设施来支持其他业务。
- en: Note When deciding on your infrastructure strategy, consider the broadest set
    of use cases, including new and experimental applications. It is a common mistake
    to design the infrastructure around the needs of a few most visible applications,
    which may not represent the needs of the majority of (future) use cases. In fact,
    the most visible applications may require a custom approach that can coexist alongside
    generalized infrastructure.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：在决定您的基础设施策略时，请考虑最广泛的使用案例集，包括新的和实验性的应用。围绕少数最明显应用的需求来设计基础设施是一个常见的错误，这些应用可能不代表大多数（未来）使用案例的需求。实际上，最明显应用可能需要一种可以与通用基础设施共存的自定义方法。
- en: 'Custom applications may have unique needs when it comes to scale (think Google
    Search) or performance (think high-frequency trading applications that must provide
    predictions in microseconds). Applications like this often necessitate an artisanal
    approach: they need to be carefully crafted by experienced engineers, maybe using
    specialized hardware. A downside is that specialized applications often have hard
    time optimizing for velocity and volume (special skills required limit the number
    of people who can work on the app), and they can’t support a variety of applications
    by design.'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在涉及规模（例如谷歌搜索）或性能（例如必须以微秒级提供预测的高频交易应用）时，定制应用程序可能会有独特的需求。这类应用程序通常需要工匠式的方法：它们需要经验丰富的工程师精心打造，可能还会使用专用硬件。缺点是，专用应用程序在优化速度和数量方面往往很困难（所需的特殊技能限制了可以工作在该应用程序上的人数），并且它们无法通过设计支持各种应用程序。
- en: Consider carefully what kind of applications you will need to build or support.
    Today, most data science applications can be supported by generalized infrastructure,
    which is the topic of this book. This is beneficial because it allows you to optimize
    for volume, velocity, variety, and validity. If one of your applications has special
    needs, it may require a more custom approach. In this case, it might make sense
    to treat the special application as a special case while letting the other applications
    benefit from generalized infrastructure.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 仔细考虑您将需要构建或支持的应用程序类型。今天，大多数数据科学应用程序都可以由通用基础设施支持，这正是本书的主题。这很有益，因为它允许您优化数量、速度、多样性和有效性。如果您的某个应用程序有特殊需求，它可能需要更定制的方法。在这种情况下，将特殊应用程序视为特殊情况，同时让其他应用程序从通用基础设施中受益可能是有意义的。
- en: 1.3 Why good infrastructure matters
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.3 为什么良好的基础设施很重要
- en: As we went through the eight layers of the infrastructure stack, you got a glimpse
    of the wide array of technical components that are needed to build modern data
    science applications. In fact, large-scale machine learning applications like
    personalized recommendations for YouTube or sophisticated models that optimize
    banner ads in real time—a deliberately mundane example—are some of the most complex
    machines ever built by humankind, considering the hundreds of subsystems and tens
    of millions of lines of code involved.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 随着我们通过了基础设施堆栈的八层，您对构建现代数据科学应用程序所需的各种技术组件有了窥视。实际上，像YouTube的个性化推荐或实时优化横幅广告的复杂模型这样的大规模机器学习应用——一个故意平凡化的例子——是人类有史以来建造的最复杂的机器之一，考虑到涉及的数百个子系统和数百万行代码。
- en: Building infrastructure for the dairy industry, following our original example,
    probably involves an order of magnitude less complexity than many production-grade
    data science applications. Much of the complexity is not visible on the surface,
    but it surely becomes visible when things fail.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 按照我们的原始示例，为乳制品行业构建基础设施可能比许多生产级数据科学应用程序的复杂性低一个数量级。大部分复杂性在表面上并不明显，但事情失败时，它肯定会变得明显。
- en: To illustrate the complexity, imagine having the aforementioned eight-layer
    stack powering a data science project. Remember how a single project can involve
    many interconnected machines, with each machine representing a sophisticated model.
    A constant flow of fresh data, potentially large amounts of it, goes through these
    machines. The machines are powered by a compute platform that needs to manage
    thousands of machines of various sizes executing concurrently. The machines are
    orchestrated by a job scheduler, which makes sure that data flows between the
    machines correctly and each machine executes at the right moment.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明复杂性，想象一下上述八层堆栈为一个数据科学项目提供动力。记住，一个项目可以涉及许多相互连接的机器，每台机器代表一个复杂的模型。大量新鲜数据，可能数量很大，通过这些机器流动。这些机器由一个计算平台提供动力，该平台需要管理各种大小、同时执行的数千台机器。机器由作业调度器编排，确保数据在机器之间正确流动，并且每台机器在正确的时间执行。
- en: We have a team of data scientists working on these machines, each of them experimenting
    with various versions of the machine that is allocated for them in rapid iterations.
    We want to ensure that each version produces valid results, and we want to evaluate
    them in real time by executing them side by side. Every version needs its own
    isolated environment to ensure that no interference occurs between the versions.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一支数据科学家团队在这些机器上工作，他们中的每个人都在快速迭代中尝试分配给他们的机器的各种版本。我们希望确保每个版本都能产生有效结果，并且我们希望通过并行执行来实时评估它们。每个版本都需要自己的独立环境，以确保版本之间不会发生干扰。
- en: This scenario should evoke a picture of a factory, employing teams of people
    and hundreds of incessantly humming machines. In contrast to an industrial-era
    factory, this factory isn’t built only once but it is constantly evolving, slightly
    changing its shape multiple times a day. Software isn’t bound by the limitations
    of the physical world, but it is bound to produce ever-increasing business value.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这种场景应该唤起一个工厂的画面，雇佣着成百上千个不停嗡嗡作响的机器的团队。与工业时代的工厂不同，这个工厂不是一次性建成的，而是不断演变，每天多次略微改变其形状。软件不受物理世界的限制，但它必须产生不断增长的商业价值。
- en: 'The story doesn’t end here. A large or midsize modern company doesn’t have
    only a single factory, a single data science application, but can have any number
    of them. The sheer volume of applications causes operational burden, but the main
    challenge is variety: every real-world problem domain requires a different solution,
    each with its own requirements and characteristics, leading to a diverse set of
    applications that need to be supported. As a cherry on top of the complexity cake,
    the applications are often interdependent.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 故事还没有结束。一个大型或中型现代公司不仅仅只有一个工厂，一个数据科学应用，而是可以有任意多个。应用的数量本身就会造成运营负担，但主要挑战是多样性：每个现实世界的问题领域都需要不同的解决方案，每个都有自己的需求和特征，导致需要支持的应用程序种类繁多。作为复杂性蛋糕上的樱桃，这些应用程序通常是相互依赖的。
- en: For a concrete example, consider a hypothetical midsize e-commerce store. They
    have a custom recommendation engine (“These products are recommended to you!”);
    a model to measure the effectiveness of marketing campaigns (“Facebook ads seem
    to be performing better than Google Ads in Connecticut.”); an optimization model
    for logistics (“It is more efficient to dropship category B versus keeping them
    in stock.”); and a financial forecasting model for estimating churn (“Customers
    buying X seem to churn less.”). Each of these four applications is a factory in
    itself. They may involve multiple models, multiple data pipelines, multiple people,
    and multiple versions.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 以一个假设的中型电子商务商店为例。他们有一个定制的推荐引擎（“这些产品推荐给您！”）；一个衡量营销活动有效性的模型（“Facebook广告在康涅狄格州似乎比Google广告表现更好。”）；一个物流优化模型（“与保持库存相比，直接发货类别B更有效率。”）；以及一个用于估计客户流失的财务预测模型（“购买X的客户似乎流失较少。”）。这四个应用中的每一个本身就是一个工厂。它们可能涉及多个模型、多个数据处理管道、多个人和多个版本。
- en: 1.3.1 Managing complexity
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.1 复杂性管理
- en: 'This complexity of real-life data science applications poses a number of challenges
    to the infrastructure. There isn’t a simple, nifty technical solution to the problem.
    Instead of treating complexity as a nuisance that can be swept or abstracted away,
    we make managing complexity a key goal of effective infrastructure. We address
    the challenge on multiple fronts, as follows:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 现实生活中的数据科学应用复杂性给基础设施带来了许多挑战。对于这个问题，没有简单巧妙的解决方案。我们不是将复杂性视为可以扫除或抽象掉的麻烦，而是将管理复杂性作为有效基础设施的关键目标。我们将从多个方面应对这一挑战，如下所述：
- en: '*Implementation*—Designing and implementing infrastructure that deals with
    this level of complexity is a nontrivial task. We will discuss strategies to address
    the engineering challenge later.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*实施*—设计和实施处理这种复杂程度的**基础设施**是一个非平凡的任务。我们将在后面讨论解决工程挑战的策略。'
- en: '*Usability*—It is a key challenge of *effective* infrastructure to make data
    scientists productive despite the complexities involved, which is a key motivation
    for *human-centric infrastructure* introduced later.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*可用性*—在涉及复杂性的情况下，使数据科学家保持高效生产是有效基础设施的关键挑战，这也是后来提出的以人为中心的**基础设施**的关键动机。'
- en: '*Operations*—How do we keep the machines humming with minimal human intervention?
    Reducing the operational burden of data science applications is another key goal
    of the infrastructure, which is a common thread across chapters of this book.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运维*——我们如何以最小的人工干预使机器保持运行？减少数据科学应用的操作负担是基础设施的另一个关键目标，这也是本书各章节的共同主题。'
- en: In all these cases, we must avoid introducing *incidental complexity*, or complexity
    that is not necessitated by the problem itself but is an unwanted artifact of
    a chosen approach. Incidental complexity is a huge problem for real-world data
    science because we have to deal with such a high level of *inherent complexity*
    that distinguishing between real problems and imaginary problems becomes hard.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有这些情况下，我们必须避免引入*偶然复杂性*，即不是由问题本身所必需的，而是由选择的方法带来的不希望出现的副作用。偶然复杂性是现实世界数据科学的一个巨大问题，因为我们必须处理如此高的*固有复杂性*，以至于区分真实问题和想象问题变得困难。
- en: 'You may have heard of *boilerplate code* (code that exists just to make a framework
    happy), *spaghetti pipelines* (poorly organized relationships between systems),
    or *dependency hells* (managing a constantly evolving graph of third-party libraries
    is hard). On top of these technical concerns, we have incidental complexity caused
    by human organizations: sometimes we have to introduce complex interfaces between
    systems, not because they are necessary technically, but because they follow the
    organizational boundaries, for example, between data scientists and data engineers.
    You can read more about these issues in a frequently cited paper called “Hidden
    Technical Debt in Machine Learning Systems,” which was published by Google in
    2015 ([http://mng.bz/Dg7n](http://mng.bz/Dg7n)).'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能听说过*样板代码*（仅为了使框架满意而存在的代码），*意大利面式管道*（系统之间组织混乱的关系），或者*依赖地狱*（管理不断演变的第三方库图是困难的）。在这些技术问题之上，我们还面临着由人为组织引起的偶然复杂性：有时我们不得不在系统之间引入复杂的接口，并不是因为它们在技术上必要，而是因为它们遵循组织边界，例如，数据科学家和数据工程师之间。你可以在一篇经常引用的论文中了解更多关于这些问题，这篇论文名为“机器学习系统中的隐藏技术债务”，由谷歌在2015年发布([http://mng.bz/Dg7n](http://mng.bz/Dg7n))。
- en: An effective infrastructure helps to expose and manage inherent complexity,
    which is the natural state of the world we live in, while making a conscious effort
    to avoid introducing incidental complexity. Doing this well is hard and requires
    constant judgment. Fortunately, we have one time-tested heuristic for keeping
    incidental complexity in check, namely, *simplicity*. “Everything should be made
    as simple as possible, but no simpler” is a core design principle that applies
    to all parts of the effective data science infrastructure.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 一个有效的基础设施有助于揭示和管理固有的复杂性，这是我们所处世界的自然状态，同时有意识地避免引入偶然复杂性。做好这一点很难，需要不断的判断。幸运的是，我们有一个经过时间考验的启发式方法来控制偶然复杂性，那就是*简单性*。“一切都应该尽可能简单，但不能过于简单”是适用于有效数据科学基础设施所有部分的核心设计原则。
- en: 1.3.2 Leveraging existing platforms
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3.2 利用现有平台
- en: Our job, as described in the previous sections, is to build effective, generalized
    infrastructure for data science based on the eight-layer stack. We want to do
    this in a manner that makes real-world complexity manageable while minimizing
    extra complexity caused by the infrastructure itself. This may sound like a daunting
    task.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 根据前几节所述，我们的任务是构建基于八层栈的有效、通用数据科学基础设施。我们希望以这种方式进行，使现实世界的复杂性变得可管理，同时最大限度地减少基础设施本身引起的额外复杂性。这听起来可能是一项艰巨的任务。
- en: Very few companies can afford dedicating large teams of engineers for building
    and maintaining infrastructure for data science. Smaller companies may have one
    or two engineers dedicated to the task, whereas larger companies may have a small
    team. Ultimately, companies want to produce business value with data science applications.
    Infrastructure is a means to this end, not a goal in itself, so it is rational
    to determine the size of the infrastructure investment accordingly. All in all,
    we can spend only a limited amount of time and effort in building and maintaining
    infrastructure.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 很少有公司能够承担起为数据科学建设并维护大量工程师团队的费用。较小的公司可能只有一到两名工程师负责这项任务，而较大的公司可能有一个小团队。最终，公司希望利用数据科学应用产生商业价值。基础设施是实现这一目标的手段，而不是一个目标本身，因此根据这一目标确定基础设施投资的规模是合理的。总的来说，我们在构建和维护基础设施上只能投入有限的时间和精力。
- en: Luckily, as noted in the very beginning of this chapter, everything presented
    in this book has been possible to implement technically for decades, so we don’t
    have to start from scratch. Instead of inventing new hardware, operating systems,
    or data warehouses, our job is to leverage the best-of-the-breed platforms available
    and integrate them to make it easy to prototype and productionize data science
    applications.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，正如本章开头所提到的，本书中介绍的所有内容在技术上已经可以实现数十年，所以我们不必从头开始。我们不需要发明新的硬件、操作系统或数据仓库，我们的任务是利用现成的最佳平台，并将它们集成起来，以便轻松原型化和生产化数据科学应用。
- en: Engineers often underestimate the gap between “possible” and “easy,” as illustrated
    in figure 1.6\. It is easy to keep reimplementing things in various ways on the
    “possible” side of the chasm, without truly answering the question how to make
    things fundamentally easier. However, it is only the “easy” side of the chasm
    that enables us to maximize the four Vs—volume, velocity, variety, and validity
    of data science applications—so we shouldn’t spend too much time on the left bank.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 工程师们往往低估了“可能”与“容易”之间的差距，如图1.6所示。在鸿沟的“可能”一侧，很容易以各种方式重新实现事物，而不真正回答如何使事情从根本上变得更容易的问题。然而，只有鸿沟的“容易”一侧才能使我们最大限度地发挥数据科学应用的四V——数据量、速度、多样性和有效性——因此我们不应该在左岸花费太多时间。
- en: '![CH01_F06_Tuulos](../../OEBPS/Images/CH01_F06_Tuulos.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F06_Tuulos](../../OEBPS/Images/CH01_F06_Tuulos.png)'
- en: Figure 1.6 Infrastructure makes possible things easy.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 基础设施使事情变得简单。
- en: This book helps you to build the bridge first, which is a nontrivial undertaking
    by itself, leveraging existing components whenever possible. Thanks to our stack
    with distinct layers, we can let other teams and companies worry about individual
    components. Over time, if some of them turn out to be inadequate, we can replace
    them with better alternatives without disrupting users.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 本书帮助您首先构建桥梁，这本身就是一个非同寻常的任务，尽可能利用现有组件。多亏了我们具有不同层的堆栈，我们可以让其他团队和公司担心个别组件。随着时间的推移，如果其中一些被发现不足，我们可以用更好的替代品替换它们，而不会干扰用户。
- en: Head in the clouds
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 心无旁骛
- en: Cloud computing is a prime example of a solution that makes many things technically
    possible, albeit not always easy. Public clouds, such as Amazon Web Services,
    Google Compute Platform, and Microsoft Azure, have massively changed the infrastructure
    landscape by allowing anyone to access foundational layers that were previously
    available only to the largest companies. These services are not only technically
    available but also drastically cost-effective when used thoughtfully.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 云计算是一个很好的例子，它使许多技术上的事情成为可能，尽管并非总是容易实现。公共云，如亚马逊网络服务（Amazon Web Services）、谷歌计算平台（Google
    Compute Platform）和微软Azure，通过允许任何人访问以前仅对最大公司开放的底层基础结构，极大地改变了基础设施的格局。这些服务不仅在技术上可用，而且在谨慎使用时也极具成本效益。
- en: 'Besides democratizing the lower layers of infrastructure, the cloud has qualitatively
    changed the way we should architect infrastructure. Previously, many challenges
    in architecting systems for high-performance computing revolved around resource
    management: how to guard and ration access to limited compute and storage resources,
    and, correspondingly, how to make resource usage as efficient as possible.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使基础设施的底层民主化外，云技术还从根本上改变了我们构建基础设施的方式。以前，在构建高性能计算系统时遇到的许多挑战都围绕着资源管理：如何保护并合理分配有限的计算和存储资源，以及相应地，如何使资源使用尽可能高效。
- en: The cloud allows us to change our mindset. All the clouds provide a data layer,
    like Amazon S3, which provides a virtually unlimited amount of storage with close
    to a perfect level of durability and high availability. Similarly, they provide
    nearly infinite, elastically scaling compute resources like Amazon Elastic Compute
    Cloud (Amazon EC2) and the abstractions built on top of it. We can architect our
    systems with the assumption that we have an abundant amount of compute resources
    and storage available and focus on cost-effectiveness and productivity instead.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 云技术使我们能够改变我们的思维方式。所有云都提供了一个数据层，例如亚马逊S3，它提供了几乎无限的存储空间，接近完美的持久性和高可用性。同样，它们提供了几乎无限的、可弹性扩展的计算资源，如亚马逊弹性计算云（Amazon
    EC2）及其之上的抽象。我们可以假设我们有大量的计算资源和存储可用来构建我们的系统，并专注于成本效益和生产率。
- en: This book operates with the assumption that you have access to cloudlike foundational
    infrastructure. By far the easiest way to fulfill the requirement is to create
    an account with one of the cloud providers. You can build and test the stack for
    a few hundred dollars, or possibly for free by relying on the free tiers that
    many clouds offer. Alternatively, you can build or use an existing private cloud
    environment. How to build a private cloud is outside the scope of this book, however.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 本书假设您能够访问类似云的基础设施。到目前为止，满足这一要求最简单的方法是，在云服务提供商之一创建一个账户。您可以用几百美元或通过依赖许多云提供的免费层来免费构建和测试您的堆栈。或者，您可以构建或使用现有的私有云环境。然而，如何构建私有云超出了本书的范围。
- en: 'All the clouds also provide higher-level products for data science, such as
    Azure Machine Learning (ML) Studio and Amazon SageMaker. You can typically use
    these products as end-to-end platforms, requiring minimal customization, or, alternatively,
    you can integrate parts of them in your own systems. This book takes the latter
    approach: you will learn how to build your own stack, leveraging various services
    provided by the cloud as well as using open source frameworks. Although this approach
    requires more work, it affords you greater flexibility, the result is likely to
    be easier to use, and the custom stack is likely to be more cost-efficient as
    well. You will learn why this is the case throughout the coming chapters.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 所有云也提供了针对数据科学的高级产品，例如Azure Machine Learning (ML) Studio和Amazon SageMaker。您通常可以将这些产品用作端到端平台，需要最小化定制，或者，您可以选择将它们的部分集成到您自己的系统中。本书采用后一种方法：您将学习如何构建自己的堆栈，利用云提供的各种服务以及使用开源框架。尽管这种方法需要更多工作，但它提供了更大的灵活性，结果可能更容易使用，并且定制的堆栈可能也更经济高效。您将在接下来的章节中了解到这一点的原因。
- en: To summarize, you can leverage the clouds to take care of low-level, undifferentiated
    technical heavy lifting. This allows you to focus your limited development budget
    on unique, differentiating business needs and, most important, on optimizing data
    scientist productivity in your organization. We can use the clouds to increasingly
    shift our focus from technical matters to human matters, as we will describe in
    the next section.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，您可以利用云来处理低级、无差别的技术重活。这使您可以将有限的开发预算集中在独特的、区分性的业务需求上，最重要的是，在您的组织中优化数据科学家的生产力。我们可以使用云越来越多地将我们的重点从技术问题转移到人文问题，正如我们将在下一节中描述的那样。
- en: 1.4 Human-centric infrastructure
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.4 以人为中心的基础设施
- en: 'The infrastructure aims at maximizing the productivity of the organization
    on multiple fronts. It supports more projects, delivered faster, with more reliable
    results, covering more business domains. To better understand how infrastructure
    can make this happen, consider the following typical bottlenecks that occur when
    effective infrastructure is not available:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 该基础设施旨在从多个方面最大化组织的生产力。它支持更多项目，更快交付，结果更可靠，覆盖更多业务领域。为了更好地理解基础设施如何实现这一点，考虑以下在有效基础设施不可用时出现的典型瓶颈：
- en: '*Volume*—We can’t support more data science applications simply because we
    don’t have enough data scientists to work on them. All our existing data scientists
    are busy improving and supporting existing applications.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*体积*—我们无法支持更多的数据科学应用，仅仅因为我们没有足够的数据科学家来处理它们。我们所有的现有数据科学家都在忙于改进和支持现有应用。'
- en: '*Velocity*—We can’t deliver results faster because developing a production-ready
    version of model X would be a major engineering effort.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*速度*—我们无法更快地交付结果，因为开发模型X的生产就绪版本将是一项重大的工程努力。'
- en: '*Validity*—A prototype of the model was working fine in a notebook, but we
    didn’t consider that it might receive data like Y, which broke it in production.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*有效性*—该模型的原型在笔记本上运行良好，但我们没有考虑到它可能会接收到像Y这样的数据，这在生产中破坏了它。'
- en: '*Variety*—We would love to support a new use case Z, but our data scientists
    only know Python, and the systems around Z only support Java.'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*多样性*—我们很乐意支持新的用例Z，但我们的数据科学家只知道Python，而围绕Z的系统只支持Java。'
- en: A common element in all these cases is that *humans are the bottleneck*. Besides
    some highly specialized applications, it rarely happens that projects can’t be
    delivered because of fundamental limitations in hardware or software. A typical
    bottleneck is caused by the fact that humans can’t deliver software (or hardware,
    if operating outside the cloud) fast enough. Even if they were capable of hacking
    code fast enough, they may be busy maintaining existing systems, which is another
    critically human activity.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有这些案例中，一个共同的因素是*人类是瓶颈*。除了某些高度专业化的应用，很少发生项目因为硬件或软件的基本限制而无法交付的情况。一个典型的瓶颈是由人类无法足够快地交付软件（或硬件，如果是在云外操作）这一事实造成的。即使他们能够足够快地破解代码，他们可能正忙于维护现有系统，而这又是另一项至关重要的人类活动。
- en: This observation helps us to realize that although “infrastructure” sounds very
    technical, we are not building infrastructure for the machines. We are building
    infrastructure to make humans more productive. This realization has fundamental
    ramifications to how we should think about and design infrastructure for data
    scientists—for fellow human beings, instead of for machines.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 这个观察结果帮助我们意识到，尽管“基础设施”听起来非常技术化，但我们并不是在为机器构建基础设施。我们是在为提高人类的生产力而构建基础设施。这一认识对我们思考如何为数据科学家（即人类同胞，而不是机器）设计和构建基础设施具有根本性的影响。
- en: For instance, if we assume that human-time is more expensive than computer-time,
    which is certainly true for most data scientists, it makes sense to use a highly
    expressive, productivity-boosting language like Python instead of a low-level
    language like C++, even if it makes workloads more inefficient to process. We
    will dig deeper into this question in chapter 5.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们假设人类时间比计算机时间更昂贵，这对于大多数数据科学家来说无疑是正确的，那么使用像Python这样的高度表达性和生产力提升的语言，而不是像C++这样的底层语言，即使它使得工作负载处理效率更低，也是有意义的。我们将在第5章中更深入地探讨这个问题。
- en: In the previous section, we noted how we want to leverage existing platforms
    to their fullest extent and integrate them to form our infrastructure stack. Our
    goal should be to do this in a manner that provides a cohesive user experience,
    minimizing the cognitive overhead that the user would have to experience if they
    had to understand and operate each layer independently. Our hypothesis is that
    by reducing the cognitive overhead related to the infrastructure, we can boost
    productivity of data scientists in the area where it matters the most, namely,
    data science itself.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们提到了我们希望充分利用现有平台并将它们集成到我们的基础设施堆栈中。我们的目标应该是以提供一致的用户体验的方式来做这件事，最大限度地减少用户在必须独立理解和操作每一层时可能遇到的认知开销。我们的假设是，通过减少与基础设施相关的认知开销，我们可以提高数据科学家在最重要的领域——即数据科学本身的——生产力。
- en: 1.4.1 Freedom and responsibility
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.1 自由与责任
- en: 'Netflix, the streaming video company, is well-known for its unique culture,
    which is described in detail in a recent book, *No Rules Rules: Netflix and the
    Culture of Reinvention* (Penguin Press, 2020) by Erin Meyer and Reed Hastings,
    a cofounder and long-time CEO of Netflix. One of Netflix’s core values is “freedom
    and responsibility,” which empowers all employees with a great degree of freedom
    to determine how they do their job. The other side of the coin is that the employees
    are always expected to consider what is in the best interest of the company and
    act responsibly. Metaflow, a framework for human-centric data science infrastructure,
    which we will introduce in chapter 3, was born at Netflix where it was heavily
    influenced by the company’s culture.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: Netflix，这家流媒体视频公司，以其独特的文化而闻名，这种文化在Erin Meyer和Netflix的联合创始人兼长期首席执行官Reed Hastings最近的一本书《无规则规则：Netflix与变革文化》（Penguin
    Press，2020）中有详细描述。Netflix的核心价值观之一是“自由与责任”，这赋予所有员工极大的自由度来决定他们如何完成工作。另一方面，员工始终被期望考虑公司的最大利益并负责任地行事。Metaflow，一个以人为中心的数据科学基础设施框架，我们将在第3章中介绍，它诞生于Netflix，受到了公司文化的深刻影响。
- en: We can apply the concept of freedom and responsibility to the work of data scientists
    and to the data science infrastructure in general. We expect that data scientists
    are experts in their own domain, such as in matters related to feature engineering
    and model development. We don’t expect that they are experts in systems engineering
    or other topics related to infrastructure. However, we expect that they are responsible
    enough to choose to leverage data science infrastructure, if it is made available.
    We can map this idea to our infrastructure stack as shown in figure 1.7.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将自由度和责任的概念应用于数据科学家的工作和数据科学基础设施。我们期望数据科学家在自己的领域是专家，例如在特征工程和模型开发方面。我们不期望他们是系统工程或其他与基础设施相关主题的专家。然而，我们期望他们有足够的责任感，如果数据科学基础设施可用，他们会选择利用它。我们可以将这个想法映射到我们的基础设施堆栈，如图1.7所示。
- en: '![CH01_F07_Tuulos](../../OEBPS/Images/CH01_F07_Tuulos.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![CH01_F07_Tuulos](../../OEBPS/Images/CH01_F07_Tuulos.png)'
- en: Figure 1.7 Infrastructure complements the interests of a data scientist.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7 基础设施补充了数据科学家的利益。
- en: The triangle on the left side depicts the areas of expertise and interest of
    data scientists. It is the widest at the top of the stack, which is most specific
    to data science. The infrastructure should grant them the most freedom at these
    layers, allowing them to freely choose the best modeling approaches, libraries,
    and features based on their expertise. We expect data scientists to be autonomous—more
    about that later—so they should care about model operations, versioning, and architecture
    a bit, which is a part of their responsibility.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 左侧的三角形描述了数据科学家的专业领域和兴趣。它在堆栈的顶部最宽，最具体于数据科学。基础设施应该在这些层给予他们最大的自由度，允许他们根据自己的专长自由选择最佳建模方法、库和功能。我们期望数据科学家是自主的——关于这一点稍后还会详细说明——因此，他们应该稍微关注模型操作、版本控制和架构，这是他们责任的一部分。
- en: The triangle on the right side depicts the freedom and responsibility of the
    infrastructure team. The infrastructure team should have the greatest degree of
    freedom to choose and optimize the lowest layers of the stack, which are critical
    in the technical point of view. They can do it without limiting the freedom of
    data scientists too much. However, their responsibility lessens toward the top
    of the stack. The infrastructure team can’t be responsible for the models themselves,
    because often they don’t have the expertise and definitely not the scale to support
    all use cases.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 右侧的三角形描述了基础设施团队的自由度和责任。基础设施团队应该有最大的自由度来选择和优化堆栈的底层，这在技术观点上是至关重要的。他们可以在不过度限制数据科学家自由度的前提下做到这一点。然而，他们的责任在堆栈的上层会减少。基础设施团队不能对模型本身负责，因为通常他们没有足够的专长，也没有足够的规模来支持所有用例。
- en: 'The purpose of this arrangement is twofold: on the one hand, we can maximize
    the productivity and happiness of an individual data scientist by letting them
    focus on things they like and know how to execute well with a great degree of
    freedom. On the other hand, we can realize the four Vs, which are in the interest
    of the company, by asking data scientists to use the stack responsibly, including
    the parts in the middle which they may feel less passionate about. The result
    is a healthy balance between the needs of the company and the happiness of the
    data scientist.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 这种安排的目的有两方面：一方面，我们可以通过让他们专注于自己喜欢且擅长执行的事情，以极大的自由度，最大化单个数据科学家的生产力和幸福感。另一方面，通过要求数据科学家负责任地使用堆栈，包括他们可能不太热衷的部分，我们可以实现公司利益的四个“V”，即速度、可扩展性、可访问性和可变性。结果是公司需求和数据科学家幸福之间的健康平衡。
- en: 1.4.2 Data scientist autonomy
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4.2 数据科学家自主性
- en: 'Thus far, we have casually talked about “the infrastructure team” and “data
    scientists.” However, the actual cast of characters in a data science project
    can be more colorful, as shown next:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们随意地谈论了“基础设施团队”和“数据科学家”。然而，数据科学项目中实际的角色可能更加多样化，如下所示：
- en: '*A data scientist* or *machine learning researcher* develops and prototypes
    machine learning or other data science models.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*数据科学家* 或 *机器学习研究员* 开发和原型化机器学习或其他数据科学模型。'
- en: '*A machine learning engineer* implements the model in a scalable, production-ready
    way.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*机器学习工程师* 以可扩展、生产就绪的方式实现模型。'
- en: A *data engineer* sets up data pipelines for input and output data, including
    data transformations.
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*数据工程师* 设置数据管道，用于输入和输出数据，包括数据转换。'
- en: A *DevOps engineer* deploys applications in production and makes sure that all
    the systems stay up and running flawlessly.
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*DevOps工程师*在生产中部署应用程序，并确保所有系统保持正常运行且无故障。'
- en: An *application engineer* integrates the model with other business components,
    such as web applications, which are the consumers of the model.
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*应用工程师*将模型与其他业务组件（如Web应用程序）集成，这些应用程序是模型的消费者。'
- en: An *infrastructure or platform engineer* provides general pieces of infrastructure,
    such as data warehouses or compute platforms, for many applications to use.
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*基础设施或平台工程师*为许多应用程序提供通用基础设施，例如数据仓库或计算平台。'
- en: In addition to this technical team, the data science project may have involvement
    from *business owners*, who understand the business context of the application;
    *product managers**,* who map the business context to technical requirements;
    and *project/program managers* who help to coordinate cross-functional collaboration.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这个技术团队外，数据科学项目可能还会涉及*业务所有者*，他们了解应用程序的业务背景；*产品经理*，他们将业务背景映射到技术要求；以及*项目/程序经理*，他们帮助协调跨职能协作。
- en: Anyone who has been involved in a project that involves many stakeholders knows
    how much communication and coordination is required to keep the project moving
    forward. Besides the coordination overhead, it can be challenging to increase
    the number of concurrent data science projects for the simple reason that there
    are not enough people to fill all the roles in all the projects. For these and
    many other reasons, many companies find it desirable to reduce the number of people
    involved in projects, as long as the execution of projects doesn’t suffer.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 任何参与过涉及众多利益相关者的项目的个人都知道，为了使项目顺利进行，需要多少沟通和协调。除了协调开销外，仅仅是因为没有足够的人来填补所有项目中所有角色的简单原因，增加并行数据科学项目的数量可能具有挑战性。出于这些原因以及许多其他原因，许多公司发现减少参与项目的人数是可取的，只要项目的执行不受影响。
- en: The goal of our infrastructure stack is to make it possible to merge the first
    four technical roles so that the data scientist is empowered to take care of all
    these functions autonomously within a project. These roles may still exist in
    the company, but instead of every project requiring these roles to be present,
    the roles can be assigned to a few key projects, or they can support more horizontal,
    cross-project efforts.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 我们基础设施堆栈的目标是使前四个技术角色能够合并，以便数据科学家能够在项目内部自主处理所有这些功能。这些角色在公司中可能仍然存在，但不是每个项目都需要这些角色，这些角色可以分配给少数关键项目，或者它们可以支持更横向的跨项目工作。
- en: To summarize, the data scientist, who is not expected to suddenly become an
    expert in DevOps or data engineering, should be able to implement models in a
    scalable manner, to set up data pipelines, and to deploy and monitor models in
    production independently. They should be able to do this with minimal additional
    overhead, allowing them to maintain focus on data science. This is the key value
    proposition of our human-centric data science infrastructure, which we will start
    building in the next chapters from the ground up.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，数据科学家，他们不需要突然成为DevOps或数据工程的专家，应该能够以可扩展的方式实现模型，设置数据管道，并独立地部署和监控生产中的模型。他们应该能够以最小的额外开销做到这一点，从而让他们能够专注于数据科学。这是我们以人为本的数据科学基础设施的关键价值主张，我们将在下一章从头开始构建。
- en: Summary
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Although it is possible to develop and deliver data science projects without
    dedicated infrastructure, effective infrastructure makes it possible to develop
    a greater volume and variety of projects, delivered with a higher velocity, without
    compromising the validity of results.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虽然可以在没有专用基础设施的情况下开发和交付数据科学项目，但有效的基础设施使得能够以更高的速度开发更多种类和数量的项目，同时不牺牲结果的有效性。
- en: A full infrastructure stack of systems is needed to support data scientists,
    from foundational layers like data and compute to higher-level concerns like feature
    engineering and model development. This book will go through all the layers systematically.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要一个完整的系统基础设施堆栈来支持数据科学家，从基础层（如数据和计算）到更高级的关注点（如特征工程和模型开发）。本书将系统地介绍所有这些层。
- en: There isn’t a one-size-fits-all approach to data science. It is beneficial to
    be able to customize layers of the infrastructure stack to address your specific
    needs, which this book will help you do.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据科学没有一刀切的方法。能够定制基础设施堆栈的层以解决您的特定需求是有益的，这本书将帮助您做到这一点。
- en: A modern data science application is a sophisticated, complex machine, involving
    many moving pieces. Managing this inherent complexity well, as well as avoiding
    introducing any unnecessary complexity while doing it, is a key challenge of data
    science infrastructure.
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现代数据科学应用是一个复杂、精密的机器，涉及许多移动部件。在管理这种固有的复杂性方面做得很好，同时避免在执行过程中引入任何不必要的复杂性，这是数据科学基础设施的关键挑战。
- en: Leveraging existing, battle-hardened systems, such as public clouds, is a good
    way to keep complexity in check. The coming chapters will help you to choose suitable
    systems at each layer of the stack.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用现有的、经过实战考验的系统，例如公共云，是控制复杂性的好方法。接下来的章节将帮助你在堆栈的每一层选择合适的系统。
- en: Ultimately, humans tend to be the bottleneck in data science projects. Our key
    focus should be to improve the usability of the whole stack and, hence, improve
    the productivity of data scientists.
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最终，人类往往成为数据科学项目的瓶颈。我们的关键焦点应该是提高整个堆栈的可用性，从而提高数据科学家的生产力。
