- en: Chapter 1\. Categorical Analysis
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章。分类分析
- en: '*Categorical analysis* is the foundation of data visualization. It is the first
    and most frequent type of data visualization that data analysts use. Categorical
    analysis takes a dimension (for example, [Regions]) and breaks it apart by a measure
    (for example, [Sales]). A *dimension* is typically a categorical value; these
    do not get aggregated. They are likely used to create data headers or to generate
    filters. A *measure* is a (usually numerical) value that can be aggregated using
    mathematical functions (like sum, average, or median). Measures create unbroken
    axes, those that extend from one end of a range to the other.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*分类分析*是数据可视化的基础。这是数据分析师使用的第一种和最频繁的数据可视化类型。分类分析将一个维度（例如，[地区]）按照一个度量（例如，[销售额]）进行分解。*维度*通常是一个分类值；这些不会被聚合。它们通常用于创建数据标题或生成过滤器。*度量*是一个（通常是数值的）值，可以使用数学函数（如求和、平均值或中位数）进行聚合。度量创建无间断的轴线，从一个范围的一端延伸到另一端。'
- en: 'This type of analysis aids in answering common business questions such as these:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这种类型的分析有助于回答以下常见业务问题：
- en: How does *A* compare to *B*?
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*A*与*B*相比如何？'
- en: How is *X* measure distributed across *Y* categories?
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*X*的度量在*Y*类别中如何分布？'
- en: How much do *A*, *B*, and *C* contribute to the total?
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*A*、*B*和*C*对总体的贡献有多大？'
- en: How does *X* measure change over time (where time is the dimension)?
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何测量*X*随时间（时间作为维度）的变化？
- en: Categorical analysis is usually presented as bar charts. *Bar charts* use height
    or length as visual encoding to express a measure. *Visual encoding* refers to
    the techniques used to display data in charts; [Figure 1-1](#this_illustration_shows_the_various_ways)
    shows some examples. Encoding data in bar charts is effective because humans can
    quickly analyze the variation among the size of the bars; they are also easy to
    understand and label.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 分类分析通常以条形图呈现。*条形图*使用高度或长度作为视觉编码来表达一个度量。*视觉编码*是指在图表中显示数据的技术；[图1-1](#this_illustration_shows_the_various_ways)展示了一些例子。在条形图中编码数据非常有效，因为人类可以快速分析条形的大小变化；它们也容易理解和标记。
- en: '![This illustration shows the various ways that data can be encoded for display,
    and aligns them to a comprehension scale indicating how precisely the human eye
    can discern differences](Images/TAST_0101.png)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![这幅插图展示了数据可以如何编码以便显示，并将它们与一个理解尺度对齐，表明人眼可以辨别差异的精度](Images/TAST_0101.png)'
- en: Figure 1-1\. This illustration shows the various ways that data can be encoded
    for display, and aligns them to a comprehension scale indicating how precisely
    the human eye can discern differences
  id: totrans-9
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-1。这幅插图展示了数据可以如何编码以便显示，并将它们与一个理解尺度对齐，表明人眼可以辨别差异的精度。
- en: In our first use case, we will explore how to make effective *bar charts.* You’ll
    play the role of a large financial institution that wants to understand which
    merchant categories make up the majority of transactional spending in order to
    drive marketing efforts and partnerships and better serve customers’ interests.
    We will also expand from the defaults and learn two additional methods for making
    bar charts that demonstrate the most important information.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的第一个应用案例中，我们将探讨如何制作有效的*条形图*。您将扮演一个希望了解哪些商家类别占据大部分交易支出的大型金融机构角色，以推动营销工作和合作伙伴关系，更好地服务客户利益的角色。我们还将从默认设置中扩展出两种额外的制作条形图的方法，以展示最重要的信息。
- en: In the second case study, you’ll learn about working with many dimensions. While
    bar charts are very useful, you’ll need other data visualization tools when doing
    categorical analysis. When a dimension has many members, displaying each one as
    a bar chart sometimes becomes problematic. When this happens, you can use alternative
    chart forms to conserve space but still display all members. The most useful chart
    for this scenario is a treemap. We’ll explore treemaps through this case study
    about a nonprofit organization.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二个案例研究中，您将学习如何处理多个维度。虽然条形图非常有用，但在进行分类分析时，您需要其他数据可视化工具。当一个维度有许多成员时，将每个成员显示为条形图有时会变得棘手。在这种情况下，您可以使用替代的图表形式来节省空间，但仍然可以显示所有成员。对于这种情况最有用的图表是树状图。我们将通过一个关于非营利组织的案例研究来探索树状图。
- en: In our final use case of this chapter, you’ll learn how to use pie charts and
    donut charts to visualize whole relationships. This case study involves conducting
    a survey about IT professionals and mental health. Pie charts are often the first
    type of data visualization you learn in school, but we like to use them sparingly
    and as an alternative option. By the time we get to this use case, you’ll see
    how properly executed pie charts can be great tools to craft and share data with
    your audience.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的最终用例中，您将学习如何使用饼图和环形图来可视化整体关系。本案例涉及对IT专业人员和心理健康进行调查。饼图通常是您在学校学习的第一种数据可视化类型，但我们喜欢节俭地使用它们作为备选选项。当我们到达这个用例时，您将看到如何正确执行饼图可以成为与观众共享和制作数据的强大工具。
- en: 'Bar Charts: Banco de Tableau Case Study'
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 柱状图：Tableau案例研究
- en: Our first case study involves a large financial institution that is trying to
    understand consumer behaviors. We’ll call it *Banco de Tableau* (*BoT* for short).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第一个案例研究涉及一家试图了解消费者行为的大型金融机构。我们称之为*Banco de Tableau*（简称为BoT）。
- en: The data team at BoT is working to understand how and where consumers spend
    their money. This objective is fundamental to the organization’s success because
    it will drive the direction of marketing efforts, partnerships, and product promotions.
    It will also provide insight into profiling customers and may even unearth opportunities
    to grow the customer population. What kind of chart should the team use to present
    its results?
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: BoT的数据团队正在努力了解消费者如何和在哪里花钱。这个目标对于组织的成功至关重要，因为它将推动营销努力、合作伙伴关系和产品推广的方向。它还将提供关于客户画像的见解，并可能揭示增加客户群体的机会。团队应该使用什么样的图表来呈现其结果？
- en: Bar charts should be the first visualization type you try when exploring categorical
    analysis. Because they use length and height as visual encoding, they make it
    easy to interpret and compare members.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 当您探索分类分析时，柱状图应该是您尝试的第一种可视化类型。因为它们使用长度和高度作为视觉编码，使得解释和比较成员变得容易。
- en: To solve the bank data team’s problem, you’re going to start with a basic bar
    chart. It will help you compare types of merchants by how much consumers spend.
    It will also serve as the first step in understanding the data.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 要解决银行数据团队的问题，你将从一个基本的柱状图开始。它将帮助你通过消费者支出来比较各种类型的商户。它还将作为理解数据的第一步。
- en: 'Strategy: Build a Bar Chart in Tableau'
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：在Tableau中构建柱状图
- en: 'To build your first bar chart, you’ll use the Financial Institution Transactions
    dataset as you follow along in Tableau. Here are the steps:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建您的第一个柱状图，您将使用Tableau中的金融机构交易数据集进行跟随。以下是步骤：
- en: Drag the [Merchant Category] dimension to the Rows shelf.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[Merchant Category]维度拖动到行架上。
- en: Drag the [Transaction Amount] measure to the Columns shelf as `SUM([Transaction
    Amount])`.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[Transaction Amount]度量作为`SUM([Transaction Amount])`拖动到列架上。
- en: From the toolbar, sort the merchants in descending order by Transaction Amount
    (aka spending).
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从工具栏中，按交易金额（即支出）降序排列商户。
- en: Congratulations—you’ve built your first bar chart. Now this may not seem revolutionary,
    but it is the first step in finding out where consumer spending is focused. This
    simple chart, shown in [Figure 1-2](#a_bar_chart_showing_the_merchant_categor),
    dispels any intuition-based theories and presents us with the facts.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜你——你已经构建了你的第一个柱状图。现在这可能看起来并不革命性，但这是了解消费者支出重点的第一步。这个简单的图表，显示在[图1-2](#a_bar_chart_showing_the_merchant_categor)中，打破了任何基于直觉的理论，并向我们呈现了事实。
- en: '![A bar chart showing the merchant categories sorted in descending order by
    transaction amount](Images/TAST_0102.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![柱状图显示按交易金额降序排列的商户类别](Images/TAST_0102.png)'
- en: Figure 1-2\. A bar chart showing the merchant categories sorted in descending
    order by transaction amount
  id: totrans-25
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-2\. 柱状图显示按交易金额降序排列的商户类别
- en: This is a great starting point. We’ve now visualized the data and can see that
    the largest merchant category is Men’s and Women’s Clothing Stores. We can also
    see that several small merchant categories aren’t responsible for a lot of spending,
    like Cleaning and Maintenance. Knowing that there are many types of merchant categories,
    and that some are much larger than others, is additional insight we can act on
    to improve our visualization.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个很好的起点。我们已经将数据可视化，可以看到最大的商户类别是男女装店。我们还可以看到一些小的商户类别贡献不了很多支出，比如清洁和维护。知道有许多类型的商户类别，有些比其他的大得多，这是我们可以利用以改进我们的可视化的额外洞察。
- en: A good incremental way to do this is to limit the number of visible merchant
    categories by using a *Top N filter* with a parameter. This filter limits the
    chart by *N*, the number defined, in order to show only the top members in the
    chart. A *parameter* is a dynamic entry field defined by the end user.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用一个*Top N过滤器*和一个参数，限制显示的商家类别数量是一个很好的增量方式。这个过滤器根据用户定义的*N*值限制图表，以便只显示图表中的前几名成员。*参数*是由最终用户定义的动态输入字段。
- en: In this scenario, we will create a parameter that allows the user to dynamically
    define the number of categories they want to see. Adding the parameter not only
    gives our audience more control over the visualization, but also provides a more
    conversational way to understand the chart’s content. A Top 10 illustration is
    a much more tangible and bite-size takeaway than a long list of bars.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们将创建一个允许用户动态定义要查看的类别数的参数。添加参数不仅可以使我们的受众更多地控制可视化效果，而且还提供了一种更具对话性的方式来理解图表的内容。前10名的示例比长长的条形图列表更具切实可行性和简洁性。
- en: Tip
  id: totrans-29
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: 'In the upcoming strategy, you’ll be working with a parameter for the first
    time. We use the mnemonic *ABC* to remember the most common steps to building
    a parameter:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在即将到来的策略中，您将首次使用参数。我们使用记忆术*ABC*来记住构建参数的最常见步骤：
- en: 'A: Add a new parameter.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'A: 添加一个新的参数。'
- en: 'B: Bring the parameter control onto your worksheet (show the control).'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'B: 将参数控件拖放到工作表上（显示控件）。'
- en: 'C: Include the parameter in a calculated field.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'C: 将参数包含在一个计算字段中。'
- en: 'Strategy: Create a Top N Bar Chart'
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建Top N条形图
- en: 'To create the Top N bar chart, follow these steps:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建Top N条形图，请按照以下步骤操作：
- en: Drag [Merchant Category] to the Filters shelf.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[商家类别]拖放到筛选器架上。
- en: Navigate to the Top section.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到顶部部分。
- en: From the drop-down list, select Create a New Parameter.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉列表中，选择创建一个新的参数。
- en: Name the parameter `**[Top N]**` and save it.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将参数命名为`**[Top N]**`并保存。
- en: Right-click the parameter at the lower left of the Data pane to expose the parameter
    control.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击数据窗格左下角的参数以显示参数控件。
- en: Notice in [Figure 1-3](#a_bar_chart_with_top_n_filtering_and_a_p) that we’ve
    put the parameter value in the title of the chart. Now, when the user makes a
    dynamic change, the number will update in response. With this small act, we’ve
    created a portfolio of charts that can be customized to suit the audience’s needs.
    The change also makes the chart feel responsive to the audience; their actions
    change the visualization.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 注意在[图1-3](#a_bar_chart_with_top_n_filtering_and_a_p)中，我们将参数值放在图表标题中。现在，当用户进行动态更改时，数字将随之更新。通过这个小动作，我们创建了一系列可以根据受众需求定制的图表。这个改变还使得图表能够对观众产生响应；他们的行为改变了可视化效果。
- en: '![A bar chart with Top N filtering and a parameter applied](Images/TAST_0103.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![一个应用了Top N过滤和参数的条形图](Images/TAST_0103.png)'
- en: Figure 1-3\. A bar chart with Top N filtering and a parameter applied
  id: totrans-43
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-3\. 一个应用了Top N过滤和参数的条形图
- en: So how can we take this one step further? We’re guessing that you’ve been wondering
    what percentage of the total each of these categories represents. Although comparing
    them is useful as we try to synthesize our thinking further, a natural inclination
    would be to change the commentary that “Men’s and Women’s Clothing Stores makes
    up $27 million in customer spending” to “Close to 4% of all customer spending
    is attributed to Men’s and Women’s Clothing Stores.”
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 那么我们如何进一步提升呢？我们猜你一直在想，这些类别在总支出中所占的百分比是多少。尽管比较它们在我们进一步综合思考时是有用的，但一种自然的倾向是改变评论，即“男装和女装店的客户支出达到2700万美元”，改为“接近总客户支出的4%归因于男装和女装店”。
- en: How do we approach presenting this information? Well first, we can change the
    measure from a direct measure to a percent of the total. But we’re now left with
    the lingering notion that if we limit our chart to a Top 10, we’ll lose the context
    of how much spending is in all the other categories.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何处理呈现这些信息？首先，我们可以将度量从直接度量改为总量的百分比。但现在我们留下一个悬而未决的想法，即如果我们将我们的图表限制在前10名，我们将失去其他所有类别支出量的上下文。
- en: To work around this constraint, we can allow the audience to utilize a parameter
    to define the proportion of customer spending that they want to see broken out
    into the merchant categories, and to automatically group together all other categories.
    They still have dynamic control over the chart, but are left with a full picture
    of the data, as shown in [Figure 1-4](#the_updated_bar_chartcomma_now_with_all).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 要解决此限制，我们可以允许观众使用参数来定义他们希望看到分解为商户类别的客户支出比例，并自动将所有其他类别分组在一起。他们仍然可以对图表进行动态控制，但同时可以看到数据的整体情况，如
    [图 1-4](#the_updated_bar_chartcomma_now_with_all) 所示。
- en: Notice that you’ll need to construct a calculation that is equivalent to the
    percentage-of-total calculation you made. To do this, you can utilize *level-of-detail*
    (*LOD*) *expressions*. An LOD expression lets you define the aggregation of the
    calculation, independent of the dimensions used in the visualization. This calculation
    takes the `SUM([Transaction Amount])` and divides it by the total `SUM([Transaction
    Amount])` for the entire dataset.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，您需要构建一个与您所做的总数百分比计算相当的计算。为此，您可以利用 *层级详细* (*LOD*) *表达式*。LOD 表达式允许您定义计算的聚合方式，与可视化中使用的维度无关。该计算采用
    `SUM([Transaction Amount])` 并将其除以整个数据集的总和 `SUM([Transaction Amount])`。
- en: '![The updated bar chart, now with All Other Categories grouped at the bottom](Images/TAST_0104.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![更新后的条形图，现在将所有其他类别分组放置在底部](Images/TAST_0104.png)'
- en: Figure 1-4\. The updated bar chart, now with All Other Categories grouped at
    the bottom
  id: totrans-49
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-4\. 更新后的条形图，现在将所有其他类别分组放置在底部。
- en: 'Strategy: Dynamically Group Other Dimensions'
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：动态分组其他维度
- en: 'To update our chart to dynamically group other dimensions and show the percent
    of the total, follow these steps, using the worksheet from the previous strategy:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新我们的图表，动态分组其他维度并显示总数的百分比，请按照以下步骤操作，使用前一策略的工作表：
- en: Remove the [Merchant Category] filter from the Filters shelf by right-clicking
    and selecting “Remove” or by dragging it into the gray space beneath the Marks
    card.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从筛选架中删除 [商户类别] 筛选器，方法是右键单击并选择“删除”或将其拖到标记卡下方的灰色空间中。
- en: Change the measure to a percentage of the total by using Quick Table Calculations.
    Right-click `SUM([Transaction Amount])` and choose Quick Table Calculations →
    Percentage of Total.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过使用快速表格计算，将度量更改为总数的百分比。右键单击 `SUM([Transaction Amount])`，选择快速表格计算 → 百分比占总数。
- en: Create a parameter called `**[Percentage Threshold]**`. Set the data type to
    a float with 0.01 as the current value. Display the number format as a percentage.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建名为 `**[百分比阈值]**` 的参数。将数据类型设置为浮点数，当前值为 0.01。以百分比格式显示数值。
- en: Create a set based on the [Merchant Category] dimension. This will be a formula
    set based on the calculation that the percent of the total is greater than or
    equal to the parameter. Right-click [Merchant Category] in the Data pane and choose
    Create → Set.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基于 [商户类别] 维度创建一个集合。这将是一个基于计算的公式集合，其中总数的百分比大于或等于参数。在数据窗格中右键单击 [商户类别]，选择创建 → 集合。
- en: 'In the Create Set dialog box, select “Use all” and then navigate to Condition
    tab and enter the following in the “By formula” text box:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“创建集合”对话框中，选择“使用全部”，然后导航到“条件”选项卡并在“按公式”文本框中输入以下内容：
- en: '[PRE0]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Create a calculated dimension called `**[Merchant Category to Display]**`:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建名为 `**[要显示的商户类别]**` 的计算维度：
- en: '[PRE1]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Drag the new [Merchant Category to Display] dimension on top of [Merchant Category]
    on the Rows shelf.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新的 [要显示的商户类别] 维度拖放到行架上的 [商户类别] 上方。
- en: Drag [Merchant Category Set] to the left of [Merchant Category to Display].
    This will organize the way the categories are listed. Right-click and hide the
    header.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 [商户类别集] 拖到 [要显示的商户类别] 的左侧。这将组织类别的显示顺序。右键单击并隐藏标题。
- en: Finish up the visualization by right-clicking and adding the [Percentage Threshold]
    parameter to the sheet. Also right-click and hide the field header for [Merchant
    Category to Display]. Add labels by clicking Label on the Marks card and selecting
    the “Show mark labels” check-box.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过右键单击并将 [百分比阈值] 参数添加到工作表来完成可视化。同样，右键单击并隐藏 [要显示的商户类别] 的字段标题。通过在标记卡上单击 Label
    并选中“显示标记标签”复选框来添加标签。
- en: The updated analysis is much more flexible to the audience’s preferences. Now,
    they have contextual information about the percentage of the total, and input
    to determine how much data is shown. This visualization is a step ahead of the
    bar chart with the sum of spending, because we are no longer sacrificing knowing
    the total distribution of data.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 更新后的分析更加灵活地满足观众的偏好。现在，他们有关于总数百分比的上下文信息，并且能够决定显示多少数据。这种可视化已经超越了只有支出总和的条形图，因为我们不再牺牲了解数据总分布的情况。
- en: If you’ve reached this point and still want more, you can introduce additional
    items to add even more context and feedback. Similar to our original parameter
    for Top N, these additional techniques will provide feedback to the audience as
    the chart reacts to their input, and will help enhance their trust in the chart.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经达到这一点，仍然想要更多，您可以引入额外的项目来增加更多的上下文和反馈。类似于我们最初用于Top N的参数，这些附加技术将根据观众的反馈提供反馈，并帮助增强他们对图表的信任。
- en: 'Strategy: Enhance Your Bar Chart with Color'
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：通过颜色增强您的条形图
- en: 'One addition you can make to your bar chart is color. Follow these steps for
    this enhancement:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在条形图中添加颜色。按照以下步骤进行增强：
- en: You can use the parameter as a reference line to reinforce the concept of dynamic
    entry. Right-click the [% of Total Transaction Amount] axis and choose Add Reference
    Line. Set the Scope to Entire Table, the Value to Percentage Threshold, and the
    Label to Value. Click OK.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以使用参数作为参考线，以加强动态输入概念。右键单击[% of Total Transaction Amount]轴，选择添加参考线。将范围设置为整个表格，值设置为百分比阈值，标签设置为值。点击确定。
- en: Now adjust the Percentage Threshold to 0.75% (0.0075). Notice that additional
    categories display, but none are less than 0.75%.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在将百分比阈值调整为0.75%（0.0075）。请注意，会显示额外的类别，但没有一个低于0.75%。
- en: You can also further encode the target large merchant categories by utilizing
    our set for color. Drag [Merchant Category Set] onto Color. Those merchants in
    the set will appear as one color, while those not in it and part of “All Other
    Categories” will be another color.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您还可以通过使用我们的“颜色设置”来进一步对目标大型商户类别进行编码。将[商户类别设置]拖到颜色上。设置在此集合中的商户将显示为一种颜色，而不在其中且属于“所有其他类别”的商户将显示为另一种颜色。
- en: '[Figure 1-5](#the_same_bar_chartcomma_now_with_color_e) shows the result.'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[图 1-5](#the_same_bar_chartcomma_now_with_color_e) 显示了结果。'
- en: '![The same bar chart, now with color encoding to distinguish between the individual
    categories and the grouped category](Images/TAST_0105.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![相同的条形图，现在通过颜色编码区分个别类别和分组类别](Images/TAST_0105.png)'
- en: Figure 1-5\. The same bar chart, now with color encoding to distinguish between
    the individual categories and the grouped category
  id: totrans-72
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-5\. 相同的条形图，现在通过颜色编码区分个别类别和分组类别
- en: Well done! We love bar charts—they are critical tools for any analysis. While
    they can start out very simple, you can take a bar chart from basic to amazing
    through abstracted metrics and dynamic entries.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 干得好！我们喜欢条形图——它们是任何分析的关键工具。虽然它们可能一开始很简单，但通过抽象的度量和动态输入，您可以将条形图从基础提升到令人惊叹的水平。
- en: Sometimes the value is in the way you format text on and around those bar charts.
    In this section, we discuss three more ways to spice up your bar charts with formatting
    that makes them pop. You’ll continue using the Financial Institution Transactions
    dataset to build these.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候，文本在和那些条形图周围的格式化方式上的价值就体现在这里。在这一节中，我们将讨论三种更多的方法来通过格式化使你的条形图更加突出。您将继续使用金融机构交易数据集来构建这些内容。
- en: 'Strategy: Left-align Text'
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：左对齐文本
- en: 'Starting with a new worksheet, you’ll use Network to create this formatted
    bar chart:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 从一个新的工作表开始，您将使用网络创建这个格式化的条形图：
- en: Add [Network] to the Rows shelf and `SUM([Transactions])` to the Columns shelf.
    Set the view to Entire View and use the sort icon on the axis to sort the networks
    in descending order by `SUM([Transactions])`.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[网络]添加到行架上，将`SUM([交易])`添加到列架上。将视图设置为整个视图，并使用轴上的排序图标将网络按`SUM([交易])`按降序排序。
- en: Add [Network] and `SUM([Transactions])` to Label on the Marks card by holding
    down the Ctrl key and dragging each one from their respective Rows/Columns shelf.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过按住Ctrl键从各自的行/列架上拖动，将[网络]和`SUM([交易])`添加到标签上的标记卡。
- en: Right-click [Network] on the Rows shelf and deselect Show Header.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击行架上的[网络]并取消选择显示标题。
- en: To edit the label, click Label on the Marks card. In the dialog box that opens,
    click the ellipsis next to the Text option. Customize the label to read `**<Network>
    // <SUM(Transactions)>**` and to be left-aligned. We recommend setting the font
    size of the dimension to be about 1.5 times larger than the measure’s font. You
    can do this by setting <Network> to 12 and <SUM(Transactions)> to 10.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要编辑标签，请点击标记卡上的标签。在打开的对话框中，点击文本选项旁边的省略号。自定义标签为`**<Network> // <SUM(Transactions)>**`，左对齐。我们建议将维度的字体大小设置为度量的1.5倍左右。您可以通过将<Network>设置为12和<SUM(Transactions)>设置为10来完成此操作。
- en: Click Label again and adjust the horizontal alignment to be Left.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次点击标签，并调整水平对齐方式为左对齐。
- en: Right-click the axis and deselect Show Header to hide the axis for [Transactions].
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击轴，取消选中显示[Transactions]的标题以隐藏轴。
- en: From the toolbar, choose Format → Lines. Remove both the grid lines and zero
    lines by setting them to None. Set the rows’ Axis Rulers to solid black.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从工具栏中选择“格式” → “线条”。通过将它们设置为“无”，删除网格线和零线。将行的轴标尺设置为实线黑色。
- en: The result is a visualization with labels that contain the dimension name and
    the value associated with the measure ([Figure 1-6](#reformatting_a_bar_chart_can_bring_new_l)).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个可视化图表，标签包含维度名称和与度量相关的数值（[图 1-6](#reformatting_a_bar_chart_can_bring_new_l)）。
- en: '![Reformatting a bar chart can bring new life to the chart type](Images/TAST_0106.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![重新格式化柱状图表可以为图表类型带来新生命](Images/TAST_0106.png)'
- en: Figure 1-6\. Reformatting a bar chart can bring new life to the chart type
  id: totrans-86
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-6。重新格式化柱状图表可以为图表类型带来新生命
- en: 'Strategy: Create Bars with Labels on Top'
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建带有顶部标签的柱状图
- en: 'This strategy also places labels and the values directly above the bars. The
    trick about creating this bar chart is that we are not going to use the Bar mark
    type at all:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 此策略还直接将标签和值放置在柱形上方。创建此柱状图的技巧在于我们根本不会使用柱形标记类型：
- en: Right-click the worksheet from the previous strategy and duplicate it.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击上一个策略的工作表并进行复制。
- en: 'Create a calculation called `**[Baseline]**`. This calculation will be used
    to establish the baseline location of the bar charts:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建名为`**[Baseline]**`的计算。此计算将用于确定柱状图表的基线位置：
- en: '[PRE2]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Add [Baseline] to the Columns shelf. Right-click and make a dual axis. Synchronize
    the axis and then change the mark type to Gantt. Hide the axis by right-clicking
    and deselecting Show Header. You may have to change the mark type of `SUM([Transactions])`
    back to Bar. While you’re doing that, also uncheck “Show mark labels.”
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在列架上添加[基线]。右键单击并创建双轴。同步轴，然后将标记类型更改为甘特图。右键单击隐藏轴，取消选择显示标题。你可能需要将`SUM([Transactions])`的标记类型改回柱状图。在这样做的同时，取消选中“显示标记标签”。
- en: On the Marks card for [Baseline], edit the width of the Gantt chart by clicking
    Size and adjusting the slider so the Gantt bars are as wide as possible. Change
    the color to white and set the opacity to zero.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[基线]的标记卡上，通过单击“大小”并调整滑块来编辑甘特图的宽度，使甘特条尽可能宽。将颜色设置为白色，并将不透明度设置为零。
- en: Adjust the label alignment to be right-justified horizontally and at the top
    vertically.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调整标签对齐方式，水平右对齐，垂直顶部。
- en: Now you can adjust the size of the `SUM([Transactions])` bar to be smaller,
    giving the appearance of the labels from the Gantt mark sitting on top of the
    bar. [Figure 1-7](#another_reformatted_bar_chart) shows the reformatted chart.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您可以调整`SUM([Transactions])`柱的大小，使其变小，看起来标有甘特标记的标签位于柱的顶部。[图 1-7](#another_reformatted_bar_chart)显示了重新格式化的图表。
- en: '![Another reformatted bar chart](Images/TAST_0107.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![另一个重新格式化的柱状图表](Images/TAST_0107.png)'
- en: Figure 1-7\. Another reformatted bar chart
  id: totrans-97
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-7。另一个重新格式化的柱状图表
- en: 'Strategy: Create a Percent-of-Maximum Bar Chart'
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建最大百分比柱状图
- en: 'For this example, you’ll build another bar chart ([Figure 1-8](#a_percent-of-maximum_bar_chart)),
    but this time the background of the bar will also be highlighted with color:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 举例说明，你将构建另一个柱状图表（[图 1-8](#a_percent-of-maximum_bar_chart)），但这次柱的背景也将用颜色突出显示：
- en: 'Create a calculation called `**[Total Bar]**`:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建名为`**[Total Bar]**`的计算：
- en: '[PRE3]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Tip
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: We’re going to use this calculation to represent 100% of the transaction amount
    within the visualization.
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们将使用此计算来在可视化中表示交易金额的100%。
- en: Add [Network] to the Rows shelf.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[Network]添加到行架上。
- en: Add [Total Bar] to the Columns shelf. Fix the axis to start at 0 and stop at
    1.1\. You can do this by right-clicking the axis and selecting Edit Axis. In the
    dialog box, set the Range to Fixed and use 0 as the fixed start and 1.1 as the
    fixed end.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将“Total Bar”添加到“Columns”架上。将轴固定在0开始到1.1结束。您可以通过右键单击轴并选择“编辑轴”来执行此操作。在对话框中，将范围设置为固定，并使用0作为固定起点，1.1作为固定终点。
- en: Set the color opacity to 40%. Drag `SUM([Transactions])` to Label.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将颜色不透明度设置为40%。将`SUM([Transactions])`拖到标签中。
- en: 'Create a measure called `**[Percent of Maximum]**`:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`**[Percent of Maximum]**`的度量：
- en: '[PRE4]'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Add this new measure to the Columns shelf. Create a dual axis and synchronize
    the axes. You may have to change your mark types back to Bar. Remove [Measure
    Names] from Color on all Marks cards. Remove the label from the [Percent of Maximum
    Transactions] Marks card.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将这个新的度量添加到“Columns”架上。创建一个双轴并同步轴。您可能需要将标记类型更改回柱形。在所有标记卡上删除“[Measure Names]”的颜色。从“[Percent
    of Maximum Transactions]”标记卡中删除标签。
- en: Sort the networks by clicking the axis and selecting descending order. Then
    hide both axis headers. Adjust the sizing of the bar charts to be at the center
    tick mark on Size.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击轴并选择降序来对网络进行排序。然后隐藏两个轴标题。调整柱状图的大小以位于“大小”的中心刻度标记处。
- en: '![A percent-of-maximum bar chart](Images/TAST_0108.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![一个百分比最大柱状图](Images/TAST_0108.png)'
- en: Figure 1-8\. A percent-of-maximum bar chart
  id: totrans-112
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-8\. 一个百分比最大柱状图
- en: 'Bar-on-Bar Charts: Amplify Performance Case Study'
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 柱形-柱形图：Amplify Performance 案例研究
- en: 'Our next case study looks at a nonprofit organization, Amplify Performance
    (AP), that controls and awards grant money for creative, performing, and cultural
    arts programs and initiatives for the state of New York. Grant money is broken
    into two category types: one is related to the organization’s budget and the other
    more directly categorizes the programs’ initiatives. The AP data team tried to
    show both types with side-by-side bar charts, but the results were confusing.
    What kind of visualization would work better?'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的下一个案例研究关注非营利组织 Amplify Performance (AP)，它控制并资助纽约州的创意、表演和文化艺术项目和倡议。资助款项分为两类：一类与组织预算相关，另一类更直接地分类为项目倡议。AP
    数据团队试图用并排柱状图展示这两类数据，但结果令人困惑。什么样的可视化方式更合适？
- en: Not all categorical comparisons are going to require a simple bar chart. Sometimes
    the comparisons are more complex. For example, you might have to compare groups
    on a single metric but across two different time periods. Your audience will want
    to understand changes across members, but also how individual groups have changed
    over time.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有分类比较都需要简单的柱形图。有时比较更复杂。例如，您可能需要比较单一指标的不同时间段的群组。您的受众将希望了解成员之间的变化，以及各个组在时间上的变化。
- en: Novice developers’ first instinct in these situations is often to use a side-by-side
    bar chart. These can be effective, but they take up a lot of space. When doing
    this type of analysis, we prefer to use a bar-on-bar chart instead. In [Figure 1-9](#side-by-side_bar_charts_are_effective_bu),
    you can see the total grant sizes for 2018 and 2019 for each category in a side-by-side
    bar chart.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些情况下，新手开发者的第一反应往往是使用并排柱状图。这些可能是有效的，但它们占用了大量空间。在进行这类分析时，我们更喜欢使用柱形-柱形图。在[图1-9](#side-by-side_bar_charts_are_effective_bu)中，您可以看到2018年和2019年每个类别的总资助额的并排柱状图。
- en: '![Side-by-side bar charts are effective but take up too much space](Images/TAST_0109.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![并排柱状图虽然有效，但占用了太多空间](Images/TAST_0109.png)'
- en: Figure 1-9\. Side-by-side bar charts are effective but take up too much space
  id: totrans-118
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-9\. 并排柱状图虽然有效，但占用了太多空间
- en: 'It looks like you have all the information you really want: there are bars
    for two years, and you can quickly compare. But you’ll notice that the data is
    not sorted on the total for 2019; rather, it is sorted on the total *across* the
    two years.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来你已经得到了你真正想要的所有信息：有两年的柱形图，并且可以快速比较。但你会注意到，数据并没有按照2019年的总数排序；相反，它按照两年总数*排序*。
- en: Additionally, any comparisons we make within a group (for instance, Arts Education)
    requires the audience to do mental math to understand the magnitude of the change
    from 2018 to 2019\. It would be great to have that information directly in the
    visualization. It also might be helpful if the audience could quickly note which
    categories increased from the prior year and which decreased.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们在组内进行任何比较（例如，艺术教育）都需要观众进行心算，以理解从2018年到2019年变化的幅度。如果能在可视化中直接显示这些信息，将会非常有帮助。同样，观众也能快速了解哪些类别从前一年增加，哪些减少。
- en: You can do all of this using a bar-on bar chart, as shown in [Figure 1-10](#a_bar-on-bar_chart_is_a_better_alternati).
    Follow along to create this using the Nonprofit Grant Data dataset.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过使用条形图，如[图 1-10](#a_bar-on-bar_chart_is_a_better_alternati)所示，完成所有操作。跟随非营利性拨款数据集创建此图。
- en: '![A bar-on-bar chart is a better alternative to the side-by-side bar chart
    because it takes up less space while displaying the same information](Images/TAST_0110.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![条形内外柱图比并排条形图占用更少的空间，同时展示相同的信息](Images/TAST_0110.png)'
- en: Figure 1-10\. A bar-on-bar chart is a better alternative to the side-by-side
    bar chart because it takes up less space while displaying the same information
  id: totrans-123
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-10\. 条形内外柱图比并排条形图占用更少的空间，同时展示相同的信息。
- en: 'Strategy: Create a Bar-on-Bar Chart'
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建条形内外柱图
- en: In [Figure 1-10](#a_bar-on-bar_chart_is_a_better_alternati), we’ve placed 2019
    grant totals over the 2018 grant totals for each category. Here, your audience
    can still quickly compare groups across the base year, in this case 2019, as well
    as how that group performed versus the previous year.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图 1-10](#a_bar-on-bar_chart_is_a_better_alternati)中，我们将2019年的拨款总额放置在每个类别的2018年拨款总额上方。在此，您的观众可以快速比较基准年度（此处为2019年）各组的表现，以及该组与前一年的表现。
- en: We aided in the year-to-year comparison by adding color—we didn’t choose two
    distinct colors, but two colors with the same hue. Totals that decreased from
    the prior year are represented with a brighter, less saturated version of the
    color used to indicate totals that increased from the prior year.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过添加颜色来辅助年度比较 —— 我们并未选择两种截然不同的颜色，而是使用了同一色调的两种颜色。前一年减少的总数用较亮、饱和度较低的颜色表示。
- en: 'Finally, we added the year-over-year change as a percentage next to the total
    for 2019\. The result in [Figure 1-10](#a_bar-on-bar_chart_is_a_better_alternati)
    is a chart that consolidates three comparisons: total grant dollars across groups
    for 2019, changes in total grant dollars from 2018 to 2019 for each group, and
    changes in magnitude from 2018 to 2019.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将2019年的年度变化以百分比的形式添加到总数旁边。在[图 1-10](#a_bar-on-bar_chart_is_a_better_alternati)中，生成的图表综合了三个比较内容：2019年各组的总拨款金额、每组从2018年到2019年的拨款金额变化，以及从2018年到2019年的变化幅度。
- en: 'So how do you create this chart? Follow these steps:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，如何创建此图表呢？按照以下步骤操作：
- en: 'Create your measures. Instead of using a date dimension to partition your data,
    it’s more effective to create two separate calculations that filter to the relevant
    data inside the calculation. Let’s create a calculation for grant amounts in 2018:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建您的度量。与其使用日期维度来分隔数据，更有效的做法是创建两个分别过滤到相关数据内部的计算。让我们创建2018年拨款金额的计算：
- en: '[PRE5]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'And a calculation for grant amounts in 2019:'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以及2019年拨款金额的计算：
- en: '[PRE6]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Generally speaking, avoid hardcoding anything inside calculations. In this case,
    we’d normally use calculations or parameters to automate change as the data is
    updated. (We’ll discuss this more in [Chapter 4](ch04.xhtml#working_with_time).)
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一般而言，应避免在计算过程中硬编码任何内容。在这种情况下，我们通常使用计算或参数来在数据更新时自动化变化（详见[第 4 章](ch04.xhtml#working_with_time)）。
- en: Create the base visualization by adding [Budget Category] to Rows and both [Grant
    Amount | 2018] and [Grant amount | 2019] to Rows.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将[Budget Category]添加到行中，同时将[Grant Amount | 2018]和[Grant amount | 2019]添加到行中创建基础可视化。
- en: Create a synchronized dual-axis chart with both mark types as Bars. Be sure
    to place 2018 as the leftmost dimension in the dual axis.
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个同步的双轴图表，两个标记类型都设置为条形。确保将2018年放在双轴图表的最左侧。
- en: Change the 2019 bar size to be narrower than the 2018 bars. You might have to
    adjust both to get your bars in a happy place.
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将2019年的条形大小调窄，使其比2018年的条形更窄。您可能需要调整两者，以便使条形的位置更合适。
- en: Be sure to remove [Measure Names] from both Marks cards. (You didn’t add this;
    Tableau did this automatically when you created a dual-axis chart.)
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保从两个 Marks card 中删除[测量名称]。（这不是您添加的；当您创建双轴图表时，Tableau会自动添加这个。）
- en: Set the color on the outer bar to a light gray that is still distinguishable
    from the background, as shown in [Figure 1-11](#use_a_dual_axis_with_custom_calculations).
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将外部柱的颜色设置为浅灰色，但仍能与背景区分开，如[图 1-11](#use_a_dual_axis_with_custom_calculations)所示。
- en: '![Use a dual axis with custom calculations to create bar-on-bar charts](Images/TAST_0111.png)'
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用自定义计算创建柱对柱图表](Images/TAST_0111.png)'
- en: Figure 1-11\. Use a dual axis with custom calculations to create bar-on-bar
    charts
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-11\. 使用自定义计算创建柱对柱图表
- en: Tip
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: We prefer to make the width of our outer bars (in [Figure 1-11](#use_a_dual_axis_with_custom_calculations),
    2018) equal to the width of whitespace between bars. For our inner bars, we look
    to have the width between 50% and 75% of the outer bars’ width.
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们倾向于使我们外部柱的宽度（在[图 1-11](#use_a_dual_axis_with_custom_calculations)，2018年）等于柱之间的空白宽度。对于内部柱，我们希望其宽度介于外部柱宽度的50%至75%之间。
- en: 'We could rely on the axes for comparisons, but because we are using a horizontal
    bar chart, it makes sense to add labels:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以依赖轴来进行比较，但由于我们使用的是水平柱状图，因此添加标签是有意义的：
- en: On the [Grant Amount | 2019] Marks card, click and drag [Grant Amount | 2019]
    to Labels.
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[资助金额 | 2019] Marks card上，点击并拖动[资助金额 | 2019]到标签。
- en: 'Create a new calculation called `**[Grant Amount | % Change]**` for the percent
    change from 2018 to 2019:'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`**[资助金额 | % 变化]**`的新计算，用于从2018年到2019年的百分比变化：
- en: '[PRE7]'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: After you create the measure, right-click it and change the default settings
    of the number format, as shown in [Figure 1-12](#use_custom_formatting_to_get_your_percen).
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建度量后，右键单击它，并更改数字格式的默认设置，如[图 1-12](#use_custom_formatting_to_get_your_percen)所示。
- en: '![Use custom formatting to get your percentage displays just right](Images/TAST_0112.png)'
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用自定义格式使您的百分比显示恰到好处](Images/TAST_0112.png)'
- en: Figure 1-12\. Use custom formatting to get your percentage displays just right
  id: totrans-149
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-12\. 使用自定义格式使您的百分比显示恰到好处
- en: This will display a plus sign in front of the positive values, a minus sign
    in front of the negative values, and no sign when there is no change in the direction.
  id: totrans-150
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将显示正值前面的加号，负值前面的减号，当方向没有变化时则不显示任何符号。
- en: Add this calculation to Label as well. Now edit the text of the label. Format
    [Grant Amount | 2019] to be both larger and a darker shade than the [Grant Amount
    | % Change] measure. Your chart should look like [Figure 1-13](#the_text_editor_showing_how_you_should_f).
  id: totrans-151
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将此计算添加到标签中。现在编辑标签的文本。将[资助金额 | 2019]格式化为比[资助金额 | % 变化]度量更大且颜色更深。您的图表应如[图 1-13](#the_text_editor_showing_how_you_should_f)所示。
- en: '![The text editor showing how you should format the text labels on the visualization](Images/TAST_0113.png)'
  id: totrans-152
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![文本编辑器显示您应如何格式化可视化文本标签](Images/TAST_0113.png)'
- en: Figure 1-13\. The text editor showing how you should format the text labels
    on the visualization
  id: totrans-153
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-13\. 文本编辑器显示您应如何格式化可视化文本标签
- en: 'For this example, we’re using size 15 and size 9 fonts, respectively. Text
    colors are #000000 (black) and #555555 (dark gray), respectively. Additionally,
    we’ve added [Grant Amount | % Change] between parentheses. Your chart should look
    like [Figure 1-14](#a_look_at_the_bar-on-bar_chart_before_we).'
  id: totrans-154
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此示例中，我们分别使用了大小为15和9的字体。文本颜色分别为#000000（黑色）和#555555（深灰色）。此外，我们在括号中添加了[资助金额 |
    % 变化]。您的图表应如[图 1-14](#a_look_at_the_bar-on-bar_chart_before_we)所示。
- en: '![A look at the bar-on-bar chart before we finalize formatting](Images/TAST_0114.png)'
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![在我们最终完成格式化之前查看柱对柱图表](Images/TAST_0114.png)'
- en: Figure 1-14\. A look at the bar-on-bar chart before we finalize formatting
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-14\. 在最终格式化之前查看柱对柱图表
- en: 'To add color, create a simple Boolean called `**[Color]**` that compares 2019
    to 2018 and then add it to the [Grant Amount | 2019] Marks card:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要添加颜色，请创建一个名为`**[颜色]**`的简单布尔型变量，比较2019年和2018年的情况，然后将其添加到[资助金额 | 2019] Marks
    card：
- en: '[PRE8]'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'You can edit the color and select two colors that start with the same color:
    for instance, the base hex color #19626B for values that are True and a second
    color, #84B6BC, that is brighter and less saturated.'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以编辑颜色，并选择两种以相同颜色开头的颜色：例如，基础十六进制颜色#19626B用于True值，第二种颜色#84B6BC则更亮、饱和度较低。
- en: 'Add finishing touches:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加最后的润色：
- en: Sort your categories by total grant amounts in 2019.
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按2019年总资助金额对类别进行排序。
- en: Hide your axes and row header labels. Remove all extra lines.
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 隐藏您的轴和行标题标签。删除所有多余的线条。
- en: Remove your vertical divider. Keep your horizontal divider, but make sure it
    separates each member.
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移除垂直分隔线。保留水平分隔线，确保每个成员之间都有分隔。
- en: Your result should look like [Figure 1-15](#the_bar-on-bar_chart_after_adding_color).
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你的结果应该类似于[图 1-15](#the_bar-on-bar_chart_after_adding_color)。
- en: '![The bar-on-bar chart after adding color](Images/TAST_0115.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![添加颜色后的柱状图](Images/TAST_0115.png)'
- en: Figure 1-15\. The bar-on-bar chart after adding color
  id: totrans-166
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-15\. 添加颜色后的柱状图
- en: 'Treemaps: Amplify Performance Case Study'
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Treemaps：放大性能案例研究
- en: A *treemap* is similar to a bar chart, but uses the area of a rectangle relative
    to the height or length to encode data. If you have many members of a dimension
    and must show all members, a treemap is a great alternative to a bar chart.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '*Treemap*类似于柱状图，但使用矩形的面积相对于高度或长度来编码数据。如果一个维度有许多成员，并且必须显示所有成员，则Treemap是一个很好的替代方案。'
- en: Area is a less precise measure, but often when working with treemaps, the goal
    is not to be completely precise but rather to display all the members of a category
    in a single, compact visualization that is sorted from largest to smallest.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 面积是一个较不精确的度量，但通常在使用Treemap时，目标不是完全精确，而是要在一个单一、紧凑的可视化中显示类别的所有成员，按大小排序。
- en: One of the main benefits we’ll explore with treemaps is being able to use color
    to represent a measure or a dimension. In the example with a drillable treemap,
    we’ll use color to represent both budget categories and the program categories
    within them. We’ll then show how to display additional detailed members to the
    audience on demand. With this feature, the audience is free to explore multiple
    facets without being overwhelmed. We’ll also represent color as a measure, both
    directly and indirectly.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将探讨使用Treemap的主要好处之一，即能够使用颜色来表示度量或维度。在可钻取的Treemap示例中，我们将使用颜色来表示预算类别及其内部的项目类别。然后我们将展示如何根据需要向观众展示额外的详细成员。借助这一功能，观众可以自由探索多个方面而不感到不知所措。我们还将直接和间接地将颜色表示为度量。
- en: Next, we’ll be focusing on what to do when you need to show all members of a
    dimension in a single visualization. You’ve already seen the problem of a long
    scroll when using a bar chart, so what chart type can you employ to get around
    this barrier?
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将专注于在单个可视化中显示维度的所有成员时该如何操作。您已经看到使用柱状图时会出现长滚动的问题，那么您可以使用什么类型的图表来解决这个障碍呢？
- en: 'Imagine you are working with the nonprofit organization introduced previously,
    AP, that controls and awards grant money for creative, performing, and cultural
    arts programs and initiatives for the state of New York. Grant money is broken
    into two category types: one focused on the organization’s budget and the other
    on the programs’ initiatives.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你正在与之前介绍的非营利组织AP合作，该组织控制并拨发资助金用于纽约州的创意、表演和文化艺术项目和倡议。资助金分为两类：一类专注于组织的预算，另一类专注于项目的倡议。
- en: In this scenario, you can’t sacrifice small members. Having visibility into
    some of the smaller categories is crucial, in order to provide insight into where
    additional grant money should go.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，您不能牺牲较小的成员。能够看到一些较小类别的情况至关重要，以便提供额外资助金的去向洞察。
- en: If you’re facing a similar scenario, we recommend a treemap. While you’ll lose
    some precision in comparing your chosen measure, you will get a well-ordered and
    compact visualization that will show all the members of your dimension.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您面临类似情境，我们建议使用Treemap。虽然您可能会失去比较选择度量的某些精确性，但您将得到一个良好排序且紧凑的可视化，能够显示维度的所有成员。
- en: 'Strategy: Create a Basic Treemap'
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建基本Treemap
- en: 'Create a new worksheet using the Nonprofit Grant dataset and then follow these
    steps:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 使用非营利资助数据集创建一个新的工作表，然后按照以下步骤操作：
- en: Drag [Budget Category] to Text.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[Budget Category]拖动到文本。
- en: Drag `SUM([Grant Amount])` to Size, and Ctrl-drag this to Color as well.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`SUM([Grant Amount])`拖动到大小，然后同时将其Ctrl-拖动到颜色中。
- en: Ensure that the mark type is set to Square.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保将标记类型设置为Square。
- en: The result is shown in [Figure 1-16](#a_treemap_showing_the_budget_categories).
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 结果显示在[图 1-16](#a_treemap_showing_the_budget_categories)中。
- en: '![A treemap showing the budget categories ordered by grant amount](Images/TAST_0116.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![显示按授予金额排序的预算类别的树图](Images/TAST_0116.png)'
- en: Figure 1-16\. A treemap showing the budget categories ordered by grant amount
  id: totrans-182
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-16\. 按授予金额排序的预算类别的Treemap
- en: This will give you a full picture of how AP’s grants are distributed. No single
    budget category has a significant majority of funding, but some smaller categories
    take up less than 1%.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这将为您提供**AP**的资助分配的完整图景。没有一个单一的预算类别拥有大部分资金，但一些较小的类别占用不到1%。
- en: Tip
  id: totrans-184
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: 'The standard convention when working with treemaps is to double-encode a measure
    by using size and color. This helps to further distinguish the pieces and members.
    But it is not a requirement. As an alternative, you could consider encoding the
    categories on color. However, we recommend caution: there are many members and,
    in this case, you would be encoding redundant information.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用树状图时的标准惯例是通过大小和颜色双重编码一个度量。这有助于进一步区分各部分和成员。但这不是必需的。作为一种替代方案，您可以考虑在颜色上编码类别。然而，我们建议谨慎：这里有许多成员，而在这种情况下，您将编码冗余信息。
- en: This treemap is a great start, but takes us only halfway to providing specifics
    about the grant data. Dollars are not only divided among budgets, but also assigned
    to program categories. There are 55 unique program categories, a significant additional
    level of detail that could be overwhelming. We really need to know only which
    program categories that budget dollars are tied to within one given budget category
    at a time.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 这个树状图是一个很好的起点，但仅让我们提供了关于资助数据的具体细节一半。资金不仅分配给预算，还分配给项目类别。有55个独特的项目类别，这是一个重要的附加详细级别，可能会令人不知所措。我们确实只需要知道每次同时一个给定的预算类别内有哪些项目类别。
- en: 'To solve the next-level question of program categories within budgets, the
    AP team can create a *drillable treemap*: an interactive treemap in which the
    audience can click a specific budget category to see further information.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 要解决预算内项目类别的下一个层次的问题，**AP**团队可以创建一个*可钻取的树状图*：一个交互式的树状图，在这里观众可以点击特定的预算类别以查看更多信息。
- en: Note
  id: totrans-188
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: In the following strategy, you’re going to use set actions. Sets and set actions
    allow your end users to interact with visualizations to assign dimensions to a
    set. Here, once a dimension is part of a set, more detail will show in the drilled
    section.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下策略中，您将使用集合动作。集合和集合动作允许您的最终用户与可视化进行交互，以将维度分配给一个集合。在这里，一旦一个维度成为集合的一部分，钻取部分将显示更多细节。
- en: 'Strategy: Create Drillable Treemaps'
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建可钻取的树状图
- en: 'Let’s try creating a drillable treemap, continuing to use the Nonprofit Grant
    Data dataset:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试创建一个可钻取的树状图，继续使用非营利性资助数据集：
- en: Starting from the finished treemap from the previous strategy, create a set
    based on both [Budget Category] and [Program Category] by first dragging [Program
    Category] onto the Marks card of the treemap view. This will allow you to click
    a mark and create a set that combines both dimensions. Right-click any mark and
    create a set called `**[Program & Budget Set]**`. It doesn’t matter what values
    are in the set initially, only that there are two columns, one for each dimension.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从前一策略完成的树状图开始，通过首先将[项目类别]拖放到树状图视图的标记卡上，创建一个基于[预算类别]和[项目类别]的集合。这将允许您点击标记并创建一个集合，将两个维度结合起来。右键单击任何标记并创建一个名为`**[项目和预算集合]**`的集合。最初集合中有什么值并不重要，只要有两列，每个维度一列。
- en: 'Now create a calculated field called `**[Label Program]**`. This will evaluate
    whether something is part of the set and return the program if it is:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在创建一个名为`**[标签项目]**`的计算字段。这将评估某物是否是集合的一部分，并返回该项目：
- en: '[PRE9]'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Drag this calculated field on top of [Program Category] on the Marks card.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将这个计算字段拖放到标记卡上的[项目类别]之上。
- en: Create the drill-down functionality. Choose Worksheet → Actions → Add Action
    → Change Set Values.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建钻取功能。选择工作表 → 操作 → 添加操作 → 更改集合值。
- en: Call it `**Drill Down to Program**`. It will be run on Select. The Target Set
    is [Program & Budget Set]. The action you want when clearing the selection is
    “Remove all values from set.”
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 称之为`**深入到项目**`。它将在选择时运行。目标集是[项目和预算集合]。清除选择时您想要的操作是“从集合中删除所有值”。
- en: Drag [Budget Category] onto Color, replacing `SUM([Grant Amount])`.
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[Budget Category]拖放到颜色上，替换`SUM([Grant Amount])`。
- en: Now click Dance, and the treemap rectangle will drill in to show all the programs
    that comprise the Dance budget.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击**Dance**，树状图矩形将进入，显示组成**Dance**预算的所有项目。
- en: Notice in [Figure 1-17](#a_treemap_showing_both_the_budget_catego) that you’ve
    changed how color is leveraged here. Instead of tying color to the repetition
    of the grant spending, you are using it to distinguish the budget categories.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，在[图 1-17](#a_treemap_showing_both_the_budget_catego)中，您已经改变了颜色的使用方式。这里不再将颜色与拨款支出的重复联系起来，而是用它来区分预算类别。
- en: '![A treemap showing both the budget category and program category (the treemap
    is colored by budget category, and the size of the rectangle represents the grant
    amount)](Images/TAST_0117.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![显示预算类别和项目类别的树状图（树状图以预算类别着色，矩形的大小代表拨款金额）](Images/TAST_0117.png)'
- en: Figure 1-17\. A treemap showing both the budget category and program category
    (the treemap is colored by budget category, and the size of the rectangle represents
    the grant amount)
  id: totrans-202
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-17\. 显示预算类别和项目类别的树状图（树状图以预算类别着色，矩形的大小代表拨款金额）
- en: Let’s go back to our treemap example one more time, and take color encoding
    in one more direction. In this scenario, you’re going to start with program categories
    to create the treemap. This time, the AP team is trying to ensure not only that
    different program types are getting a sufficient distribution of funding, but
    also that diversity exists in the types of programs that are funded and supported.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次回到我们的树状图示例，进一步探讨颜色编码。在这种情况下，您将从项目类别开始创建树状图。这次，AP团队试图确保不仅各种项目类型获得了足够的资金分配，而且资助和支持的项目类型多样化存在。
- en: 'Strategy: Encode a Continuous Measure with Color'
  id: totrans-204
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：用颜色编码连续度量
- en: 'For this visualization, you’ll use color encoding to spot opportunities for
    programs to be revitalized. You’ll also use it to highlight another continuous
    measure: days since the most recent grant was funded.'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个可视化，您将使用颜色编码来发现项目复苏的机会。您还将用它来突出另一个连续度量：自最近的拨款以来的天数。
- en: 'A *continuous measure* is one that spans an infinite range, typically on a
    number line or timeline:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 一个*连续度量*是指跨越无限范围的度量，通常在数轴或时间轴上：
- en: On a new worksheet, create a treemap of [Program Category] and [Grant Amount].
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新的工作表上，创建一个关于[项目类别]和[拨款金额]的树状图。
- en: 'Create a calculated field that evaluates how long it has been since a grant
    was awarded in a category:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个计算字段，评估某类别自上次拨款以来的时间：
- en: '[PRE10]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: When you use this calculation in the view, it will evaluate the maximum or most
    recent date per [Program Category] and then calculate the number of days since
    today.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您在视图中使用此计算时，它将评估每个[项目类别]的最大或最近日期，然后计算自今天以来的天数。
- en: Put this measure on Color and change the Palette to Blue-Green Sequential reversed.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将此度量放在颜色上，并将调色板更改为蓝绿顺序反转。
- en: You can see the result in [Figure 1-18](#a_treemap_showing_grant_amount_by_progra).
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以在[图 1-18](#a_treemap_showing_grant_amount_by_progra)中看到结果。
- en: '![A treemap showing grant amount by program category; color has been encoded
    to show the number of days since the program was last funded](Images/TAST_0118.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![显示项目类别按拨款金额分类的树状图；颜色已编码以显示项目上次拨款以来的天数](Images/TAST_0118.png)'
- en: Figure 1-18\. A treemap showing grant amount by program category; color has
    been encoded to show the number of days since the program was last funded
  id: totrans-214
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-18\. 显示项目类别按拨款金额分类的树状图；颜色已编码以显示项目上次拨款以来的天数
- en: You’ve now seen three approaches to treemaps, utilizing different color-encoding
    techniques and dynamic elements that allow the audience to dig into a category
    and explore it in even more depth.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经看到三种树状图方法，利用不同的颜色编码技术和允许观众深入探索类别的动态元素。
- en: 'Pie and Donut Charts: IT Employee Wellness Project Case Study'
  id: totrans-216
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 饼图和圆环图：IT员工健康项目案例研究
- en: Our last case study in this chapter involves the IT Employee Wellness Project,
    an initiative that conducts surveys of IT professionals and their employers. The
    project investigates how IT work affects employees’ mental health, as well as
    employers’ attitudes about mental health.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的最后一个案例研究涉及IT员工健康项目，这是一个调查IT专业人员及其雇主的倡议。该项目调查了IT工作对员工心理健康的影响，以及雇主对心理健康的态度。
- en: As with most surveys, there are many questions to analyze to determine attitudes,
    but a core task is to provide a demographic overview of respondents. The project’s
    data analysts’ goal is to show gender distribution among the survey respondents
    by profession. They would also like to compare that distribution across several
    professions at the same time. What chart types would help them convey this most
    effectively to the project’s board members?
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 与大多数调查一样，有许多问题需要分析以确定态度，但核心任务是提供受访者的人口统计概述。项目的数据分析师的目标是通过职业显示调查受访者的性别分布。他们还希望同时比较几个专业中的分布。哪种图表类型能最有效地将这些传达给项目委员会？
- en: When you’re looking at a parts-to-whole relationship, a natural place to start
    is a pie chart. A *pie chart* divides a circle into slices by members of a dimension,
    and each piece represents a proportion of the whole. Some chart lovers cringe
    at the thought of a pie chart, but pie charts are familiar to most people. They
    also use space efficiently and can serve as color legends or interactive filters.
    They’re not the best choice in every situation, but they do have their place when
    used correctly.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 当您考虑到部分与整体的关系时，饼图是一个自然的起点。*饼图*将圆圈分成维度成员的片段，每个部分代表整体的一部分。一些图表爱好者一想到饼图就会退缩，但饼图对大多数人来说很熟悉。它们还能有效利用空间，并可以作为颜色图例或交互式过滤器使用。并非在每种情况下都是最佳选择，但在正确使用时它们确实有其用武之地。
- en: In our final strategy for the chapter, you’ll take your donut charts one step
    further by making *small multiples*, or repeated versions of the same chart, separated
    out by profession. This will let the data team compare gender distribution among
    several professions at the same time.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的最终策略中，您将通过制作*小倍数*或同一图表的重复版本，按专业分开，进一步发展您的甜甜圈图。这将使数据团队能够同时比较几个专业中性别分布。
- en: 'Strategy: Build a Basic Pie Chart'
  id: totrans-221
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：构建基本饼图
- en: 'Let’s start with the basic pie chart. You’ll use the IT Survey Data dataset
    to follow along:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从基本的饼图开始。你将使用 IT 调查数据集来跟随：
- en: Drag [Gender] onto Color.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 [性别] 拖动到颜色上。
- en: Change the mark type to Pie.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将标记类型更改为饼图。
- en: Create a calculated field called `**[# Respondents]**`.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为 `**[# 受访者]**` 的计算字段。
- en: '[PRE11]'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Drag [# Respondents] onto Angle. Change the colors to your choosing (we’re using
    the Summer palette and a white border). Drag [Gender] onto Label along with [#
    Respondents]. Format the Label to match the mark colors.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 [# 受访者] 拖动到角度上。根据需要更改颜色（我们使用夏季调色板和白色边框）。将 [性别] 与 [# 受访者] 一起拖动到标签上。格式化标签以匹配标记颜色。
- en: '[Figure 1-19](#a_pie_chart_showing_the_distribution_of) shows the result.'
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[图 1-19](#a_pie_chart_showing_the_distribution_of) 显示了结果。'
- en: '![A pie chart showing the distribution of gender for survey respondents](Images/TAST_0119.png)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![显示调查受访者性别分布的饼图](Images/TAST_0119.png)'
- en: Figure 1-19\. A pie chart showing the distribution of gender for survey respondents
  id: totrans-230
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 1-19\. 显示调查受访者性别分布的饼图
- en: Why does this pie chart work? First, it has only three slices; this pie doesn’t
    have many pieces, so it’s pretty easy to compare the differences. Next, you’ve
    gone the extra mile to directly label and put the percentage next to each slice.
    This makes it easy for the audience to comprehend. If you had many more values,
    or several slices of relatively the same size, our recommendation would be a bar
    chart, but here that’s clearly not the case.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么这个饼图有效？首先，它只有三个部分；这个饼图没有很多片，所以很容易比较差异。接下来，你已经走了额外的一英里，直接标记并将每个部分的百分比放在旁边。这使得观众很容易理解。如果你有更多的值，或者几个大小相似的部分，我们建议使用条形图，但在这里显然不是这种情况。
- en: 'Strategy: Build a Donut Chart'
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：构建甜甜圈图
- en: 'Now let’s turn this pie chart into a donut chart by adding a hole to its middle.
    This hole allows you to communicate an additional piece of information. In this
    case, it allows you to represent two concepts in a single chart—the number of
    respondents and the distribution of gender:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们通过在中间添加一个孔将这个饼图变成甜甜圈图。这个孔允许您传达额外的信息。在这种情况下，它允许您在单个图表中表示两个概念——受访者数量和性别分布：
- en: 'Create a dummy measure `**[MIN(1)]**`; this will be used as multiple measures
    for a dual-axis chart:'
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个虚拟测量 `**[MIN(1)]**`；这将用作双轴图表的多个测量值：
- en: '[PRE12]'
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Drag it onto Rows twice, right-click, and make a dual-axis chart. You can use
    the visualization from the previous strategy as a starting point.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将其拖动到行上两次，右键单击，创建双轴图表。您可以使用前一个策略的可视化作为起点。
- en: Make the size of the first measure the right tick on recommended size.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将第一个度量的大小设置为推荐大小的正确刻度。
- en: Right-click [# Respondents] and change it to a Percent of Total Quick Table
    Calculation. Then format the percentage to have no decimals by right-clicking
    the field and selecting Format.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击[# Respondents]，将其更改为总体快速表格计算的百分比。然后通过右键单击该字段并选择格式化，将百分比格式化为不带小数位。
- en: Click the second measure and remove all fields, except [# Respondents], which
    should be on Label. Add the text `**Respondents**` in 8 pt. font beneath the field.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击第二个度量并移除所有字段，除了[# Respondents]，它应该在标签上。在该字段下添加文本`**Respondents**`，字体大小为8 pt。
- en: Make the size of the second measure the left tick on recommended size.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将第二个度量的大小设置为推荐大小的左刻度。
- en: Align the label middle and center, and set the color of the mark to white.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将标签对齐到中间并居中，并将标记颜色设置为白色。
- en: Hide the axes and remove all lines from the chart.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 隐藏坐标轴并从图表中删除所有线条。
- en: You can see the result in [Figure 1-20](#a_donut_chart_with_the_number_of_respond).
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以在[图1-20](#a_donut_chart_with_the_number_of_respond)中看到结果。
- en: '![A donut chart with the number of respondents has been added to the center;
    the slices represent the distribution of survey respondents by gender](Images/TAST_0120.png)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![一个带有受访者数量的甜甜圈图已添加到中心；片段代表调查受访者按性别分布](Images/TAST_0120.png)'
- en: Figure 1-20\. A donut chart with the number of respondents has been added to
    the center; the slices represent the distribution of survey respondents by gender
  id: totrans-245
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-20\. 一个带有受访者数量的甜甜圈图已添加到中心；片段代表调查受访者按性别分布
- en: Now you have a donut chart that serves two purposes and is fantastic at generating
    insightful descriptions. You can say “24% of respondents were female” and immediately
    know the survey’s sample size, which will be necessary for the audience to make
    decisions from the results.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您有一个能够同时服务两个目的并且在生成深刻描述时非常出色的甜甜圈图。您可以说“24%的受访者是女性”，并立即了解调查的样本大小，这对于观众从结果中做出决策是必要的。
- en: To complete the donut chart, you could utilize it as an interactive filter;
    when a user clicks a slice, Tableau filters in subsequent visualizations. It could
    also serve the purpose of a color legend—one that does more than just say that
    green means male.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成甜甜圈图，您可以将其用作交互式过滤器；当用户点击一个片段时，Tableau会在后续的可视化中进行筛选。它还可以用作颜色图例的用途——不仅仅是说明绿色代表男性。
- en: 'Strategy: Create Small Multiples'
  id: totrans-248
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 策略：创建小多图
- en: 'Since we’re working with dessert charts, there’s one last visualization we’d
    like to introduce: the *small multiple,* which is any chart repeated multiple
    times in a smaller format. With pie and donut charts, small multiples become pretty
    powerful. You can take a dimension with more members and use that to create repetitive
    charts for comparisons.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们正在处理甜点图表，我们想介绍的最后一种可视化是*小多图*，即以较小格式重复出现的任何图表。对于饼图和甜甜圈图，小多图非常强大。您可以采用更多成员的维度，并使用它来创建重复的图表进行比较。
- en: We know the project board wants to see how gender distribution changes among
    professions. Small multiples can help you separate out the answer quickly. Yes,
    you could create a filter to select the role, but you’ll get more insight at one
    glance when you create small multiples that can show the distribution and still
    provide the sample size in context.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道项目委员会希望看到不同职业中性别分布的变化。小多图可以帮助您快速分析答案。是的，您可以创建一个筛选器来选择角色，但当您创建能显示分布并在上下文中提供样本大小的小多图时，您可以一目了然地获得更多洞察。
- en: 'Starting with the donut chart you just made, you need to make only a few tweaks:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 从您刚刚创建的甜甜圈图开始，您只需要做一些微调：
- en: Remove the word “Respondents” from the label to save space.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从标签中删除“受访者”一词以节省空间。
- en: Drag [Professional Role] onto the Columns shelf.
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将[Professional Role]拖放到列架上。
- en: You can see the result in [Figure 1-21](#a_small-multiples_donut_chartcomma_which).
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以在[图1-21](#a_small-multiples_donut_chartcomma_which)中看到结果。
- en: '![A small-multiples donut chart, which includes separating out the distribution
    by gender among different professions](Images/TAST_0121.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![一个包括将受访者人数添加到中心的小多图甜甜圈图；片段代表调查受访者按性别分布](Images/TAST_0121.png)'
- en: Figure 1-21\. A small-multiples donut chart, which includes separating out the
    distribution by gender among different professions
  id: totrans-256
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图1-21\. 小多图甜甜圈图，其中包括根据不同职业分开性别分布
- en: Now that you’ve seen some examples of pie charts, we hope you’ll recognize when
    it is appropriate to utilize them—and more importantly, when utilizing them can
    enhance the data presentation for your audience.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经看过一些饼图的示例，希望您能意识到何时适合使用它们——更重要的是，使用它们可以增强您向观众呈现数据的效果。
- en: Conclusion
  id: totrans-258
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: You’ve now had a chance to see different chart types used for categorical analysis.
    You started with a basic horizontal bar chart and quickly learned how to create
    a Top N chart to limit the data for your audience to the most relevant information.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您有机会看到不同的图表类型用于分类分析。您从基本的水平条形图开始，并迅速学会了如何创建Top N图表，以便为观众限制最相关的信息。
- en: From there, you explored dynamically grouping small categories into an Other
    bar and allowed your audience to define the scope of analysis with a parameter,
    allowing them to define the percentage contribution a category must have to be
    shown in the chart.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 从那里开始，您探索了将小类别动态分组到“其他”柱中，并允许您的观众通过参数定义分析的范围，使他们能够定义一个类别必须具有的百分比贡献才能显示在图表中。
- en: You also explored using color encoding with bar charts to further accentuate
    categorical analysis and learn some of our favorite formatting techniques to make
    bar charts pop.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 您还探索了在条形图中使用颜色编码来进一步突出分类分析，并学习了一些我们喜欢的格式化技巧，以使条形图更加生动。
- en: Next, we moved onto our case study for Amplify Performance and used a treemap
    to ensure that all members of a dimension (even really small ones!) were represented
    in a visualization. You learned how to make this chart type even more dynamic
    by allowing drill-down to further split the data. And you also used color encoding
    and dipped a toe into date calculations to show AP executives which areas may
    not be getting funding (if this was fun, wait until [Chapter 4](ch04.xhtml#working_with_time)).
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们进入了Amplify Performance的案例研究，并使用了矩形树图来确保将维度的所有成员（即使是非常小的成员！）都呈现在可视化中。您学会了如何通过允许深入分割数据来使此图表类型更加动态化。您还使用了颜色编码，并尝试了一些日期计算来向AP高管展示可能没有得到资金的区域（如果这很有趣，等到[第四章](ch04.xhtml#working_with_time)吧）。
- en: Finally, we wrapped up the chapter by exploring dessert charts, first the pie
    and then the donut chart. You learned when to effectively use a pie chart (not
    too many slices) and how to take advantage of the hole inside a donut chart to
    display two pieces of information at one time.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们通过探索甜点图表（首先是饼图，然后是甜甜圈图）来结束本章。您学会了何时有效使用饼图（不要太多切片），以及如何利用甜甜圈图内部的空洞同时显示两个信息。
- en: With all of these new techniques, we are confident you will be able to create
    flexible, compelling, and insightful visualizations that let your audience explore
    questions and analyses dynamically.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 借助所有这些新技术，我们确信您将能够创建灵活、引人入胜且有洞察力的可视化，让您的观众动态探索问题和分析。
- en: In the next chapter, we’ll introduce you to quantitative analysis—all charts
    focused on different ways to plot numerical fields and to use statistics. You’ll
    be taking the foundations you learned through creating charts and putting them
    into practice with a variety of chart types (bye bye, bar chart).
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将向您介绍定量分析——所有图表都专注于以不同方式绘制数值字段和使用统计数据。您将通过创建各种图表类型（再见，条形图）将学到的基础知识付诸实践。
