- en: Part 1\. A JavaScripter’s introduction to hardware
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第一部分．JavaScript开发者对硬件的入门
- en: This part of the book will introduce you to the fundamentals of embedded systems
    and electronic circuits. In [chapter 1](kindle_split_008.html#ch01), you’ll learn
    what *embedded systems* are and how to analyze their constituent components. We’ll
    spend some time looking at what it means for JavaScript to “control” hardware,
    and we’ll examine the different ways that JavaScript and electronics can work
    together.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分的书将向你介绍嵌入式系统和电子电路的基础。在第1章（kindle_split_008.html#ch01）中，你将了解什么是*嵌入式系统*以及如何分析其组成部分。我们将花一些时间探讨JavaScript“控制”硬件的含义，并检查JavaScript和电子学可以协同工作的不同方式。
- en: You’ll meet the Arduino Uno R3 development board in [chapter 2](kindle_split_009.html#ch02),
    which we’ll use with all of the experiments through [chapter 7](kindle_split_016.html#ch07).
    You’ll learn what the main parts of development boards do and how they interact
    with other software and hardware components. You’ll try out some basic LED experiments
    with the Uno using both the Arduino IDE and the Johnny-Five Node.js framework.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你将在[第2章](kindle_split_009.html#ch02)中遇到Arduino Uno R3开发板，我们将从第2章到第7章（kindle_split_016.html#ch07）的所有实验中使用它。你将了解开发板的主要部分的功能以及它们如何与其他软件和硬件组件交互。你将使用Arduino
    IDE和Johnny-Five Node.js框架尝试一些基本的LED实验。
- en: '[Chapter 3](kindle_split_010.html#ch03) will teach you the key fundamentals
    of electronic circuitry, diving into Ohm’s law and the relationships between voltage,
    current, and resistance. You’ll work on a breadboard, constructing series and
    parallel circuits that contain multiple LEDs.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](kindle_split_010.html#ch03) 将会教授你电子电路的关键基础，深入探讨欧姆定律以及电压、电流和电阻之间的关系。你将在面包板上工作，构建包含多个LED的串联和并联电路。'
- en: When you’re finished with this part of the book, you’ll have grasp of the basic
    embedded-system underpinnings and core circuit concepts. You’ll be ready to start
    building small, JavaScript-controlled projects with different kinds of inputs
    and outputs.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成这本书的这一部分后，你将掌握基本的嵌入式系统基础和核心电路概念。你将准备好开始构建带有不同输入和输出的小型JavaScript控制项目。
- en: Chapter 1\. Bringing JavaScript and hardware together
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第1章．将JavaScript和硬件结合
- en: '*This chapter covers*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: Components and hardware involved in hobbyist projects and the “internet of things”
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 涉及业余项目和“物联网”的组件和硬件
- en: Common components of embedded systems
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 嵌入式系统的常见组件
- en: Different methods for using JavaScript with embedded systems
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用JavaScript与嵌入式系统交互的不同方法
- en: Tools and supplies you’ll need to start building
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始构建所需的工具和材料
- en: As a JavaScript-savvy web developer, you make logical alchemy happen every day.
    But now it’s possible to wield your software-development skills in a new way,
    to program and control things in the real world. In this chapter, you’ll learn
    about the hardware involved in different kinds of projects and devices, and you’ll
    also see how JavaScript and hardware can work together.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一位熟练的JavaScript网络开发者，你每天都在进行逻辑炼金术。但现在，你可以以新的方式运用你的软件开发技能，在现实世界中编程和控制事物。在本章中，你将了解不同项目和设备中涉及的硬件，并了解JavaScript和硬件如何协同工作。
- en: We’re surrounded by little magical *things* that blend the physical world with
    the realm of the logical, connected, and virtual ([figure 1.1](#ch01fig01)). A
    keychain that broadcasts its location wirelessly so you can find it with an app
    on your smartphone. A plant pot that makes whining noises when it needs to be
    watered, or, better yet, sends you a petulant text message. Billions of such objects
    blink, beep, tweet, automatically dim the lights, make customized pots of tea,
    and otherwise perform their specialized duties across the planet.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们被一些小魔法*事物*所包围，它们将物理世界与逻辑的、连接的和虚拟的世界融合在一起（[图1.1](#ch01fig01)）。一个可以无线广播其位置的钥匙扣，这样你就可以用智能手机上的应用程序找到它。一个植物盆，当需要浇水时会发出抱怨的声音，或者更好的是，给你发送一个任性的短信。数十亿这样的物体闪烁、哔哔声、推文、自动调暗灯光、制作定制的茶，并在全球范围内执行它们的专业任务。
- en: Figure 1.1\. Oh, the magical things in our world!
  id: totrans-13
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.1\. 哦，我们世界中的神奇事物！
- en: '![](01fig01_alt.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig01_alt.jpg)'
- en: It’s fun to build this stuff. The creativity involved when crafting with these
    kinds of physical gadgets, the grassroots charm of inventive homebrew projects—these
    are the kinds of things that hold appeal for web developers. We’re cut out for
    prototyping, experimenting with new technologies, and blazing our own trails.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 构建这些设备很有趣。在用这些类型的物理小玩意儿进行创作时涉及的创造力，以及创新性家庭自酿项目的草根魅力——这些都是吸引网络开发者的东西。我们擅长原型设计，尝试新技术，并开辟自己的道路。
- en: But getting started can be intimidating. When we see all the wires and components,
    hear the jargon, stand on the outside looking in at hardware-hacking communities,
    the kinds of skills involved can feel formidable, foreign. As a JavaScript developer,
    you may be faced with some hurdles—perceived complexity, overabundant and scattered
    information, conflation of hardware and software concepts—as you make your tentative
    first forays into the world of physical hardware.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 但开始可能会让人感到害怕。当我们看到所有的电线和组件，听到行话，站在硬件黑客社区的外面时，涉及的技能可能会感觉难以逾越，陌生。作为一名JavaScript开发者，当你初次尝试进入物理硬件的世界时，可能会遇到一些障碍——感知到的复杂性、信息过多且分散，以及硬件和软件概念的混淆。
- en: We’re going to use your JavaScript know-how as an advantage, an aid to learning
    how to design and build the kinds of *things* that make up the “internet of things”
    (IoT) and inspire hardware hackers. You’ll be able to use your software-development
    skills to skip past some distractions and get focused, quickly, on the new skills
    you need to learn.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将利用你的JavaScript知识作为优势，作为学习如何设计和构建构成“物联网”（IoT）以及激发硬件黑客灵感的**事物**的辅助工具。你将能够利用你的软件开发技能跳过一些干扰，快速集中精力学习你需要掌握的新技能。
- en: To get a feel for the journey we’re taking, let’s first take a look at the kinds
    of things you’ll be learning to build. Let’s explore what we mean, exactly, when
    we say *things* or *hardware*.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 为了了解我们所要经历的旅程，让我们首先看看你将学会构建的事物类型。让我们探讨当我们说**事物**或**硬件**时，我们确切地指的是什么。
- en: 1.1\. The anatomy of hardware projects
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.1. 硬件项目的结构
- en: We could build a little gadget that would automatically turn a fan on when it
    gets warm. This miniature, independent climate-control device would continuously
    monitor the temperature of the surrounding environment. When it gets too hot,
    the fan comes on. When it’s nice and cool again, the fan turns off.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以构建一个小装置，当环境变暖时自动打开风扇。这个微型独立气候控制系统将连续监测周围环境的温度。当它变得太热时，风扇就会打开。当它变得非常凉爽时，风扇就会关闭。
- en: While we wouldn’t win any prestigious awards for the invention of this admittedly
    pedestrian contrivance, its basic ingredients are common to the other—more inspiring—things
    you’ll learn to build.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们不会因为发明这个诚然有些平凡的装置而赢得任何声望显赫的奖项，但它的基本成分与其他——更鼓舞人心——你将学会构建的事物是共通的。
- en: 1.1.1\. Inputs and outputs
  id: totrans-22
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.1. 输入和输出
- en: The most important thing—really the only thing—our temperature-triggered device
    needs to do is turn a fan on when it’s too toasty and turn it back off again when
    the area around it has cooled off. The motor-driven fan is an example of an *output
    device*.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 最重要的是——实际上也是唯一需要做的——我们的温度触发设备需要在太热时打开风扇，并在周围区域冷却后再次关闭风扇。由电机驱动的风扇是一个**输出设备**的例子。
- en: To get continuous information about the temperature of the immediate environment—so
    that the device can make decisions about when to turn the fan on or off—we need
    data from an *input*, in this case a temperature sensor ([figure 1.2](#ch01fig02)).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获取关于周围环境温度的连续信息——以便设备可以决定何时打开或关闭风扇——我们需要从**输入**获取数据，在这种情况下是一个温度传感器（[图1.2](#ch01fig02)）。
- en: Figure 1.2\. The automatic fan system needs to take *input* from a temperature
    sensor and manage the *output* of a motorized fan.
  id: totrans-25
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.2. 自动风扇系统需要从温度传感器获取**输入**，并管理电机风扇的**输出**。
- en: '![](01fig02_alt.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片描述](01fig02_alt.jpg)'
- en: '*Inputs* provide incoming data to the system, and *sensors* are a type of input
    that provides data about the physical environment. There are all kinds of sensors
    you can use in projects: sensors for light, heat, noise, vibration, vapors, humidity,
    smells, motion, flames—you name it. Some, like our fan’s temperature sensor, provide
    simple data—just a single value representing temperature—whereas others, like
    GPS or accelerometers, produce more elaborate data.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '*输入*为系统提供数据，而*传感器*是一种提供有关物理环境数据的输入类型。在项目中你可以使用各种传感器：光传感器、热传感器、噪声传感器、振动传感器、蒸汽传感器、湿度传感器、气味传感器、运动传感器、火焰传感器——等等。有些，比如我们风扇的温度传感器，提供简单的数据——只是一个代表温度的单个值——而其他，比如GPS或加速度计，则产生更复杂的数据。'
- en: A project’s *outputs* represent its net functionality to someone using it. Blinking
    lights, irritating beeping sounds, status readouts on LCD screens, a robotic arm
    moving sideways—all these are kinds of outputs. For this project, the fan is the
    sole output.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一个项目的*输出*代表其对使用者的净功能。闪烁的灯光、恼人的蜂鸣声、LCD屏幕上的状态读数、机器人臂的横向移动——这些都是输出类型。对于这个项目，风扇是唯一的输出。
- en: Not all inputs and outputs necessarily manifest in the physical world. A customer
    encountering an error when trying to order a product online (virtual input) might
    cause a red light to go on (physical output) on a device sitting on a support
    technician’s desk. Conversely, a change in soil humidity (physical sensor input)
    might cause a plant pot to send a demanding text message (virtual output).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有输入和输出都必然在物理世界中体现。当一位顾客在尝试在线订购产品时遇到错误（虚拟输入），可能会在坐在支持技术人员桌上的设备上点亮红灯（物理输出）。相反，土壤湿度的变化（物理传感器输入）可能会使花盆发送一条要求的信息（虚拟输出）。
- en: 1.1.2\. Processing
  id: totrans-30
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.2. 处理
- en: 'Our automatic fan also needs a brain, something that can pay attention to the
    temperature sensor’s readings and turn the fan on when it gets too warm. The kind
    of brain it needs is in fact a tiny computer: a processor, some memory, and the
    ability to process inputs and control outputs. When processor, memory, and I/O
    functionality are contained in a single physical package, we call the resulting
    chip a *microcontroller* ([figure 1.3](#ch01fig03)).'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的自动风扇也需要一个大脑，它能关注温度传感器的读数，并在温度过高时打开风扇。它需要的大脑实际上是一台微型计算机：一个处理器、一些内存以及处理输入和控制输出的能力。当处理器、内存和I/O功能包含在一个单一物理包中时，我们将这种芯片称为*微控制器*（[图1.3](#ch01fig03)）。
- en: Figure 1.3\. The automatic fan needs a brain. A popular option is a microcontroller,
    which combines a processor, memory, and I/O capabilities in a single package.
  id: totrans-32
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.3. 自动风扇需要一个大脑。一个流行的选择是微控制器，它将处理器、内存和I/O功能集成在一个单一组件中。
- en: '![](01fig03_alt.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![图片1.3的替代文本](01fig03_alt.jpg)'
- en: Microcontrollers (MCUs) aren’t as powerful as the general-purpose processors
    in laptops. Most can’t run a full operating system (most, not all, as you’ll see),
    but they’re cheap, reliable, small, and consume minimal power—that’s why they’re
    positively ubiquitous in hardware projects and products like our apocryphal automatic
    fan.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 微控制器（MCU）不如笔记本电脑中的通用处理器强大。大多数不能运行完整的操作系统（大多数，而不是所有，正如你将看到的），但它们便宜、可靠、小巧，功耗极低——这就是为什么它们在硬件项目和产品中如此普遍，就像我们虚构的自动风扇一样。
- en: 1.1.3\. Power, circuits, and systems
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.3. 电力、电路和系统
- en: We’ve now got input, output, and a brain—time to pull the bits together into
    a *system*. We’ll need to connect the components using one or more electronic
    circuits and provide some power. Constructing a system involves both circuit design
    and the manipulation of components in physical space ([figure 1.4](#ch01fig04)).
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了输入、输出和大脑——是时候将比特组合成一个*系统*了。我们需要使用一个或多个电子电路连接组件，并提供一些电力。构建一个系统既涉及电路设计，也涉及在物理空间中对组件的操作（[图1.4](#ch01fig04)）。
- en: Figure 1.4\. A rough schematic drawing showing how the fan’s inputs, outputs,
    and microcontroller are connected in a system with power and circuitry. Don’t
    stress out if the symbols are new to you—you’ll be learning about circuitry as
    we continue our journey.
  id: totrans-37
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.4. 一个粗略的示意图，展示了风扇的输入、输出和微控制器如何在带电和电路的系统中连接。如果你对符号不熟悉，不要担心——在我们继续旅程的过程中，你将学习有关电路的知识。
- en: '![](01fig04_alt.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图片1.4的替代文本](01fig04_alt.jpg)'
- en: Connecting wires directly to a microcontroller’s tiny *pins* would require solder
    and a very steady hand. Not to mention that we’d end up with a lot of loose parts
    awkwardly floating around. To aid hardware developers, microcontrollers are often
    mounted onto physical *development boards* ([figure 1.5](#ch01fig05)). Among other
    things, boards make it easier to connect I/O devices to the microcontroller.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 直接将电线连接到微控制器的小型*引脚*上需要焊料和非常稳定的手。更不用说我们最终会有一堆松散的部件尴尬地漂浮着。为了帮助硬件开发者，微控制器通常安装在物理*开发板*上（[图1.5](#ch01fig05)）。除了其他功能外，板子使得将I/O设备连接到微控制器更加容易。
- en: Figure 1.5\. Microcontroller-based development boards make it more convenient
    to connect input and output devices.
  id: totrans-40
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.5\. 基于微控制器的开发板使得连接输入和输出设备更加方便。
- en: '![](01fig05_alt.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig05_alt.jpg)'
- en: A development board helps, but we’re still left with a number of loose wires
    and components. To help corral this, hardware developers use a prototyping tool
    called a *breadboard* ([figure 1.6](#ch01fig06)) to lay out circuits in physical
    space.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 开发板有所帮助，但我们仍然有一堆松散的电线和组件。为了帮助整理这些，硬件开发者使用一种称为*面包板*的电路板原型工具（[图1.6](#ch01fig06)）在物理空间中布置电路。
- en: Figure 1.6\. A breadboard provides an electrically connected grid on which to
    prototype electronic circuits.
  id: totrans-43
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.6\. 面包板提供了一个电连接的网格，可以在其上原型化电子电路。
- en: '![](01fig06.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig06.jpg)'
- en: 1.1.4\. Logic and firmware
  id: totrans-45
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.4\. 逻辑和固件
- en: 'Our hardware design is moving along, but you might be wondering how the microcontroller
    knows what to do. There’s logic involved here, as shown in the following listing:
    listening to the sensor, making decisions, sending instructions to turn the fan
    on or off.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们硬件设计正在顺利进行，但你可能想知道微控制器是如何知道该做什么的。这里涉及到逻辑，如下面的列表所示：监听传感器，做出决定，发送指令来打开或关闭风扇。
- en: Listing 1.1\. Pseudo-code for temperature-triggered fan logic
  id: totrans-47
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表1.1\. 温度触发风扇逻辑的伪代码
- en: '[PRE0]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The dominant language for programming microcontrollers has long been C (or C-like
    derivatives). Writing C for microcontrollers tends to be platform-specific and
    can be quite low-level. References to specific memory addresses and bitwise operations
    are common.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 编程微控制器的占主导地位的语言长期以来一直是C（或类似派生语言）。为微控制器编写C语言通常是平台特定的，并且可能相当底层。引用特定内存地址和位操作是常见的。
- en: The code is compiled to architecture-specific assembly code. To get the code
    into the project, it is physically uploaded, or *flashed*, to the microcontroller’s
    *program memory*.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 代码被编译成特定架构的汇编代码。为了将代码上传到项目中，它需要物理上传，或*烧录*，到微控制器的*程序存储器*。
- en: This program memory is usually non-volatile memory—ROM, the kind of memory that
    lets the microcontroller “remember” the program even if it’s powered off (in contrast
    with RAM, which only retains its contents if it’s powered). The space available
    for programs is constrained, often on the order of a few tens of kilobytes, meaning
    programs that run on microcontrollers need to be carefully optimized.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这种程序存储器通常是非易失性存储器——ROM，这种存储器允许微控制器“记住”程序，即使断电（与RAM相对，RAM只有在供电时才保留其内容）。可用的程序空间有限，通常在几十千字节左右，这意味着在微控制器上运行的程序需要仔细优化。
- en: Once the program is flashed to the microcontroller, it functions as the microcontroller’s
    *firmware*—when powered, the microcontroller runs the program continuously until
    it’s programmed with something different (or otherwise reset).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦程序被烧录到微控制器中，它就作为微控制器的*固件*运行——当供电时，微控制器会连续运行程序，直到被编程为不同的内容（或以其他方式重置）。
- en: For JavaScript developers accustomed to higher-level logic, this lower-level
    specificity may feel off-putting. Fret not. This is where JavaScript can help
    us, allowing us to write programs for microcontroller-based hardware without having
    to use C or tangling ourselves up in the nitty-gritty of hexadecimal register
    addresses right off the bat.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 对于习惯于高级逻辑的JavaScript开发者来说，这种低级的具体性可能让人望而却步。不用担心。这正是JavaScript能帮到我们的地方，它允许我们为基于微控制器的硬件编写程序，而无需使用C语言或一开始就陷入十六进制寄存器地址的繁琐细节。
- en: The process of getting program firmware onto microcontrollers has also become
    a lot easier thanks both to advances in chip technology and the wide availability
    of hobbyist-friendly development boards ([figure 1.7](#ch01fig07)).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 将程序固件上传到微控制器的过程也因芯片技术的进步和爱好者友好型开发板的广泛可用性而变得容易得多（[图1.7](#ch01fig07)）。
- en: Figure 1.7\. Non-volatile program memory (EEPROM and Flash) and user-friendly
    boards have made it easier to program microcontrollers with firmware.
  id: totrans-55
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.7\. 非易失性程序存储器（EEPROM和闪存）以及用户友好的板使得用固件编程微控制器变得更加容易。
- en: '![](01fig07_alt.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig07_alt.jpg)'
- en: '*EEPROM* (electrically erasable programmable ROM), exemplified by the well-known
    *flash memory* medium, is commonly used in microcontrollers. This kind of rewritable
    memory makes it feasible to reprogram microcontrollers over and over again with
    different logic.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '*EEPROM*（电可擦可编程只读存储器），以众所周知的*闪存*介质为例，在微控制器中常用。这种可重写内存使得反复用不同逻辑重新编程微控制器成为可能。'
- en: Development boards, in addition to making I/O connections easier, also aid hardware
    hackers by providing convenient interfaces for programming the board’s microcontroller
    (USB is quite common). This alleviates the need for specialized hardware programming
    devices. These days, programming microcontrollers is often as easy as plugging
    in a USB cable and clicking a button in an IDE.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 开发板除了使 I/O 连接更容易外，还通过提供方便的接口来编程板上的微控制器（USB 非常常见），帮助硬件黑客。这减轻了对专用硬件编程设备的需求。如今，编程微控制器通常就像插入一个
    USB 线缆并在 IDE 中点击一个按钮一样简单。
- en: 1.1.5\. Enclosures and packaging
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.5\. 包装和封装
- en: Our fan’s design is almost done. But we can take it to the next level by packaging
    the auto-fan inside a nice enclosure—*embedding* our system inside of something,
    where its wires and circuits will be hidden from view ([figure 1.8](#ch01fig08)).
    Ta-da!
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们风扇的设计几乎完成了。但我们可以通过将自动风扇装入一个漂亮的包装盒来将其提升到下一个层次——*嵌入*我们的系统到某个东西里面，这样它的电线和电路就会从视线中隐藏起来（[图1.8](#ch01fig08)）。哇塞！
- en: Figure 1.8\. The completed, packaged, automatic fan is an example of an embedded
    system. Inputs and outputs are processed by a microcontroller-based microcomputer
    and supported by power and circuitry. And the whole thing is hidden inside a pretty
    fancy box, because, why not?
  id: totrans-61
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.8\. 完成并包装好的自动风扇是嵌入式系统的一个例子。输入和输出由基于微控制器的微型计算机处理，并由电源和电路支持。整个装置都隐藏在一个非常漂亮的盒子里，因为，为什么不呢？
- en: '![](01fig08.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig08.jpg)'
- en: 1.1.6\. Embedded systems
  id: totrans-63
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.1.6\. 嵌入式系统
- en: Though the term *embedded system* can sound a bit formal or forbidding, it’s
    not really too complicated. A tiny computer combining processor, memory, and I/O
    forms the brain. As you saw with our automatic fan, connecting the inputs, outputs,
    and microcomputer together and giving them power creates an independent *system*.
    We say it’s *embedded* because it’s often squirreled away inside of something—an
    enclosure, a teddy bear, a washing machine’s control panel, an umbrella.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然术语*嵌入式系统*听起来可能有点正式或令人望而却步，但实际上并不太复杂。一个结合处理器、内存和 I/O 的小型计算机构成了大脑。正如你在我们的自动风扇中看到的那样，将输入、输出和微型计算机连接起来并为其供电，就创建了一个独立的*系统*。我们称之为*嵌入式*，因为它通常被隐藏在某个东西里面——一个包装盒、一个泰迪熊、洗衣机控制面板、一把雨伞。
- en: Though an automatic fan, an umbrella that lights up when it rains, and a tweeting
    teddy bear don’t seem immediately similar, they have more in common than you might
    think. These examples, along with the majority of hardware projects and devices
    that form the IoT, can be described as *embedded systems*.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然自动风扇、雨天会发光的雨伞和会发推文的泰迪熊看起来并不立即相似，但它们比你想象的要更多共同之处。这些例子，以及构成物联网的大多数硬件项目和设备，都可以被描述为*嵌入式系统*。
- en: Now let’s see how JavaScript fits into the picture.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看看 JavaScript 如何融入这幅画面。
- en: 1.2\. How JavaScript and hardware work together
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.2\. JavaScript 和硬件如何协同工作
- en: When combining JavaScript with embedded systems, we still build electronic circuits
    in the same way as we would for other types of hardware projects. There are still
    inputs and outputs, wires and components. However, instead of using assembly code
    or C to define what the project’s microcontroller or processor does, we use JavaScript.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 当将 JavaScript 与嵌入式系统结合使用时，我们仍然以与其他类型硬件项目相同的方式构建电子电路。仍然有输入和输出、电线和组件。然而，我们不是使用汇编语言或
    C 语言来定义项目微控制器或处理器做什么，而是使用 JavaScript。
- en: 'There are several ways to do this, different *methods* for using JavaScript
    to provide the logic for hardware projects. These methods are categorized based
    on where the JavaScript logic itself executes: on a host computer separate from
    the embedded system, on the embedded system’s microcontroller, or somewhere else
    entirely.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种方法可以做到这一点，不同的*方法*用于使用 JavaScript 为硬件项目提供逻辑。这些方法根据 JavaScript 逻辑本身执行的位置进行分类：在独立的嵌入式系统之外的宿主计算机上，在嵌入式系统的微控制器上，或者完全在其他地方。
- en: 1.2.1\. Host-client method
  id: totrans-70
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.2.1\. 主-客户端方法
- en: To get around the constraints of certain microcontrollers, the *host-client
    method* allows you to execute JavaScript on a more powerful *host* computer. As
    the host runs the code, it exchanges instructions and data with the embedded hardware,
    which behaves like a *client* ([figure 1.9](#ch01fig09)).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 为了绕过某些微控制器的限制，*主机-客户端方法*允许您在更强大的*主机*计算机上执行 JavaScript。当主机运行代码时，它与嵌入式硬件交换指令和数据，嵌入式硬件表现得像*客户端*（[图
    1.9](#ch01fig09)）。
- en: Figure 1.9\. The host-client method of controlling hardware with JavaScript
  id: totrans-72
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.9\. 使用 JavaScript 控制硬件的主机-客户端方法
- en: '![](01fig09_alt.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.10](01fig09_alt.jpg)'
- en: Many microcontrollers have limitations that impact their ability to run JavaScript.
    Program memory is constrained, meaning that complex programs either won’t fit
    or have to be greatly optimized. Also, many inexpensive microcontrollers are built
    with 8- or 16-bit architectures running at clock speeds that are low relative
    to, say, desktop computers. Most wouldn’t be up to the task of running an operating
    system, ruling out the ability to run a Node.js or other JavaScript runtime directly
    on the chip.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 许多微控制器存在限制，这影响了它们运行 JavaScript 的能力。程序内存有限，这意味着复杂的程序可能无法适应或必须进行大量优化。此外，许多廉价的微控制器采用
    8 位或 16 位架构，运行速度相对于桌面计算机较低。大多数无法胜任运行操作系统的任务，从而排除了在芯片上直接运行 Node.js 或其他 JavaScript
    运行时的可能性。
- en: Instead, the host-client method involves executing JavaScript logic on a host
    computer, such as your laptop, which does have the brawn necessary to run a full
    OS. The host machine is able to run Node.js and can make use of the worldwide
    JavaScript software ecosystem (including npm and the web).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，主机-客户端方法涉及在主机计算机上执行 JavaScript 逻辑，例如您的笔记本电脑，它确实拥有运行完整操作系统所需的强大能力。主机机器能够运行
    Node.js 并可以利用全球 JavaScript 软件生态系统（包括 npm 和网络）。
- en: The trick to getting this setup to work is to make the client hardware (such
    as the microcontroller) and host system (your laptop) communicate with each other
    using a mutually intelligible “language”—a common API ([figure 1.10](#ch01fig10)).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 使这种设置工作的小技巧是让客户端硬件（如微控制器）和主机系统（您的笔记本电脑）使用一种相互理解的“语言”——一个通用的 API 进行相互通信（[图 1.10](#ch01fig10)）。
- en: Figure 1.10\. For host computer and client hardware to communicate in this method,
    they both need to use a common API.
  id: totrans-77
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.10\. 为了在这种方法下实现主机计算机和客户端硬件之间的通信，它们双方都需要使用一个通用的 API。
- en: '![](01fig10.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.10](01fig10.jpg)'
- en: To configure our automatic fan system to use this method, we’d first need to
    prepare the embedded hardware by uploading special firmware to the microcontroller’s
    program memory. Instead of a specific, single-purpose program for controlling
    the fan, this firmware program makes the microcontroller able to communicate back
    and forth with other sources that speak the same “language” (the API). That is,
    it turns the microcontroller-based hardware into a client, all ears and ready
    to do the bidding of the host computer ([figure 1.11](#ch01fig11)).
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置我们的自动风扇系统使用这种方法，我们首先需要通过将特殊固件上传到微控制器的程序内存中来准备嵌入式硬件。与用于控制风扇的特定、单一用途的程序不同，这个固件程序使微控制器能够与其他使用相同“语言”（API）的来源进行双向通信。也就是说，它将基于微控制器的硬件转变为客户端，全神贯注并准备好执行主机计算机的指令（[图
    1.11](#ch01fig11)）。
- en: Figure 1.11\. Specific firmware converts the microcontroller into a client.
  id: totrans-80
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.11\. 特定固件将微控制器转换为客户端。
- en: '![](01fig11.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.11](01fig11.jpg)'
- en: The hardware is now ready to communicate—the next step is to write software
    for the fan, using the host computer. For the hardware and software to understand
    each other, the host computer needs to bark out instructions in a language the
    microcontroller can comprehend. To make this happen, we can write code using a
    library or framework that implements the common API ([figure 1.12](#ch01fig12)).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 硬件现在已准备好进行通信——下一步是使用主机计算机编写风扇的软件。为了硬件和软件能够相互理解，主机计算机需要用微控制器能够理解的语言发出指令。为了实现这一点，我们可以使用实现通用
    API 的库或框架编写代码（[图 1.12](#ch01fig12)）。
- en: Figure 1.12\. The host also needs to communicate using the common API.
  id: totrans-83
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.12\. 主机也需要使用通用的 API 进行通信。
- en: '![](01fig12_alt.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.12](01fig12_alt.jpg)'
- en: The host is connected to the client hardware, either with a physical, cabled
    connection (often USB) or wirelessly (WiFi or Bluetooth).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 主机通过物理、有线连接（通常是 USB）或无线（WiFi 或蓝牙）连接到客户端硬件。
- en: Then we execute the fan-controlling JavaScript on the host computer. The host
    continuously communicates instructions for running the fan to the client. The
    client can also send messages back to the host, such as data from the temperature
    sensor ([figure 1.13](#ch01fig13)).
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们在宿主计算机上执行控制风扇的 JavaScript。宿主持续向客户端发送运行风扇的指令。客户端也可以向宿主发送消息，例如来自温度传感器的数据（[图
    1.13](#ch01fig13)）。
- en: Figure 1.13\. As the host executes the JavaScript logic, instructions and data
    are continuously exchanged between client and host, using a common API.
  id: totrans-87
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.13\. 当主机执行 JavaScript 逻辑时，客户端和主机之间会持续交换指令和数据，使用一个共同的 API。
- en: '![](01fig13_alt.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig13_alt.jpg)'
- en: Don’t panic, you won’t have to write low-level firmware protocol API software!
    There are straightforward, open source options for firmware and Node.js frameworks
    that implement those firmware protocols, so you can write your host-side JavaScript
    logic with minimal fuss.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 不要慌张，你不需要编写低级固件协议 API 软件！对于固件和 Node.js 框架，有直接、开源的选项来实现这些固件协议，因此你可以用最少的麻烦编写宿主端的
    JavaScript 逻辑。
- en: The benefits of the host-client approach are that it’s easy to set up and it’s
    supported on many platforms. What’s more, it gives you access to the entire Node.js
    ecosystem, while avoiding the performance and memory constraints of inexpensive
    microcontrollers. The downside is that the client hardware is helpless without
    the host—it can only do its thing when the host computer is actively running the
    software.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 主客户端方法的好处是易于设置，并且支持许多平台。更重要的是，它让你能够访问整个 Node.js 生态系统，同时避免了廉价微控制器的性能和内存限制。缺点是客户端硬件没有主机就无法工作——它只能在主机计算机积极运行软件时才能执行其功能。
- en: We’ll go wireless eventually, but we’ll be starting out with the simplest of
    host-client options—USB tethering. That means that, for a while, your projects
    will be physically attached to your computer.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最终会无线化，但我们将从最简单的宿主-客户端选项——USB 连接——开始。这意味着在一段时间内，你的项目将物理连接到你的计算机上。
- en: 1.2.2\. Embedded JavaScript
  id: totrans-92
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.2.2\. 嵌入式 JavaScript
- en: With *embedded JavaScript*, the JavaScript logic to control the project runs
    directly on the hardware’s microcontroller.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *嵌入式 JavaScript* 中，控制项目的 JavaScript 逻辑直接在硬件的微控制器上运行。
- en: Many microcontrollers aren’t up to running JavaScript natively, but some are.
    As you’d expect with the march of technology, inexpensive microcontrollers are
    getting more advanced. It has become possible to run JavaScript, or an optimized
    variant of JavaScript, directly on certain embedded processors.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 许多微控制器无法本地运行 JavaScript，但有些可以。随着技术的进步，廉价微控制器变得越来越先进。现在可以在某些嵌入式处理器上直接运行 JavaScript
    或优化的 JavaScript 变体。
- en: Each embedded-JavaScript platform is a combination of hardware and software
    ingredients working in tandem. On the hardware side, development boards up to
    the task of running code natively are based on more capable (but still cheap)
    chips.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 每个嵌入式 JavaScript 平台都是硬件和软件成分的组合，协同工作。在硬件方面，能够本地运行代码的开发板基于更强大的（但仍然便宜）的芯片。
- en: Most platforms also provide a suite of software tools to complement their hardware.
    There may be a library or framework to use for writing compatible JavaScript code
    and a CLI (command-line interface) or other method for preparing the code and
    uploading it to the microcontroller.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数平台还提供了一套软件工具来补充其硬件。可能有一个库或框架用于编写兼容的 JavaScript 代码，以及 CLI（命令行界面）或其他方法来准备代码并将其上传到微控制器。
- en: Espruino ([www.espruino.com](http://www.espruino.com)) is an example of a JavaScript-based
    embedded platform. Espruino’s flavor of JavaScript combines optimized core JavaScript
    with an API of hardware-relevant features. For example, you write code for the
    Espruino Pico board in a web-based IDE and upload it to the board via USB ([figure
    1.14](#ch01fig14)). To adapt our automatic fan for an Espruino board, we’d need
    to write the logic using Espruino’s API.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Espruino ([www.espruino.com](http://www.espruino.com)) 是一个基于 JavaScript 的嵌入式平台的例子。Espruino
    的 JavaScript 风格结合了优化的核心 JavaScript 和与硬件相关的 API。例如，你可以在基于网络的 IDE 中编写 Espruino Pico
    板的代码，并通过 USB 上传到板子上（[图 1.14](#ch01fig14)）。为了使我们的自动风扇适应 Espruino 板，我们需要使用 Espruino
    的 API 编写逻辑。
- en: Figure 1.14\. The Espruino platform combines small hardware boards with an IDE
    development environment.
  id: totrans-98
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.14\. Espruino 平台结合了小型硬件板和 IDE 开发环境。
- en: '![](01fig14_alt.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig14_alt.jpg)'
- en: Another example of embedded JavaScript is the Tessel 2 ([https://tessel.io/](https://tessel.io/)),
    a Node.js-based development platform. You can control and deploy code to your
    Tessel using the `tessel-cli` npm module—wirelessly, if you like, because Tessel
    2 has built-in WiFi ([figure 1.15](#ch01fig15)).
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 嵌入式JavaScript的另一个例子是Tessel 2（[https://tessel.io/](https://tessel.io/)），这是一个基于Node.js的开发平台。你可以使用`tessel-cli`
    npm模块控制并部署代码到你的Tessel——如果你喜欢，也可以无线部署，因为Tessel 2内置了WiFi（[图1.15](#ch01fig15)）。
- en: Figure 1.15\. The Tessel 2 is an open source platform that runs Node.js natively.
  id: totrans-101
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.15。Tessel 2是一个开源平台，可以原生运行Node.js。
- en: '![](01fig15_alt.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图1.15](01fig15_alt.jpg)'
- en: Being able to run JavaScript directly on embedded hardware can be power-efficient
    and self-contained. Projects are independent systems that can run on their own.
    Unlike the host-client setup, which requires firmware to translate from JavaScript
    to machine code, there are (usually) fewer layers of abstraction between your
    JavaScript and the hardware.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 能够在嵌入式硬件上直接运行JavaScript可以节能且自包含。项目是独立系统，可以独立运行。与需要固件将JavaScript转换为机器码的主机-客户端设置不同，通常在JavaScript和硬件之间有更少的抽象层。
- en: This sounds great, and you might wonder why we wouldn’t use this approach exclusively.
    There are a few downsides. For one, there are fewer hardware options at the moment.
    Also, each platform has its own platform-specific techniques (software, tools,
    methodology), which can muddy the waters when learning hardware basics. Most also
    have certain limitations, either in JavaScript language feature support or in
    the types of inputs and outputs supported. But it’s an inspiring method with a
    very bright future.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 这听起来很棒，你可能会想知道为什么我们不只用这种方法。有几个缺点。首先，目前硬件选项较少。此外，每个平台都有其特定的平台技术（软件、工具、方法），这些可能会在学习硬件基础知识时混淆视听。大多数平台也有一定的限制，要么是在JavaScript语言功能支持上，要么是在支持的输入和输出类型上。但这是一个鼓舞人心的方法，有着非常光明的未来。
- en: 1.2.3\. Other hardware-JavaScript combinations
  id: totrans-105
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.2.3。其他硬件-JavaScript组合
- en: Aside from the host-client method and running embedded JavaScript, there are
    a few other ways to combine JavaScript with hardware projects.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 除了主机-客户端方法和运行嵌入式JavaScript之外，还有几种方法可以将JavaScript与硬件项目结合。
- en: Tiny, *single-board computers* (SBCs) blend the host and the client into one
    unit. Cloud-based services make it possible to write JavaScript code online and
    deploy it wirelessly to hardware. And emerging, new, and experimental features
    in web browsers themselves may offer a portal into the world of hardware for millions
    of web developers.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 小型、*单板计算机*（SBCs）将主机和客户端合并为一个单元。基于云的服务使得在线编写JavaScript代码并无线部署到硬件成为可能。而且，浏览器本身的新兴、新功能和实验性特性可能为成千上万的网络开发者打开通往硬件世界的大门。
- en: Running JavaScript on tiny computers (SBCs)
  id: totrans-108
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 在小型计算机（SBCs）上运行JavaScript
- en: Single-board computers (SBCs) like the Raspberry Pi family and BeagleBone Black
    can run full OS environments (typically Linux), and, by extension, Node.js. Instead
    of an 8- or 16-bit microcontroller, SBCs have higher-performance, general-purpose
    processors. But many SBCs also have I/O pins and capabilities built right into
    the same board ([figure 1.16](#ch01fig16)).
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于树莓派系列和BeagleBone Black这样的单板计算机（SBCs）可以运行完整的操作系统环境（通常是Linux），并且可以扩展到Node.js。与8位或16位微控制器不同，SBCs拥有更高性能的通用处理器。但许多SBCs也具有直接集成到同一板上的I/O引脚和功能（[图1.16](#ch01fig16)）。
- en: 'Figure 1.16\. Several single-board computers (SBCs): Intel Galileo, Gen 2 (top),
    Raspberry Pi 2 Model B (bottom left), and Raspberry Pi Zero (bottom right)'
  id: totrans-110
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.16。几款单板计算机（SBCs）：Intel Galileo Gen 2（顶部）、Raspberry Pi 2 Model B（左下角）和Raspberry
    Pi Zero（右下角）
- en: '![](01fig16_alt.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![图1.16](01fig16_alt.jpg)'
- en: Using an SBC to control a hardware project blends aspects of both the host-client
    method and running embedded JavaScript. The processor has to continuously run
    the JavaScript logic for the project to work (as in the host-client model), but
    the whole package is contained on one board and feels more like an independent,
    embedded setup.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 使用SBC控制硬件项目结合了主机-客户端方法和运行嵌入式JavaScript的特点。处理器必须持续运行JavaScript逻辑以使项目工作（如主机-客户端模型），但整个包都包含在一块板上，感觉更像是一个独立的、嵌入式设置。
- en: Unlike microcontrollers that run embedded JavaScript logic, though, the processor
    on an SBC doesn’t run a single-purpose program—it can simultaneously run other
    processes.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 与运行嵌入式JavaScript逻辑的微控制器不同，SBC上的处理器不运行单一用途的程序——它可以同时运行其他进程。
- en: These single-board computers are getting cheap. At this moment, there’s the
    $5 Raspberry Pi Zero (if you can get your hands on one—they’re notoriously out
    of stock) and the WiFi-enabled Pi Zero W for just a tad more. There’s no longer
    such a large cost differential between low-power microcontroller hardware and
    legitimate tiny computers with processors that rival tablets and smartphones.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这些单板计算机正在变得越来越便宜。目前，有 5 美元的 Raspberry Pi Zero（如果你能弄到的话——它们因缺货而闻名）和带 WiFi 的 Pi
    Zero W，价格略高一些。低功耗微控制器硬件和真正的微型计算机之间的成本差异已经不再那么大了，这些微型计算机的处理器性能可以与平板电脑和智能手机相媲美。
- en: Although running JavaScript on single-board computers with GPIO (general-purpose
    I/O) support gives you lots of options on one piece of packaged hardware, it has
    a few drawbacks. SBCs aren’t as low-power as many microcontroller-based boards—the
    Raspberry Pi 2 Model B draws 4 watts. The SBCs we’ll look at do have GPIO support,
    but the pin mappings and usage can be confusing and documentation sketchy or technical,
    which can be challenging if you’re just learning about hardware hacking. You’ll
    also need to be ready to face system administration hurdles, as the Linux distributions
    for SBCs, especially when combined with Node.js, can require some debugging and
    patience.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然在支持 GPIO（通用输入/输出）的单板计算机上运行 JavaScript 给你提供了很多选项，但也有一些缺点。单板计算机的功耗并不像许多基于微控制器的板那么低——Raspberry
    Pi 2 Model B 消耗 4 瓦。我们将要查看的单板计算机确实支持 GPIO，但引脚映射和用法可能令人困惑，文档可能简略或技术性，这对于刚开始学习硬件黑客的人来说可能是一个挑战。你还需要准备好面对系统管理的障碍，因为单板计算机的
    Linux 发行版，尤其是当与 Node.js 结合使用时，可能需要一些调试和耐心。
- en: Cloud-based services and the browser
  id: totrans-116
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 云服务与浏览器
- en: This last catch-all category for hardware-JavaScript combinations is admittedly
    blurry. Stuff’s changing. *Fast*. The current growth of commercial, cloud-based
    services for the IoT has taken on the proverbial hockey-stick shape, and we’re
    just seeing the very vanguard of advances that will let us directly interface
    with hardware from the browser itself.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这个最后涵盖硬件-JavaScript 组合的通用类别确实有些模糊。事物正在变化。*非常快*。目前，商业云服务在物联网领域的增长呈现出典型的曲棍球棒形状，而我们只是看到了让我们能够直接从浏览器本身与硬件交互的进步先锋。
- en: Cloud-based services try to ease the complexity of managing fleets of IoT devices
    at scale. Many of these are targeted at the enterprise. Resin.io ([figure 1.17](#ch01fig17)),
    for example, builds, packages, and deploys containerized application code to provisioned
    devices, taking care of some of the security and automation headaches for you.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 云服务试图简化大规模管理物联网设备群组的复杂性。其中许多针对企业。例如，Resin.io ([图 1.17](#ch01fig17)) 构建、打包和部署容器化应用程序代码到预配置的设备，为你处理一些安全和自动化难题。
- en: Figure 1.17\. The Resin.io service helps to streamline application deployment
    to and management of Linux-capable SBCs.
  id: totrans-119
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.17\. Resin.io 服务有助于简化将应用程序部署到和管理具备 Linux 功能的单板计算机的过程。
- en: '![](01fig17_alt.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.17 选项](01fig17_alt.jpg)'
- en: And then there’s the browser itself, where many of the most cutting-edge hardware-JavaScript
    combinations are just starting to emerge. A few browsers already allow you to
    experiment with Web Bluetooth, an API that, while not currently on the standards
    track, may be a harbinger of webby things to come. Web Bluetooth, as its name
    suggests, lets you connect to and control Bluetooth Low Energy (BLE) hardware,
    using JavaScript, from within the browser.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 然后还有浏览器本身，其中许多最前沿的硬件-JavaScript 组合才刚刚开始出现。一些浏览器已经允许你尝试 Web Bluetooth，这是一个 API，虽然目前不在标准轨道上，但可能是未来网络事物的预兆。正如其名所示，Web
    Bluetooth 允许你从浏览器内部使用 JavaScript 连接到并控制蓝牙低功耗（BLE）硬件。
- en: 'Another open project coming out of Google, the Physical Web, proposes an uncomplicated
    idea: give a small device the ability to broadcast a URL with Bluetooth Low Energy
    (BLE). A beacon used like this could transform a bus stop sign into a real-time
    arrivals tracker by broadcasting the URL to a web app with that information ([figure
    1.18](#ch01fig18)). A simple concept, but flexible.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个由谷歌推出的开源项目，物理网络，提出了一个简单的想法：赋予小型设备通过蓝牙低功耗（BLE）广播 URL 的能力。这样的信标可以将公交车站牌变成实时到达跟踪器，通过向包含该信息的网络应用广播
    URL ([图 1.18](#ch01fig18))。这是一个简单的概念，但非常灵活。
- en: Figure 1.18\. In this example application of the Physical Web, a bus stop sign
    uses a BLE beacon to broadcast a URL once per second (1); a human in the vicinity
    can scan for available beacons on their device and select the one corresponding
    to the bus stop (2); the bus-rider’s device can now fetch the URL broadcast by
    the beacon and display it in the browser (3).
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.18\. 在这个物理网应用的示例中，一个公交车站牌使用BLE信标每秒广播一个URL（1）；附近的人可以在他们的设备上扫描可用的信标并选择与公交车站相对应的信标（2）；公交乘客的设备现在可以获取信标广播的URL并在浏览器中显示它（3）。
- en: '![](01fig18_alt.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig18_alt.jpg)'
- en: Of all the marriages between JavaScript and hardware, this variant—the deeper
    integration of the web with hardware—is the most volatile. It’s simultaneously
    intriguing and unpredictable. It’s likely that the demand for more ways to build
    IoT products with JavaScript will lead to head-spinning acceleration in this space.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在JavaScript和硬件的所有结合中，这种变体——即网络与硬件的更深层次集成——是最不稳定的。它既引人入胜又不可预测。很可能会对使用JavaScript构建物联网产品的更多方式的需求导致这个领域令人头晕目眩的加速。
- en: 1.3\. Is JavaScript a good fit for hardware?
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.3\. JavaScript是否适合硬件？
- en: So maybe we can use JavaScript to hack on hardware in various ways, but should
    we? Is there utility here or is it just a self-indulgent parlor trick?
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，也许我们可以用JavaScript以各种方式对硬件进行黑客攻击，但我们真的应该这样做吗？这里是否有实用性，还是仅仅是一种自我放纵的客厅把戏？
- en: When the idea of using JavaScript with hardware first started surfacing a few
    years ago, it wasn’t met with universal enthusiasm. It was seen by some as arbitrary
    and misplaced cleverness—a *do we really have to use JavaScript everywhere?* weariness.
    Others argued that the performance of JavaScript on constrained hardware would
    never be acceptable for anything but hobby use. A certain amount of old-guard
    crustiness surfaced, comment threads bogged down with passionate excoriations
    against anything but C/C++, and naysayers warned that a higher-level language
    would obscure essential low-level hardware nuances from newcomers.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 几年前，当使用JavaScript与硬件结合的想法首次浮出水面时，并没有得到普遍的热情。有些人认为这是一种任意且不当的聪明，是一种*我们真的需要在每个地方都使用JavaScript吗？*的疲惫感。其他人则认为，在受限硬件上JavaScript的性能永远不会被接受用于任何非爱好用途。一些老派的顽固态度浮出水面，评论线程被充满激情的抨击所淹没，抨击的对象不是C/C++以外的任何东西，而且持怀疑态度的人警告说，高级语言会掩盖新手对底层硬件细微之处的理解。
- en: 'And yet, there were many who remained open-minded. *Why use JavaScript when
    C/C++ is good enough?* had a curious echo of an earlier paradigm shift in hardware:
    *Why use C when assembly language is good enough?*'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，仍有很多人保持开放的心态。*为什么使用JavaScript，当C/C++已经足够好吗？*这个问题在硬件领域早期范式转变中有一个奇怪的回声：*为什么使用C，当汇编语言已经足够好吗？*
- en: Whether it’s awesome or it sucks—and we’re not going to have that argument now—JavaScript
    is the de facto programming language of the internet. People know it, people use
    it, and it’s everywhere. JavaScript’s ubiquity gives it a unique potential to
    serve as a gateway for millions of web developers who sure would love to get going
    on the IoT.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 无论它是否令人惊叹，还是令人失望——我们现在不会争论这一点——JavaScript是互联网的事实上的编程语言。人们都知道它，人们在使用它，它无处不在。JavaScript的普遍性赋予它独特的潜力，成为数百万想要开始物联网开发的网络开发者的门户。
- en: Certain aspects of JavaScript programming lend themselves well to hardware,
    especially its proficiency at event handling and asynchronous processes. JavaScript
    is also a good tool for prototyping, a boon for fast iteration.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: JavaScript编程的某些方面非常适合硬件，特别是它在事件处理和异步处理方面的熟练程度。JavaScript也是原型设计的良好工具，对于快速迭代来说是一个福音。
- en: It’s going to be fascinating to see where we end up. The JavaScript train is
    pulling out of the hardware station, and a lot of folks are jumping on for the
    ride.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 看到我们最终会走到哪里将会非常有趣。JavaScript列车正从硬件站驶出，很多人都在跳上这趟列车。
- en: 1.4\. Putting together a hardware toolkit
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1.4\. 组装硬件工具包
- en: You’ve had a whirlwind tour of the ingredients that make up embedded systems
    and the methods of combining hardware with JavaScript. Let’s now get more specific
    about the types of physical hardware, accessories, and tools needed to concoct
    these types of projects. Then we’ll be ready to stock up a basic toolkit to get
    you started.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经快速浏览了构成嵌入式系统的成分以及将硬件与JavaScript结合的方法。现在，让我们更具体地了解制作这些类型项目所需的物理硬件、配件和工具。然后我们将准备好一个基本的工具包，让您开始。
- en: Our projects will combine a development board with input and output hardware.
    To build circuits and connect the systems together, you’ll need supporting electronic
    components, as well as wires, power, and accessories. Throw in a few basic tools
    and you’re ready to go.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的项目将结合开发板和输入输出硬件。为了构建电路和连接系统，你需要支持电子组件、电线、电源和配件。再加上一些基本工具，你就可以出发了。
- en: 1.4.1\. Development boards
  id: totrans-136
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.1\. 开发板
- en: Development boards, also called *prototyping boards* or just *boards*, are physical
    development platforms that combine a microcontroller or other processing component
    with useful supporting features ([figure 1.19](#ch01fig19)). They’re the bread
    and butter of the hardware-hacking lifestyle. Boards range in cost from just a
    few bucks to over $100 for high-end SBCs.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 开发板，也称为 *原型板* 或简称为 *板*，是结合微控制器或其他处理组件以及有用支持功能的物理开发平台（[图 1.19](#ch01fig19)）。它们是硬件黑客生活方式的基石。板的价格从几美元到高端
    SBC 的 100 多美元不等。
- en: 'Figure 1.19\. Some typical microcontroller-based development boards, clockwise
    from top left: a Tiva C-Series LaunchPad from Texas Instruments, an Arduino Uno
    R3, an Adafruit Trinket (5V model), and a Particle Photon'
  id: totrans-138
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.19\. 一些典型的基于微控制器的开发板，从左上角顺时针方向：德州仪器的 Tiva C-Series LaunchPad，Arduino Uno
    R3，Adafruit Trinket（5V 型号）和 Particle Photon
- en: '![](01fig19_alt.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图片](01fig19_alt.jpg)'
- en: Boards are centered around their brain, a combination of processor, memory,
    and I/O. 8- or 16-bit microcontrollers are at the center of straightforward, entry-level
    prototyping boards like (most) Arduinos ([figure 1.20](#ch01fig20)). Boards with
    more sophisticated 32-bit microcontrollers may be able to run embedded JavaScript.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 板的核心是其大脑，即处理器、内存和 I/O 的组合。8 位或 16 位微控制器是像（大多数）Arduino 这样的简单、入门级原型板的中心（[图 1.20](#ch01fig20)）。具有更复杂
    32 位微控制器的板可能能够运行嵌入式 JavaScript。
- en: Figure 1.20\. This Arduino Uno board is powered by the AVR ATmega 328-P, a 8-bit
    microcontroller.
  id: totrans-141
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.20\. 这块 Arduino Uno 板由 8 位微控制器 AVR ATmega 328-P 驱动。
- en: '![](01fig20_alt.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![图片](01fig20_alt.jpg)'
- en: Not all boards are microcontroller-based. More powerful SBCs are powered by
    components you’d normally find on a computer’s motherboard. The architecture of
    these boards is accordingly more complex, involving one or more miniaturized systems
    on a chip (SoCs) and additional interconnects like HDMI, audio, or Ethernet. Although
    SBCs may have physical I/O interfaces on-board—Raspberry Pis do, for instance—their
    general-purpose processors can as easily be put to use to power non-hardware-centric
    projects.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有板都是基于微控制器的。更强大的 SBC 由你通常在计算机主板上找到的组件供电。这些板的架构相应地更复杂，涉及一个或多个小型化系统芯片（SoC）和额外的互连，如
    HDMI、音频或以太网。尽管 SBC 可能具有板上的物理 I/O 接口——例如 Raspberry Pi 就有——但它们的通用处理器同样可以用于非硬件中心的项目。
- en: 1.4.2\. Input and output components
  id: totrans-144
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.2\. 输入和输出组件
- en: Oh, my, there are so many sensors and gizmos you can connect to your boards
    to enhance your projects! This is all sorts of fun, but it can also feel overwhelming
    at first. Lots of technical terms get thrown around, and there are lots of numbers,
    values, and specifications to absorb. You’ll learn to find your bearings as you
    go through this book.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 哇，你可以连接到你的板上的传感器和设备真是太多了！这很有趣，但一开始可能会感到不知所措。有很多技术术语被提及，还有很多数字、值和规格需要吸收。随着你阅读这本书，你会学会找到自己的方向。
- en: Most of the input and output components we’ll work with are simple in design
    and ready to be plugged into a breadboard (that is, they are *breadboard-friendly*).
    Some are packaged as *breakout boards*. In the same way that development boards
    make I/O easier by wiring a microcontroller’s tiny pins to connections that are
    more convenient, breakout boards make it easier to work with single-purpose sensors
    or output devices by wiring their pins to more convenient connections ([figure
    1.21](#ch01fig21)).
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将要使用的输入和输出组件设计简单，可以直接插入面包板（也就是说，它们是 *面包板友好型*）。一些组件封装为 *分线板*。与开发板通过将微控制器的微小引脚连接到更方便的连接来简化
    I/O 一样，分线板通过将它们的引脚连接到更方便的连接来简化与单用途传感器或输出设备的工作（[图 1.21](#ch01fig21)）。
- en: Figure 1.21\. An assortment of common input and output components
  id: totrans-147
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 1.21\. 常见的输入和输出组件集合
- en: '![](01fig21_alt.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图片](01fig21_alt.jpg)'
- en: 1.4.3\. Other electronic components
  id: totrans-149
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.3\. 其他电子组件
- en: Cobbling together electronic circuits requires a collection of supporting electronic
    components.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 组装电子电路需要一系列支持电子组件。
- en: Although it can feel like there are a lot of little pieces, the basic components
    like resistors, capacitors, diodes, and transistors are inexpensive and can be
    bought in convenient starter kits ([figure 1.22](#ch01fig22)). We’ll take our
    time to get to know these parts—soon they’ll feel like old pals.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然可能感觉有很多小零件，但像电阻器、电容器、二极管和晶体管这样的基本元件价格低廉，并且可以购买方便的入门套件（[图1.22](#ch01fig22)）。我们将花时间来了解这些部件——很快它们就会像老朋友一样。
- en: Figure 1.22\. Common components like these will help you build functional electronic
    circuits.
  id: totrans-152
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.22\. 这些常见的元件将帮助你构建功能性的电子电路。
- en: '![](01fig22_alt.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig22_alt.jpg)'
- en: 1.4.4\. Power, wires, and accessories
  id: totrans-154
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.4\. 电源、电线和配件
- en: One thing you’ll soon realize is that there are a whole lot of ways to power
    a project!
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 你很快就会意识到，有好多方法可以为项目供电！
- en: Development boards can be powered over USB or by plugging them into a DC adapter
    (wall wart). In many cases, other project components can take advantage of that
    same power source ([figure 1.23](#ch01fig23)).
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 开发板可以通过USB供电，或者通过插入直流适配器（壁挂式适配器）来供电。在许多情况下，其他项目组件可以利用相同的电源（[图1.23](#ch01fig23)）。
- en: Figure 1.23\. A sampling of wires and accessories for power and circuitry
  id: totrans-157
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.23\. 一些电源和电路的电线和配件样本
- en: '![](01fig23_alt.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig23_alt.jpg)'
- en: Batteries are useful for making projects wire-free, as well as for providing
    additional power at different voltages. There are many kinds of battery *snaps*
    and holders for connecting batteries to projects.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 电池对于使项目无电线以及在不同电压下提供额外电源很有用。有许多种电池*夹具*和夹持器，可以将电池连接到项目中。
- en: To connect stuff together, you’ll need wires. *Jumper wires* are precut wires.
    One particularly handy variety has pins on each end that slide easily into breadboards
    and the I/O pins on many boards. Jumper wires are great for quick prototyping.
    Alternately, *hookup wire* usually comes on a spool and can be cut to specific
    lengths as needed.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 为了连接东西，你需要电线。*跳接线*是预先切割的电线。一种特别方便的类型在每个端都有针脚，可以轻松滑入面包板和许多板上的I/O针脚。跳接线非常适合快速原型设计。另外，*连接线*通常卷在卷轴上，可以根据需要切割到特定长度。
- en: 1.4.5\. Tools
  id: totrans-161
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1.4.5\. 工具
- en: A pair of needle-nose pliers and a precision screwdriver or two are useful companions
    when building projects. You’ll want a pair of wire strippers—which usually have
    built-in wire cutters—if you’re cutting or stripping hookup wire (precut jumper
    wires don’t need to be cut or stripped). As you progress, you might want to get
    your hands on a *multimeter*, a tool for measuring voltage, current, and resistance.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 一对尖嘴钳和一把精密螺丝刀在构建项目时非常有用。如果你需要切割或剥除连接线（预先切割的跳接线不需要切割或剥除），你将需要一把电线剥皮器——通常内置电线切割器。随着你的进步，你可能想拥有一台*万用表*，这是一种测量电压、电流和电阻的工具。
- en: '|  |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Storing your electronic components
  id: totrans-164
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 存储你的电子元件
- en: As you start building projects, you’ll end up with a lot of small parts. You
    can find compartmentalized storage boxes or drawer units at hardware and hobby
    stores. Boxes and cases designed for fishing lures can make especially handy containers
    for electronic parts because their compartments are small and their dividers fit
    snugly ([figure 1.24](#ch01fig24)).
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始构建项目时，你将会有很多小零件。你可以在五金店和爱好商店找到分格的存储盒或抽屉单元。专为鱼饵设计的盒子可以特别方便地用作电子元件的容器，因为它们的隔间很小，分隔板紧密贴合（[图1.24](#ch01fig24)）。
- en: '|  |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Figure 1.24\. This compact tackle box has space in the top for tools, and storage
    for components in stacking, removable containers.
  id: totrans-167
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图1.24\. 这个紧凑的鱼饵箱顶部有空间放置工具，底部有堆叠式、可拆卸容器用于存储元件。
- en: '![](01fig24_alt.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](01fig24_alt.jpg)'
- en: It’s time to start our journey. Hacking with low-power embedded hardware can
    be fun, creative, and exciting—and it’s increasingly useful in the commercial
    world. Web developers (like you) already have skills that can be great stepping
    stones on your path. You can use the ubiquitous language of the web, JavaScript,
    to get you going and reduce roadside distractions.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候开始我们的旅程了。使用低功耗嵌入式硬件进行黑客攻击可以很有趣、富有创意和令人兴奋——它在商业世界中也越来越有用。网络开发者（就像你一样）已经拥有了可以在你的道路上成为很好的垫脚石的技术。你可以使用无处不在的网页语言JavaScript来开始你的旅程，并减少路边的干扰。
- en: 'On our adventure, you’ll get a fundamental understanding of the few basic relationships
    that make electronic circuits work. Not mathy? Don’t fret, neither am I. You’ll
    meet some helpful characters on the way: components and modules, different kinds
    of boards and software. We’ll try out different combinations of things and learn
    how to dust ourselves off and try again when we blow up an LED.'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的冒险中，您将获得理解使电子电路工作的基本关系的基本理解。不涉及数学？别担心，我也不。您将在旅途中遇到一些有用的角色：组件和模块、不同类型的板和软件。我们将尝试不同的组合，并学习如何在LED烧毁时擦干自己并再次尝试。
- en: The road goes on forever, the horizons are infinite. We won’t be able to visit
    it all, but by the end of this book you’ll be prepared to assess and use future
    technologies that haven’t yet dawned. By the time you’re midway through your travels,
    it’s likely the road you set out on will have changed remarkably. But by relying
    on some constants as your compass—hardware basics, the application of JavaScript,
    web technologies—you’ll be able to find your way.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 路途永无止境，视野无限。我们可能无法全部访问，但到这本书的结尾，您将准备好评估和使用尚未出现的未来技术。在您旅行的中途，您出发的道路可能已经发生了显著变化。但通过依赖一些常数作为您的指南针——硬件基础、JavaScript的应用、网络技术——您将能够找到自己的路。
- en: Summary
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: Starting from scratch on an embedded-electronics hobby can feel intimidating,
    but your existing JavaScript skills can give you a boost.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从零开始学习嵌入式电子爱好可能会感到令人生畏，但您现有的JavaScript技能可以给您带来帮助。
- en: Embedded systems combine a brain—a microcontroller or power-efficient processor—with
    inputs and outputs in a small package.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 嵌入式系统将一个大脑——微控制器或低功耗处理器——与输入和输出结合在一个小封装中。
- en: A microcontroller combines a processor, memory, and I/O in a single chip. Logic
    defining the behavior of a microcontroller—the firmware—is typically flashed to
    the MCU’s program memory.
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微控制器将处理器、内存和I/O集成在一个芯片中。定义微控制器行为的逻辑——固件——通常被烧录到MCU的程序内存中。
- en: 'There are several ways JavaScript can control hardware: host-client, embedded
    JavaScript, Node.js on SBCs, and even from within a browser.'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有几种方式JavaScript可以控制硬件：主机-客户端、嵌入式JavaScript、SBC上的Node.js，甚至从浏览器内部。
- en: In a host-client setup, Node.js executes on a host computer, and instructions
    and data are exchanged with the microcontroller using a messaging protocol (API).
    The project can’t function without the host computer.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在主机-客户端设置中，Node.js在主机计算机上执行，并通过消息协议（API）与微控制器交换指令和数据。该项目没有主机计算机就无法运行。
- en: Some constrained microcontrollers are optimized to run JavaScript (or a subset
    of JavaScript) directly on the chip (embedded JavaScript).
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些受限制的微控制器被优化以直接在芯片上运行JavaScript（或JavaScript的一个子集）（嵌入式JavaScript）。
- en: Single-board computers (SBCs) have more sophisticated processors and additional
    features, like USB ports or audio connections. These devices can usually run full-fledged
    OSs and often behave like tiny computers. Many give you the option of controlling
    I/O and behavior with higher-level languages like python, C++, or JavaScript.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单板计算机（SBCs）具有更复杂的处理器和附加功能，如USB端口或音频连接。这些设备通常可以运行完整的操作系统，并且通常表现得像小型计算机。许多设备允许您使用Python、C++或JavaScript等高级语言控制I/O和行为。
- en: Development boards are platforms combining a microcontroller (or other processing
    component) with handy supporting features. They provide convenient connections
    to I/O pins, allowing for quick prototyping of projects.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开发板是结合微控制器（或其他处理组件）和实用支持功能的平台。它们提供了方便的I/O引脚连接，允许快速原型设计项目。
- en: 'Building projects involves a certain amount of electronic gear: development
    boards, input and output components, basic electronic components like resistors
    and diodes, power connections, and basic tools.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建项目涉及一定数量的电子设备：开发板、输入和输出组件、基本电子元件如电阻和二极管、电源连接和基本工具。
- en: Chapter 2\. Embarking on hardware with Arduino
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第二章\. 使用Arduino开始硬件之旅
- en: '*This chapter covers*'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: What Arduino is and the features of the Arduino Uno R3 development board
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino是什么以及Arduino Uno R3开发板的功能
- en: Connecting components and power to the Arduino Uno
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将组件和电源连接到Arduino Uno
- en: Coding and uploading a sketch using the Arduino IDE to make an LED blink
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Arduino IDE编写和上传代码以使LED闪烁
- en: Configuring an Arduino Uno in a host-client setup using Firmata firmware and
    the Johnny-Five Node.js framework
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Firmata固件和Johnny-Five Node.js框架在主机-客户端设置中配置Arduino Uno
- en: Using JavaScript to control an Arduino Uno and make an LED blink
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用JavaScript控制Arduino Uno并使LED闪烁
- en: Arduino. It’s a company. It’s a project. It’s hardware. It’s a user community.
    Arduino is, well, it’s *Arduino*, a broad concept combining open source hardware
    and software with the goal of making it easy (and inexpensive) for beginners to
    build interactive devices.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino. 它是一家公司。它是一个项目。它是硬件。它是一个用户社区。Arduino 是，嗯，它就是 *Arduino*，一个结合开源硬件和软件的广泛概念，旨在使初学者构建交互式设备变得容易（且成本低廉）。
- en: Like most development boards, Arduino boards have a microprocessor, I/O pins,
    power connections, and other standard features. There are a dozen or so current
    board models, including the Uno, shown in [figure 2.1](#ch02fig01). Each Arduino
    board has standardized dimensions and layouts, such that modular *shields* can
    be used. Shields are manufactured to fit the shape of an Arduino and provide an
    extra feature—like WiFi or GPS—that isn’t provided by the board itself. (Breakout
    boards are another way to extend the functionality of development boards, but
    shields are tailored to the Arduino’s form factor specifically.)
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 与大多数开发板一样，Arduino 开发板具有微处理器、I/O 引脚、电源连接和其他标准功能。目前有大约十几种板型，包括图 2.1 中所示的 Uno。[figure
    2.1](#ch02fig01)。每个 Arduino 开发板都有标准尺寸和布局，以便使用模块化 *盾牌*。盾牌是根据 Arduino 的形状制造的，提供额外的功能——如
    WiFi 或 GPS——而这些功能本身并不由板子提供。（分线板是扩展开发板功能的另一种方式，但盾牌是专门针对 Arduino 的外形设计的。）
- en: Figure 2.1\. The Arduino Uno is Arduino’s most popular board and the one we’ll
    be exploring over the next several chapters.
  id: totrans-191
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 2.1\. Arduino Uno 是 Arduino 最受欢迎的板型，我们将在接下来的几章中对其进行探讨。
- en: '![](02fig01.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig01.jpg)'
- en: '|  |'
  id: totrans-193
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Arduino: what’s in a name?**'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '**Arduino：名字的含义是什么？**'
- en: Although all Arduino hardware (and software) is open source, meaning that you
    can easily obtain the schematics and even construct your own boards without too
    much effort, only “official” boards manufactured by the Arduino company are marketed
    using the name “Arduino.”
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管所有 Arduino 硬件（和软件）都是开源的，这意味着你可以轻松地获得原理图，甚至可以不费太多力气就构建自己的板子，但只有由 Arduino 公司制造的“官方”板子才使用“Arduino”这个名字进行市场推广。
- en: The term *Arduino-compatible board* describes boards that are manufactured to
    the same design specifications as official Arduino boards but are not necessarily
    produced by Arduino (the company).
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '*Arduino 兼容板* 这个术语描述的是按照与官方 Arduino 板相同的设计规范制造的板子，但并不一定是由 Arduino（公司）生产的。'
- en: '*Genuino* is a brand name used for Arduino boards marketed outside of the United
    States.'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '*Genuino* 是用于在美国以外市场销售的 Arduino 开发板的品牌名称。'
- en: Several products, such as the pcDuino and the Netduino, use the *-duino* suffix
    to hint at their Arduino-like qualities, and both have form factors that allow
    the use of Arduino-compatible shields. The pcDuino allows you to program using
    the Arduino programming language if you so desire (though it also supports higher-level
    languages).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 几种产品，如 pcDuino 和 Netduino，使用 *-duino* 后缀来暗示它们的 Arduino 类似特性，并且两者都具备使用 Arduino
    兼容盾牌的形态。pcDuino 允许你使用 Arduino 编程语言进行编程（尽管它也支持高级语言）。
- en: '|  |'
  id: totrans-199
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '|  |'
  id: totrans-200
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '![](tool.jpg)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](tool.jpg)'
- en: '**For this chapter, you’ll need the following:**'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '**对于本章，你需要以下内容：**'
- en: 1 Arduino Uno Revision 3 (R3)
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 Arduino Uno 版本 3 (R3)
- en: 1 USB cable (USB A to USB B)
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 USB 线缆（USB A 到 USB B）
- en: 1 standard LED (any color)
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 标准LED（任何颜色）
- en: '![](0028fig01_alt.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](0028fig01_alt.jpg)'
- en: '|  |'
  id: totrans-207
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Typically, programming the Arduino is accomplished by composing *sketches*—bits
    of code—in Arduino’s cross-platform IDE (integrated development environment) and
    uploading compiled sketches to the board’s microcontroller. Code inside of sketches
    is written in the Arduino programming language, which is similar to C++, but with
    extra hardware-controlling goodies thrown in. The IDE takes care of compiling
    sketches and sending them to the board, usually over a USB connection.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，编程 Arduino 是通过在 Arduino 的跨平台 IDE（集成开发环境）中编写 *sketches*（代码片段）来完成的，并将编译后的代码上传到板子的微控制器。sketch
    中的代码是用 Arduino 编程语言编写的，这种语言类似于 C++，但增加了额外的硬件控制功能。IDE 负责编译代码并将其发送到板子，通常是通过 USB
    连接。
- en: Arduino hardware is very popular, inexpensive, and well-tested. It’s straightforward
    to configure an Arduino with the kind of firmware that will let you control it
    using the Johnny-Five Node.js framework, so it makes an ideal jumping-off place
    for combining JavaScript and hardware.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino 硬件非常受欢迎、价格低廉且经过良好测试。配置 Arduino 以使用允许你使用 Johnny-Five Node.js 框架控制的固件非常简单，因此它成为结合
    JavaScript 和硬件的理想起点。
- en: 2.1\. Getting to know the Arduino Uno
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.1\. 了解 Arduino Uno
- en: Of all of the Arduino board models, the Arduino Uno is the most popular. It’s
    been put through its paces all over the world by hardware novices and shouldn’t
    pull any big surprises on us. It’s reliable and ubiquitous.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有 Arduino 板型中，Arduino Uno 是最受欢迎的。它已经在世界各地被硬件新手们测试过，不应该给我们带来任何大的惊喜。它是可靠且普遍的。
- en: 'In [chapter 1](kindle_split_008.html#ch01) you saw some of the common features
    of development boards, like microcontrollers, I/O pins, and connections for power.
    [Figure 2.2](#ch02fig02) shows these and the other major features of an Arduino
    Uno board:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [第 1 章](kindle_split_008.html#ch01) 中，您看到了一些开发板的常见功能，如微控制器、I/O 引脚和电源连接。![图
    2.2](#ch02fig02) 展示了这些以及其他 Arduino Uno 板的主要功能：
- en: Figure 2.2\. Major parts of an Arduino Uno
  id: totrans-213
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 2.2\. Arduino Uno 的主要部件
- en: '![](02fig02_alt.jpg)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![02fig02_alt.jpg]'
- en: '***Microcontroller*—** The Uno’s Atmel ATmega328P microcontroller has an 8-bit
    processor and 32 KB of flash memory to hold programs. Remember that a microcontroller
    combines a processor, memory, and I/O processing capabilities into a single package.'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***微控制器*—** Uno 的 Atmel ATmega328P 微控制器具有 8 位处理器和 32 KB 的闪存来存储程序。记住，微控制器将处理器、内存和
    I/O 处理能力结合到一个单一包中。'
- en: '***Connection for programming and communication*—** The USB connector lets
    you connect the Uno to your computer. You can upload programs to the Uno over
    this connection, and you can also use USB to power the board.'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***编程和通信连接*—** USB 连接器允许您将 Uno 连接到您的计算机。您可以通过此连接将程序上传到 Uno，您还可以使用 USB 为电路板供电。'
- en: '***Digital I/O pins*—** Of the Uno’s I/O pins, 14 are *digital pins*, which
    can be used either as inputs or outputs.'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***数字 I/O 引脚*—** 在 Uno 的 I/O 引脚中，有 14 个是 *数字引脚*，可以用作输入或输出。'
- en: '***Power pins*—** Several pins on the Uno give you access to a steady source
    of power and ground. You can use these to provide power to your projects.'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***电源引脚*—** Uno 上的几个引脚提供了稳定的电源和地之间的访问。您可以使用这些引脚为您的项目供电。'
- en: '***Analog input pins*—** Six of the Uno’s pins are capable of processing *analog
    input*. Digital pins can only read or produce two states (HIGH or LOW, more on
    that shortly), but analog input pins use the Uno’s onboard *analog-to-digital
    converter* (ADC) to convert analog input—different voltages—to values between
    0 and 1,023\. This is useful for obtaining data from sensors. Analog pins can
    also be used as digital pins.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***模拟输入引脚*—** Uno 的 6 个引脚能够处理 *模拟输入*。数字引脚只能读取或产生两种状态（高或低，稍后会有更多介绍），但模拟输入引脚使用
    Uno 板上的 *模拟-数字转换器* (ADC) 将模拟输入——不同的电压——转换为 0 到 1,023 之间的值。这对于从传感器获取数据很有用。模拟引脚也可以用作数字引脚。'
- en: '***DC (direct current) connector*—** If you’re not powering the board over
    USB, the Uno’s DC barrel jack lets you plug the board into a DC power adapter
    or other DC power source.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***直流 (直流) 连接器*—** 如果您不是通过 USB 为电路板供电，Uno 的直流柱状插头允许您将电路板插入直流电源适配器或其他直流电源。'
- en: '***ON light*—** The little *ON* LED lights up whenever the board is powered.'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***关于光*—** 当电路板通电时，小型的 *ON* LED 灯会亮起。'
- en: '***Reset button*—** The reset button restarts the microcontroller’s firmware
    and sets the Uno’s pins back to default levels, which is roughly analogous to
    “rebooting” the board.'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***复位按钮*—** 复位按钮会重新启动微控制器的固件，并将 Uno 的引脚恢复到默认水平，这大致相当于“重启”电路板。'
- en: 2.1.1\. Creating your first circuit with an Arduino Uno
  id: totrans-223
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.1.1\. 使用 Arduino Uno 创建您的第一个电路
- en: In software tradition, Hello World programs are a common first exercise when
    learning a new language or system—usually these programs do something trivial
    like make the words “Hello, world” print to the screen.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在软件传统中，Hello World 程序是学习新语言或系统时的常见第一个练习——通常这些程序做一些微不足道的事情，比如将“Hello, world”打印到屏幕上。
- en: Basic tricks with LEDs are the Hello World of hardware hacking. Making one light
    up and blink has been the first foray into electronics for scores of hardware
    newbies.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 LED 的基本技巧是硬件黑客的“Hello World”。让一个 LED 点亮并闪烁已经成为众多硬件新手进入电子领域的第一步。
- en: To light up an LED, you’ll need to construct a *circuit*. A circuit provides
    an unbroken pathway from power to ground along which electrons can travel. Along
    this path, the electrons might encounter and travel through components, causing
    interesting things to happen, like lighting up an LED.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 要点亮一个 LED，您需要构建一个 *电路*。电路提供了一条从电源到地之间的不间断路径，电子可以沿着这条路径移动。在这条路径上，电子可能会遇到并穿过组件，导致一些有趣的事情发生，比如点亮一个
    LED。
- en: Any gaps in the road from power to ground will ruin the whole thing—no electrons
    are going to go anywhere. To light up the LED, you need to complete a circuit
    by filling in the breaks between power and ground.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 从电源到地之间的任何间隙都会毁掉整个电路——电子无处可去。要点亮LED，你需要通过填补电源和地之间的断开来完成电路。
- en: '|  |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: To build your first circuit, you’ll need
  id: totrans-229
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 要构建你的第一个电路，你需要
- en: '![](note.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![](note.jpg)'
- en: 1 Arduino Uno
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个Arduino Uno
- en: 1 USB cable to connect the Uno to your computer’s USB port
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1根USB线，用于将Uno连接到电脑的USB端口
- en: 1 standard LED (any color)
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个标准LED（任何颜色）
- en: '|  |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: The Arduino board needs to be powered to work. There are several ways to provide
    power to an Arduino board, but the easiest for right now is to connect it to a
    USB port on your computer. Go ahead and plug the Arduino into the USB with the
    cable that was packaged with the board. The ON LED shown in [figure 2.3](#ch02fig03)
    should light up.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino板需要供电才能工作。为Arduino板供电有几种方法，但目前最简单的方法是将它连接到电脑的USB端口。使用随板子包装的电缆将Arduino插入USB。如图2.3[图](#ch02fig03)所示的ON
    LED应该会亮起。
- en: Figure 2.3\. The ON LED lights up whenever the Uno has power.
  id: totrans-236
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.3\. 当Uno有电时，ON LED会亮起。
- en: '![](02fig03.jpg)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig03.jpg)'
- en: When the board receives power, several of the board’s power pins ([figure 2.4](#ch02fig04))
    become active. When active, they provide a voltage—that is, a steady source of
    low-voltage power—and you can connect components to them, should you want to (and
    we do!).
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 当板子接收到电源时，板上的几个电源引脚（[图2.4](#ch02fig04)）会变得活跃。当活跃时，它们提供电压——即稳定的低压电源源——如果你想要的话（我们确实想要！），你可以将组件连接到它们。
- en: Figure 2.4\. Some of the Arduino Uno’s power pins. These are powered whenever
    the board is powered.
  id: totrans-239
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.4\. Arduino Uno的一些电源引脚。这些引脚在板子有电时都会供电。
- en: '![](02fig04_alt.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig04_alt.jpg)'
- en: You’ll learn more about voltages and power in [chapter 3](kindle_split_010.html#ch03),
    but [figure 2.4](#ch02fig04) provides a quick look at some of the Uno’s basic
    power pins.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 你将在第3章中了解更多关于电压和功率的知识，但[图2.4](#ch02fig04)提供了对Uno一些基本电源引脚的快速查看。
- en: Creating the LED circuit
  id: totrans-242
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 创建LED电路
- en: LEDs like the one shown in [figure 2.5](#ch02fig05) are *light-emitting diodes*—a
    kind of diode that dissipates some energy as light when current moves through
    them.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 如[图2.5](#ch02fig05)所示的LED是*发光二极管*——一种在电流通过时将部分能量以光的形式散发的二极管。
- en: Figure 2.5\. Standard LEDs have an anode (positive terminal) and a cathode (negative
    terminal). Typically, the anode is longer than the cathode, making identification
    easier. Many LEDs also have a flat spot on the negative (cathode) side.
  id: totrans-244
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.5\. 标准LED有一个阳极（正极）和一个阴极（负极）。通常，阳极比阴极长，这使得识别更容易。许多LED在负极（阴极）侧也有一个平坦的区域。
- en: '![](02fig05.jpg)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig05.jpg)'
- en: '*Diodes* are electronic components that only allow current to flow through
    in one direction—a diode won’t allow current to go through it backwards. Because
    of this, it’s important to identify the positive (*anode*) and negative (*cathode*)
    terminals of any kind of diode before trying to plug it in to anything.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '*二极管* 是一种只允许电流单向流动的电子元件——二极管不允许电流反向通过。正因为如此，在尝试将二极管插入任何东西之前，识别任何类型二极管的正极（*阳极*）和负极（*阴极*）非常重要。'
- en: The ON light on the Uno, as seen in [figure 2.5](#ch02fig05), is an LED too—a
    *surface-mount* LED. Surface-mount components are often seen in mass-produced,
    machine-built boards. They have to be soldered, and their itsy-bitsy dimensions
    make them tricky to use in projects built by hand. Instead, we’ll stick with larger,
    *through-hole* components (they have leads that fit *through* the *holes* of pins,
    breadboards, or other circuit boards) like the LED in [figure 2.5](#ch02fig05).
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: Uno上的开/关指示灯，如[图2.5](#ch02fig05)所示，也是一个LED——一个*表面贴装* LED。表面贴装元件常用于大量生产的机器制造板。它们需要焊接，并且它们微小的尺寸使得在手工项目中使用它们变得很棘手。相反，我们将坚持使用更大的、*通孔*元件（它们有适合通过*孔*的引脚、面包板或其他电路板的引线），就像[图2.5](#ch02fig05)中的LED一样。
- en: '|  |'
  id: totrans-248
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Unplug!
  id: totrans-249
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 断开连接！
- en: Always make sure to disconnect your development board from power sources before
    connecting components. If you don’t, you risk causing damage to the components
    or the board.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 在连接组件之前，务必确保将开发板从电源断开。如果不这样做，可能会损坏组件或板子。
- en: '|  |'
  id: totrans-251
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 'Now you’re ready to build the circuit to light up an LED. Before proceeding,
    make sure you unplug your Arduino Uno from USB or any other power source. Connect
    the LED to the Arduino:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你可以构建电路来点亮LED了。在继续之前，请确保你已经将Arduino Uno从USB或其他电源断开。将LED连接到Arduino：
- en: Locate the cathode (negative terminal) of your LED. See [figure 2.5](#ch02fig05)
    if you need help finding it. Plug the cathode terminal of the LED into one of
    the pins marked GND in the POWER section of the board, as in [figure 2.6](#ch02fig06).
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位你的LED的阴极（负极）。如果需要帮助找到它，请参阅[图2.5](#ch02fig05)。将LED的阴极引脚插入到板上标记为GND的电源部分中的一个引脚，如图[图2.6](#ch02fig06)所示。
- en: Figure 2.6\. Lighting up an LED with an Uno. Connecting power (3.3 V) to ground
    (GND) with the LED completes the circuit, removing any gaps and allowing electrons
    to flow through.
  id: totrans-254
  prefs:
  - PREF_IND
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.6. 使用Arduino点亮LED。通过LED将电源（3.3 V）连接到地（GND）完成电路，消除任何间隙，允许电子流动。
- en: '![](02fig06_alt.jpg)'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](02fig06_alt.jpg)'
- en: Locate the anode (positive terminal) of the LED and plug it into the pin marked
    3.3 V in the POWER section.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位LED的阳极（正极）并将其插入到电源部分标记为3.3 V的引脚。
- en: Once the LED is oriented and connected, connect the Uno to your computer with
    USB so that it has power.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 将LED定位并连接好之后，用USB将Arduino连接到你的电脑上，以便它有电源。
- en: Ta-da! You used the LED’s leads to connect power to ground, creating a circuit
    and lighting up the LED ([figure 2.6](#ch02fig06)).
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 哇！你使用了LED的引脚将电源连接到地，创建了一个电路并点亮了LED（[图2.6](#ch02fig06)）。
- en: '|  |'
  id: totrans-259
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Voltages and the Arduino Uno**'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: '**电压和Arduino Uno**'
- en: The typical operating voltage for an Arduino Uno is 5 V, and the projects you’ll
    build in the next several chapters will primarily involve circuits based on this
    voltage. That may make you curious as to why the LED in this example is connected
    to 3.3 V power. Plugging this kind of LED straight into the 5 V Arduino power
    pins gives it a little too much juice—it’s not super risky, but you might burn
    your LED out. You’ll learn more of the hows and whys of this kind of stuff as
    we go, and I’ll stop using loose terms like *juice*.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino Uno的典型工作电压是5 V，你将在接下来的几章中构建的项目将主要涉及基于这种电压的电路。这可能会让你好奇为什么这个例子中的LED连接到3.3
    V电源。直接将这种LED插入5 V的Arduino电源引脚会给它提供太多的能量——这并不特别危险，但你可能会烧毁你的LED。随着我们的深入，你将了解更多关于这种事情的做法和原因，我将停止使用像*能量*这样的松散术语。
- en: In future projects, we’ll use *resistors*, electronic components that resist
    the flow of electricity, to bring the current in the circuit to a level that’s
    less hard on LEDs and other components. For now, we’ll just use 3.3 V, which,
    at the Uno’s current, isn’t as rough on your LED.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在未来的项目中，我们将使用**电阻**，这是一种抵抗电流流动的电子元件，将电路中的电流降低到对LED和其他元件不那么“粗暴”的水平。目前，我们将使用3.3
    V电压，在Arduino的电流下，这对你的LED来说不会那么“粗暴”。
- en: Having said that, it’s never a great idea to power an LED without a current-limiting
    resistor for long periods of time, so don’t leave your Uno-LED arrangement plugged
    in for longer than a few minutes or so (you may notice your LED getting warm to
    the touch the longer it’s lit).
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 话虽如此，长时间不使用限流电阻给LED供电绝不是什么好主意，所以不要让你的Arduino-LED配置长时间插着电（你可能注意到LED亮的时间越长，触摸起来越热）。
- en: '|  |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: By connecting power from the 3.3 V pin to ground through an LED, you completed
    a circuit ([figure 2.7](#ch02fig07)). Power is able to flow through this circuit
    and, as a nice side effect, it makes your LED glow.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将3.3 V引脚的电源通过LED连接到地，你完成了一个电路（[图2.7](#ch02fig07)）。电源能够通过这个电路流动，并且作为一个很好的副作用，它使你的LED发光。
- en: Figure 2.7\. A diagram of the basic LED circuit. In the conventional way of
    representing circuits, power flows from positive to negative. Power flows into
    the anode (positive) end of the LED and out of the cathode (negative) end.
  id: totrans-266
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.7. 基本LED电路的示意图。在传统的电路表示方法中，电源从正极流向负极。电源流入LED的正极（阳极）并从负极（阴极）流出。
- en: '![](02fig07_alt.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig07_alt.jpg)'
- en: You could have constructed the basic LED circuit with any low-voltage power
    source, like batteries. There’s no logic involved, so you didn’t technically need
    a development board (though the Uno’s steady power source is handy). But things
    get more interesting when you program the Arduino to do different things—let’s
    try that now.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以用任何低电压电源，如电池，构建基本的LED电路。这里没有逻辑问题，所以你实际上不需要开发板（尽管Arduino的稳定电源很方便）。但是，当你用Arduino编程做不同的事情时，事情就变得更有趣了——现在我们就试试看。
- en: 2.2\. Working with the Arduino workflow
  id: totrans-269
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2. 使用Arduino工作流程
- en: Before we bring JavaScript into the Arduino mix, let’s make your LED blink using
    the typical Arduino workflow. It’s helpful to see how the Arduino works in its
    stock form before we heap a layer of JavaScript abstraction atop it.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们将JavaScript引入Arduino混合之前，让我们使用典型的Arduino工作流程让你的LED闪烁。在我们在Arduino上堆叠一层JavaScript抽象之前，看看Arduino在原始形式下的工作方式是有帮助的。
- en: 2.2.1\. Arduino Uno’s digital pins
  id: totrans-271
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.1\. Arduino Uno的数字引脚
- en: No Hello World LED situation is complete without making it blink.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 没有让LED闪烁的Hello World情况是不完整的。
- en: But you can’t make the LED blink using the pins it was connected to in the previous
    exercise. The 3.3 V power pin will always be powered whenever the board itself
    is powered—the LED will always be lit because the circuit will always be complete.
    What we need to do instead is control an LED that’s connected to one of the Arduino’s
    programmable digital pins—pins 0 through 13 on the Uno ([figure 2.8](#ch02fig08)).
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 但你不能使用之前练习中连接的引脚来使LED闪烁。3.3 V电源引脚在板本身供电时始终会供电——LED始终会亮，因为电路始终是完整的。我们真正需要做的是控制连接到Arduino的可编程数字引脚（在Uno上为0到13号引脚）的LED——([图2.8](#ch02fig08))。
- en: Figure 2.8\. Arduino Uno’s digital pins
  id: totrans-274
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.8\. Arduino Uno的数字引脚
- en: '![](02fig08_alt.jpg)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig08_alt.jpg)'
- en: 'A configured digital pin can have one of two states: HIGH or LOW. This binary
    logic may feel familiar to you as a programmer—the true/false, 1/0, yep/nope duality
    is a seminal theme in software development and digital architecture in general.'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 配置的数字引脚可以有两种状态之一：高电平或低电平。这种二进制逻辑可能对你这个程序员来说很熟悉——真/假、1/0、是的/不是的二分法是软件开发和数字架构的一般性主题。
- en: On a hardware level, HIGH and LOW logic corresponds to voltages. When a digital
    pin is configured as an output, a HIGH state means the pin is providing voltage,
    so there’s power applied to that pin (in Uno’s case, 5 V or near to it)—it is,
    in effect, *on*. LOW means that the voltage on the pin is at or near 0 V—the pin
    is effectively *off*.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 在硬件层面，高低逻辑对应于电压。当数字引脚被配置为输出时，高电平状态意味着引脚正在提供电压，因此该引脚上有电源施加（在Uno的情况下，是5 V或接近5
    V）——它实际上是*开启*的。低电平意味着引脚上的电压在或接近0 V——引脚实际上是*关闭*的。
- en: Programming a digital pin configured as an output to cycle between HIGH and
    LOW is the ticket to making a connected LED blink.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 将配置为输出的数字引脚编程为在高低电平之间循环，这是使连接的LED闪烁的关键。
- en: '|  |'
  id: totrans-279
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Digital inputs
  id: totrans-280
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 数字输入
- en: When a digital pin is configured as an input pin, the HIGH and LOW states are
    also at play, but in a slightly more nuanced way. More about that when we talk
    about digital sensors in a later chapter.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个数字引脚被配置为输入引脚时，高电平和低电平状态也在发挥作用，但方式稍微细腻一些。关于这一点，我们将在后面的章节中讨论数字传感器。
- en: '|  |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 2.2.2\. Sketches and the Arduino IDE
  id: totrans-283
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.2\. 草图和Arduino IDE
- en: To configure and program the digital pins on the Uno, you’ll need to write a
    sketch and upload it to the board using the Arduino IDE.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置和编程Uno上的数字引脚，你需要编写一个草图并将其通过Arduino IDE上传到板子上。
- en: Head over to the Arduino software page ([www.arduino.cc/en/Main/Software](http://www.arduino.cc/en/Main/Software))
    and download the latest version of the Arduino IDE for your OS platform. It’s
    free and it supports Windows, Mac OS, and Linux. After installing the software,
    launch the IDE. You’ll see something similar to [figure 2.9](#ch02fig09).
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 访问Arduino软件页面([www.arduino.cc/en/Main/Software](http://www.arduino.cc/en/Main/Software))，下载适用于你的操作系统平台的最新版本的Arduino
    IDE。它是免费的，支持Windows、Mac OS和Linux。安装软件后，启动IDE。你会看到类似于[图2.9](#ch02fig09)的内容。
- en: Figure 2.9\. The first time you launch the Arduino IDE, it will create a new
    empty sketch for you.
  id: totrans-286
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.9\. 第一次启动Arduino IDE时，它将为你创建一个新的空草图。
- en: '![](02fig09_alt.jpg)'
  id: totrans-287
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig09_alt.jpg)'
- en: '|  |'
  id: totrans-288
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**What’s a sketch?**'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: '**什么是草图？**'
- en: '*Sketch* is simply a fancy word for *code* or *program*. Arduino keeps your
    sketches in a so-called *sketchbook* (basically a folder). The term *sketch* can
    be traced back to the *processing* programming language and its IDE, from which
    the Arduino’s IDE is descended.'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '*草图*这个词只是*代码*或*程序*的另一种说法。Arduino将你的草图保存在所谓的*草图簿*（基本上是一个文件夹）。*草图*这个术语可以追溯到*processing*编程语言及其IDE，Arduino的IDE就是从那里继承下来的。'
- en: Hints of Arduino’s lineage can also be seen in some of the Arduino programming
    language’s library of hardware-supporting functions, which are derived from the
    *wiring* development platform, itself an offshoot of processing.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 在Arduino编程语言的硬件支持函数库中，也可以看到Arduino血统的痕迹，这些函数是从*wiring*开发平台派生出来的，而*wiring*平台本身又是processing的一个分支。
- en: '|  |'
  id: totrans-292
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: The Arduino programming language
  id: totrans-293
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: Arduino编程语言
- en: Within the Arduino IDE, you can write sketches for your Arduino Uno (or other
    Arduino-compatible boards) using the Arduino programming language. Let’s look
    at a few example snippets of code, which look quite different from the JavaScript
    we’ll use later on.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 在Arduino IDE中，你可以使用Arduino编程语言为你的Arduino Uno（或其他Arduino兼容板）编写草图。让我们看看一些代码的示例片段，这些代码与我们将要使用的JavaScript看起来相当不同。
- en: To get a digital pin ready to support an LED, you set it up in an Arduino sketch
    as an output pin—the LED is, after all, an output component. Configuring a digital
    pin as an output pin looks like the following in the Arduino programming language.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 要使数字引脚准备好支持LED，你需要在Arduino草图中将它配置为输出引脚——毕竟，LED是一个输出组件。在Arduino编程语言中，将数字引脚配置为输出引脚看起来如下。
- en: Listing 2.1\. Example of configuring a digital output pin
  id: totrans-296
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.1\. 配置数字输出引脚的示例
- en: '[PRE1]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '***1* Configures (digital) pin 12 as an output**'
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 将（数字）引脚12配置为输出**'
- en: To program the output pin, you set it `HIGH` or `LOW` by using the `digitalWrite`
    function that’s built into the Arduino programming language, as shown in the next
    listing.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 要编程输出引脚，你可以使用Arduino编程语言内置的`digitalWrite`函数将其设置为`HIGH`或`LOW`，如下一列表所示。
- en: Listing 2.2\. Setting a digital output pin
  id: totrans-300
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.2\. 设置数字输出引脚
- en: '[PRE2]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '***1* Setting a pin to HIGH applies voltage to the pin (turns it “on”)**'
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 将引脚设置为高电平会给引脚施加电压（将其“打开”）**'
- en: '***2* Setting a pin to LOW sets the voltage low (turns it “off”)**'
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 将引脚设置为低电平会将电压降低（将其“关闭”）**'
- en: 2.2.3\. Connecting the LED to a digital pin
  id: totrans-304
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.3\. 将LED连接到数字引脚
- en: It’s ostensibly possible to take the LED from the last exercise and connect
    its anode to pin 12 on the Uno and its cathode to a nearby GND pin. Then, setting
    pin 12 to `HIGH` from a sketch would provide voltage and turn the LED on, whereas
    setting it to `LOW` would turn the LED off.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 从上一个练习中取下LED，将其阳极连接到Uno的12号引脚，将其阴极连接到附近的GND引脚。然后，从草图中将12号引脚设置为`HIGH`会提供电压并打开LED，而将其设置为`LOW`则会关闭LED。
- en: But you shouldn’t do this. Remember, digital pins’ output voltage when set to
    HIGH is 5 V. We’re not using resistors to manage voltage (yet), and the pin’s
    5 V output could overwhelm the LED and potentially burn it out ([figure 2.10](#ch02fig10)).
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 但是你不应该这样做。记住，当设置为高电平时，数字引脚的输出电压是5V。我们目前还没有使用电阻来管理电压，引脚的5V输出可能会压垮LED并可能烧毁它（[图2.10](#ch02fig10)）。
- en: Figure 2.10\. It’s hard on your LEDs to plug them directly into a 5V Uno digital
    I/O pin.
  id: totrans-307
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.10\. 直接将LED插入5V Uno数字I/O引脚对LED来说压力很大。
- en: '![](02fig10_alt.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig10_alt.jpg)'
- en: We’re in luck, though. Arduino Unos have a built-in LED on pin 13 ([figure 2.11](#ch02fig11)).
    Ever so convenient! Whenever digital pin 13 is set to `HIGH`, the onboard LED
    will light up. For this experiment, you don’t have to wire anything up—instead,
    let’s concentrate on the programming part.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，Arduino Uno在引脚13上有一个内置的LED（[图2.11](#ch02fig11)）。非常方便！每当数字引脚13被设置为`HIGH`时，板载LED就会亮起。对于这个实验，你不需要连接任何线路——相反，让我们专注于编程部分。
- en: Figure 2.11\. The tiny surface-mount LED next to pin 13 lights up (orange) whenever
    pin 13 is set to `HIGH`.
  id: totrans-310
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.11\. 当引脚13被设置为`HIGH`时，紧邻引脚13的小型表面贴装LED（橙色）会亮起。
- en: '![](02fig11_alt.jpg)'
  id: totrans-311
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig11_alt.jpg)'
- en: 2.2.4\. Programming the LED to blink
  id: totrans-312
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.2.4\. 编程LED闪烁
- en: It’s time to pull this all together into a sketch to control the Uno.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候将这些内容整合到一个草图中来控制Arduino Uno了。
- en: 'An Arduino sketch is divided into two parts:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino草图分为两部分：
- en: '`setup`—This is where you can—I bet you’ve already guessed it—put setup code
    for your sketch. This code executes once at the beginning of the program’s execution.
    To set up your LED blinking sketch, the `setup` will need to configure the pin
    connected to the LED (13). Even though you won’t physically connect an external
    component to this pin, you still need to configure it as a digital OUTPUT pin.'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`setup`——这是你可以放置草图设置代码的地方——我敢打赌你已经猜到了。这段代码在程序执行开始时只执行一次。为了设置LED闪烁草图，`setup`需要配置连接到LED的引脚（13）。即使你不会将外部组件物理连接到这个引脚，你仍然需要将其配置为数字输出引脚。'
- en: '`loop`—After setup completes, the code in the `loop` will get executed over
    and over and over again until the Arduino loses power or is reset. This is the
    part of the sketch that needs to alternately set pin 13 `HIGH` (5 V voltage applied)
    and `LOW` (no voltage) so that the LED will blink.'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`loop`——在设置完成后，`loop`中的代码会反复执行，直到Arduino断电或重置。这部分草图需要交替设置引脚13为`HIGH`（施加5V电压）和`LOW`（无电压），以便LED闪烁。'
- en: In the Arduino IDE, create a new sketch to hold the code to blink the onboard
    LED, as shown in the following listing.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 在Arduino IDE中，创建一个新的草图来保存闪烁板载LED的代码，如下一列表所示。
- en: Listing 2.3\. A complete sketch to blink an LED
  id: totrans-318
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.3\. 闪烁LED的完整草图
- en: '[PRE3]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Configures pin 13 (with built-in LED) as an OUTPUT**'
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 将引脚13（带有内置LED）配置为输出**'
- en: '***2* Sets pin 13 HIGH to turn on the LED**'
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 将引脚13设置为高电平以打开LED**'
- en: '***3* Waits for 500 ms (half a second)**'
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 等待500毫秒（半秒）**'
- en: '***4* Sets pin 13 LOW to turn off the LED**'
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 将引脚13设置为LOW以关闭LED**'
- en: If the Arduino programming language looks like C/C++ to you, you’re right, it
    basically is, minus a few types and features. The Arduino language also provides
    a built-in library of hardware-specific functions, including `pinMode` and `digitalWrite`.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Arduino编程语言看起来像C/C++，那你是对的，它基本上就是，除了少了几个类型和特性。Arduino语言还提供了一个内置的硬件特定函数库，包括`pinMode`和`digitalWrite`。
- en: '|  |'
  id: totrans-325
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Example sketches
  id: totrans-326
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 示例草图
- en: If you don’t feel like typing the blinking sketch into the Arduino IDE, or you
    just want to see more example sketches, you can find a similar blink sketch and
    many more under File > Examples in the IDE.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不想将闪烁草图输入到Arduino IDE中，或者你只是想看到更多的示例草图，你可以在IDE中的文件>示例下找到一个类似的闪烁草图和更多其他草图。
- en: '|  |'
  id: totrans-328
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Uploading the blink sketch
  id: totrans-329
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 上传闪烁草图
- en: Go ahead and connect your Arduino Uno to a USB port on your computer. From the
    IDE, you can click on the Verify button in the sketch window ([figure 2.12](#ch02fig12))
    to make sure your code is error-free, or go straight to the Upload button, which
    will verify, compile, and upload your sketch to the board’s microcontroller. If
    you haven’t saved the sketch yet, you will be prompted to do so when you upload
    it.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 现在将你的Arduino Uno连接到电脑上的USB端口。从IDE中，你可以在草图窗口中点击Verify按钮（[图2.12](#ch02fig12)）以确保你的代码没有错误，或者直接点击Upload按钮，它将验证、编译并将你的草图上传到板上的微控制器。如果你还没有保存草图，当你上传时，系统会提示你保存。
- en: Figure 2.12\. Sketch window inside the Arduino IDE
  id: totrans-331
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.12\. Arduino IDE中的草图窗口
- en: '![](02fig12_alt.jpg)'
  id: totrans-332
  prefs: []
  type: TYPE_IMG
  zh: '![图片](02fig12_alt.jpg)'
- en: If everything went right, you should see the onboard LED blink every 500 ms
    ([figure 2.13](#ch02fig13)).
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切顺利，你应该看到板载LED每500毫秒闪烁一次（[图2.13](#ch02fig13)）。
- en: Figure 2.13\. The uploaded sketch should make the onboard LED blink every 500
    ms.
  id: totrans-334
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.13\. 上传的草图应该使板载LED每500毫秒闪烁一次。
- en: '![](02fig13.jpg)'
  id: totrans-335
  prefs: []
  type: TYPE_IMG
  zh: '![图片](02fig13.jpg)'
- en: Though the Arduino programming language is a lower-level syntax than JavaScript,
    it’s still a high-level language. The contents of your sketch are first compiled
    into machine code that the microcontroller can execute natively. That compiled
    code is then written to the non-volatile program memory on the microcontroller.
    The Uno’s microcontroller stores the program in flash memory, the same technology
    commonly used in memory cards and solid-state drives.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然Arduino编程语言的语法比JavaScript低级，但它仍然是一种高级语言。你的草图内容首先被编译成微控制器可以原生执行的机器代码。然后，编译后的代码被写入微控制器上的非易失性程序内存。Uno的微控制器将程序存储在闪存中，这是在存储卡和固态驱动器中常用的一种技术。
- en: Just like photos don’t disappear from a memory card when you remove the card
    from a digital camera, the sketch will remain in place on the microcontroller
    even if the microcontroller loses power. Compare this to volatile memory (such
    as RAM), which loses its contents if not powered. Your successfully uploaded sketch
    will remain until replaced by something else.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 就像从数码相机中移除存储卡时照片不会消失一样，即使微控制器失去电源，草图也会保留在微控制器上。将此与易失性内存（如RAM）进行比较，如果不供电，它会丢失其内容。你成功上传的草图将保留，直到被其他东西替换。
- en: A program stored indefinitely like this in non-volatile memory is called *firmware*.
    Each time you upload a new sketch to an Arduino, you’re replacing its firmware.
    The firmware won’t “go away” after you unplug the board from its USB tether. If
    you plug the board back into the USB, or plug it into another power source, the
    LED will start blinking again because the firmware is still intact.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 以这种方式永久存储在非易失性内存中的程序被称为*固件*。每次你将新的草图上传到Arduino时，你都在替换其固件。固件在你从USB连接中拔掉板子后不会“消失”。如果你将板子重新插入USB，或者插入另一个电源，LED将再次开始闪烁，因为固件仍然完好无损。
- en: '|  |'
  id: totrans-339
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Resetting the Arduino board**'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: '**重置Arduino板**'
- en: When an Arduino regains power after a disconnection, it will *reset*, bringing
    its pins back to the default behavior and restarting the microcontroller’s firmware.
    The execution of the firmware in program memory will start from the beginning.
    From the perspective of an Arduino sketch, that means the `setup` code will run
    again. Resetting can be a sanity-saving tactic if you have something running amok
    on a development board.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 当Arduino在断开连接后恢复电源时，它将*重置*，将引脚恢复到默认行为，并重新启动微控制器的固件。程序内存中固件的执行将从开始处开始。从Arduino草图的角度来看，这意味着`setup`代码将再次运行。如果开发板上有什么东西运行失控，重置可以是一种拯救理智的策略。
- en: You don’t have to unplug the Arduino Uno board from power to reset it. You can
    use the handy onboard RESET button—press and hold it for a moment—to accomplish
    the same thing.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 你不需要从电源上拔下Arduino Uno板来重置它。你可以使用方便的板载RESET按钮——按住并保持一段时间——来完成相同的事情。
- en: '|  |'
  id: totrans-343
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Now you’ve seen the basic lay of the land of the Arduino Uno and learned the
    basics of writing and uploading sketches using the IDE. It’s time to get to the
    JavaScript!
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经了解了Arduino Uno的基本布局，并学习了使用IDE编写和上传草图的基础知识。是时候学习JavaScript了！
- en: 2.3\. Controlling the Arduino with JavaScript
  id: totrans-345
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.3. 使用JavaScript控制Arduino
- en: The workflow for working with an Arduino using JavaScript and a host-client
    configuration is different from the default Arduino workflow. Instead of authoring
    and repeatedly uploading sketches using the Arduino IDE, you’ll initially upload
    a single sketch that will stay in place as the board’s firmware.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 使用JavaScript和主机-客户端配置与Arduino一起工作的流程与默认的Arduino工作流程不同。你将不再使用Arduino IDE编写和反复上传草图，而是最初上传一个草图，该草图将作为板子的固件保留在位。
- en: After that, you won’t use the Arduino IDE anymore—instead, you’ll write JavaScript
    code using your text editor of choice and execute it with `node` from within a
    terminal.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，你将不再使用Arduino IDE——相反，你将使用你选择的文本编辑器编写JavaScript代码，并在终端中使用`node`执行它。
- en: 'These are the steps for setting up a host-client configuration with the Uno:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是设置Uno的主机-客户端配置的步骤：
- en: Upload a sketch containing compatible firmware to the board.
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将包含兼容固件的草图上传到板子。
- en: Install the Johnny-Five Node.js framework on your computer.
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的计算机上安装Johnny-Five Node.js框架。
- en: 2.3.1\. Configuring the Arduino as a client
  id: totrans-351
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.1. 将Arduino配置为客户端
- en: Recall from [chapter 1](kindle_split_008.html#ch01) that the host-client method
    involves communicating via a common API between the host and the client. The Node.js
    framework you’ll be using in the next several chapters—Johnny-Five—communicates
    (by default) with boards using a protocol called Firmata.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下[第1章](kindle_split_008.html#ch01)，主机-客户端方法涉及主机和客户端之间通过一个公共API进行通信。你将在接下来的几章中使用的Node.js框架——Johnny-Five——默认情况下使用名为Firmata的协议与板子通信。
- en: Firmata allows hosts (computers) and clients (microcontrollers) to exchange
    messages back and forth in a format based on MIDI messaging. The Firmata protocol
    specifies what those command and data messages should look like. The Arduino implementation
    of Firmata provides the actual firmware you can put on your board to make it “speak”
    Firmata. It takes the form of an Arduino sketch that you upload to the board ([figure
    2.14](#ch02fig14)).
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: Firmata允许主机（计算机）和客户端（微控制器）以基于MIDI消息的格式相互交换消息。Firmata协议指定了这些命令和数据消息应该是什么样子。Arduino对Firmata的实现提供了你可以放在板子上的实际固件，使其“说”Firmata。它以Arduino草图的形式存在，你需要将其上传到板子（[图2.14](#ch02fig14)）。
- en: Figure 2.14\. The first step to configuring the host-client setup with the Uno
    is to upload a Firmata sketch that will allow the board to communicate using the
    Firmata protocol.
  id: totrans-354
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.14。配置Uno的主机-客户端设置的第一步是上传一个Firmata草图，这将允许板子使用Firmata协议进行通信。
- en: '![](02fig14_alt.jpg)'
  id: totrans-355
  prefs: []
  type: TYPE_IMG
  zh: '![02fig14_alt.jpg](02fig14_alt.jpg)'
- en: 'Good news: Firmata is popular enough that the Firmata sketches you need come
    packaged with the Arduino IDE.'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 好消息：Firmata足够流行，以至于你需要的Firmata草图都包含在Arduino IDE中。
- en: Uploading Firmata to the Uno
  id: totrans-357
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 将Firmata上传到Uno
- en: 'Follow these steps to upload the right flavor of Firmata to your Uno so it
    can be used as a client in a host-client setup:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤上传正确的Firmata版本到你的Uno，使其可以作为主机-客户端设置中的客户端使用：
- en: Connect your Arduino Uno to USB.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的Arduino Uno连接到USB。
- en: Launch the Arduino IDE.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动Arduino IDE。
- en: Access the File > Examples > Firmata menu and select StandardFirmataPlus from
    the list ([figure 2.15](#ch02fig15)).
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问File > Examples > Firmata菜单，并从列表中选择StandardFirmataPlus（[图2.15](#ch02fig15)）。
- en: Figure 2.15\. Selecting StandardFirmataPlus from available example sketches
  id: totrans-362
  prefs:
  - PREF_IND
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.15。从可用的示例草图中选择StandardFirmataPlus
- en: '![](02fig15_alt.jpg)'
  id: totrans-363
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![02fig15_alt.jpg](02fig15_alt.jpg)'
- en: Send the sketch to the Uno by clicking the Upload icon.
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击上传图标将草图发送到Uno。
- en: '|  |'
  id: totrans-365
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Why so many Firmatas?**'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: '**为什么有这么多Firmata？**'
- en: The Examples > Firmata menu in the Arduino IDE provides quite a banquet of Firmata
    sketch options.
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino IDE中的Examples > Firmata菜单提供了相当丰富的Firmata草图选项。
- en: This is somewhat analogous to optional feature packages for new vehicles. Customers
    can preorder a car or truck with a certain combination of options—a sunroof, premium
    sound, floor mats—but you can’t combine every option in a single vehicle. There’s
    not room for three kinds of floor mats, and only a few consumers are interested
    in the most decadent performance suspension.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 这与新车上可选功能包有些类似。客户可以预先订购一辆带有特定组合选项的汽车或卡车——天窗、高级音响、地板垫——但你不能在单一车辆中组合所有选项。没有足够的空间放置三种类型的地板垫，而且只有少数消费者对最奢华的性能悬挂系统感兴趣。
- en: Likewise, different Firmata sketches implement different assortments of goodies,
    tailored for different Arduino hardware or use cases. StandardFirmataEthernet
    adds support for Ethernet shields. AnalogFirmata attempts to maximize the number
    of analog inputs that can communicate at once. StandardFirmataPlus is a nice balance
    of all the most popular stuff, and it’s what we’ll use.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，不同的 Firmata 草图实现了不同的功能组合，针对不同的 Arduino 硬件或用例进行了定制。StandardFirmataEthernet
    添加了对以太网盾的支持。AnalogFirmata 尝试最大化同时可以通信的模拟输入数量。StandardFirmataPlus 是所有最受欢迎功能的一个很好的平衡，这就是我们将要使用的。
- en: '|  |'
  id: totrans-370
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: When you made the blinking LED using the Arduino IDE, you uploaded a sketch
    that became the board’s firmware. This firmware was single-purpose—it blinked
    an LED.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用 Arduino IDE 制作闪烁 LED 时，你上传了一个草图，该草图成为板子的固件。这个固件是单功能的——它闪烁一个 LED。
- en: In contrast, the Firmata firmware doesn’t have a specific purpose. Instead,
    it’s a program that allows the board to communicate with the Node.js framework
    you’re about to install.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，Firmata 固件没有特定的用途。相反，它是一个程序，允许板子与你要安装的 Node.js 框架进行通信。
- en: You’re done with the Arduino IDE for the time being—you can quit the program
    after uploading the Firmata sketch.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 你暂时完成了 Arduino IDE 的使用——上传 Firmata 草图后，你可以退出程序。
- en: 2.3.2\. Installing the Johnny-Five Node.js framework
  id: totrans-374
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.2\. 安装 Johnny-Five Node.js 框架
- en: Johnny-Five is an open source Node.js framework created by Bocoup for controlling
    development boards in a host-client configuration ([http://johnny-five.io](http://johnny-five.io)).
    Johnny-Five has a special emphasis on robotics, but you can do a lot of different
    things with the software. It’s been around longer than most JavaScript frameworks
    for hardware and has a clear API and a little bit of maturity—both ideal things
    for hardware beginners.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: Johnny-Five 是由 Bocoup 为控制主从配置的开发板创建的开源 Node.js 框架 ([http://johnny-five.io](http://johnny-five.io))。Johnny-Five
    特别注重机器人技术，但你可以用这个软件做很多事情。它比大多数硬件 JavaScript 框架存在的时间更长，具有清晰的 API 和一定的成熟度——这两者对于硬件初学者来说都是理想的选择。
- en: To create your first Johnny-Five project, create a directory for it and install
    the framework npm package, as the following listing shows.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建你的第一个 Johnny-Five 项目，为它创建一个目录并安装框架 npm 包，如下所示。
- en: Listing 2.4\. First Johnny-Five project preparation
  id: totrans-377
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 2.4\. 第一个 Johnny-Five 项目的准备
- en: '[PRE4]'
  id: totrans-378
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '|  |'
  id: totrans-379
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Installing Johnny-Five: getting help**'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: '**安装 Johnny-Five：获取帮助**'
- en: Usually Johnny-Five installs happily with just an `npm install` command, but
    the installation process does compile some native extensions, which can occasionally
    cause woe.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，Johnny-Five 只需一个 `npm install` 命令就可以愉快地安装，但安装过程确实会编译一些原生扩展，这有时可能会引起麻烦。
- en: 'If you’re using Windows and run into trouble, try executing this command:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在使用 Windows 时遇到问题，请尝试执行以下命令：
- en: '[PRE5]'
  id: totrans-383
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Here are a couple of other resources, should you run into trouble:'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你遇到问题，这里有一些其他资源：
- en: 'The troubleshooting section in Johnny-Five’s wiki: [http://mng.bz/nW62](http://mng.bz/nW62)'
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Johnny-Five 的维基百科中的故障排除部分：[http://mng.bz/nW62](http://mng.bz/nW62)
- en: 'NodeBots Community Forum: [http://forums.nodebots.io](http://forums.nodebots.io)'
  id: totrans-386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NodeBots 社区论坛：[http://forums.nodebots.io](http://forums.nodebots.io)
- en: '|  |'
  id: totrans-387
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 2.3.3\. Hello World blinking LED with Johnny-Five
  id: totrans-388
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.3\. 使用 Johnny-Five 的 Hello World 闪烁 LED
- en: You’ve seen what a blinking-LED script looks like in the Arduino programming
    language. Now it’s time to write a JavaScript version of the Hello World blinking
    LED to get to know Johnny-Five.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经看到了在 Arduino 编程语言中闪烁 LED 脚本的样子。现在是时候编写一个 JavaScript 版本的 Hello World 闪烁 LED，以便了解
    Johnny-Five。
- en: Inside the hello-world directory where you installed Johnny-Five, create a file
    called hello.js, and open it in the text editor of your choice. Inside this JavaScript
    file, you can write the code to control your Arduino Uno, shown in the next listing.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 在你安装 Johnny-Five 的 hello-world 目录中，创建一个名为 hello.js 的文件，并用你选择的文本编辑器打开它。在这个 JavaScript
    文件中，你可以编写控制你的 Arduino Uno 的代码，如下一个列表所示。
- en: Listing 2.5\. hello.js
  id: totrans-391
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 2.5\. hello.js
- en: '[PRE6]'
  id: totrans-392
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '***1* Requires the johnny-five package**'
  id: totrans-393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 需要 johnny-five 包**'
- en: '***2* Initializes a new Board object representing your Uno**'
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 初始化一个代表你的Uno的新Board对象**'
- en: '***3* Waits for the board to fire the ready event**'
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 等待板子触发ready事件**'
- en: '***4* Instantiates an LED object on pin 13 (Uno’s built-in LED pin)**'
  id: totrans-396
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 在13号引脚（Uno的内置LED引脚）上实例化一个LED对象**'
- en: '***5* Makes the LED blink every 500 ms**'
  id: totrans-397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 使LED每500毫秒闪烁一次**'
- en: 'Save the file. Plug your Uno into a USB port on your computer if it’s not already
    connected. In a terminal, `cd` to the project directory and run this command:'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 保存文件。如果你的Uno还没有连接到电脑的USB端口，请将其插入。在终端中，使用`cd`命令切换到项目目录，并运行以下命令：
- en: '[PRE7]'
  id: totrans-399
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: You’ll see some output like the following in your terminal.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 你会在终端中看到一些类似以下的内容。
- en: Listing 2.6\. Running hello.js in a terminal
  id: totrans-401
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.6。在终端中运行hello.js
- en: '[PRE8]'
  id: totrans-402
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Built-in LED blinking? That’s it! You’ve just controlled an Arduino Uno with
    JavaScript.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 内置LED闪烁？就这样！你已经用JavaScript控制了Arduino Uno。
- en: 2.3.4\. Firmata, Johnny-Five, and the host-client method
  id: totrans-404
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.4。Firmata、Johnny-Five和主机-客户端方法
- en: While the script is running, you’ll see the built-in TX (transmit) and RX (receive)
    LEDs—identified in [figure 2.16](#ch02fig16)—flash. This is because the host and
    the client are exchanging serial messages using the Firmata protocol.
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 当脚本运行时，你会看到内置的TX（发送）和RX（接收）LED——在[图2.16](#ch02fig16)中标识——闪烁。这是因为主机和客户端正在使用Firmata协议交换串行消息。
- en: Figure 2.16\. When the host script is executing, the Uno’s TX and RX (transmit
    and receive) LEDs will blink as communication is exchanged between the host and
    the client.
  id: totrans-406
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.16。当主脚本执行时，Uno的TX和RX（发送和接收）LED将闪烁，因为主机和客户端之间正在交换通信。
- en: '![](02fig16.jpg)'
  id: totrans-407
  prefs: []
  type: TYPE_IMG
  zh: '![](02fig16.jpg)'
- en: To stop the execution of your Johnny-Five hello.js program, type Ctrl-C twice
    in the terminal window. Take a look at your Uno. Depending on the moment you quit
    the program, the pin-13 LED may be off, or it may steadily be on. In either case,
    it won’t be blinking anymore.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 要停止你的Johnny-Five hello.js程序的执行，在终端窗口中连续两次按Ctrl-C。看看你的Uno。根据你退出程序的时刻，13号引脚的LED可能是关闭的，或者它可能持续开启。在任何情况下，它都不会再闪烁。
- en: That’s because the program on the host computer has stopped executing, and as
    a result it has stopped sending messages to the Firmata firmware. The board is
    left in a state representing the last successfully communicated messages from
    the program.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为主机计算机上的程序已经停止执行，因此它已经停止向Firmata固件发送消息。板子处于表示程序成功通信的最后一条消息的状态。
- en: Now that the hello.js script is no longer running, press and hold the Uno’s
    RESET button for a moment. The Uno’s pin-13 LED will be off and it will stay off.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 现在hello.js脚本不再运行，按下并保持Uno的RESET按钮一会儿。Uno的13号引脚LED将关闭并保持关闭。
- en: Recall that, when reset, the Arduino Uno resets its pins and restarts the firmware
    program. Earlier, when your firmware was the blinking LED sketch uploaded from
    the Arduino IDE, the blinking would resume. Now the firmware is Firmata, which
    doesn’t make LEDs blink itself, but instead waits for instructions about what
    to do. The LED on pin 13 is turned off by the hardware reset of pins, and nothing
    has told it to start blinking again.
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下，当重置时，Arduino Uno会重置其引脚并重新启动固件程序。早些时候，当你的固件是从Arduino IDE上传的闪烁LED草图时，闪烁会继续。现在固件是Firmata，它不会自己使LED闪烁，而是等待关于要做什么的指令。13号引脚上的LED由引脚的硬件重置关闭，没有任何东西告诉它再次开始闪烁。
- en: In the host-client method, the client doesn’t do anything on its own—it has
    to be continually directed by the host. The Uno client is like a puppet in this
    setup. It needs constant input from a puppeteer—our host-executed JavaScript.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 在主机-客户端方法中，客户端本身不执行任何操作——它必须持续由主机指导。在这个设置中，Uno客户端就像一个木偶。它需要来自操纵者的持续输入——我们的主机执行的JavaScript。
- en: 2.3.5\. Structuring scripts with Johnny-Five
  id: totrans-413
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2.3.5。使用Johnny-Five结构化脚本
- en: The structure of sketches written in the Arduino programming language with the
    Arduino IDE differs from the structure of Johnny-Five scripts.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Arduino IDE编写的Arduino编程语言的sketch结构不同于Johnny-Five脚本的结构。
- en: In the Arduino programming language, you split your code into `setup` and `loop`.
    The code within `loop` gets executed perpetually until the board is reset or the
    firmware is replaced. To make an LED blink forever, you wrote the following code.
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 在Arduino编程语言中，你将你的代码分成`setup`和`loop`。`loop`中的代码会持续执行，直到板子被重置或固件被替换。为了使LED永远闪烁，你编写了以下代码。
- en: Listing 2.7\. LED blinking with the Arduino programming language
  id: totrans-416
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.7。使用Arduino编程语言实现的LED闪烁
- en: '[PRE9]'
  id: totrans-417
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Each time the code within the `loop` is executed, it sets pin 13 `HIGH`, waits
    500 ms, sets it `LOW`, and waits another 500 ms. Then the `loop` executes again
    (and again and again and again...). The alternating HIGH and LOW voltages provided
    to pin 13 with durations of 500 ms makes the LED appear to blink.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 每次循环中的代码执行时，它会将引脚13设置为`HIGH`，等待500毫秒，然后将其设置为`LOW`，并再次等待500毫秒。然后循环再次执行（一次又一次……）。向引脚13提供的交替`HIGH`和`LOW`电压，持续时间为500毫秒，使得LED看起来在闪烁。
- en: However, with Johnny-Five you wrote the following.
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，使用Johnny-Five你编写了以下代码。
- en: Listing 2.8\. LED blinking with Johnny-Five
  id: totrans-420
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.8\. 使用Johnny-Five闪烁LED
- en: '[PRE10]'
  id: totrans-421
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Boards only fire the `ready` event once (don’t worry, though; if you bind to
    the `ready` event after it fires, it’ll still invoke the event handler function).
    That means the function you pass as the handler will also only get executed once—it’s
    not a loop.
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 板只触发一次`ready`事件（不用担心；即使在该事件触发后绑定到`ready`事件，它仍然会调用事件处理函数）。这意味着你传递的处理函数也只会执行一次——它不是一个循环。
- en: Another difference is that Johnny-Five provides a higher-level API. Instead
    of configuring a pin as a generic digital output, with Johnny-Five you initialize
    an object representing an LED component, specifically. This gives you access to
    some handy methods and properties on the `Led` class, which include the methods
    `blink`, `on`, `off`, and `toggle`, along with more interesting ones you’ll meet
    later.
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个区别是Johnny-Five提供了一个更高级的API。使用Johnny-Five，你初始化一个代表LED组件的对象，而不是将引脚配置为通用数字输出。这让你可以访问`Led`类上的一些方便的方法和属性，包括`blink`、`on`、`off`和`toggle`方法，以及你稍后将会遇到的更多有趣的方法。
- en: Instead of manipulating the LED by setting a pin to `HIGH` or `LOW` and invoking
    `delay` between the two, you can invoke the `blink` method with an argument that
    defines the blink period in milliseconds. Under the covers, Johnny-Five uses a
    `set-Interval` to handle the timing on blinks. An LED will `blink` until you tell
    it to stop.
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过调用`blink`方法并传递一个定义闪烁周期的毫秒数的参数来代替通过设置引脚为`HIGH`或`LOW`并在两者之间调用`delay`来操作LED。在幕后，Johnny-Five使用`setInterval`来处理闪烁的定时。LED会闪烁，直到你告诉它停止。
- en: Adapting the blinking LED
  id: totrans-425
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 适应闪烁的LED
- en: But how do we tell the LED to stop blinking? This is where JavaScript metaphors
    start having a role and give you some great options for interacting with your
    device. In Johnny-Five, the `Led`’s `blink` method takes an optional second argument,
    a callback function. Every time the LED blinks on or off, the callback will be
    invoked.
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 但我们如何让LED停止闪烁呢？这就是JavaScript隐喻开始发挥作用并为你提供与设备交互的绝佳选项的地方。在Johnny-Five中，`Led`的`blink`方法接受一个可选的第二个参数，即回调函数。每次LED闪烁开或关时，回调函数都会被调用。
- en: Listing 2.9\. Using LED callbacks in hello.js
  id: totrans-427
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.9\. 在hello.js中使用LED回调
- en: '[PRE11]'
  id: totrans-428
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '***1* Keeps track of how many times the LED has blinked on or off**'
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 跟踪LED闪烁开或关的次数**'
- en: '***2* Configures how many times the LED should blink in total**'
  id: totrans-430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 配置LED总共闪烁的次数**'
- en: '***3* This callback function gets invoked each time the LED turns on or off.**'
  id: totrans-431
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 每次LED打开或关闭时，都会调用此回调函数**。'
- en: '***4* Once blinkCount has hit blinkMax, invokes the stop method**'
  id: totrans-432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 当blinkCount达到blinkMax时，调用stop方法**'
- en: 'Go ahead and try out hello.js again:'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 重新尝试运行hello.js：
- en: '[PRE12]'
  id: totrans-434
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: You should see output similar to the following listing.
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该看到类似以下列表的输出。
- en: Listing 2.10\. Running the altered hello.js script
  id: totrans-436
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表2.10\. 运行修改后的hello.js脚本
- en: '[PRE13]'
  id: totrans-437
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: This example stops the LED from blinking after a particular number of blinks,
    but you could do various other things by using a callback on `Led.blink`. For
    example, you could change the blink frequency, or simply keep track of the total
    number of blinks over a long period of time.
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: 此示例在特定次数的闪烁后停止LED闪烁，但你可以通过在`Led.blink`上使用回调执行各种其他操作。例如，你可以更改闪烁频率，或者简单地跟踪长时间内的总闪烁次数。
- en: When you look at Johnny-Five code, it may feel more natural and familiar than
    the lower-level Arduino sketch code. As a software person, hardware—specifically
    electronic circuitry—may be a completely new world for you. But there’s some basic
    stuff you need to know. That’s where we’ll go next.
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 当你查看Johnny-Five代码时，它可能比低级的Arduino草图代码更自然、更熟悉。作为一个软件人员，硬件——特别是电子电路——可能对你来说是一个全新的世界。但有一些基础知识你需要了解。这就是我们接下来要讲的内容。
- en: Summary
  id: totrans-440
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: Arduino boards are a common jumping-off point for learning about hardware because
    they’re straightforward, widespread, and well-tested.
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino板是学习硬件的常见起点，因为它们简单、广泛且经过充分测试。
- en: In a typical Arduino workflow, sketches are written in Arduino’s cross-platform
    IDE and uploaded, as firmware, to boards.
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在典型的Arduino工作流程中，草图是在Arduino的跨平台IDE中编写的，并作为固件上传到板上。
- en: Sketches are written in the Arduino programming language, which is similar to
    C or C++. Arduino sketches are composed of a `setup` section and a `loop`.
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 草图是用Arduino编程语言编写的，它与C或C++类似。Arduino草图由一个`setup`部分和一个`loop`部分组成。
- en: To control an Arduino board with JavaScript in a host-client setup, the board’s
    microcontroller needs to run firmware that can communicate using the same protocol
    as the host. Firmata is one such protocol, and it can be uploaded to the board
    as a sketch.
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在主机-客户端设置中用JavaScript控制Arduino板，该板的微控制器需要运行能够使用与主机相同协议的固件。Firmata就是这样一种协议，它可以作为一个草图上传到板上。
- en: The Johnny-Five Node.js framework communicates using the Firmata protocol, but
    it also exposes a higher-level API. `Led` is an example of a Johnny-Five class
    for controlling a hardware component.
  id: totrans-445
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Johnny-Five Node.js框架使用Firmata协议进行通信，但它也暴露了更高层次的API。`Led`是用于控制硬件组件的Johnny-Five类的一个例子。
- en: Scripts written in Johnny-Five can be executed from the command line, using
    `node`. The code on the host must execute and communicate constantly with the
    client board—the client can’t run independently.
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用Johnny-Five编写的脚本可以从命令行使用`node`执行。主机上的代码必须持续执行并与客户端板通信——客户端不能独立运行。
- en: In contrast to the `setup` and `loop` sections in an Arduino sketch, the structure
    of Johnny-Five scripts is event-driven, a familiar design pattern for JavaScript
    programmers.
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与Arduino草图中的`setup`和`loop`部分相比，Johnny-Five脚本的结构是事件驱动的，这对于JavaScript程序员来说是一个熟悉的设计模式。
- en: Chapter 3\. How to build circuits
  id: totrans-448
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第3章\. 如何构建电路
- en: '*This chapter covers*'
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章涵盖*'
- en: Using Ohm’s law to manipulate voltage, current, and resistance in a circuit
  id: totrans-450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用欧姆定律在电路中操纵电压、电流和电阻
- en: Prototyping basic circuits on breadboards
  id: totrans-451
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在面包板上原型化基本电路
- en: The difference between parallel and series circuits
  id: totrans-452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 并联电路和串联电路的区别
- en: Nitty-gritty details about LEDs and how to wire them up in several useful configurations
  id: totrans-453
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于LED的细节以及如何以几种有用的配置连接它们的详细信息
- en: Identifying and selecting the right resistor for different circuits and components
  id: totrans-454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别和选择适合不同电路和组件的正确电阻
- en: Calculating the resistance in a series circuit and a parallel circuit
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算串联电路和并联电路中的电阻
- en: '|  |'
  id: totrans-456
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '![](tool.jpg)'
  id: totrans-457
  prefs: []
  type: TYPE_IMG
  zh: '![工具](tool.jpg)'
- en: '**For this chapter, you’ll need**'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: '**对于本章，你需要**'
- en: 1 Arduino Uno
  id: totrans-459
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个Arduino Uno
- en: 4 standard LEDs, red
  id: totrans-460
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4个标准红色LED
- en: 4 220 V resistors
  id: totrans-461
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4个220V电阻
- en: 4 560 V resistors
  id: totrans-462
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4个560V电阻
- en: 1 100 V resistor
  id: totrans-463
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个100V电阻
- en: 1 push-button switch
  id: totrans-464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个按钮开关
- en: 1 9 V battery
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个9V电池
- en: 1 9 V battery snap
  id: totrans-466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个9V电池夹
- en: 5 red and two black jumper wires
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5根红色和2根黑色跳线
- en: 1 half-size breadboard
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个半尺寸面包板
- en: '![](0049fig01_alt.jpg)'
  id: totrans-469
  prefs: []
  type: TYPE_IMG
  zh: '![图片](0049fig01_alt.jpg)'
- en: '|  |'
  id: totrans-470
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Designing and building circuits may be completely new to you, and may seem intimidating.
    The good news is that there are just a handful of core concepts to wrap your head
    around. Once you understand the interplay of voltage, current, and resistance—as
    formalized in Ohm’s law—you’re well on your way to being able to understand basic
    circuits.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 设计和构建电路可能对你来说完全是新的，可能看起来令人畏惧。好消息是，只需要掌握几个核心概念。一旦你理解了电压、电流和电阻的相互作用——如欧姆定律所正式化的——你就已经走上了理解基本电路的道路。
- en: There are a couple of metaphors traditionally used to illustrate voltage, current,
    and resistance. The most common analogy is a hydraulic (water) system involving
    tanks and pipes. Effective, but not always memorable. Let’s try a different adventure.
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上用来说明电压、电流和电阻的几个隐喻。最常用的类比是涉及储罐和管道的水压（水）系统。有效，但并不总是容易记住。让我们尝试不同的冒险。
- en: 3.1\. Voltage, current, and resistance
  id: totrans-473
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.1\. 电压、电流和电阻
- en: High in the mountains, deep in the forest of some place that doesn’t exist,
    a tribe of gnomes found themselves inexplicably in possession of an infinite supply
    of jellyfish. The gnomes, being ornery and mischievous, struck out to find a humorous
    use for the otherwise-inert creatures. They found great fun in dropping jellyfish
    over cliffs, watching them splash into the lake below or bounce off the roofs
    of local villages.
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 在高山深处，在一个不存在的地方的森林中，一群矮人意外地发现自己拥有无限的 jellyfish。矮人们，由于顽皮和淘气，开始寻找这些原本无动于衷的生物的幽默用途。他们发现，把
    jellyfish 从悬崖上扔下去，看着它们溅入下面的湖中或弹跳到当地村庄的屋顶上，非常有趣。
- en: 'The nearby townspeople were initially inconvenienced but soon recognized that
    the plummeting invertebrates carried energy and could be a free source of power
    for their cookie factories—but only if the onslaught could be harnessed safely.
    So they observed, and, over time, came to understand and manipulate the core factors
    of electrical circuits: voltage, current, and resistance.'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 附近的市民最初感到不便，但很快意识到坠落的无脊椎动物携带能量，可以是他们饼干工厂的免费能源来源——但前提是能够安全地利用这种冲击。因此，他们进行了观察，并在一段时间后开始理解和操纵电路的核心因素：电压、电流和电阻。
- en: Townspeople noticed quickly, for example, that the higher and steeper the cliff,
    the more energy the tossed jellyfish have when they reach the lake on the valley
    floor. Lesser drop-offs don’t provide as much potential energy for hijinks when
    the jellyfish splash down ([figure 3.1](#ch03fig01)).
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 市民很快注意到，例如，悬崖越高越陡，扔到山谷底部湖中的 jellyfish 具有的能量就越多。较小的落差在 jellyfish 溅落时不会提供那么多的势能
    ([图 3.1](#ch03fig01))。
- en: Figure 3.1\. Higher cliffs provide more “voltage,” that is, electrical potential.
    *Voltage* is like electrical “pressure,” pushing the charges (jellyfish) from
    high potential energy toward a location of lower potential.
  id: totrans-477
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.1\. 高悬崖提供更多的“电压”，即电势。*电压* 类似于电的“压力”，推动电荷（jellyfish）从高势能位置向低势能位置移动。
- en: '![](03fig01_alt.jpg)'
  id: totrans-478
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig01_alt.jpg)'
- en: '*Voltage* is a measurement of the difference of potential energy between two
    points. It’s something like pressure or tension or gravitational force, as electricity
    is always itching to move from higher voltage to lower voltage. Voltage, measured
    in volts, is *potential* energy, but voltage alone, without moving charged electrons
    (jellyfish), can’t wreak any havoc ([figure 3.2](#ch03fig02)).'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: '*电压* 是两点之间势能差的测量。它类似于压力或张力或重力，因为电总是渴望从高电压移动到低电压。电压，以伏特为单位测量，是 *势能*，但仅凭电压，没有移动带电的电子（jellyfish），是无法造成任何破坏的
    ([图 3.2](#ch03fig02))。'
- en: Figure 3.2\. Voltage is potential energy.
  id: totrans-480
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.2\. 电压是势能。
- en: '![](03fig02_alt.jpg)'
  id: totrans-481
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig02_alt.jpg)'
- en: For something interesting to happen, jellyfish need to get actively chucked
    over the edge of the cliff, a task that the gnomes are more than happy to perform.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 要发生有趣的事情，jellyfish 需要被积极地扔过悬崖边缘，这是一个侏儒们非常乐意执行的任务。
- en: The townspeople learned to measure jellyfish *current* by staking out a spot
    on the cliff and precisely counting the number of jellyfish that passed by, over
    a precise period of time ([figure 3.3](#ch03fig03)). Current, the flow of electric
    charge, is measured in *amperes*, often abbreviated as *amps*.
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: 市民们学会了通过在悬崖上标记一个位置并精确计算在一定时间内经过的 jellyfish *电流* 来测量 jellyfish 电流 ([图 3.3](#ch03fig03))。电流，即电荷的流动，以
    *安培* 为单位测量，通常缩写为 *amps*。
- en: Figure 3.3\. Current, the flow of electricity, can be measured by counting how
    many charges (jellyfish) pass a specific spot on a cliff during a defined period
    of time.
  id: totrans-484
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.3\. 电流，即电的流动，可以通过在定义的时间内计算通过悬崖上特定位置的电荷（jellyfish）数量来测量。
- en: '![](03fig03_alt.jpg)'
  id: totrans-485
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig03_alt.jpg)'
- en: 'The townspeople needed to find a way to manage the current of jellyfish so
    that it wouldn’t overwhelm the delicate cookie presses and ovens. This is the
    lynchpin of jellyfish circuit control: *resistance*. Resistance is how much a
    material is able to resist electrical flow. It’s measured in *ohms*.'
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 市民需要找到一种方法来管理 jellyfish 的电流，以免它压倒脆弱的饼干压机和烤箱。这是 jellyfish 电路控制的关键：*电阻*。电阻是材料抵抗电流流动的能力。它以
    *欧姆* 为单位测量。
- en: They engineered jellyfish-channeling systems into the cliff faces ([figure 3.4](#ch03fig04)),
    restricting the jellyfish flow to a more reasonable level. For circuits near the
    higher cliffs (more voltage), these systems had to be more robust because of the
    immense jellyfish-falling pressure from above.
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 他们将 jellyfish 引导系统设计到悬崖面上 ([图 3.4](#ch03fig04))，将 jellyfish 流量限制在一个更合理的水平。对于靠近高悬崖（更多电压）的电路，这些系统必须更坚固，因为来自上面的
    jellyfish 坠落压力巨大。
- en: Figure 3.4\. Townspeople add resistance to the circuit by channeling falling
    jellyfish through a series of tubes. Increasing resistance lowers the current.
  id: totrans-488
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.4\. 市民通过将下落的 jellyfish 通过一系列管道引导来增加电路的电阻。增加电阻会降低电流。
- en: '![](03fig04_alt.jpg)'
  id: totrans-489
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig04_alt.jpg)'
- en: A summary of the townspeople’s discoveries is shown in [table 3.1](#ch03table01).
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: 市民发现的总结显示在 [表 3.1](#ch03table01) 中。
- en: Table 3.1\. Voltage, current, and resistance
  id: totrans-491
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 3.1\. 电压、电流和电阻
- en: '| Factor | What it means | Abbreviated as | Measured in units |'
  id: totrans-492
  prefs: []
  type: TYPE_TB
  zh: '| 因素 | 它意味着什么 | 缩写为 | 以单位测量 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-493
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Voltage | The difference of electrical potential between two points, akin
    to electrical “pressure.” It’s what pushes electrical charges through a circuit.
    | V | Volts |'
  id: totrans-494
  prefs: []
  type: TYPE_TB
  zh: '| 电压 | 两个点之间电势差的差异，类似于电的“压力”。它是推动电荷通过电路的动力。 | V | 伏特 |'
- en: '| Current | Electrical flow: how many electrical charges are passing a single
    point during a defined period of time. | I | Amperes (amps) |'
  id: totrans-495
  prefs: []
  type: TYPE_TB
  zh: '| 电流 | 电流：在定义的时间内，有多少电荷通过一个点。 | I | 安培（安培） |'
- en: '| Resistance | A measurement of a material’s ability to resist electrical flow.
    | R | Ohms (denoted by the V symbol) |'
  id: totrans-496
  prefs: []
  type: TYPE_TB
  zh: '| 电阻 | 衡量材料抵抗电流流动的能力的测量。 | R | 欧姆（用V符号表示） |'
- en: In the end, the townspeople perfected the circuit and the jellyfish helped to
    make some of the best cookies around.
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，镇民们完善了电路，水母帮助制作了一些周围最好的饼干。
- en: There’s a power source—troops of gnomes—tossing jellyfish over a cliff. The
    higher the cliff, the more *voltage* (potential energy) is supplied to the circuit.
    The *current* (flow) of jellyfish heads toward the factory machinery.
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个电源——一群小矮人——把水母扔过悬崖。悬崖越高，提供给电路的*电压*（势能）就越多。水母头部的*电流*（流动）朝向工厂机器。
- en: To reduce the jellyfish current to manageable levels, channeling systems and
    pipes add *resistance*.
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将水母电流降低到可管理的水平，导流系统和管道增加了*电阻*。
- en: Once the jellyfish have given power to the cookie-making machinery and reached
    the floor of the factory, they reach the point of lowest potential in the circuit.
    Jet-pack-wearing gnomes act like a pump of sorts, hoisting the weary jellyfish
    back up the cliff where they can be thrown over again. And again and again...
    ([figure 3.5](#ch03fig05)).
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 当水母将力量赋予制作饼干的机器并到达工厂的地面时，它们达到了电路中的最低势点。穿着喷气背包的小矮人像是一种泵，把疲惫的水母重新提升到悬崖上，然后再被扔下去。一次又一次...
    ([图3.5](#ch03fig05))。
- en: Figure 3.5\. A complete gnome-and-jellyfish “circuit”
  id: totrans-501
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.5\. 完整的小矮人和水母“电路”
- en: '![](03fig05_alt.jpg)'
  id: totrans-502
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig05_alt.jpg)'
- en: Voltage, current, and resistance are vital concepts of basic circuitry. The
    next step is to understand how these factors relate to each other, and how they
    apply to real-world circuits.
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: 电压、电流和电阻是基本电路的基本概念。下一步是了解这些因素如何相互关联，以及它们如何应用于现实世界的电路。
- en: 3.1.1\. Ohm’s law
  id: totrans-504
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1.1\. 欧姆定律
- en: 'Voltage, current, and resistance are related to each other in consistent ways.
    Each of the three factors is like a lever: tweak one and you’ll affect the others.
    These interplays became so central to the town’s populace that the factories started
    producing cookies that illustrated the relationships ([figure 3.6](#ch03fig06)).'
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 电压、电流和电阻以一致的方式相互关联。这三个因素中的每一个都像是一个杠杆：调整一个，就会影响其他。这些相互作用对镇民来说变得如此重要，以至于工厂开始生产展示这些关系的饼干（[图3.6](#ch03fig06)）。
- en: Figure 3.6\. The townspeople’s new signature cookie shows the relationship between
    voltage (V), current (I), and resistance (R).
  id: totrans-506
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.6\. 镇民们的新标志性饼干显示了电压（V）、电流（I）和电阻（R）之间的关系。
- en: '![](03fig06_alt.jpg)'
  id: totrans-507
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig06_alt.jpg)'
- en: The bearer of the cookie can bite off the factor they wish to determine—then
    see how it can be derived from the other two factors ([figure 3.7](#ch03fig07)).
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 拿着饼干的持有者可以咬掉他们想要确定的因子——然后看看它如何从其他两个因子中推导出来（[图3.7](#ch03fig07)）。
- en: Figure 3.7\. By biting off the edge of the cookie imprinted with the factor
    the cookie-eater wants to figure out, they can quickly see the equation they need
    to solve. For example, if they want to determine resistance (R), they could bite
    that off and see that R = voltage (V) divided by current (I).
  id: totrans-509
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.7\. 通过咬掉饼干上印有饼干食用者想要解决的因子的边缘，他们可以迅速看到他们需要解决的方程。例如，如果他们想要确定电阻（R），他们可以咬掉它，看到R
    = 电压（V）除以电流（I）。
- en: '![](03fig07_alt.jpg)'
  id: totrans-510
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig07_alt.jpg)'
- en: 'Georg Ohm figured out these key relationships between voltage, resistance,
    and current back in the 1820s, well before the clever cookie-townspeople, which
    is why *Ohm’s law* bears his name. If you prefer your math in non-cookie form,
    these are the relevant equations:'
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 乔治·欧姆在1820年代就发现了电压、电阻和电流之间的这些关键关系，远在聪明的饼干镇民之前，这就是为什么*欧姆定律*以他的名字命名。如果你更喜欢非饼干的数学形式，这些是相关的方程：
- en: '[PRE14]'
  id: totrans-512
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: “OK,” you might be thinking, “but how do I apply this in the real world?”
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: “好吧，”你可能正在想，“但我如何在现实世界中应用这个？”
- en: Applying Ohm’s law to real-world circuits
  id: totrans-514
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 将欧姆定律应用于现实世界电路
- en: 'Designing and building basic circuits starts with the right balance of the
    key factors: voltage, current, and resistance.'
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 设计和构建基本电路始于关键因素的正确平衡：电压、电流和电阻。
- en: '[Table 3.2](#ch03table02) outlines a few common examples of how to adjust voltage,
    current, and resistance in basic circuits. The examples aren’t exhaustive (for
    example, there are additional ways to adjust voltage in a circuit) but they highlight
    the kinds of things we’ll be doing in the short term to make our circuits work
    correctly.'
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: '[表 3.2](#ch03table02) 列举了如何在基本电路中调整电压、电流和电阻的一些常见示例。这些示例并不全面（例如，还有其他调整电路中电压的方法）但它们突出了我们在短期内将要做的事情，以确保我们的电路能够正确工作。'
- en: Table 3.2\. Adjusting voltage, current, and resistance in hobby electronics
  id: totrans-517
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表 3.2\. 在业余电子学中调整电压、电流和电阻
- en: '| Factor | Relationship | Example of common way to increase | Example of common
    way to decrease |'
  id: totrans-518
  prefs: []
  type: TYPE_TB
  zh: '| 因素 | 关系 | 增加的常见方法 | 减少的常见方法 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-519
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Voltage | V = IR | Use a power supply with a higher voltage. | Use a power
    supply with a lower voltage. |'
  id: totrans-520
  prefs: []
  type: TYPE_TB
  zh: '| 电压 | V = IR | 使用更高电压的电源。 | 使用更低电压的电源。 |'
- en: '| Current | I = V / R | Remove resistance by removing resistors or using resistors
    with lower resistance. Current can also be increased by raising the voltage of
    the power supply. | Add resistance by adding resistors or using resistors with
    higher resistance. Current can also be decreased by lowering the voltage of the
    power supply. |'
  id: totrans-521
  prefs: []
  type: TYPE_TB
  zh: '| 电流 | I = V / R | 通过移除电阻或使用电阻值较低的电阻来减少电阻。电流也可以通过提高电源电压来增加。 | 通过添加电阻或使用电阻值较高的电阻来增加电阻。电流也可以通过降低电源电压来减少。
    |'
- en: '| Resistance | R = V / I | Add resistors or use resistors with higher resistance.
    | Remove resistors or use resistors with lower resistance. |'
  id: totrans-522
  prefs: []
  type: TYPE_TB
  zh: '| 电阻 | R = V / I | 添加电阻或使用电阻值较高的电阻。 | 移除电阻或使用电阻值较低的电阻。 |'
- en: One of the most common calculation needs that comes up in hobby electronics
    hacking is “given a supply *voltage*, what *resistor* do I need to use to make
    sure my component is supplied with a desired *current*” ([figure 3.8](#ch03fig08))?
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: 在业余电子学黑客活动中出现的一个最常见的计算需求是：“给定一个电源 *电压*，我需要使用什么 *电阻* 来确保我的组件获得所需的 *电流*” ([图 3.8](#ch03fig08))？
- en: 'Figure 3.8\. A common real-world Ohm’s law problem: what resistor value is
    needed to provide an LED with 20 mA of current in a circuit with a 6 V supply
    voltage?'
  id: totrans-524
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.8\. 一个常见的实际欧姆定律问题：在 6 V 电源电压的电路中，需要什么电阻值才能向 LED 提供 20 mA 的电流？
- en: '![](03fig08_alt.jpg)'
  id: totrans-525
  prefs: []
  type: TYPE_IMG
  zh: '![图片 03fig08_alt](03fig08_alt.jpg)'
- en: Voltage is often defined by the power supply for the project—batteries, USB
    power, DC adapter—and you know you want to provide a particular current to a component
    in the circuit. Voltage and current are, then, defined, which means you need to
    solve for R, resistance.
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: 电压通常由项目的电源——电池、USB 电源、直流适配器——定义，你知道你想要向电路中的组件提供特定的电流。因此，电压和电流被定义了，这意味着你需要求解
    R，即电阻。
- en: 'Say you know that your supply voltage is going to be 6 V, and you have a component
    that needs 20 mA (.02 A, or 20 thousandths of an amp) of current ([figure 3.10](#ch03fig10)).
    Solving for R (resistance in ohms) means dividing V (voltage in volts) by I (current
    in amps) because R = V / I:'
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你知道你的电源电压将是 6 V，并且你有一个需要 20 mA (.02 A，或 20 千分之一安培) 电流的组件 ([图 3.10](#ch03fig10))。求解
    R（欧姆中的电阻）意味着将 V（伏特中的电压）除以 I（安培中的电流）因为 R = V / I：
- en: '[PRE15]'
  id: totrans-528
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '|  |'
  id: totrans-529
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Watch your units!
  id: totrans-530
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 注意你的单位！
- en: 'Make sure to keep your units consistent when using Ohm’s law equations. Current
    should always be measured in amps (A), voltage in volts (V), and resistance in
    ohms (V). Volts and ohms tend to be straightforward, but when you’re dealing with
    current in hobby-electronics ranges—often tens of milliamps—don’t forget to express
    those values in amps or you’ll get the wrong answer:'
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: 使用欧姆定律方程时，请确保保持单位的一致性。电流应始终以安培（A）为单位测量，电压以伏特（V）为单位，电阻以欧姆（Ω）为单位。伏特和欧姆通常比较直接，但当你处理业余电子学范围内的电流——通常是几十毫安——不要忘记将这些值以安培为单位表示，否则你会得到错误的结果：
- en: '[PRE16]'
  id: totrans-532
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: but
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: but
- en: '[PRE17]'
  id: totrans-534
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '|  |'
  id: totrans-535
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: OK! Almost ready. But before we start cobbling together circuits with this new
    understanding, let’s have a grown-up moment and protect ourselves against some
    potential problems.
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: 好的！几乎准备好了。但在我们开始用这种新的理解拼凑电路之前，让我们成熟一点，保护自己免受一些潜在问题的困扰。
- en: 3.1.2\. Problems and dangers
  id: totrans-537
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1.2\. 问题与危险
- en: In the kind of electronics hacking we’re doing, we’re working with voltages
    that are quite low—5 V or 3.3 V are typical examples—using components that draw
    current measured in tens of milliamps (mA). These kinds of current and voltage
    combinations aren’t going to throw you across the room (or worse) if you do something
    slightly daft. But there are a couple of things to be aware of (and avoid).
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们进行的电子黑客活动中，我们处理的是相当低的电压——5 V或3.3 V是典型的例子——使用的是电流以十毫安（mA）计的元件。如果你做了点愚蠢的事情，这种电流和电压的组合不会把你扔到房间里（或者更糟）。但有一些事情要提防（并避免）。
- en: Avoid too much current
  id: totrans-539
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 避免电流过大
- en: The first of the two problems arises when you provide too much current to a
    component in a circuit (often by using too low of a resistor value or forgetting
    to add one to the circuit entirely). Some of that energy is converted into what
    is likely a desired outcome—light in the case of an LED, for example—but the rest
    of it has to get used up too. If you provide 100 mA of current to an LED that’s
    rated for a maximum of 20 mA for steady (not blinking) use, that’s not going to
    go well in the long run. The first sign of too much current is often warmth—the
    LED will start to feel hot to the touch. At a certain point, it’ll get overwhelmed
    and burn out completely.
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 两个问题中的第一个出现在你向电路中的某个元件提供过多电流时（通常是通过使用过低的电阻值或完全忘记将其添加到电路中）。其中一部分能量可能被转化为可能期望的结果——例如LED的发光，但其余的能量也需要消耗掉。如果你向一个最大只能稳定（非闪烁）使用20
    mA电流的LED提供100 mA的电流，那么从长远来看这不会很好。过多电流的第一个迹象通常是发热——LED会开始变得触摸起来很热。在某个点上，它会被压垮并完全烧毁。
- en: Avoid creating a short circuit
  id: totrans-541
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 避免造成短路
- en: The second “uh oh” has the potential to be much worse. If there’s no *load*
    in a circuit—that is, no components or resistors to draw or resist current—things
    get nasty indeed. If there is, say, a path running directly from the positive
    to the negative terminal of a battery, there’s no resistance to limit the current
    running through the circuit. This is a *short circuit* ([figure 3.9](#ch03fig09)),
    and it causes immense amounts of current to discharge through the circuit very,
    very quickly. This energy can cause heat, fire, even explosions.
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个“糟糕”的情况可能更糟。如果一个电路中没有*负载*——也就是说，没有元件或电阻来抽取或抵抗电流——事情确实会变得很糟糕。如果有，比如说，一条直接从电池正极到负极的路径，那么电路中就没有电阻来限制电流。这是一个*短路*（[图3.9](#ch03fig09)），并且会导致大量的电流非常快地通过电路放电。这种能量可以造成热量、火灾，甚至爆炸。
- en: Figure 3.9\. A short circuit has no load to moderate the current. A common illustration
    of a short circuit is running a wire directly from the positive to the negative
    terminal of a battery (don’t do this in real life).
  id: totrans-543
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.9. 短路没有负载来调节电流。短路的一个常见例子是将导线直接从电池的正极连接到负极（现实生活中不要这样做）。
- en: '![](03fig09_alt.jpg)'
  id: totrans-544
  prefs: []
  type: TYPE_IMG
  zh: '![图3.9的替代图片](03fig09_alt.jpg)'
- en: Development boards can protect you from the worst of this. If you short-circuit
    the Uno’s power to ground (P.S., don’t), you won’t blow up because the board has
    *current limiters* on its output pins (your board may be toast, though). The most
    current you’ll ever get out of its 5 V pin is 450 mA; the most out of a single
    I/O pin is about 40 mA. You get no such protection against outrageous currents
    if you’re working with batteries—you can cause a regrettable festival of sparks,
    or worse. So be careful.
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: 开发板可以保护你免受最坏情况的影响。如果你短路了Arduino的电源到地（P.S.，不要这样做），你不会爆炸，因为板上的输出引脚有*电流限制器*（你的板可能已经烧焦了）。从其5
    V引脚输出的最大电流是450 mA；从单个I/O引脚输出的最大电流大约是40 mA。如果你使用电池工作，你将不会得到这样的保护——你可能会引发一场令人遗憾的火花盛宴，或者更糟。所以要小心。
- en: 3.2\. Building circuits
  id: totrans-546
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.2. 构建电路
- en: Now that you’ve been debriefed, let’s experiment! As you start adding components
    to circuits, you’re going to need a way to lay them out without losing your mind.
    Twisting wire together or trying to hold several components in place in a circuit
    with your fingers is impractical (and maybe a bit risky).
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经接受了简报，让我们来实验！当你开始向电路中添加元件时，你需要一种方法来布置它们，而不会让你发疯。将电线拧在一起或在电路中用手指尝试固定几个元件是不切实际的（也许还有点风险）。
- en: Instead, *breadboards* make great foundations for laying out circuits. They
    play a role sort of like a LEGO base, providing a grid to plug components and
    wires into.
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，*面包板*是搭建电路的绝佳基础。它们的作用有点像乐高基础板，提供了一个网格，可以将元件和导线插入其中。
- en: 3.2.1\. Using breadboards to prototype circuits
  id: totrans-549
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.1. 使用面包板来原型电路
- en: Breadboards for prototyping circuits are *solderless*, meaning you can stick
    things right into the board without any need for solder. They come in various
    shapes and sizes but are consistent in how the board’s connections are wired.
    [Figure 3.10](#ch03fig10) shows the layout of a *half-size* breadboard (*full-size*
    breadboards are like two half-sized breadboards connected end to end; they’re
    twice as long).
  id: totrans-550
  prefs: []
  type: TYPE_NORMAL
  zh: 用于电路原型设计的面包板是**无焊点**的，这意味着你可以直接将东西插入板中，而无需焊接。它们有各种形状和大小，但板上的连接方式是一致的。[图 3.10](#ch03fig10)
    展示了一个**半尺寸**面包板的布局（**全尺寸**面包板就像两个半尺寸面包板首尾相连；它们的长度是两倍）。
- en: Figure 3.10\. A typical breadboard and the connections inside it
  id: totrans-551
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.10\. 一个典型的面包板及其内部的连接
- en: '![](03fig10_alt.jpg)'
  id: totrans-552
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig10_alt.jpg)'
- en: A typical breadboard combines horizontal *terminal rows* (a technical-sounding
    term that really means “spots to plug components into”) with vertical *power rails*
    (holes meant for connecting power between power sources and components) on both
    sides.
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: 一个典型的面包板结合了两侧的水平**端子排**（一个听起来很专业的术语，实际上意味着“插入组件的位置”）和垂直**电源轨**（用于在电源和组件之间连接电源的孔）。每个孔在电源轨上：一个用于正极，一个用于负极。这些通常用红色（正极）和蓝色或黑色（负极）标记出来。电源轨的连接垂直贯穿整个板长。板的两侧的电源轨之间是不相连的。
- en: Terminal rows often have a notch between each set of five holes. A ten-hole
    terminal row—two sets of five connected holes divided by a notch—is a common layout.
    Each hole in a five-unit row is electrically connected, but connections do not
    continue across the notch.
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: 端子排通常在每组的五个孔之间有一个缺口。一个十孔端子排——两组五个相连的孔通过一个缺口分隔——是一种常见的布局。五单元排中的每个孔在电上是相连的，但连接不会穿过缺口。
- en: 'Power rails have two holes per row: one for positive and one for negative.
    These are usually helpfully marked for you in red (positive) and blue or black
    (negative). Connections in the power rails run vertically down the length of the
    board. The power rail on one side of the board isn’t connected to the power rail
    on the other side of the board.'
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: 电源轨每行有两个孔：一个用于正极，一个用于负极。这些通常用红色（正极）和蓝色或黑色（负极）标记出来。电源轨的连接垂直贯穿整个板长。板的两侧的电源轨之间是不相连的。
- en: Let’s get a feel for how these connections work by using a breadboard to rewire
    the simple LED circuit from the last chapter.
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过使用面包板重新布线上一章中的简单 LED 电路来感受这些连接是如何工作的。
- en: 3.2.2\. Wiring a simple LED circuit on a breadboard
  id: totrans-557
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.2\. 在面包板上布线简单的 LED 电路
- en: '|  |'
  id: totrans-558
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: What you’ll need
  id: totrans-559
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 你需要的东西
- en: '![](note.jpg)'
  id: totrans-560
  prefs: []
  type: TYPE_IMG
  zh: '![](note.jpg)'
- en: 1 Arduino Uno and USB cable
  id: totrans-561
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 个 Arduino Uno 和 USB 线
- en: 'Jumper wires: two red, one black'
  id: totrans-562
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跳线：两根红色，一根黑色
- en: 1 standard red LED
  id: totrans-563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 个标准红色 LED
- en: 1 220 V resistor
  id: totrans-564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 220 V 电阻
- en: '|  |'
  id: totrans-565
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 'First, let’s check in with Ohm’s law to figure out what we’ll need to adjust
    to make the circuit work correctly. Here’s what we know:'
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们回顾一下欧姆定律，以确定我们需要调整什么来使电路正常工作。以下是我们所知道的信息：
- en: The Arduino will provide a 5 V supply voltage.
  id: totrans-567
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino 将提供 5 V 的供电电压。
- en: The maximum current we should run through the LED is somewhere around 20 mA
    (0.02 amps)—for most standard LEDs, 20 mA is a general rule of thumb.
  id: totrans-568
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该通过 LED 的最大电流约为 20 mA（0.02 安培）——对于大多数标准 LED，20 mA 是一个通用的经验法则。
- en: Selecting a resistor for the LED
  id: totrans-569
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 选择 LED 的电阻
- en: Because we have a fixed voltage and a target current, the variable value is
    resistance. What resistor value is needed to create the circuit? Remember,
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们有固定的电压和目标电流，所以可变值是电阻。需要什么电阻值才能创建电路？记住，
- en: '[PRE18]'
  id: totrans-571
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: so
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: 所以
- en: '[PRE19]'
  id: totrans-573
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Resistors come in certain common resistance values, and 250 V is not a commonly
    produced resistor. Calculating a needed resistance value only to find that there
    is no such resistor happens all the time—not to worry. Typically, the rule of
    thumb is to round *up* to the next common resistor value (having too much resistance
    is safer than not enough, ordinarily).
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: 电阻有某些常见的电阻值，250 V 并不是常见的电阻值。计算所需的电阻值，结果发现没有这样的电阻，这种情况经常发生——不必担心。通常，经验法则是将电阻值向上取整到下一个常用电阻值（通常情况下，电阻过大比过小更安全）。
- en: 'For the moment—trust me, I’ll explain shortly—we’re going to do the opposite
    and round *down* a bit to the nearest common resistor: 220 V.'
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: 目前——相信我，我很快就会解释——我们将做相反的事情，并将电阻值向下取整到最接近的常用电阻值：220 V。
- en: '|  |'
  id: totrans-576
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Finding the right resistor**'
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: '**寻找合适的电阻**'
- en: 'Resistors are color-coded in a standard way to aid identification. There are
    two striping systems out there: four-band resistors and five-band resistors. Four-band
    resistors are somewhat more common.'
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: 电阻以标准方式着色，以帮助识别。有两种条纹系统：四色电阻和五色电阻。四色电阻更为常见。
- en: Every resistor has bands of color representing *leading digits* in the resistor’s
    value. Four-band resistors have two of these bands, whereas five-band resistors
    have three.
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
  zh: 每个电阻都有代表电阻值**前导数字**的颜色带。四色带电阻有两个这样的颜色带，而五色带电阻有三个。
- en: The last two bands of a resistor are its *multiplier* band and its *tolerance*
    band, respectively.
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 电阻的最后两个颜色带分别是其**乘数带**和**公差带**。
- en: The color of the *multiplier band* indicates how many zeros to add after the
    value indicated by the preceding digit bands. In other words, multiplying the
    leading digits by this power of ten gives you the resistor’s *value*.
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
  zh: '**乘数带**的颜色表示需要在前面数字带指示的值之后添加多少个零。换句话说，将前导数字乘以这个十的幂次给出电阻的**值**。'
- en: The *tolerance band* color indicates how accurate the resistance is guaranteed
    to be. A tolerance of +/-5% (gold) is common for the types of resistors we’re
    using.
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: '**公差带**的颜色表示电阻的准确性保证。对于我们所使用的电阻类型，+/-5% (金色)的公差是常见的。'
- en: 'A four-band resistor has two digit bands. The four-band resistor in the following
    figure is coded as follows:'
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: 四色带电阻有两个数字带。以下图中的四色带电阻编码如下：
- en: '1 First digit: 2 (red)'
  id: totrans-584
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 第一位数字：2 (红色)
- en: '2 Second digit: 2 (red)'
  id: totrans-585
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2 第二位数字：2 (红色)
- en: '3 Multiplier: 1 (brown) = 101'
  id: totrans-586
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3 乘数：1 (棕色) = 101
- en: '4 Tolerance: +/- 5% (gold)'
  id: totrans-587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4 公差：+/- 5% (金色)
- en: '![](0060fig01_alt.jpg)'
  id: totrans-588
  prefs: []
  type: TYPE_IMG
  zh: '![图片](0060fig01_alt.jpg)'
- en: Resistors are coded with colored bands to indicate their resistance and tolerance.
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: 电阻通过颜色带来表示它们的电阻和公差。
- en: Its value is
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: 其值是
- en: '[PRE20]'
  id: totrans-591
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The five-band resistor in the figure is coded as follows:'
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: 图中的五色带电阻编码如下：
- en: '1 First digit: 1 (brown)'
  id: totrans-593
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 第一位数字：1 (棕色)
- en: '2 Second digit: 0 (black)'
  id: totrans-594
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2 第二位数字：0 (黑色)
- en: '3 Third digit: 0 (black)'
  id: totrans-595
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3 第三位数字：0 (黑色)
- en: '4 Multiplier: 1 (brown)'
  id: totrans-596
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4 乘数：1 (棕色)
- en: '5 Tolerance: +/-5% (gold)'
  id: totrans-597
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5 公差：+/-5% (金色)
- en: The value is
  id: totrans-598
  prefs: []
  type: TYPE_NORMAL
  zh: 值是
- en: '[PRE21]'
  id: totrans-599
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '|  |'
  id: totrans-600
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Circuit diagrams and schematics
  id: totrans-601
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 电路图和电路图
- en: 'There are a couple of ways to represent a circuit visually, to provide other
    builders with a “map” to recreate the circuit. The most formal way to represent
    a circuit is through a schematic, as seen in [figure 3.11](#ch03fig11). A *schematic*
    is a graphical representation of components using standardized notation and symbols.
    It can be thought of as a sort of visual, abstracted graphic: the position of
    components in a schematic don’t necessarily correspond to their layout in physical
    space.'
  id: totrans-602
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种方式可以直观地表示电路，为其他构建者提供一个重建电路的“地图”。表示电路最正式的方式是通过电路图，如图3.11所示。[电路图](https://wiki.example.org/ch03fig11)是一种使用标准化符号和记号的组件图形表示。它可以被看作是一种视觉上的、抽象的图形：电路图中组件的位置并不一定与它们在物理空间中的布局相对应。
- en: Figure 3.11\. Schematic of the simple LED circuit. Schematics are concise and
    standardized representations of circuits, but they don’t show how to position
    components in physical space.
  id: totrans-603
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.11. 简单LED电路的电路图。电路图是电路的简洁和标准化的表示，但它们不显示如何在物理空间中定位组件。
- en: '![](03fig11.jpg)'
  id: totrans-604
  prefs: []
  type: TYPE_IMG
  zh: '![图片](03fig11.jpg)'
- en: There are many possible ways to physically implement the schematic in [figure
    3.11](#ch03fig11), so a wiring *diagram* can be a helpful tool. Diagrams, like
    the one in [figure 3.12](#ch03fig12) (created with the open source Fritzing desktop
    application), show one specific implementation of the circuit and how it could
    be laid out (in this case, on a breadboard).
  id: totrans-605
  prefs: []
  type: TYPE_NORMAL
  zh: 在图3.11中有很多物理实现电路的可能方式，因此接线图可以是一个有用的工具。图，如图3.12（使用开源的Fritzing桌面应用程序创建），显示了电路的一种具体实现及其可能的布局（在这种情况下，在面包板上）。
- en: Figure 3.12\. Wiring diagram of the simple LED circuit, showing a specific physical
    layout to implement the circuit from its schematic. This diagram was created in
    the open source Fritzing desktop application.
  id: totrans-606
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.12. 简单LED电路的接线图，显示了从其电路图实现电路的具体物理布局。此图是在开源的Fritzing桌面应用程序中创建的。
- en: '![](03fig12_alt.jpg)'
  id: totrans-607
  prefs: []
  type: TYPE_IMG
  zh: '![图片](03fig12_alt.jpg)'
- en: Schematics can feel mathy and abstract at first, but they’re universally used
    in the electronics community. You’ll get to know more symbols and conventions
    as we continue our journey, and they’ll start feeling more comfortable. To improve
    your understanding of schematics, make a habit of comparing wiring diagrams back
    to their source schematics.
  id: totrans-608
  prefs: []
  type: TYPE_NORMAL
  zh: 电路图一开始可能会感觉数学化和抽象，但在电子社区中它们是普遍使用的。随着我们继续旅程，你会了解更多符号和惯例，它们会开始感觉更舒适。为了提高你对电路图的理解，养成将接线图与其源电路图进行比较的习惯。
- en: '|  |'
  id: totrans-609
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Plugging things in the right way: polarity**'
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: '**正确连接：极性**'
- en: LEDs are *polarized*, meaning they need to be plugged in in a certain way to
    function correctly. As you learned earlier, the anode is the positive terminal
    and the cathode is the negative terminal.
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: LED是**极化的**，这意味着它们需要以某种方式插入才能正确工作。正如你之前学到的，阳极是正极，阴极是负极。
- en: Resistors are not polarized, meaning it doesn’t matter which direction you plug
    them in. They work just fine oriented either way.
  id: totrans-612
  prefs: []
  type: TYPE_NORMAL
  zh: 电阻不是极化的，这意味着你插的方向无关紧要。它们以任何方向都工作得很好。
- en: Another thing to note is that although I’ll give you precise row and column
    breadboard coordinates in this exercise, you could just as successfully plug the
    components into any row or column as long as the connections work out in the end
    (terminal rows are connected horizontally; power rails, vertically).
  id: totrans-613
  prefs: []
  type: TYPE_NORMAL
  zh: 另一点要注意的是，尽管在这个练习中我会给你精确的面包板行和列坐标，但你也可以将组件插入任何行或列，只要最终连接成功（终端行水平连接；电源轨垂直连接）。
- en: '|  |'
  id: totrans-614
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Time to build the circuit. Referring to [figure 3.12](#ch03fig12), begin by
    connecting components into the terminal rows. Plug the anode of the red LED into
    hole 5C (row 5, hole C) and its cathode into hole 5D (the next row down). Plug
    one end of the resistor into hole 5B, next to the LED’s cathode.
  id: totrans-615
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候构建电路了。参照[图3.12](#ch03fig12)，首先将组件连接到终端行。将红色LED的阳极插入孔5C（第5行，孔C），其阴极插入孔5D（下一行）。将电阻的一端插入孔5B，靠近LED的阴极。
- en: Powering the circuit
  id: totrans-616
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 为电路供电
- en: The circuit needs to be connected to power. First, you’ll need to connect the
    components in the terminal rows to the power rail—recall that terminal rows are
    isolated (for good reason!) from the power rails.
  id: totrans-617
  prefs: []
  type: TYPE_NORMAL
  zh: 电路需要连接到电源。首先，你需要将终端行中的组件连接到电源轨——回想一下，终端行（出于良好原因！）与电源轨是隔离的。
- en: '|  |'
  id: totrans-618
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Plugging things in the right way: jumper wire colors**'
  id: totrans-619
  prefs: []
  type: TYPE_NORMAL
  zh: '**正确插入：跳线颜色**'
- en: If you have a packet of colored jumper wires, you might be wondering which colors
    are for what purpose. By convention, power connections are usually made with red
    (positive) and black (ground) wires. Other colors you may see representing negative
    power connections include white or other dark colors (brown or purple).
  id: totrans-620
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一包彩色跳线，你可能想知道哪些颜色用于什么目的。按照惯例，电源连接通常使用红色（正极）和黑色（地）线。你可能看到的代表负电源连接的其他颜色包括白色或其他深色（棕色或紫色）。
- en: 'Green and yellow are often used for input and output connections, which will
    come up in later chapters. Although there is widespread consistency in using red
    and black/white for power connections, different hackers use different color combinations
    for various other things. Long story short: there are no hard and fast rules,
    but try to be consistent in whichever combination you implement.'
  id: totrans-621
  prefs: []
  type: TYPE_NORMAL
  zh: 绿色和黄色通常用于输入和输出连接，这些将在后面的章节中介绍。尽管使用红色和黑色/白色连接电源的广泛一致性，但不同的黑客使用不同的颜色组合来表示其他事物。简而言之：没有硬性规定，但请尽量在所实施的任何组合中保持一致性。
- en: Jumper wires aren’t polarized. They can be connected in either direction.
  id: totrans-622
  prefs: []
  type: TYPE_NORMAL
  zh: 跳线不是极化的。它们可以任意方向连接。
- en: '|  |'
  id: totrans-623
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Use a red jumper wire to connect hole 5B—electrically connected to the anode
    of the LED—to a hole in the red (positive) column of the power rail. The fourth
    row down should do nicely if you can’t decide on a favorite. Connect the resistor’s
    free end directly into the negative power rail as shown in [figure 3.12](#ch03fig12).
    Now there’s an unbroken path leading from the positive power rail, through the
    red wire to the LED, out of the LED and through the resistor back to the negative
    power rail.
  id: totrans-624
  prefs: []
  type: TYPE_NORMAL
  zh: 使用红色跳线将孔5B（与LED的阳极电连接）连接到电源轨的红色（正极）列中的孔。如果你不能决定最喜欢的孔，第四行向下应该很好。将电阻的自由端直接连接到负电源轨，如图[图3.12](#ch03fig12)所示。现在从正电源轨，通过红色电线到LED，从LED出来，通过电阻回到负电源轨，形成了一条不间断的路径。
- en: '|  |'
  id: totrans-625
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**The current is flowing... *which* way now?**'
  id: totrans-626
  prefs: []
  type: TYPE_NORMAL
  zh: '**电流正在流动...现在**是哪个方向？'
- en: The kinds of projects we’re building with development boards and embedded systems
    use DC (direct current) circuits. Current flow in a DC circuit is in a single
    direction, usually rendered as going from positive source (highest potential energy)
    toward negative, or ground (lowest potential energy).
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用开发板和嵌入式系统构建的项目类型使用直流（直流）电路。直流电路中的电流流向是单向的，通常表示为从正电源（最高势能）流向负极，或地（最低势能）。
- en: 'Technically, this isn’t correct—current can be more accurately described as
    flowing from negative toward positive, and even that’s an oversimplification.
    But the convention of drawing circuits with flow in the positive to negative (`+`
    toward `-`) direction is deeply entrenched, and there’s nothing inherently harmful
    in representing DC current flow in this traditional way, as long as you’re consistent.
    Fun fact: the practice of envisioning current flow from positive to negative was
    established by none other than electricity pioneer Benjamin Franklin.'
  id: totrans-628
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，这并不正确——电流更准确地描述为从负极流向正极，即使是这种简化也是一种过度简化。但用正极到负极（`+`指向`-`）的方向绘制电路的传统做法已经根深蒂固，只要保持一致，用这种方式表示直流电流流动并没有固有的危害。有趣的事实：设想电流从正极流向负极的做法是由电学先驱本杰明·富兰克林确立的。
- en: Besides DC, the other type of current flow is AC (alternating current), in which
    the flow of current reverses directions periodically. Wall-outlet power is AC,
    oscillating direction 50 or 60 times per second, depending on what part of the
    world you live in.
  id: totrans-629
  prefs: []
  type: TYPE_NORMAL
  zh: 除了直流电（DC）之外，另一种电流流动类型是交流电（AC），其中电流的流动方向周期性地反转。家庭插座电源是交流电，每秒振荡方向50或60次，这取决于你所在的世界部分。
- en: '|  |'
  id: totrans-630
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '|  |'
  id: totrans-631
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Unplug the Uno!
  id: totrans-632
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 请拔掉Arduino Uno的电源！
- en: As ever, make sure your Uno is unplugged from USB or wall power before connecting
    it to components or circuits.
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，在连接元件或电路之前，请确保你的Arduino Uno已经从USB或墙式电源上拔掉。
- en: '|  |'
  id: totrans-634
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: The Uno can provide a nice, steady 5 V from its 5 V power pin. Using a red jumper
    wire, plug one end into the Uno’s 5 V pin and the other into the top row of the
    positive power rail. Run a black jumper wire from the Uno’s GND pin to the top
    row of the negative power rail. This completes the circuit wiring.
  id: totrans-635
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino Uno可以从其5V电源引脚提供稳定的5V电压。使用一根红色跳线，一端插入Arduino Uno的5V引脚，另一端插入正电源轨的顶部行。从Arduino
    Uno的GND引脚用一根黑色跳线连接到负电源轨的顶部行。这样就完成了电路的布线。
- en: Now plug your Uno into USB or wall power. Your LED should light up!
  id: totrans-636
  prefs: []
  type: TYPE_NORMAL
  zh: 现在将你的Arduino Uno插入USB或墙式电源。你的LED应该会亮起来！
- en: '|  |'
  id: totrans-637
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '**Troubleshooting the circuit**'
  id: totrans-638
  prefs: []
  type: TYPE_NORMAL
  zh: '**电路故障排除**'
- en: If your LED doesn’t light up, there are a few things to check. The most common
    reason for a circuit like this to fail is that it’s an *open circuit*, meaning
    there’s a gap in the path from the positive to negative ends of the circuit. Check
    the positions of your components and wires, and make sure wires are snugly plugged
    into breadboard holes. Make sure that none of the exposed metal terminals on the
    components are touching each other. Also double-check that your Uno’s power LED
    is lit.
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的LED灯不亮，有几个地方需要检查。这种电路失败的最常见原因是它是**开路**，意味着从电路的正极到负极的路径中存在间隙。检查你的元件和电线位置，并确保电线牢固地插入了面包板的孔中。确保元件上暴露的金属端子没有相互接触。还要再次确认你的Arduino
    Uno的电源LED灯是亮的。
- en: If those steps don’t do the trick, try swapping out your LED with a fresh one
    on the off chance that the LED is dead. On occasion, a breadboard’s connections
    can be wonky (though this is more typical for breadboards you’ve been using for
    a long time). As a last resort, try wiring the components onto a different part
    of the breadboard or try with another breadboard.
  id: totrans-640
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些步骤不起作用，尝试用一个新的LED替换原来的LED，以防LED灯已经损坏。有时，面包板的连接可能会出现问题（尽管这更常见于你已经使用很长时间的面包板）。作为最后的手段，尝试将元件连接到面包板的另一部分，或者尝试使用另一个面包板。
- en: '|  |'
  id: totrans-641
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Series and parallel circuits
  id: totrans-642
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 串联和并联电路
- en: This simple LED circuit ([figure 3.13](#ch03fig13)) is a *series circuit*. A
    series circuit has only one path for electrons—current, those individual flowing
    jellyfish of the gnome world—to take. Because there’s only one possible route,
    all jellyfish/electrons go through the whole route; they’re not able to wander
    off on some shortcut or side road. That means the current is the same at all points
    in the circuit ([figure 3.13](#ch03fig13)).
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: 这个简单的LED电路（[图3.13](#ch03fig13)）是一个**串联电路**。串联电路只有一条路径供电子——电流，那些侏儒世界中的流动水母——通过。因为只有一条可能的路径，所有的水母/电子都必须通过整个路径；它们不能走捷径或旁路。这意味着电路中所有点的电流都是相同的（[图3.13](#ch03fig13)）。
- en: Figure 3.13\. A series circuit has only one possible path for the charges (jellyfish)
    to flow through—there are no branches. The current is the same at any point in
    a series circuit, meaning that points 1, 2, 3, and 4 all have equal current.
  id: totrans-644
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.13\. 串联电路只有一条可能的路径供电荷（水母）流动——没有分支。在串联电路的任何一点，电流都是相同的，这意味着1、2、3和4点都有相同的电流。
- en: '![](03fig13.jpg)'
  id: totrans-645
  prefs: []
  type: TYPE_IMG
  zh: '![图3.13](03fig13.jpg)'
- en: When modifying the current of a series circuit with resistors, it doesn’t matter
    whether you use, say, one resistor rated at 200 V or two resistors at 100 V. The
    values of the resistors add together and modify the current across the whole circuit
    ([figure 3.14](#ch03fig14)).
  id: totrans-646
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用电阻器修改串联电路的电流时，你使用一个200伏的电阻器还是两个100伏的电阻器并不重要。电阻器的值相加并修改整个电路的电流([图3.14](#ch03fig14))。
- en: '|  |'
  id: totrans-647
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Voltage and series circuits
  id: totrans-648
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 电压和串联电路
- en: Although *current* is the same at any point in a series circuit, *voltage* may
    differ from point to point. We’ll talk about this when we build *voltage dividers*
    in [chapter 4](kindle_split_012.html#ch04).
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然在串联电路的任何一点上*电流*是相同的，但*电压*可能从一点到另一点不同。我们将在[第4章](kindle_split_012.html#ch04)中构建*分压器*时讨论这一点。
- en: '|  |'
  id: totrans-650
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Figure 3.14\. Resistor values add together in a series circuit.
  id: totrans-651
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.14\. 串联电路中电阻器的值相加。
- en: '![](03fig14_alt.jpg)'
  id: totrans-652
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig14_alt.jpg)'
- en: One detail of these series circuits that might have given you pause is the position
    of the *current-limiting resistor(s)* (a current-limiting resistor is one that’s
    placed to moderate the current in the circuit).
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: 这些串联电路中的一个细节可能会让你感到困惑，那就是*限流电阻器*（限流电阻器是一种用来调节电路中电流的电阻器）的位置。
- en: In [figure 3.14](#ch03fig14), the resistors are connected between the LED and
    ground; that is, they’re positioned “after” the LED. As it turns out, it doesn’t
    matter where the resistors are positioned relative to the LED in a series circuit.
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图3.14](#ch03fig14)中，电阻器连接在LED和地之间；也就是说，它们位于LED的“之后”。实际上，在串联电路中，电阻器相对于LED的位置并不重要。
- en: A current-limiting resistor placed in a series circuit affects current throughout
    the whole circuit, no matter its position—remember, current is the same at all
    points in a series circuit.
  id: totrans-655
  prefs: []
  type: TYPE_NORMAL
  zh: 放置在串联电路中的限流电阻器会影响整个电路的电流，无论其位置如何——记住，串联电路中所有点的电流是相同的。
- en: 3.2.3\. Expanding a series circuit with a button
  id: totrans-656
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.3\. 使用按钮扩展串联电路
- en: '|  |'
  id: totrans-657
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: What you’ll need
  id: totrans-658
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 你需要
- en: '![](note.jpg)'
  id: totrans-659
  prefs: []
  type: TYPE_IMG
  zh: '![](note.jpg)'
- en: 1 Arduino Uno and USB cable
  id: totrans-660
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个Arduino Uno和USB线
- en: 1 push button
  id: totrans-661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个按钮
- en: 1 standard red LED
  id: totrans-662
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个标准红色LED
- en: 1 220 V resistor
  id: totrans-663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个220伏电阻器
- en: 3 jumper wires
  id: totrans-664
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3根跳线
- en: '|  |'
  id: totrans-665
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: In the simple LED series circuit you wired, all of the current runs through
    the LED, then through the resistor, and then to ground ([figure 3.14](#ch03fig14)).
    A single gap in a series circuit will cause the entire circuit to stop working,
    because it’s a gap in the only path through the circuit. That makes it possible
    to activate and deactivate the whole circuit with one switch.
  id: totrans-666
  prefs: []
  type: TYPE_NORMAL
  zh: 在你焊接的简单LED串联电路中，所有电流都通过LED，然后通过电阻器，最后到达地([图3.14](#ch03fig14))。串联电路中的单个间隙会导致整个电路停止工作，因为它是电路唯一路径的间隙。这使得可以用一个开关来激活和关闭整个电路。
- en: You can see how this works by adding a button to the circuit. A *button* is
    a kind of switch that only completes a connection when it’s pressed down (sometimes
    buttons are called *momentary switches*) ([figure 3.15](#ch03fig15)).
  id: totrans-667
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过向电路中添加按钮来了解这是如何工作的。*按钮*是一种只有在按下时才会完成连接的开关（有时按钮被称为*瞬态开关*）([图3.15](#ch03fig15))。
- en: Figure 3.15\. Pins on opposite sides of the button are always electrically connected,
    whereas pins sharing a single side are only connected when the button is held
    down.
  id: totrans-668
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.15\. 按钮两侧的引脚始终电连接，而共享同一侧的引脚只有在按钮按下时才连接。
- en: '![](03fig15_alt.jpg)'
  id: totrans-669
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig15_alt.jpg)'
- en: In [figure 3.16](#ch03fig16), the button is connected to a breadboard, oriented
    such that the “always-connected” pins span the notch in the middle. That means
    the top row’s highlighted connections are always connected electrically, as are
    those highlighted in the bottom row. While the button is inactive (not pressed),
    the two rows are isolated from each other. When the button is pressed, however,
    a connection is made between the top and bottom pins on the button’s left side,
    and the top and bottom pins on its right side. The effect is that both highlighted
    rows are electrically connected to each other while the button is pressed.
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: 在[图3.16](#ch03fig16)中，按钮连接到面包板上，方向使得“始终连接”的引脚跨越中间的凹槽。这意味着顶行的高亮连接始终电连接，底行的高亮连接也是如此。当按钮未激活（未按下）时，两行彼此隔离。然而，当按钮被按下时，按钮左侧的上下引脚之间以及右侧的上下引脚之间会建立连接。结果是，当按钮被按下时，两个高亮行在电上相互连接。
- en: Figure 3.16\. A push button connected to a breadboard, spanning the center notch.
    When not pressed, the pairs of pins at the top and bottom of the button are connected
    electrically (horizontally). When pressed and held, the pairs of pins on the left
    and right sides of the button are electrically connected (vertically).
  id: totrans-671
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.16\. 一个连接到面包板的按钮，跨越中心缺口。当未按下时，按钮顶部和底部的引脚对是电连接的（水平）。当按下并保持时，按钮左右两侧的引脚对是电连接的（垂直）。
- en: '![](03fig16.jpg)'
  id: totrans-672
  prefs: []
  type: TYPE_IMG
  zh: '![图3.16](03fig16.jpg)'
- en: When a properly connected button is pressed and held, the circuit is *closed*,
    completing the path and allowing electrons to flow through the circuit. When released,
    the circuit is *open*—it has a gap and no current flows. The schematic of the
    circuit you need to construct is shown in [figure 3.17](#ch03fig17).
  id: totrans-673
  prefs: []
  type: TYPE_NORMAL
  zh: 当按钮正确连接并按下并保持时，电路是*闭合*的，完成路径并允许电子通过电路流动。当释放时，电路是*开路*的——它有一个间隙，没有电流流动。你需要构建的电路图显示在[图3.17](#ch03fig17)中。
- en: Figure 3.17\. Schematic of the updated circuit, integrating a push button
  id: totrans-674
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.17\. 更新电路的原理图，集成按钮
- en: '![](03fig17.jpg)'
  id: totrans-675
  prefs: []
  type: TYPE_IMG
  zh: '![图3.17](03fig17.jpg)'
- en: 'Build the circuit: button and LED'
  id: totrans-676
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 构建电路：按钮和LED
- en: 'To build the button circuit in [figure 3.18](#ch03fig18), follow these steps:'
  id: totrans-677
  prefs: []
  type: TYPE_NORMAL
  zh: 要在[图3.18](#ch03fig18)中构建按钮电路，请按照以下步骤操作：
- en: Disconnect the Uno from power.
  id: totrans-678
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 断开Arduino Uno的电源。
- en: Remove the LED and the resistor from the breadboard.
  id: totrans-679
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从面包板上移除LED和电阻。
- en: Using a black jumper wire, connect GND on the Uno to the top row of the negative
    power rail on the right side of the breadboard.
  id: totrans-680
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用一根黑色跳线，将Arduino Uno的GND连接到面包板右侧负电源轨的最上面一行。
- en: Connect the button to the breadboard. Your button might be a different size
    and fit more comfortably between different rows, which is fine.
  id: totrans-681
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将按钮连接到面包板上。你的按钮可能尺寸不同，更适合放在不同的行之间，这是可以的。
- en: Plug the LED’s anode (longer leg) into a slot in the same row as the bottom
    two legs of the button.
  id: totrans-682
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LED的正极（较长的腿）插入与按钮底部两个腿同一行的槽位。
- en: Plug the LED’s cathode in one row down.
  id: totrans-683
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将LED的负极插入下一行。
- en: Connect the resistor from a slot in the same row as the LED’s cathode to the
    negative power rail. You can leave the red wire connecting the left-hand power
    rail to row 4 in the same place as it was in the previous exercise.
  id: totrans-684
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将电阻从与LED负极同一行的槽位连接到负电源轨。你可以将连接左手电源轨到第4行的红色电线留在与之前练习相同的位置。
- en: Reconnect the Uno’s power.
  id: totrans-685
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新连接Arduino Uno的电源。
- en: The LED should not be lit initially. Press the button. The LED should light
    up for as long as you hold the button down.
  id: totrans-686
  prefs: []
  type: TYPE_NORMAL
  zh: 初始时LED不应该亮。按下按钮。LED应该在你按下按钮的时间内亮起。
- en: Figure 3.18\. Wiring diagram of adapted LED circuit with a push button
  id: totrans-687
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.18\. 带有按钮的改进LED电路的布线图
- en: '![](03fig18_alt.jpg)'
  id: totrans-688
  prefs: []
  type: TYPE_IMG
  zh: '![图3.18替代](03fig18_alt.jpg)'
- en: 3.2.4\. LEDs in series
  id: totrans-689
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.4\. 串联LED
- en: There’s one more stop on the series-circuit discovery tour. Let’s construct
    a circuit containing multiple LEDs wired in series—that is, multiple LEDs on a
    circuit that only has one path. Here’s where I can come clean about the detail
    left out in the LED-resistor calculation we did earlier in the chapter.
  id: totrans-690
  prefs: []
  type: TYPE_NORMAL
  zh: 在串联电路探索之旅中还有一站。让我们构建一个包含多个串联LED的电路——也就是说，在一个只有一条路径的电路上有多个LED。这就是我坦白之前章节中省略的LED-电阻计算细节的地方。
- en: 'To jog your memory, the calculation was aimed at finding the right resistor
    value for an LED—target current 20 mA—in a 5 V circuit:'
  id: totrans-691
  prefs: []
  type: TYPE_NORMAL
  zh: 为了唤醒你的记忆，计算是为了找到5V电路中LED的正确电阻值——目标电流20mA：
- en: '[PRE22]'
  id: totrans-692
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Instead of rounding up to the next common resistor value, we rounded down to
    220 V.
  id: totrans-693
  prefs: []
  type: TYPE_NORMAL
  zh: 我们没有向上取整到下一个常见的电阻值，而是向下取整到220V。
- en: The reason that a 220 V resistor is more than plenty for an LED in a 5 V circuit
    at 20 mA is that, because of a characteristic of LEDs, we don’t need to account
    for the full 5 V when calculating for the right resistor value. In fact, 220 V
    is slightly high.
  id: totrans-694
  prefs: []
  type: TYPE_NORMAL
  zh: 在5V电路中，220V电阻对于20mA的LED来说绰绰有余的原因是，由于LED的特性，我们在计算合适的电阻值时不需要考虑完整的5V。实际上，220V略高。
- en: 'There’s a relevant law, called Kirchoff’s voltage law (*KVL* to those in the
    know). It states that all of the voltage in the circuit has to be in balance:
    the amount generated has to be the same as the amount used. Voltage in, voltage
    out.'
  id: totrans-695
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一条相关定律，称为基尔霍夫电压定律（对那些了解的人来说是*KVL*）。它指出电路中的所有电压都必须平衡：产生的电压量必须与使用的电压量相同。输入电压，输出电压。
- en: In the LED-series circuit, 250 V would be the correct approximate resistor to
    use if the resistor were the only thing in the circuit “using” some voltage. But
    it’s not. LEDs have a metric called *forward voltage drop*. There’s a bit of detail
    to that, but for our purposes it’s the approximate amount of voltage the LED will
    use up in the circuit ([figures 3.19](#ch03fig19) and [3.20](#ch03fig20)).
  id: totrans-696
  prefs: []
  type: TYPE_NORMAL
  zh: 在LED串联电路中，如果电阻是电路中唯一“使用”一些电压的元件，那么250 V将是正确的近似电阻值。但事实并非如此。LED有一个称为“正向电压降”的度量。这有点细节，但就我们的目的而言，它是LED在电路中消耗的大约电压量（[图3.19](#ch03fig19)和[图3.20](#ch03fig20)）。
- en: Figure 3.19\. As electricity travels across an LED, some voltage is used, or
    *dropped*. The amount of voltage used is called the LED’s *forward voltage*. It
    ranges between about 1.8 V and 3.5 V, depending on the color of the LED—the higher
    the frequency of the emitted light, the higher the voltage drop.
  id: totrans-697
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.19。当电流穿过LED时，会消耗一些电压，或者说是“降下”。消耗的电压量称为LED的“正向电压”。它介于大约1.8 V到3.5 V之间，具体取决于LED的颜色——发出的光频率越高，电压降就越高。
- en: '![](03fig19.jpg)'
  id: totrans-698
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig19.jpg)'
- en: Figure 3.20\. Hearkening back to the analogy of voltage as cliff steepness or
    height, the same series-LED circuit can be seen from a different perspective.
    As the jellyfish current moves through the LED, 1.8 V is “used up,” reducing the
    remaining voltage to 3.2 V (reducing the steepness). That 3.2 V is then used up
    by the current-limiting resistor. When the jellyfish reach the point of lowest
    electrical potential, all of the voltage in the circuit has been accounted for.
  id: totrans-699
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.20。回顾电压作为悬崖陡度或高度的比较，可以从不同的角度看到相同的串联LED电路。当水母电流通过LED时，1.8 V被“消耗”，剩余电压降至3.2
    V（降低陡度）。然后，这3.2 V被限流电阻消耗。当水母达到最低电势点时，电路中的所有电压都已考虑在内。
- en: '![](03fig20_alt.jpg)'
  id: totrans-700
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig20_alt.jpg)'
- en: While most workaday standard LEDs have a consistent *forward current* (for purposes
    of brevity, you can think of that as “roughly the current it should receive”)
    of 20 mA, forward voltage differs between LEDs, mostly related to the color of
    the LED.
  id: totrans-701
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然大多数日常标准LED的正向电流（为了简洁，你可以将其视为“大致应该接收的电流”）为20 mA，但不同LED的正向电压是不同的，这主要与LED的颜色有关。
- en: 'Red LEDs have a forward voltage that varies for the most part between 1.8 and
    2 V. If the LED in the circuit has a forward voltage drop of 1.8 V, we can subtract
    that from the system voltage of 5 V, and that is the voltage that the resistor
    needs to account for:'
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: 红色LED的正向电压大部分在1.8到2 V之间变化。如果电路中的LED的正向电压降为1.8 V，我们可以从5 V的系统电压中减去这部分电压，这就是电阻需要考虑的电压：
- en: '[PRE23]'
  id: totrans-703
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Given that we want to aim for that 20 mA current (0.02 A), the resulting Ohm’s
    law equation is
  id: totrans-704
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们想要达到20 mA的电流（0.02 A），根据欧姆定律得出的方程式是
- en: '[PRE24]'
  id: totrans-705
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: or
  id: totrans-706
  prefs: []
  type: TYPE_NORMAL
  zh: 或者
- en: '[PRE25]'
  id: totrans-707
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'A 220 V resistor is close enough in value to be just dandy—rounding up to the
    next common resistor value as per convention. Now, 220 V is more resistance than
    160 V, so you might wonder what effect using a higher resistance value has on
    the LED and the circuit. Higher resistance with steady voltage means the current
    goes down (because, as always, Ohm’s law):'
  id: totrans-708
  prefs: []
  type: TYPE_NORMAL
  zh: 220 V的电阻值足够接近，可以非常合适——按照惯例，将其四舍五入到下一个常见的电阻值。现在，220 V比160 V的电阻值要大，所以你可能想知道使用更高电阻值对LED和电路有什么影响。更高的电阻值和稳定的电压意味着电流会下降（因为，一如既往，根据欧姆定律）：
- en: '[PRE26]'
  id: totrans-709
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'In the end, the LED gets less current than 20 mA—about 15 mA (.0145 A). The
    amount of current provided to an LED is directly proportional to its brightness:
    an LED getting 15 mA will not be as blindingly bright as one receiving 20 mA.'
  id: totrans-710
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，LED的电流小于20 mA——大约15 mA（0.0145 A）。提供给LED的电流与其亮度成正比：接收15 mA的LED不会像接收20 mA的LED那样耀眼。
- en: What’s the situation if another identical red LED is added into this series
    circuit? What’s the needed resistor? We’ll need to account for the voltage drop
    of both LEDs ([figure 3.21](#ch03fig21)).
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在这个串联电路中再添加一个相同的红色LED，情况会怎样？需要什么电阻值？我们需要考虑两个LED的电压降（[图3.21](#ch03fig21)）。
- en: Figure 3.21\. Each of the two LEDs drops some of the voltage in the circuit,
    and, again, the remaining voltage is dropped by the resistor.
  id: totrans-712
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.21。两个LED中的每一个都会在电路中消耗一些电压，同样，剩余的电压由电阻消耗。
- en: '![](03fig21.jpg)'
  id: totrans-713
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig21.jpg)'
- en: 'Fortunately, this is a question of straightforward arithmetic. After subtracting
    the voltage drop of each LED from the total circuit voltage, we’re left with 1.4
    V:'
  id: totrans-714
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，这是一个简单直接的数学问题。在从总电路电压中减去每个LED的电压降后，我们剩下1.4 V：
- en: '[PRE27]'
  id: totrans-715
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Rounding up to the next common resistor value, a 100 V resistor will do nicely,
    as shown in the schematic in [figure 3.22](#ch03fig22).
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: 将电阻值四舍五入到下一个常用电阻值，一个100V电阻将非常适合，如[图3.22](#ch03fig22)中的电路图所示。
- en: 'Figure 3.22\. The two LEDs are wired in series with a 100 V resistor. There’s
    only a single path through this circuit when the button is pressed: through the
    first LED, through the second LED, through the resistor, and back to ground.'
  id: totrans-717
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.22\. 两个LED灯通过一个100V电阻串联连接。当按下按钮时，电路中只有一条路径：通过第一个LED，通过第二个LED，通过电阻，然后回到地。
- en: '![](03fig22.jpg)'
  id: totrans-718
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig22.jpg)'
- en: 'Build the circuit: two LEDs in series'
  id: totrans-719
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 构建电路：两个LED灯串联
- en: '|  |'
  id: totrans-720
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: What you’ll need
  id: totrans-721
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 你将需要
- en: '![](note.jpg)'
  id: totrans-722
  prefs: []
  type: TYPE_IMG
  zh: '![](note.jpg)'
- en: 1 Arduino Uno and USB cable
  id: totrans-723
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个Arduino Uno和USB线
- en: 1 push button
  id: totrans-724
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个按钮
- en: 2 standard red LEDs
  id: totrans-725
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2个标准红色LED灯
- en: 1 100 V resistor
  id: totrans-726
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个100V电阻
- en: 3 jumper wires
  id: totrans-727
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3根跳线
- en: '|  |'
  id: totrans-728
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: 'To build the circuit in [figure 3.23](#ch03fig23), follow these steps:'
  id: totrans-729
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建[图3.23](#ch03fig23)中的电路，请按照以下步骤操作：
- en: Unplug your Uno from power.
  id: totrans-730
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从电源上拔下你的Arduino Uno。
- en: Unplug the 220 V resistor from the breadboard and put it away.
  id: totrans-731
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从面包板上拔下220V电阻并收好。
- en: Plug the anode of a second LED into the same row as the cathode from the first
    LED (row 7 in [figure 3.23](#ch03fig23)).
  id: totrans-732
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将第二个LED的正极插入与第一个LED的负极相同的行（[图3.23](#ch03fig23)中的第7行）。
- en: Connect a 100 V resistor from the negative power rail to the row containing
    the second LED’s cathode (row 8).
  id: totrans-733
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从负电源轨连接一个100V电阻到包含第二个LED负极的行（第8行）。
- en: Figure 3.23\. Wiring diagram of two LEDs in series
  id: totrans-734
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.23\. 两个LED灯串联的接线图
- en: '![](03fig23_alt.jpg)'
  id: totrans-735
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig23_alt.jpg)'
- en: If you plug your Uno into power and then press the button, both LEDs should
    light up. They’re wired in series, which may be easier to visualize by looking
    at [figure 3.22](#ch03fig22) again.
  id: totrans-736
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你将你的Arduino Uno连接到电源并按下按钮，两个LED灯应该都会亮起。它们是串联连接的，可以通过再次查看[图3.22](#ch03fig22)来更直观地理解。
- en: 'And what if you add a third LED? Trick question: you can’t really. Not if you
    want to produce reliable and bright light. There’s only 1.4 V “left” after the
    first two LEDs’ voltage drops. That’s not quite enough to power a third LED—an
    LED requires at least its voltage drop value to light up. You might be able to
    get the three LEDs to light up weakly, but they wouldn’t be robust.'
  id: totrans-737
  prefs: []
  type: TYPE_NORMAL
  zh: 那如果你添加第三个LED呢？这是一个陷阱问题：实际上你并不能做到。如果你想要产生可靠且明亮的灯光，这是不可能的。在第一个两个LED的电压下降后，只剩下1.4V“剩余”电压。这几乎不足以点亮第三个LED——LED至少需要其电压下降值才能点亮。你可能能够使三个LED微弱地发光，但它们不会很稳定。
- en: It is possible to steadily power more than two LEDs with 5 V, but to do so you
    need a parallel circuit.
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: 使用5V电源可以稳定地为两个以上的LED灯供电，但要这样做，你需要一个并联电路。
- en: 3.2.5\. Parallel circuits and current dividers
  id: totrans-739
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.5\. 并联电路和电流分配器
- en: In a series circuit, there’s only one path for electrons to take, but in a parallel
    circuit, there are two or more possible paths, or *branches* ([figure 3.24](#ch03fig24)).
  id: totrans-740
  prefs: []
  type: TYPE_NORMAL
  zh: 在串联电路中，电子只有一条路径可以走，但在并联电路中，有两条或更多可能的路径，或称为*分支*（[图3.24](#ch03fig24)）。
- en: 'Figure 3.24\. In a parallel circuit, there’s more than one path, or branch,
    current can take. In this example, there are two branches: each has its own LED
    and resistor.'
  id: totrans-741
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.24\. 在并联电路中，电流可以走多条路径或分支。在这个例子中，有两个分支：每个分支都有自己的LED和电阻。
- en: '![](03fig24_alt.jpg)'
  id: totrans-742
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig24_alt.jpg)'
- en: As electrons move through the circuit and encounter a fork in the road, they
    each make a decision about which branch to take. Current prefers a path with less
    resistance ([figure 3.25](#ch03fig25)).
  id: totrans-743
  prefs: []
  type: TYPE_NORMAL
  zh: 当电子通过电路并遇到道路分叉时，它们各自会做出选择哪条分支的决定。电流倾向于选择电阻较小的路径（[图3.25](#ch03fig25)）。
- en: Figure 3.25\. Because the two branches in this parallel circuit have the same
    resistance (100 V), half of the current will take one branch and half will take
    the other.
  id: totrans-744
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.25\. 因为这个并联电路中的两个分支具有相同的电阻（100V），一半的电流将通过一个分支，另一半将通过另一个分支。
- en: '![](03fig25_alt.jpg)'
  id: totrans-745
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig25_alt.jpg)'
- en: When calculating how much resistance is in the parallel circuit, things get
    a bit weird and counterintuitive. Look again at the parallel circuit in [figure
    3.25](#ch03fig25). What’s the total resistance that the two 100 V resistors provide?
  id: totrans-746
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算并联电路中的电阻时，事情会变得有些奇怪且不符合直觉。再次查看[图3.25](#ch03fig25)中的并联电路。两个100V电阻提供的总电阻是多少？
- en: The total resistance of series circuits is easy to figure out—just add ’em up
    and voilà! You’ve got the total resistance. It’s tempting to do the same at first
    with parallel circuits—to assume the total resistance is 200 V. Nope. Or maybe
    you spied that any given charge going through the circuit is only going through
    one resistor, not both. So that must mean there’s a total resistance of 100 V?
    Also, sorry, nope.
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: 串联电路的总电阻很容易计算——只需相加即可， voilà！你就得到了总电阻。一开始就假设并联电路的总电阻是200 V是很诱人的。不，或者你可能注意到，任何给定的电荷在电路中只通过一个电阻，而不是两个。所以这一定意味着总电阻是100
    V？抱歉，也不是。
- en: The correct answer is 50 V.
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: 正确答案是50 V。
- en: 'I know, I know. That doesn’t feel right, but it’s true: in a parallel circuit,
    the total resistance will always be *less than* the smallest resistor value. Let’s
    arm ourselves with Ohm’s law and a few deep breaths and examine how this can possibly
    be. Calculating equivalent resistance in parallel circuits is one of the more
    challenging concepts to novice electronics hackers, so don’t pull your hair out
    just yet.'
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: 我知道，我知道。这感觉不太对劲，但这是真的：在并联电路中，总电阻总是**小于**最小电阻值。让我们用欧姆定律和一些深呼吸来探讨这怎么可能。在并联电路中计算等效电阻是新手电子黑客们面临的更具挑战性的概念之一，所以请不要还没开始就拔头发。
- en: Let’s break it down and put it back together. The 5 V series circuit with a
    100 V resistor shown in [figure 3.26](#ch03fig26) will draw 50 mA of current (I)
    because
  id: totrans-750
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们把它拆开再组合起来。图3.26中显示的5 V串联电路和100 V电阻将消耗50 mA的电流（I），因为
- en: '[PRE28]'
  id: totrans-751
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Figure 3.26\. This series circuit draws 50 mA because 5 V / 100 V = .05 A.
  id: totrans-752
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.26。这个串联电路的电流为50 mA，因为5 V / 100 V = 0.05 A。
- en: '![](03fig26.jpg)'
  id: totrans-753
  prefs: []
  type: TYPE_IMG
  zh: '![图片](03fig26.jpg)'
- en: Now say you duplicate that same path—5 V and a 100 V resistor—and glom it onto
    the circuit. That second path will also independently draw 50 mA because the supply
    voltage (5 V) and the resistance (100 V) stay the same ([figure 3.27](#ch03fig27)).
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: 现在假设你复制相同的路径——5 V和100 V电阻——并将其连接到电路中。第二条路径也将独立地消耗50 mA，因为供电电压（5 V）和电阻（100 V）保持不变（[图3.27](#ch03fig27)）。
- en: Figure 3.27\. Each branch of a parallel circuit in isolation acts like its own
    series circuit. We can use Ohm’s law to verify that this branch will also draw
    50 mA.
  id: totrans-755
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.27。并联电路的每个分支单独来看就像它自己的串联电路。我们可以用欧姆定律来验证这个分支也将消耗50 mA。
- en: '![](03fig27_alt.jpg)'
  id: totrans-756
  prefs: []
  type: TYPE_IMG
  zh: '![图片](03fig27_alt.jpg)'
- en: Added together, the current drawn by the two branches is 100 mA—the total current
    draw of the circuit has increased ([figure 3.28](#ch03fig28)).
  id: totrans-757
  prefs: []
  type: TYPE_NORMAL
  zh: 两个分支的总电流为100 mA——电路的总电流消耗增加了（[图3.28](#ch03fig28)）。
- en: Figure 3.28\. The total current going in to the circuit is 100 mA (point A).
    It splits equally into two branches—each branch gets 50 mA (points B, C). The
    current rejoins and at point D is again 100 mA. In a parallel circuit, the supplied
    voltage is constant for each branch but the current varies.
  id: totrans-758
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.28。进入电路的总电流是100 mA（点A）。它平均分成两个分支——每个分支得到50 mA（点B、C）。电流重新汇合，在点D再次达到100 mA。在并联电路中，每个分支的供电电压是恒定的，但电流是变化的。
- en: '![](03fig28.jpg)'
  id: totrans-759
  prefs: []
  type: TYPE_IMG
  zh: '![图片](03fig28.jpg)'
- en: Looking at the circuit as a whole now, its total current is 100 mA (.1 A) and
    supply voltage is, as ever, 5 V. Plugging that into Ohm’s law,
  id: totrans-760
  prefs: []
  type: TYPE_NORMAL
  zh: 现在整体来看这个电路，其总电流是100 mA（0.1 A），供电电压，一如既往，是5 V。将这个值代入欧姆定律，
- en: '[PRE29]'
  id: totrans-761
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The resistance provided by each resistor in a parallel circuit is reduced because
    each branch in a parallel circuit increases the total current in the circuit.
    Current is going up while voltage is constant: resistance goes down.'
  id: totrans-762
  prefs: []
  type: TYPE_NORMAL
  zh: 并联电路中每个电阻提供的电阻都会减小，因为并联电路中的每个分支都会增加电路中的总电流。电流在上升，而电压保持恒定：电阻在下降。
- en: '|  |'
  id: totrans-763
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Current dividers**'
  id: totrans-764
  prefs: []
  type: TYPE_NORMAL
  zh: '**电流分配器**'
- en: 'Any circuit that splits the current coming from the power source into more
    than one branch is called a *current divider*. The parallel circuit in the following
    figure is an example of a current divider: some current follows one branch while
    the rest follows the other.'
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: 任何将电源电流分成多个分支的电路都称为**电流分配器**。以下图中的并联电路是电流分配器的一个例子：一些电流沿着一个分支流动，其余的沿着另一个分支流动。
- en: '![](0074fig01.jpg)'
  id: totrans-766
  prefs: []
  type: TYPE_IMG
  zh: '![图片](0074fig01.jpg)'
- en: If the branches have unequal resistance, current will proportionally flow through
    each branch.
  id: totrans-767
  prefs: []
  type: TYPE_NORMAL
  zh: 如果分支的电阻不相等，电流将按比例流过每个分支。
- en: If a charge finds itself at a fork in the road and both available paths have
    the same resistance, the charge is equally likely to take either route (like the
    parallel circuit in [figure 3.28](#ch03fig28)). But if the resistance is unequal,
    more charges will opt for the road with less resistance—that is, more current
    will take the less-resistant branch.
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: 如果电荷发现自己处于道路的岔路口，并且两条可用的路径具有相同的电阻，电荷同样可能选择任何一条路线（就像[图3.28](#ch03fig28)中的并联电路）。但如果电阻不相等，更多的电荷会选择电阻较小的道路——也就是说，更多的电流会选择电阻较小的分支。
- en: 'You can calculate the total resistance in the circuit shown in this figure
    by looking at each branch in isolation and figuring out the circuit’s total current
    draw:'
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过单独查看每个分支并确定电路的总电流消耗来计算图中所示电路的总电阻：
- en: '[PRE30]'
  id: totrans-770
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Doing calculations for total resistance in this manner can become cumbersome
    as the number of branches increases. We won’t be architecting complex current
    dividers with lots of branches with different resistances, but if you’re the curious
    type, there’s a formula for calculating equivalent (total) resistance in any parallel
    circuit:'
  id: totrans-771
  prefs: []
  type: TYPE_NORMAL
  zh: 以这种方式计算总电阻，随着分支数量的增加可能会变得繁琐。我们不会设计带有许多不同电阻的复杂电流分配器，但如果你是好奇的类型，有一个公式可以计算任何并联电路中的等效（总）电阻：
- en: '[PRE31]'
  id: totrans-772
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '|  |'
  id: totrans-773
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: Some of this parallel-circuit calculation may seem pointlessly convoluted, but
    it does have useful applications.
  id: totrans-774
  prefs: []
  type: TYPE_NORMAL
  zh: 一些并联电路的计算可能看起来毫无意义地复杂，但它确实有有用的应用。
- en: 'Here’s the rub: each branch of the parallel circuit is provided with the same
    voltage. So if we take the series-circuit LED and add more branches to it (turning
    it into a parallel circuit—[figure 3.29](#ch03fig29)), each branch gets “its own”
    5 V to work with. This way, we can wire three, four, or even more LEDs on the
    same circuit and not run out of voltage like we would in a series circuit.'
  id: totrans-775
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的问题是：并联电路的每个分支都提供相同的电压。因此，如果我们把串联电路的LED添加更多分支（将其变成并联电路——[图3.29](#ch03fig29)），每个分支都会得到“它自己的”5
    V来工作。这样，我们可以在同一电路中连接三个、四个甚至更多的LED，而不会像串联电路那样电压耗尽。
- en: Figure 3.29\. In the schematic for the parallel-LED circuit, each of the branches
    A, B, C, and D is supplied with 5 V. Each branch receives 1/4 of the total current
    in the circuit.
  id: totrans-776
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.29。在并联LED电路的原理图中，分支A、B、C和D都供电5 V。每个分支接收电路总电流的1/4。
- en: '![](03fig29_alt.jpg)'
  id: totrans-777
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig29_alt.jpg)'
- en: 'Build the circuit: LEDs in parallel'
  id: totrans-778
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 构建电路：并联LED
- en: '|  |'
  id: totrans-779
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: What you’ll need
  id: totrans-780
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 你需要的东西
- en: '![](note.jpg)'
  id: totrans-781
  prefs: []
  type: TYPE_IMG
  zh: '![](note.jpg)'
- en: 1 Arduino Uno and USB cable
  id: totrans-782
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 Arduino Uno和USB线
- en: 4 standard red LEDs
  id: totrans-783
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4个标准红色LED
- en: 4 220 V resistors
  id: totrans-784
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4个220 V电阻
- en: 6 jumper wires
  id: totrans-785
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 6根跳线
- en: '|  |'
  id: totrans-786
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: '[Figure 3.30](#ch03fig30) shows a physical layout of the same circuit. To wire
    four LEDs on the same circuit, start with a fresh, clean breadboard and follow
    these steps:'
  id: totrans-787
  prefs: []
  type: TYPE_NORMAL
  zh: '[图3.30](#ch03fig30)显示了相同电路的物理布局。要在同一电路中连接四个LED，从一块干净的新面包板开始，按照以下步骤操作：'
- en: Connect the anode terminals of four LEDs to a hole in rows 2, 9, 16, and 23.
  id: totrans-788
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将四个LED的正极终端连接到2、9、16和23排的孔中。
- en: Plug the cathode ends into the same terminal row but on the other side of the
    gap (such that they aren’t electrically connected).
  id: totrans-789
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将阴极端插入同一排但位于间隙的另一侧（这样它们就不会电连接）。
- en: Run four red jumper wires from the positive power rail on the left side of the
    board to the anode row of each LED.
  id: totrans-790
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从板左侧的正电源轨运行四根红色跳线到每个LED的正极排。
- en: Connect a 220 V resistor from each LED’s cathode row to the negative power rail
    on the right side of the board.
  id: totrans-791
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将每个LED的阴极排连接到板右侧的负电源轨。
- en: Connect the power rails to the Uno’s 5 V and GND pins (using a red and black
    jumper wire, respectively).
  id: totrans-792
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用红色和黑色跳线将电源轨连接到Arduino Uno的5 V和GND引脚。
- en: Plug the Uno into USB or DC power.
  id: totrans-793
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Arduino Uno插入USB或直流电源。
- en: Figure 3.30\. Wiring LEDs in parallel allows you to wire more in a single circuit
    because each branch gets the same voltage (5 V).
  id: totrans-794
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图3.30。并联连接LED可以使你在单个电路中连接更多元件，因为每个分支都得到相同的电压（5 V）。
- en: '![](03fig30_alt.jpg)'
  id: totrans-795
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig30_alt.jpg)'
- en: If everything goes right, all four LEDs should happily light up.
  id: totrans-796
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切顺利，所有四个LED都应该愉快地发光。
- en: Parallel circuits have another useful feature. If you were to remove the red
    wire between the LED in row 2 and the power rail, the other 3 LEDs would still
    light up. The circuit still has three other complete paths it can use. Contrast
    this to a series circuit, where a single gap stops current from flowing to any
    component.
  id: totrans-797
  prefs: []
  type: TYPE_NORMAL
  zh: 并联电路还有一个有用的特性。如果你要从第 2 行的 LED 和电源轨之间的红色电线移除，其他 3 个 LED 仍然会亮起。电路仍然有其他三个完整的路径可以使用。这与串联电路形成对比，在串联电路中，一个单独的间隙会阻止电流流向任何组件。
- en: 3.2.6\. Powering your project with batteries
  id: totrans-798
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.6\. 使用电池为你的项目供电
- en: So far, you’ve been providing power to the breadboard using the Arduino Uno’s
    onboard 5 V power, but there are other ways to provide power to projects. One
    (obvious) option is to use batteries.
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你一直使用 Arduino Uno 板上的 5 V 电源为面包板供电，但还有其他提供电源的方法。一个（显然）的选项是使用电池。
- en: A single, 9 V battery is a convenient power source, and in the case of the LED
    circuits you’ve been building, it removes the reliance on a development board.
  id: totrans-800
  prefs: []
  type: TYPE_NORMAL
  zh: 单个 9 V 电池是一个方便的电源，在构建 LED 电路的情况下，它消除了对开发板的依赖。
- en: 'Build the circuit: 9 V powered LEDs'
  id: totrans-801
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 构建电路：9 V 供电 LED
- en: '|  |'
  id: totrans-802
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: What you’ll need
  id: totrans-803
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 你需要
- en: '![](note.jpg)'
  id: totrans-804
  prefs: []
  type: TYPE_IMG
  zh: '![](note.jpg)'
- en: 1 breadboard
  id: totrans-805
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1 个面包板
- en: 9 V battery and snap, with wires
  id: totrans-806
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 9 V 电池和夹子，带电线
- en: 4 standard red LEDs
  id: totrans-807
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4 个标准红色 LED
- en: 4 jumper wires
  id: totrans-808
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4 根跳线
- en: 4 560 V resistors
  id: totrans-809
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4 个 560 V 电阻
- en: '|  |'
  id: totrans-810
  prefs: []
  type: TYPE_TB
  zh: '|'
- en: With a 9 V battery, the supply voltage is (obviously) different than the Arduino’s
    5 V. That means we’ll need to use different resistors for the LEDs in the parallel
    circuit.
  id: totrans-811
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 9 V 电池时，供电电压（显然）不同于 Arduino 的 5 V。这意味着我们需要为并联电路中的 LED 使用不同的电阻。
- en: 'Recall that each branch in a parallel circuit “gets” the full 9 V supply voltage
    to work with, so you can calculate the resistor needed on each branch using Ohm’s
    law:'
  id: totrans-812
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下，在并联电路中，每个分支“获得”完整的 9 V 供电电压来工作，因此你可以使用欧姆定律计算每个分支所需的电阻：
- en: '[PRE32]'
  id: totrans-813
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: A 560 V resistor is the nearest common resistor value, and it will do fine (have
    you noticed there’s a bit of fudge room, as long as you round up?).
  id: totrans-814
  prefs: []
  type: TYPE_NORMAL
  zh: 560 V 电阻是最接近的常用电阻值，它将做得很好（你注意到有一些调整空间吗？只要向上取整？）。
- en: Disconnect the breadboard’s power rails from the Arduino and swap out each of
    the 220 V resistors in favor of the brawnier 560 V resistors. Now plug the battery
    case’s positive and negative wires into the breadboard’s power rails ([figure
    3.31](#ch03fig31)). All done!
  id: totrans-815
  prefs: []
  type: TYPE_NORMAL
  zh: 断开面包板的电源轨与 Arduino 的连接，并将每个 220 V 电阻更换为更强大的 560 V 电阻。现在将电池盒的正负电线插入面包板的电源轨（[图
    3.31](#ch03fig31)）。全部完成！
- en: Figure 3.31\. Powering the parallel LED circuit with a 9 V battery involves
    swapping out some resistors and connecting a 9 V battery snap to the power rails.
  id: totrans-816
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图 3.31\. 使用 9 V 电池为并联 LED 电路供电需要更换一些电阻，并将 9 V 电池夹子连接到电源轨上。
- en: '![](03fig31.jpg)'
  id: totrans-817
  prefs: []
  type: TYPE_IMG
  zh: '![](03fig31.jpg)'
- en: Summary
  id: totrans-818
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: The relationships between voltage, current, and resistance—as formalized in
    Ohm’s law—are the keys to understanding basic circuitry.
  id: totrans-819
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电压、电流和电阻之间的关系——如欧姆定律所正式化的——是理解基本电路的关键。
- en: Breadboards provide a tangible and convenient prototyping platform, with standard
    connection patterns, for trying out circuits.
  id: totrans-820
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 面包板提供了一个有形且方便的原理图平台，具有标准连接模式，用于尝试电路。
- en: A series circuit provides one single path for electrical flow. A parallel circuit
    has two or more paths.
  id: totrans-821
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 串联电路为电流流动提供一条单一的路径。并联电路有两个或更多路径。
- en: LEDs have a characteristic called *forward voltage drop*. When calculating the
    right resistor for an LED wired in series, first subtract this forward voltage
    drop from the supply voltage.
  id: totrans-822
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LED 有一个称为*正向电压降*的特性。在计算串联连接的 LED 所需的正确电阻时，首先从供电电压中减去这个正向电压降。
- en: In a series circuit, the current is equal at all points of the circuit, whereas
    in a parallel circuit, all branches have equal voltages.
  id: totrans-823
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在串联电路中，电流在电路的所有点上都是相等的，而在并联电路中，所有分支的电压都是相等的。
- en: 'In a series circuit, it’s straightforward to calculate total resistance in
    the circuit: add the resistor values together.'
  id: totrans-824
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在串联电路中，计算电路中的总电阻很简单：将电阻值相加。
- en: A circuit with more than one path splits up the current in the circuit and is
    called a *current divider*. Determining the total resistance in such a parallel
    circuit can be accomplished using a current-division formula.
  id: totrans-825
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有多个路径的电路会将电路中的电流分割，称为*电流分压器*。可以使用电流分配公式计算出这种并联电路的总电阻。
