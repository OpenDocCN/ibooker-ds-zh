- en: Lesson 33\. Customizing classes
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第33课\. 自定义类
- en: After reading [lesson 33](#ch33), you’ll be able to
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读完[第33课](#ch33)后，你将能够
- en: Add special Python methods to your classes
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向你的类中添加特殊的Python方法
- en: Use special operators such as `+`, `-`, `/`, and `*` on your classes
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的类中使用特殊运算符，如`+`、`-`、`/`和`*`
- en: You’ve been working with classes defined in the Python language since you wrote
    your first Python program. The most basic type of objects in the Python language,
    called *built-in types*, allowed you to use special operators on these types.
    For example, you used the `+` operator between two numbers. You were able to use
    the `[]` operator to index into a string or a list. You were able to use the `print()`
    statement on any of these types of objects, as well as on lists and dictionaries.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 自从你编写了第一个Python程序以来，你一直在使用Python语言中定义的类。Python语言中最基本的对象类型，称为*内置类型*，允许你在这些类型上使用特殊运算符。例如，你使用了`+`运算符在两个数字之间。你能够使用`[]`运算符索引字符串或列表。你能够在任何这些类型的对象上使用`print()`语句，以及列表和字典。
- en: '|  |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Consider this**'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**考虑这一点**'
- en: Name five operations you can do between integers.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列举五个可以在整数之间进行的操作。
- en: Name one operation you can do between two strings.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列举两个字符串之间可以进行的操作。
- en: Name one operation you can do between a string and an integer.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列举一个可以在字符串和整数之间进行的操作。
- en: 'Answer:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 答案：
- en: '`+, -, *, /, %`'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`+, -, *, /, %`'
- en: '`+`'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`+`'
- en: '`*`'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`*`'
- en: '|  |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: Each of these operations is represented in shorthand using a symbol. However,
    the symbol is only a shorthand notation. Each operation is actually a method that
    you can define to work with an object of a specific type.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 每个操作都使用符号进行简写表示。然而，符号只是一个简写符号。每个操作实际上是一个方法，你可以定义它来与特定类型的对象一起工作。
- en: 33.1\. Overriding a special method
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 33.1\. 重写特殊方法
- en: Every operation on an object is implemented in a class as a method. But you
    may have noticed that you use several shorthand notations when you work with simple
    object types such as `int`, `float`, and `str`. These shorthand notations are
    things like using the `+` or `-` or `*` or `/` operator between two such objects.
    Even something like `print()` with an object in the parentheses is shorthand notation
    for a method in a class. You can implement such methods in your own classes so
    that you can use shorthand notation on your own object types.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 对象上的每个操作都在类中以方法的形式实现。但你可能已经注意到，当你处理简单的对象类型，如`int`、`float`和`str`时，你使用了几个简写符号。这些简写符号就像在两个这样的对象之间使用`+`或`-`或`*`或`/`运算符一样。甚至像`print()`这样的操作，在括号中使用对象，也是类中方法的简写符号。你可以在自己的类中实现这样的方法，以便你可以在自己的对象类型上使用简写符号。
- en: '[Table 33.1](#ch33table01) lists a few special methods, but there are many
    more. Notice that all these special methods begin and end with double underscores.
    This is specific to the Python language, and other languages may have other conventions.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[表33.1](#ch33table01) 列出了一些特殊方法，但还有很多。请注意，所有这些特殊方法都以双下划线开始和结束。这是Python语言特有的，其他语言可能有不同的约定。'
- en: Table 33.1\. A few special methods in Python
  id: totrans-19
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 表33.1\. Python中的几个特殊方法
- en: '| Category | Operator | Method name |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| 类别 | 运算符 | 方法名 |'
- en: '| --- | --- | --- |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Mathematical operations | + - * / | __add__ __sub__ __mul__ __truediv__ |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| 数学运算 | + - * / | __add__ __sub__ __mul__ __truediv__ |'
- en: '| Comparisons | == < > | __eq__ __lt__ __gt__ |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| 比较运算 | == < > | __eq__ __lt__ __gt__ |'
- en: '| Others | print() **and** str() Create an object—for example, some_object
    = ClassName() | __str__ __init__ |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| 其他 | print() **和** str() 创建一个对象——例如，some_object = ClassName() | __str__ __init__
    |'
- en: To add the capability for a special operation to work with your class, you can
    *override* these special methods. Overriding means that you’ll implement the method
    in your own class and decide what the method will do, instead of the default behavior
    implemented by the generic Python object.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要使特殊操作能够与你的类一起工作，你可以*重写*这些特殊方法。重写意味着你将在自己的类中实现该方法，并决定该方法将做什么，而不是由通用Python对象实现的默认行为。
- en: Begin by creating a new type of object, representing a fraction. A fraction
    has a numerator and a denominator. Therefore, the data attributes of a `Fraction`
    object are two integers. The following listing shows a basic definition of how
    the `Fraction` class might look.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 首先创建一个新类型的对象，表示一个分数。一个分数有一个分子和一个分母。因此，`Fraction`对象的属性是两个整数。以下列表展示了`Fraction`类的基本定义。
- en: Listing 33.1\. Definition for the `Fraction` class
  id: totrans-27
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表33.1\. `Fraction`类的定义
- en: '[PRE0]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '***1* The initialization method takes in two parameters.**'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 初始化方法接受两个参数。**'
- en: '***2* Initializes data attributes with the parameters**'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 使用参数初始化数据属性**'
- en: 'With this definition, you can now create two `Fraction` objects and try to
    add them together:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这个定义，你现在可以创建两个 `Fraction` 对象并尝试将它们相加：
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Adding 1/2 and 1/4 should give 3/4\. But when you run the snippet, you get
    this error:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 将 1/2 和 1/4 相加应该得到 3/4。但当你运行代码片段时，你得到这个错误：
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This tells you that Python doesn’t know how to add two `Fraction` objects together.
    This error makes sense, because you never defined this operation for a `Fraction`
    object type.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这告诉你 Python 不知道如何将两个 `Fraction` 对象相加。这个错误是有意义的，因为你从未为 `Fraction` 对象类型定义过这个操作。
- en: 'To tell Python how to use the `+` operator, you need to implement the special
    method `__add__` (with double underscores before and after the name `add`). Addition
    works on two objects: one is the object you’re calling the method on, and the
    other is a parameter to the method. Inside the method, you perform the addition
    of two `Fraction` objects by referencing the numerators and denominators of both
    objects, as in the following listing.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要告诉 Python 如何使用 `+` 操作符，你需要实现特殊方法 `__add__`（在名称 `add` 前后使用双下划线）。加法作用于两个对象：一个是调用该方法的对象，另一个是方法的参数。在方法内部，你通过引用两个对象的分子和分母来执行两个
    `Fraction` 对象的加法，如下所示。
- en: Listing 33.2\. Methods to add and multiply two `Fraction` objects
  id: totrans-37
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 33.2\. 添加和乘法两个 `Fraction` 对象的方法
- en: '[PRE3]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '***1* Defines special method to implement the + operator between two Fraction
    objects**'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 定义特殊方法以实现两个 `Fraction` 对象之间的 + 操作符**'
- en: '***2* Breaks up the line into two lines by using a backslash**'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 使用反斜杠将行拆分为两行**'
- en: '***3* Calculates the numerator from the addition**'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***3* 从加法中计算分子**'
- en: '***4* Calculates the denominator from the addition**'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***4* 从加法中计算分母**'
- en: '***5* Returns a new Fraction object, created using the new numerator and denominator**'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***5* 返回一个新的 `Fraction` 对象，使用新的分子和分母创建**'
- en: '***6* Method to multiply two Fraction objects**'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***6* 乘法两个 `Fraction` 对象的方法**'
- en: '|  |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 33.1**'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 33.1**'
- en: '**[Q1:](kindle_split_056.html#app01qa132q0a1)**'
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa132q0a1)**'
- en: ''
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Write a method for the `Fraction` object to use the `–` operator between two
    `Fraction` objects.
  id: totrans-49
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 为 `Fraction` 对象编写一个方法，使用两个 `Fraction` 对象之间的 `-` 操作符。
- en: '|  |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 33.2\. Overriding print() to work with your class
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 33.2\. 覆盖 print() 以与你的类一起使用
- en: 'Now that you defined the `+` operator between `Fraction` objects, you can try
    the same code as before:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经定义了 `Fraction` 对象之间的 `+` 操作符，你可以尝试之前的相同代码：
- en: '[PRE4]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This code doesn’t give an error anymore. Instead, it prints the type of the
    object and its memory location:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码不再报错。相反，它打印了对象的类型及其内存位置：
- en: '[PRE5]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: But this isn’t informative at all. You’d rather see the value of the fraction!
    You need to implement another special function, one that tells Python how to print
    an object of your type. To do this, you implement the special method `__str__`,
    as in the next listing.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 但这根本没有任何信息量。你更希望看到分数的值！你需要实现另一个特殊函数，一个告诉 Python 如何打印你类型对象的函数。为此，你实现特殊方法 `__str__`，如下所示。
- en: Listing 33.3\. Method to print a `Fraction` object
  id: totrans-57
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 列表 33.3\. 打印 `Fraction` 对象的方法
- en: '[PRE6]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '***1* Defines method to print a Fraction object**'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***1* 定义打印 `Fraction` 对象的方法**'
- en: '***2* Returns a string, what to print**'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***2* 返回一个字符串，要打印的内容**'
- en: 'Now, when you use `print` on a `Fraction` object, or when you use `str()` to
    convert your object to a string, it’ll call the method `__str__`. For example,
    the following code prints `1/2` instead of the memory location:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当你对一个 `Fraction` 对象使用 `print`，或者当你使用 `str()` 将你的对象转换为字符串时，它将调用 `__str__`
    方法。例如，以下代码打印 `1/2` 而不是内存位置：
- en: '[PRE7]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following creates a string object with the value 1/2:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 以下创建了一个值为 1/2 的字符串对象：
- en: '[PRE8]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '|  |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 33.2**'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查 33.2**'
- en: '**[Q1:](kindle_split_056.html#app01qa133q0a1)**'
  id: totrans-67
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q1:](kindle_split_056.html#app01qa133q0a1)**'
- en: ''
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Change the `__str__` method for a `Fraction` object to print the numerator
    on one line, two dashes on the next, and the denominator on a third line. The
    line `print(Fraction(1,2))` prints this:'
  id: totrans-69
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 将 `Fraction` 对象的 `__str__` 方法更改为在一行上打印分子，在下一行打印两个破折号，在第三行打印分母。行 `print(Fraction(1,2))`
    打印如下：
- en: ''
  id: totrans-70
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-71
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '|  |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 33.3\. Behind the scenes
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 33.3\. 背后发生的事情
- en: 'What exactly happens when you use a special operator? Let’s look at the details,
    and what happens when you add two `Fraction` objects:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用特殊操作符时，究竟发生了什么？让我们看看细节，以及当你添加两个 `Fraction` 对象时会发生什么：
- en: '[PRE10]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Consider this line:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑这一行：
- en: '[PRE11]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'It takes the first operand, `half`, and applies the special method `__add__`
    to it. That’s equivalent to the following:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 它取第一个操作数`half`，并对其应用特殊方法`__add__`。这相当于以下代码：
- en: '[PRE12]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Additionally, every method call can be rewritten by using the class name and
    explicitly giving the method a parameter for the `self` parameter. The preceding
    line is equivalent to this:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，每个方法调用都可以通过使用类名并显式地为`self`参数提供一个参数来重写。前面的行等价于以下代码：
- en: '[PRE13]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Despite being called a *special method*, all the methods that start and end
    with double underscores are regular methods. They’re called on an object, take
    parameters, and return a value. What makes them special is that there’s another
    way to call the methods. You can either call them using a special operator (for
    example, a mathematical symbol) or using a fairly well-known function (for example,
    `len()` or `str()` or `print()`, among others). This shorthand notation is often
    more intuitive for others if they’re reading code than if they were to read the
    formal function call notation.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管被称为*特殊方法*，但所有以双下划线开始和结束的方法都是普通方法。它们在对象上被调用，接受参数，并返回一个值。使它们特殊的是，还有另一种调用方法的方式。你可以使用特殊运算符（例如，数学符号）或使用相当知名的功能（例如，`len()`或`str()`或`print()`等）来调用它们。这种简写符号在其他人阅读代码时通常比阅读正式函数调用符号更直观。
- en: '|  |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Thinking like a programmer**'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '**像程序员一样思考**'
- en: One nice goal that you should have as a programmer is to make life easier for
    other programmers that may use classes you define. This involves documenting your
    classes, methods, and whenever possible, implementing special methods that allow
    others to use your class in an intuitive way.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 作为程序员，你应该有一个很好的目标，那就是让使用你定义的类的其他程序员的生活更轻松。这包括记录你的类和方法，以及在可能的情况下，实现特殊方法，以便其他人可以直观地使用你的类。
- en: '|  |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '|  |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '**Quick check 33.3**'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**快速检查33.3**'
- en: 'Rewrite each of the following lines in two ways: by calling the method on an
    object and by calling the method by using the class name. Assume you start with
    this:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 以两种方式重写以下每一行：通过在对象上调用方法，以及通过使用类名调用方法。假设你开始于以下代码：
- en: '[PRE14]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '**[1](kindle_split_056.html#app01qa134q0a1)**'
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[1](kindle_split_056.html#app01qa134q0a1)**'
- en: ''
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`quarter * half`'
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`quarter * half`'
- en: '**[2](kindle_split_056.html#app01qa134q0a2)**'
  id: totrans-94
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[2](kindle_split_056.html#app01qa134q0a2)**'
- en: ''
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`print(quarter)`'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`print(quarter)`'
- en: '**[3](kindle_split_056.html#app01qa134q0a3)**'
  id: totrans-97
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[3](kindle_split_056.html#app01qa134q0a3)**'
- en: ''
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`print(half * half)`'
  id: totrans-99
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`print(half * half)`'
- en: '|  |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: 33.4\. What can you do with classes?
  id: totrans-101
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 33.4. 你可以用类做什么？
- en: You’ve seen the details and the syntax behind creating your own object types
    using Python classes. This section will show you examples of classes that you
    may want to create in certain situations.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经看到了使用Python类创建自己的对象类型的细节和语法。本节将展示在某些情况下你可能想要创建的类的示例。
- en: 33.4.1\. Scheduling events
  id: totrans-103
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 33.4.1. 排程事件
- en: Say that you’re asked to schedule a series of events. For example, you’re going
    to a movie festival and you want to arrange the movies in your schedule.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你被要求排程一系列事件。例如，你将参加一个电影节，你想要安排你的日程表中的电影。
- en: Without using classes
  id: totrans-105
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 不使用类
- en: If you didn’t use classes, you could use one list to hold all the movies you
    want to see. Each element in the list is a movie to see. The relevant information
    regarding a movie includes its name, its start time, end time, and perhaps a critic’s
    rating. This information could be stored in a tuple as the element of the list.
    Notice that almost right away the list becomes cumbersome to use. If you wanted
    to access the ratings of every movie, you’d rely on indexing twice—first into
    the list of movies and then into the tuple to retrieve the rating.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有使用类，你可以使用一个列表来保存你想要观看的所有电影。列表中的每个元素都是一个要观看的电影。关于电影的相关信息包括其名称、开始时间、结束时间，以及可能还有评论家的评分。这些信息可以作为列表的元素存储在元组中。注意，几乎立即列表就变得难以使用。如果你想要访问每部电影的评分，你将依赖于两次索引——首先索引电影列表，然后索引元组以检索评分。
- en: Using classes
  id: totrans-107
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 使用类
- en: 'Knowing what you know about classes, it’s tempting to make every object into
    a class. In the scheduling problem, you could make the following classes:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 了解类之后，你可能会有把每个对象都变成类的冲动。在排程问题中，你可以创建以下类：
- en: '`Time` class representing a time object. An object of this type would have
    data attributes: hours (`int`), minutes (`int`), and seconds (`int`). Operations
    on this object could be to find the difference between two times, or to convert
    to total number of hours, minutes, or seconds.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Time` 类表示一个时间对象。此类对象将具有数据属性：小时（`int`）、分钟（`int`）和秒（`int`）。对此对象的操作可以是找出两个时间之间的差异，或者将其转换为总小时数、分钟数或秒数。'
- en: '`Movie` class representing a movie object. An object of this type would have
    data attributes: name (`string`), start time (`Time`), end time (`Time`), and
    rating (`int`). Operations on this class would be to check whether two movies
    overlap in time, or whether two movies have a high rating.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Movie` 类表示一个电影对象。此类对象将具有数据属性：名称（`string`）、开始时间（`Time`）、结束时间（`Time`）和评分（`int`）。对此类的操作将是检查两个电影是否在时间上重叠，或者两个电影的评分是否很高。'
- en: With these two classes, you can abstract away some of the annoying details of
    scheduling a set of movies during a certain period. Now, you can create a list
    of `Movie` objects. If you need to index into the list (to access a rating, for
    example), you can use nicely named methods defined in the movie class.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这两个类，你可以抽象出在特定时间段内安排一系列电影的一些烦人细节。现在，你可以创建一个 `Movie` 对象列表。如果你需要索引列表（例如访问评分），你可以使用电影类中定义的命名方法。
- en: Using too many classes
  id: totrans-112
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 使用过多的类
- en: It’s important to understand how many classes are too many. For example, you
    could create a class to represent an `Hour`. But this abstraction doesn’t add
    any value because its representation would be an integer, in which case you can
    use the integer itself.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 理解有多少类太多是很重要的。例如，你可以创建一个类来表示 `Hour`。但这个抽象没有增加任何价值，因为它的表示将是一个整数，在这种情况下，你可以直接使用这个整数。
- en: Summary
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this lesson, my objective was to teach you how to define special methods
    that allow you to use multiple objects and use operators on your object types.
    Here are the major takeaways:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在本课中，我的目标是教你如何定义特殊方法，这些方法允许你使用多个对象并在你的对象类型上使用运算符。以下是主要收获：
- en: Special methods have a certain name and use double underscores before and after
    the name. Other languages may take different approaches.
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特殊方法有特定的名称，并在名称前后使用双下划线。其他语言可能采用不同的方法。
- en: Special methods have a shorthand notation.
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特殊方法有简写符号。
- en: Let’s see if you got this...
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看你是否掌握了这个...
- en: '**[Q33.1](kindle_split_056.html#app01qa135q0a1)**'
  id: totrans-119
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**[Q33.1](kindle_split_056.html#app01qa135q0a1)**'
- en: ''
  id: totrans-120
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Write a method to allow you to use the `print` statement on a `Circle` and
    a `Stack`. Your `Stack`’s `print` should print each object in the same way that
    `prettyprint` does in [lesson 32](kindle_split_048.html#ch32). Your `Circle print`
    should print the string `"circle: 1"` (or whatever the radius of the circle is).
    You’ll have to implement the `__str__` method in the `Stack` class and the `Circle`
    class. For example, the following lines'
  id: totrans-121
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '编写一个方法，允许你在 `Circle` 和 `Stack` 上使用 `print` 语句。你的 `Stack` 的 `print` 应该以与 [第
    32 课](kindle_split_048.html#ch32) 中的 `prettyprint` 相同的方式打印每个对象。你的 `Circle print`
    应该打印字符串 `"circle: 1"`（或圆的半径是多少）。你必须实现 `Stack` 类和 `Circle` 类中的 `__str__` 方法。例如，以下行'
- en: ''
  id: totrans-122
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-123
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE15]'
- en: ''
  id: totrans-124
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'should print this:'
  id: totrans-125
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 应该打印这个：
- en: ''
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-127
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE16]'
